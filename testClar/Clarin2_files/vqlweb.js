/*! BEGIN Core */
/*! BEGIN Underscore */
(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,w=Object.keys,_=i.bind,j=function(n){return n instanceof j?n:this instanceof j?void(this._wrapped=n):new j(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):n._=j,j.VERSION="1.6.0";var A=j.each=j.forEach=function(n,t,e){if(null==n)return n;if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a=j.keys(n),u=0,i=a.length;i>u;u++)if(t.call(e,n[a[u]],a[u],n)===r)return;return n};j.map=j.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var O="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=j.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},j.reduceRight=j.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=j.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=j.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},j.find=j.detect=function(n,t,r){var e;return k(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},j.filter=j.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},j.reject=function(n,t,r){return j.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},j.every=j.all=function(n,t,e){t||(t=j.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var k=j.some=j.any=function(n,t,e){t||(t=j.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};j.contains=j.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:k(n,function(n){return n===t})},j.invoke=function(n,t){var r=o.call(arguments,2),e=j.isFunction(t);return j.map(n,function(n){return(e?t:n[t]).apply(n,r)})},j.pluck=function(n,t){return j.map(n,j.property(t))},j.where=function(n,t){return j.filter(n,j.matches(t))},j.findWhere=function(n,t){return j.find(n,j.matches(t))},j.max=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var e=-1/0,u=-1/0;return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;o>u&&(e=n,u=o)}),e},j.min=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var e=1/0,u=1/0;return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;u>o&&(e=n,u=o)}),e},j.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=j.random(r++),e[r-1]=e[t],e[t]=n}),e},j.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=j.values(n)),n[j.random(n.length-1)]):j.shuffle(n).slice(0,Math.max(0,t))};var E=function(n){return null==n?j.identity:j.isFunction(n)?n:j.property(n)};j.sortBy=function(n,t,r){return t=E(t),j.pluck(j.map(n,function(n,e,u){return{value:n,index:e,criteria:t.call(r,n,e,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=E(r),A(t,function(i,a){var o=r.call(e,i,a,t);n(u,o,i)}),u}};j.groupBy=F(function(n,t,r){j.has(n,t)?n[t].push(r):n[t]=[r]}),j.indexBy=F(function(n,t,r){n[t]=r}),j.countBy=F(function(n,t){j.has(n,t)?n[t]++:n[t]=1}),j.sortedIndex=function(n,t,r,e){r=E(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},j.toArray=function(n){return n?j.isArray(n)?o.call(n):n.length===+n.length?j.map(n,j.identity):j.values(n):[]},j.size=function(n){return null==n?0:n.length===+n.length?n.length:j.keys(n).length},j.first=j.head=j.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:o.call(n,0,t)},j.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},j.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},j.rest=j.tail=j.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},j.compact=function(n){return j.filter(n,j.identity)};var M=function(n,t,r){return t&&j.every(n,j.isArray)?c.apply(r,n):(A(n,function(n){j.isArray(n)||j.isArguments(n)?t?a.apply(r,n):M(n,t,r):r.push(n)}),r)};j.flatten=function(n,t){return M(n,t,[])},j.without=function(n){return j.difference(n,o.call(arguments,1))},j.partition=function(n,t){var r=[],e=[];return A(n,function(n){(t(n)?r:e).push(n)}),[r,e]},j.uniq=j.unique=function(n,t,r,e){j.isFunction(t)&&(e=r,r=t,t=!1);var u=r?j.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:j.contains(a,r))||(a.push(r),i.push(n[e]))}),i},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(n){var t=o.call(arguments,1);return j.filter(j.uniq(n),function(n){return j.every(t,function(t){return j.contains(t,n)})})},j.difference=function(n){var t=c.apply(e,o.call(arguments,1));return j.filter(n,function(n){return!j.contains(t,n)})},j.zip=function(){for(var n=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=j.pluck(arguments,""+r);return t},j.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},j.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=j.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},j.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},j.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var R=function(){};j.bind=function(n,t){var r,e;if(_&&n.bind===_)return _.apply(n,o.call(arguments,1));if(!j.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));R.prototype=n.prototype;var u=new R;R.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},j.partial=function(n){var t=o.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===j&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},j.bindAll=function(n){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){n[t]=j.bind(n[t],n)}),n},j.memoize=function(n,t){var r={};return t||(t=j.identity),function(){var e=t.apply(this,arguments);return j.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},j.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},j.defer=function(n){return j.delay.apply(j,[n,1].concat(o.call(arguments,1)))},j.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:j.now(),a=null,i=n.apply(e,u),e=u=null};return function(){var l=j.now();o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u),e=u=null):a||r.trailing===!1||(a=setTimeout(c,f)),i}},j.debounce=function(n,t,r){var e,u,i,a,o,c=function(){var l=j.now()-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u),i=u=null))};return function(){i=this,u=arguments,a=j.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u),i=u=null),o}},j.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},j.wrap=function(n,t){return j.partial(t,n)},j.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},j.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},j.keys=function(n){if(!j.isObject(n))return[];if(w)return w(n);var t=[];for(var r in n)j.has(n,r)&&t.push(r);return t},j.values=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},j.pairs=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},j.invert=function(n){for(var t={},r=j.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},j.functions=j.methods=function(n){var t=[];for(var r in n)j.isFunction(n[r])&&t.push(r);return t.sort()},j.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},j.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},j.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)j.contains(r,u)||(t[u]=n[u]);return t},j.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]===void 0&&(n[r]=t[r])}),n},j.clone=function(n){return j.isObject(n)?j.isArray(n)?n.slice():j.extend({},n):n},j.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof j&&(n=n._wrapped),t instanceof j&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(o)&&o instanceof o)&&"constructor"in n&&"constructor"in t)return!1;r.push(n),e.push(t);var c=0,f=!0;if("[object Array]"==u){if(c=n.length,f=c==t.length)for(;c--&&(f=S(n[c],t[c],r,e)););}else{for(var s in n)if(j.has(n,s)&&(c++,!(f=j.has(t,s)&&S(n[s],t[s],r,e))))break;if(f){for(s in t)if(j.has(t,s)&&!c--)break;f=!c}}return r.pop(),e.pop(),f};j.isEqual=function(n,t){return S(n,t,[],[])},j.isEmpty=function(n){if(null==n)return!0;if(j.isArray(n)||j.isString(n))return 0===n.length;for(var t in n)if(j.has(n,t))return!1;return!0},j.isElement=function(n){return!(!n||1!==n.nodeType)},j.isArray=x||function(n){return"[object Array]"==l.call(n)},j.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){j["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),j.isArguments(arguments)||(j.isArguments=function(n){return!(!n||!j.has(n,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(n){return"function"==typeof n}),j.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},j.isNaN=function(n){return j.isNumber(n)&&n!=+n},j.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},j.isNull=function(n){return null===n},j.isUndefined=function(n){return n===void 0},j.has=function(n,t){return f.call(n,t)},j.noConflict=function(){return n._=t,this},j.identity=function(n){return n},j.constant=function(n){return function(){return n}},j.property=function(n){return function(t){return t[n]}},j.matches=function(n){return function(t){if(t===n)return!0;for(var r in n)if(n[r]!==t[r])return!1;return!0}},j.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},j.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},j.now=Date.now||function(){return(new Date).getTime()};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};T.unescape=j.invert(T.escape);var I={escape:new RegExp("["+j.keys(T.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(T.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(n){j[n]=function(t){return null==t?"":(""+t).replace(I[n],function(t){return T[n][t]})}}),j.result=function(n,t){if(null==n)return void 0;var r=n[t];return j.isFunction(r)?r.call(n):r},j.mixin=function(n){A(j.functions(n),function(t){var r=j[t]=n[t];j.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(j,n))}})};var N=0;j.uniqueId=function(n){var t=++N+"";return n?n+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(n,t,r){var e;r=j.defaults({},r,j.templateSettings);var u=new RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(D,function(n){return"\\"+B[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,j);var c=function(n){return e.call(this,n,j)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},j.chain=function(n){return j(n).chain()};var z=function(n){return this._chain?j(n).chain():n};j.mixin(j),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];j.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];j.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return j})}).call(this);(function(){
/*! BEGIN CoreSlim */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'tabcoreslim');var b=function(){};b.__typeName='tab.EscapingUtil';b.escapeHtml=function(e){var f=ss.coalesce(e,'');f=f.replace(new RegExp('&','g'),'&amp;');f=f.replace(new RegExp('<','g'),'&lt;');f=f.replace(new RegExp('>','g'),'&gt;');f=f.replace(new RegExp('"','g'),'&quot;');f=f.replace(new RegExp("'",'g'),'&#39;');f=f.replace(new RegExp('/','g'),'&#47;');return f};global.tab.EscapingUtil=b;var c=function(){};c.__typeName='tab.ScriptEx';global.tab.ScriptEx=c;var d=function(e){this.$0=null;this.$0=e};d.__typeName='tab.WindowHelper';d.get_windowSelf=function(){return window.self};d.get_selection=function(){if(typeof(window['getSelection'])==='function'){return window.getSelection()}else if(typeof(document['getSelection'])==='function'){return document.getSelection()}return null};d.close=function(e){e.close()};d.getOpener=function(e){return e.opener};d.getLocation=function(e){return e.location};d.getPathAndSearch=function(e){return e.location.pathname+e.location.search};d.setLocationHref=function(e,f){e.location.href=f};d.locationReplace=function(e,f){e.location.replace(f)};d.open=function(e,f,g){return window.open(e,f,g)};d.reload=function(e,f){e.location.reload(f)};d.requestAnimationFrame=function(e){return d.$c(e)};d.cancelAnimationFrame=function(e){if(ss.isValue(e)){d.$b(e)}};d.setTimeout=function(e,f){window.setTimeout(e,f)};d.addListener=function(e,f,g){if('addEventListener'in e){e.addEventListener(f,g,false)}else{e.attachEvent('on'+f,g)}};d.removeListener=function(e,f,g){if('removeEventListener'in e){e.removeEventListener(f,g,false)}else{e.detachEvent('on'+f,g)}};d.$0=function(){var e=0;d.$c=function(f){var g=(new Date).getTime();var h=Math.max(0,16-(g-e));e=g+h;var i=window.setTimeout(f,h);return i}};d.clearSelection=function(){var e=d.get_selection();if(ss.isValue(e)){if(typeof(e['removeAllRanges'])==='function'){e.removeAllRanges()}else if(typeof(e['empty'])==='function'){e['empty']()}}};global.tab.WindowHelper=d;ss.initClass(b,a,{});ss.initClass(c,a,{});ss.initClass(d,a,{get_pageXOffset:function(){return d.$7(this.$0)},get_pageYOffset:function(){return d.$8(this.$0)},get_clientWidth:function(){return d.$2(this.$0)},get_clientHeight:function(){return d.$1(this.$0)},get_innerWidth:function(){return d.$4(this.$0)},get_outerWidth:function(){return d.$6(this.$0)},get_innerHeight:function(){return d.$3(this.$0)},get_outerHeight:function(){return d.$5(this.$0)},get_screenLeft:function(){return d.$9(this.$0)},get_screenTop:function(){return d.$a(this.$0)}});(function(){d.$4=null;d.$3=null;d.$2=null;d.$1=null;d.$7=null;d.$8=null;d.$9=null;d.$a=null;d.$6=null;d.$5=null;d.$c=null;d.$b=null;if('innerWidth'in window){d.$4=function(m){return m.innerWidth}}else{d.$4=function(m){return m.document.documentElement.offsetWidth}}if('outerWidth'in window){d.$6=function(m){return m.outerWidth}}else{d.$6=d.$4}if('innerHeight'in window){d.$3=function(m){return m.innerHeight}}else{d.$3=function(m){return m.document.documentElement.offsetHeight}}if('outerHeight'in window){d.$5=function(m){return m.outerHeight}}else{d.$5=d.$3}if('clientWidth'in window){d.$2=function(m){return m['clientWidth']}}else{d.$2=function(m){return m.document.documentElement.clientWidth}}if('clientHeight'in window){d.$1=function(m){return m['clientHeight']}}else{d.$1=function(m){return m.document.documentElement.clientHeight}}if(ss.isValue(window.self.pageXOffset)){d.$7=function(m){return m.pageXOffset}}else{d.$7=function(m){return m.document.documentElement.scrollLeft}}if(ss.isValue(window.self.pageYOffset)){d.$8=function(m){return m.pageYOffset}}else{d.$8=function(m){return m.document.documentElement.scrollTop}}if('screenLeft'in window){d.$9=function(m){return m.screenLeft}}else{d.$9=function(m){return m.screenX}}if('screenTop'in window){d.$a=function(m){return m.screenTop}}else{d.$a=function(m){return m.screenY}}{var e='requestAnimationFrame';var f='cancelAnimationFrame';var g=['ms','moz','webkit','o'];var h=null;var i=null;if(e in window){h=e}if(f in window){i=f}for(var j=0;j<g.length&&(ss.isNullOrUndefined(h)||ss.isNullOrUndefined(i));++j){var k=g[j];var l=k+'RequestAnimationFrame';if(ss.isNullOrUndefined(h)&&l in window){h=l}if(ss.isNullOrUndefined(i)){l=k+'CancelAnimationFrame';if(l in window){i=l}l=k+'CancelRequestAnimationFrame';if(l in window){i=l}}}if(ss.isValue(h)){d.$c=function(m){return window[h](m)}}else{d.$0()}if(ss.isValue(i)){d.$b=function(m){window[i](m)}}else{d.$b=function(m){window.clearTimeout(m)}}}})()})();(function(){'dont use strict';var a={};global.tab=global.tab||{};global.tableau=global.tableau||{};global.tableau.types=global.tableau.types||{};global.tableau.util=global.tableau.util||{};ss.initAssembly(a,'vqlcore');var b=function(){};b.__typeName='ColumnClass';global.ColumnClass=b;var c=function(){};c.__typeName='DrillState';global.DrillState=c;var d=function(){};d.__typeName='SelectAction';global.SelectAction=d;$.fn.focusDelayed=function(e,bx){this.each(function(by,bz){window.setTimeout(function(){$(bz).focus();if(ss.isValue(bx)){bx.call(bz)}},e)})};$.expr.filters.focusable=function(e){return f.$0(e,!isNaN(parseInt($(e).attr('tabindex'),10)))};$.expr.filters.tabbable=function(e){var bx=parseInt($(e).attr('tabindex'),10);var by=isNaN(bx);return(by||bx>=0)&&f.$0(e,!by)};var f=function(){};f.__typeName='tab.$0';f.$0=function(e,bx){var by=e.nodeName.toLowerCase();if(by==='area'){return false}var bz=bx;var bA=new RegExp('input|select|textarea|button|object');if(bA.test(by)){bz=!e.disabled}else if(by==='a'){bz=!ss.isNullOrEmptyString(e.href)||bx}return bz&&f.$1(e)};f.$1=function(e){var bx=$(e).parents().andSelf().filter(ss.thisFix(function(by,bz){var bA=$(by);return bA.css('visibility')==='hidden'||$.expr.filters.hidden(bA)}));return bx.length===0};var g=function(){this.$0=null;this.$0=[]};g.__typeName='tab.BaseLogAppender';global.tab.BaseLogAppender=g;var h=function(){};h.__typeName='tab.BrowserSupport';h.get_getComputedStyle=function(){return'getComputedStyle'in window};h.get_addEventListener=function(){return'addEventListener'in document};h.get_selectStart=function(){return h.$H};h.get_touch=function(){return h.$L};h.get_dataUri=function(){return h.$l};h.get_postMessage=function(){return h.$F};h.get_historyApi=function(){return h.$q};h.get_consoleLogFormating=function(){return h.$g};h.get_isMobile=function(){return h.$t||h.$x};h.get_isIos=function(){return h.$x};h.get_isAndroid=function(){return h.$t};h.get_isChrome=function(){return h.$u};h.get_isMac=function(){return h.$z};h.get_isIE=function(){return h.$w};h.get_isFF=function(){return h.$v};h.get_isOpera=function(){return h.$B};h.get_isSafari=function(){return h.$C};h.get_isWindows=function(){return h.$E};h.get_browserVersion=function(){return h.$r};h.get_safariVersion=function(){return h.$G};h.get_iosVersion=function(){return h.$s};h.get_raisesEventOnImageReassignment=function(){return!h.$C};h.get_imageLoadIsSynchronous=function(){return h.$w};h.get_useAlternateHitStrategy=function(){return h.$J};h.get_pointerEvents=function(){return h.$D||h.get_isFF()};h.get_cssTransform=function(){return ss.isValue(h.$h)};h.get_cssTransformName=function(){return h.$h};h.get_cssTransitionName=function(){return h.$i};h.get_cssTranslate2D=function(){return h.$j};h.get_cssTranslate3D=function(){return h.$k};h.get_nativeJSONSupport=function(){return typeof(JSON)!=='undefined'&&'parse'in JSON};h.get_backingStoragePixelRatio=function(){return h.$e};h.get_devicePixelRatio=function(){return h.$p};h.get_canvasLinePattern=function(){return h.$f};h.get_dateInput=function(){return h.$m};h.get_dateTimeInput=function(){return h.$n};h.get_dateTimeLocalInput=function(){return h.$o};h.get_timeInput=function(){return h.$K};h.get_setSelectionRange=function(){return h.$I};h.get_mouseWheelEvent=function(){var e;if('onwheel'in window.document.documentElement){e='wheel'}else if('onmousewheel'in window.document.documentElement){e='mousewheel'}else{e='MozMousePixelScroll'}return e};h.get_mouseCapture=function(){return'releaseCapture'in document};h.get_orientationChange=function(){return'onorientationchange'in window};h.get_isGeolocationSupported=function(){return ss.isValue(window.navigator.geolocation)};h.detectBrowserSupport=function(){var e=document.body;var bx=document.createElement('div');e.appendChild(bx);h.$H='onselectstart'in bx;e.removeChild(bx).style.display='none';h.$F='postMessage'in window;h.$q=typeof(window.history['pushState'])==='function'&&typeof(window.history['replaceState'])==='function';h.$5();h.$3();h.$1();h.$b();h.$a();h.$8();h.$7();h.$0();h.$6();h.$2();h.$9()};h.getOrigin=function(e){var bx=e.origin;if(ss.isNullOrUndefined(bx)){bx=e.protocol+'//'+e.host}return bx};h.doPostMessageWithContext=function(e){var bx=tabBootstrap.Utility.doPostMessageWithContext(e);if(!bx){}};h.$5=function(){var e=$('<img />');var bx=e[0];e.bind('load error',function(){h.$l=bx.width===1&&bx.height===1});bx.src='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=='};h.$8=function(){var e=window.document.body;if(h.$D&&h.get_isMobile()){var bx=$('<div></div>');bx.css(ss.mkdict(['position','absolute','top','300px','left','300px','width','25px','height','25px','z-index','10000']));var by=bx.get(0);try{e.appendChild(by);h.$J=!ss.referenceEquals(document.elementFromPoint(310,310),by)}catch(bz){}finally{bx.remove()}}};h.$3=function(){try{if(ss.isValue(window.console&&ss.isValue(window.console.log))){h.$g=window.navigator.userAgent.indexOf('iPad')<0}else{h.$g=false}}catch(e){h.$g=false}};h.$1=function(){var e=h.$c();h.$y=e.indexOf('Konqueror')>=0;h.$D=e.indexOf('WebKit')>=0;h.$u=e.indexOf('Chrome')>=0;h.$C=e.indexOf('Safari')>=0&&!h.$u;h.$B=e.indexOf('Opera')>=0;if(h.$C){var bx=e.match(new RegExp('\\bVersion\\/(\\d+\\.\\d+)'));if(ss.isValue(bx)){h.$G=parseFloat(bx[1])}}h.$r=0;h.$w=false;var by=e.match(new RegExp('\\bMSIE (\\d+\\.\\d+)'));if(ss.isValue(by)){h.$w=true;h.$r=parseFloat(by[1])}if(!h.$w&&!h.$B&&(e.indexOf('Trident')>=0||e.indexOf('Edge/')>=0)){var bz=e.match(new RegExp('\\brv:(\\d+\\.\\d+)'));var bA=e.match(new RegExp('Edge/(\\d+\\.\\d+)'));if(ss.isValue(bz)){h.$w=true;h.$r=parseFloat(bz[1])}else if(ss.isValue(bA)){h.$w=true;h.$u=false;h.$C=false;h.$r=parseFloat(bA[1])}}h.$A=!h.$y&&!h.$D&&!h.$w&&e.indexOf('Gecko')>=0;h.$v=h.$A||e.indexOf('Firefox')>=0||e.indexOf('Minefield')>=0;var bB=new RegExp('iPhone|iPod|iPad');h.$x=bB.test(e);if(h.$x){var bC=e.match(new RegExp('\\bOS ([\\d+_?]+) like Mac OS X'));if(ss.isValue(bC)){h.$s=parseFloat(ss.replaceAllString(bC[1].replace('_','.'),'_',''))}}h.$t=e.indexOf('Android')>=0&&!h.$w;h.$z=e.indexOf('Mac')>=0;h.$E=e.indexOf('Windows')>=0};h.$c=function(){return window.navigator.userAgent};h.$d=function(e,bx,by){var bz=document.createElement('div');try{document.body.insertBefore(bz,null);if(!(e in bz.style)){return false}bz.style[e]=by;var bA=s.getComputedStyle(bz);var bB=bA[bx];return!N.isNullOrEmpty(bB)&&bB!=='none'}finally{document.body.removeChild(bz).style.display='none'}};h.$b=function(){var e=ss.mkdict(['transition','transition','webkitTransition','-webkit-transition','msTransition','-ms-transition','mozTransition','-moz-transition','oTransition','-o-transition']);var bx=new ss.ObjectEnumerator(e);try{while(bx.moveNext()){var by=bx.current();var bz=document.body.style;if(!(by.key in bz)){continue}h.$i=by.value;break}}finally{bx.dispose()}};h.$a=function(){var e=ss.mkdict(['transform','transform','webkitTransform','-webkit-transform','msTransform','-ms-transform','mozTransform','-moz-transform','oTransform','-o-transform']);var bx=new ss.ObjectEnumerator(e);try{while(bx.moveNext()){var by=bx.current();var bz=document.body.style;if(!(by.key in bz)){continue}h.$h=by.value;h.$j=h.$d(by.key,by.value,'translate(1px,1px)');h.$k=h.$d(by.key,by.value,'translate3d(1px,1px,1px)');break}}finally{bx.dispose()}};h.$7=function(){h.$p=ss.coalesce(window.self['devicePixelRatio'],1)};h.$0=function(){var e=document.createElement('canvas');if(ss.isNullOrUndefined(e)){h.$e=1;return}var bx=null;if(typeof(ss.getInstanceType(e)['getContext'])==='function'){bx=e.getContext('2d')}if(ss.isNullOrUndefined(bx)){h.$e=1;return}var by=bx;h.$e=by.webkitBackingStorePixelRatio||by.mozBackingStorePixelRatio||by.msBackingStorePixelRatio||by.oBackingStorePixelRatio||1};h.$2=function(){var e=document.createElement('canvas');if(ss.isNullOrUndefined(e)){return}var bx=null;if(typeof(e['getContext'])==='function'){bx=e.getContext('2d')}if(ss.isNullOrUndefined(bx)){return}h.$f=typeof(bx['setLineDash'])==='function'||'mozDash'in bx||'webkitLineDash'in bx};h.$9=function(){var e=$('<input>');h.$I=typeof(e.get(0)['setSelectionRange'])==='function'};h.$6=function(){h.$m=h.$4('date');h.$n=h.$4('datetime');h.$o=h.$4('datetime-local');h.$K=h.$4('time')};h.$4=function(e){var bx=$("<input type='"+e+"'>").css({position:'absolute',visibility:'hidden'}).appendTo($(document.body));var by=bx.get(0);var bz=by.getAttribute('type');var bA='@inva/1d:)';by.value=bA;var bB=ss.referenceEquals(bz,e)&&!ss.referenceEquals(by.value,bA);bx.remove();return bB};global.tab.BrowserSupport=h;var i=function(){this.startOfWeek=1;this.fiscalYearStart=1;this.minDaysInFirstWeek=1;this.brokenWeeks=true};i.__typeName='tab.CalendarOptions';global.tab.CalendarOptions=i;var j=function(e){this.$0=null;this.$0=e};j.__typeName='tab.CallOnDispose';global.tab.CallOnDispose=j;var k=function(){};k.__typeName='tab.CircleUtil';k.isEmpty=function(e){return u.isApproximatelyZero(e.radius)};k.isEqual=function(e,bx){return u.isApproximatelyEqual(e.radius,bx.radius)&&k.hasTheSameCenter(e,bx)};k.hasTheSameCenter=function(e,bx){return u.isApproximatelyEqual(e.center.x,bx.center.x)&&u.isApproximatelyEqual(e.center.y,bx.center.y)};k.intersectsWith=function(e,bx){var by=Math.pow(e.center.x-bx.center.x,2)+Math.pow(e.center.y-bx.center.y,2);return Math.pow(e.radius+bx.radius,2)>by};k.offsetCircle=function(e,bx){var by={x:e.center.x+bx.x,y:e.center.y+bx.y};return{center:by,radius:e.radius}};k.clone=function(e){return{center:{x:e.center.x,y:e.center.y},radius:e.radius}};k.boundingBox=function(e){var bx=Math.ceil(e.radius);var by=Math.floor(e.center.x-bx);var bz=Math.ceil(e.center.x+bx);var bA=Math.floor(e.center.y-bx);var bB=Math.ceil(e.center.y+bx);return{x:by,y:bA,w:bz-by,h:bB-bA}};k.containmentBox=function(e){var bx=Math.abs(ss.round(e.center.x)-e.center.x);var by=Math.abs(ss.round(e.center.y)-e.center.y);var bz=Math.sqrt(2)/2*e.radius-Math.max(bx,by);var bA=Math.ceil(e.center.x-bz);var bB=Math.ceil(e.center.y-bz);var bC=Math.floor(e.center.x+bz);var bD=Math.floor(e.center.y+bz);return{x:bA,y:bB,w:bC-bA,h:bD-bB}};k.getChangedRects=function(e,bx){if(!k.hasTheSameCenter(e,bx)){return[]}var by=((e.radius>bx.radius)?k.boundingBox(e):k.boundingBox(bx));var bz=((e.radius>bx.radius)?k.containmentBox(bx):k.containmentBox(e));var bA=new Array(4);var bB=ss.Int32.div(by.h-bz.h,2);var bC=ss.Int32.div(by.w-bz.w,2);bA[0]={x:by.x,y:by.y,w:by.w,h:bB};bA[1]={x:by.x,y:by.y+bB+bz.h,w:by.w,h:bB};bA[2]={x:by.x,y:by.y+bB,w:bC,h:bz.h};bA[3]={x:by.x+bC+bz.w,y:by.y+bB,w:bC,h:bz.h};return bA};global.tab.CircleUtil=k;var l=function(){};l.__typeName='tab.CollectionExtensions';l.toggle=function(e){return function(bx,by){if(ss.contains(bx,by)){ss.remove(bx,by)}else{ss.add(bx,by)}}};global.tab.CollectionExtensions=l;var m=function(){this.$2=null;g.call(this)};m.__typeName='tab.ConsoleLogAppender';m.enableLogging=function(e){if(ss.isNullOrUndefined(m.$0)){m.$0=new m;J.addAppender(m.$0)}m.$0.addFilter(e||function(){return true})};m.disableLogging=function(){if(ss.isNullOrUndefined(m.$0)){return}J.removeAppender(m.$0);m.$0=null};global.tab.ConsoleLogAppender=m;var n=function(){this.ErrorType=null;this.RedirectUrl=null;this.ErrorMessage=null};n.__typeName='tab.DataSourceConnectionAttemptErrorResponse';n.tryDeserialize=function(e){try{var bx=JSON.parse(e);return bx}catch(by){return null}};global.tab.DataSourceConnectionAttemptErrorResponse=n;var o=function(){};o.__typeName='tab.DateTimeAutoFormatMode';global.tab.DateTimeAutoFormatMode=o;var p=function(){};p.__typeName='tab.DateUtil';p.$3=function(){return J.lazyGetLogger(p)};p.get_nowAsTime=function(){return(new Date).getTime()};p.adjustDateByPeriod=function(e,bx,by){var bz=new Date;switch(bx){case'year':{bz=new Date(e.getFullYear()+by,e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());break}case'quarter':{bz=p.adjustByMonths(e,by*3);break}case'month':{bz=p.adjustByMonths(e,by);break}case'week':{bz=new Date(e.getTime()+by*p.oneWeek);break}case'day':{bz=new Date(e.getTime()+by*p.oneDay);break}case'hour':{bz=new Date(e.getTime()+by*p.oneHour);break}case'minute':{bz=new Date(e.getTime()+by*p.oneMinute);break}case'second':{bz=new Date(e.getTime()+by*p.oneSecond);break}}return bz};p.adjustByMonths=function(e,bx){var by=e.getMonth();var bz;var bA;if(bx<0){bz=-((12-(by-1)-1-bx)/12)|0}else{bz=(by-1+bx)/12|0}bA=by+(bx-bz*12);return new Date(e.getFullYear()+bz,bA,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())};p.adjustDateByPeriodInUTC=function(e,bx,by){var bz=new Date;switch(bx){case'year':{bz=new Date(e.getUTCFullYear()+by,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());break}case'quarter':{bz=p.adjustByMonthsInUTC(e,by*3);break}case'month':{bz=p.adjustByMonthsInUTC(e,by);break}case'week':{bz=new Date(e.getTime()+by*p.oneWeek);break}case'day':{bz=new Date(e.getTime()+by*p.oneDay);break}case'hour':{bz=new Date(e.getTime()+by*p.oneHour);break}case'minute':{bz=new Date(e.getTime()+by*p.oneMinute);break}case'second':{bz=new Date(e.getTime()+by*p.oneSecond);break}}return bz};p.adjustByMonthsInUTC=function(e,bx){var by=e.getUTCMonth(),bz,bA;if(bx<0){bz=-((12-(by-1)-1-bx)/12)|0}else{bz=(by-1+bx)/12|0}bA=by+(bx-bz*12);return new Date(Date.UTC(e.getUTCFullYear()+bz,bA,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()))};p.parsePresModelDate=function(e){if(ss.isNullOrUndefined(e)){return null}var bx=(new RegExp('(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)( (\\d\\d):(\\d\\d):(\\d\\d))?')).exec(e);if(ss.isNullOrUndefined(bx)){return null}var by=parseInt(bx[1],10);var bz=parseInt(bx[2],10)-1;var bA=parseInt(bx[3],10);if(ss.isNullOrEmptyString(bx[4])){return new Date(Date.UTC(by,bz,bA))}else{var bB=parseInt(bx[5],10);var bC=parseInt(bx[6],10);var bD=parseInt(bx[7],10);return new Date(Date.UTC(by,bz,bA,bB,bC,bD))}};p.dateAsYear=function(e){return e.getUTCFullYear()};p.dateAsQuarter=function(e){var bx=p.$2(e);return parseInt(1+ss.Int32.div(bx-1,3))};p.dateAsMonth=function(e){return p.$2(e)};p.dateAsWeek=function(e){var bx=new Date(e.getUTCFullYear(),0,1);var by=p.$1(e);var bz=parseInt(1+(by+p.$0(bx)-2)/7);return bz};p.dateAsDay=function(e){return e.getUTCDate()};p.dateAsDayOfYear=function(e){return p.$1(e)};p.dateAsDayOfWeek=function(e){return p.$0(e)};p.dateAsMonthYear=function(e){var bx=p.$2(e)*10000+e.getUTCFullYear();return bx};p.dateAsMonthDayYear=function(e){var bx=p.$2(e)*1000000+e.getUTCDate()*10000+e.getUTCFullYear();return bx};p.dateTimeAsHour=function(e){return e.getUTCHours()};p.dateTimeAsMinute=function(e){return e.getUTCMinutes()};p.dateTimeAsSecond=function(e){return e.getUTCSeconds()};p.dateTimeAsOleDate=function(e){return bj.OleDateFromJsDate(e.getTime())};p.$1=function(e){var bx=e.getUTCFullYear();var by=e.getUTCMonth();var bz=e.getUTCDate();var bA=new Date(bx,0,1,12,0,0);var bB=new Date(bx,by,bz,12,0,0);var bC=Math.round((bB-bA)/86400000);return bC+1};p.$2=function(e){return e.getUTCMonth()+1};p.$0=function(e){return e.getUTCDay()+1};p.daysSinceEpoch=function(e){return Math.floor(e.getTime()/86400000)};global.tab.DateUtil=p;var q=function(e,bx){this.$2=null;this.$1=0;this.$0=null;P.verifyValue(e,'action');this.$0=e;this.$1=bx};q.__typeName='tab.Debouncer';global.tab.Debouncer=q;var r=function(){this.$0=[]};r.__typeName='tab.DisposableHolder';global.tab.DisposableHolder=r;var s=function(){};s.__typeName='tab.DomUtil';s.$5=function(){return J.lazyGetLogger(s)};s.get_documentBody=function(){return document.body};s.getComputedStyle=function(e){if(h.get_getComputedStyle()){var bx=window.getComputedStyle(e);if(ss.isValue(bx)){return bx}}return e.style};s.getComputedZIndex=function(e){P.verifyValue(e,'child');var bx=$(e);var by=bx;var bz=document.documentElement;var bA=document.body;while(bx.length!==0&&!ss.referenceEquals(bx[0],bA)&&!ss.referenceEquals(bx[0],bz)){var bB=bx.css('position');if(bB==='absolute'||bB==='fixed'){by=bx}bx=bx.offsetParent()}return s.$1(by)};s.resize=function(e,bx){if(typeof(e['resize'])==='function'){e.resize(bx)}else{s.setMarginBox(e.domNode||e,bx)}};s.getContentBox=function(e){var bx=$(e);return{l:parseInt(bx.css('padding-left'),10)||0,t:parseInt(bx.css('padding-top'),10)||0,w:bx.width(),h:bx.height()}};s.setContentBox=function(e,bx){$(e).width(bx.w).height(bx.h)};s.setMarginBox=function(e,bx){s.setMarginBoxJQ($(e),bx)};s.setMarginBoxJQ=function(e,bx){s.$2(e,T.rectAsSize(bx));if(!isNaN(bx.t)){e.css('top',bx.t+'px')}if(!isNaN(bx.l)){e.css('left',bx.l+'px')}};s.setAbsolutePositionBox=function(e,bx){e.css({left:(bx.l||0)+'px',top:(bx.t||0)+'px',width:(bx.w||0)+'px',height:(bx.h||0)+'px'})};s.getMarginBox=function(e){return s.getMarginBoxJQ($(e))};s.getMarginBoxJQ=function(e){var bx=e.position();return{l:u.roundToInt(bx.left),t:u.roundToInt(bx.top),w:e.outerWidth(true),h:e.outerHeight(true)}};s.getDojoCoordsJQ=function(e){var bx={};bx.l=u.roundToInt(e.position().left);bx.t=u.roundToInt(e.position().top);bx.x=u.roundToInt(e.offset().left);bx.y=u.roundToInt(e.offset().top);bx.w=e.outerWidth(true);bx.h=e.outerHeight(true);return bx};s.isAncestorOf=function(e,bx){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(bx)){return false}return $(bx).parents().index(e)>=0};s.isEqualOrAncestorOf=function(e,bx){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(bx)){return false}return ss.referenceEquals(e,bx)||s.isAncestorOf(e,bx)};s.setElementPosition=function(e,bx,by,bz,bA){if((!ss.isValue(bA)||ss.unbox(bA))&&h.get_cssTransform()){var bB=ss.mkdict(['top','0px','left','0px']);if(h.get_cssTranslate3D()){var bC=(new ss.StringBuilder('translate3d(')).append(bx).append('px,').append(by).append('px,').append('0px)').toString();bB[h.get_cssTransformName()]=bC;if(ss.isValue(bz)){bB[h.get_cssTransitionName()+'-duration']=bz}e.css(bB);return}if(h.get_cssTranslate2D()){var bD=(new ss.StringBuilder('translate(')).append(bx).append('px,').append(by).append('px)').toString();bB[h.get_cssTransformName()]=bD;if(ss.isValue(bz)){bB[h.get_cssTransitionName()+'-duration']=bz}e.css(bB);return}}var bE=ss.mkdict(['position','absolute','top',by+'px','left',bx+'px']);if(h.get_cssTransform()){bE[h.get_cssTransformName()]=''}e.css(bE)};s.getElementPosition=function(e){return S.fromPosition(e.offset())};s.getElementClientPosition=function(e){var bx=s.getElementPosition(e);bx.x-=$(document.documentElement).scrollLeft();bx.y-=$(document.documentElement).scrollTop();return bx};s.getTransformOffset=function(e){if(ss.isNullOrUndefined(e)){return{left:0,top:0}}var bx=e.css('transform');if(ss.isNullOrEmptyString(bx)){return{left:0,top:0}}var by=bx.split('(');var bz=s.$6[by[0]];if(ss.isNullOrUndefined(bz)){return{left:0,top:0}}var bA=by[1].split(',');return{left:ss.coalesce(u.parseDouble(bA[ss.unbox(bz)]),0),top:ss.coalesce(u.parseDouble(bA[ss.unbox(bz)+1]),0)}};s.findTransformOrOffsetParent=function(e){if(ss.isNullOrUndefined(e)){return null}var bx=e.offsetParent;for(var by=e.parentElement;ss.isValue(by)&&!ss.referenceEquals(by,bx);by=by.parentElement){var bz=by.style['transform'];if(ss.isNullOrUndefined(bz)){bz=by.style['webkitTransform']}if(!ss.isNullOrEmptyString(bz)){return by}}return bx};s.getElementOffset=function(e,bx){var by=0,bz=0;if(bx){for(var bA=e[0];ss.isValue(bA);bA=s.findTransformOrOffsetParent(bA)){var bB=s.getTransformOffset($(bA));by+=bA.offsetLeft-bA.scrollLeft+bB.left;bz+=bA.offsetTop-bA.scrollTop+bB.top}}else{for(var bC=e[0];ss.isValue(bC);bC=bC.offsetParent){by+=bC.offsetLeft;bz+=bC.offsetTop}}return{left:by,top:bz}};s.getElementRelativePosition=function(e,bx){if(ss.isNullOrUndefined(bx)){bx=e.parent()}var by=e.offset();var bz=bx.offset();return{x:u.roundToInt(by.left)-u.roundToInt(bz.left),y:u.roundToInt(by.top)-u.roundToInt(bz.top)}};s.parseWidthFromStyle=function(e){if(ss.isValue(e)&&!N.isNullOrEmpty(e.width)){return parseInt(e.width)}return Number.NaN};s.parseHeightFromStyle=function(e){if(ss.isValue(e)&&!N.isNullOrEmpty(e.height)){return parseInt(e.height)}return Number.NaN};s.createNamespacedEventName=function(e,bx){if(ss.isValue(bx)){return e+bx}return e.toString()};s.stopPropagationOfInputEvents=function(e,bx){var by=function(bz){bz.stopPropagation()};s.handleInputEvents(e,bx,by)};s.handleInputEvents=function(e,bx,by){e.bind(s.createNamespacedEventName('touchstart',bx),by).bind(s.createNamespacedEventName('touchcancel',bx),by).bind(s.createNamespacedEventName('touchend',bx),by).bind(s.createNamespacedEventName('touchmove',bx),by).bind(s.createNamespacedEventName('click',bx),by).bind(s.createNamespacedEventName('mousedown',bx),by).bind(s.createNamespacedEventName('mousemove',bx),by).bind(s.createNamespacedEventName('mouseup',bx),by)};s.isFocusableTextElement=function(e){if(ss.isValue(e)&&ss.isValue(e.tagName)){var bx=e.tagName.toLowerCase();if(bx==='textarea'||bx==='input'||bx==='select'){return true}}return false};s.isCheckboxElement=function(e){if(ss.isValue(e)&&ss.isValue(e.tagName)){var bx=e.tagName.toLowerCase();var by=$(e).attr('type');if(bx==='input'&&by==='checkbox'){return true}}return false};s.handleTouchEvents=function(e){if(s.isCheckboxElement(e)){return false}if(s.isFocusableTextElement(e)){return false}return true};s.setCapture=function(e,bx){if(!h.get_mouseCapture()){return}e.setCapture(bx)};s.releaseCapture=function(){if(!h.get_mouseCapture()){return}document.releaseCapture()};s.blur=function(){var e=document.activeElement;if(ss.isValue(e)&&!ss.referenceEquals(e,s.get_documentBody())){e.blur()}};s.$0=function(e,bx,by){var bz=parseInt(e.css(bx),10);return(isNaN(bz)?by:bz)};s.$4=function(e,bx){var by=s.$0(e,'margin-left',0);var bz=s.$0(e,'border-left-width',0);var bA=s.$0(e,'padding-left',0);var bB=s.$0(e,'padding-right',0);var bC=s.$0(e,'border-right-width',0);var bD=s.$0(e,'margin-right',0);var bE=Math.max(bx-by-bz-bA-bB-bC-bD,0);e.width(bE)};s.$3=function(e,bx){var by=s.$0(e,'margin-top',0);var bz=s.$0(e,'border-top-width',0);var bA=s.$0(e,'padding-top',0);var bB=s.$0(e,'padding-bottom',0);var bC=s.$0(e,'border-bottom-width',0);var bD=s.$0(e,'margin-bottom',0);var bE=Math.max(bx-by-bz-bA-bB-bC-bD,0);e.height(bE)};s.$2=function(e,bx){if(bx.w>=0){s.$4(e,bx.w)}if(bx.h>=0){s.$3(e,bx.h)}};s.$1=function(e){P.verifyValue(e,'o');var bx=e.css('z-index');if(_.isNumber(bx)){return bx}if(_.isString(bx)){if(!ss.isNullOrEmptyString(bx)&&bx!=='auto'&&bx!=='inherits'){return parseInt(bx,10)}}return 0};s.makeHtmlSafeId=function(e){return ss.replaceAllString(encodeURIComponent(e),'.','dot')};s.setSelectionRangeOnInput=function(e,bx,by){if(h.get_setSelectionRange()){try{e.setSelectionRange(bx,by)}catch(bz){}}};s.selectAllInputText=function(e){try{if(h.get_setSelectionRange()){e.get(0).setSelectionRange(0,e.val().length)}else{e.select()}}catch(bx){}};s.generateUniqueId=function(){return['tab-ui-id-',++s.$7].join('')};global.tab.DomUtil=s;var t=function(){};t.__typeName='tab.DoubleRectXYUtil';t.isEmpty=function(e){if(!ss.isValue(e)){return true}return e.w===0||e.h===0};t.isEqual=function(e,bx){return e.x===bx.x&&e.y===bx.y&&e.w===bx.w&&e.h===bx.h};t.isNull=function(e){return e.x===0&&e.y===0&&e.w===0&&e.h===0};t.inRect=function(e,bx){return bx.x>=e.x&&bx.x<e.x+e.w&&bx.y>=e.y&&bx.y<e.y+e.h};t.inRect$1=function(e,bx,by,bz,bA,bB){return bA>=e&&bA<e+by&&bB>=bx&&bB<bx+bz};t.intersectsWith=function(e,bx){return!(bx.x+bx.w<e.x||bx.y+bx.h<e.y||bx.x>e.x+e.w||bx.y>e.y+e.h)};t.outsetRect=function(e,bx,by){return{x:e.x-bx,y:e.y-by,w:e.w+bx+bx,h:e.h+by+by}};global.tab.DoubleRectXYUtil=t;var u=function(){};u.__typeName='tab.DoubleUtil';u.$0=function(){return J.lazyGetLogger(u)};u.isApproximatelyEqual=function(e,bx){if(Math.abs(e-bx)<u.epsilon){return true}if(e===0){return false}var by=bx/e;if(u.$1<=by&&by<=u.$3){return true}return false};u.isApproximatelyZero=function(e){return u.isApproximatelyEqual(0,e)};u.isLessThanAndNotApproximatelyEqual=function(e,bx){return e<bx&&!u.isApproximatelyEqual(e,bx)};u.isLessThanOrApproximatelyEqual=function(e,bx){return e<bx||u.isApproximatelyEqual(e,bx)};u.isGreaterThanAndNotApproximatelyEqual=function(e,bx){return e>bx&&!u.isApproximatelyEqual(e,bx)};u.isGreaterThanOrApproximatelyEqual=function(e,bx){return e>bx||u.isApproximatelyEqual(e,bx)};u.sigFigs=function(e,bx){if(e===0||bx===0){return e}var by=Math.pow(10,bx-Math.floor(Math.log(Math.abs(e))/Math.LN10)-1);return ss.round(e*by)/by};u.roundToInt=function(e){return ss.round(e)};u.parseDouble=function(e){var bx=parseFloat(e);return(isFinite(bx)?bx:null)};global.tab.DoubleUtil=u;var v=function(){};v.__typeName='tab.ErrorTrace';v.install=function(){var e=tsConfig.clientErrorReportingLevel;if(!ss.isNullOrEmptyString(e)){if(e==='debug'){v.$f=true}}v.$4('setTimeout');v.$4('setInterval');v.installGlobalHandler()};v.wrap=function(bx){var by=_.wrap(bx,function(bz){try{return bz.apply(this,[Array.prototype.slice.call(arguments)])}catch(bA){var e=ss.Exception.wrap(bA);v.report(e,true);throw e}});return by};v.$4=function(e){var bx=window[e];var by=function(){var bz=ss.arrayClone(Array.prototype.slice.call(arguments));var bA=bz[0];if(ss.referenceEquals(ss.getInstanceType(bA),Function)){bz[0]=v.wrap(bA)}if('apply'in bx){return bx.apply(this,bz)}else{return bx(bz[0],bz[1])}};window[e]=by};v.windowOnError=function(e,bx,by,bz,bA){var bB=null;if(ss.isValue(v.$h)){v.$0(v.$h,bx,by,e);bB=v.$h;v.$h=null;v.$g=null}else{var bC=new Y(bx,by);bC.functionName=v.$b(bC);bC.context=v.$8(bC);bB=new Z('onError',e);bB.name='window.onError';bB.locations=[bC]}v.$p.push(bB);if(ss.isValue(v.$n)){v.$n.apply(this,Array.prototype.slice.call(arguments))}return false};v.$0=function(e,bx,by,bz){var bA=new Y(bx,by);if(ss.isValue(bA.url)&&ss.isValue(bA.lineNo)){e.isIncomplete=false;if(ss.isNullOrUndefined(bA.functionName)){bA.functionName=v.$b(bA)}if(ss.isNullOrUndefined(bA.context)){bA.context=v.$8(bA)}var bB=bz.match(new RegExp(" '([^']+)' "));if(ss.isValue(bB)&&bB.length>1){bA.columnNo=v.$6(bB[1],bA)}if(ss.isValue(e.locations)&&e.locations.length>0){var bC=e.locations[0];if(ss.referenceEquals(bC.url,bA.url)){if(bC.lineNo===bA.lineNo){return false}else if(ss.isNullOrUndefined(bC.lineNo)&&ss.referenceEquals(bC.functionName,bA.functionName)){bC.lineNo=bA.lineNo;bC.context=bA.context;return false}}}e.locations.unshift(bA);e.isPartial=true;return true}else{e.isIncomplete=true}return false};v.$c=function(e){if(!v.$j){return''}try{var bx=new XMLHttpRequest;bx.open('GET',e,false);bx.send('');return bx.responseText}catch(by){return''}};v.$9=function(e){if(ss.isNullOrUndefined(e)){return[]}if(!ss.keyExists(v.$l,e)){var bx='';if(e.indexOf(document.domain)>-1){bx=v.$c(e)}v.$l[e]=(ss.isNullOrEmptyString(bx)?[]:bx.split('\n'))}return v.$l[e]};v.$6=function(e,bx){var by=v.$9(bx.url);var bz=new RegExp('\\b'+v.$3(e)+'\\b');if(ss.isValue(by)&&by.length>bx.lineNo){var bA=bz.exec(by[bx.lineNo]);if(ss.isValue(bA)){return bA.index}}return-1};v.$b=function(e){var bx=new RegExp('function ([^(]*)\\(([^)]*)\\)');var by=new RegExp('[\'"]?([0-9A-Za-z$_]+)[\'"]?\\s*[:=]\\s*(function|eval|new Function)');var bz='';var bA=10;var bB=v.$9(e.url);var bC;if(bB.length===0){return'?'}for(var bD=0;bD<bA;bD++){bz=bB[e.lineNo-1]+bz;if(!ss.isNullOrEmptyString(bz)){bC=by.exec(bz);if(ss.isValue(bC)&&bC.length>0){return bC[1]}bC=bx.exec(bz);if(ss.isValue(bC)&&bC.length>0){return bC[1]}}}return'?'};v.$8=function(e){var bx=v.$9(e.url);if(ss.isNullOrUndefined(bx)||bx.length===0){return null}var by=[];var bz=Math.floor(v.$i/2);var bA=bz+v.$i%2;var bB=Math.max(0,e.lineNo-bz-1);var bC=Math.min(bx.length,e.lineNo+bA-1);e.lineNo-=1;for(var bD=bB;bD<bC;bD++){if(!ss.isNullOrEmptyString(bx[bD])){by.push(bx[bD])}}return by};v.$3=function(e){return e.replace(new RegExp('[\\-\\[\\]{}()*+?.,\\\\\\^$|#]','g'),'\\\\$&')};v.$2=function(e){return ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(v.$3(e),'<','(?:<|&lt;)'),'>','(?:>|&gt;)'),'&','(?:&|&amp;)'),'"','(?:"|&quot;)').replace(new RegExp('\\\\s+','g'),'\\\\s+')};v.$7=function(e,bx){var by=null;for(var bz=0;bz<bx.length;bz++){var bA=bx[bz];by=v.$9(bA);if(ss.isValue(by)&&by.length>0){for(var bB=0;bB<by.length;bB++){var bC=e.exec(by[bB]);if(ss.isValue(bC)&&bC.length>0){var bD=new Y(bA,bB);bD.columnNo=bC.index;return bD}}}}return null};v.$a=function(e,bx){if(ss.isNullOrUndefined(bx)){bx=0}var by=new Z('stack',e.get_message());by.name=e.name;if(v.$f){var bz=[];bz.push(v.$1);bz.push(v.computeStackTraceByWalkingCallerChain);for(var bA=0;bA<bz.length;bA++){var bB=bz[bA];var bC=null;try{bC=bB(e)}catch(bD){var inner=ss.Exception.wrap(bD);if(v.$k){throw inner}}if(ss.isValue(bC)){return bC}}}else{return by}by.traceMode='failed';return by};v.$d=function(bx){if(ss.isNullOrUndefined(bx)){bx=0}else{bx+=1}try{throw new ss.Exception('')}catch(by){var e=ss.Exception.wrap(by);return v.$a(e,bx+1)}};v.computeStackTraceByWalkingCallerChain=function(e){var bx=e.error;var by=new RegExp('function\\s+([_$a-zA-Z -￿][_$a-zA-Z0-9 -￿]*)?\\s*\\(','i');var bz=[];var bA={};var bB=false;var bC=null;for(bC=v.computeStackTraceByWalkingCallerChain.caller;ss.isValue(bC)&&!bB;bC=bC.caller){if(ss.referenceEquals(bC,v)){continue}var bD=new Y(null,0);if(ss.isValue(bC.name)){bD.functionName=bC.name}else{var bE=by.exec(bC.ToString());if(ss.isValue(bE)&&bE.length>1){bD.functionName=bE[1]}}var bF=v.$5(bC);if(ss.isValue(bF)){bD.url=bF.url;bD.lineNo=bF.lineNo;if(bD.functionName==='?'){bD.functionName=v.$b(bD)}var bG=(new RegExp(" '([^']+)' ")).exec(e.get_message()||e['description']);if(ss.isValue(bG)&&bG.length>1){bD.columnNo=v.$6(bG[1],bF)}}if(ss.keyExists(bA,bC.ToString())){bB=true}else{bA[bC.ToString()]=true}bz.push(bD)}var bH=new Z('callers',e.get_message());bH.name=bx['name'];bH.locations=bz;v.$0(bH,bx['sourceURL']||bx['fileName'],bx['line']||bx['lineNumber'],e.get_message()||bx['description']);return bH};v.$5=function(e){var bx=[window.location.href];var by=document.getElementsByTagName('script');var bz=e.toString();var bA=new RegExp('');var bB=null;var bC=null;for(var bD=0;bD<by.length;bD++){var bE=by[bD];if(bE.hasAttribute('src')&&ss.isValue(bE.getAttribute('src'))){bx.push(bE.getAttribute('src'))}}var bF=bA.exec(bz);if(ss.isValue(bF)&&bF.length>0){bB=new RegExp(v.$3(bz).replace(new RegExp('\\s+','g'),'\\\\s+'))}else{var bG=((bF.length>1)?('\\\\s+'+bF[1]):'');var bH=bF[2].split(',').join('\\\\s*,\\\\s*');bC=v.$3(bF[3]).replace(new RegExp(';$'),';?');bB=new RegExp('function'+bG+'\\\\s*\\\\(\\\\s*'+bH+'\\\\s*\\\\)\\\\s*{\\\\s*'+bC+'\\\\s*}')}var bI=v.$7(bB,bx);if(ss.isValue(bI)){return bI}return null};v.$1=function(e){var bx=e.error;if(!('stack'in bx)){return null}var by=new RegExp('^\\s*at (?:((?:\\[object object\\])?\\S+(?: \\[as \\S+\\])?) )?\\(?((?:file|http|https):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$','i');var bz=new RegExp('^\\s*(\\S*)(?:\\((.*?)\\))?@((?:file|http|https).*?):(\\d+)(?::(\\d+))?\\s*$','i');var bA=(h.get_isFF()?bz:by);var bB=bx['stack'].split('\n');var bC=[];var bD=null;var bE=(new RegExp('^(.*) is undefined')).exec(e.get_message());for(var bF=0;bF<bB.length;bF++){var bG=bB[bF];var bH=bA.exec(bG);if(ss.isValue(bH)&&bH.length>5){bD=new Y(bH[3],parseInt(bH[4]));if(ss.isValue(bH[1])){bD.functionName=bH[1]}if(ss.isValue(bH[4])){bD.columnNo=parseInt(bH[4])}if(ss.isValue(bD.lineNo)){if(ss.isNullOrUndefined(bD.functionName)){bD.functionName=v.$b(bD)}bD.context=v.$8(bD)}bC.push(bD)}}if(bC.length>0&&ss.isValue(bC[0].lineNo)&&ss.isNullOrUndefined(bC[0].columnNo)&&ss.isValue(bE)&&bE.length>1){bC[0].columnNo=v.$6(bE[1],bC[0])}if(bC.length===0){return null}var bI=new Z('stack',e.get_message());bI.name=e.name;bI.locations=bC;return bI};v.hasTraces=function(){return v.$p.length>0};v.dequeueTraces=function(){var e=v.$p;v.$p=[];return e};v.installGlobalHandler=function(){if(v.$o||!v.$e){return}v.$n=window.onerror;window.onerror=v.windowOnError;v.$o=true};v.report=function(e,bx){if(ss.isNullOrUndefined(bx)){bx=true}if(ss.isValue(v.$h)){if(ss.referenceEquals(v.$g,e)){return}else{var by=v.$h;v.$h=null;v.$g=null;v.$p.push(by)}}var bz=v.$a(e);v.$h=bz;v.$g=e;window.setTimeout(function(){if(ss.referenceEquals(v.$g,e)){v.$h=null;v.$g=null;v.$p.push(bz)}},(bz.isIncomplete?2000:0));if(bx){throw e}};global.tab.ErrorTrace=v;var w=function(){};w.__typeName='tab.FeatureFlags';w.isEnabled=function(e){if(ss.isValue(tsConfig.features)&&ss.keyExists(tsConfig.features,e)){return tsConfig.features[e]}if(ss.isValue(w.$0)&&ss.keyExists(w.$0,e)){return w.$0[e]}return false};w.setDefaults=function(e){w.$0=e};global.tab.FeatureFlags=w;var x=function(){};x.__typeName='tab.FeatureParam';global.tab.FeatureParam=x;var y=function(){};y.__typeName='tab.FeatureParamsLookup';y.getBool=function(e){if(ss.keyExists(y.$5,e)){return y.$5[e]||false}return false};y.getFloat=function(e){if(ss.keyExists(y.$7,e)){return y.$7[e]}return null};y.getInt=function(e){if(ss.keyExists(y.$9,e)){return y.$9[e]}return null};y.getString=function(e){if(ss.keyExists(y.$c,e)){return y.$c[e]}return null};y.$1=function(e,bx,by){y.$6.push(bx);y.$e[e]=bx;y.$5[bx]=by};y.$2=function(e,bx){y.$8.push(bx);y.$e[e]=bx;y.$7[bx]=null};y.$3=function(e,bx){y.$a.push(bx);y.$e[e]=bx;y.$9[bx]=null};y.$4=function(e,bx){y.$d.push(bx);y.$e[e]=bx;y.$c[bx]=null};y.$0=function(){var e=N.getUriQueryParameters(window.self.location.search);var bx=new ss.ObjectEnumerator(e);try{while(bx.moveNext()){var by=bx.current();var bz=by.key.toLowerCase();var bA=0;if(ss.keyExists(y.$e,bz)){bA=y.$e[bz]}else{continue}if(by.value.length>0){var bB=by.value[0];if(ss.contains(y.$6,bA)){var bC=bB.toLowerCase()==='true';y.$5[bA]=bC}else if(ss.contains(y.$8,bA)){var bD=parseFloat(bB);y.$7[bA]=bD}else if(ss.contains(y.$a,bA)){var bE=parseInt(bB);y.$9[bA]=bE}else if(ss.contains(y.$d,bA)){y.$c[bA]=bB}else{continue}}else{continue}}}finally{bx.dispose()}};global.tab.FeatureParamsLookup=y;var z=function(){};z.__typeName='tab.HistoryUtil';z.pushState=function(e,bx,by,bz){if(h.get_historyApi()){try{e.history.pushState(bx,by,bz)}catch(bA){var e=ss.Exception.wrap(bA)}}};z.replaceState=function(e,bx,by,bz){if(h.get_historyApi()){try{e.history.replaceState(bx,by,bz)}catch(bA){var e=ss.Exception.wrap(bA)}}};global.tab.HistoryUtil=z;var A=function(){};A.__typeName='tab.HttpResponseCodes';global.tab.HttpResponseCodes=A;var B=function(){};B.__typeName='tab.IBrowserViewport';global.tab.IBrowserViewport=B;var C=function(){};C.__typeName='tab.ICommonDialogProvider';global.tab.ICommonDialogProvider=C;var D=function(){};D.__typeName='tab.ILogAppender';global.tab.ILogAppender=D;var E=function(e,bx){this.$0=0;this.$1=0;this.$0=e;this.$1=bx};E.__typeName='tab.IntegerRange';E.itemToTileRange=function(e,bx){var by=new E(0,0);by.set_from(Math.floor(e.get_from()/bx));by.set_to(Math.floor(e.get_to()/bx));return by};E.pixelToItemRange=function(e,bx){var by=new E(0,0);by.set_from(Math.floor(e.get_from()/bx));by.set_to(Math.floor(e.get_to()/bx));return by};E.pixelToTileRange=function(e,bx,by){return E.itemToTileRange(E.pixelToItemRange(e,bx),by)};global.tab.IntegerRange=E;var F=function(){this.$0={}};F.__typeName='tab.IntSet';global.tab.IntSet=F;var G=function(){};G.__typeName='tab.jQueryInterface';G.parseJson=function(e){return $.parseJSON(e)};G.type=function(e){return $.type(e)};G.isFunction=function(e){return $.isFunction(e)};G.isArray=function(e){return $.isArray(e)};global.tab.jQueryInterface=G;var H=function(){};H.__typeName='tab.JsonUtil';H.parseJson=function(e){if(ss.isNullOrEmptyString(e)){return null}return G.parseJson(e)};H.toJson=function(e,bx,by){bx=bx||false;by=by||'';var bz=[];return H.$3(e,bx,by,bz)};H.$2=function(e,bx,by){if(ss.isValue(Array.prototype['indexOf'])){return e.indexOf(bx,by)}by=by||0;var bz=e.length;if(bz>0){for(var bA=by;bA<bz;bA++){if(ss.referenceEquals(e[bA],bx)){return bA}}}return-1};H.$0=function(e,bx,by){var bz=H.$2(e,bx,by);return bz>=0};H.$3=function(e,bx,by,bz){if(H.$0(bz,e)){throw new ss.Exception('The object contains recursive reference of sub-objects')}if(typeof(e)==='undefined'){return'undefined'}if(ss.isNullOrUndefined(e)){return'null'}var bA=G.type(e);if(bA==='number'||bA==='boolean'){return e.toString()}if(bA==='string'){return H.$1(e)}bz.push(e);var bB;by=by||'';var bC=(bx?(by+'\t'):'');var bD=e.__json__||e.json;if(G.isFunction(bD)){var bE=bD;bB=bE(e);if(!ss.referenceEquals(e,bB)){var bF=H.$3(bB,bx,bC,bz);bz.pop();return bF}}if(ss.isValue(e.nodeType)&&ss.isValue(e.cloneNode)){throw new ss.Exception("Can't serialize DOM nodes")}var bG=(bx?' ':'');var bH=(bx?'\n':'');if(G.isArray(e)){return H.$4(e,bx,by,bz,bC,bH)}if(bA==='function'){bz.pop();return null}return H.$5(e,bx,by,bz,bC,bH,bG)};H.$5=function(e,bx,by,bz,bA,bB,bC){var bD=e;var bE=new ss.StringBuilder('{');var bF=false;var bG=new ss.ObjectEnumerator(bD);try{while(bG.moveNext()){var bH=bG.current();var bI;var bJ;if(typeof(bH.key)==='number'){bI='"'+bH.key+'"'}else if(typeof(bH.key)==='string'){bI=H.$1(bH.key)}else{continue}bJ=H.$3(bH.value,bx,bA,bz);if(ss.isNullOrUndefined(bJ)){continue}if(bF){bE.append(',')}bE.append(bB+bA+bI+':'+bC+bJ);bF=true}}finally{bG.dispose()}bE.append(bB+by+'}');bz.pop();return bE.toString()};H.$4=function(e,bx,by,bz,bA,bB){var bC=false;var bD=new ss.StringBuilder('[');var bE=e;for(var bF=0;bF<bE.length;bF++){var bG=bE[bF];var bH=H.$3(bG,bx,bA,bz);if(ss.isNullOrUndefined(bH)){bH='undefined'}if(bC){bD.append(',')}bD.append(bB+bA+bH);bC=true}bD.append(bB+by+']');bz.pop();return bD.toString()};H.$1=function(e){e='"'+e.replace(new RegExp('(["\\\\])','g'),'\\$1')+'"';e=e.replace(new RegExp('[\f]','g'),'\\f');e=e.replace(new RegExp('[\b]','g'),'\\b');e=e.replace(new RegExp('[\n]','g'),'\\n');e=e.replace(new RegExp('[\t]','g'),'\\t');e=e.replace(new RegExp('[\r]','g'),'\\r');return e};global.tab.JsonUtil=H;var I=function(){};I.__typeName='tab.Log';I.get=function(e){return J.lazyGetLogger(ss.getInstanceType(e))};global.tab.Log=I;var J=function(e){this.$1=null;this.$1=e};J.__typeName='tab.Logger';J.get_globalLog=function(){return J.global};J.$2=function(){return N.lazyInitStaticField(J,'appenders',function(){return[]})};J.$3=function(){return N.lazyInitStaticField(J,'filters',function(){return[]})};J.$4=function(){return N.lazyInitStaticField(J,'nullLog',function(){return new J('')})};J.clearFilters=function(){var e=J.$2();for(var bx=0;bx<e.length;bx++){var by=e[bx];by.clearFilters()}ss.clear(J.$3())};J.filterByLogger=function(e,bx){bx=bx||0;J.$0(function(by,bz){return ss.referenceEquals(by,e)&&bz>=bx})};J.filterByType=function(e,bx){bx=bx||0;J.$0(function(by,bz){return bz>=bx&&ss.referenceEquals(by.get_name(),ss.getTypeName(e))})};J.filterByName=function(e,bx){bx=bx||0;var by=new RegExp(e,'i');J.$0(function(bz,bA){return bA>=bx&&ss.isValue(bz.get_name().match(by))})};J.clearAppenders=function(){ss.clear(J.$2())};J.addAppender=function(e){var bx=J.$3();for(var by=0;by<bx.length;by++){var bz=bx[by];e.addFilter(bz)}J.$2().push(e)};J.removeAppender=function(e){ss.remove(J.$2(),e)};J.lazyGetLogger=function(e){return N.lazyInitStaticField(e,'_logger',function(){return J.getLogger(e)})};J.getLogger=function(e,bx){var by=J.getLoggerWithName(ss.getTypeName(e));if(ss.isValue(bx)){}return by};J.getLoggerWithName=function(e){return J.$4()};J.$1=function(){var e=N.getUriQueryParameters(window.self.location.search);if(!ss.keyExists(e,':log')){return}var bx=e[':log'];if(bx.length===0){}for(var by=0;by<bx.length;by++){var bz=bx[by];var bA=bz.split(String.fromCharCode(58));var bB=1;if(bA.length>0&&ss.isValue(bA[1])){var bC=bA[1].toLowerCase();var bD=ss.indexOf(J.loggerLevelNames,bC);if(bD>=0){bB=bD}}}};J.$0=function(e){J.$3().push(e);var bx=J.$2();for(var by=0;by<bx.length;by++){var bz=bx[by];bz.addFilter(e)}};global.tab.Logger=J;var K=function(){};K.__typeName='tab.LoggerLevel';global.tab.LoggerLevel=K;var L=function(){};L.__typeName='tab.MapUtil';L.getZoomFactorForDesiredZoomLevel=function(e,bx){return Math.exp(-(Math.LN2*(bx-e)))};L.allowZoomAtCurrentLevel=function(e,bx){return e+Math.log(1/bx)/Math.LN2>=0};L.allowZoomAtCurrentLevelLeaflet=function(e,bx){return e-bx>=0};L.getVisiblePixelWidth=function(e,bx,by){var bz=Math.pow(2,e)*by;var bA=Math.floor(bx*bz);return bA};L.getScrollDeltaForZoomFactor=function(e){return Math.floor(L.$1*(Math.log(e)/Math.log(2)))};L.getLeafletZoomOffsetForTileSize=function(e){return((e===L.$0)?-1:0)};L.calculateZoomFactor=function(e){var bx=ss.Int32.div(e,8);var by=ss.Int32.div(bx,15);var bz=1;var bA=Math.log(bz)/Math.log(2)+by/4;bz=Math.pow(2,bA);return ss.round(bz,2)};global.tab.MapUtil=L;var M=function(){this.$9=null;this.$a=null;this.$7=null;this.$6=null;this.$8=null;this.$9=[];this.$7=[];this.$8=null;this.$6=null};M.__typeName='tab.MetricsLogger';M.get_instance=function(){if(!ss.isValue(M.$b)){M.$b=new M}return M.$b};M.$1=function(e,bx){var by=(bx?', ':',');var bz=new ss.StringBuilder;bz.append((bx?M.$9[e.eventType]:e.eventType.toString()));var bA=ss.getKeyCount(e.parameters);if(bA>0){bz.append('=');bz.append('{');var bB=0;var bC=(bx?': ':':');var bD=ss.getEnumerator(Object.keys(e.parameters));try{while(bD.moveNext()){var bE=bD.current();if(bE==='id'&&e.eventType!=='init'){continue}if(bB++>0){bz.append(by)}bz.append((bx?M.$a[bE]:bE.toString()));bz.append(bC);var bF=e.parameters[bE];M.$2(bz,bF,bx)}}finally{bD.dispose()}bz.append('}')}return bz.toString()};M.$0=function(e,bx,by){var bz=(by?', ':',');var bA=(by?': ':':');var bB=ss.getKeyCount(bx);var bC=0;var bD=ss.getEnumerator(Object.keys(bx));try{while(bD.moveNext()){var bE=bD.current();if(bx.hasOwnProperty(bE)){var bF=bx[bE];e.append(bE);e.append(bA);M.$2(e,bF,by);if(++bC<bB){e.append(bz)}}}}finally{bD.dispose()}};M.$2=function(e,bx,by){var bz=typeof(bx);if(bz==='number'&&Math.floor(bx)!==bx){e.append(bx.toFixed(1))}else if(bz==='string'){if(by){e.append('"');e.append(bx);e.append('"')}else{e.append(encodeURIComponent(bx))}}else if($.isArray(bx)){e.append('[');e.append(bx);e.append(']')}else if(bz==='object'){e.append('{');var bA=bx;M.$0(e,bA,by);e.append('}')}else{e.append(bx)}};global.tab.MetricsLogger=M;var N=function(){};N.__typeName='tab.MiscUtil';N.get_pathName=function(){var e=tabBootstrap.Utility.get_locationWindow();return tab.WindowHelper.getLocation(e).pathname};N.get_urlPathnameParts=function(){var e=N.get_pathName();var bx=tsConfig.site_root;var by=e.indexOf(bx,0);var bz=e.substr(by+bx.length);var bA=bz.split('/');var bB={};bB[2]=bA[2];bB[3]=bA[3];bB[4]=bA[4];return bB};N.lazyInitStaticField=function(e,bx,by){var bz=e[bx];if(ss.isNullOrUndefined(bz)){bz=by();e[bx]=bz}return bz};N.raiseAllZonesLoaded=function(){var e={};e['t']=tabBootstrap.MetricsController.getTiming();e['d']='AllZones';var bx=new tabBootstrap.MetricsEvent('gen',2,e);tabBootstrap.MetricsController.logEvent(bx)};N.percentEncode=function(e,bx){e=encodeURIComponent(e);if(ss.isNullOrUndefined(bx)){return e}var by=new ss.StringBuilder;var bz=0;while(bz<e.length){var bA=e.substr(bz,1);if(bA==='%'){by.append(e.substr(bz,3));bz+=2}else if(!ss.keyExists(bx,bA)){by.append('%').append(bA.charCodeAt(0).toString(16).toUpperCase())}else{by.append(bA)}bz++}return by.toString()};N.encodeForWG=function(e){var bx={};var by=function(bz,bA){for(var bB=bz;bB<=bA;bB++){var bC=String.fromCharCode(bB);bx[bC]=bC}};by(97,122);by(65,90);by(48,57);by(95,95);by(45,45);e=N.percentEncode(e,bx);e=N.percentEncode(e,null);return e};N.isNullOrUndefined=function(e){if(ss.isNullOrUndefined(e)){return true}for(var bx=0;bx<e.length;bx++){if(ss.isNullOrUndefined(e[bx])){return true}}return false};N.isNullOrEmpty=function(e){if(ss.isNullOrUndefined(e)){return true}var bx=e;if(ss.isValue(bx['length'])&&bx['length']===0){return true}return false};N.isValidIndex=function(e,bx){return e>=0&&e<bx.length};N.toBoolean=function(e,bx){var by=new RegExp('^(yes|y|true|t|1)$','i');if(N.isNullOrEmpty(e)){return bx}var bz=e.match(by);return!N.isNullOrEmpty(bz)};N.getUriQueryParameters=function(e){var bx={};if(ss.isNullOrUndefined(e)){return bx}var by=e.indexOf('?');if(by<0){return bx}var bz=e.substr(by+1);var bA=bz.indexOf('#');if(bA>=0){bz=bz.substr(0,bA)}if(ss.isNullOrEmptyString(bz)){return bx}var bB=bz.split('&');for(var bC=0;bC<bB.length;bC++){var bD=bB[bC];var bE=bD.split('=');var bF=decodeURIComponent(bE[0]);var bG;if(ss.keyExists(bx,bF)){bG=bx[bF]}else{bG=[];bx[bF]=bG}if(bE.length>1){bG.push(decodeURIComponent(bE[1]))}}return bx};N.replaceUriQueryParameters=function(e,bx){var by=new ss.StringBuilder;var bz=true;var bA=function(){by.append((bz?'?':'&'));bz=false};var bB=new ss.ObjectEnumerator(bx);try{while(bB.moveNext()){var bC=bB.current();var bD=encodeURIComponent(bC.key);if(ss.isNullOrUndefined(bC.value)||bC.value.length===0){bA();by.append(bD)}else{for(var bE=0;bE<bC.value.length;bE++){var bF=bC.value[bE];bA();by.append(bD).append('=').append(encodeURIComponent(bF))}}}}finally{bB.dispose()}var bG=e.indexOf('?');var bH=e.indexOf('#');var bI=Math.min(((bG<0)?e.length:bG),((bH<0)?e.length:bH));var bJ=e.substr(0,bI);var bK=((bH<0)?'':e.substr(bH));return bJ+by+bK};N.sanatizeBoolean=function(e){if(ss.isNullOrUndefined(e)){return e}return e.toString().toLowerCase()==='true'};N.dispose$1=function(e){if(ss.isValue(e)){e.dispose()}return null};N.dispose=function(e){if(ss.isValue(e)){for(var bx=0;bx<e.length;bx++){var by=e[bx];by.dispose()}ss.clear(e)}return null};N.clearTimeout=function(e){if(ss.isValue(e)){window.clearTimeout(ss.unbox(e))}return null};N.cloneObject=function(e){var bx;if(h.get_nativeJSONSupport()){var by=JSON.stringify(e);bx=JSON.parse(by)}else{bx=$.extend(true,new Object,e)}return bx};N.cloneArray=function(e){var bx;if(h.get_nativeJSONSupport()){var by=JSON.stringify(e);bx=JSON.parse(by)}else{bx=$.extend.apply(null,[true,[]].concat(e))}return bx};global.tab.MiscUtil=N;var O=function(){};O.__typeName='tab.NavigationMetricsCollector';O.collectMetrics=function(){if(typeof(window)!=='undefined'&&typeof(window.performance)!=='undefined'&&typeof(window.performance.timing)!=='undefined'){O.$0=window.performance.timing;if('navigationStart'in O.$0){var e=O.$0[O.$1[0]];var bx=[];for(var by=0;by<O.$1.length;by++){var bz=O.$1[by];var bA=O.$0[bz];bA=((bA===0)?0:(bA-e));bx.push(bA)}var bB={};bB['v']=bx;var bC=new tabBootstrap.MetricsEvent('nav',1,bB);tabBootstrap.MetricsController.logEvent(bC)}}};global.tab.NavigationMetricsCollector=O;var P=function(){};P.__typeName='tab.Param';P.createArgumentNullOrUndefinedException=function(e){var bx=new ss.Exception(e+' is null or undefined.');bx.paramName=e;return bx};P.verifyString=function(e,bx){P.verifyValue(e,bx);if(e.trim().length===0){var by=new ss.Exception(bx+' contains only white space');by.paramName=bx;P.$1(by);throw by}};P.verifyValue=function(e,bx){if(ss.isNullOrUndefined(e)){var by=P.createArgumentNullOrUndefinedException(bx);P.$1(by);throw by}};P.$1=function(e){if(P.suppressAlerts){return}try{throw e}catch(bx){var exceptionWithStack=ss.Exception.wrap(bx);window.alert(P.$0(exceptionWithStack))}};P.$0=function(e){var bx;if(ss.isValue(e.stack)){bx=e.stack}else{bx=e.get_message()}return bx};global.tab.Param=P;var Q=function(){};Q.__typeName='tab.PathnameKey';global.tab.PathnameKey=Q;var R=function(){};R.__typeName='tab.PointFUtil';R.subtract=function(e,bx){return{x:e.x-bx.x,y:e.y-bx.y}};R.timesScalar=function(e,bx){return{x:e.x*bx,y:e.y*bx}};R.round=function(e){return{x:Math.round(e.x),y:Math.round(e.y)}};global.tab.PointFUtil=R;var S=function(){};S.__typeName='tab.PointUtil';S.fromPresModel=function(e){if(ss.isNullOrUndefined(e)){return null}return{x:e.thj,y:e.RAC}};S.toPresModel=function(e){if(ss.isNullOrUndefined(e)){return null}var bx={};bx.thj=e.x;bx.RAC=e.y;return bx};S.fromPosition=function(e){return{x:u.roundToInt(e.left),y:u.roundToInt(e.top)}};S.add=function(e,bx){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(bx)){return e}return{x:e.x+bx.x,y:e.y+bx.y}};S.subtract=function(e,bx){return{x:e.x-bx.x,y:e.y-bx.y}};S.distance=function(e,bx){P.verifyValue(e,'first');P.verifyValue(bx,'second');var by=e.x-bx.x;var bz=e.y-bx.y;return Math.sqrt(by*by+bz*bz)};S.isWithinDistance=function(e,bx,by){var bz=e.x-bx.x;var bA=e.y-bx.y;return bz*bz+bA*bA<=by*by};S.equals=function(e,bx){return ss.isValue(e)&&ss.isValue(bx)&&bx.x===e.x&&bx.y===e.y};global.tab.PointUtil=S;var T=function(){};T.__typeName='tab.RecordCast';T.deltaAsPoint=function(e){return e};T.deltaAsRectXY=function(e){return e};T.rectAsSize=function(e){return e};T.regionRectAsRectXY=function(e){return e};T.regionRectAsSize=function(e){return e};T.dojoCoordsAsPoint=function(e){return e};T.dojoCoordsAsRectXY=function(e){return e};T.frameInfoAsRect=function(e){return e};T.rectPresModelAsRectXY=function(e){if(ss.isNullOrUndefined(e)){return null}return{x:e.thj,y:e.RAC,w:e.rec,h:e.EUR}};T.doubleRectPresModelAsDoubleRectXY=function(e){if(ss.isNullOrUndefined(e)){return null}return{x:e.BPK,y:e.KEc,w:e.POJ,h:e.suk}};T.sizeAsSizePresModel=function(e){if(ss.isNullOrUndefined(e)){return null}var bx={};bx.rec=e.w;bx.EUR=e.h;return bx};global.tab.RecordCast=T;var U=function(){};U.__typeName='tab.RectUtil';U.isEmpty=function(e){return e.w===0||e.h===0};U.isEqual=function(e,bx){return e.t===bx.t&&e.l===bx.l&&e.w===bx.w&&e.h===bx.h};U.inRect=function(e,bx){return bx.x>=e.l&&bx.x<e.l+e.w&&bx.y>=e.t&&bx.y<e.t+e.h};U.intersectsWith=function(e,bx){return!(bx.l+bx.w<e.l||bx.t+bx.h<e.t||bx.l>e.l+e.w||bx.t>e.t+e.h)};U.union=function(e,bx){var by=Math.min(e.l,bx.l);var bz=Math.min(e.t,bx.t);var bA=Math.max(e.l+e.w,bx.l+bx.w);var bB=Math.max(e.t+e.h,bx.t+bx.h);return{l:by,t:bz,w:bA-by,h:bB-bz}};global.tab.RectUtil=U;var V=function(){};V.__typeName='tab.RectXYUtil';V.set=function(e,bx){e.x=bx.x;e.y=bx.y;e.w=bx.w;e.h=bx.h};V.set$1=function(e,bx,by,bz,bA){e.x=bx;e.y=by;e.w=bz;e.h=bA};V.isEmpty=function(e){if(!ss.isValue(e)){return true}return e.w===0||e.h===0};V.isEqual=function(e,bx){return e.x===bx.x&&e.y===bx.y&&e.w===bx.w&&e.h===bx.h};V.isNull=function(e){return e.x===0&&e.y===0&&e.w===0&&e.h===0};V.inRect=function(e,bx){return bx.x>=e.x&&bx.x<e.x+e.w&&bx.y>=e.y&&bx.y<e.y+e.h};V.inRect$1=function(e,bx,by){return bx>=e.x&&bx<e.x+e.w&&by>=e.y&&by<e.y+e.h};V.inRectPointF=function(e,bx){return bx.x>=e.x&&bx.x<e.x+e.w&&bx.y>=e.y&&bx.y<e.y+e.h};V.inRectPointF$1=function(e,bx,by){return bx>=e.x&&bx<e.x+e.w&&by>=e.y&&by<e.y+e.h};V.intersectsWith=function(e,bx){return!(bx.x+bx.w<e.x||bx.y+bx.h<e.y||bx.x>e.x+e.w||bx.y>e.y+e.h)};V.intersectsWith$1=function(e,bx,by,bz,bA){return!(bx+bz<e.x||by+bA<e.y||bx>e.x+e.w||by>e.y+e.h)};V.intersectsWithMoreThanSharedEdge=function(e,bx){return!(bx.x+bx.w<=e.x||bx.y+bx.h<=e.y||bx.x>=e.x+e.w||bx.y>=e.y+e.h)};V.clone=function(e){return{x:e.x,y:e.y,w:e.w,h:e.h}};V.nonemptyify=function(e){return{x:e.x,y:e.y,w:Math.max(1,e.w),h:Math.max(1,e.h)}};V.intersectsWithAny=function(e,bx){var by=false;for(var bz=0;bz<bx.length;bz++){var bA=bx[bz];if(ss.isNullOrUndefined(bA)){continue}if(V.intersectsWith(e,bA)){by=true;break}}return by};V.intersectsWithAny$1=function(e,bx,by){if(bx.y+bx.h<e.y||bx.y>e.y+e.h){return false}var bz=e.x;var bA=e.x+e.w;for(var bB=0;bB<by.length;bB++){var bC=by[bB];var bD=bx.x+bC;var bE=bD+bx.w;if(!(bE<bz||bD>bA)){return true}}return false};V.completelyContains=function(e,bx){return V.inRect(e,{x:bx.x,y:bx.y})&&V.inRect(e,{x:bx.x+bx.w-1,y:bx.y+bx.h-1})};V.completelyContains$1=function(e,bx,by,bz,bA){return V.inRect$1(e,bx,by)&&V.inRect$1(e,bx+bz-1,by+bA-1)};V.toRect=function(e){return{l:e.x,t:e.y,w:e.w,h:e.h}};V.offsetRect=function(e,bx){return{x:e.x+bx.x,y:e.y+bx.y,w:e.w,h:e.h}};V.offsetRectXY=function(e,bx,by){return{x:e.x+bx,y:e.y+by,w:e.w,h:e.h}};V.offsetRectXYInPlace=function(e,bx,by){e.x+=bx;e.y+=by};V.offsetRectF=function(e,bx){return{x:e.x+Math.round(bx.x),y:e.y+Math.round(bx.y),w:e.w,h:e.h}};V.outsetRect=function(e,bx,by){return{x:e.x-bx,y:e.y-by,w:e.w+bx+bx,h:e.h+by+by}};V.outsetRectInPlace=function(e,bx,by){e.x-=bx;e.y-=by;e.w+=2*bx;e.h+=2*bx};V.outsetRectSizeF=function(e,bx){return V.outsetRect(e,Math.ceil(bx.w),Math.ceil(bx.h))};V.encompassCircleInPlace=function(e,bx,by,bz){var bA=bz*2;var bB=Math.floor(bx-bz+0.5);var bC=Math.floor(by-bz+0.5);var bD=Math.floor(bA+0.5);V.unionInPlace$1(e,bB,bC,bD,bD)};V.union=function(e,bx){if(V.isEmpty(e)){return bx}if(V.isEmpty(bx)){return e}var by=Math.min(e.x,bx.x);var bz=Math.min(e.y,bx.y);var bA=Math.max(e.x+e.w,bx.x+bx.w);var bB=Math.max(e.y+e.h,bx.y+bx.h);return{x:by,y:bz,w:bA-by,h:bB-bz}};V.unionInPlace$1=function(e,bx,by,bz,bA){if(V.isEmpty(e)){V.set$1(e,bx,by,bz,bA);return}if(bz===0||bA===0){return}var bB=Math.min(e.x,bx);var bC=Math.min(e.y,by);var bD=Math.max(e.x+e.w,bx+bz);var bE=Math.max(e.y+e.h,by+bA);V.set$1(e,bB,bC,bD-bB,bE-bC)};V.unionInPlace=function(e,bx){V.unionInPlace$1(e,bx.x,bx.y,bx.w,bx.h)};V.unionAll=function(e){var bx=e.length;if(bx===0){return{x:0,y:0,w:0,h:0}}var by=e[0];var bz=by.x;var bA=by.y;var bB=by.x+by.w;var bC=by.y+by.h;for(var bD=1;bD<bx;bD++){by=e[bD];bz=Math.min(bz,by.x);bA=Math.min(bA,by.y);bB=Math.max(bB,by.x+by.w);bC=Math.max(bC,by.y+by.h)}return{x:bz,y:bA,w:bB-bz,h:bC-bA}};V.rectXYFromCorners=function(e,bx){var by=Math.round(Math.min(e.x,bx.x));var bz=Math.round(Math.min(e.y,bx.y));var bA=Math.abs(Math.round(e.x-bx.x));var bB=Math.abs(Math.round(e.y-bx.y));return{x:by,y:bz,w:bA,h:bB}};V.rectXYFromCorners$1=function(e,bx,by,bz){var bA=Math.round(Math.min(e,by));var bB=Math.round(Math.min(bx,bz));var bC=Math.abs(Math.round(e-by));var bD=Math.abs(Math.round(bx-bz));return{x:bA,y:bB,w:bC,h:bD}};V.rectXYFromBBoxRectF=function(e){return V.rectXYFromMinAndMax(e.minX,e.minY,e.maxX,e.maxY)};V.rectXYFromMinAndMax=function(e,bx,by,bz){var bA=Math.floor(e);var bB=Math.floor(bx);var bC=Math.ceil(by);var bD=Math.ceil(bz);return{x:bA,y:bB,w:bC-bA,h:bD-bB}};V.dialate=function(e,bx){var by=e.x-bx;var bz=e.y-bx;var bA=e.w+2*bx;var bB=e.h+2*bx;return{x:by,y:bz,w:bA,h:bB}};V.intersect=function(e,bx){if(!V.intersectsWith(e,bx)||V.isEmpty(bx)||V.isEmpty(e)){return{x:0,y:0,w:0,h:0}}var by=Math.max(e.x,bx.x);var bz=Math.max(e.y,bx.y);var bA=Math.min(e.x+e.w,bx.x+bx.w);var bB=Math.min(e.y+e.h,bx.y+bx.h);return{x:by,y:bz,w:bA-by,h:bB-bz}};V.intersectInPlace=function(e,bx){if(!V.intersectsWith(e,bx)||V.isEmpty(e)||V.isEmpty(bx)){V.set$1(e,0,0,0,0);return}var by=Math.max(e.x,bx.x);var bz=Math.max(e.y,bx.y);var bA=Math.min(e.x+e.w,bx.x+bx.w);var bB=Math.min(e.y+e.h,bx.y+bx.h);V.set$1(e,by,bz,bA-by,bB-bz)};V.shiftCoordsTowardsCenter=function(e,bx,by){if(ss.isNullOrUndefined(bx)){return e}var bz={x:e.x,y:e.y};bz=V.horizontalShiftCoordsTowardsCenter(bz,bx,by);return V.verticalShiftCoordsTowardsCenter(bz,bx,by)};V.horizontalShiftCoordsTowardsCenter=function(e,bx,by){if(ss.isNullOrUndefined(bx)){return e}var bz={x:e.x,y:e.y};if(bz.x<=bx.x+by){bz.x+=by}else if(bz.x>=bx.x+bx.w-2*by){bz.x-=by}return bz};V.verticalShiftCoordsTowardsCenter=function(e,bx,by){if(ss.isNullOrUndefined(bx)){return e}var bz={x:e.x,y:e.y};if(bz.y<=bx.y+by){bz.y+=by}else if(bz.y>=bx.y+bx.h-2*by){bz.y-=by}return bz};V.getChangedRects=function(e,bx){var by=[];if(!ss.isValue(e)||!ss.isValue(bx)||!V.intersectsWith(e,bx)){return by}var bz=e.x+e.w;var bA=e.y+e.h;var bB=bx.x+bx.w;var bC=bx.y+bx.h;var bD=Math.min(e.x,bx.x);var bE=Math.max(e.x,bx.x);var bF=Math.min(bz,bB);var bG=Math.max(bz,bB);var bH=Math.min(e.y,bx.y);var bI=Math.max(e.y,bx.y);var bJ=Math.min(bA,bC);var bK=Math.max(bA,bC);var bL={x:bD,y:bH,w:bG-bD,h:bI-bH};var bM={x:bD,y:bI,w:bE-bD,h:bJ-bI};var bN={x:bF,y:bI,w:bG-bF,h:bJ-bI};var bO={x:bD,y:bJ,w:bG-bD,h:bK-bJ};if(!V.isEmpty(bL)){by.push(bL)}if(!V.isEmpty(bM)){by.push(bM)}if(!V.isEmpty(bN)){by.push(bN)}if(!V.isEmpty(bO)){by.push(bO)}return by};V.reduceRectangles=function(e){if(ss.isNullOrUndefined(e)){return null}var bx=e.length;if(bx===1){return e}var by=new Array(bx);for(var bz=0;bz<bx;bz++){var bA=by[bz]||e[bz];by[bz]=bA;if(V.isEmpty(bA)){continue}for(var bB=bz+1;bB<bx;bB++){var bC=by[bB]||e[bB];if(V.isEmpty(bC)){continue}var bD=V.intersect(bA,bC);if(V.isEmpty(bD)){continue}var bE=V.$0(bA,bD);if(ss.referenceEquals(bE,bA)){bC=V.$0(bC,bD)}by[bz]=bE;by[bB]=bC}}for(var bF=by.length-1;bF>=0;bF--){if(V.isEmpty(by[bF])){by.splice(bF,1)}}return by};V.$0=function(e,bx){if(bx.x===e.x&&bx.w===e.w){if(bx.y>e.y){return{x:e.x,y:e.y,w:e.w,h:e.h-bx.h}}else{return{x:e.x,y:e.y+bx.h,w:e.w,h:e.h-bx.h}}}else if(bx.y===e.y&&bx.h===e.h){if(bx.x>e.x){return{x:e.x,y:e.y,w:e.w-bx.w,h:e.h}}else{return{x:e.x+bx.w,y:e.y,w:e.w-bx.w,h:e.h}}}return e};global.tab.RectXYUtil=V;var W=function(){};W.__typeName='tab.RleDecoder';W.decode=function(e){if(ss.isNullOrUndefined(e)){return e}return W.$2(e)};W.$2=function(e){if(typeof(e)!=='object'||!ss.isValue(e)){return e}if($.isArray(e)){var bx=e;for(var by=0,bz=bx.length;by<bz;by++){var bA=bx[by];if(typeof(bA)!=='object'){break}bx[by]=W.$2(bA)}return W.$1(bx)}else{var bB=e;var bC=Object.keys(bB);for(var bD=0,bE=bC.length;bD<bE;bD++){var bF=bC[bD];if(typeof(bB[bF])!=='object'){continue}if(bB.hasOwnProperty(bF)){bB[bF]=W.$2(bB[bF])}}}return e};W.$0=function(e){if(e.length===0){return false}var bx=e[e.length-1];if(!$.isArray(bx)){return false}return bx.length===0};W.$4=function(e){var bx=e.length;return bx===2||bx===3};W.$3=function(e,bx){var by=bx[0];var bz=bx[1];var bA=((bx.length===3)?bx[2]:0);for(var bB=0,bC=by;bB<bz;bB++,bC+=bA){e.push(bC)}};W.$1=function(e){if(!W.$0(e)){return e}e.pop();var bx=null;var by=0;var bz=e.length;for(var bA=0;bA<bz;bA++){var bB=e[bA];var bC=typeof(bB);if(bC==='number'){continue}if(ss.isNullOrUndefined(bB)){continue}if(bC!=='object'||!$.isArray(bB)){return e}var bD=bB;if(!W.$4(bD)){return e}bx=bx||[];for(var bE=by;bE<bA;bE++){bx.push(e[bE])}W.$3(bx,bD);by=bA+1}if(ss.isValue(bx)){for(var bF=by;bF<bz;bF++){bx.push(e[bF])}e=bx}return e};global.tab.RleDecoder=W;var X=function(){};X.__typeName='tab.SizeUtil';X.isEmpty=function(e){return e.w===0&&e.h===0};X.union=function(e,bx){return{w:Math.max(e.w,bx.w),h:Math.max(e.h,bx.h)}};X.unionPresModels=function(e,bx){var by={};by.rec=Math.max(e.rec,bx.rec);by.EUR=Math.max(e.EUR,bx.EUR);return by};X.add=function(e,bx){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(bx)){return e}return{w:e.w+bx.w,h:e.h+bx.h}};X.subtract=function(e,bx){return{w:e.w-bx.w,h:e.h-bx.h}};X.equals=function(e,bx){return ss.isValue(e)&&ss.isValue(bx)&&bx.w===e.w&&bx.h===e.h};global.tab.SizeUtil=X;var Y=function(e,bx){this.url=null;this.lineNo=0;this.columnNo=0;this.functionName='?';this.context=null;this.url=e;this.lineNo=bx};Y.__typeName='tab.StackLocation';global.tab.StackLocation=Y;var Z=function(e,bx){this.userAgent=window.navigator.userAgent;this.traceMode='onError';this.message=null;this.url=null;this.locations=null;this.isIncomplete=false;this.isPartial=false;this.name=null;this.traceMode=e;this.message=bx;this.url=document.URL;this.locations=[]};Z.__typeName='tab.StackTrace';global.tab.StackTrace=Z;var ba=function(){g.call(this)};ba.__typeName='tab.StackTraceAppender';ba.enableLogging=function(e){if(ss.isNullOrUndefined(ba.$0)){ba.$0=new ba;J.addAppender(ba.$0)}ba.$0.addFilter(e||function(){return true})};ba.disableLogging=function(){if(ss.isValue(ba.$0)){J.removeAppender(ba.$0);ba.$0=null}};global.tab.StackTraceAppender=ba;var bb=function(e,bx){this.$0=null;this.$1=null;this.$0=e;this.$1=bx};bb.__typeName='tab.StringTuple';global.tab.StringTuple=bb;var bc=function(){};bc.__typeName='tab.StyleUtil';bc.appendCSSRule=function(e,bx){bc.appendCSSRuleToStyleSheet('appendedCustomStyle',e,bx)};bc.appendCSSRuleToStyleSheet=function(e,bx,by){var bz;var bA=null;if(ss.isNullOrUndefined(bc.$2)){bc.$2={}}if(ss.isNullOrUndefined(bc.$3)){bc.$3={}}bz=bc.$2[e];bA=bc.$3[e];if(ss.isNullOrUndefined(bz)){bz=document.createElement('style');bz.setAttribute('type','text/css');bz.id=e;document.getElementsByTagName('head')[0].appendChild(bz);var bB=document.styleSheets;for(var bC=0;bC<bB.length;bC++){var bD=bB[bC];var bE=bD.ownerNode;if(ss.isNullOrUndefined(bE)){bE=bD.owningElement}if(ss.isValue(bE)&&ss.referenceEquals(bE.id,e)){bA=bD;break}}bc.$2[e]=bz;bc.$3[e]=bA}var bF='';var bG=_.keys(by);for(var bH=0;bH<bG.length;bH++){var bI=bG[bH];var bJ=by[bI];if(!ss.isNullOrEmptyString(bJ)){bF+=bI+':'+bJ+';\n'}}if(typeof(bA['insertRule'])==='function'){var bK=bx+' {\n'+bF+'}\n';var bL=bA.cssRules.length;bA['insertRule'](bK,bL)}else{var bM=bx.split(',');for(var bN=0;bN<bM.length;bN++){var bO=bM[bN];bA['addRule'](bO,bF,-1)}}};bc.clearDefaultStyleSheet=function(){bc.clearStyleSheet('appendedCustomStyle')};bc.clearStyleSheet=function(e){var bx=null;if(ss.isNullOrUndefined(bc.$2)){return}bx=bc.$2[e];if(ss.isValue(bx)&&ss.isValue(bx.parentNode)){bx.parentNode.removeChild(bx);delete bc.$3[e];delete bc.$2[e]}};bc.isValidCssClassName=function(e){var bx=e.match(bc.$1);return ss.isValue(bx)};global.tab.StyleUtil=bc;var bd=function(e,bx,by,bz){this.$3=null;this.$1=0;this.$0=0;this.$2=0;this.$3={x:e,y:bx};this.$1=by;this.$0=1/by;this.$2=bz};bd.__typeName='tab.Transform';bd.offset=function(e,bx){return((e===0&&bx===0)?bd.$0:new bd(e,bx,1,3))};bd.pixelToDomain=function(e,bx,by){if(u.isApproximatelyZero(e)&&u.isApproximatelyZero(bx)&&u.isApproximatelyEqual(1,by)){return bd.$0}return new bd(e,bx,by,1)};bd.domainToPixel=function(e,bx,by){if(u.isApproximatelyZero(e)&&u.isApproximatelyZero(bx)&&u.isApproximatelyEqual(1,by)){return bd.$0}return new bd(e,bx,by,2)};global.tab.Transform=bd;var be=function(){this.$0=null;this.reset()};be.__typeName='tab.TransformationMatrix';global.tab.TransformationMatrix=be;var bf=function(){};bf.__typeName='tab.TransformationType';global.tab.TransformationType=bf;var bg=function(){this.$0={}};bg.__typeName='tab.UintSet';global.tab.UintSet=bg;var bh=function(){this.$2=null;g.call(this)};bh.__typeName='tab.WindowAppender';bh.enableLogging=function(e){if(ss.isNullOrUndefined(bh.$0)){bh.$0=new bh;J.addAppender(bh.$0)}bh.$0.addFilter(e||function(){return true})};bh.disableLogging=function(){if(ss.isNullOrUndefined(bh.$0)){return}J.removeAppender(bh.$0);bh.$0=null};global.tab.WindowAppender=bh;var bi=function(){};bi.__typeName='tableau.format';bi.$y=function(){return J.lazyGetLogger(bi)};bi.get_isO8601DateFormat=function(){return bi.$P};bi.get_isO8601DateTimeFormat=function(){return bi.$Q};bi.get_isO8601TimeFormat=function(){return bi.$R};bi.formatDataValue=function(e,bx,by,bz,bA){var bB=e.s;if(ss.isNullOrUndefined(bB)||ss.isNullOrUndefined(bB)){var bC=(('t'in e)?e.t:'');var bD=e.v;switch(bC){case's':{return bD}case'b':{return bD.toString()}case'i':{if(typeof(bD)!=='number'){bD=parseInt(bD,10)}return((bx==='d')?bi.$i(bD).toString():bi.$d(bD,by))}case'r':{if(typeof(bD)!=='number'){bD=parseFloat(bD)}return bi.$j(bD,bC,by,bz,bx)}case't':{return(_.isDate(bD)?bi.formatJsDateTime(bD,by,bA,bC):bi.$g((_.isNumber(e.v)?e.v:parseFloat(e.v)),by,bA,bC))}case'd':{return(_.isDate(bD)?bi.formatJsDateTime(bD,by,0,bC):bi.$g((_.isNumber(e.v)?e.v:parseFloat(e.v)),by,0,bC))}}throw new ss.Exception('Invalid Tableau Format Type')}if(bB==='n'){return'null'}if(bB==='m'){return tab.Strings.SpecialMissing}return'#special:'+bB+'#'};bi.parseQuantitativeDataValue=function(e,bx,by,bz,bA){switch(bx){case'i':{return parseInt(bi.reformatNumberToJsFormat(e,by),10)}case'r':{return parseFloat(bi.reformatNumberToJsFormat(e,by))}case'd':case't':{var bB=bi.formatToJSCompliantFormat(e,by,bz,bA);return bj.OleDateFromJsDate((new Date(Date.parse(bB+' GMT'))).getTime())}}return(ss.isValue(bA)?parseFloat(bA.v):0)};bi.reformatNumberToJsFormat=function(e,bx){var by=bx[8].replace(bi.$W,'\\$1');if(by.indexOf(' ')!==-1){by+=' '}var bz=bx[7].replace(bi.$W,'\\$1');return e.replace(new RegExp('['+by+']','g'),'').replace(new RegExp('['+bz+']','g'),'.')};bi.formatToJSCompliantFormat=function(e,bx,by,bz){var bA=bi.normalizeDateTimeFormat(bx,by,bz.t);var bB=bi.tokenizeDateTime(e,bA,by);if(ss.isValue(bB)){return bi.$3(bB,bz)}else{return''}};bi.normalizeDateTimeFormat=function(e,bx,by){var bz=e.format;var bA=e.timeFormat;if(bz.charCodeAt(0)===42){bz=bz.substr(1)}if(bx!==0&&ss.isValue(bA)&&(ss.isNullOrUndefined(e.originalFormat)||0===e.originalFormat.length||e.originalFormat==='S')&&by==='t'){if(bA.charCodeAt(0)===42){bA=bA.substr(1)}bz=bz+' '+bA}bz=bz.replace(new RegExp('ampm','g'),'tt');bz=ss.replaceAllString(bz,'H','h');bz=bz.replace(bi.$L,function(bB){return bB.replace(new RegExp('m','gi'),'m')});bz=bz.replace(bi.$M,function(bB){return bB.replace(new RegExp('m','gi'),'n')});return bz};bi.tokenizeDateTime=function(e,bx,by){var bz=bx;bz=bz.replace(bi.$W,'\\$1');bz=bz.replace(bi.$Z,'($1)');bz=bz.replace(bi.$S,'($1)');var bA=bx.match(new RegExp(bz));var bB=bx;bB=bB.replace(bi.$W,'\\$1');if(by===1){bB=bB.replace(bi.$N,'(?:$1 )?$2')}else{bB=bB.replace(bi.$N,'$1(?: $2)?')}bB=bB.replace(bi.$X,'(?:$1)?');bB=bB.replace(bi.$S,'(\\d+)');bB=bB.replace(bi.$Z,'([^0-9\\s]+)?');bB=bB.replace(bi.$Y,function(bF){return bF.replace(new RegExp('\\s+','g'),'\\s+')});bB=bB.replace(bi.$T,'\\s*');var bC=e.match(new RegExp(bB));if(ss.isNullOrUndefined(bC)){return null}var bD={};for(var bE=1;bE<bC.length;++bE){if(ss.isValue(bC[bE])&&bC[bE].length>0){bD[bA[bE].substr(0,1).toLowerCase()]=bC[bE]}}return bD};bi.$3=function(e,bx){if(!ss.keyExists(e,'y')&&!ss.keyExists(e,'m')&&!ss.keyExists(e,'d')){var by=(bx.v?new Date(bj.JsDateFromOleDate(bx.v)):new Date(bj.javaScriptOLEEpoch()));e['y']=by.getUTCFullYear().toString();e['m']=(by.getUTCMonth()+1).toString();e['d']=by.getUTCDate().toString()}var bz=e['y'].replace(new RegExp('^(\\d{2})$'),function(bB){var bC=parseInt(bB,10);return((bC<30)?('20'+bB):('19'+bB))});var bA=e['m']+'/'+e['d']+'/'+bz;if(ss.keyExists(e,'h')&&ss.keyExists(e,'n')){bA+=' '+e['h']+':'+e['n']+':';bA+=(ss.keyExists(e,'s')?e['s']:'00');if(ss.keyExists(e,'t')){if(ss.isValue(e['t'].match(bi.$K))){bA+=' am'}else if(ss.isValue(e['t'].match(bi.$U))){bA+=' pm'}}}return bA};bi.formatCustomJSDateTime=function(e,bx,by,bz,bA,bB,bC,bD,bE){var bF=0,bG=0,bH;if(ss.isNullOrUndefined(bE)){bE=new i}var bI=ss.isValue(bC);var bJ=ss.isNullOrUndefined(bB)||0===bB.length||bB==='S';var bK=bz==='t';if(ss.isValue(by)&&by!==0&&bI&&bJ&&bK){if(bC.charCodeAt(0)===42){bC=bC.substr(1)}if(by===2){bx=bx+' '+bC}else{bx=bC}}if(bx==='L'){bx='*dddd, mmmm dd, yyyy'}if(bx.charCodeAt(0)===42){bx=bx.substr(1)}bH=bx.length;var bL,bM;if(bE.fiscalYearStart>1){bL=bM=bi.dtGetFiscalYear(e,bE.fiscalYearStart)}else{bL=e.getUTCFullYear();bM=(bE.brokenWeeks?bL:bi.$a(e,bE.startOfWeek,bE.minDaysInFirstWeek))}var bN=bM.toString();var bO=bN.substr(bN.length-2);var bP=bL.toString();var bQ=bP.substr(bP.length-2);var bR=[];bR.push(new bb('ampm',bi.$5(e)));bR.push(new bb('tt',bi.$5(e)));bR.push(new bb('yyyy',bP));bR.push(new bb('yy',bQ));bR.push(new bb('mmmm',bi.$v(e,bD)));bR.push(new bb('mmm',bi.$x(e,bD)));bR.push(new bb('dddd',bi.$u(e,bD)));bR.push(new bb('ddd',bi.$w(e,bD)));bR.push(new bb('mm',bi.$p(e.getUTCMonth()+1,2)));bR.push(new bb('m',(e.getUTCMonth()+1).toString()));bR.push(new bb('dd',bi.$p(e.getUTCDate(),2)));bR.push(new bb('d',e.getUTCDate().toString()));bR.push(new bb('hh',bi.$p(bi.$8(e),2)));bR.push(new bb('h',bi.$8(e).toString()));bR.push(new bb('nn',bi.$p(e.getUTCMinutes(),2)));bR.push(new bb('n',e.getUTCMinutes().toString()));bR.push(new bb('ss',bi.$p(e.getUTCSeconds(),2)));bR.push(new bb('s',e.getUTCSeconds().toString()));bR.push(new bb('ww',bi.$9(e,bE).toString()));bR.push(new bb('y',bi.$6(e).toString()));bR.push(new bb('w',(e.getUTCDay()+1).toString()));bR.push(new bb('q',bi.dtGetFiscalQuarter(e,bE.fiscalYearStart).toString()));var bS=[];var bT=null;var bU=false;var bV=false;var bW=-1;var bX=false;var bY=false;var bZ=false;while(bF<bH){var ca=false;var cb=false;for(var cc=0;cc<bR.length;cc++){var cd=bR[cc];var ce=cd.get_first();var cf=cd.get_second();if(ss.referenceEquals(ce,bx.substr(bF,ce.length).toLowerCase())){ca=true;bS.push(cf);bF+=ce.length;if(ss.isValue(bT)&&ce==='mm'){bS[bS.length-1]=bi.$p(e.getUTCMinutes(),2)}if(ss.isValue(bT)&&ce==='m'){bS[bS.length-1]=e.getUTCMinutes().toString()}if(ce.charCodeAt(0)===100){bT=null}if(ce.charCodeAt(0)===104){bT=ce;bG=bS.length-1}if(ss.isValue(bT)&&(ce==='ampm'||ce==='tt')){bS[bG]=((bT==='hh')?bi.$p(bi.$7(e),2):bi.$7(e).toString())}switch(ce.charCodeAt(0)){case 121:{if(ce.length>1){cb=true;bW=bS.length-1;bX=ce.length===4;bZ=true;if(bU){if(!bE.brokenWeeks){bS[bW]=(bX?bN:bO);bZ=false}bU=false}}break}case 119:{if(ce.length!==2){break}var cg=bU;bU=true;if(!cg&&!bV&&bZ){if(!bE.brokenWeeks){bS[bW]=(bX?bN:bO);bZ=false}bU=false}bV=false;break}case 109:case 100:case 113:{if((ce==='mm'||ce==='m')&&ss.isValue(bT)){break}bU=false;bV=true;break}}break}}if(ca){bY=cb;continue}if(bx.charCodeAt(bF)===92){bS.push(bx.substr(bF+1,1));bF+=2}else if(bx.charCodeAt(bF)===34){var ch=bx.charCodeAt(bF);var ci=++bF;while(bF<bH&&bx.charCodeAt(bF)!==ch){bF+=1}if(ci<bH&&bF>ci){bS.push(bx.substr(ci,bF-ci))}if(bF<bH){bF+=1}}else if(bx.charCodeAt(bF)===91){var cj=++bF;while(cj<bx.length&&bx.charCodeAt(cj)!==93){cj++}var ck=bx.substring(bF,cj);if((ck==='y'||ck==='Y')&&bY){bS[bW]=((ck==='y')?(bX?bP:bQ):(bX?bN:bO));bZ=false}bF=cj+1}else{bS.push(String.fromCharCode(bx.charCodeAt(bF)));bF+=1}bY=cb}bx=bS.join('');return bx};bi.mapIcuToOleFormat=function(e){return bi.$n(bi.$O,e)};bi.$n=function(e,bx){if(ss.isNullOrUndefined(e)||ss.isNullOrEmptyString(bx)){return bx}var by=new ss.StringBuilder;var bz=0;var bA=0;var bB=null;while(++bA<=bx.length){var bC=e[bx.substring(bz,bA)];if(ss.isValue(bC)){bB=bC}else{if(ss.isValue(bB)){by.append(bB);--bA}else{by.append(bx.substring(bz,bz+1))}bz=bA;bB=null}}if(ss.isValue(bB)){by.append(bB)}return by.toString()};bi.escapeHTML=function(e){return tab.EscapingUtil.escapeHtml(e)};bi.formatColumnDisplayName=function(e,bx){var by=e.caption;var bz;if(!(typeof(by)==='undefined')){bz=by}else{var bA=e.name;bz=(bx?ss.arrayExtract(bA,1).join('.'):bi.formatQualifiedName(bA))}return tab.EscapingUtil.escapeHtml(bz)};bi.formatTupleDisplayName=function(e,bx,by){if(ss.isNullOrUndefined(e)){return' '}var bz=e.d;var bA=(ss.isValue(bz)?bz:bi.formatTupleUniqueName(e,by));var bB=(bx?bA:bi.escapeHTML(bA));return ss.coalesce(bB,' ')};bi.formatTupleUniqueName=function(e,bx){var by='';if(ss.isValue(e)){var bz=e.t;if(ss.isValue(bz)){for(var bA=0;bA<bz.length;bA++){var bB=bz[bA];if(by.length!==0){by+=','}by+=bi.formatDataValue(bB,bx)}}}return by};bi.formatTupleDisplayFacet=function(e,bx,by){var bz=bi.formatTupleFacet(e,by);return(bx?bz:bi.escapeHTML(bz))};bi.formatTupleFacet=function(e,bx){var by='';if(ss.isValue(e)){var bz=e.f;if(ss.isValue(bz)){for(var bA=0;bA<bz.length;bA++){var bB=bz[bA];if(by.length!==0){by+=','}by+=bi.formatDataValue(bB,bx)}}}return by};bi.formatQualifiedName=function(e){var bx='';for(var by=0;by<e.length;by++){var bz=e[by];if(bx.length!==0){bx+='.'}bx+='['+bz.replace(new RegExp('\\]','g'),']]')+']'}return bx};bi.formatIntAuto=function(e,bx,by,bz){var bA=bi.$1(e,bx,by,bz);return((bi.$t(e)>=0)?bA:('-'+bA))};bi.isDateTimeWithNonMidnightTime=function(e){return ss.isValue(e)&&(ss.isNullOrEmptyString(e.s)||ss.isNullOrUndefined(e.s))&&e.t==='t'&&!bi.$m(new Date(bj.JsDateFromOleDate(parseFloat(e.v))))};bi.applyDecimalPlaces=function(e,bx,by){if(bx>=0){var bz=e-bi.$t(e);var bA=bi.$r(bz,bx);var bB=parseInt(bA,10);if(Math.abs(bB)===1){return bB}if(bx===0){return''}bA=bA.replace(new RegExp('^-?0\\.'),by);return bA}return''};bi.formatString=function(e,bx){var by=bx.tbM;var bz=bx.blJ;var bA=bx.YIQ;var bB=bz;var bC='';var bD=e.toString();switch(by){case'cstring':{bC='s';break}case'date':{bC='d';bD=p.parsePresModelDate(e);bB=bi._convertFormatStringsToFormattingInfo(bz);break}case'datetime':{bC='t';bD=p.parsePresModelDate(e);bB=bi._convertFormatStringsToFormattingInfo(bz);break}case'integer':{bC='i';bD=parseInt(e);break}case'real':{bC='r';bD=parseFloat(e);break}case'tuple':{bC='s';bD=bi.$l(e);break}case'unknown':default:{bC=null;break}}var bE={t:bC,v:bD};var bF;switch(bA){case'dimension':{bF='d';break}case'measure':{bF='m';break}case'unknown':default:{bF=null;break}}return bi.formatDataValue(bE,bF,bB,null,0)};bi.formatSpecial=function(e,bx){if(ss.isValue(bx)){return bx}switch(e){case'%many-values%':{return tab.Strings.SpecialManyValues}case'%null%':{return''}case'%error%':{return tab.Strings.SpecialError}case'%ragged%':{return tab.Strings.SpecialRagged}case'%skipped%':{return tab.Strings.SpecialSkipped}case'%missing%':{return''}case'%all%':{return tab.Strings.SpecialAll}case'%no-access%':{return tab.Strings.SpecialNoAccess}case'%wildcard%':{return tab.Strings.SpecialWildcard}default:{return'#Special'}}};bi.isSpecialValue=function(e){return e==='%many-values%'||e==='%null%'||e==='%error%'||e==='%ragged%'||e==='%skipped%'||e==='%missing%'||e==='%all%'||e==='%no-access%'||e==='%wildcard%'};bi.stripFormattedText=function(e){if(ss.isNullOrUndefined(e)){return null}return $(e).find('run').text()};bi.deriveNumberEditingFormat=function(e){if(ss.isNullOrUndefined(e)){return null}return['','-1',e[2],'','','','',e[7],e[8],e[9]]};bi.$p=function(e,bx){var by=e.toString();while(by.length<bx){by='0'+by}return by};bi.$m=function(e){return ss.isValue(e)&&(e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0||e.getUTCHours()===23&&e.getUTCMinutes()===59&&e.getUTCSeconds()===59)};bi.$5=function(e){return((e.getUTCHours()<12)?'AM':'PM')};bi.$7=function(e){var bx=e.getUTCHours();if(bx<12){if(bx===0){bx=12}}else if(bx>12){bx-=12}return bx};bi.$8=function(e){return e.getUTCHours()};bi.$6=function(e){var bx=new Date(e.getUTCFullYear(),0,1,12);var by=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),12);return Math.round((by-bx)/86400000)+1};bi.$4=function(e,bx){return e.getUTCFullYear()+((e.getUTCMonth()+1<bx)?-1:0)};bi.$a=function(e,bx,by){var bz=(e.getUTCDay()+7-(bx-1))%7;var bA=-bz+(7-by);var bB=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()+bA));return bB.getUTCFullYear()};bi.$9=function(e,bx){var by;if(bx.fiscalYearStart<=1){var bz=(bx.brokenWeeks?e.getUTCFullYear():bi.$a(e,bx.startOfWeek,bx.minDaysInFirstWeek));by=new Date(Date.UTC(bz,0,1))}else{by=new Date(Date.UTC(bi.$4(e,bx.fiscalYearStart),bx.fiscalYearStart-1,1))}var bA=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));var bB=(by.getUTCDay()+7-(bx.startOfWeek-1))%7;var bC=ss.Int32.div(bA-by,86400000)+bB;if(bx.fiscalYearStart<=1&&7-bB<bx.minDaysInFirstWeek){bC-=7}return Math.floor(bC/7)+1};bi.dtGetFiscalYear=function(e,bx){var by=e.getUTCFullYear();var bz=e.getUTCMonth()+1;return((bz<bx||bx===1)?0:1)+by};bi.dtGetFiscalQuarter=function(e,bx){if(bx<1){bx=1}return Math.floor((e.getUTCMonth()+1-bx+12)%12/3)+1};bi.$u=function(e,bx){if(ss.isNullOrUndefined(bx)){return null}return bx.day[e.getUTCDay()+1]};bi.$w=function(e,bx){if(ss.isNullOrUndefined(bx)){return null}return bx.shortDay[e.getUTCDay()+1]};bi.$v=function(e,bx){if(ss.isNullOrUndefined(bx)){return null}return bx.month[e.getUTCMonth()]};bi.$x=function(e,bx){if(ss.isNullOrUndefined(bx)){return null}return bx.shortMonth[e.getUTCMonth()]};bi.formatJsDateTime=function(e,bx,by,bz){if(ss.isNullOrUndefined(bx)){if(by===2&&bi.$m(e)){by=0}return bi.formatCustomJSDateTime(e,'*M/d/yyyy',by,bz,'en_US','','h:nn:ss tt',null)}return bi.formatCustomJSDateTime(e,bx.format,by,bz,bx.locale,bx.originalFormat,bx.timeFormat,bx.locale_formatting_strings,bx.calOpts)};bi.$g=function(e,bx,by,bz){var bA=new Date(bj.JsDateFromOleDate(e));return bi.formatJsDateTime(bA,bx,by,bz)};bi.$t=function(e){return((e<0)?Math.ceil(e):Math.floor(e))};bi.$1=function(e,bx,by,bz){var bA=Math.abs(bi.$t(e));var bB='';var bC=parseInt(String.fromCharCode(bz.charCodeAt(0)),10)||3;var bD;if(bA<1E+15){bD=bi.$r(bA,0)}else{bD=bi.$q(bA,14);var bE=bD.match(bi.$V);if(ss.isValue(bE)){var bF=ss.coalesce(bE[2],'');var bG=parseInt(bE[3],10)-bF.length;var bH='';for(var bI=0;bI<bG;bI++){bH+='0'}bD=bE[1]+bF+bH}}if(bx!=='t'){return bD}for(var bJ=bD.length-1,bK=0;bJ>=0;bJ--,bK++){if(bK>=bC){bB=by+bB;bK=0}bB=String.fromCharCode(bD.charCodeAt(bJ))+bB}return bB};bi.$2=function(e,bx){switch(bx){case'B':case'G':{return e/1000000000}case'M':{return e/1000000}case'K':{return e/1000}default:{return e}}};bi.$0=function(e,bx,by,bz,bA){bx=bx.replace(new RegExp('^-'),'');if(e>=0||(new RegExp('^[.0]*$')).test(bx)){return by+bx+bz}switch(parseInt(bA,10)){case 2:{return'-'+by+bx+bz}case 3:{return by+bx+bz+'-'}case 4:{return by+'-'+bx+bz}case 5:{return by+bx+'-'+bz}default:{return'('+by+bx+bz+')'}}};bi.$i=function(e){return bi.$t(e)};bi.$e=function(e,bx,by,bz,bA,bB,bC){if(bx==='i'){return bi.$b(e,bx,by,bz,bA,bB,bC,null,null)}else{return bi.$b(e,bx,by,bz,bA,bB,bC,0.0001,1E+15)}};bi.$f=function(e,bx,by,bz,bA,bB){if(bx==='i'){return bi.$b(e,bx,null,by,bz,bA,bB,null,1000000)}else{return bi.$b(e,bx,null,by,bz,bA,bB,0.0001,1E+15)}};bi.$b=function(e,bx,by,bz,bA,bB,bC,bD,bE){var bF;var bG;var bH;if(ss.isValue(by)&&ss.unbox(by)<=0){bF=-ss.unbox(by);bH=bG=false}else{bF=bi.$o(e,bx,true);bH=bG=true}var bI=Math.abs(e);if(bH&&bI!==0&&(ss.isValue(bE)&&ss.Nullable$1.ge(bI,bE)||ss.isValue(bD)&&ss.Nullable$1.lt(bI,bD))){var bJ=bi.$o(1,bx,true);var bK=bi.$c(e,bJ,bz);if(bG){return bK.replace(new RegExp('['+bz+']?0+e'),'e')}}var bL=e-bi.$t(e);var bM=bi.formatIntAuto(e,bA,bB,bC);var bN='';bN=bi.$r(bL,bF);if(Math.abs(parseFloat(bN))>=1){bM=bi.formatIntAuto(bi.$t(e+parseFloat(bN)),bA,bB,bC);bN=bN.replace(new RegExp('1'),'0')}if(!(bN.indexOf('.')!==-1)){return bM}if(bG){bN=bN.replace(new RegExp('0+$'),'');if(ss.endsWithString(bN,'.')){return bM}}bN=bN.replace(new RegExp('^-?0\\.'),bz);if(e<0&&bM==='0'&&!(new RegExp('^\\.0+$')).test(bN)){bM='-0'}return bM+bN};bi.$o=function(e,bx,by){var bz=((bx==='i')?6:15);var bA=Math.max(0,bz-Math.abs(bi.$t(e)).toString().length);if(by){return Math.min(bA,9)}else{return bA}};bi.$c=function(e,bx,by){if(isNaN(e)||!isFinite(e)){return e.toString()}if(bx<0||isNaN(bx)){bx=0}if(bx>15){bx=15}var bz=bi.$q(e,bx);var bA=bz.indexOf(String.fromCharCode(101));var bB=bz.substr(bA);if(bB.length<4){bz=bz.substr(0,bA+2)+'0'+bz.substr(bA+2)}bz=bz.replace(new RegExp('\\.'),by);return bz};bi.$q=function(e,bx){return bi.$s(e,bx,15,function(by,bz){return by.toExponential(bz)})};bi.$r=function(e,bx){return bi.$s(e,bx,bi.$o(e,'r',false),function(by,bz){return by.toFixed(bz)})};bi.$s=function(e,bx,by,bz){by=Math.max(by-1,bx);var bA=bz(e,by);var bB=bA.indexOf(String.fromCharCode(101));if(bB===-1){bB=bA.length}var bC=bB-(by-bx);var bD=bA.charCodeAt(bC);if(bA.charCodeAt(bC-1)===46){bC--}bA=bA.substr(0,bC)+bA.substr(bB,bA.length);if(bD>=53&&bD<=57){var bE;do{bC--;bE=bA.charCodeAt(bC);if(bE===46||bE===45){bE=48;continue}bE++;if(bE>57){bE=48}bA=bA.substr(0,bC)+String.fromCharCode(bE)+bA.substr(bC+1,bA.length)}while(bE===48&&bC>0);if(bE===48&&bC===0){bA=bz(e,bx)}}return bA};bi.$h=function(e,bx,by,bz){if(by===-1){return bi.$b(e*100,bx,null,bz[7],bz[2],bz[8],bz[9],null,null)+'%'}else{return bi.$k(e*100,by,bz)+'%'}};bi.$j=function(e,bx,by,bz,bA){if(ss.isNullOrUndefined(by)||by.length!==10){return bi.$e(e,bx,bz,'.',((bA==='d')?null:'t'),',','3;0')}var bB=parseInt(by[1],10);switch(by[0]){case'':{if(bB===-1){return bi.$e(e,bx,null,by[7],by[2],by[8],by[9])}else{return bi.$e(e,bx,-bB,by[7],by[2],by[8],by[9])}}case'N':{return bi.$f(e,bx,by[7],by[2],by[8],by[9])}case'e':{return bi.$c(e,bB,by[7])}case'p':{return bi.$h(e,bx,bB,by)}default:{return bi.$k(e,bB,by)}}};bi.$k=function(e,bx,by){e=bi.$2(e,by[5]);var bz=by[5]+by[4];var bA=bi.applyDecimalPlaces(e,bx,by[7]);if(typeof(bA)==='number'){e+=bA;bA=bi.applyDecimalPlaces(0,bx,by[7])}var bB=bi.$1(e,by[2],by[8],by[9])+bA;return bi.$0(e,bB,by[3],bz,by[6])};bi.$d=function(e,bx){return bi.$j(bi.$t(e),'i',bx,null,null)};bi._convertFormatStringsToFormattingInfo=function(e){var bx={};bx.format=e[0];bx.locale=e[1];bx.originalFormat=e[2];bx.timeFormat=e[3];bx.calOpts=new i;bx.calOpts.fiscalYearStart=parseInt(e[4]);if(isNaN(bx.calOpts.fiscalYearStart)){bx.calOpts.fiscalYearStart=0}bx.calOpts.startOfWeek=parseInt(e[5]);if(isNaN(bx.calOpts.startOfWeek)){bx.calOpts.startOfWeek=1}bx.calOpts.minDaysInFirstWeek=parseInt(e[6]);if(isNaN(bx.calOpts.minDaysInFirstWeek)){bx.calOpts.minDaysInFirstWeek=1}bx.calOpts.brokenWeeks=e[7]==='1';return bx};bi.$l=function(e){var bx=44;var by=40;var bz=41;var bA=39;var bB=92;var bC=[];e=e.trim();if(e.length===0){return''}var bD=e.length;var bE=0;if(bE>=bD||e.charCodeAt(bE)!==40){return''}++bE;while(bE<bD){var bF=bE;var bG=false;var bH=0;while(bF<bD&&!bG){var bI=e.charCodeAt(bF);if(bH===0&&(bI===44||bI===41)){bG=true;break}else if(bI===92){bF+=2}else{if(bI===39){bH=1-bH}++bF}}if(!bG){return''}var bJ=e.substring(bE+1,bF-1);bJ=ss.replaceAllString(bJ,'\\\\','\\');bJ=ss.replaceAllString(bJ,'\\"','"');bJ=ss.replaceAllString(bJ,'\\,',',');bJ=ss.replaceAllString(bJ,'\\(','(');bJ=ss.replaceAllString(bJ,'\\)',')');bC.push(bJ);bE=bF;++bE}return bC.join(', ')};global.tableau.format=bi;var bj=function(){};bj.__typeName='tableau.types';bj.$0=function(){return N.lazyInitStaticField(bj,'millisecondsPerDay',function(){return 86400000})};bj.javaScriptOLEEpoch=function(){return N.lazyInitStaticField(bj,'javascriptOleEpoch',function(){return Date.UTC(1899,11,30,0,0,0,0)})};bj.JsDateFromOleDate=function(e){var bx=((e<0)?Math.ceil(e):Math.floor(e));var by=Math.round(Math.abs(e-bx)*bj.$0())+bx*bj.$0();return by+bj.javaScriptOLEEpoch()};bj.OleDateFromJsDate=function(e){var bx=new Date(e);var by=Date.UTC(bx.getUTCFullYear(),bx.getUTCMonth(),bx.getUTCDate());var bz=ss.Int32.div(by-bj.javaScriptOLEEpoch(),bj.$0());var bA=(e-by)/bj.$0();return bz+((bz<0)?-1:1)*bA};bj.isO=function(e){return e.fieldType==='O'||e.fieldType==='N'};bj.isMetadata=function(e){return e.column_class===0};bj.isOm=function(e){return bj.isO(e)&&bj.isMetadata(e)};bj.getRegionType=function(e){switch(e){case'viz':case'bottomaxis':case'topaxis':case'leftaxis':case'rightaxis':case'xheader':case'yheader':{return't'}case'color':case'shape':case'size':case'map':{return'l'}case'filter':{return'f'}case'current-page':{return'p'}case'title':{return'i'}case'text':{return'x'}case'bitmap':{return'b'}case'web':{return'w'}case'paramctrl':{return'a'}case'draw':{return'd'}case'text-block':{return'k'}case'layout-basic':case'layout-flow':{return'c'}default:{return null}}};global.tableau.types=bj;var bk=function(){};bk.__typeName='tableau.util';bk.assetUrl=function(e,bx){var by=(bx?tsConfig.local_static_asset_prefix:tsConfig.external_static_asset_prefix);if(e.charCodeAt(0)===47){var bz=by.length-1;if(by.charCodeAt(bz)===47){return by.substring(0,bz-1)+e}else{return by+e}}else{return by+'/'+e}};bk.selectText=function(e,bx,by){if(ss.isNullOrUndefined(e)){return}if(typeof(e['createTextRange'])==='function'){var bz=e.createTextRange();bz.collapse(true);bz.moveStart('character',bx);bz.moveEnd('character',by-bx);bz.select()}else if(typeof(e['setSelectionRange'])==='function'){e.setSelectionRange(bx,by)}else if(typeof(e['selectionStart'])==='function'){e.selectionStart=bx;e.selectionEnd=by}e.focus()};bk.isPrintableNonNumericKeyPressed=function(e){return bk.isPrintableNonNumericInput(e.which,e.shiftKey,e.ctrlKey)};bk.isPrintableNonNumericInput=function(e,bx,by){var bz=e>=91&&e<=105;var bA=e>=112&&e<=123;var bB=e<47;var bC=!bx&&!by&&(e>=48&&e<=57);return!bz&&!bB&&!bC&&!bA};bk.preventNonNumericInput=function(e){if(bk.isPrintableNonNumericKeyPressed(e)){e.preventDefault();e.stopPropagation()}};bk.isElementVisible=function(e){e=dojo.byId(e);return dojo.style(e,'display')!=='none'};bk.disableTextSelection=function(e){if(typeof(e['onselectstart'])==='function'){var bx=function(by){dojo.stopEvent(by)};e['onselectstart']=bx}else if('MozUserSelect'in e.style){e.style['MozUserSelect']='none'}e.style.cursor='default'};bk.findElementByTagName=function(e,bx,by){e=e||dojo.body();if(bk.isNodeMatch(e,bx,by)){return e}var bz=e.getElementsByTagName(bx);var bA=bz.length;for(var bB=0;bB<bA;bB+=1){if(bk.isNodeMatch(bz[bB],bx,by)){return bz[bB]}}return null};bk.findDirectParentByClassName=function(e,bx,by){if(ss.isNullOrUndefined(e)||N.isNullOrEmpty(bx)){return null}by=by||document.body;var bz=e.parentNode;while(!ss.isNullOrUndefined(bz)&&!ss.referenceEquals(bz,by)){if(!N.isNullOrEmpty(bz.className)){if(ss.referenceEquals(bz.className.toLowerCase(),bx.toLowerCase())){return bz}bz=bz.parentNode}}return null};bk.isNodeMatch=function(e,bx,by){if(ss.isNullOrUndefined(e)||!ss.referenceEquals(e.tagName.toLowerCase(),bx.toLowerCase())){return false}if(ss.isNullOrUndefined(by)){return true}var bz=ss.getEnumerator(Object.keys(by));try{while(bz.moveNext()){var bA=bz.current();if(bA in by&&!ss.referenceEquals(e[bA],by[bA])){return false}}}finally{bz.dispose()}return true};bk.binarySearch=function(e){return function(bx,by,bz,bA,bB){var bC=(N.isValidIndex(ss.coalesce(bz,-1),by)?ss.unbox(bz):0);var bD=(N.isValidIndex(ss.coalesce(bA,-1),by)?ss.unbox(bA):(by.length-1));if(ss.isNullOrUndefined(bB)){bB=bk.$0(e)}var bE={};while(bC<=bD){var bF=Math.floor(bC+(bD-bC)/2);var bG=bB(by[bF],bx);if(bG===0){bE.found=true;bE.index=bF;return bE}else if(bG<0){bC=bF+1}else{bD=bF-1}}bE.found=false;bE.index=bC;return bE}};bk.$0=function(e){return function(bx,by){if(bx===by){return 0}else if(bx>by){return-1}else{return 1}}};bk.transform=function(e,bx){var by='';var bz={};bz.scaleX=1;bz.scaleY=1;bz.translateX=0;bz.translateY=0;bz.time=0;bz.transformOrigin={x:ss.Int32.div(e.offsetWidth,2),y:ss.Int32.div(e.offsetHeight,2)};bx=dojo.mixin(bz,bx||{});if(!!bx.scale){bx.scaleX=bx.scaleY=bx.scale}if(window.WebKitCSSMatrix!==undefined&&(new WebKitCSSMatrix).m11!==undefined){by=['translate3d(',bx.translateX.toString(),'px,',bx.translateY.toString(),'px, 0px)'].join('')}else{by=['translate(',bx.translateX.toString(),'px,',bx.translateY.toString(),'px)'].join('')}by+=[' scale(',bx.scaleX.toString(),', ',bx.scaleY.toString(),')'].join('');if(h.get_cssTransform()&&ss.isValue(h.get_cssTransitionName())){e.style['transitionProperty']='transform';e.style['transitionTimingFunction']='cubic-bezier(0, 0, 0.25, 1)';e.style['transitionDuration']=bx.time+'ms';e.style['transform']=by;e.style['webkitTransitionProperty']='-webkit-transform';e.style['webkitTransitionTimingFunction']='cubic-bezier(0, 0, 0.25, 1)';e.style['webkitTransitionDuration']=bx.time+'ms';e.style['webkitTransform']=by;e.style['MozTransitionProperty']='-moz-transform';e.style['MozTransitionTimingFunction']='cubic-bezier(0, 0, 0.25, 1)';e.style['MozTransitionDuration']=bx.time+'ms';e.style['MozTransform']=by;if(ss.isValue(bx.transformOrigin)){var bA=bx.transformOrigin.x+'px '+bx.transformOrigin.y+'px';e.style['transformOrigin']=bA;e.style['webkitTransformOrigin']=bA;e.style['MozTransformOrigin']=bA}}else if(h.get_isIE()){if(h.get_browserVersion()>8){e.style['msTransform']=by}else if(bx.scaleX===1&&bx.scaleY===1){dojo.marginBox(e,ss.mkdict(['t',bx.translateY,'l',bx.translateX]))}}};bk.defer=function(e){if(bk.bIsAnimationShown===false){bk.$1.push(e)}else{e()}};bk.performDeferredCalls=function(){var e=bk.$1.length;for(var bx=0;bx<e;bx++){window.setTimeout(bk.$1[bx],bx)}ss.clear(bk.$1);bk.bIsAnimationShown=true};bk.localizeDojoLabeledControls=function(e){var bx=e;var by=bx.length;for(var bz=0;bz<by;bz++){var bA=bx[bz].item1;var bB=bx[bz].item2;if(ss.isValue(bA)){bA.attr('label',tab.Strings.getString(bB))}}};bk.parseUri=function(e){var bx=document.createElement('a');var by=bx;if(ss.isNullOrUndefined(e)){return null}bx.href=e;var bz=ss.mkdict(['href',e,'host',by.host,'hostname',by.hostname,'pathname',by.pathname,'port',by.port,'protocol',by.protocol,'search',by.search]);return bz};bk.setupTitleEllipsis=function(e){var bx=e.find('div');var by=bx.children('span');var bz=null;var bA=bx.width();var bB=10;bA-=bB;for(var bC=0;bC<by.length;bC++){var bD=by[bC];var bE=$(bD).width();bz=bD;if(bE>bA){break}bA-=bE}if(ss.isValue(bz)){bx.css('font-family',bz.style.fontFamily);bx.css('font-size',bz.style.fontSize);bx.css('line-height',bz.style.lineHeight);bx.css('color',bz.style.color);bx.css('font-weight',bz.style.fontWeight);bx.css('font-style',bz.style.fontStyle);bx.css('text-decoration',bz.style.textDecoration)}bx.css('text-overflow','ellipsis');bx.css('overflow','hidden')};bk.setupTitleTooltip=function(e){var bx='';var by=e.find('div');for(var bz=0;bz<by.length;++bz){if(bz>0){bx+='\n'}for(var bA=0;bA<by[bz].children.length;++bA){bx+=by[bz].children[bA].textContent}}e.prop('title',bx)};global.tableau.util=bk;var bl=function(){};bl.__typeName='tableau.types.CFStyle';global.tableau.types.CFStyle=bl;var bm=function(){};bm.__typeName='tableau.types.CFType';global.tableau.types.CFType=bm;var bn=function(){};bn.__typeName='tableau.types.DataSpecial';global.tableau.types.DataSpecial=bn;var bo=function(){};bo.__typeName='tableau.types.DataType';global.tableau.types.DataType=bo;var bp=function(){};bp.__typeName='tableau.types.FieldTypeTypes';global.tableau.types.FieldTypeTypes=bp;var bq=function(){};bq.__typeName='tableau.types.HFStyle';global.tableau.types.HFStyle=bq;var br=function(){};br.__typeName='tableau.types.QFDomain';global.tableau.types.QFDomain=br;var bs=function(){};bs.__typeName='tableau.types.QFFixed';global.tableau.types.QFFixed=bs;var bt=function(){};bt.__typeName='tableau.types.QFInclude';bt.isRange=function(e){switch(e){case'include-all':case'include-null':case'include-non-null':{return false}default:{return true}}};global.tableau.types.QFInclude=bt;var bu=function(){};bu.__typeName='tableau.types.RegionType';global.tableau.types.RegionType=bu;var bv=function(){};bv.__typeName='tableau.types.TableauTypesFieldRole';global.tableau.types.TableauTypesFieldRole=bv;var bw=function(e){this.$3=null;this.$4=false;this.$3=e;if(h.get_touch()){this.$3.addEventListener('touchstart'.toString(),ss.mkdel(this,this.handleEvent),false)}};bw.__typeName='tableau.util.NoClickDelay';global.tableau.util.NoClickDelay=bw;ss.initEnum(b,a,{CLASS_METADATA:0,CLASS_DATABASE:1,CLASS_NUMERICBIN:2,CLASS_CATEGORICALBIN:3,CLASS_INSTANCE:4,CLASS_MDXCALC:5,CLASS_USERCALC:6,CLASS_DANGLING:7,CLASS_LOCALDATA:8});ss.initEnum(c,a,{DRILLNONE:0,DRILLDOWN:1,DRILLUP:2,DRILLBOTH:3});ss.initEnum(d,a,{simple:'simple',toggle:'toggle',range:'range',menu:'menu'},true);ss.initClass(f,a,{});ss.initInterface(D,a,{addFilter:null,removeFilter:null,clearFilters:null,log:null});ss.initClass(g,a,{clearFilters:function(){ss.clear(this.$0)},addFilter:function(e){this.$0.push(e)},removeFilter:function(e){ss.remove(this.$0,e)},log:function(e,bx,by,bz){},logInternal:null,formatMessage:function(e,bx){if(ss.isNullOrUndefined(bx)||bx.length===0){return e}var by=new ss.StringBuilder;var bz=0;var bA=false;for(var bB=0;bB<e.length;bB++){var bC=e.charCodeAt(bB);if(bC===37){if(bA){by.append('%');bA=false}else{bA=true}}else{if(bA){switch(bC){case 98:case 115:case 100:case 110:case 111:{by.append(((bx.length>bz)?bx[bz]:''));bz++;break}}}else{by.appendChar(bC)}bA=false}}return by.toString()}},null,[D]);ss.initClass(h,a,{});ss.initClass(i,a,{});ss.initClass(j,a,{dispose:function(){if(ss.isNullOrUndefined(this.$0)){return}this.$0();this.$0=null}},null,[ss.IDisposable]);ss.initClass(k,a,{});ss.initClass(l,a,{});ss.initClass(m,a,{logInternal:function(e,bx,by,bz){if(typeof(window.console)!=='object'){return}by=e.get_name()+': '+by;var bA=[];if(h.get_consoleLogFormating()){var bB=bA.concat(by);bA=bB.concat.apply(bB,bz)}else{bA=bA.concat(this.formatMessage(by,bz))}try{Function.prototype.apply.call(this.$1(bx),window.console,bA)}catch(bC){}},$1:function(e){var bx=window.self['console'];if(ss.isNullOrUndefined(this.$2)){this.$2={};this.$2[(1).toString()]=bx.log;this.$2[(4).toString()]=bx.error;this.$2[(2).toString()]=bx.info;this.$2[(3).toString()]=bx.warn}var by=this.$2[e.toString()];if(ss.isNullOrUndefined(by)){by=bx.log}return by}},g,[D]);ss.initClass(n,a,{});ss.initEnum(o,a,{showDateOnly:0,showTimeOnly:1,showFullDateTime:2});ss.initClass(p,a,{});ss.initClass(q,a,{get_hasPendingAction:function(){return ss.isValue(this.$2)},invokeActionDelayed:function(){this.cancel();this.$2=window.setTimeout(ss.mkdel(this,function(){this.$2=null;this.$0()}),this.$1)},invokeActionImmediate:function(){this.cancel();this.$0()},cancel:function(){if(ss.isValue(this.$2)){window.clearTimeout(ss.unbox(this.$2));this.$2=null}},dispose:function(){this.cancel();this.$0=null}},null,[ss.IDisposable]);ss.initClass(r,a,{add:function(e){this.$0.push(new j(e))},add$1:function(e){this.$0.push(e)},dispose:function(){for(var e=0;e<this.$0.length;e++){var bx=this.$0[e];bx.dispose()}ss.clear(this.$0)}},null,[ss.IDisposable]);ss.initClass(s,a,{});ss.initClass(t,a,{});ss.initClass(u,a,{});ss.initClass(v,a,{});ss.initClass(w,a,{});ss.initEnum(x,a,{unknown:0,newFilter:4,fieldTypeConversion:5,newToolbar:9,buttonDelay:11,hoverDelay:12,maxTooltipWhitespace:18,mapsUseLeafletForGeoSearch:19,selectionToolsMobile:23,mapsSearchDebugAlwaysShow:28,categoricalHeadersVisualFeedback:30,analyticsObjectsDragToViz:31,gotoMyLocationButton:32,designTint:33,calcTextDragToSchema:34,newQFWorkbookLevelFormatting:35,appearanceOfBlendingIcons:36,dragRefLine:37,outlineStampedShapes:38,progressiveLoadDelay:39,catQFDrowdown:40,offlineMode:41,opaqueCanvasBackground:42});ss.initClass(y,a,{});ss.initClass(z,a,{});ss.initClass(A,a,{});ss.initInterface(B,a,{get_dimensions:null,translatePositionToViewport:null,getVisibleRoom:null,getDocumentViewport:null});ss.initInterface(C,a,{showAlertDialog:null,showConfirmationDialog:null,showSheetAuthenticationOverlay:null,showGenericDataSourceErrorOverlay:null,showSheetAuthenticationDialog:null,showGenericDataSourceErrorDialog:null});ss.initClass(E,a,{get_from:function(){return this.$0},set_from:function(e){this.$0=e},get_to:function(){return this.$1},set_to:function(e){this.$1=e}});ss.initClass(F,a,{get_count:function(){return ss.getKeyCount(this.$0)},get_values:function(){this.get_count();var e=[];var bx=0;var by=new ss.ObjectEnumerator(this.$0);try{while(by.moveNext()){var bz=by.current();e[bx]=bz.value;bx++}}finally{by.dispose()}return e},addAll:function(e){for(var bx=0;bx<e.length;bx++){var by=e[bx];this.$0[by]=by}},add:function(e){this.$0[e]=e},remove:function(e){delete this.$0[e]},clear:function(){ss.clearKeys(this.$0)},contains:function(e){return ss.keyExists(this.$0,e)},intersect:function(e){var bx=new F;var by=new ss.ObjectEnumerator(e.$0);try{while(by.moveNext()){var bz=by.current();if(this.contains(bz.key)){bx.$0[bz.key]=bz.value}}}finally{by.dispose()}return bx}});ss.initClass(G,a,{});ss.initClass(H,a,{});ss.initClass(I,a,{});ss.initClass(J,a,{get_name:function(){return this.$1},debug:function(e,bx){},info:function(e,bx){},warn:function(e,bx){},error:function(e,bx){},log:function(e,bx,by){},$0:function(e,bx,by){try{var bz=J.$2();for(var bA=0;bA<bz.length;bA++){var bB=bz[bA];bB.log(this,e,bx,by)}}catch(bC){}}});ss.initEnum(K,a,{all:0,debug:1,info:2,warn:3,error:4,off:5});ss.initClass(L,a,{});ss.initClass(M,a,{logEvent:function(e){if(this.$9.length>=400){this.$9.shift()}this.$9.push(e);this.$5()},attach:function(){tabBootstrap.MetricsController.setEventLogger(ss.mkdel(this,this.logEvent))},$5:function(e){if(ss.isValue(this.$8)){return}e=ss.coalesce(e,250);this.$8=window.setTimeout(ss.mkdel(this,this.$3),e)},$3:function(){this.$8=null;var e;if(this.$9.length>20){e=this.$9.slice(0,20);this.$9=this.$9.slice(20);this.$5(5)}else{e=this.$9;this.$9=[]}this.$1(e);if(tsConfig.metricsReportingEnabled){try{this.$2(e)}catch(bx){}}},$1:function(e){this.$a=this.$a||J.lazyGetLogger(M);for(var bx=0;bx<e.length;bx++){var by=e[bx]}},$2:function(e){var bx=1500;var by=e.length;var bz='';if(by===0){return}for(var bA=0;bA<by;bA++){var bB=e[bA];if(bB.eventType==='wps'){continue}var bC=M.$1(bB,false);if(bz.length>0&&bz.length+bC.length>bx){this.$4(tsConfig.metricsServerHostname,bz);bz=''}else if(bz.length>0){bz+='&'}bz+=bC}if(bz.length>0){this.$4(tsConfig.metricsServerHostname,bz)}if(ss.isNullOrUndefined(this.$6)){this.$6=window.setTimeout(ss.mkdel(this,this.$0),250)}},$4:function(e,bx){var by=1;if(N.isNullOrEmpty(e)||N.isNullOrEmpty(bx)){return}var bz=document.createElement('img');var bA='v='+by.toString();var bB=e;bB+='?'+bA+'&'+bx;bz.src=bB;this.$7.push(bz);if(this.$7.length>100){this.$7.shift()}},$0:function(){try{this.$6=null;var e=0;while(e<this.$7.length){if(this.$7[e].complete){this.$7.splice(e,1)}else{e++}}if(this.$7.length>0){this.$6=window.setTimeout(ss.mkdel(this,this.$0),250)}}catch(bx){}}});ss.initClass(N,a,{});ss.initClass(O,a,{});ss.initClass(P,a,{});ss.initEnum(Q,a,{workbookName:2,sheetId:3,authoringSheet:4});ss.initClass(R,a,{});ss.initClass(S,a,{});ss.initClass(T,a,{});ss.initClass(U,a,{});ss.initClass(V,a,{});ss.initClass(W,a,{});ss.initClass(X,a,{});ss.initClass(Y,a,{});ss.initClass(Z,a,{});ss.initClass(ba,a,{logInternal:function(bx,by,bz,bA){bz=this.formatMessage(ss.replaceAllString(bz,'\\n','<br />'),bA);if(by>2){try{throw new ss.Exception('Logged('+J.loggerLevelNames[by]+', from '+bx.get_name()+'): '+bz)}catch(bB){var e=ss.Exception.wrap(bB);v.report(e,false)}}}},g,[D]);ss.initClass(bb,a,{get_first:function(){return this.$0},get_second:function(){return this.$1}});ss.initClass(bc,a,{});ss.initClass(bd,a,{get_translateX:function(){return this.$3.x},get_translateY:function(){return this.$3.y},get_transformType:function(){return this.$2},get_isNull:function(){return this.$2===0},transformBounds:function(e){if(this.$2===0){var bx=Math.floor(e.minX);var by=Math.floor(e.minY);var bz=Math.ceil(e.maxX);var bA=Math.ceil(e.maxY);return{x:bx,y:by,w:bz-bx,h:bA-by}}if(this.$2===2){var bB=Math.floor(e.minX*this.$1+this.$3.x);var bC=Math.floor(e.minY*this.$1+this.$3.y);var bD=Math.ceil(e.maxX*this.$1+this.$3.x);var bE=Math.ceil(e.maxY*this.$1+this.$3.y);return{x:bB,y:bC,w:bD-bB,h:bE-bC}}return null},transformRect:function(e){switch(this.$2){case 0:{return{x:e.x,y:e.y,w:e.w,h:e.h}}case 1:case 3:{return{x:(e.x-this.$3.x)*this.$0,y:(e.y-this.$3.y)*this.$0,w:e.w*this.$0,h:e.h*this.$0}}default:{return null}}},transformCircle:function(e){switch(this.$2){case 0:{return e}case 1:case 3:{var bx=(e.center.x-this.$3.x)*this.$0;var by=(e.center.y-this.$3.y)*this.$0;return{center:{x:bx,y:by},radius:e.radius*this.$0}}default:{return null}}},transformPolygon:function(e){switch(this.$2){case 0:{return e}case 1:case 3:{var bx=e.length;var by=new Array(bx);for(var bz=0;bz<bx;bz=bz+2){by[bz]=(e[bz]-this.$3.x)*this.$0;by[bz+1]=(e[bz+1]-this.$3.y)*this.$0}return by}default:{return null}}}});ss.initClass(be,a,{get_matrix:function(){return this.$0},reset:function(){this.$0=[1,0,0,1,0,0]},rotate:function(e){var bx=Math.cos(e);var by=Math.sin(e);var bz=this.$0[0]*bx+this.$0[2]*by;var bA=this.$0[1]*bx+this.$0[3]*by;var bB=this.$0[0]*-by+this.$0[2]*bx;var bC=this.$0[1]*-by+this.$0[3]*bx;this.$0[0]=bz;this.$0[1]=bA;this.$0[2]=bB;this.$0[3]=bC},translate:function(e,bx){this.$0[4]=this.$0[4]+this.$0[0]*e+this.$0[2]*bx;this.$0[5]=this.$0[5]+this.$0[1]*e+this.$0[3]*bx},scale:function(e,bx){this.$0[0]=this.$0[0]*e;this.$0[1]=this.$0[1]*e;this.$0[2]=this.$0[2]*bx;this.$0[3]=this.$0[3]*bx},setTransform:function(e){this.$0[0]=e.get_matrix()[0];this.$0[1]=e.get_matrix()[1];this.$0[2]=e.get_matrix()[2];this.$0[3]=e.get_matrix()[3];this.$0[4]=e.get_matrix()[4];this.$0[5]=e.get_matrix()[5]},isEqual:function(e){return this.$0[0]===e.get_matrix()[0]&&this.$0[1]===e.get_matrix()[1]&&this.$0[2]===e.get_matrix()[2]&&this.$0[3]===e.get_matrix()[3]&&this.$0[4]===e.get_matrix()[4]&&this.$0[5]===e.get_matrix()[5]},clone:function(){var e=new be;e.setTransform(this);return e}});ss.initEnum(bf,a,{none:0,pixelToDomain:1,domainToPixel:2,offset:3});ss.initClass(bg,a,{get_count:function(){return ss.getKeyCount(this.$0)},get_values:function(){var e=new Array(this.get_count());var bx=0;var by=new ss.ObjectEnumerator(this.$0);try{while(by.moveNext()){var bz=by.current();e[bx]=bz.value;bx++}}finally{by.dispose()}return e},addAll:function(e){for(var bx=0;bx<e.length;bx++){var by=e[bx];this.$0[by]=by}},add:function(e){this.$0[e]=e},remove:function(e){delete this.$0[e]},clear:function(){ss.clearKeys(this.$0)},contains:function(e){return ss.keyExists(this.$0,e)},intersect:function(e){var bx=new bg;var by=new ss.ObjectEnumerator(e.$0);try{while(by.moveNext()){var bz=by.current();if(this.contains(bz.key)){bx.$0[bz.key]=bz.value}}}finally{by.dispose()}return bx}});ss.initClass(bh,a,{logInternal:function(e,bx,by,bz){if(ss.isNullOrUndefined(this.$2)){this.$1()}by=this.formatMessage(ss.replaceAllString(by,'\\n','<br />'),bz);this.$2.html(by)},$1:function(){this.$2=$("<div class='log-window-appender'>Debug mode ON</div>");this.$2.css(ss.mkdict(['position','absolute','bottom','0px','right','0px','backgroundColor','white','opacity','.8','border','1px solid black','minWidth','5px','minHeight','5px','z-index','100']));$('body').append(this.$2)}},g,[D]);ss.initClass(bi,a,{});ss.initClass(bj,a,{});ss.initClass(bk,a,{});ss.initClass(bl,a,{});ss.initClass(bm,a,{});ss.initClass(bn,a,{});ss.initClass(bo,a,{});ss.initClass(bp,a,{});ss.initClass(bq,a,{});ss.initClass(br,a,{});ss.initClass(bs,a,{});ss.initClass(bt,a,{});ss.initClass(bu,a,{});ss.initClass(bv,a,{});ss.initClass(bw,a,{handleEvent:function(e){var bx=e;switch(e.type){case'touchstart':{this.$2(bx);break}case'touchmove':{this.$1(bx);break}case'touchend':{this.$0(bx);break}}},$2:function(e){e.preventDefault();this.$4=false;this.$3.addEventListener('touchmove'.toString(),ss.mkdel(this,this.handleEvent),false);this.$3.addEventListener('touchend'.toString(),ss.mkdel(this,this.handleEvent),false)},$1:function(e){this.$4=true},$0:function(e){this.$3.removeEventListener('touchmove',ss.mkdel(this,this.handleEvent),false);this.$3.removeEventListener('touchend',ss.mkdel(this,this.handleEvent),false);if(!this.$4){var bx=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);if(bx.nodeType===3){bx=bx.parentNode}var by=document.createEvent('MouseEvents');by['initEvent']('click',true,true);bx.dispatchEvent(by)}}});(function(){P.suppressAlerts=false})();(function(){s.$6=ss.mkdict(['matrix',4,'matrix3d',12,'translate',0,'translate3d',0,'translateX',0,'translateY',-1]);s.$7=0})();(function(){h.$H=false;h.$L='ontouchend'in document;h.$l=false;h.$F=false;h.$q=false;h.$g=false;h.$h=null;h.$i=null;h.$j=false;h.$k=false;h.$J=false;h.$f=false;h.$C=false;h.$u=false;h.$w=false;h.$r=0;h.$G=0;h.$s=0;h.$v=false;h.$B=false;h.$y=false;h.$D=false;h.$A=false;h.$x=false;h.$t=false;h.$z=false;h.$E=false;h.$p=1;h.$e=1;h.$m=false;h.$n=false;h.$o=false;h.$K=false;h.$I=false;$(h.detectBrowserSupport)})();(function(){J.global=J.getLoggerWithName('global');J.loggerLevelNames=[];J.$5=':log';J.loggerLevelNames[0]='all';J.loggerLevelNames[1]='debug';J.loggerLevelNames[2]='info';J.loggerLevelNames[3]='warn';J.loggerLevelNames[4]='error';J.loggerLevelNames[5]='off'})();(function(){u.epsilon=Math.pow(2,-52);u.$2=1+u.epsilon;u.$3=u.$2;u.$1=1/u.$2})();(function(){m.$0=null})();(function(){bj.ExportDialogType=null;var e={};e['ExportImage']=ss.mkdict(['title',tab.Strings.ExportImageDialogTitle,'mimeType','image/png','message',tab.Strings.ExportImageDialogMessage]);e['ExportData']=ss.mkdict(['title',tab.Strings.ExportDataDialogTitle,'mimeType','text/csv','message',tab.Strings.ExportDataDialogMessage]);e['ExportCrosstab']=ss.mkdict(['title',tab.Strings.ExportCrosstabDialogTitle,'message',tab.Strings.ExportCrosstabDialogMessage]);e['PrintPDF']=ss.mkdict(['title',tab.Strings.PrintPdfDialogTitle,'mimeType','application/pdf','message',tab.Strings.PrintPdfDialogMessage,'noping',true]);bj.ExportDialogType=e})();(function(){p.oneSecond=(new Date(2008,11,21,1,1,2)).getTime()-(new Date(2008,11,21,1,1,1)).getTime();p.oneMinute=(new Date(2008,11,21,1,2)).getTime()-(new Date(2008,11,21,1,1)).getTime();p.oneHour=(new Date(2008,11,21,2)).getTime()-(new Date(2008,11,21,1)).getTime();p.oneDay=(new Date(2008,11,21)).getTime()-(new Date(2008,11,20)).getTime();p.oneWeek=(new Date(2008,11,21)).getTime()-(new Date(2008,11,14)).getTime();p.$4=86400000})();(function(){v.$m='?';v.$k=false;v.$j=true;v.$e=true;v.$i=3;v.$f=false;v.$h=null;v.$g=null;v.$l={};v.$p=[];v.$o=false;v.$n=null})();(function(){w.$0=null})();(function(){y.$b=null;y.$6=null;y.$8=null;y.$a=null;y.$d=null;y.$e=null;y.$5=null;y.$7=null;y.$9=null;y.$c=null;{y.$b=J.lazyGetLogger(y);y.$6=[];y.$8=[];y.$a=[];y.$d=[];y.$e={};y.$5={};y.$7={};y.$9={};y.$c={}}y.$1(':newfilter',4,false);y.$1(':fieldconversion',5,true);y.$1(':newtoolbar',9,false);y.$1(':selectiontoolsmobile',23,true);y.$1(':mapssearchdebugalwaysshow',28,false);y.$1(':useleafletforgeosearch',19,false);y.$1(':headersfeedback',30,true);y.$1(':aodragtoviz',31,false);y.$1(':gotomylocationbutton',32,true);y.$1(':designtint',33,false);y.$1(':calctextdragtoschema',34,true);y.$1(':newqfwolf',35,false);y.$1(':appearanceofblendingicons',36,true);y.$1(':dragrefline',37,false);y.$1(':outlinestampedshapes',38,false);y.$1(':catqfdropdown',40,false);y.$1(':offlinemode',41,false);y.$1(':opaquecanvas',42,false);y.$3(':buttondelay',11);y.$3(':hoverdelay',12);y.$3(':maxtooltipwhitespace',18);y.$3(':progloaddelay',39);y.$0()})();(function(){A.httpUnauthorizedCode=401;A.httpServiceUnavailable=503;A.httpInternalServerError=500})();(function(){H.$6='\t'})();(function(){L.touchEventSamplingRate=6;L.defaultWheelDeltaIncrement=120;L.minimumZoomLevelIncrement=0.25;L.maxWheelDelta=360;L.$1=480;L.$0=512})();(function(){M.$5=100;M.$6=400;M.$7=20;M.$4=250;M.$8=5;M.$3=250;M.$a=null;M.$9=null;M.$b=null;M.$a={};M.$a['d']='DESC';M.$a['t']='TIME';M.$a['id']='ID';M.$a['sid']='SESSION_ID';M.$a['e']='ELAPSED';M.$a['v']='VALS';M.$a['wb']='WORKBOOK';M.$a['s']='SHEET_NAME';M.$a['p']='PROPS';M.$a['m']='MOBILE';M.$9={};M.$9['nav']='Navigation';M.$9['wps']='ProfileStart';M.$9['wp']='ProfileEnd';M.$9['gen']='Generic';M.$9['init']='SessionInit'})();(function(){O.$1=['navigationStart','unloadEventStart','unloadEventEnd','redirectStart','redirectEnd','fetchStart','domainLookupStart','domainLookupEnd','connectStart','connectEnd','secureConnectionStart','requestStart','responseStart','responseEnd','domLoading','domInteractive','domContentLoadedEventStart','domContentLoadedEventEnd','domComplete','loadEventStart','loadEventEnd'];O.$0=null;var e=window;var bx=function(by){_.defer(O.collectMetrics)};if(ss.isValue(e.addEventListener)){window.addEventListener('load',bx,false)}else if(ss.isValue(e.attachEvent)){e.attachEvent('load',bx)}})();(function(){ba.$0=null})();(function(){bc.$0='appendedCustomStyle';bc.$1=new RegExp('-?[_a-zA-Z]+[_a-zA-Z0-9-]*');bc.$3=null;bc.$2=null})();(function(){bd.$0=null;bd.$0=new bd(0,0,1,0)})();(function(){bh.$0=null})();(function(){bi.specialManyValues='%many-values%';bi.specialNull='%null%';bi.specialError='%error%';bi.specialRagged='%ragged%';bi.specialSkipped='%skipped%';bi.specialMissing='%missing%';bi.specialAll='%all%';bi.specialNoAccess='%no-access%';bi.specialWildcard='%wildcard%';bi.millisPerDay=86400000;bi.$C=15;bi.$B=6;bi.$E=1E+15;bi.$D=1000000;bi.$F=0.0001;bi.$I=9;bi.$z=46;bi.$G=45;bi.$J=48;bi.$A=53;bi.$H=57;bi.$P={};bi.$Q={};bi.$R={};bi.$W=new RegExp('(\\\\|\\^|\\$|\\*|\\+|\\?|\\.|\\:|\\,|\\(|\\)|\\[|\\]|\\{|\\}|\\|)','g');bi.$N=new RegExp('^([yYmMdD\\W]+)\\s+([hnst\\W]+)$');bi.$X=new RegExp('(\\\\[:.]s+)');bi.$Z=new RegExp('(t+)','g');bi.$S=new RegExp('([yYmMdDhnswq]+)','g');bi.$Y=new RegExp('\\(\\\\d\\+\\)(?:\\(\\?\\:)?\\s+\\(\\\\d\\+\\)','g');bi.$T=new RegExp('\\s','g');bi.$L=new RegExp('(^|d)([^h]*)(h|$)','gi');bi.$M=new RegExp('h([^d]*)(d|$)','gi');bi.$K=new RegExp('^(a|a\\.?m\\.?|㏂|π\\.?µ\\.?|午前)$','i');bi.$U=new RegExp('^(p|p\\.?m\\.?|㏘|µ\\.?µ\\.?|午後)$','i');bi.$V=new RegExp('(\\d)(?:\\.(\\d+))?e\\+(\\d+)');bi.$O=ss.mkdict(['yyyyy','yyyyy','yyyy','yyyy','yyy','yyyy','yy','yy','y','yyyy','L','m','LL','mm','LLL','mmm','LLLL','mmmm']);bi.$P.format='yyyy-mm-dd';bi.$P.timeFormat='hh:nn';bi.$Q.format='yyyy-mm-ddThh:nn';bi.$R.format='hh:nn'})();(function(){bk.$1=[];bk.bIsAnimationShown=false;if(h.get_isMac()){dojo.addClass(document.documentElement,'tb_mac')}})();(function(){bl.CFS_ALL='all';bl.CFS_SINGLE='single-select';bl.CFS_MULTIPLE='multi-select'})();(function(){bm.CFT_INCLUSIVE='include';bm.CFT_EXCLUSIVE='exclude'})();(function(){bn.DS_NORMAL=null;bn.DS_NULL='n';bn.DS_ALL='a';bn.DS_WILDCARD='w';bn.DS_SKIPPED='s';bn.DS_NOACCESS='p';bn.DS_RAGGED='r';bn.DS_ERROR='e';bn.DS_MISSING='m'})();(function(){bp.FT_QUANTITATIVE='Q';bp.FT_ORDINAL='O';bp.FT_NOMINAL='N';bp.FT_UNKNOWN=null})();(function(){bq.HFS_SINGLE='single-select';bq.HFS_MULTIPLE='multi-select'})();(function(){br.QFD_ALL='all';br.QFD_CONTEXT='context';br.QFD_RELEVANT='relevant'})();(function(){bs.QFF_FIXED_START='start';bs.QFF_FIXED_END='end'})();(function(){bt.QFI_ALL='include-all';bt.QFI_NON_NULL='include-non-null';bt.QFI_NULL_ONLY='include-null';bt.QFI_RANGE='include-range';bt.QFI_RANGE_OR_NULL='include-range-or-null'})();(function(){bu.table='t';bu.legend='l';bu.filter='f';bu.currentPage='p';bu.title='i';bu.text='x';bu.bitmap='b';bu.web='w';bu.draw='d';bu.textBlock='k';bu.layoutContainer='c';bu.parameter='a'})()})()}());;
/*! BEGIN Domain */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqldomain');var b=function(e,gc,gd,ge){U.call(this,'none',e,gc,gd,ge)};b.__typeName='tab.$0';var c=function(e){this.$5=null;this.$3=0;this.$4=null;this.$1$1=null;this.$1$2=null;this.$5=e;this.$3=0;this.$4={}};c.__typeName='tab.$1';var d=function(e,gc,gd,ge){U.call(this,gc,null,e,gd,ge)};d.__typeName='tab.$10';d.$0=function(e,gc,gd,ge){return new d(e,gc,gd,ge)};var f=function(e,gc){this.$3=null;this.$2=null;this.$3=e;this.$2=gc};f.__typeName='tab.$11';var g=function(e){this.$9=null;this.$a={};this.$8=[];this.$7=false;this.$9=e};g.__typeName='tab.$12';g.$0=function(e,gc){var gd=new Array(e.length);for(var ge=0;ge<e.length;++ge){gd[ge]={item1:e[ge],item2:gc[ge]}}return _.sortBy(gd,function(gf){return gf.item1})};g.$1=function(e,gc){var gd;if(gc.length===1||ss.isNullOrUndefined(e)){gd=gc}else{gd=_.sortBy(gc,function(ge,gf){return e[gf]})}return gd};var h=function(){};h.__typeName='tab.$13';var i=function(){};i.__typeName='tab.$14';i.$f=function(){return tab.Logger.lazyGetLogger(dN)};i.$1=function(e,gc,gd,ge){var gf=i.$4(gd,ge);var gg=new g(ge);if(ss.isNullOrUndefined(gf)){return gg}var gh=new Array(ge.length);for(var gi=0;gi<gh.length;++gi){var gj=gd.getColumnIndex(ge[gi]);gh[gi]=gj}for(var gk=0;gk<gc.length;gk++){var gl=gc[gk];var gm=e.findItemById(gl);if(!ss.isValue(gm)){continue}var gn=[];if(i.$6(e,gm,gd,gf,gn)){gg.$0(Array.prototype.slice.call(gn),gh)}}return gg};i.$2=function(e,gc){var gd={};for(var ge=0;ge<gc.length;ge++){var gf=gc[ge];var gg=new Array(gf.ZHX.length);for(var gh=0;gh<gg.length;gh++){var gi=e.getVizDataFieldByIndex(gf.ZHX[gh]);gg[gh]=gi.get_fieldName()}var gj=gg.join(';');var gk;if(ss.keyExists(gd,gj)){gk=gd[gj]}else{gk=new g(gg);gd[gj]=gk}gk.$0(gf.wwF,gf.ZHX)}return _.map(gd,function(gl,gm){return gl})};i.$d=function(e,gc){var gd=[];for(var ge=0;ge<gc.length;ge++){var gf=gc[ge];if(ss.isNullOrUndefined(gf.ZHX)){continue}for(var gg=0;gg<gf.ZHX.length;gg++){var gh=gf.ZHX[gg];var gi=e.get_vizDataModel().getVizDataFieldByIndex(gh);var gj=gi.get_fieldCaption();if(!ss.contains(gd,gj)){gd.push(gj)}}}return Array.prototype.slice.call(gd)};i.$3=function(e,gc,gd){var ge=new g(gd);var gf=i.$4(e,gd);if(ss.isNullOrUndefined(gf)){return ge}for(var gg=0;gg<gc.length;gg++){var gh=gc[gg];var gi=[];var gj=[];for(var gk=0;gk<gd.length;gk++){var gl=gd[gk];var gm=gf[gl];var gn=gm.getAliasIndex(gh);gi.push(gn);gj.push(e.getColumnIndex(gl))}if(gi.length!==gd.length){}ge.$0(gi,gj)}return ge};i.$0=function(e,gc,gd,ge){var gf=[];var gg={};var gh=false;e.forEachVizDataField(function(gA,gB){if(i.$e(gA)){var gC=gA.get_aggType()||'none';gg[gC]=gB;if(gC==='none'){gh=true}}return true});var gi=true;var gj=null;gc.forEachVizDataField(function(gA,gB){if(i.$e(gA)){if(ss.isNullOrUndefined(gj)){gj=gA.get_baseColumnName()}else if(!ss.referenceEquals(gj,gA.get_baseColumnName())){gi=false}}return true});var gk=[];if(gi){var gl=[];gc.forEachVizDataField(function(gA,gB){if(i.$e(gA)){var gC=gA.get_aggType()||'none';if(!gh&&gC==='none'){var gD=ss.getEnumerator(Object.keys(gg));try{while(gD.moveNext()){var gE=gD.current();if(!ss.contains(gl,gE)){gl.push(gE);var gF=gg[gE];gf.push(new j(gF,gB,gE,'none'));var gG=e.getVizDataFieldByIndex(gF);gk.push(gG)}}}finally{gD.dispose()}}else if(ss.keyExists(gg,gC)){if(!ss.contains(gl,gC)){gl.push(gC);var gH=gg[gC];gf.push(new j(gH,gB,'none','none'));gk.push(gA)}}else if(gh){var gI=gg['none'];gf.push(new j(gI,gB,'none',gC));gk.push(gA)}}return true})}var gm=new Array(gk.length);for(var gn=0;gn<gk.length;gn++){var go=gk[gn];gm.push(go.get_fieldCaption())}var gp=new g(gm);for(var gq=0;gq<ge.length;gq++){var gr=ge[gq];var gs=[];var gt=[];for(var gu=0;gu<gf.length;gu++){var gv=gf[gu];var gw=e.getVizDataFieldByIndex(gv.$3);var gx=gw.getDataValueIndex(gr);if(ss.isValue(gx)){var gy=gd.getRawValue(gw.get_dataType(),ss.unbox(gx));var gz=i.$5(gy,gv.$2,gv.$0,ss.unbox(gx));gs.push(gz);gt.push(gv.$3)}}gp.$0(gs,gt)}return{item1:gp,item2:gf}};i.$c=function(e,gc,gd,ge){var gf=[];if(ss.isNullOrUndefined(gd)||e.$5()){return gf}gd.forEachTupleId(function(gg){var gh=[];var gi=[];for(var gj=0;gj<gc.length;gj++){var gk=gc[gj];var gl=gd.getVizDataFieldByIndex(gk.$1);var gm=gl.getDataValueIndex(gg);if(ss.isValue(gm)){var gn=ge.getRawValue(gl.get_dataType(),ss.unbox(gm));var go=i.$5(gn,gk.$0,gk.$2,ss.unbox(gm));gh.push(go);gi.push(gk.$1)}}if(e.$1(gi,gh)){gf.push(gg)}return true});return gf};i.$b=function(e,gc){var gd=[];if(ss.isNullOrUndefined(gc)||e.$5()){return gd}var ge=e.$4();var gf=i.$4(gc,ge);if(ss.isNullOrUndefined(gf)){return gd}if(!gc.get_hasTupleIdColumn()){return gd}var gg=new Array(ge.length);for(var gh=0;gh<ge.length;gh++){gg[gh]=gc.getColumnIndex(ge[gh])}gc.forEachTupleId(function(gi){var gj=new Array(ge.length);for(var gk=0;gk<ge.length;gk++){var gl=ge[gk];var gm=gf[gl];var gn=gm.getAliasIndex(gi);gj[gk]=gn}if(e.$1(gg,gj)){gd.push(gi)}return true});return gd};i.$a=function(e,gc,gd){var ge=[];if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(gd)||gc.$5()){return ge}var gf=gc.$4();var gg=null;for(var gh=0;gh<e.HUq.length;gh++){var gi=e.HUq[gh];for(var gj=0;gj<gi.MdI.length;gj++){var gk=gi.MdI[gj];if(gk.oqX==='trend-lines'){for(var gl=0;gl<gk.tOA.length;gl++){var gm=gk.tOA[gl];if(gm.VzB==='rOX'){gg=new Array(gf.length);for(var gn=0;gn<gf.length;gn++){gg[gn]=gd.getColumnIndex(gf[gn])}var go=gm;var gp={};if(ss.isValue(go.ZHX)){for(var gq=0;gq<go.ZHX.length;gq++){gp[go.ZHX[gq]]=go.wwF[gq]}}var gr=new Array(gf.length);for(var gs=0;gs<gf.length;gs++){if(ss.keyExists(gp,gg[gs])){gr[gs]=gp[gg[gs]]}else{gr[gs]=null}}if(gc.$1(gg,gr)){ge.push(go.YLs)}}}}}}return ge};i.$4=function(e,gc){var gd={};for(var ge=0;ge<gc.length;ge++){var gf=gc[ge];var gg=e.getVizDataField(gf);if(ss.isNullOrUndefined(gg)){return null}gd[gf]=gg}return gd};i.$7=function(e,gc,gd){var ge=[];if(ss.isNullOrUndefined(gc)||gd.get_fieldCaptions().length!==e.$4().length){return ge}var gf=gd.get_fieldCaptions();var gg=e.$6();for(var gh=0;gh<gg.length;gh++){var gi=gg[gh];var gj=new Array(gi.length);for(var gk=0;gk<gj.length;gk++){var gl=gf[gk];var gm=ss.indexOf(e.$4(),gl);var gn=gi[gm];var go=gc.getVizDataField(gl);gj[gk]=fJ.lookupAliasFromIndex(gn,go,z.get_instance().get_dataDictionary(),false)}var gp=gd.get_items();for(var gq=0;gq<gp.length;gq++){var gr=gp[gq];if(_.isEqual(gj,gr.nbD)){ge.push(gr.YLs)}}}return ge};i.$8=function(e,gc,gd){var ge=[];if(ss.isNullOrUndefined(gc.get_vizDataModel())){return ge}var gf=e.$4();for(var gg=0;gg<gd.length;gg++){var gh=gd[gg];if(ss.isNullOrUndefined(gh.ZHX)||ss.isNullOrUndefined(gh.wwF)||gh.wwF.length<gf.length){continue}var gi=[];var gj=[];var gk=false;for(var gl=0;gl<gh.ZHX.length;++gl){var gm=gh.ZHX[gl];var gn=gc.get_vizDataModel().getVizDataFieldByIndex(gm).get_fieldCaption();if(ss.isValue(gn)&&ss.contains(gf,gn)){gi.push(gm);gj.push(gh.wwF[gl]);if(gl===0){gk=true}}}if(gk&&e.$1(gi,gj)){var go={};go.ZHX=gh.ZHX;go.wwF=gh.wwF;ge.push(go)}}return ge};i.$9=function(e,gc,gd,ge){var gf=[];if(ss.isNullOrUndefined(gd.get_vizDataModel())){return gf}var gg=new ss.ObjectEnumerator(gd.get_sceneModel().get_visualListModels());try{while(gg.moveNext()){var gh=gg.current();var gi=gh.value.get_groupItemNodes();for(var gj=0;gj<gi.length;gj++){var gk=gi[gj];if(ss.isNullOrUndefined(gk.ZHX)||ss.isNullOrUndefined(gk.wwF)||gk.ZHX.length!==gk.wwF.length){continue}var gl=[];for(var gm=0;gm<gk.ZHX.length;++gm){var gn={$:gk.ZHX[gm]};var go=_.find(gc,ss.mkdel({nodeColIndex:gn},function(gu){return gu.$1===this.nodeColIndex.$}));if(ss.isValue(go)){var gp=gk.wwF[gm];var gq=gd.get_vizDataModel().getVizDataFieldByIndex(go.$1);var gr=ge.getRawValue(gq.get_dataType(),gp);if(ss.isValue(gr)){var gs=i.$5(gr,go.$0,go.$2,gp);gl.push(gs)}}}if(gl.length===gk.wwF.length){if(e.$1(gk.ZHX,gl)){var gt={};gt.ZHX=gk.ZHX;gt.wwF=gk.wwF;gf.push(gt)}}}}}finally{gg.dispose()}return gf};i.$6=function(e,gc,gd,ge,gf){ss.clear(gf);for(var gg=0;gg<gc.nbD.length;gg++){var gh=e.get_fieldCaptions()[gg];var gi=gc.nbD[gg];var gj=ge[gh];if(ss.isNullOrUndefined(gj)){continue}var gk=fJ.reverseLookupAlias(gi,gd,gj,z.get_instance().get_dataDictionary());if(!ss.isValue(gk)){return false}gf.push(ss.unbox(gk))}return true};i.$e=function(e){if(ss.isNullOrUndefined(e)){return false}var gc=e.get_dataType();if(gc==='datetime'||gc==='date'){return true}var gd=['day','hour','mdy','minute','month','month-year','qtr','trunc-day','trunc-hour','trunc-minute','trunc-month','trunc-qtr','trunc-second','trunc-week','trunc-year','week','weekday','year'];return ss.contains(gd,e.get_aggType())};i.$5=function(e,gc,gd,ge){if(_.isNumber(e)){return e}var gf=(_.isDate(e)?e:tab.DateUtil.parsePresModelDate(e));var gg=ge;if(gc==='none'&&gd!=='none'){switch(gd){case'year':{gg=tab.DateUtil.dateAsYear(gf);break}case'qtr':{gg=tab.DateUtil.dateAsQuarter(gf);break}case'month':{gg=tab.DateUtil.dateAsMonth(gf);break}case'day':{gg=tab.DateUtil.dateAsDay(gf);break}case'hour':{gg=tab.DateUtil.dateTimeAsHour(gf);break}case'minute':{gg=tab.DateUtil.dateTimeAsMinute(gf);break}case'second':{gg=tab.DateUtil.dateTimeAsSecond(gf);break}case'week':{gg=tab.DateUtil.dateAsWeek(gf);break}case'weekday':{gg=tab.DateUtil.dateAsDayOfWeek(gf);break}case'month-year':{gg=tab.DateUtil.dateAsMonthYear(gf);break}case'mdy':{gg=tab.DateUtil.dateAsMonthDayYear(gf);break}}if(ss.isNullOrUndefined(gg)){}}return gg};var j=function(e,gc,gd,ge){this.$3=0;this.$1=0;this.$2=null;this.$0=null;this.$3=e;this.$1=gc;this.$2=gd||'none';this.$0=ge||'none'};j.__typeName='tab.$15';var k=function(){};k.__typeName='tab.$2';var l=function(e,gc,gd,ge,gf,gg){this.$4=null;this.$6=null;this.$5=null;this.$f=0;this.$a=0;this.$b=0;this.$c=null;this.$e=null;this.$d=null;this.$8=0;this.$g=null;this.$9=0;this.$7=false;this.$1$1=null;this.$4=e;this.$6=gc;this.$5=gd;this.$f=ge;this.$b=ss.coalesce(gf,1);this.$a=ss.coalesce(gg,35)};l.__typeName='tab.$3';var m=function(e){U.call(this,'none',e,null)};m.__typeName='tab.$4';var n=function(e){db.call(this,e,new ds('eJH'.toString()))};n.__typeName='tab.$5';var o=function(e){db.call(this,e,new ds('VGH'.toString(),1))};o.__typeName='tab.$6';var p=function(e){db.call(this,e,new ds('xl_'.toString(),1))};p.__typeName='tab.$7';var q=function(e,gc,gd){this.$7=null;this.$6=null;this.$8=false;U.call(this,'immediately',e,null);this.$7=gc;this.$6=gd;var ge=new Object;ge.commandNamespace='tabdoc'.toString();ge.commandName='drop-prepare'.toString();ei.setCommandParams(ge,gc.commandParams);ge.commandParams['_tx']=false;this.enqueueCommand(new bf(ge))};q.__typeName='tab.$8';var r=function(){this.$4=null;this.$4=[]};r.__typeName='tab.$9';var s=function(e,gc,gd,ge,gf,gg){this.$7=0;this.$3=0;this.$5=0;this.$4=0;this.$6=0;this.$0=0;this.$1=0;this.$2=0;dB.call(this);if(ss.isNullOrUndefined(gf)&&ss.isValue(gg)){gf=gd;gg=ge}this.$7=e;this.$3=gd;this.$5=ge;this.$4=gf;this.$6=gg;var gh=gc;var gi=gf;var gj=gg;var gk=gg/gf;this.$0=(gj-gk*gi-gh+gk)/(-(gi*gi)+2*gi-1);this.$1=gk-2*this.$0*gi;this.$2=gh-gk+this.$0*(2*gi-1)};s.__typeName='tab.AcceleratingRangeTransform';global.tab.AcceleratingRangeTransform=s;var t=function(){};t.__typeName='tab.ActionType';global.tab.ActionType=t;var u=function(){};u.__typeName='tab.ActionUtils';u.$9=function(){return tab.Logger.lazyGetLogger(u)};u.isVizSourceOfAction=function(e,gc){return _.any(e.QGQ,function(gd){return ss.referenceEquals(gd,gc)})};u.isTargetOfActionLocal=function(e){var gc=de.getVisualModels(z.get_instance());for(var gd=0;gd<e.kDm.length;gd++){var ge=e.kDm[gd];if(ss.keyExists(gc,ge)){return true}}return false};u.isFilterAction=function(e){return ss.isValue(e.Yb$)&&ss.startsWithString(e.Yb$['eDX'.toString()],'tabdoc:filter-targets')};u.isHighlightAction=function(e){return ss.isValue(e.Yb$)&&ss.startsWithString(e.Yb$['eDX'.toString()],'tabdoc:highlight')};u.isFilterSource=function(e,gc){var gd=e.pm;var ge=gd.SJs;for(var gf=0;gf<ge.length;gf++){var gg=ge[gf];if(!u.isVizSourceOfAction(gg,gc)){continue}if(gg.bg$!=='on-select'){continue}if(ss.isNullOrUndefined(gg.Yb$)){continue}var gh=ss.replaceAllString(gg.Yb$['eDX'.toString()],'simpleCommand=','');var gi=bh.deserialize(gh,true);if(!ss.referenceEquals(gi.commandName,'filter-targets'.toString())){continue}var gj=gg.kDm;if(gj.length===0){continue}return true}return false};u.getApplicableActions=function(e,gc,gd,ge){var gf=z.get_instance().get_workbook().findContentDashboard().get_actionPresModels();var gg=u.$4(gf,e,gc);if(ss.isValue(gd)){var gh=u.$7(ge);gg=_.filter(gg,function(gi){return u.getActionType(gi)===gd&&!gh})}gg=_.filter(gg,function(gi){return u.getActionType(gi)==='url'||ss.isValue(gi.ElU)||gi.kDm.length>0});return gg};u.executeActions=function(e,gc,gd,ge,gf,gg){var gh=u.getApplicableActions(e,gc,'filter',gg);var gi=u.getApplicableActions(e,gc,'highlight',gg);var gj=u.getApplicableActions(e,gc,'url',gg);var gk=de.getVisualModel(z.get_instance(),e);if(ss.isValue(gd)){if(gj.length>0&&gd.length>0){u.$3(gj,gd,gk)}if(gi.length>0){if(gd.length>0){u.$2(gi,gd,gk,ge)}else{u.$8(ge)}}else if(ss.isValue(gf)&&gf){u.$2(gi,gd,gk,ge)}}if(gh.length>0){u.$1(e,gh,gd,ge,gk)}};u.executeAction=function(e,gc,gd,ge){if(!ss.isValue(e)){return}var gf=[e];if(!ss.isNullOrUndefined(e.LeZ)){u.$3(gf,gc,gd)}else if(true){u.$2(gf,gc,gd,ge)}else{}};u.getActionType=function(e){if(ss.isValue(e.Yb$)){var gc=bh.deserialize(e.Yb$['eDX'.toString()],true);if(ss.referenceEquals(gc.commandName,'highlight'.toString())){return'highlight'}if(ss.referenceEquals(gc.commandName,'filter-targets'.toString())){return'filter'}return null}if(ss.isValue(e.LeZ)){return'url'}return null};u.willActionCauseTabChange=function(e,gc){var gd=u.getApplicableActions(e,gc,'filter');for(var ge=0;ge<gd.length;ge++){var gf=gd[ge];if(ss.isValue(gf.Yb$)){var gg=bh.deserialize(gf.Yb$['eDX'.toString()],true);var gh=gg.commandParams['DYs'];if(ss.isValue(gh)&&!_.isEqual(gh,tsConfig.current_sheet_name)){return true}}}return false};u.getUrlActionPm=function(e,gc,gd){if(ss.isValue(gd)&&!ss.isNullOrUndefined(e.LeZ)){var ge=gc.get_vizDataModel();var gf=z.get_instance().get_dataDictionary();var gg=fL.constructUrl(gf,e.LeZ,ge,gd,gc.get_worksheetName());return{item1:u.$0(gg),item2:gg.item2}}return{item1:null,item2:'urlConstructionFail'}};u.$0=function(e){if(e.item2!=='success'){return null}var gc={};gc.ZNi=e.item1;var gd=gc;var ge=de.getFirstAvailableWebZoneName(z.get_instance());if(ss.isValue(ge)){gd.ALQ=ge}return gd};u.$7=function(e){return ss.isValue(e)&&(e==='color'||e==='size'||e==='shape')};u.$2=function(e,gc,gd,ge){var gf=C.computeFromTuples(gd,gc,e);dN.$d(gf,ge)};u.$8=function(e){dN.$1(e)};u.$3=function(e,gc,gd){if(ss.isValue(gc)&&gc.length>0){var ge=[];for(var gf=0;gf<e.length;gf++){var gg=e[gf];var gh=u.getUrlActionPm(gg,gd,gc).item1;if(ss.isValue(gh)){ge.push(gh)}else{ba.set_fireDeferredUrlActions(true);return}}if(ge.length>0){ba.get().delayLocalUrlActions(ge)}}};u.$1=function(e,gc,gd,ge,gf){if(ss.isValue(gc)){var gg=u.$5(gc);if(gg.length>0){var gh=de.getSheetInfoPresModel(z.get_instance(),tsConfig.current_sheet_name);if(ss.isValue(gh)&&!(gh.WeS&&ss.isNullOrUndefined(gh.ROW))){var gi=!gh.WeS||gh.ROW.length===1;for(var gj=0;gj<gg.length;gj++){var gk=gg[gj];if(gi||!ss.referenceEquals(gk.get_worksheetName(),e)){de.setVisualValidStateOnPresModel(ge,gk)}}}}if(gd.length>0){var gl=[];for(var gm=0;gm<gc.length;gm++){var gn=gc[gm];if((gd.length===1||!gn._pd)&&ss.isValue(gn.ElU)){var go={};var gp=gn.ElU+'&:exclude='+ba.get().get_legacySession().railsEncode(e);var gq=gf.get_vizDataModel();var gr=z.get_instance().get_dataDictionary();go.ZNi=fL.constructUrlForFilterActionFromTargetURL(gr,gp,gn.LeZ,gq,gd);gl.push(go)}}if(gl.length>0){ba.get().delayLocalUrlActions(gl)}}}};u.$5=function(e){var gc={};if(ss.isValue(e)){for(var gd=0;gd<e.length;gd++){var ge=e[gd];for(var gf=0;gf<ge.kDm.length;gf++){var gg=ge.kDm[gf];var gh=de.getVisualModel(z.get_instance(),gg);if(ss.isValue(gh)){gc[gg]=gh}}}}var gi=[];var gj=new ss.ObjectEnumerator(gc);try{while(gj.moveNext()){var gk=gj.current();gi.push(gk.value)}}finally{gj.dispose()}return gi};u.$6=function(e){if(!u.$b){u.$b=true;var gc=tsConfig.schemeWhitelist.split(',');for(var gd=0;gd<gc.length;gd++){var ge=gc[gd];var gf=ge.toLowerCase().trim();if(!ss.endsWithString(gf,':')){gf+=':'}if(gf.length>1){u.$c.push(gf)}}}var gg=new RegExp('(^[A-Za-z][A-Za-z0-9+\\-.]*:)');var gh=gg.exec(e);if(!ss.isValue(gh)){return true}var gi=gh[0].toLowerCase();return ss.contains(u.$c,gi)};u.$4=function(e,gc,gd){var ge=_.filter(e,function(gf){var gg=ss.contains(gf.QGQ,gc);var gh=gd===gf.bg$;return gg&&gh});return ge};u.launchActionUrls=function(e,gc){var gd=[];var ge={};if(ss.isNullOrUndefined(e)||e.length===0){return}if(ss.isValue(B.linkTarget)&&B.linkTarget.length>0){var gf=B.linkTarget;gd.push({item1:gf,item2:false});ge[gf]=e[e.length-1].ZNi}else{var gg=0;for(var gh=0;gh<e.length;gh++){var gi=e[gh];if(!u.$6(gi.ZNi)){if(!u.$a){u.$a=true;gc.showAlertDialog(tab.Strings.SecurityBlockedURLActionMessage,tab.Strings.SecurityBlockedURLActionHeader,true)}continue}if(ss.isNullOrUndefined(gi.ALQ)||'t'in gi){gi.ALQ=gi['t']}var gj;if(ss.isValue(gi.ALQ)){gj={item1:gi.ALQ,item2:true}}else{var gk='_'+tsConfig.layoutid.toString().replace(new RegExp('[^\\w]','g'),'');if(gg>0){gk+='_'+gg.toString()}gj={item1:gk,item2:false}}if(!ss.keyExists(ge,gj.item1)){gd.push(gj)}ge[gj.item1]=gi.ZNi;gg++}}for(var gl=0;gl<gd.length;gl++){var gm=gd[gl];var gn=gm.item1;if(gm.item2){try{$('[name='+gn+']').prop('src',ge[gn])}catch(go){}}else{window.open(ge[gn],gn)}}};global.tab.ActionUtils=u;var v=function(){ss.makeGenericType(A,[Object,w]).call(this)};v.__typeName='tab.AddDataServerDataSourceCmd';global.tab.AddDataServerDataSourceCmd=v;var w=function(e){this.$c=null;this.$c=e};w.__typeName='tab.AddDataServerDataSourceCmd$Response';global.tab.AddDataServerDataSourceCmd$Response=w;var x=function(e){this.$2$1=null;db.call(this,e,new ds('OIO'.toString()))};x.__typeName='tab.AnalyticsPaneModel';global.tab.AnalyticsPaneModel=x;var y=function(){};y.__typeName='tab.ApiClientCommands';y.doApiCommand=function(e,gc,gd){ba.SendCommand(d.$0(e,'immediately',gc,gd))};global.tab.ApiClientCommands=y;var z=function(){this.$9=null;this.$a=null;this.$c=null;this.$5=null;this.$7=null;this.$4=null;this.$b=null;this.$8=null;this.$3=null;this.$6=null;this.$2$1=null;this.$2$2=null;db.call(this,null,null);this.set_presModelKey(new ds('hyc'.toString()));this.$a=new ft(this);this.$c=new fS(this);this.$5=new Y(this);this.$7=new bE(this);this.$4=new M(this,false);this.$b=new M(this,true);this.$8=new dE(this);this.$3=new L(this);this.$6=new bo(this);this.$9=new ec};z.__typeName='tab.ApplicationModel';z.get_instance=function(){if(ss.isNullOrUndefined(z._instance)){z._instance=new z}return z._instance};z.testOnly_YouShouldNotUseThis_ResetInstance=function(){z._instance=null};global.tab.ApplicationModel=z;var A=function(e,gc){var gd=function(){this.c={};this.$1$1=null;this.$1$2=false;this.$1$3=false;this.$1$4=null;this.$1$5=false;this.set_uiBlocking('none')};ss.registerGenericClassInstance(gd,A,[e,gc],{get_uiBlocking:function(){return this.$1$1},set_uiBlocking:function(ge){this.$1$1=ge},get_deferSuccess:function(){return this.$1$2},set_deferSuccess:function(ge){this.$1$2=ge},get_deferFailure:function(){return this.$1$3},set_deferFailure:function(ge){this.$1$3=ge},get_localWork:function(){return this.$1$4},set_localWork:function(ge){this.$1$4=ge},get_noExceptionDialog:function(){return this.$1$5},set_noExceptionDialog:function(ge){this.$1$5=ge},invoke:function(ge){ge.noExceptionDialog=this.get_noExceptionDialog();ge.preserveRootResult=true;var gf=$.Deferred();var gg=function(gi){gf.resolve(new gc(gi))};var gh=function(gi){gf.reject()};ba.SendCommand(new U(this.get_uiBlocking(),this.get_localWork(),ge,(this.get_deferSuccess()?ba.$3(Object).call(null,$.Deferred().done(gg)):gg),(this.get_deferFailure()?ba.$0($.Deferred().fail(gh)):gh)));return gf.promise()}},function(){return null},function(){return[]});return gd};A.__typeName='tab.BaseCmd$2';ss.initGenericClass(A,a,2);global.tab.BaseCmd$2=A;var B=function(e,gc){this.defaultSessionErrorHandler=null;this.$g=null;this.$h=null;this.$j=null;this.$i=null;this.$1$1=null;tab.Param.verifyValue(gc,'commonDialogProvider');this.$g=gc;var gd=tabBootstrap.BaseUrlFormatter.formatBaseUrl();if(ss.isValue(e)){this.$j=e}else{this.$j=tabBootstrap.BaseUrlFormatter.formatUrlRoot(gd)}if(ss.isValue(tsConfig.site_root)){this.$i=tsConfig.site_root}else{this.$i=gd}this.defaultSessionErrorHandler=new bI(gc,e);if(tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad')){this.$h=new bW([new bL,this.defaultSessionErrorHandler])}else{this.$h=new bW([this.defaultSessionErrorHandler])}};B.__typeName='tab.BaseSession';global.tab.BaseSession=B;var C=function(){this.$5={};this.$4={};this.$2={};this.$3={};this.$1=true};C.__typeName='tab.BrushingComputer';C.$3=function(){return tab.Logger.lazyGetLogger(C)};C.computeFromLegend=function(e,gc,gd){var ge=new C;if(!gd.get_isHighlightEnabled()){return ge}var gf=e.get_vizDataModel();var gg=i.$1(gd,gc,gf,gd.get_fieldCaptions());var gh=gd.get_fieldCaptions();for(var gi=0;gi<gh.length;gi++){var gj=gh[gi];if(e.vizDataContainsDuplicateCaption(gj)){ge.$1=false;return ge}}var gk;if(gd.get_isOneWay()){gk=de.getVisualModels(z.get_instance())}else{gk={};var gl=u.getApplicableActions(e.get_worksheetName(),'on-select','highlight');for(var gm=0;gm<gl.length;gm++){var gn=gl[gm];if(ss.isNullOrUndefined(gn.kDm)){continue}for(var go=0;go<gn.kDm.length;go++){var gp=gn.kDm[go];var gq=de.getVisualModel(z.get_instance(),gp);gk[gp]=gq}}}var gr=new ss.ObjectEnumerator(gk);try{while(gr.moveNext()){var gs=gr.current();var gt=gs.value;var gu=gt.get_vizDataModel();ge.$5[gs.key]=i.$b(gg,gu);ge.$4[gs.key]=i.$a(gt.get_scenePresModel(),gg,gu);var gv=[];var gw=new ss.ObjectEnumerator(C.$2(gt));try{while(gw.moveNext()){var gx=gw.current();var gy=gx.value;var gz=i.$d(gt,gy);var gA=_.intersection(gz,gd.get_fieldCaptions());if(gA.length>0){var gB=i.$1(gd,gc,gf,gA);gv=gv.concat.apply(gv,i.$8(gB,gt,gy))}}}finally{gw.dispose()}ge.$3[gs.key]=gv;var gC=de.getVizCategoricalLegends(gt);for(var gD=0;gD<gC.length;gD++){var gE=gC[gD];if(!gE.get_isHighlightEnabled()){continue}var gF=i.$7(gg,gu,gE);if(!ss.keyExists(ge.$2,gt.get_worksheetName())){ge.$2[gt.get_worksheetName()]={}}ge.$2[gt.get_worksheetName()][C.$0(gE.get_legendTypeEnum(),gE.get_legendNames())]=gF}}}finally{gr.dispose()}return ge};C.getTuplesAssociatedWithSelectedNodes=function(e,gc){if(ss.isNullOrUndefined(e.get_vizDataModel())||ss.isNullOrUndefined(z.get_instance().get_dataDictionary())){return[]}var gd=[];for(var ge=0;ge<gc.length;ge++){var gf=gc[ge];if(dR.isCategoricalAndTupleAssociatedHeader(gf.ZHX,gf.wwF)){gd.push(gf)}}if(gd.length===0){return[]}var gg=i.$2(e.get_vizDataModel(),gd);var gh=C.$1(gg,e);return gh};C.computeFromTuples=function(e,gc,gd){var ge=new C;for(var gf=0;gf<gd.length;gf++){var gg=gd[gf];if(ss.isNullOrUndefined(gg.kDm)){continue}var gh=bh.deserialize(gg.Yb$['eDX'.toString()],true);for(var gi=0;gi<gg.kDm.length;gi++){var gj=gg.kDm[gi];var gk=de.getVisualModel(z.get_instance(),gj);if(ss.isNullOrUndefined(gk)){continue}var gl=gk.get_vizDataModel();if(ss.isNullOrUndefined(gl)){continue}if(C.isSpecialDateTimeHighlighting(gh)){var gm=z.get_instance().get_dataDictionary();var gn=i.$0(e.get_vizDataModel(),gl,gm,gc);var go=gn.item1;var gp=gn.item2;ge.$5[gj]=i.$c(go,gp,gl,gm);ge.$3[gj]=i.$9(go,gp,gk,gm);ge.$0(gk,e,gc,gh,gg.dMo)}else{var gq=C.getHighlightFieldCaptions(gh,e.get_vizDataModel().get_highlightCaptions(),e.get_vizDataModel().get_fieldCaptions());if(!ss.referenceEquals(e,gk)){gq=_.intersection(gq,gl.get_fieldCaptions())}if(tab.MiscUtil.isNullOrEmpty(gq)){continue}for(var gr=0;gr<gq.length;gr++){var gs=gq[gr];if(e.vizDataContainsDuplicateCaption(gs)){ge.$1=false;return ge}}var gt=i.$3(e.get_vizDataModel(),gc,gq);ge.$5[gj]=i.$b(gt,gl);var gu=[];var gv=new ss.ObjectEnumerator(C.$2(gk));try{while(gv.moveNext()){var gw=gv.current();var gx=gw.value;var gy=i.$d(gk,gx);var gz=_.intersection(gy,gq);if(gz.length>0){var gA=i.$3(e.get_vizDataModel(),gc,gz);gu=gu.concat.apply(gu,i.$8(gA,gk,gx))}}}finally{gv.dispose()}ge.$3[gj]=gu;ge.$0(gk,e,gc,gh,gg.dMo)}}}return ge};C.$2=function(e){var gc={};var gd=e.get_sceneModel().get_visualListModels();var ge=new ss.ObjectEnumerator(gd);try{while(ge.moveNext()){var gf=ge.current();gc[gf.key]=gf.value.get_groupItemNodes()}}finally{ge.dispose()}var gg=gc['x-labels']||[];ss.arrayAddRange(gg,gc['bottom-axis']||[]);gc['x-labels']=gg;delete gc['bottom-axis'];return gc};C.isSpecialDateTimeHighlighting=function(e){var gc=e.commandParams['bFG'];return ss.isValue(gc)&&gc==='date-time'};C.getHighlightFieldCaptions=function(e,gc,gd){var ge;var gf=e.commandParams['oKr'];if(!ss.isNullOrUndefined(gf)){ge=tab.JsonUtil.parseJson(gf)}else{var gg=e.commandParams['bFG'];if(ss.isNullOrUndefined(gg)||gg!=='all'){}ge=gc}if(ss.isValue(gd)){ge=_.intersection(gd,ge)}return ge};C.$0=function(e,gc){return'LegendType:'+e.toString()+' LegendNames:'+gc.join(';')};C.$1=function(e,gc){var gd=[];if(ss.isNullOrUndefined(gc.get_vizDataModel())){return gd}for(var ge=0;ge<e.length;ge++){var gf=e[ge];gd=_.union(gd,i.$b(gf,gc.get_vizDataModel()))}return gd};global.tab.BrushingComputer=C;var D=function(){ss.makeGenericType(A,[Object,E]).call(this)};D.__typeName='tab.BuildSheetListContextMenuCmd';global.tab.BuildSheetListContextMenuCmd=D;var E=function(e){this.$c=null;this.$c=e};E.__typeName='tab.BuildSheetListContextMenuCmd$Response';global.tab.BuildSheetListContextMenuCmd$Response=E;var F=function(e){this.$1=null;this.$0=null;this.$1=e};F.__typeName='tab.CalcApplyResponse';F.fromApplyCalculationResult=function(e,gc){var gd=(_.isString(e)?e:e['hfT'.toString()]);var ge=new F(gd);switch(ge.get_resultType()){case'invalid-formula':{ge.set_errorMessage(gc.get_errorSummary());break}case'invalid-caption-for-new-calc':{ge.set_errorMessage(e['bYn'.toString()]);break}}return ge};global.tab.CalcApplyResponse=F;var G=function(){ss.makeGenericType(A,[Object,H]).call(this)};G.__typeName='tab.CalculationAutoCompleteCmd';global.tab.CalculationAutoCompleteCmd=G;var H=function(e){this.$c=null;this.$c=e};H.__typeName='tab.CalculationAutoCompleteCmd$Response';global.tab.CalculationAutoCompleteCmd$Response=H;var I=function(e,gc){db.call(this,e,new ds('id$'.toString()));this.swapPresModel(gc)};I.__typeName='tab.CalculationAutoCompleteItemModel';global.tab.CalculationAutoCompleteItemModel=I;var J=function(e){this.$3=[];db.call(this,null,new ds('eFp'.toString()));this.swapPresModel(e);var gc=e.CEw||[];for(var gd=0;gd<gc.length;gd++){var ge=gc[gd];this.$3.push(new I(this,ge))}};J.__typeName='tab.CalculationAutoCompleteModel';global.tab.CalculationAutoCompleteModel=J;var K=function(){};K.__typeName='tab.CalculationCommands';K.registerCommandInterceptors=function(){dU.addCommandInterceptor(K.$1,'tabdoc'.toString(),'edit-pill'.toString());dU.addCommandInterceptor(K.$2,'tabdoc'.toString(),'create-calc'.toString());dU.addCommandInterceptor(K.$3,'tabdoc'.toString(),'edit-calc'.toString())};K.$2=function(e){if(ss.keyExists(e.commandParams,'HBp')){K.createCalculation(e.commandParams['UyO'],e.commandParams['HBp'])}else{K.createCalculation(e.commandParams['UyO'])}return 1};K.$3=function(e){K.editCalculation(e.commandParams['HBp']);return 1};K.$1=function(e){var gc=e.commandParams;K.editPill(gc['HBp'],gc['Ene'],parseInt(gc['ZMD']),parseInt(gc['FsL']));return 1};K.createCalculation=function(e,gc){var gd={};gd['UyO']=e;if(ss.isValue(gc)){gd['HBp']=gc}var ge=bk.newDocCommand('create-calc',gd);ba.SendCommand(new U('immediately',function(gf){var gg=gf.makeMutablePresModel(z.get_instance().get_calculationModel());gg.UyO=e;gg.MQQ='__temporary calc name__'},ge))};K.editCalculation=function(e){var gc={};gc['HBp']=e;var gd=bk.newDocCommand('edit-calc',gc);var ge='';var gf='';var gg=z.get_instance().get_workbook().get_dataSchema().findDataSourceFromGlobalFieldName(e);if(ss.isValue(gg)){gf=gg.get_name();var gh=gg.findField(e);if(ss.isValue(gh)){ge=gh.get_displayName()}}ba.SendCommand(new U('immediately',function(gi){var gj=gi.makeMutablePresModel(z.get_instance().get_calculationModel());gj.HBp=e;gj.QD=ge;gj.UyO=gf;gj.MQQ='__temporary calc name__'},gd))};K.editPill=function(e,gc,gd,ge){var gf={};gf['HBp']=e;gf['FsL']=ge;gf['Ene']=gc;gf['ZMD']=gd;var gg=bk.newDocCommand('edit-pill',gf);return K.$4(gc,gg,K.$0(gc,gd,ge))};K.createAdHocCalculation=function(e,gc,gd){var ge={};ge['FsL']=gd;ge['Ene']=e;ge['ZMD']=gc;var gf=bk.newDocCommand('create-type-in-pill',ge);return K.$4(e,gf,K.$0(e,gc,gd))};K.$0=function(e,gc,gd){return function(ge){var gf=ge.makeMutablePresModel(z.get_instance().get_typeInPillCalculationModel());gf.UyO='__fake ds name__';gf.MQQ='__temporary calc name__';gf.Ene=e;gf.ZMD=gc;gf.FsL=gd}};K.$4=function(e,gc,gd){if(!K.isValidShelfForCalcs(e)){return $.Deferred().reject()}var ge=$.Deferred();var gf=ge.promise().pipe(function(gg){var gh=gg;return ss.isValue(gh)&&(ss.isNullOrUndefined(gh.GiX)||gh.GiX)});ba.SendCommand(new U('immediately',gd,gc,ba.$3(Object).call(null,ge),function(){ge.reject()}));return gf};K.requestAutoCompleteInfo=function(e,gc,gd){var ge=$.Deferred();var gf=new G;gf.c['XPP']=gc;gf.c['rsY']=gd;var gg={};gg.UyO=e.get_dataSourceName();gg.HBp=e.get_fieldName();gg.zZA=e.get_calculationContext();gg.oVH=e.get_useParameters();gf.c['Oss']=gg;gf.set_noExceptionDialog(true);gf.invoke$1().done(function(gh){ge.resolve(new J(gh.$c['eFp']))}).fail(function(gh){ge.reject()});return ge.promise()};K.applyCalculation=function(e,gc,gd,ge,gf){var gg=$.Deferred();var gh=gg.promise().pipe(function(gl){return F.fromApplyCalculationResult(gl,e)});var gi={};var gj;if(e.get_isAdhoc()){gj='apply-type-in-pill';gi['kMV']=gd;gi['PPe']=true;gi['fUO']=gf}else{gj='apply-calculation';gi['TkJ']=gc;gi['kMV']=gd;gi['PPe']=true}var gk=function(gl){if(e.get_isAdhoc()&&gf){var gm=gl.makeMutablePresModel(e);gm.QD=null;gm.MQQ=null;gm.UyO=null}};ba.SendCommand(new U('immediately',gk,bk.newDocCommand(gj,gi),ba.$3(Object).call(null,gg),function(){gg.reject()}));return gh};K.cancelCalculation=function(e){var gc=null;if(e.get_isAdhoc()){gc={};gc['nFA']=true}var gd=bk.newDocCommand('clear-calculation-model',gc);ba.SendCommand(new U('none',function(ge){var gf=ge.makeMutablePresModel(e);gf.QD=null;gf.MQQ=null;gf.UyO=null},gd))};K.validateCalculation=function(e,gc,gd){var ge=$.Deferred();var gf;var gg={};gg['kMV']=gd;gg['PPe']=true;if(e.get_isAdhoc()){gf='validate-type-in-pill'}else{gf='validate-formula';gg['TkJ']=gc}ba.SendCommand(new d(bk.newDocCommand(gf,gg),'none',function(){ge.resolve()},function(){ge.reject()}));return ge.promise()};K.startDraggingText=function(e){var gc=$.Deferred();var gd={};gd['Gge']=tsConfig.current_sheet_name;gd['beN']=false;gd['gjO']=e;ba.SendCommand(new d(bk.newDocCommand('get-drag-pres-model-for-text',gd),'none',ba.$3(Object).call(null,gc),function(){gc.reject()}));return gc};K.dropOnCalcEditor=function(e,gc,gd,ge,gf,gg){var gh=$.Deferred();var gi={};gi['HVp']=e;gi['iF$']=gc;gi['Qah']=gd;if(ss.isValue(ge)){gi['BQL']=ge}gi['PPe']=true;gi['zZA']=gf;if(ss.isValue(gg)){gi['gjO']=gg}var gj=new d(bk.newDocCommand('drop-on-calc-editor',gi),'immediately',ba.$3(ss.Int32).call(null,gh),function(){gh.reject()});ba.SendCommand(gj);return gh.promise()};K.insertFunctionInFormula=function(e,gc,gd){var ge=$.Deferred();if(ss.isNullOrUndefined(gd)||ss.isNullOrUndefined(e)){return ge.reject()}var gf={};gf['RDA']=e;gf['Fpl']=gc;gf['H_i']=gd.DOV;gf['dPR']=gd.wje;var gg=new d(bk.newDocCommand('insert-function-in-formula',gf),'immediately',ba.$3(Object).call(null,ge),function(){ge.reject()});ba.SendCommand(gg);return ge.promise()};K.isValidShelfForCalcs=function(e){return e==='columns-shelf'||e==='rows-shelf'||e==='encoding-shelf'||e==='measures-shelf'||(e==='filter-shelf'||e==='pages-shelf')&&tab.FeatureFlags.isEnabled('TypeInPillsExtraShelves')};global.tab.CalculationCommands=K;var L=function(e){this.$2$1=null;db.call(this,e,new ds('mu_'.toString()));this.pm={}};L.__typeName='tab.CalculationFunctionListModel';global.tab.CalculationFunctionListModel=L;var M=function(e,gc){this.$4=false;this.$2$1=null;db.call(this,e,new ds((gc?'QjR':'Oss').toString()));this.pm={};this.$4=gc};M.__typeName='tab.CalculationModel';global.tab.CalculationModel=M;var N=function(e){db.call(this,e,new ds('uPU'.toString()))};N.__typeName='tab.CategoricalFilterModel';global.tab.CategoricalFilterModel=N;var O=function(e,gc,gd){this.$4=null;this.$2$1=null;this.$2$2=null;db.call(this,e,new ds(gc));this.$4=gd};O.__typeName='tab.CategoricalLegendModel';O.$0=function(e,gc){var gd;switch(e){case'color':case'map':{gd=gc.DKF;break}case'size':{gd=gc.nJz;break}case'shape':{gd=gc.x_f;break}default:{return null}}return gd};global.tab.CategoricalLegendModel=O;var P=function(e){this.$3=null;this.$3$1=null;dz.call(this,e,new ds('kKA'.toString()));this.set_categoricalFilter(new N(this))};P.__typeName='tab.CategoricalQuickFilterModel';global.tab.CategoricalQuickFilterModel=P;var Q=function(){this.$0=null;this.$0=[]};Q.__typeName='tab.Changelist';global.tab.Changelist=Q;var R=function(){};R.__typeName='tab.ChangeType';global.tab.ChangeType=R;var S=function(){ss.makeGenericType(A,[Object,T]).call(this)};S.__typeName='tab.ClearHighlightingCmd';global.tab.ClearHighlightingCmd=S;var T=function(e){this.$c=null;this.$c=e};T.__typeName='tab.ClearHighlightingCmd$Response';global.tab.ClearHighlightingCmd$Response=T;var U=function(e,gc,gd,ge,gf){this.doRemoteWork=null;this.doLocalWork=null;this.$5=null;this.$4=null;this.$2=null;this.$3=null;this.$1='Unknown';this.hasLocalComponent=false;this.hasRemoteComponent=false;this.$5=e;this.$4='remoteFirst';this.hasLocalComponent=ss.isValue(gc);this.hasRemoteComponent=ss.isValue(gd);this.doLocalWork=gc;this.$2=new Array;if(this.hasRemoteComponent){this.$2.push(new bf(gd,ge,gf));this.$1=gd.commandName}this.doRemoteWork=ss.mkdel(this,this.$0)};U.__typeName='tab.ClientCommand';global.tab.ClientCommand=U;var V=function(){ss.makeGenericType(A,[Object,W]).call(this)};V.__typeName='tab.CloseRefLineEditorCmd';global.tab.CloseRefLineEditorCmd=V;var W=function(e){this.$c=null;this.$c=e};W.__typeName='tab.CloseRefLineEditorCmd$Response';global.tab.CloseRefLineEditorCmd$Response=W;var X=function(e,gc,gd,ge){this.$3=0;this.$2=0;this.$1=0;this.$0=0;this.$3=e;this.$2=gc;this.$1=gd;this.$0=ge};X.__typeName='tab.ColorModel';X.fromArgbInt=function(e){var gc=(e&16711680)>>>16;var gd=(e&65280)>>>8;var ge=e&255;var gf=(e&4278190080)>>>24;return new X(gc,gd,ge,gf/255)};X.fromColorCode=function(e){var gc=function(gi){return Math.min(Math.max(gi,0),255)};var gd;var ge;var gf;var gg=1;var gh=X.$7.exec(e);if(ss.isValue(gh)){gd=gc(parseInt(gh[1],16));ge=gc(parseInt(gh[2],16));gf=gc(parseInt(gh[3],16));return new X(gd,ge,gf,gg)}gh=X.$8.exec(e);if(ss.isValue(gh)){gd=gc(parseInt(gh[1],10));ge=gc(parseInt(gh[2],10));gf=gc(parseInt(gh[3],10));return new X(gd,ge,gf,gg)}gh=X.$9.exec(e);if(ss.isValue(gh)){gd=gc(parseInt(gh[1],10));ge=gc(parseInt(gh[2],10));gf=gc(parseInt(gh[3],10));gg=parseFloat(gh[4]);if(gg<=1){gg=gg*255}if(gg>255){gg=255}if(gg<0){gg=0}gg=gg/255;return new X(gd,ge,gf,gg)}throw new ss.Exception('Unknown color format: '+e)};X.fromColorModelPlusAlpha=function(e,gc){return new X(e.get_r(),e.get_g(),e.get_b(),gc)};X.convertColorForCanvas=function(e){if(e.charCodeAt(3)===40){return e}X.$2();var gc=X.$b[e];if(ss.isValue(gc)){return gc}var gd=X.fromColorCode(e);gc=gd.toString();return gc};X.isDark=function(e,gc){var gd=X.alphaBlend(e,X.$a);return Math.max(Math.max(gd.get_r(),gd.get_g()),gd.get_b())<=gc};X.alphaBlend=function(e,gc){if(e.get_a()<1){var gd=X.alphaToTransparency$1(e.get_a());var ge=gc.get_r()*gd+e.get_r()*e.get_a();var gf=gc.get_g()*gd+e.get_g()*e.get_a();var gg=gc.get_b()*gd+e.get_b()*e.get_a();return new X(ss.Int32.trunc(ge),ss.Int32.trunc(gf),ss.Int32.trunc(gg),1)}else{return e}};X.isFullyTransparent=function(e){return e.get_a()===0};X.alphaComposite=function(e,gc){if(gc.get_a()>=0.999989986419678){return X.alphaCompositeSolidDest(e,gc)}var gd=X.alphaToTransparency$1(e.get_a());var ge=e.get_a()+gc.get_a()*gd;return new X(X.$0(e.get_r(),e.get_a(),gc.get_r(),gc.get_a(),ge),X.$0(e.get_g(),e.get_a(),gc.get_g(),gc.get_a(),ge),X.$0(e.get_b(),e.get_a(),gc.get_b(),gc.get_a(),ge),ge)};X.alphaCompositeSolidDest=function(e,gc){return new X(X.$1(e.get_r(),e.get_a(),gc.get_r()),X.$1(e.get_g(),e.get_a(),gc.get_g()),X.$1(e.get_b(),e.get_a(),gc.get_b()),1)};X.$5=function(e,gc){var gd=e.toString(16);while(gd.length<gc){gd='0'+gd}return gd};X.$0=function(e,gc,gd,ge,gf){return Math.round((e*gc+gd*ge*X.alphaToTransparency$1(gc))/gf)};X.$1=function(e,gc,gd){return Math.round(e*gc+gd*X.alphaToTransparency$1(gc))};X.$4=function(e){if(e<=0.0404499992728233){return e/12.9200000762939}else{return Math.pow((e+0.0549999997019768)/1.05499994754791,2.40000009536743)}};X.$3=function(e){if(e>0.00885639991611242){return Math.pow(e,0.333333313465118)}else{return 7.78703689575195*e+0.137931004166603}};X.$2=function(){if(ss.isValue(X.$b)){return}X.$b={};X.$b['rgba(0,0,0,255)']='rgba(0,0,0,1)';X.$b['rgba(0,0,0,0)']='rgba(0,0,0,0)';X.$b['rgba(255,255,255,255)']='rgba(255,255,255,1)';X.$b['rgba(255,255,255,0)']='rgba(255,255,255,0)'};X.transparencyToAlpha=function(e){return Math.min(Math.max(1-e,0),1)};X.alphaToTransparency=function(e){return Math.min(Math.max(1-e,0),1)};X.alphaToTransparency$1=function(e){return X.transparencyToAlpha(e)};global.tab.ColorModel=X;var Y=function(e){db.call(this,e,new ds('HMF'.toString()))};Y.__typeName='tab.ColorPaletteCollectionModel';global.tab.ColorPaletteCollectionModel=Y;var Z=function(e){this.$1$1=null;this.set_command(e)};Z.__typeName='tab.CommandBuilder';global.tab.CommandBuilder=Z;var ba=function(e,gc){this.$x=null;this.$y=null;this.$F=[];this.$O=new r;this.$N=new fw;this.$C={};this.$B=null;this.$D=0;this.$P=null;this.$z=false;this.$M=false;this.$L=null;this.$I=false;this.$J=false;this.$K=null;this.$H=null;this.$w=null;this.$A=null;this.$v=false;this.$G=false;this.$E=null;this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.$y=gc;var gd=new c(e);gd.$2('tabsrv'.toString(),'render-tooltip-server'.toString(),135);this.$x=gd;this.$x.add_commmandSucceeded(ss.mkdel(this,this.$d));this.$E=[];this.$L=e;window.window.onerror=ss.mkdel(this,this.$j);this.$A=new bK(gc);if(du.get_progressiveLoadEnabled()){this.$3()}};ba.__typeName='tab.CommandController';ba.get_fireDeferredUrlActions=function(){return ba.$9};ba.set_fireDeferredUrlActions=function(e){ba.$9=e};ba.get_hasInstance=function(){return ss.isValue(ba._instance)};ba.$7=function(){return tab.Logger.lazyGetLogger(ba)};ba.create=function(e,gc){if(ss.isNullOrUndefined(ba._instance)){ba._instance=new ba(e,gc)}return ba._instance};ba.clearInstance=function(){ba._instance=null;window.window.onerror=null};ba.get=function(){if(!ss.isValue(ba._instance)){throw new ss.Exception('Attempted to use CommandController before creating it.')}return ba._instance};ba.handleBootstrapException=function(e,gc){if(ba.$a){return}var gd=new ss.StringBuilder;if(ss.isValue(e['name'])){gd.append(e['name']).append(': ')}gd.append(e.get_message());gc.showAlertDialog(tab.Strings.UnhandledExceptionMessage(gd.toString()),tab.Strings.UnhandledExceptionTitle,true);ba.sendParentCompletedMessage();ba.$a=true};ba.sendParentCompletedMessage=function(){if(ba.$b){return}ba.$b=true;tab.BrowserSupport.doPostMessageWithContext('tableau.completed'.toString())};ba.$5=function(e){return e.get_blockType()==='immediately'};ba.SendCommand=function(e){var gc=ba.get();if(du.get_progressiveLoadEnabled()){gc.$0(e)}gc.$O.$1(e);gc.$f()};ba.$3=function(e){return function(gc){return ba.$2(gc)}};ba.$2=function(e){return function(gc){var gd=ba.get();var ge=null;ge=function(){gd.remove_commandQueueComplete(ge);e.resolve(gc)};gd.add_commandQueueComplete(ge)}};ba.$0=function(e){return ba.$1(e)};ba.$1=function(e){return function(gc){var gd=ba.get();var ge=null;ge=function(){gd.remove_commandQueueComplete(ge);e.reject(gc)};gd.add_commandQueueComplete(ge)}};ba.$6=function(){var e={};e['t']=tabBootstrap.MetricsController.getTiming();e['d']='CLNTLD'.toString();var gc=new tabBootstrap.MetricsEvent('gen',2,e);tabBootstrap.MetricsController.logEvent(gc)};ba.$4=function(e){var gc=0;if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.res)||ss.isNullOrUndefined(e.res.mmK)){return null}if(!e.res.mmK.Jqz){return gc}var gd=e.res.mmK.HCq;var ge=_.keys(gd);for(var gf=0;gf<ge.length;gf++){var gg=ge[gf];var gh=gd[gg];if(gh.jAM!=='flipboard'){continue}var gi=ga.getContent(gh,'XIo');return(ss.isNullOrUndefined(gi)?null:gi.P_I)}return null};global.tab.CommandController=ba;var bb=function(e,gc){this.succeeded=false;this.error=null;this.succeeded=e;this.error=gc};bb.__typeName='tab.CommandExecutionResult';global.tab.CommandExecutionResult=bb;var bc=function(){};bc.__typeName='tab.CommandInterceptorResult';global.tab.CommandInterceptorResult=bc;var bd=function(e){this.$0=null;this.$0=e};bd.__typeName='tab.CommandItemWrapper';bd.create=function(e){if(!ss.isValue(e)){return null}return new bd(e)};global.tab.CommandItemWrapper=bd;var be=function(e){this.$0=null;this.$0={};var gc=ss.getEnumerator(e);try{while(gc.moveNext()){var gd=gc.current();this.$0[gd]='granted'}}finally{gc.dispose()}};be.__typeName='tab.CommandPermission';global.tab.CommandPermission=be;var bf=function(e,gc,gd){this.$0=null;this.$2=null;this.$1=null;this.$0=e;this.$2=gc;this.$1=gd};bf.__typeName='tab.CommandRecord';global.tab.CommandRecord=bf;var bg=function(){};bg.__typeName='tab.CommandRedirectRegistry';bg.checkpointRegistry=function(){var e=bg.$0;bg.$0=$.extend(false,{},e);return function(){bg.$0=e}};bg.registerHandler=function(e,gc){tab.Param.verifyValue(e,'commandRedirectType');tab.Param.verifyValue(gc,'handler');if(ss.isNullOrUndefined(bg.$0)){bg.$0={}}bg.$0[e]=gc};bg.handleRedirect=function(e,gc){if(ss.isNullOrUndefined(bg.$0)||!ss.keyExists(bg.$0,e)){throw new ss.Exception('No command redirect registerd for type: '+e)}var gd=bg.$0[e];return gd(gc)};global.tab.CommandRedirectRegistry=bg;var bh=function(){};bh.__typeName='tab.CommandSerializer';bh.$4=function(){return tab.Logger.lazyGetLogger(bh)};bh.buildDocCommandName=function(e){return bh.buildQualifiedCommandName('tabdoc'.toString(),e.toString())};bh.buildQualifiedCommandName=function(e,gc){return e+':'+gc};bh.deserialize=function(e,gc){var gd;gc=gc||false;if(gc){gd=bh.$6[e];if(ss.isValue(gd)){return gd}}var ge=new RegExp('^(\\w+):([\\w-]+)( ((.|\n)*))?$');var gf=ge.exec(e);if(ss.isNullOrUndefined(gf)||gf.length===0){return null}gd=new Object;gd.commandNamespace=gf[1];gd.commandName=gf[2];bh.$1(gd,gf[4]);if(gc){bh.$0(e,gd)}return gd};bh.getCommandType=function(e){if(ss.keyExists(bh.$8,e.commandName)){return bh.$8[e.commandName]}else{return null}};bh.$0=function(e,gc){if(bh.$7.length>=15){var gd=bh.$7.shift();delete bh.$6[gd]}bh.$6[e]=gc;bh.$7.push(e)};bh.$1=function(e,gc){if(ss.isNullOrEmptyString(gc)){return}var gd=new ss.StringBuilder;var ge=new Array;for(var gf=gc.length-1;gf>=0;gf--){ge.push(gc.substr(gf,1))}while(ge.length>0){var gg=bh.$2(ge,gd);if(!ss.isValue(gg)){return}var gh=bh.$3(ge,gd);if(ss.isNullOrUndefined(gh)){return}if(gh==='{}'){continue}if(ss.isNullOrUndefined(e.commandParams)){e.commandParams={}}e.commandParams[ss.unbox(gg)]=gh}};bh.$2=function(e,gc){gc.clear();var gd=false;while(e.length>0){var ge=e.pop();switch(ge){case'=':{return gc.toString().trim()}case'-':{gd=true;break}default:{if(gd){gc.append(ge.toUpperCase());gd=false}else{gc.append(ge)}break}}}return null};bh.$3=function(e,gc){gc.clear();var gd=new Array;var ge=function(){return((gd.length>0)?ss.arrayPeekBack(gd):'')};var gf=e.length>1&&ss.arrayPeekBack(e)==='"';while(e.length>0){var gg=e.pop();var gh=true;switch(gg){case'\\':{if(gf){if(ge()!=='\\'){gd.push('\\');gh=false}else{gd.pop()}}break}case'"':{if(ge()==='\\'){gd.pop()}else if(ge()==='"'){gd.pop();if(gd.length===0){gh=false}}else{if(gd.length===0){gh=false}gd.push('"')}break}case'[':{if(ge()==='"'){}else{gd.push('[')}break}case']':{if(ge()==='"'){}else if(ge()!=='['){}else{gd.pop()}break}case'{':{if(ge()==='"'){}else{gd.push('{')}break}case'}':{if(ge()==='"'){}else if(ge()!=='{'){}else{gd.pop()}break}default:{if(ge()==='\\'){gd.pop()}break}}if(gh){gc.append(gg)}if(gd.length===0){return gc.toString()}}return null};global.tab.CommandSerializer=bh;var bi=function(e){this.$3=true;this.$2$1=null;db.call(this,e,new ds('Jmx'.toString()))};bi.__typeName='tab.CommandsModel';global.tab.CommandsModel=bi;var bj=function(e){this.$0=null;this.$0=e};bj.__typeName='tab.CommandsPresModelWrapper';bj.create=function(e){if(!ss.isValue(e)){return null}return new bj(e)};global.tab.CommandsPresModelWrapper=bj;var bk=function(){};bk.__typeName='tab.CommandUtils';bk.newDocCommand=function(e,gc){var gd=new Object;gd.commandName=e.toString();gd.commandNamespace='tabdoc'.toString();if(ss.isValue(gc)){gd.commandParams=gc}return gd};bk.newSrvCommand=function(e){var gc=new Object;gc.commandName=e.toString();gc.commandNamespace='tabsrv'.toString();return gc};bk.newSrvCommand$1=function(e,gc){var gd=new Object;gd.commandName=e.toString();gd.commandNamespace='tabsrv'.toString();if(ss.isValue(gc)){gd.commandParams=gc}return gd};bk.addVisualIdToCommand=function(e,gc){if(tab.MiscUtil.isNullOrEmpty(gc.Hna)){e['AVP']=gc.AVP;if(ss.isValue(gc.XwZ)&&gc.XwZ.toString().length>0){e['XwZ']=gc.XwZ}}else{e['J_M']=tab.JsonUtil.toJson(gc)}};bk.addStoryPointToCommand=function(e,gc){if(ss.isValue(gc.Hna)){e['Hna']=gc.Hna;e['WIZ']=gc.WIZ.toString();e['hVl']=gc.hVl.toString()}};bk.duplicateCommand=function(e){var gc=new Object;$.extend(true,gc,e);return gc};bk.createCommandRedirectSuccessHandler=function(e){e=e||$.Deferred();var gc=$.Deferred();gc.promise().pipe(function(gd){if(_.isObject(gd)&&'XAS'.toString()in gd){var ge=gd['XAS'.toString()];var gf=bg.handleRedirect(ge,gd);gf.pipe(function(){e.resolve(gd);return gd},function(){e.reject();return gd})}else{e.resolve(gd)}return gd},function(){e.reject();return null});return ba.$3(Object).call(null,gc)};bk.executeSimpleCommand$1=function(e){return function(gc,gd){var ge=$.Deferred();var gf=$.Deferred().done([function(gg){ge.resolve(gg)}]).fail([function(gg){ge.reject.apply(ge,null)}]);dU.executeServerCommand(bh.deserialize(en.create(gc).get_simpleCommand()),gd,bk.createCommandRedirectSuccessHandler(gf),function(gg){ge.reject.apply(ge,null)});return ge}};bk.executeSimpleCommand=function(e,gc){return bk.executeSimpleCommand$1(Object).call(null,e,gc)};global.tab.CommandUtils=bk;var bl=function(){this.select=null;this.deselect=null;this.domain=null;this.select=[];this.deselect=[]};bl.__typeName='tab.CompiledChecklistChangelist';global.tab.CompiledChecklistChangelist=bl;var bm=function(){this.index=0;this.domain=null};bm.__typeName='tab.CompiledRadiolistChangelist';global.tab.CompiledRadiolistChangelist=bm;var bn=function(e,gc){this.$7=null;U.call(this,e,null,null);this.$7=[];for(var gd=0;gd<gc.length;gd++){var ge=gc[gd];if(ss.isValue(ge)){this.$7.push(ge);this.hasLocalComponent=this.hasLocalComponent||ge.get_hasLocalComponent();this.hasRemoteComponent=this.hasRemoteComponent||ge.get_hasRemoteComponent()}}};bn.__typeName='tab.CompositeClientCommand';global.tab.CompositeClientCommand=bn;var bo=function(e){this.$3=null;this.$4=null;this.$2$1=null;db.call(this,e,new ds('_Ja'.toString()));this.$3=new eG(this,new eH('primary',''));this.$4=new eG(this,new eH('secondary',''))};bo.__typeName='tab.CompoundTableCalcModel';bo.$0=function(e,gc){if(ss.isValue(e)&&ss.isValue(e.qGT)&&e.qGT.length>gc){return e.qGT[gc]}return null};global.tab.CompoundTableCalcModel=bo;var bp=function(e){this.$5=null;this.$4=null;this.$3=null;cd.call(this,e)};bp.__typeName='tab.CubeDimensionModel';global.tab.CubeDimensionModel=bp;var bq=function(e){this.$4=null;this.$3=null;cd.call(this,e)};bq.__typeName='tab.CubeFolderModel';global.tab.CubeFolderModel=bq;var br=function(e){this.$3=null;cd.call(this,e)};br.__typeName='tab.CubeHierarchyModel';global.tab.CubeHierarchyModel=br;var bs=function(e){this.$3$1=null;fx.call(this,e,new ds('Wlk'.toString()))};bs.__typeName='tab.CumulativeTableCalcModel';global.tab.CumulativeTableCalcModel=bs;var bt=function(e){this.$3=null;this.$3=e};bt.__typeName='tab.CustomizedViewSession';bt.buildUrl=function(e,gc){var gd=fN.createForViewingSheet(tsConfig.repositoryUrl);if(ss.isValue(e)){gd.updateForCustomizedView(e)}else{gd.set_originalView(true)}gd.removeHash();if(gc){gd.removeAllQueryParams()}return gd.get_absoluteUri()};bt.$0=function(e){var gc=function(gd,ge,gf){if(!ss.isValue(e)){return}var gg=bt.$1(gd);e((ss.isValue(gg)?gg:(gf.toString()||'')))};return gc};bt.$1=function(e){if(ss.isValue(e.responseText)){try{var gc=tab.JsonUtil.parseJson(e.responseText);if('msg'in gc){return gc['msg']}}catch(gd){var e=ss.Exception.wrap(gd)}}return null};global.tab.CustomizedViewSession=bt;var bu=function(){};bu.__typeName='tab.DashboardCommands';bu.dropSheetOnDashboard=function(e,gc){var gd=bk.newDocCommand('drop-on-dashboard');gd.commandParams={};gd.commandParams['AVP']=e;gd.commandParams['$dg']=false;gd.commandParams['XwZ']=tsConfig.current_sheet_name;gd.commandParams['jAM']='viz';var ge=gd.commandParams;var gf={};gf.thj=gc.x;gf.RAC=gc.y;ge['cxk']=gf;ba.SendCommand(d.$0(gd,'immediately'))};bu.dropNewZoneObjectOnDashboard=function(e,gc,gd,ge,gf){var gg=bk.newDocCommand('drop-on-dashboard');gg.commandParams={};gg.commandParams['$dg']=false;gg.commandParams['XwZ']=tsConfig.current_sheet_name;gg.commandParams['jAM']=e;gg.commandParams['oAu']=gc;var gh=gg.commandParams;var gi={};gi.thj=gd.x;gi.RAC=gd.y;gh['cxk']=gi;if(ss.isValue(gf)){gg.commandParams['XsN']=gf}if(ss.isValue(ge)){gg.commandParams['UfB']=ge}ba.SendCommand(d.$0(gg,'immediately'))};bu.moveZone=function(e,gc,gd,ge){var gf=bk.newDocCommand('move-zone');gf.commandParams={};gf.commandParams['BCp']=e;gf.commandParams['$dg']=ge;gf.commandParams['XwZ']=tsConfig.current_sheet_name;var gg=gf.commandParams;var gh={};gh.thj=gc.x;gh.RAC=gc.y;gg['cxk']=gh;var gi=gf.commandParams;var gj={};gj.thj=gd.x;gj.RAC=gd.y;gi['ClZ']=gj;ba.SendCommand(d.$0(gf,'immediately'))};bu.hideZone=function(e){var gc=new cw;gc.c['XwZ']=tsConfig.current_sheet_name;gc.c['BCp']=e;gc.c['sPc']=false;gc.set_uiBlocking('immediately');gc.invoke$1()};bu.selectZoneParent=function(e){var gc=new dS;gc.c['BCp']=e;gc.c['XwZ']=tsConfig.current_sheet_name;gc.invoke$1()};bu.getSheetDragDropTargets=function(e){var gc=new cn;gc.c['XwZ']=tsConfig.current_sheet_name;gc.set_uiBlocking('none');var gd=gc;if(ss.isValue(e)){gd.c['BCp']=ss.unbox(e)}return gd.invoke$1()};bu.addNewObjectToDashboard=function(e,gc,gd,ge){var gf=bk.newDocCommand('add-object-to-dashboard');gf.commandParams={};gf.commandParams['XwZ']=tsConfig.current_sheet_name;gf.commandParams['jAM']=e;gf.commandParams['oAu']=gc;gf.commandParams['$dg']=false;if(ss.isValue(ge)){gf.commandParams['XsN']=ge}if(ss.isValue(gd)){gf.commandParams['UfB']=gd}ba.SendCommand(d.$0(gf,'immediately'))};bu.addSheetToDashboard=function(e){var gc=bk.newDocCommand('add-sheet-to-dashboard');gc.commandParams={};gc.commandParams['AVP']=e;gc.commandParams['$dg']=false;ba.SendCommand(d.$0(gc,'immediately'))};bu.setDashboardSizeFixed=function(e,gc,gd,ge){bu.$0(e,gc,'fixed',gd,ge,gd,ge)};bu.setDashboardSizeAutomatic=function(e){bu.$0(e,'no','automatic',0,0,0,0)};bu.setDashboardSizeRange=function(e,gc,gd,ge,gf,gg){bu.$0(e,gc,'range',ss.coalesce(gd,0),ss.coalesce(ge,0),ss.coalesce(gf,0),ss.coalesce(gg,0))};bu.$0=function(e,gc,gd,ge,gf,gg,gh){var gi=new dY;gi.c['gKD']=gc;gi.c['XwZ']=e;gi.c['EVq']=ge;gi.c['pAn']=gf;gi.c['PiK']=gg;gi.c['McJ']=gh;gi.c['viO']=gd;gi.invoke$1()};global.tab.DashboardCommands=bu;var bv=function(e,gc){this.$f={};this.$h=null;this.$d=null;this.$8=null;this.$9=false;this.$7=false;this.$c=0;this.$a=null;this.$e=null;this.$g=null;this.$b=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;db.call(this,e,new ds('mmK'.toString()));this.$9=false;this.$h=new gb(this);this.$c=0};bv.__typeName='tab.DashboardModel';global.tab.DashboardModel=bv;var bw=function(e){this.$4=null;this.$5=null;this.$6=null;this.$2$1=null;db.call(this,e,new ds('OJ$'.toString()))};bw.__typeName='tab.DashboardSizeControlModel';global.tab.DashboardSizeControlModel=bw;var bx=function(e){this.$2$1=null;db.call(this,e,new ds('_yu'.toString()))};bx.__typeName='tab.DashboardSizeModel';global.tab.DashboardSizeModel=bx;var by=function(){};by.__typeName='tab.DataConnectionCommands';by.acceptConnectionVariables=function(e){var gc=new ea;gc.c['cmV']=e;gc.set_uiBlocking('immediately');gc.invoke$1()};by.editVariableByIndex=function(e,gc,gd,ge,gf,gg){var gh={};gh['cmV']=e;gh['tLJ']=gc;gh['Ab$']=gd;gh['dJp']=ge;gh['esa']=gf;gh['fgO']=gg;ba.SendCommand(d.$0(bk.newDocCommand('set-variable-value-by-index',gh),'immediately'))};by.editVariableByInput=function(e,gc,gd,ge,gf){var gg={};gg['cmV']=e;gg['tLJ']=gc;gg['Ab$']=gd;gg['dJp']=ge;gg['vau']=gf;ba.SendCommand(d.$0(bk.newDocCommand('set-variable-value-shim',gg),'immediately'))};by.addVariable=function(e,gc){var gd=$.Deferred();var ge={};ge['cmV']=e;ge['tLJ']=gc;ba.SendCommand(d.$0(bk.newDocCommand('add-new-variable-value',ge),'immediately',ba.$3(ss.Int32).call(null,gd),function(gf){gd.reject()}));return gd.promise()};by.deleteVariable=function(e,gc,gd,ge){var gf={};gf['cmV']=e;gf['tLJ']=gc;gf['Ab$']=gd;ba.SendCommand(d.$0(bk.newDocCommand('delete-variable-value',gf),'immediately',function(gg){ge()}))};by.addPublishedDataSourceConnection=function(e){var gc=new v;gc.c['YnR']=e.repositoryUrl;gc.c['_Zu']=e.name;gc.invoke$1()};global.tab.DataConnectionCommands=by;var bz=function(e){this.$4=null;db.call(this,e,new ds('_$p'.toString()))};bz.__typeName='tab.DataConnectionPromptModel';global.tab.DataConnectionPromptModel=bz;var bA=function(e){db.call(this,e,new ds('AlT'.toString(),1))};bA.__typeName='tab.DataConnectionVariableArrayModel';global.tab.DataConnectionVariableArrayModel=bA;var bB=function(e,gc){this.$5=null;this.$4=null;db.call(this,e,new ds(gc.toString()))};bB.__typeName='tab.DataConnectionVariableModel';global.tab.DataConnectionVariableModel=bB;var bC=function(e){db.call(this,e,new ds('mFS'.toString(),1))};bC.__typeName='tab.DataConnectionVariableValueArrayModel';global.tab.DataConnectionVariableValueArrayModel=bC;var bD=function(e,gc){db.call(this,e,new ds(gc.toString()))};bD.__typeName='tab.DataConnectionVariableValueModel';global.tab.DataConnectionVariableValueModel=bD;var bE=function(e){db.call(this,e,new ds('vZU'.toString()))};bE.__typeName='tab.DataDictionaryModel';global.tab.DataDictionaryModel=bE;var bF=function(e){this.$2$1=null;db.call(this,e,new ds('AEl'.toString()))};bF.__typeName='tab.DataHighlighterModel';global.tab.DataHighlighterModel=bF;var bG=function(e){this.$5=null;this.$4=null;this.$3=null;this.$2$1=null;db.call(this,e,new ds('dJ$1'.toString()));this.$5=[]};bG.__typeName='tab.DataSchemaModel';global.tab.DataSchemaModel=bG;var bH=function(e){this.$i=null;this.$g=null;this.$k=null;this.$o=null;this.$m=null;this.$j=null;this.$l=null;this.$h=null;this.$p=null;this.$n=0;db.call(this,e,new ds('$yb'.toString()));this.$i={};this.$j={};this.$g={};this.$h={};this.$k={};this.$l={};this.$o={};this.$p={};this.$m=[]};bH.__typeName='tab.DataSourceModel';bH.splitGlobalFieldName=function(e){return bH.$1(e).split('].[')};bH.$0=function(e,gc){for(var gd=0;gd<e.length;gd++){var ge=e[gd];if(ss.referenceEquals(ge.get_localName(),gc)&&gd<e.length-1){return _.last(e,e.length-gd-1)}}return null};bH.$1=function(e){var gc=e;if(gc.length>=2&&gc.charCodeAt(0)===91&&gc.charCodeAt(gc.length-1)===93){return gc.substr(1,gc.length-2)}return gc};global.tab.DataSourceModel=bH;var bI=function(e,gc){this.$5=null;this.$6=null;this.$5=e;this.$6=gc};bI.__typeName='tab.DefaultSessionErrorHandler';global.tab.DefaultSessionErrorHandler=bI;var bJ=function(){this.$1=false;this.$0=false};bJ.__typeName='tab.DeferLayoutImpl';bJ.get_instance=function(){if(ss.isNullOrUndefined(bJ.$0)){bJ.$0=new bJ}return bJ.$0};global.tab.DeferLayoutImpl=bJ;var bK=function(e){this.$1=null;this.$2=tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad');this.$1=e};bK.__typeName='tab.DeferredConnectionsCommandHandler';bK.shouldHandleWithGivenStatus=function(e){switch(e){case 401:case 503:case 500:{return true}default:{return false}}};bK.$0=function(e){var gc={};gc['exception']='DataSourceException';gc['name']=e.Fnn;gc['message']=e.zRk;gc['type']=e.ppl;gc['authoring']=tsConfig.is_authoring;gc['attributes']=e.uEl;var gd=ss.formatString('{0}/{1}/embeddedVizAuthentication.html?',tab.BrowserSupport.getOrigin(document.location),tsConfig.language);gd=ss.formatString('{0}path={1}',gd,encodeURIComponent(tsConfig.requestURI));gd=ss.formatString('{0}&attributes={1}',gd,encodeURIComponent(JSON.stringify(gc)));return gd};bK.$1=function(e){e=e.toLowerCase();var gc=ss.equalsT('badpassword',e)||ss.equalsT('badoauthcredentials',e)||ss.equalsT('NoAssociatedCustomOAuthKey'.toLowerCase(),e);return gc};global.tab.DeferredConnectionsCommandHandler=bK;var bL=function(){this.$0=tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad')};bL.__typeName='tab.DeferredConnectionsSessionErrorHandler';global.tab.DeferredConnectionsSessionErrorHandler=bL;var bM=function(e){this.$4=null;this.$6=null;this.$5=null;this.$2$1=null;db.call(this,e,new ds('N_b'.toString()));this.$6=new n(this);this.$5=new o(this.$6)};bM.__typeName='tab.DeviceLayoutInfoItemModel';global.tab.DeviceLayoutInfoItemModel=bM;var bN=function(e){this.$3$1=null;fx.call(this,e,new ds('_fE'.toString()))};bN.__typeName='tab.DifferenceTableCalcModel';global.tab.DifferenceTableCalcModel=bN;var bO=function(){this.back=null;this.forward=null};bO.__typeName='tab.DojoCurrentState';bO.setInitialState=function(e){var gc=function(){};var gd={back:e,forward:gc};dojo.back.setInitialState(gd)};bO.addToHistory=function(e){dojo.back.addToHistory(e)};global.tab.DojoCurrentState=bO;var bP=function(e){this.$3=null;cd.call(this,e)};bP.__typeName='tab.DrillPathModel';global.tab.DrillPathModel=bP;var bQ=function(){ss.makeGenericType(A,[Object,bR]).call(this)};bQ.__typeName='tab.DropReferenceLineOnFilterShelfCmd';global.tab.DropReferenceLineOnFilterShelfCmd=bQ;var bR=function(e){this.$c=null;this.$c=e};bR.__typeName='tab.DropReferenceLineOnFilterShelfCmd$Response';global.tab.DropReferenceLineOnFilterShelfCmd$Response=bR;var bS=function(){ss.makeGenericType(A,[Object,bT]).call(this)};bS.__typeName='tab.DropReferenceLineOnSchemaViewerCmd';global.tab.DropReferenceLineOnSchemaViewerCmd=bS;var bT=function(e){this.$c=null;this.$c=e};bT.__typeName='tab.DropReferenceLineOnSchemaViewerCmd$Response';global.tab.DropReferenceLineOnSchemaViewerCmd$Response=bT;var bU=function(){ss.makeGenericType(A,[Object,bV]).call(this)};bU.__typeName='tab.DropReferenceLineOnShelfCmd';global.tab.DropReferenceLineOnShelfCmd=bU;var bV=function(e){this.$c=null;this.$c=e};bV.__typeName='tab.DropReferenceLineOnShelfCmd$Response';global.tab.DropReferenceLineOnShelfCmd$Response=bV;var bW=function(e){this.$0=null;this.$0=e.slice(0)};bW.__typeName='tab.ErrorHandlerChain';global.tab.ErrorHandlerChain=bW;var bX=function(){};bX.__typeName='tab.EventMap';global.tab.EventMap=bX;var bY=function(){};bY.__typeName='tab.EventName';global.tab.EventName=bY;var bZ=function(){};bZ.__typeName='tab.ExportServerCommands';bZ.exportImage=function(e,gc,gd,ge,gf){var gg=new Object;gg.commandNamespace='tabsrv'.toString();gg.commandName='png-export-server'.toString();gg.commandParams={};if(ss.isValue(e)){gg.commandParams['Gge']=e}gg.commandParams['hVl']=gc;gg.commandParams['PUt']=tab.JsonUtil.toJson(ge);var gh=gf.length;var gi=new Array(gh);for(var gj=0;gj<gh;gj++){var gk={};gk.thj=ss.round(gf[gj].x);gk.RAC=ss.round(gf[gj].y);gi[gj]=gk}gg.commandParams['Pzc']=tab.JsonUtil.toJson(gi);dU.executeServerCommand(gg,'immediately',function(gl){var gm=gl;var gn=ba.get().get_legacySession();gn.openDownload(gn.formatSessionTempfileReference(gm.uvn,true,true),gd)},null)};global.tab.ExportServerCommands=bZ;var ca=function(){};ca.__typeName='tab.FailureHandler';ca.reportFailures=function(){if(tab.ErrorTrace.hasTraces()){var e=tab.ErrorTrace.dequeueTraces();var gc={};var gd=e[0].url;var ge=e[0].userAgent;var gf=0;for(var gg=0;gg<e.length;gg++){var gh=e[gg];gc['Error #'+gf.toString()]=ca.postContentForStackTrace(gh);gf++}ba.get().get_legacySession().$7(gd,ge,gc)}};ca.postContentForStackTrace=function(e){var gc=new ss.StringBuilder;gc.appendLine('name: '+e.name);gc.appendLine('message: '+e.message);gc.appendLine('error-mode: '+e.traceMode.toString());if(ss.isValue(e.locations)){gc.appendLine('stack:');for(var gd=0;gd<e.locations.length;gd++){var ge=e.locations[gd];if(ss.isNullOrUndefined(ge.url)&&ss.isNullOrUndefined(ge.lineNo)&&ss.isNullOrUndefined(ge.functionName)){continue}gc.appendLine(ge.url+':'+ge.lineNo+' '+ge.functionName);if(ss.isValue(ge.context)&&ge.context.length>0){for(var gf=0;gf<ge.context.length;gf++){var gg=ge.context[gf];var gh=gg;if(gg.length>120){if(ss.isValue(ge.functionName)&&gg.indexOf(ge.functionName)>0){var gi=gg.indexOf(ge.functionName);var gj=Math.max(0,gi-60);var gk=Math.min(gj+120,gg.length-1);gh=gg.substring(gj,gk)}else{gh=gg.substr(0,120)}}gc.append('    '+gh)}}}}return gc.toString()};ca.dispose=function(){ca.reportFailures();window.clearInterval(ca.$2);ca.$2=-1};global.tab.FailureHandler=ca;var cb=function(e){this.fieldCol=null;cd.call(this,e)};cb.__typeName='tab.FieldColumnModel';global.tab.FieldColumnModel=cb;var cc=function(){};cc.__typeName='tab.FieldInstanceType';global.tab.FieldInstanceType=cc;var cd=function(e){db.call(this,e,new ds('Dkx'.toString()))};cd.__typeName='tab.FieldModel';global.tab.FieldModel=cd;var ce=function(){};ce.__typeName='tab.FilterClientCommands';ce.setQuantitativeFilterRange=function(e,gc,gd,ge,gf){var gg=new Object;gg.commandNamespace='tabdoc'.toString();gg.commandName='range-filter'.toString();gg.commandParams={};bk.addVisualIdToCommand(gg.commandParams,e);gg.commandParams['lYz']=gc;if(ss.isValue(gd)){gg.commandParams['wuE']=gd.toString()}if(ss.isValue(ge)){gg.commandParams['UrU']=ge.toString()}gg.commandParams['$mT']=gf.toString();dU.executeServerCommand(gg,'immediately')};ce.setCategoricalFilterValues=function(e,gc,gd,ge,gf){var gg=new Object;gg.commandNamespace='tabdoc'.toString();gg.commandName='categorical-filter'.toString();gg.commandParams={};bk.addVisualIdToCommand(gg.commandParams,e);gg.commandParams['lYz']=gc;gg.commandParams['CCe']=tab.JsonUtil.toJson(ge||[]);gg.commandParams['Txq']=gd.toString();gg.commandParams['jAj']=gf;dU.executeServerCommand(gg,'immediately')};ce.setCategoricalFilterValuesByIndex=function(e,gc,gd,ge){if(!ss.isValue(gd)){gd='filter-replace'}if(!ss.isValue(ge)){ge=[]}var gf=new Object;gf.commandNamespace='tabdoc'.toString();gf.commandName='categorical-filter-by-index'.toString();gf.commandParams={};bk.addVisualIdToCommand(gf.commandParams,e);gf.commandParams['lYz']=gc;gf.commandParams['UGd']=tab.JsonUtil.toJson(ge);gf.commandParams['Txq']=gd.toString();dU.executeServerCommand(gf,'immediately')};ce.modifyCategoricalFilterValues=function(e,gc,gd,ge,gf){if((!ss.isValue(gd)||gd.length===0)&&(!ss.isValue(ge)||ge.length===0)){return}var gg=new Object;gg.commandNamespace='tabdoc'.toString();gg.commandName='categorical-filter'.toString();gg.commandParams={};bk.addVisualIdToCommand(gg.commandParams,e);gg.commandParams['lYz']=gc;if(ss.isValue(gd)&&gd.length>0){gg.commandParams['eob']=tab.JsonUtil.toJson(gd)}if(ss.isValue(ge)&&ge.length>0){gg.commandParams['BkY']=tab.JsonUtil.toJson(ge)}gg.commandParams['Txq']='filter-delta'.toString();if(gf){gg.commandParams['AQ$']='filter-update-custom-domain'.toString()}dU.executeServerCommand(gg,'immediately')};ce.modifyCategoricalFilterValuesByIndex=function(e,gc,gd,ge){if((!ss.isValue(gd)||gd.length===0)&&(!ss.isValue(ge)||ge.length===0)){return}var gf=new Object;gf.commandNamespace='tabdoc'.toString();gf.commandName='categorical-filter-by-index'.toString();gf.commandParams={};bk.addVisualIdToCommand(gf.commandParams,e);gf.commandParams['lYz']=gc;if(ss.isValue(gd)){gf.commandParams['Vjd']=tab.JsonUtil.toJson(gd)}if(ss.isValue(ge)){gf.commandParams['ob_']=tab.JsonUtil.toJson(ge)}gf.commandParams['Txq']='filter-delta'.toString();dU.executeServerCommand(gf,'immediately')};ce.setCategoricalQuickFilterMode=function(e,gc,gd){var ge=new Object;ge.commandNamespace='tabdoc'.toString();ge.commandName='categorical-quick-filter-mode'.toString();ge.commandParams={};bk.addVisualIdToCommand(ge.commandParams,e);ge.commandParams['etp']=gd.toString();ge.commandParams['HBp']=gc;dU.executeServerCommand(ge,'immediately')};ce.setCategoricalQuickFilterDomain=function(e,gc,gd){var ge=new Object;ge.commandNamespace='tabdoc'.toString();ge.commandName='domain-quick-filter'.toString();ge.commandParams={};bk.addVisualIdToCommand(ge.commandParams,e);ge.commandParams['tWP']=gd.toString();ge.commandParams['HBp']=gc;dU.executeServerCommand(ge,'immediately')};ce.setPatternFilterState=function(e,gc,gd){var ge=new Object;ge.commandNamespace='tabdoc'.toString();ge.commandName='categorical-quick-filter-pattern'.toString();ge.commandParams={};bk.addVisualIdToCommand(ge.commandParams,e);ge.commandParams['QZc']=gd.toString();ge.commandParams['HBp']=gc;dU.executeServerCommand(ge,'immediately')};ce.addManualFilterItems=function(e,gc,gd){var ge={};var gf={};gf.Lox=0;gf.dMo='';ge.tbM='cstring';ge.KSc=gf;var gg=gd['tuples'];var gh=[];for(var gi=0;gi<gg.length;gi++){var gj=gg[gi];gh.push(gj['d'])}ge.uBu=gh;var gk=new Object;gk.commandNamespace='tabdoc'.toString();gk.commandName='add-manual-items-to-filter'.toString();gk.commandParams={};bk.addVisualIdToCommand(gk.commandParams,e);gk.commandParams['xaM']=tab.JsonUtil.toJson(ge);gk.commandParams['HBp']=gc;dU.executeServerCommand(gk,'immediately')};ce.levelDrill=function(e,gc,gd,ge){var gf=new Object;gf.commandNamespace='tabdoc'.toString();gf.commandName='level-drill'.toString();gf.commandParams={};bk.addVisualIdToCommand(gf.commandParams,e);gf.commandParams['LIP']=ge.toString();gf.commandParams['Ene']=gd.toString();gf.commandParams['rsY']=gc.toString();dU.executeServerCommand(gf,'immediately')};ce.updateCategoricalFilter=function(e){if(!z.get_instance().get_isLocalRenderMode()){return}var gc=function(){return true};var gd=function(ge,gf){var gg=fJ.lookupAlias(gf,ge,z.get_instance().get_dataDictionary(),false);return!e.includesValue(gg)};ce.$5(e.get_filterField(),e.get_targetSheets(),gc,gd,true)};ce.updateQuantitativeFilter=function(e){if(!z.get_instance().get_isLocalRenderMode()){return}var gc=function(){var ge=!ss.isValue(e.get_currentMinVal())||ss.isValue(e.get_previousMinVal())&&tab.DoubleUtil.isGreaterThanOrApproximatelyEqual(ss.unbox(e.get_currentMinVal()),ss.unbox(e.get_previousMinVal()));var gf=!ss.isValue(e.get_currentMaxVal())||ss.isValue(e.get_previousMaxVal())&&tab.DoubleUtil.isLessThanOrApproximatelyEqual(ss.unbox(e.get_currentMaxVal()),ss.unbox(e.get_previousMaxVal()));return ge&&gf};var gd=function(ge,gf){var gg=fJ.lookupRawDataValue(gf,ge,z.get_instance().get_dataDictionary());if(ss.isNullOrUndefined(gg)||gg==='%null%'){return false}if(ge.get_dataType()==='date'||ge.get_dataType()==='datetime'){var gh=tab.DateUtil.parsePresModelDate(gg);return!e.valueInRange(tab.DateUtil.dateTimeAsOleDate(gh))}else{return!e.valueInRange(parseFloat(gg))}};ce.$5(e.get_filterField(),e.get_targetSheets(),gc,gd,false)};ce.applyFilter=function(e,gc,gd){var ge=e.get_vizDataModel();var gf=ge.getVizDataField(gc);var gg=[];ge.forEachTupleId(function(gh){if(gd(gf,gh)){gg.push(gh)}return true});return gg};ce.doRelativeDateQuickFilter=function(e,gc,gd,ge,gf){var gg=new Object;gg.commandNamespace='tabdoc'.toString();gg.commandName='relative-date-filter'.toString();gg.commandParams=ce.createDoRelativeDateQuickFilterParams(e,gc,gd,ge,gf);dU.executeServerCommand(gg,'immediately')};ce.doLevelHierarchialFilter=function(e,gc,gd,ge,gf){var gg=new Object;gg.commandNamespace='tabdoc'.toString();gg.commandName='hierarchical-filter'.toString();gg.commandParams=ce.$2(e,gc,gd,ge,gf);dU.executeServerCommand(gg,'immediately')};ce.doMemberHierarchialFilter=function(e,gc,gd,ge,gf){var gg=new Object;gg.commandNamespace='tabdoc'.toString();gg.commandName='hierarchical-filter'.toString();gg.commandParams=ce.$3(e,gc,gd,ge,gf);dU.executeServerCommand(gg,'immediately')};ce.doRangeHierarchialFilter=function(e,gc,gd,ge,gf){var gg=new Object;gg.commandNamespace='tabdoc'.toString();gg.commandName='hierarchical-filter'.toString();gg.commandParams=ce.$4(e,gc,gd,ge,gf);dU.executeServerCommand(gg,'immediately')};ce.resetQuantitativeFilter=function(e,gc){for(var gd=0;gd<gc.length;gd++){var ge=gc[gd];var gf=de.getVisualModel(z.get_instance(),ge);if(ss.isNullOrUndefined(gf)){continue}if(ce.$0(e,ge)){var gg=[];gf.setFilteredTuples(e,gg);gf.setHiddenTuples(e,gg)}fH.validateVisualModel(gf)}};ce.createDoRelativeDateQuickFilterParams=function(e,gc,gd,ge,gf,gg,gh){var gi={};bk.addVisualIdToCommand(gi,e);gi['lYz']=gc;gi['JAO']=gd;gi['woa']=ge;if(ge==='lastn'||ge==='nextn'){gi['lZR']=gf}if(ss.isValue(gg)){gi['wNn']=gg}if(ss.isValue(gh)){gi['$mT']=gh}return gi};ce.$2=function(e,gc,gd,ge,gf){var gg={};bk.addVisualIdToCommand(gg,e);var gh={};gh['Wzq']=gd;gh['Gzj']=ge;gg['lYz']=gc;gg['LG_']=gh;gg['Txq']=gf;return gg};ce.$3=function(e,gc,gd,ge,gf){var gg={};bk.addVisualIdToCommand(gg,e);var gh={};gh['eob']=gd;gh['BkY']=ge;gg['lYz']=gc;gg['LG_']=gh;gg['Txq']=gf;return gg};ce.$4=function(e,gc,gd,ge,gf){var gg={};bk.addVisualIdToCommand(gg,e);var gh={};gh['Ni$']=gd;gh['yeE']=ge;gg['lYz']=gc;gg['LG_']=gh;gg['Txq']=gf;return gg};ce.$0=function(e,gc){var gd=de.getVisualModel(z.get_instance(),gc);return ce.$1(gd,e)};ce.$1=function(e,gc){if(ss.isValue(e)){return e.get_shouldUpdate()&&e.hasFilterFieldData(gc)}return false};ce.$5=function(e,gc,gd,ge,gf){var gg=new m(function(gh){for(var gi=0;gi<gc.length;gi++){var gj=gc[gi];var gk=de.getVisualModel(z.get_instance(),gj);if(ss.isNullOrUndefined(gk)){continue}var gl=ce.$1(gk,e);if(!gl||!gd()||ss.isNullOrUndefined(gk.get_vizDataModel().getVizDataField(e))){if(!gf){de.setVisualValidStateOnModel(gh,gk,false)}}else{var gm=[];gm=ce.applyFilter(gk,e,ge);gk.setFilteredTuples(e,gm);if(!gf){gk.setHiddenTuples(e,gm)}de.setVisualValidStateOnModel(gh,gk,true)}}});gg.set_commandName((gf?'categorical-filter'.toString():'range-filter'.toString()));ba.SendCommand(gg)};global.tab.FilterClientCommands=ce;var cf=function(e){this.$3=null;this.$2$1=null;db.call(this,e,new ds('XIo'.toString()));this.$3=new eu(this)};cf.__typeName='tab.FlipboardModel';global.tab.FlipboardModel=cf;var cg=function(e){this.$2$1=null;db.call(this,e,new ds('lRq'.toString()))};cg.__typeName='tab.FlipboardNavigatorModel';global.tab.FlipboardNavigatorModel=cg;var ch=function(){};ch.__typeName='tab.FloatingToolbarClientCommands';ch.setDefaultMapToolSelectionCommand=function(e){var gc=bk.newDocCommand('default-map-tool-selection');gc.commandParams={};gc.commandParams['DpY']=e;ba.SendCommand(new d(gc,'immediately',null,null))};global.tab.FloatingToolbarClientCommands=ch;var ci=function(e){this.$3=null;cd.call(this,e)};ci.__typeName='tab.FolderModel';global.tab.FolderModel=ci;var cj=function(){this.$1$1=null;this.$1$2=null};cj.__typeName='tab.FontFamily';cj.$ctor1=function(e,gc){this.$1$1=null;this.$1$2=null;this.set_fontGroup(e);this.set_fonts(gc)};global.tab.FontFamily=cj;var ck=function(e){this.$5=null;this.$3$1=null;cm.call(this,e)};ck.__typeName='tab.FormatContainerModel';global.tab.FormatContainerModel=ck;var cl=function(e){cm.call(this,e)};cl.__typeName='tab.FormatControlModel';global.tab.FormatControlModel=cl;var cm=function(e){this.$2$1=null;db.call(this,e,new ds('Bbu'.toString()))};cm.__typeName='tab.FormatItemModel';cm.createModel=function(e,gc){switch(gc.XHt){case'formatContainer':{var gd=new ck(e);gd.update(gc);return gd}case'formatControl':{var ge=new cl(e);ge.update(gc);return ge}default:{return null}}};global.tab.FormatItemModel=cm;var cn=function(){ss.makeGenericType(A,[Object,co]).call(this)};cn.__typeName='tab.GetDashboardDragDropCmd';global.tab.GetDashboardDragDropCmd=cn;var co=function(e){this.$c=null;this.$c=e};co.__typeName='tab.GetDashboardDragDropCmd$Response';global.tab.GetDashboardDragDropCmd$Response=co;var cp=function(){ss.makeGenericType(A,[Object,cq]).call(this)};cp.__typeName='tab.GetDragPresModelCmd';global.tab.GetDragPresModelCmd=cp;var cq=function(e){this.$c=null;this.$c=e};cq.__typeName='tab.GetDragPresModelCmd$Response';global.tab.GetDragPresModelCmd$Response=cq;var cr=function(){ss.makeGenericType(A,[Object,cs]).call(this)};cr.__typeName='tab.GetRefLineDragInfoCmd';global.tab.GetRefLineDragInfoCmd=cr;var cs=function(e){this.$c=null;this.$c=e};cs.__typeName='tab.GetRefLineDragInfoCmd$Response';global.tab.GetRefLineDragInfoCmd$Response=cs;var ct=function(){ss.makeGenericType(A,[Object,cu]).call(this)};ct.__typeName='tab.GetRefLineFormulaCmd';global.tab.GetRefLineFormulaCmd=ct;var cu=function(e){this.$c=null;this.$c=e};cu.__typeName='tab.GetRefLineFormulaCmd$Response';global.tab.GetRefLineFormulaCmd$Response=cu;var cv=function(e){cb.call(this,e)};cv.__typeName='tab.GroupModel';global.tab.GroupModel=cv;var cw=function(){ss.makeGenericType(A,[Object,cx]).call(this)};cw.__typeName='tab.HideZoneCmd';global.tab.HideZoneCmd=cw;var cx=function(e){this.$c=null;this.$c=e};cx.__typeName='tab.HideZoneCmd$Response';global.tab.HideZoneCmd$Response=cx;var cy=function(){ss.makeGenericType(A,[Object,cz]).call(this)};cy.__typeName='tab.HighlightItemsByPatternMatchCmd';global.tab.HighlightItemsByPatternMatchCmd=cy;var cz=function(e){this.$c=null;this.$c=e};cz.__typeName='tab.HighlightItemsByPatternMatchCmd$Response';global.tab.HighlightItemsByPatternMatchCmd$Response=cz;var cA=function(){ss.makeGenericType(A,[Object,cB]).call(this)};cA.__typeName='tab.HighlightItemsCmd';global.tab.HighlightItemsCmd=cA;var cB=function(e){this.$c=null;this.$c=e};cB.__typeName='tab.HighlightItemsCmd$Response';global.tab.HighlightItemsCmd$Response=cB;var cC=function(){ss.makeGenericType(A,[Object,cD]).call(this)};cC.__typeName='tab.HitTestSceneCmd';global.tab.HitTestSceneCmd=cC;var cD=function(e){this.$c=null;this.$c=e};cD.__typeName='tab.HitTestSceneCmd$Response';global.tab.HitTestSceneCmd$Response=cD;var cE=function(){};cE.__typeName='tab.HTMLEscape';global.tab.HTMLEscape=cE;var cF=function(){};cF.__typeName='tab.IContinuousRangeModel';global.tab.IContinuousRangeModel=cF;var cG=function(){};cG.__typeName='tab.IExportImageHelper';global.tab.IExportImageHelper=cG;var cH=function(){};cH.__typeName='tab.IExportPdfHelper';global.tab.IExportPdfHelper=cH;var cI=function(e){this.$3=null;this.$2$1=null;db.call(this,e,new ds('wBL'.toString()));this.$3=e.get_zone()};cI.__typeName='tab.ImageZoneModel';global.tab.ImageZoneModel=cI;var cJ=function(){this.primarySheet=null;this.suppressActivation=null;this.layoutStatus=null;this.cmdResult=null};cJ.__typeName='tab.InvalidationInfo';global.tab.InvalidationInfo=cJ;var cK=function(){};cK.__typeName='tab.IRemoteCommandHandler';global.tab.IRemoteCommandHandler=cK;var cL=function(){};cL.__typeName='tab.ISessionErrorHandler';global.tab.ISessionErrorHandler=cL;var cM=function(e,gc){this.$3=null;this.$2$1=null;db.call(this,e,new ds('layer-encoding['+gc+']'));this.$3=new da(this)};cM.__typeName='tab.LayerEncodingModel';global.tab.LayerEncodingModel=cM;var cN=function(e,gc,gd){this.layoutid=null;B.call(this,e,gd);this.layoutid=gc};cN.__typeName='tab.LayoutSession';global.tab.LayoutSession=cN;var cO=function(e,gc,gd,ge){this.$3=null;this.$0=null;this.$4=null;this.$1=false;this.$2=false;this.$3=e;this.$0=gc;this.$2=gd;if(ss.isValue(ge)){this.$4=ge}else{this.$4=[]}};cO.__typeName='tab.LegacyCategoricalQuickFilterData';global.tab.LegacyCategoricalQuickFilterData=cO;var cP=function(e,gc){cQ.call(this,e,gc)};cP.__typeName='tab.LegacyCategoricalQuickFilterModel';global.tab.LegacyCategoricalQuickFilterModel=cP;var cQ=function(e,gc){this.$2$1=null;db.call(this,e,new ds('filter['+gc.name.join('_')+']'));this.pm=gc};cQ.__typeName='tab.LegacyFilterModel';cQ.$1=function(e){if(ss.isValue(e)){var gc={t:e.t,v:e.v};tableau.format.isDateTimeWithNonMidnightTime(gc)}return false};cQ.isQuantitativeTimestampFilter=function(e,gc,gd){var ge=cQ.$1(gc)||cQ.$1(gd);if(!ge&&ss.isValue(e)){if(ss.isValue(e.data)){ge=ge||cQ.$1(e.data.min)||cQ.$1(e.data.max)}if(!ge&&ss.isValue(e.range)){ge=ge||cQ.$1(e.range.min)||cQ.$1(e.range.max)}}return ge};cQ.$0=function(e){return e.t==='t'||e.t==='d'};cQ.isQuantitativeDateFilter=function(e,gc,gd){if(ss.isValue(gc)){return cQ.$0(gc)}else if(ss.isValue(gd)){return cQ.$0(gd)}else if(ss.isValue(e)){if(ss.isValue(e.data)){if(ss.isValue(e.data.min)){return cQ.$0(e.data.min)}else if(ss.isValue(e.data.max)){return cQ.$0(e.data.max)}}if(ss.isValue(e.range)){if(ss.isValue(e.range.min)){return cQ.$0(e.range.min)}else if(ss.isValue(e.range.max)){return cQ.$0(e.range.max)}}}return false};cQ.isNormalValue=function(e){return ss.isValue(e)&&(ss.isNullOrUndefined(e.s)||ss.isNullOrUndefined(e.s))&&ss.isValue(e.v)};cQ.timestampsWithSameDateOrNull=function(e){var gc=null;for(var gd=0;gd<e.length;gd++){var ge=e[gd];if(ss.isNullOrUndefined(ge)||ge.s==='n'||ss.isNullOrUndefined(ge.v)&&ge.t==='t'){continue}if(!cQ.isNormalValue(ge)||ge.t!=='t'){return false}var gf=(ss.Nullable$1.ge(ge.v,0)?Math.floor(ge.v):Math.ceil(ge.v));if(ss.isValue(gc)&&gf!==gc){return false}gc=gf}return ss.isValue(gc)};global.tab.LegacyFilterModel=cQ;var cR=function(e,gc){cQ.call(this,e,gc)};cR.__typeName='tab.LegacyHierarchicalQuickFilterModel';global.tab.LegacyHierarchicalQuickFilterModel=cR;var cS=function(e){this.$2$1=null;db.call(this,e,new ds('KmA'.toString()))};cS.__typeName='tab.LegacyLegendModel';global.tab.LegacyLegendModel=cS;var cT=function(e,gc){cQ.call(this,e,gc)};cT.__typeName='tab.LegacyQuantitativeQuickFilterModel';global.tab.LegacyQuantitativeQuickFilterModel=cT;var cU=function(e){this.$4=null;this.$6=null;this.$5=null;this.$2$1=null;db.call(this,e,new ds('quickFilterDisplay'))};cU.__typeName='tab.LegacyQuickFilterDisplayModel';global.tab.LegacyQuickFilterDisplayModel=cU;var cV=function(e,gc){cQ.call(this,e,gc)};cV.__typeName='tab.LegacyRelativeDateQuickFilterModel';global.tab.LegacyRelativeDateQuickFilterModel=cV;var cW=function(e,gc){this.$1=0;this.$0=0;dB.call(this);if(e<=gc){this.$1=e;this.$0=gc}else{this.$1=gc;this.$0=e}};cW.__typeName='tab.LinearRangeTransform';global.tab.LinearRangeTransform=cW;var cX=function(e,gc,gd,ge){this.$1=null;this.$0=null;this.$3=null;this.$2=false;this.$1=e;this.$0=gc;this.$3=gd;this.$2=ge};cX.__typeName='tab.LocalUbertipInfo';global.tab.LocalUbertipInfo=cX;var cY=function(e){this.$4=null;this.$2$1=null;db.call(this,e,new ds('RFX'.toString()));this.$4=new dA(this)};cY.__typeName='tab.MapServerModel';global.tab.MapServerModel=cY;var cZ=function(e){this.$5=[];this.$4=null;this.$2$1=null;db.call(this,e,new ds('Inn'.toString()))};cZ.__typeName='tab.MarksCardModel';global.tab.MarksCardModel=cZ;var da=function(e){this.$4=null;this.$5=null;this.$2$1=null;db.call(this,e,new ds('DOI'.toString()));this.$4=e};da.__typeName='tab.MarkSizeModel';global.tab.MarkSizeModel=da;var db=function(e,gc){this.pm=null;this.$1=null;this.$2=null;this.$1=e;this.$2=gc};db.__typeName='tab.Model';db.fireDeferredEvents=function(gc,gd){var ge=db.$0;db.$0=null;if(ss.isValue(ge)){for(var gf=0;gf<ge.length;gf++){var gg=ge[gf];try{gg()}catch(gh){var e=ss.Exception.wrap(gh);if(ss.isValue(gc)){gc(e,gd)}}}}if(ss.isValue(db.$1)){window.clearTimeout(ss.unbox(db.$1));db.$1=null}};db.clearDeferredEvents=function(){db.$0=null};global.tab.Model=db;var dc=function(e){var gc=function(){this.$0=null;this.$1$1=null;this.$1$2=null;this.$1$3=null};ss.registerGenericClassInstance(gc,dc,[e],{$1:function(gd){this.$1$1=ss.delegateCombine(this.$1$1,gd)},$2:function(gd){this.$1$1=ss.delegateRemove(this.$1$1,gd)},$5:function(gd){this.$1$2=ss.delegateCombine(this.$1$2,gd)},$6:function(gd){this.$1$2=ss.delegateRemove(this.$1$2,gd)},$3:function(gd){this.$1$3=ss.delegateCombine(this.$1$3,gd)},$4:function(gd){this.$1$3=ss.delegateRemove(this.$1$3,gd)},get_model:function(){return this.$0},set_model:function(gd){var ge=this.$0;this.$0=gd;if(!ss.referenceEquals(ge,this.$0)){if(ss.isValue(ge)&&!ss.staticEquals(null,this.$1$2)){this.$1$2(ge)}if(ss.isValue(this.$0)&&!ss.staticEquals(null,this.$1$1)){this.$1$1(this.$0)}if(!ss.staticEquals(null,this.$1$3)){this.$1$3()}}},addModelChangedHandler:function(gd){this.$3(gd);if(ss.isValue(this.$0)){gd()}return this},removeModelChangedHandler:function(gd){this.$4(gd)},addEventBinding:function(gd,ge){this.$1(gd);if(ss.isValue(this.$0)){gd(this.$0)}this.$5(ge);return this},removeEventBinding:function(gd,ge){this.$2(gd);this.$6(ge);if(!ss.staticEquals(null,ge)&&ss.isValue(this.$0)){ge(this.$0)}},dispose:function(){this.set_model(null);this.$1$1=null;this.$1$2=null;this.$1$3=null},newDisposableContext:function(){return new(ss.makeGenericType(dd,[e]))(this)}},function(){return null},function(){return[ss.IDisposable]});return gc};dc.__typeName='tab.ModelHolder$1';ss.initGenericClass(dc,a,1);global.tab.ModelHolder$1=dc;var dd=function(e){var gc=function(gd){this.$0=null;this.$1=null;this.$0=new tab.DisposableHolder;this.$1=gd};ss.registerGenericClassInstance(gc,dd,[e],{addModelChangedHandler:function(gd){this.$1.addModelChangedHandler(gd);this.$0.add(ss.mkdel(this,function(){this.$1.removeModelChangedHandler(gd)}));return this},addEventBinding:function(gd,ge){this.$1.addEventBinding(gd,ge);this.$0.add(ss.mkdel(this,function(){this.$1.removeEventBinding(gd,ge)}));return this},dispose:function(){this.$0.dispose()}},function(){return null},function(){return[ss.IDisposable]});return gc};dd.__typeName='tab.ModelHolderContext$1';ss.initGenericClass(dd,a,1);global.tab.ModelHolderContext$1=dd;var de=function(){};de.__typeName='tab.ModelUtils';de.getViewSession=function(e){return de.findContentDashboard().getViewSession(e)};de.getVizCategoricalLegends=function(e){var gc=[];var gd=de.findContentDashboard();if(ss.isValue(gd)){var ge=gd.get_zoneModels();for(var gf=0;gf<ge.length;gf++){var gg=ge[gf];if(ss.isInstanceOfType(gg.get_model(),O)&&ss.referenceEquals(gg.get_worksheetName(),e.get_worksheetName())){gc.push(gg.get_model())}}}return gc};de.getVisualModels=function(e){var gc=de.findContentDashboard(e);return de.getVisualModelsFromDashboard(gc)};de.getVisualModelsFromDashboard=function(e){var gc={};if(ss.isNullOrUndefined(e)){return gc}var gd=e.get_zoneModels();for(var ge=0;ge<gd.length;ge++){var gf=gd[ge];var gg=gf.get_visualModel();if(ss.isValue(gg)){gc[gf.get_worksheetName()]=gg}}if(du.get_progressiveLoadEnabled()){var gh=(ba.get_hasInstance()?ba.get():null);if(ss.isValue(gh)&&ss.isValue(gh.get_loader())){var gi=gh.get_loader().getPendingVisuals();var gj=_.keys(gi);for(var gk=0;gk<gj.length;gk++){var gl=gj[gk];gc[gl]=gi[gl]}}}return gc};de.getSheetInfoPresModel=function(e,gc){var gd=e.get_workbook();if(ss.isNullOrUndefined(gd)||ss.isNullOrUndefined(gd.get_sheetsInfo())){return null}var ge=gd.get_sheetsInfo();for(var gf=0;gf<ge.length;gf++){var gg=ge[gf];if(ss.referenceEquals(gg.Gge,gc)){return gg}}return null};de.getVisualModel=function(e,gc){var gd=null;var ge=de.findContentDashboard(e);if(ss.isNullOrUndefined(ge)){return gd}var gf=ge.get_zoneModels();for(var gg=0;gg<gf.length;gg++){var gh=gf[gg];var gi=gh.get_visualModel();if(ss.isValue(gi)){var gj=gh.get_worksheetName();if(ss.referenceEquals(gj,gc)){gd=gi;break}}}if(du.get_progressiveLoadEnabled()&&ss.isNullOrUndefined(gd)){var gk=(ba.get_hasInstance()?ba.get():null);if(ss.isValue(gk)&&ss.isValue(gk.get_loader())){gd=gk.get_loader().getPendingVisual(gc)}}return gd};de.getVisualModelFromVisualId=function(e,gc){if(ss.isNullOrUndefined(gc)){gc=z.get_instance()}var gd=null;var ge=de.findContentDashboard(gc);if(ss.isNullOrUndefined(ge)){return gd}var gf=ge.get_zoneModels();for(var gg=0;gg<gf.length;gg++){var gh=gf[gg];var gi=gh.get_visualModel();if(ss.isValue(gi)){if(_.isEqual(gi.get_visualId(),e)){gd=gi;break}}}return gd};de.getVisualId=function(e){return de.getVisualModel(z.get_instance(),e).get_visualId()};de.getFirstAvailableWebZoneName=function(e){var gc=null;var gd=de.findContentDashboard(e);if(ss.isNullOrUndefined(gd)){return gc}var ge=gd.get_zoneModels();for(var gf=0;gf<ge.length;gf++){var gg=ge[gf];if(gg.get_zoneType()==='web'){var gh=gg.get_zoneId();gc='frame_'+gh.toString();break}}return gc};de.isActiveZone=function(e){switch(tsConfig.current_sheet_type){case'dashboard':case'story':{return e===de.findContentDashboard().get_activeZoneID()}case'worksheet':default:{return true}}};de.getZoneIdForSheetName=function(e){var gc=de.findContentDashboard();var gd=gc.get_zoneModels();for(var ge=0;ge<gd.length;ge++){var gf=gd[ge];if(gf.get_zoneType()==='viz'&&ss.referenceEquals(gf.get_worksheetName(),e)){return gf.get_zoneId()}}return-1};de.hasBorder=function(e){return ss.isValue(e)&&e.ysh!=='bs-none'&&e.s$V!==0};de.createFilterModel=function(e,gc){switch(gc.type){case'Q':{return new cT(e,gc)}case'H':{return new cR(e,gc)}case'C':{return new cP(e,gc)}case'RD':{return new cV(e,gc)}default:{return new cQ(e,gc)}}};de.findMatchingFilterModel=function(e,gc){var gd=gc.get_frame().param;return e.get_filterModels()[gd]};de.setVisualValidStateOnModel=function(e,gc,gd){if(ss.isNullOrUndefined(gc)){return}gc.set_isVisualValid(gd)};de.invalidateVisuals=function(e){if(ss.isNullOrUndefined(e)){return}for(var gc=0;gc<e.length;gc++){var gd=e[gc];var ge=de.getVisualModel(z.get_instance(),gd);if(ss.isValue(ge)){fH.invalidateVisualModel(ge)}}};de.setVisualValidStateOnPresModel=function(e,gc){if(ss.isNullOrUndefined(gc)){return}e.makeMutablePresModel(gc).GiX=false};de.findContentDashboard=function(e){if(ss.isNullOrUndefined(e)){e=z.get_instance()}return e.get_workbook().findContentDashboard()};de.findActiveVisual=function(){var e=de.findContentDashboard();if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_zoneModels())){return null}return e.get_activeVisual()};de.findActiveOrDefaultVisual=function(){var e=de.findContentDashboard();if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_zoneModels())){return null}var gc=e.get_activeVisual();if(ss.isValue(gc)){return gc}var gd=e.get_zoneModels();for(var ge=0;ge<gd.length;ge++){var gf=gd[ge];if(ss.isValue(gf.get_visualModel())){return gf.get_visualModel()}}return null};de.findActivePaneSpecId=function(){var e=de.findActiveOrDefaultVisual();if(ss.isValue(e)&&ss.isValue(e.get_marksCardModel())){return e.get_marksCardModel().get_activePaneSpecId()}return null};de.findShelf=function(e){var gc=de.findActiveOrDefaultVisual();return gc.get_shelves().findShelf(e)};de.hasAnyImpliedSelection=function(){var e=de.getVisualModels(z.get_instance());var gc=new ss.ObjectEnumerator(e);try{while(gc.moveNext()){var gd=gc.current();var ge=gd.value;if(!ge.get_impliedSelectionModel().get_isEmpty()){return true}}}finally{gc.dispose()}return false};global.tab.ModelUtils=de;var df=function(){cd.call(this,null);var e={};e.HBp='';this.swapAndCopyPresModel(e)};df.__typeName='tab.MultipleFieldsModel';global.tab.MultipleFieldsModel=df;var dg=function(e){this.$4=null;this.$3=null;this.$2$1=null;db.call(this,e,new ds('cfW'.toString()));this.$4=e.get_zone()};dg.__typeName='tab.PageModel';global.tab.PageModel=dg;var dh=function(){};dh.__typeName='tab.PageServerCommands';dh.changePage=function(e,gc){var gd=new Object;gd.commandNamespace='tabdoc'.toString();gd.commandName='change-page'.toString();gd.commandParams=dh.$0(e,gc);dU.executeServerCommand(gd,'immediately')};dh.syncedChangePage=function(e,gc,gd){var ge=new Object;ge.commandNamespace='tabsrv'.toString();ge.commandName='synced-change-page-server'.toString();ge.commandParams=dh.$1(e,gc,gd);dU.executeServerCommand(ge,'immediately')};dh.toggleTrails=function(e){var gc=new Object;gc.commandNamespace='tabdoc'.toString();gc.commandName='page-toggle-trails'.toString();gc.commandParams=dh.$2(e);dU.executeServerCommand(gc,'afterDelay')};dh.$0=function(e,gc){var gd={};bk.addVisualIdToCommand(gd,gc);gd['Onw']=e;return gd};dh.$1=function(e,gc,gd){var ge={};bk.addVisualIdToCommand(ge,e);ge['BCp']=gc;ge['Onw']=gd;return ge};dh.$2=function(e){var gc={};bk.addVisualIdToCommand(gc,e);return gc};global.tab.PageServerCommands=dh;var di=function(){};di.__typeName='tab.PaneClientCommands';di.setPanePrimitive=function(e,gc){var gd=bk.newDocCommand('set-primitive');gd.commandParams=di.$0(e);gd.commandParams['WnZ']=gc.toString();ba.SendCommand(new d(gd,'immediately',null,null))};di.getDefaultShapeType=function(e,gc){var gd=bk.newDocCommand('get-default-shape');gd.commandParams=di.$0(e);ba.SendCommand(new d(gd,'none',function(ge){gc((_.isString(ge)?ed.fromString(ge.toString()):null))},function(){gc(null)}))};di.setDefaultShapeType=function(e,gc){var gd=bk.newDocCommand('set-default-shape');gd.commandParams=di.$0(e);gd.commandParams['XRK']=di.$1(gc);ba.SendCommand(new d(gd,'immediately',null,null))};di.toggleMarkLabels=function(e){var gc=bk.newDocCommand('toggle-mark-labels');gc.commandParams={};gc.commandParams['AVP']=tsConfig.current_sheet_name;if(ss.isValue(e)&&e.get_id()>0){gc.commandParams['FsL']=e.get_id().toString()}ba.SendCommand(new d(gc,'immediately',null,null))};di.setMarkSize=function(e,gc){var gd=bk.newDocCommand('set-mark-size');gd.commandParams={};gd.commandParams=di.$0(e);gd.commandParams['_Tb']=gc.toString();ba.SendCommand(new d(gd,'immediately',null,null))};di.resetTooltip=function(e){var gc=bk.newDocCommand('reset-tooltip');gc.commandParams={};gc.commandParams['AVP']=tsConfig.current_sheet_name;if(ss.isValue(e)&&e.get_id()>0){gc.commandParams['FsL']=e.get_id().toString()}ba.SendCommand(new d(gc,'immediately',null,null))};di.getDefaultColor=function(e,gc){var gd=bk.newDocCommand('get-default-color');gd.commandParams=di.$0(e);ba.SendCommand(new d(gd,'none',function(ge){gc((_.isString(ge)?X.fromColorCode(ge.toString()):null))},function(){gc(null)}))};di.setDefaultColor=function(e,gc){var gd=bk.newDocCommand('set-default-color');gd.commandParams=di.$0(e);gd.commandParams['DFg']=gc.toRgba255();ba.SendCommand(new d(gd,'immediately',null,null))};di.setSteppedColor=function(e,gc){var gd=bk.newDocCommand('set-quantitative-color');gd.commandParams=di.$0(e);gd.commandParams['uUG']=gc.toString();ba.SendCommand(new d(gd,'immediately',null,null))};di.reverseColor=function(e,gc){var gd=bk.newDocCommand('set-quantitative-color');gd.commandParams=di.$0(e);gd.commandParams['mss']=gc.toString();ba.SendCommand(new d(gd,'immediately',null,null))};di.setTotalsInEncoding=function(e,gc){var gd=bk.newDocCommand('set-quantitative-color');gd.commandParams=di.$0(e);gd.commandParams['HKv']=gc.toString();ba.SendCommand(new d(gd,'immediately',null,null))};di.setQuantColorPalette=function(e,gc){var gd=bk.newDocCommand('set-quantitative-color');gd.commandParams=di.$0(e);gd.commandParams['gjE']=gc;ba.SendCommand(new d(gd,'immediately',null,null))};di.setCatColorPalette=function(e,gc){var gd=bk.newDocCommand('set-categorical-color');gd.commandParams=di.$0(e);gd.commandParams['gjE']=gc;var ge=true;gd.commandParams['sNb']=ge.toString();ba.SendCommand(new d(gd,'immediately',null,null))};di.setColorAlphaLevel=function(e,gc){if(isNaN(gc)){return}var gd=bk.newDocCommand('change-alpha-level');gd.commandParams=di.$0(e);gd.commandParams['U$I']=gc.toString();ba.SendCommand(new d(gd,'immediately',null,null))};di.boundingBoxPan=function(e,gc){var gd=bk.newDocCommand('bounding-box-pan');var ge={};ge['v_N']=gc;gd.commandParams=ge;if(ss.isValue(e)){bk.addVisualIdToCommand(gd.commandParams,e)}dU.executeServerCommand(gd,'afterDelay',null,null)};di.geographicSearchQuery=function(e,gc,gd,ge,gf){var gg=bk.newDocCommand('geographic-search-query');var gh={};gg.commandParams=gh;gg.commandParams['Ikc']=gc;gg.commandParams['wPK']=gd;gg.commandParams['qgK']=ge.toString();if(ss.isValue(e)){bk.addVisualIdToCommand(gg.commandParams,e)}dU.executeServerCommand(gg,'none',function(gi){gf(gi)},null)};di.setReferenceLineConstantValue=function(e,gc){var gd=bk.newDocCommand('set-reference-line-constant-value');gd.commandParams={};gd.commandParams['is$']=e;gd.commandParams['gFP']=gc;ba.SendCommand(new d(gd,'immediately',null,null))};di.$0=function(e){var gc={};gc['AVP']=tsConfig.current_sheet_name;gc['FsL']=e.get_id().toString();return gc};di.$1=function(e){if(ss.isNullOrUndefined(e)){return null}return e.toString()};global.tab.PaneClientCommands=di;var dj=function(e){this.$0=null;this.update(e)};dj.__typeName='tab.PaneIdModel';dj.$ctor1=function(e,gc,gd){this.$0=null;this.$0={};this.$0['_WI']=e;this.$0['ASo']=gc;if(gd!==0){this.$0['jal']=gd}};global.tab.PaneIdModel=dj;var dk=function(e){this.$3=null;this.$2$1=null;db.call(this,e,new ds('j_S'.toString()))};dk.__typeName='tab.ParameterCtrlModel';global.tab.ParameterCtrlModel=dk;var dl=function(){};dl.__typeName='tab.ParameterServerCommands';dl.setParameterValue=function(e,gc,gd){dl.setParameterValue$1(e,gc,gd,null,null)};dl.setParameterValue$1=function(e,gc,gd,ge,gf){var gg=new Object;gg.commandNamespace='tabdoc'.toString();gg.commandName='set-parameter-value'.toString();gg.commandParams=dl.$0(e,gc,ss.coalesce(gd,false));dU.executeServerCommand(gg,'immediately',ge,gf)};dl.$0=function(e,gc,gd){var ge={};ge['lYz']=e;ge['vau']=gc;ge['DsK']=gd;return ge};global.tab.ParameterServerCommands=dl;var dm=function(e){this.$3$1=null;fx.call(this,e,new ds('oHf'.toString()))};dm.__typeName='tab.PercentTotalTableCalcModel';global.tab.PercentTotalTableCalcModel=dm;var dn=function(){};dn.__typeName='tab.PermissionManager';dn.buildCommandPermission=function(){var e=[];if(tsConfig.allow_filter){e.push(11);e.push(12);e.push(10);e.push(2);e.push(13);e.push(4);e.push(6)}if(tsConfig.allow_select){e.push(1);e.push(9)}if(tsConfig.allow_sheetlink){e.push(8)}if(tsConfig.allow_view_underlying||tsConfig.allow_summary){e.push(7)}if(tsConfig.is_authoring){e.push(15);e.push(17);e.push(18);e.push(19);e.push(20);if(!tsConfig.is_mobile){e.push(21)}if(tab.FeatureFlags.isEnabled('ReferenceLineNonModal')){e.push(22)}}return new be(e)};dn.filterCommands=function(e,gc){for(var gd=e.length-1;gd>=0;gd--){if(!gc.test(e[gd])){ss.removeAt(e,gd)}}};global.tab.PermissionManager=dn;var dp=function(e,gc){this.$3=null;db.call(this,e,new ds(gc.toString()))};dp.__typeName='tab.PillModel';global.tab.PillModel=dp;var dq=function(){};dq.__typeName='tab.PresentationModel';dq.commandResultByName=function(e,gc){var gd=bh.buildQualifiedCommandName(gc.commandNamespace,gc.commandName);var ge=e['kqB'.toString()];var gf=ge.mxu;for(var gg=0;gg<gf.length;gg++){var gh=gf[gg];if(ss.referenceEquals(gh.$iY,gd)){return gh.nCR}}return null};dq.fromCommand=function(e,gc){var gd=dq.commandResultByName(e,gc);if(!gc.preserveRootResult&&ss.isValue(gd)&&ss.getKeyCount(gd)===1){var ge=new ss.ObjectEnumerator(gd);try{while(ge.moveNext()){var gf=ge.current();return gf.value}}finally{ge.dispose()}}else{return gd}return null};dq.ensurePath=function(e,gc,gd){var ge=gc;var gf=e;var gg;var gh;var gi=gd.get_pathList();for(var gj=0,gk=gi.length;gj<gk;gj++){var gl=gi[gj];var gm=gl.name;gg=ge[gm];gh=(ss.isValue(gf)?gf[gm]:null);if(!ss.isValue(gg)){var gn=gj===gk-1;var go=null;if(gl.type===1&&ss.isValue(gh)){var gp=gh;var gq=[];for(var gr=0;gr<gp.length;gr++){gq[gr]=tab.MiscUtil.cloneObject(gp[gr])}go=gq}else if(!gn&&ss.isValue(gh)){go=dq.cloneObjWithScalarsOnly(gh)}else if(tab.FeatureFlags.isEnabled('ProgressiveDashboardLoad')&&gl.type===1){go=[]}else{go=new Object}ge[gm]=go}ge=ge[gm];gf=gh}return ge};dq.insertAtPath=function(e,gc,gd,ge){dq.ensurePath(e,gc,gd);dq.$0(gc,gd,ge)};dq.cloneObjWithScalarsOnly=function(e){if(!_.isObject(e)){return e}var gc=new Object;var gd=e;var ge=ss.getEnumerator(Object.keys(gd));try{while(ge.moveNext()){var gf=ge.current();var gg=gd[gf];if(!_.isObject(gg)){gc[gf]=gg}}}finally{ge.dispose()}return gc};dq.$0=function(e,gc,gd){if(gc.get_pathList().length===0){var ge=gd;var gf=new ss.ObjectEnumerator(ge);try{while(gf.moveNext()){var gg=gf.current();e[gg.key]=gg.value}}finally{gf.dispose()}}else{var gh,gi;var gj=e;var gk=gc.get_pathList();for(gh=0,gi=gk.length;gh<gi-1;gh++){gj=gj[gk[gh].name]}gj[gk[gi-1].name]=gd}};global.tab.PresentationModel=dq;var dr=function(){this.$0=[]};dr.__typeName='tab.PresModelPath';global.tab.PresModelPath=dr;var ds=function(e,gc){this.name=null;this.type=0;this.name=e;this.type=(ss.isValue(gc)?gc:0)};ds.__typeName='tab.PresModelPathItem';global.tab.PresModelPathItem=ds;var dt=function(){};dt.__typeName='tab.PresModelPathItemType';global.tab.PresModelPathItemType=dt;var du=function(){this.$j=null;this.$o=null;this.$l=null;this.$n=null;this.$k=null;this.$i=false;this.$p=null;this.$m=null;this.$h=false;this.$1$1=null;this.$1$2=null};du.__typeName='tab.ProgressiveLoader';du.get_progressiveLoadEnabled=function(){return tab.FeatureFlags.isEnabled('ProgressiveDashboardLoad')&&!tsConfig.is_authoring&&!tsConfig.isPublic};du.cloneZone=function(e){if(ss.isNullOrUndefined(e)){return e}var gc=e.wqq;e.wqq=null;var gd=tab.MiscUtil.cloneObject(e);gd.wqq=gc;e.wqq=gc;return gd};du.removeZoneContent=function(e){if(ss.isValue(e)){var gc=e;delete gc['wqq']}return e};du.getZoneRoot=function(e){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.res)||ss.isNullOrUndefined(e.res.mmK)){return null}var gc=e.res.mmK;if(gc.Jqz){var gd=gc.HCq;gc=null;var ge=_.keys(gd);for(var gf=0;gf<ge.length;gf++){var gg=ge[gf];var gh=gd[gg];if(gh.jAM!=='flipboard'){continue}var gi=ga.getContent(gh,'XIo');if(ss.isNullOrUndefined(gi)||ss.isNullOrUndefined(gi.stK)){return null}var gj=gi.stK[gi.P_I.toString()];if(ss.isNullOrUndefined(gj)){return null}gc=gj.mmK;break}}return gc};du.$3=function(e){if(ss.isNullOrUndefined(e)){return false}var gc=e.res;if(ss.isNullOrUndefined(gc)){return false}var gd=gc.mmK;if(ss.isNullOrUndefined(gd)){return false}var ge=gd.HCq;if(ss.isNullOrUndefined(ge)){return false}return true};du.$1=function(){if(ss.isValue(du.$7)){return}du.$7={};du.$7['bitmap']=1;du.$7['flipboard-nav']=1;du.$7['flipboard']=1;du.$7['viz']=2;du.$7['color']=3;du.$7['shape']=3;du.$7['size']=3;du.$7['map']=3;du.$7['filter']=4;du.$7['highlighter']=4;du.$7['paramctrl']=4;du.$7['current-page']=4;du.$7['web']=5;du.$5={};du.$5[1]={item1:-1,item2:1};du.$5[2]={item1:1,item2:0.25};du.$5[3]={item1:3,item2:0.33};du.$5[4]={item1:3,item2:0.33};du.$5[5]={item1:-1,item2:1};du.$5[6]={item1:-1,item2:1}};du.$2=function(e){switch(e){case'color':case'size':case'shape':case'filter':{return true}}return false};du.$0=function(e,gc){if(ss.isNullOrUndefined(e)){return gc}return dq.cloneObjWithScalarsOnly(e)};global.tab.ProgressiveLoader=du;var dv=function(){this.$1=null;this.$0=null};dv.__typeName='tab.ProjectModel';global.tab.ProjectModel=dv;var dw=function(e,gc){this.$2$1=null;db.call(this,e,new ds(gc))};dw.__typeName='tab.QuantitativeColorLegendModel';global.tab.QuantitativeColorLegendModel=dw;var dx=function(e,gc,gd,ge,gf,gg){this.$5=null;this.$2=null;this.$1=null;this.$0=null;this.$4=null;this.$3=null;this.$5=e;this.$2=gc;this.$1=gd;this.$0=ge;this.$4=gf;this.$3=gg};dx.__typeName='tab.QuantitativeFilterData';global.tab.QuantitativeFilterData=dx;var dy=function(e){this.$2$1=null;this.$2$2=null;this.$2$3=null;db.call(this,e,new ds('WlK'.toString()));this.set_quickFilterType('unknown')};dy.__typeName='tab.QuickFilterDisplayModel';dy.supportsQuickFilterType=function(e){if(e.ps$.VOu==='categorical'){var gc=e.ps$;switch(gc.etp){case'check-list':case'radio-list':{return true}case'check-dropdown':case'dropdown':{return tab.FeatureParamsLookup.getBool(40)}case'slider':case'pattern':case'type-in-list':default:{return false}}}return false};global.tab.QuickFilterDisplayModel=dy;var dz=function(e,gc){db.call(this,e,gc)};dz.__typeName='tab.QuickFilterModel';global.tab.QuickFilterModel=dz;var dA=function(e){db.call(this,e,new ds('mZ_'.toString()))};dA.__typeName='tab.RadialSelectionDistanceInfoModel';global.tab.RadialSelectionDistanceInfoModel=dA;var dB=function(){};dB.__typeName='tab.RangeTransform';global.tab.RangeTransform=dB;var dC=function(e){this.$3$1=null;fx.call(this,e,new ds('jFF'.toString()))};dC.__typeName='tab.RankTableCalcModel';global.tab.RankTableCalcModel=dC;var dD=function(){this.range=null;this.index=0;this.type=0;this.checkState=false};dD.__typeName='tab.RawChange';global.tab.RawChange=dD;var dE=function(e){this.$2$1=null;db.call(this,e,new ds('jal1'.toString()));this.pm={}};dE.__typeName='tab.ReferenceLineModel';global.tab.ReferenceLineModel=dE;var dF=function(e){this.$3=null;cd.call(this,e)};dF.__typeName='tab.RelationalTableModel';global.tab.RelationalTableModel=dF;var dG=function(e){this.$2=null;this.$1=null;this.$0=null;var gc=e.split('/');this.$2=gc[0].replace(new RegExp('^ds:'),'');this.$1=gc[1];if(gc.length>2){if(gc.length===3){throw new ss.Exception("new RepoPathObject() encountered repo path'"+e+"' with a badly formed customized view")}this.$0=gc[2]+'/'+gc[3]}else{this.$0=''}};dG.__typeName='tab.RepoPathObject';global.tab.RepoPathObject=dG;var dH=function(){};dH.__typeName='tab.SaveServerCommands';dH.saveWorkbook=function(e){var gc=function(gd){fX.getWorldUpdate(function(){if(ss.isValue(e)){e(gd)}})};ba.get().SaveWorkbook(tsConfig.current_workbook_name,tsConfig.current_project_id,tsConfig.showTabsWorkbook,gc)};dH.saveWorkbookAs=function(e,gc,gd,ge,gf,gg,gh){ba.get().SaveWorkbookAs(e,gc.get_id(),gd,ge,gf,gg,gh)};dH.transitionSessionAfterLogon=function(e){ba.get().$t(e)};global.tab.SaveServerCommands=dH;var dI=function(e){this.$2$1=null;this.$2$2=null;this.$2$3=null;db.call(this,null,new ds('ZBC'.toString()));this.swapPresModel(e);this.set_sceneElementPM(e);this.set_paneId(new dj(e.Zpj));this.set_bounds({minX:e.DO$,minY:e.eIN,maxX:e.DO$+e.HBM,maxY:e.eIN+e.XGN})};dI.__typeName='tab.SceneElementModel';global.tab.SceneElementModel=dI;var dJ=function(e){this.$a={};this.$6=[];this.$7=[];this.$8=null;this.$9=null;this.$5=null;this.$2$1=null;db.call(this,e,new ds('X$'.toString()));this.$8=[];this.$9=[]};dJ.__typeName='tab.SceneModel';dJ.$0=function(e,gc){if(ss.keyExists(e,'background')){var gd=e['background'].get_visualListPresModel().tOA;for(var ge=0;ge<gd.length;ge++){var gf=gd[ge];if(gf.VzB==='nuS'){var gg=gf;return X.fromColorCode(gg.YhU)}}}return(ss.isValue(gc.oiS)?X.fromColorCode(gc.oiS):dJ.$1)};global.tab.SceneModel=dJ;var dK=function(){};dK.__typeName='tab.SceneUtils';dK.getPaneDescriptorKeyFromTupleId=function(e,gc){for(var gd=0;gd<gc.HUq.length;gd++){var ge=gc.HUq[gd];for(var gf=0;gf<ge.MdI.length;gf++){var gg=ge.MdI[gf];if(ss.isValue(gg.SgS)){var gh=gc.ObZ;var gi=new ss.ObjectEnumerator(gh);try{while(gi.moveNext()){var gj=gi.current();var gk=gj.value.GKA['tuple_id'];var gl=_.find(gk.uBu,function(gm){return gm===e});if(ss.isValue(gl)){return gj.key}}}finally{gi.dispose()}}}}return''};global.tab.SceneUtils=dK;var dL=function(){this.$2=null;this.$1=null;this.$0=0};dL.__typeName='tab.Schedule';global.tab.Schedule=dL;var dM=function(){};dM.__typeName='tab.SchemaClientCommands';dM.addFieldToSheet=function(e,gc){var gd=new Object;gd.commandNamespace='tabdoc'.toString();gd.commandName='add-to-sheet'.toString();gd.commandParams={};gd.commandParams['HBp']=e;gd.commandParams['AVP']=tsConfig.current_sheet_name;ba.SendCommand(d.$0(gd,'immediately',function(ge){gc()},function(ge){gc()}))};dM.$0=function(e,gc){var gd=bk.newDocCommand(e);gd.commandParams={};gd.commandParams['HVp']=gc;ba.SendCommand(new d(gd,'immediately',null,null))};dM.convertToMeasure=function(e){dM.$0('convert-to-measure',e)};dM.convertToDimension=function(e){dM.$0('convert-to-dimension',e)};dM.requestSchemaContextMenu=function(e,gc){var gd=bk.newDocCommand('build-data-schema-context-menu');var ge={};ge['UyO']=e.get_name();gd.commandParams=ge;ba.SendCommand(d.$0(gd,'none',function(gf){gc(gf)},null))};dM.requestSchemaFieldContextMenu=function(e,gc,gd){var ge=bk.newDocCommand('build-data-schema-field-context-menu');var gf={};gf['UyO']=e.get_name();gf['HBp']=gc;ge.commandParams=gf;ba.SendCommand(d.$0(ge,'none',function(gg){gd(gg)},null))};dM.convertUnnamedFields=function(e){var gc=$.Deferred();var gd={};gd['HVp']=e;var ge=new d(bk.newDocCommand('convert-unnamed-fields',gd),'immediately',ba.$3(Array).call(null,gc),function(){gc.reject()});ba.SendCommand(ge);return gc.promise()};dM.toggleFieldBlending=function(e,gc){var gd=$.Deferred();var ge={};ge['lYz']=e;ge['AVP']=tsConfig.current_sheet_name;var gf=new U('immediately',gc,bk.newDocCommand('toggle-field-blending',ge),ba.$3(Object).call(null,gd),function(){gd.reject()});ba.SendCommand(gf);return gd.promise()};global.tab.SchemaClientCommands=dM;var dN=function(){};dN.__typeName='tab.SelectionClientCommands';dN.$h=function(){return tab.Logger.lazyGetLogger(dN)};dN.setActiveZone=function(e){if(!tsConfig.allow_select){return}if(de.isActiveZone(e)){return}ba.SendCommand(dN.buildActiveZoneClientCommand(e))};dN.clearActiveZone=function(){dN.setActiveZone(0)};dN.buildActiveZoneClientCommand=function(e){var gc=new U('none',function(gd){dN.$a(e,gd)},dN.$0(e));return gc};dN.selectFields=function(e,gc,gd){var ge=new Object;ge.commandNamespace='tabdoc'.toString();ge.commandName='get-show-me'.toString();var gf={};gf['HVp']=e;gf['AVP']=tsConfig.current_sheet_name;gf['UyO']=gc;ge.commandParams=gf;ba.SendCommand(d.$0(ge,'none',function(gg){gd(gg)},function(gg){gd(null)}))};dN.toggleLegendHighlight=function(e,gc,gd,ge,gf){if(!tsConfig.allow_highlight){return}var gg=[];if(!de.isActiveZone(e)){var gh=dN.buildActiveZoneClientCommand(e);gg.push(gh)}var gi=dN.buildToggleLegendHighlightCommand(gc,gd,ge,gf);gg.push(gi);var gj=new bn('immediately',gg);ba.SendCommand(gj)};dN.buildToggleLegendHighlightCommand=function(e,gc,gd,ge){var gf={};gf['dpp']=gc;gf['HhR']=gd;bk.addVisualIdToCommand(gf,e);var gg=new Object;gg.commandNamespace='tabsrv'.toString();gg.commandName='toggle-legend-server'.toString();gg.commandParams=gf;var gh=function(gj){if(ss.isValue(ge)){ge(gj)}};var gi=new U('immediately',null,gg,gh,null);return gi};dN.selectRegion=function(e,gc,gd,ge,gf){if(!tsConfig.allow_select){return}var gg=new Object;gg.commandNamespace='tabsrv'.toString();gg.commandName='select-region-no-return-server'.toString();gg.commandParams=dN.$7(gc,e,gd,ge,gf);dU.executeServerCommand(gg,'afterDelay')};dN.selectRectRegionAndDoUbertip=function(e,gc,gd,ge,gf){if(!tsConfig.allow_select){return}var gg=new Object;gg.commandName='select-region-no-return-server'.toString();gg.commandParams=dN.$7(gc,e,gd,ge);dN.$9(gf,gg)};dN.selectCircleRegionAndDoUbertip=function(e,gc,gd,ge,gf,gg,gh){if(!tsConfig.allow_select){return}var gi=new Object;gi.commandName='select-radial-region-no-return-server'.toString();var gj=dN.$7(gc,e,ge,gf);var gk={};gk.f_W={};gk.f_W.thj=Math.round(gd.center.x);gk.f_W.RAC=Math.round(gd.center.y);gk.IEh=Math.round(gd.radius);gj['SWH']=gk;gj['Xyn']=gh;gi.commandParams=gj;dN.$9(gg,gi)};dN.selectPolyRegionAndDoUbertip=function(e,gc,gd,ge,gf,gg){if(!tsConfig.allow_select){return}var gh=new Object;gh.commandName='select-lasso-region-no-return-server'.toString();var gi=dN.$7(gc,e,ge,gf);var gj=gd.length;var gk=new Array(gj);for(var gl=0;gl<gj;gl++){var gm={};gm.thj=Math.round(gd[gl].x);gm.RAC=Math.round(gd[gl].y);gk[gl]=gm}gi['WiQ']=gk;gh.commandParams=gi;dN.$9(gg,gh)};dN.$9=function(e,gc){gc.commandNamespace='tabsrv'.toString();var gd=new U('afterDelay',null,gc,function(gg){e()},null);var ge=[];ge.push(gd);var gf=new bn('afterDelay',ge);ba.SendCommand(gf)};dN.clearAllSelections=function(e){if(!tsConfig.allow_select){return}var gc=de.getZoneIdForSheetName(e.AVP);if(gc!==-1&&!de.isActiveZone(gc)){dN.setActiveZone(gc);return}var gd=dN.buildClearAllSelectionsCommand(e);ba.SendCommand(gd)};dN.buildClearAllSelectionsCommand=function(e){var gc=bk.newSrvCommand('select-none');var gd={};bk.addVisualIdToCommand(gd,e);gc.commandParams=gd;var ge=new U((z.get_instance().get_isLocalRenderMode()?'none':'afterDelay'),function(gf){if(z.get_instance().get_isLocalRenderMode()){var gg=dN.$3(gf);if(gg){u.executeActions(e.AVP,'on-select',[],gf,true)}}},gc);return ge};dN.clearAllSelectionsIncludingMaster=function(){if(!tsConfig.allow_select){return}var e=dN.buildClearAllSelectionsIncludingMasterCommand();ba.SendCommand(e)};dN.buildClearAllSelectionsIncludingMasterCommand=function(){var e=new Object;e.commandNamespace='tabdoc'.toString();e.commandName='select-none-including-master'.toString();e.commandParams={};e.commandParams['Gge']=tsConfig.current_sheet_name;var gc=new U((z.get_instance().get_isLocalRenderMode()?'none':'afterDelay'),function(gd){dN.$3(gd);dN.$1(gd);var ge=de.getVisualModelsFromDashboard(de.findContentDashboard());var gf=ss.getEnumerator(Object.keys(ge));try{while(gf.moveNext()){var gg=gf.current();var gh=ge[gg];u.executeActions(gh.get_visualId().AVP,'on-select',[],gd,true)}}finally{gf.dispose()}},e);return gc};dN.selectLegendItemsLocal=function(e,gc,gd,ge,gf,gg){if(!tsConfig.allow_select){return}var gh=dN.buildSelectLegendItemsLocalCommand(e,gc,gd,ge,gf,gg);ba.SendCommand(gh)};dN.buildSelectLegendItemsLocalCommand=function(e,gc,gd,ge,gf,gg){var gh=de.getVisualModelFromVisualId(ge);var gi=gh.get_selectionsModel();var gj=gi.getLegendSelection(gg,gf.get_legendNames());var gk=dR.resolveLegendSelection(gc,gd,gf,gj);var gl=[];if(!gj.isAnyLegendItemSelected()&&gk.length===0&&!de.isActiveZone(e)){gl.push(dN.buildActiveZoneClientCommand(e))}var gm=new Object;gm.commandNamespace='tabdoc'.toString();gm.commandName='select-legend-items'.toString();gm.commandParams=dN.$6(gk,ge,gf,gg,e);var gn=new U('none',function(gp){dN.$a(e,gp);if(!gj.isAnyLegendItemSelected()&&gk.length===0){return}var gq=gp.makeMutablePresModel(gj);gq.kyj=gk;gq.VNi={};gq.VNi.jhL=gf.get_legendTypeEnum();gq.VNi.pMg=gf.get_legendNames();dN.$4(gp,gi.get_tupleSelection(),gh);dN.$4(gp,gi.get_nodeSelection(),gh);var gr=gi.get_allLegendSelections();for(var gs=0;gs<gr.length;gs++){var gt=gr[gs];if(!ss.referenceEquals(gt,gj)){dN.$4(gp,gt,gh)}}dN.$2(gp,ge,true);dN.$c(gk,gf,gh,gp)},gm);gl.push(gn);var go=new bn('none',gl);return go};dN.buildSelectNodeCommand=function(e,gc,gd,ge,gf,gg,gh){var gi=de.getZoneIdForSheetName(gg.AVP);var gj=de.getVisualModelFromVisualId(gg);var gk=gj.get_selectionsModel();var gl=gk.get_nodeSelection();var gm=(u.willActionCauseTabChange(gg.AVP,'on-select')?'afterDelay':'none');var gn=[];if(gi!==-1&&!de.isActiveZone(gi)){var go=dN.buildActiveZoneClientCommand(gi);gn.push(go)}var gp=bk.newSrvCommand('select-region-no-return-server');var gq=2;var gr=null;if(ss.isValue(gf.XqN)&&ss.isValue(gf.$UU)){var gs=gf.nTH||0;var gt=gf.Mk_||0;gr={x:gs,y:gt,w:gf.XqN,h:gf.$UU}}var gu=tab.RectXYUtil.shiftCoordsTowardsCenter(gc,gr,gq);var gv={x:gu.x,y:gu.y,w:0,h:0};gp.commandParams=dN.$7(gv,e,gd,gg);var gw=!z.get_instance().get_isTableCalcHighlightingMode();var gx=function(gA){var gB=gA.makeMutablePresModel(gl);dR.resolveNodeSelection(gd,ge.get_groupItemNodes(),gf,gl,gB);var gC=gd!=='toggle'&&gd!=='range';var gD=gk.get_tupleSelection().get_ids();if(gC){dN.$4(gA,gk.get_tupleSelection(),gj);gD=[]}var gE=gk.get_allLegendSelections();for(var gF=0;gF<gE.length;gF++){var gG=gE[gF];dN.$4(gA,gG,gj)}dN.$2(gA,gg,true);gj.$6(gB.p$U);u.executeActions(gg.AVP,'on-select',gj.getEffectiveSelectedTuples(gD),gA,true)};var gy=new U(gm,(gw?gx:null),gp,function(gA){if(ss.isValue(gh)){gh()}},null);gn.push(gy);var gz=new bn(gm,gn);return gz};dN.selectNode=function(e,gc,gd,ge,gf,gg,gh){if(!tsConfig.allow_select){return}var gi=dN.buildSelectNodeCommand(e,gc,gd,ge,gf,gg,gh);ba.SendCommand(gi)};dN.selectMarksLocal=function(e,gc,gd,ge,gf,gg){if(!tsConfig.allow_select){return}if(tab.MiscUtil.isNullOrEmpty(e)){dN.clearAllSelections(gc);return}var gh=dN.buildSelectMarksLocalCommand(e,gc,gd,ge,gf,gg);ba.SendCommand(gh)};dN.buildSelectMarksLocalCommand=function(e,gc,gd,ge,gf,gg){var gh=de.getZoneIdForSheetName(gc.AVP);var gi=de.getVisualModelFromVisualId(gc);var gj=gi.get_selectionsModel();var gk=gj.get_tupleSelection();var gl=u.getApplicableActions(gi.get_visualId().AVP,'on-select','filter');var gm=gl.length>0;var gn;if(gm){gn='afterDelay'}else{gn=(u.willActionCauseTabChange(gc.AVP,'on-select')?'afterDelay':'none')}var go=[];if(gh!==-1&&!de.isActiveZone(gh)){var gp=dN.buildActiveZoneClientCommand(gh);go.push(gp)}var gq=new Object;gq.commandNamespace='tabdoc'.toString();gq.commandName='select'.toString();gq.commandParams=dN.$8(e,'tuples',gd,gc);var gr=!z.get_instance().get_isTableCalcHighlightingMode();var gs=function(gv){var gw=dR.resolveMarkSelection(gd,e,gk,ge);var gx=gv.makeMutablePresModel(gk);gx.kyj=gw;if(gd!=='toggle'&&gd!=='range'){dN.$4(gv,gj.get_nodeSelection(),gi)}var gy=gj.get_allLegendSelections();for(var gz=0;gz<gy.length;gz++){var gA=gy[gz];dN.$4(gv,gA,gi)}dN.$2(gv,gc,true);if(gm){if(ss.isValue(gg)){gg(true)}}u.executeActions(gc.AVP,'on-select',gi.getEffectiveSelectedTuples(gw),gv,true)};var gt=new U(gn,(gr?gs:null),gq,function(gv){if(ss.isValue(gf)){gf()}if(ss.isValue(gg)){gg(false)}},function(gv){if(ss.isValue(gg)){gg(false)}});go.push(gt);var gu=new bn(gn,go);return gu};dN.$d=function(e,gc){if(!e.get_isBrushingComputed()){return}var gd=de.getVisualModels(z.get_instance());var ge=ss.getEnumerator(Object.keys(gd));try{while(ge.moveNext()){var gf=ge.current();if(!e.hasBrushingForSheet(gf)){continue}var gg=gd[gf];dN.$g(e,gc,gg,gf);dN.$f(e,gc,gg,gf);dN.$e(e,gc,gg,gf);var gh=e.getLegendBrushing(gf);var gi=gg.get_brushingsModel().get_allLegendSelections();for(var gj=0;gj<gi.length;gj++){var gk=gi[gj];dN.$b(gc,gk,gh)}}}finally{ge.dispose()}};dN.$b=function(e,gc,gd){var ge=gc.get_selectionPresModel().VNi;var gf=[];var gg=C.$0(ge.jhL,ge.pMg);if(ss.isValue(gd[gg])){gf=gd[gg]}if(gf.length!==0||gc.get_selectionPresModel().kyj.length!==0){var gh=e.makeMutablePresModel(gc);gh.kyj=gf}};dN.$e=function(e,gc,gd,ge){var gf=e.getNodeBrushing(ge);if(gf.length!==0||!gd.get_brushingsModel().get_nodeSelection().get_isEmpty()){var gg=gc.makeMutablePresModel(gd.get_brushingsModel().get_nodeSelection());gg.p$U=gf}};dN.$f=function(e,gc,gd,ge){var gf=gd.get_brushingsModel().get_trendLineSelection();var gg=e.getTrendlineBrushing(ge);if(gg.length!==0||gf.get_selectionPresModel().kyj.length!==0){var gh=gc.makeMutablePresModel(gf);gh.kyj=gg}};dN.$g=function(e,gc,gd,ge){var gf=e.getTupleBrushing(ge);if(gf.length!==0||gd.get_brushingsModel().get_tupleSelection().get_selectionPresModel().kyj.length!==0){var gg=gc.makeMutablePresModel(gd.get_brushingsModel().get_tupleSelection());gg.kyj=gf}};dN.$1=function(e){var gc=de.getVisualModels(z.get_instance());var gd=ss.getEnumerator(Object.keys(gc));try{while(gd.moveNext()){var ge=gd.current();var gf=gc[ge];if(gf.get_brushingsModel().get_isEmpty()){continue}var gg=e.makeMutablePresModel(gf.get_brushingsModel().get_tupleSelection());gg.kyj=[];var gh=e.makeMutablePresModel(gf.get_brushingsModel().get_nodeSelection());gh.p$U=[];var gi=gf.get_brushingsModel().get_allLegendSelections();for(var gj=0;gj<gi.length;gj++){var gk=gi[gj];if(gk.get_isEmpty()){continue}var gl=e.makeMutablePresModel(gk);var gm=[];gl.kyj=gm}}}finally{gd.dispose()}};dN.$0=function(e){var gc=bk.newDocCommand('set-active-zone');var gd={};gd['TBd']=de.findContentDashboard().pm.IJE;gd['BCp']=e;gc.commandParams=gd;return gc};dN.$c=function(e,gc,gd,ge){var gf=C.computeFromLegend(gd,e,gc);dN.$d(gf,ge)};dN.$2=function(e,gc,gd){var ge=false;var gf=de.getVisualModels(z.get_instance());var gg=ss.getEnumerator(Object.keys(gf));try{while(gg.moveNext()){var gh=gg.current();var gi=!ss.isNullOrUndefined(gc)&&ss.referenceEquals(gh,gc.AVP);if(!gd||!gi){var gj=de.findContentDashboard();var gk=!gd&&gi||!u.isFilterSource(gj,gh);var gl=gf[gh];var gm=gl.get_selectionsModel().get_selectionModels();for(var gn=0;gn<gm.length;gn++){var go=gm[gn];if(gk||go.get_selectionType()!=='tuples'&&go.get_selectionType()!=='nodes'){ge=dN.$5(e,go,true)||ge}}}}}finally{gg.dispose()}return ge};dN.$3=function(e){var gc=false;var gd=de.getVisualModels(z.get_instance());var ge=ss.getEnumerator(Object.keys(gd));try{while(ge.moveNext()){var gf=ge.current();var gg=gd[gf];var gh=gg.get_selectionsModel().get_selectionModels();for(var gi=0;gi<gh.length;gi++){var gj=gh[gi];gc=dN.$5(e,gj,true)||gc}}}finally{ge.dispose()}return gc};dN.$7=function(e,gc,gd,ge,gf){var gg={};bk.addVisualIdToCommand(gg,ge);var gh=new Object;var gi=fM.create(gh);gi.set_x(Math.round(e.x));gi.set_y(Math.round(e.y));gi.set_w(Math.round(e.w||0));gi.set_h(Math.round(e.h||0));gi.set_r(gc);if(ss.isValue(gf)){gi.set_fns(gf)}gg['vpK']=gh;gg['Mph0']=gd;return gg};dN.$6=function(e,gc,gd,ge,gf){var gg={};bk.addVisualIdToCommand(gg,gc);gg['HhR']=gd.get_legendNames();gg['jhL']=ge;gg['kyj']=e;gg['BCp']=gf;return gg};dN.$4=function(e,gc,gd){if(ss.isValue(gc)){dN.$5(e,gc,false);if(gc.get_selectionType()==='nodes'){gd.$3()}}};dN.$8=function(e,gc,gd,ge){var gf={};if(ss.isValue(ge)){bk.addVisualIdToCommand(gf,ge)}var gg={};gg.kyj=e;gg.coe=gc;gf['Gvh']=gg;gf['bis']=dN.$i[gd];return gf};dN.$a=function(e,gc){var gd=de.findContentDashboard();var ge=gc.makeMutablePresModel(gd);ge.xdK=e};dN.$5=function(e,gc,gd){if(gc.get_isEmpty()){return false}var ge=e.makeMutablePresModel(gc);ge.kyj=[];ge.p$U=[];if(gd){gc.setOverriddenTupleIds([])}return true};global.tab.SelectionClientCommands=dN;var dO=function(e,gc){this.$5=null;this.$7=null;this.$6=null;this.$2$1=null;db.call(this,e,new ds(gc.toString()))};dO.__typeName='tab.SelectionModel';dO.$0=function(e,gc){var gd=new ss.StringBuilder;if(ss.isValue(e)){gd.append(e.join(';'))}gd.append('=');if(ss.isValue(gc)){gd.append(gc.join(';'))}return gd.toString()};global.tab.SelectionModel=dO;var dP=function(e,gc){this.$5=[];this.$2$1=null;db.call(this,e,new ds(gc,1));this.$3('tuples');this.$3('nodes');this.$3('trend-lines');this.$3('ref-lines')};dP.__typeName='tab.SelectionsModel';dP.$1=function(e){var gc={};gc.coe=e;switch(e){case'ref-lines':case'trend-lines':case'annotations':case'tuples':{gc.kyj=[];break}case'legend-items':{gc.VNi={};gc.kyj=[];break}case'nodes':{gc.p$U=[];break}default:{break}}return gc};dP.$0=function(e,gc){var gd={};for(var ge=0;ge<e.length;ge++){var gf=e[ge];gd[gf.toString()]=gf}var gg={};for(var gh=0;gh<gc.length;gh++){var gi=gc[gh];gg[gi.toString()]=gi}return dP.computeTupleDictionaryDifference(gd,gg)};dP.computeTupleDictionaryDifference=function(e,gc){var gd=$.extend(true,new Object,e);var ge=$.extend(true,new Object,gc);var gf=[];var gg=ss.getEnumerator(Object.keys(gd));try{while(gg.moveNext()){var gh=gg.current();if(!ss.keyExists(ge,gh)){gf.push(gd[gh])}else{delete ge[gh]}}}finally{gg.dispose()}var gi=ss.getEnumerator(Object.keys(ge));try{while(gi.moveNext()){var gj=gi.current();gf.push(ge[gj])}}finally{gi.dispose()}return gf};global.tab.SelectionsModel=dP;var dQ=function(){this.selections=null};dQ.__typeName='tab.SelectionsPresModel';global.tab.SelectionsPresModel=dQ;var dR=function(){};dR.__typeName='tab.SelectionUtils';dR.isCategoricalAndTupleAssociatedHeader=function(e,gc){return!dR.isHeaderFullyQuantitativeOrHaveNoAssociatedTuples(gc)&&e.length===gc.length};dR.isHeaderFullyQuantitativeOrHaveNoAssociatedTuples=function(e){return tab.MiscUtil.isNullOrEmpty(e)};dR.resolveLegendSelection=function(e,gc,gd,ge){var gf=[];if(ss.isValue(gc)){var gg=ge.get_selectionPresModel()||{};switch(e){case'toggle':{if(ss.isValue(gg.kyj)){ss.arrayAddRange(gf,gg.kyj)}for(var gh=0;gh<gc.length;gh++){var gi=gc[gh];var gj=ss.indexOf(gf,gi.YLs);if(gj>=0){ss.removeAt(gf,gj)}else{gf.push(gi.YLs)}}break}case'range':{gf=dR.$2(gc,gd,gg);break}case'simple':{var gk=(ss.isValue(gg.kyj)?gg.kyj:[]);if(gk.length<=1){for(var gl=0;gl<gc.length;gl++){var gm=gc[gl];var gn=ss.indexOf(gk,gm.YLs);if(gn>=0){ss.removeAt(gf,gn)}else{gf.push(gm.YLs)}}}else{ss.arrayAddRange(gf,_.pluck(gc,'YLs'.toString()))}break}}}return Array.prototype.slice.call(gf)};dR.resolveMarkSelection=function(e,gc,gd,ge){var gf=[];switch(e){case'simple':{if(!ge&&gc.length===1&&gd.get_ids().length===1&&gc[0]===gd.get_ids()[0]){ss.clear(gf)}else{ss.arrayAddRange(gf,gc)}break}case'range':case'toggle':{ss.arrayAddRange(gf,gd.get_ids());for(var gg=0;gg<gc.length;gg++){var gh=gc[gg];if(!gd.isMarkSelected(gh)){gf.push(gh)}else if(!ge){ss.remove(gf,gh)}}break}}return Array.prototype.slice.call(gf)};dR.resolveNodeSelection=function(e,gc,gd,ge,gf){var gg=null;if(ss.isValue(gd)){switch(e){case'simple':{gg=dR.$4(gd,ge);break}case'toggle':{gg=dR.$5(gd,ge);break}case'range':{gg=dR.$3(gc,gd,ge);break}}}gf.p$U=gg||[]};dR.$2=function(e,gc,gd){var ge=[];if(!ss.isValue(gd.kyj)){return ge}ss.arrayAddRange(ge,gd.kyj);ss.arrayAddRange(ge,_.pluck(e,'YLs'.toString()));var gf=gd.kyj[gd.kyj.length-1];var gg=-1;for(var gh=0;gh<gc.get_items().length;gh++){if(gc.get_items()[gh].YLs===gf){gg=gh}}var gi=((e.length>0)?ss.indexOf(gc.get_items(),e[0]):-1);if(gg<0||gi<0){return _.uniq(ge)}var gj=Math.min(gg,gi);var gk=gj+Math.abs(gg-gi)+1;for(var gl=gj;gl<gk;gl++){ge.push(gc.get_items()[gl].YLs)}return _.uniq(ge)};dR.$0=function(e,gc,gd,ge){var gf=new tab.IntSet;for(var gg=0;gg<e.length;gg++){var gh=e[gg];if(ss.isValue(gh.ZHX)){gf.addAll(gh.ZHX)}}for(var gi=0;gi<gc.length;gi++){var gj=(gd?gc[gc.length-1-gi]:gc[gi]);if(_.intersection(gf.get_values(),gj.ZHX).length===0){continue}var gk=dR.$1(e,gj,ge);if(gk!==-1){return gk}}return-1};dR.$1=function(e,gc,gd){for(var ge=0;ge<e.length;ge++){var gf=e[ge];var gg=ss.isNullOrUndefined(gd)||_.isEqual(gd,gc.ZHX);if(gg&&_.isEqual(gf.ZHX,gc.ZHX)){var gh=tab.MiscUtil.isNullOrEmpty(gf.wwF)&&tab.MiscUtil.isNullOrEmpty(gc.wwF);if(gh||_.isEqual(gf.wwF,gc.wwF)){return ge}}}return-1};dR.$3=function(e,gc,gd){var ge=dR.$6(gc);var gf=gd.get_nodes().slice(0);if(tab.MiscUtil.isNullOrEmpty(ge.ZHX)){return gf}if(gf.length===0){gf.push(ge);return gf}var gg=dR.isCategoricalAndTupleAssociatedHeader(ge.ZHX,ge.wwF);var gh=dR.isHeaderFullyQuantitativeOrHaveNoAssociatedTuples(ge.wwF);var gi=!gg&&!gh;var gj=dR.$0(e,gd.get_nodes(),true,(gg?ge.ZHX:null));if(gj===-1){if(gg||gi&&!gd.isNodeAncestorSelected(gc,false)){gf.push(ge)}return gf}if(gd.isNodeSelected(gc)||gd.isNodeAncestorSelected(gc,gg)){return gf}var gk=dR.$0(e,gd.get_nodes(),false,null);var gl=dR.$6(e[gk]);if(gg){if(!_.isEqual(gl.ZHX,ge.ZHX)){gf.push(ge);return gf}}else{var gm=dR.$1(e,gl,null)!==-1;if(gh&&!gm){return gf}if(gi&&!gm){gf.push(ge);return gf}}var gn=ss.indexOf(e,gc);var go=Math.min(gj,gn);var gp=go+Math.abs(gj-gn)+1;for(var gq=go;gq<gp;gq++){var gr=e[gq];var gs=!gg||_.isEqual(gr.ZHX,ge.ZHX);if(gs&&!gd.isNodeAncestorSelected(gr,gg)&&!gd.isNodeSelected(gr)){gf.push(dR.$6(gr))}}return gf};dR.$4=function(e,gc){if(!gc.isNodeSelected(e)||gc.get_nodes().length>1){return[dR.$6(e)]}return null};dR.$5=function(e,gc){var gd=[];ss.arrayAddRange(gd,gc.get_nodes());var ge=gc.findNodeSelection(e);if(ss.isValue(ge)){ss.remove(gd,ge)}else{var gf=dR.isCategoricalAndTupleAssociatedHeader(e.ZHX,e.wwF);if(!gc.isNodeAncestorSelected(e,gf)){gd.push(dR.$6(e))}}return Array.prototype.slice.call(gd)};dR.$6=function(e){var gc={};gc.ZHX=e.ZHX||[];gc.wwF=e.wwF||[];return gc};global.tab.SelectionUtils=dR;var dS=function(){ss.makeGenericType(A,[Object,dT]).call(this)};dS.__typeName='tab.SelectZoneParentCmd';global.tab.SelectZoneParentCmd=dS;var dT=function(e){this.$c=null;this.$c=e};dT.__typeName='tab.SelectZoneParentCmd$Response';global.tab.SelectZoneParentCmd$Response=dT;var dU=function(){};dU.__typeName='tab.ServerCommands';dU.$0=function(e,gc){return e+':'+gc};dU.executeServerCommand=function(e,gc,gd,ge){var gf=dU.$1[dU.$0(e.commandNamespace,e.commandName)];if(ss.isValue(gf)){for(var gg=0;gg<gf.length;gg++){var gh=gf[gg];if(gh(e)===1){return}}}ba.SendCommand(d.$0(e,gc,gd,ge))};dU.addCommandInterceptor=function(e,gc,gd){var ge=dU.$0(gc,gd);var gf=dU.$1[ge];if(ss.isNullOrUndefined(gf)){gf=[];dU.$1[ge]=gf}gf.push(e)};dU.clearAllCommandInterceptors=function(){ss.clearKeys(dU.$1)};global.tab.ServerCommands=dU;var dV=function(e,gc,gd,ge,gf,gg){this.$5=null;this.$2=null;this.$4=null;this.$3=null;this.$1=false;this.$5=e;this.$2=gc;this.$4=gd;this.$3=ge;if(ss.isNullOrUndefined(gf)||gf){this.$1=this.$5.incrementWait(gg)}};dV.__typeName='tab.SessionAjaxCallManager';global.tab.SessionAjaxCallManager=dV;var dW=function(e,gc){this.$6=false;this.$5=null;this.$7=0;this.$4=1000;this.$9='';this.$8=null;this.$8=e;this.$5=gc;this.$9=e.$4('status')};dW.__typeName='tab.SessionAjaxHandler';var dX=function(){};dX.__typeName='tab.SessionServerCommands';dX.cancelLatestSetTimeout=function(){window.clearTimeout(dX.$0)};dX.destroySessionAndForward=function(e,gc){var gd=ba.get().get_legacySession();var ge=2000;gd.get_waitHandler().showAndLock();var gf=function(){if(ss.referenceEquals(tab.WindowHelper.getLocation(e).href,gc)){tab.WindowHelper.reload(e,true)}else{tab.WindowHelper.setLocationHref(e,gc)}};var gg=null;gg=function(){gf();dX.cancelLatestSetTimeout();ge*=2;dX.$0=window.setTimeout(gg,ge)};var gh=gd.$0(function(){gf();if(tab.BrowserSupport.get_isMac()&&tab.BrowserSupport.get_isChrome()){dX.$0=window.setTimeout(gg,ge)}},function(){},function(){},'immediately');var gi=ss.mkdict([]);gi.type='DELETE';gi.url=gd.$4('destroy');gi.headers=ss.mkdict(['Accept','text/javascript']);gi.dataType='json';gd.$b(gi,gh)};global.tab.SessionServerCommands=dX;var dY=function(){ss.makeGenericType(A,[Object,dZ]).call(this)};dY.__typeName='tab.SetDashboardSizingWithValidationCmd';global.tab.SetDashboardSizingWithValidationCmd=dY;var dZ=function(e){this.$c=null;this.$c=e};dZ.__typeName='tab.SetDashboardSizingWithValidationCmd$Response';global.tab.SetDashboardSizingWithValidationCmd$Response=dZ;var ea=function(){ss.makeGenericType(A,[Object,eb]).call(this)};ea.__typeName='tab.SetVariablesPromptRespondedCmd';global.tab.SetVariablesPromptRespondedCmd=ea;var eb=function(e){this.$c=null;this.$c=e};eb.__typeName='tab.SetVariablesPromptRespondedCmd$Response';global.tab.SetVariablesPromptRespondedCmd$Response=eb;var ec=function(){this.$2={};this.$1={};this.$3={};this.$1$1=null};ec.__typeName='tab.ShapeManager';ec.get_canvasCacheCapacity=function(){return ec.$3};ec.$1=function(e,gc,gd,ge,gf,gg){return e+';'+gc+';'+gd+';'+ge+';'+gf+';'+gg};ec.$0=function(e,gc,gd,ge,gf){return e+';'+gc+';'+gd+';'+ge+';'+gf};global.tab.ShapeManager=ec;var ed=function(e,gc){this.$0=null;this.$1=null;this.$0=e;this.$1=gc};ed.__typeName='tab.ShapeModel';ed.fromString=function(e){var gc=new RegExp('^(:([^\\/]+)\\/)?([^\\/]+)$');var gd=gc.exec(e);if(ss.isNullOrUndefined(gd)){return null}var ge=gd[2];var gf=gd[3];if(ss.isNullOrUndefined(gf)){return null}var gg=null;if(ss.isValue(ge)){if(ss.referenceEquals(ge,'filled'.toString())){gg='filled'}else{return null}}var gh=gf;return new ed(gg,gh)};global.tab.ShapeModel=ed;var ee=function(){};ee.__typeName='tab.SheetClientCommands';ee.switchSheets=function(e,gc){if(ss.isNullOrUndefined(e.oldSheetName)){e.oldSheetName=tsConfig.current_sheet_name}if(ss.equals(e.sheetName,e.oldSheetName)&&tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad')){return}ba.get().prepareForSheetChange();var gd=ee.createSwitchSheetsCommand(e.sheetName,gc);dU.executeServerCommand(gd,'immediately',e.successCallback,e.errorCallback)};ee.createSwitchSheetsCommand=function(e,gc){var gd=new Object;gd.commandNamespace='tabsrv'.toString();gd.commandName='ensure-layout-for-sheet'.toString();gd.commandParams={};gd.commandParams['DYs']=e;gd.commandParams['Wgg']=gc.toString();return gd};ee.goToSheet=function(e){ba.get().prepareForSheetChange();var gc=new Object;gc.commandNamespace='tabdoc'.toString();gc.commandName='goto-sheet'.toString();gc.commandParams={};gc.commandParams['Gge']=e;dU.executeServerCommand(gc,'immediately')};ee.createSheet=function(e,gc){var gd=new Object;gd.commandNamespace='tabdoc'.toString();gd.commandName='new-worksheet'.toString();gd.commandParams={};if(ss.isValue(e)){gd.commandParams['tox']=e}if(gc){gd.commandParams['ncI']=gc.toString()}dU.executeServerCommand(gd,'immediately',null,null)};ee.renameSheet=function(e,gc){var gd=new Object;gd.commandNamespace='tabdoc'.toString();gd.commandName='rename-sheet'.toString();gd.commandParams={};gd.commandParams['Gge']=e;gd.commandParams['tox']=gc;dU.executeServerCommand(gd,'immediately',null,null)};ee.createDashboard=function(e,gc){var gd=bk.newDocCommand('new-dashboard');gd.commandParams={};if(ss.isValue(e)){gd.commandParams['tox']=e}if(gc){gd.commandParams['ncI']=gc.toString()}dU.executeServerCommand(gd,'immediately',null,null)};ee.getSheetTabContextMenu=function(e,gc){var gd=bk.newDocCommand('build-sheet-tab-context-menu');gd.commandParams={};if(ss.isValue(e)){gd.commandParams['DDA']=e}dU.executeServerCommand(gd,'none',function(ge){gc(ge)},null)};ee.getSheetListContextMenu=function(e,gc){var gd=new D;gd.c['DDA']=e;var ge=gd;ge.invoke$1().then(gc)};ee.$0=function(e){var gc={};gc.EUR=Math.floor(e.EUR);gc.rec=Math.floor(e.rec);return gc};ee.setPortSize=function(e){var gc=bk.newSrvCommand('set-port-size');gc.commandParams={};gc.commandParams['Gge']=tsConfig.current_sheet_name;var gd=tabBootstrap.ViewerBootstrap.get_instance().getWebClientPortSize('dashboard');var ge=tabBootstrap.ViewerBootstrap.get_instance().getWebClientPortSize('worksheet');var gf=gc.commandParams;var gg={};gg.EUR=ge.h;gg.rec=ge.w;gf['Yqf']=ee.$0(gg);var gh=gc.commandParams;var gi={};gi.EUR=gd.h;gi.rec=gd.w;gh['jWP']=ee.$0(gi);dU.executeServerCommand(gc,'immediately');z.get_instance().get_workbook().withDashboard(function(gj){gj.set_portSize(e)})};global.tab.SheetClientCommands=ee;var ef=function(e,gc){db.call(this,e,new ds(gc.toString()))};ef.__typeName='tab.SheetListItemModel';global.tab.SheetListItemModel=ef;var eg=function(e){this.$4=null;this.$3=null;this.$2$1=null;db.call(this,e,new ds('Tbf'.toString()));this.$3=new p(this)};eg.__typeName='tab.SheetListModel';global.tab.SheetListModel=eg;var eh=function(e,gc,gd){this.sheetid=null;this.$2$1=null;B.call(this,e,gd);this.sheetid=gc};eh.__typeName='tab.SheetSession';global.tab.SheetSession=eh;var ei=function(){};ei.__typeName='tab.ShelfClientCommands';ei.setItemEncodingType=function(e,gc,gd){var ge=new Object;ge.commandNamespace='tabdoc'.toString();ge.commandName='set-item-encoding-type'.toString();ge.commandParams={};bk.addVisualIdToCommand(ge.commandParams,ei.$4());ge.commandParams['FsL']=e.get_paneId().toString();ge.commandParams['rsY']=ss.indexOf(e.get_pills(),gc).toString();ge.commandParams['Srb']=gd.toString();ge.commandParams['Ene']=e.get_shelfType().toString();dU.executeServerCommand(ge,'immediately')};ei.startDrag=function(e,gc,gd){var ge=$.Deferred();var gf=new Object;gf.commandNamespace='tabdoc'.toString();gf.commandName='get-drag-pres-model'.toString();gf.commandParams={};gf.commandParams['AVP']=tsConfig.current_sheet_name;gf.commandParams['beN']=tab.JsonUtil.toJson(false);if(ss.isValue(gd)){gf.commandParams['FsL']=tab.JsonUtil.toJson(gd)}ei.$2(gf.commandParams,e,gc);dU.executeServerCommand(gf,'none',ba.$3(Object).call(null,ge),function(){ge.reject()});return ge};ei.drillOnPill=function(e,gc,gd){var ge=new Object;ge.commandName='level-drill'.toString();ge.commandNamespace='tabdoc'.toString();ge.commandParams={};ge.commandParams['AVP']=tsConfig.current_sheet_name;ge.commandParams['Ene']=e.get_shelfType().toString();ge.commandParams['rsY']=gd.toString();ge.commandParams['LIP']=tab.JsonUtil.toJson(gc.get_shouldDrill());if(e.get_shelfType()==='encoding-shelf'){ge.commandParams['FsL']=e.get_paneId().toString()}ba.SendCommand(d.$0(ge,'immediately'))};ei.removeShelfPill=function(e,gc){var gd=ei.$1();gd.commandName='drop-nowhere'.toString();var ge=gd.commandParams;ge['FsL']=e.get_paneId();ge['tQC']=e.get_shelfType().toString();ei.$6(ge,gc.get_column(),gc.get_encodingType());ge['AEa']=[gc.get_item().bbx];ge['Qah']='drag-drop-shelf';var gf=ge['HzK'];gf.Ene=e.get_shelfType();gf.ZMD=ss.indexOf(e.get_pills(),gc);gf.UYq='replace';var gg=new U('immediately',function(gh){ei.$5(gh.makeMutablePresModel(e),gc.get_item())},gd);ba.SendCommand(gg)};ei.replaceShelfPill=function(e,gc,gd,ge,gf,gg){var gh=ss.indexOf(e.get_pills(),gc);var gi=gf.ZMD;var gj=ei.$1();var gk=gj.commandParams;ei.$6(gk,gc.get_column(),gc.get_encodingType());gk['AEa']=[gc.get_item().bbx];gk['Qah']='drag-drop-shelf';var gl=gk['HzK'];gl.Ene=e.get_shelfType();gl.ZMD=gh;gl.UYq='replace';gk['FsL']=gd.get_paneId();gk['QjG']='drag-drop-shelf';if(ss.isNullOrUndefined(gf)){gf=gk['FpB'];gf.Ene=gd.get_shelfType();gf.ZMD=gi;gf.Srb=ge.get_encodingType();gf.UYq='replace'}else{gk['FpB']=gf}if(gg){gk['ikr']=tab.JsonUtil.toJson(true)}var gm=new q(function(gn){if(!gg){var go=gn.makeMutablePresModel(e);ei.$5(go,gc.get_item())}var gp=gn.makeMutablePresModel(gd);ei.$5(gp,ge.get_item());var gq={};gq.MzX=gc.get_item().MzX;gq.HBp=gc.get_item().HBp;gq.Srb=ge.get_encodingType();gq.Sfw=ge.get_item().Sfw;ei.$0(gp,gq,gf,0)},gj,gd.get_shelfType());ba.SendCommand(gm)};ei.moveShelfPill=function(e,gc,gd,ge,gf){var gg=ei.$1();var gh=gg.commandParams;gh['AEa']=[gd.get_item().bbx];ei.$6(gh,gd.get_column(),gd.get_encodingType());if(gf){gh['ikr']=tab.JsonUtil.toJson(true)}gh['Qah']='drag-drop-shelf';var gi=gh['HzK'];gi.Ene=e.get_shelfType();gi.ZMD=ss.indexOf(e.get_pills(),gd);gi.UYq='replace';if(ss.isNullOrUndefined(ge)){ge=gh['FpB'];ge.Ene=gc.get_shelfType();ge.ZMD=0;ge.UYq=(ss.referenceEquals(e,gc)?'swap':'insert')}gh['QjG']='drag-drop-shelf';gh['FsL']=gc.get_paneId();gh['FpB']=ge;var gj=new q(function(gk){var gl={};gl.MzX=gd.get_item().MzX;gl.HBp=gd.get_item().HBp;gl.Srb=ge.Srb;var gm=gk.makeMutablePresModel(gc);ei.$0(gm,gl,ge,0);if(!gf){var gn=gk.makeMutablePresModel(e);ei.$5(gn,gd.get_item())}},gg,gc.get_shelfType());ba.SendCommand(gj)};ei.movePillToEncoding=function(e,gc,gd,ge,gf,gg){var gh=ei.$1();var gi=gh.commandParams;gi['AEa']=[ge.get_item().bbx];gi['Qah']='drag-drop-shelf';var gj=gi['HzK'];gj.Ene=e.get_shelfType();gj.ZMD=ss.indexOf(e.get_pills(),ge);gj.Srb=ge.get_encodingType();gj.UYq='replace';gj.AYC=false;ei.$6(gi,ge.get_column(),ge.get_encodingType());if(gf){gi['ikr']=tab.JsonUtil.toJson(true)}if(ss.isNullOrUndefined(gg)){gg=gi['FpB'];gg.Ene='encoding-shelf';gg.ZMD=0;gg.UYq='insert';gg.Srb=gd;gg.AYC=true}gi['QjG']='drag-drop-shelf';gi['FsL']=gc.get_paneId();gi['FpB']=tab.JsonUtil.toJson(gg);var gk=new q(function(gl){var gm=gl.makeMutablePresModel(e);if(!gf){ei.$5(gm,ge.get_item())}var gn={};gn.MzX=ge.get_column().get_description();gn.HBp=ge.get_column().get_globalName();gn.Srb=gd;gn.Sfw=ge.get_item().Sfw;ei.$0(gm,gn,gg,0)},gh,gc.get_shelfType());ba.SendCommand(gk)};ei.addEncodingFields=function(e,gc,gd,ge,gf){var gg=ei.$1();var gh=gg.commandParams;if(ss.isNullOrUndefined(ge)){ge=gh['FpB'];ge.Ene='encoding-shelf';ge.ZMD=0;ge.UYq='insert';ge.Srb=gd}if(gf){gh['wXB']=tab.JsonUtil.toJson(true)}ei.$2(gh,gc,'invalid-encoding');gh['FsL']=e.get_paneId();gh['Qah']='drag-drop-schema';gh['QjG']='drag-drop-shelf';gh['FpB']=tab.JsonUtil.toJson(ge);var gi=new q(function(gj){var gk=gj.makeMutablePresModel(e);for(var gl=0;gl<gc.length;gl++){var gm=gc[gl];var gn={};gn.MzX=gm.get_description();gn.HBp=gm.get_globalName();gn.Srb=gd;gn.Sfw=[{}];gn.Sfw[0].DIk=true;gn.Sfw[0].Tsz=true;gn.Sfw[0].Srb=gn.Srb;ei.$0(gk,gn,ge,0)}},gg,e.get_shelfType());ba.SendCommand(gi)};ei.addShelfField=function(e,gc,gd,ge){var gf=ei.$1();var gg=gf.commandParams;if(ss.isNullOrUndefined(ge)){ge=gg['FpB'];ge.Ene=e.get_shelfType();ge.ZMD=0;ge.UYq='insert';ge.Srb=gd}ei.$2(gg,gc,'invalid-encoding');gg['FsL']=e.get_paneId();gg['Qah']='drag-drop-schema';gg['QjG']='drag-drop-shelf';gg['FpB']=ge;if(gd!=='invalid-encoding'){gg['Srb']=gd.toString()}var gh=new q(function(gi){var gj=0;for(var gk=0;gk<gc.length;gk++){var gl=gc[gk];var gm={};gm.MzX=gl.get_description();gm.HBp=gl.get_globalName();gm.Srb=((e.get_shelfType()==='encoding-shelf'&&gd==='invalid-encoding')?'level-of-detail-encoding':gd);var gn=gi.makeMutablePresModel(e);ei.$0(gn,gm,ge,gj);gj++}},gf,e.get_shelfType());ba.SendCommand(gh)};ei.replaceShelfPillWithField=function(e,gc,gd,ge){var gf=ei.$1();var gg=gf.commandParams;if(ss.isNullOrUndefined(ge)){ge=gg['FpB'];ge.Ene=e.get_shelfType();ge.ZMD=ss.indexOf(e.get_pills(),gc);ge.UYq='replace';ge.Srb=gc.get_encodingType()}ei.$2(gg,gd,'invalid-encoding');gg['FsL']=e.get_paneId();gg['AEa']=[];gg['Qah']='drag-drop-schema';gg['QjG']='drag-drop-shelf';gg['FpB']=ge;var gh=new q(function(gi){var gj=gi.makeMutablePresModel(e);var gk=0;for(var gl=0;gl<gd.length;gl++){var gm=gd[gl];var gn={};gn.MzX=gm.get_description();gn.HBp=gm.get_globalName();gn.Srb=gc.get_encodingType();gn.Sfw=gc.get_item().Sfw;ei.$0(gj,gn,ge,gk);gk++}},gf,e.get_shelfType());ba.SendCommand(gh)};ei.setCommandParams=function(e,gc){bk.addVisualIdToCommand(gc,ei.$4());var gd=new ss.ObjectEnumerator(gc);try{while(gd.moveNext()){var ge=gd.current();var gf=ge.value;if(ss.isNullOrUndefined(gf)||_.isString(gf)||_.isBoolean(gf)||_.isNumber(gf)){}else if(_.isObject(gf)||_.isArray(gf)){gc[ge.key]=tab.JsonUtil.toJson(gf)}}}finally{gd.dispose()}e.commandParams=gc};ei.$1=function(){var e=new Object;e.commandNamespace='tabdoc'.toString();e.commandName='drop-on-shelf'.toString();var gc={};gc['Qah']='drag-drop-none';gc['QjG']='drag-drop-none';gc['tQC']='';gc['ikr']=false;gc['Pq_']=false;gc['beN']=false;gc['xyL']='none';gc['HzK']={};gc['FpB']={};e.commandParams=gc;return e};ei.$3=function(e,gc){var gd={};gd.HBp=e.get_globalName();if(ss.isValue(gc)&&gc!=='invalid-encoding'){gd.Srb=gc}return gd};ei.$6=function(e,gc,gd){e['JPc']=tab.JsonUtil.toJson([ei.$3(gc,gd)])};ei.$2=function(e,gc,gd){var ge=_.map(gc,function(gf){return ei.$3(gf,gd)});e['JPc']=tab.JsonUtil.toJson(ge)};ei.$0=function(e,gc,gd,ge){var gf=((ge>0)?'insert':(gd.UYq||'insert'));switch(gf){case'insert':{ss.insert(ei.$7(e.zcg),gd.ZMD+ge,gc);break}case'replace':{e.zcg[gd.ZMD]=gc;break}case'replace-all':{e.zcg[gd.ZMD]=gc;e.zcg=_.filter(e.zcg,function(gg){return gg.Srb!==gd.Srb||ss.referenceEquals(gg,gc)});break}}};ei.$5=function(e,gc){e.zcg=_.filter(e.zcg,function(gd){return!_.isEqual(gd,gc)})};ei.$7=function(e){return e};ei.$4=function(){return de.getVisualId(tsConfig.current_sheet_name)};global.tab.ShelfClientCommands=ei;var ej=function(e){db.call(this,e,new ds('zcg'.toString(),1))};ej.__typeName='tab.ShelfItemsArrayModel';global.tab.ShelfItemsArrayModel=ej;var ek=function(e){db.call(this,e,new ds('PmI'.toString(),1))};ek.__typeName='tab.ShelfListArrayModel';global.tab.ShelfListArrayModel=ek;var el=function(e,gc){this.$4=null;this.$2$1=null;db.call(this,e,new ds(gc.toString()))};el.__typeName='tab.ShelfModel';global.tab.ShelfModel=el;var em=function(e){this.$5=[];this.$2$1=null;db.call(this,e,new ds('MiB'.toString()))};em.__typeName='tab.ShelvesModel';em.createShelfModel=function(e,gc,gd,ge){var gf=new el(new ek(e),ge);gf.update(gc,gd);return gf};global.tab.ShelvesModel=em;var en=function(e){this.$0=null;this.$0=e};en.__typeName='tab.SimpleCommandsPresModelWrapper';en.create=function(e){if(ss.isNullOrUndefined(e)){return null}return new en(e)};global.tab.SimpleCommandsPresModelWrapper=en;var eo=function(e,gc){this.$2$1=null;db.call(this,e,new ds(gc.toString()))};eo.__typeName='tab.SizeItemModel';global.tab.SizeItemModel=eo;var ep=function(e){this.$2$1=null;db.call(this,e,new ds('$tK'.toString()))};ep.__typeName='tab.SortIndicatorsModel';global.tab.SortIndicatorsModel=ep;var eq=function(){};eq.__typeName='tab.SortServerCommands';eq.sortFromIndicator=function(e,gc,gd){var ge=[];var gf=de.getZoneIdForSheetName(gd.AVP);if(tsConfig.allow_select&&gf!==-1&&!de.isActiveZone(gf)){var gg=dN.buildActiveZoneClientCommand(gf);ge.push(gg)}var gh=new Object;gh.commandNamespace='tabdoc'.toString();gh.commandName='sort-from-indicator'.toString();gh.commandParams=eq.$0(e,gc,gd);var gi=new U('afterDelay',null,gh);ge.push(gi);var gj=new bn('afterDelay',ge);ba.SendCommand(gj)};eq.$0=function(e,gc,gd){var ge={};var gf={x:Math.floor(e.x),y:Math.floor(e.y)};bk.addVisualIdToCommand(ge,gd);ge['hcY']=tab.JsonUtil.toJson(tab.PointUtil.toPresModel(gf));ge['xxA']=tab.JsonUtil.toJson(tab.PointUtil.toPresModel(gc));return ge};global.tab.SortServerCommands=eq;var er=function(){};er.__typeName='tab.StartupUtils';er.add_modelsInitialized=function(e){er.$1$1=ss.delegateCombine(er.$1$1,e)};er.remove_modelsInitialized=function(e){er.$1$1=ss.delegateRemove(er.$1$1,e)};er.add_clientFullyLoaded=function(e){er.$1$2=ss.delegateCombine(er.$1$2,e)};er.remove_clientFullyLoaded=function(e){er.$1$2=ss.delegateRemove(er.$1$2,e)};er.callAfterBootstrap=function(e){if(er.$1){e()}else{var gc=null;gc=function(){e();er.remove_clientFullyLoaded(gc)};er.add_clientFullyLoaded(gc)}};er.callAfterModelsInitialized=function(e){if(er.$2){e()}else{var gc=null;gc=function(){e();er.remove_modelsInitialized(gc)};er.add_modelsInitialized(gc)}};er.notifyModelsInitialized=function(){if(er.$2){return}er.$2=true;if(!ss.staticEquals(er.$1$1,null)){er.$1$1()}};er.$0=function(){if(er.$1){return}er.$1=true;if(!ss.staticEquals(er.$1$2,null)){er.$1$2()}};global.tab.StartupUtils=er;var es=function(){};es.__typeName='tab.StoryClientCommands';es.setActiveStoryPoint=function(e,gc){var gd=$.Deferred();if(!z.get_instance().get_workbook().get_isCurrentSheetStoryboard()||gc.get_currentPointIndex()===e){gd.resolve();return gd.promise()}var ge=new U('none',function(gf){es.$7(e,gc,gf)},es.$0(gc.get_storyPoints()[e].hVl),ba.$2(gd),ba.$1(gd));ba.SendCommand(ge);return gd.promise()};es.nextStoryPoint=function(e){var gc=$.Deferred();if(!z.get_instance().get_workbook().get_isCurrentSheetStoryboard()){gc.reject("The workbook's current sheet is not a story");return gc.promise()}var gd=new U('none',function(ge){es.$7(e.get_currentPointIndex()+1,e,ge)},es.$1(),ba.$2(gc),ba.$1(gc));ba.SendCommand(gd);return gc.promise()};es.previousStoryPoint=function(e){var gc=$.Deferred();if(ss.isNullOrUndefined(z.get_instance().get_workbook().get_storyboard())){gc.reject("The workbook's current sheet is not a story");return gc.promise()}var gd=new U('none',function(ge){es.$7(e.get_currentPointIndex()-1,e,ge)},es.$2(),ba.$2(gc),ba.$1(gc));ba.SendCommand(gd);return gc.promise()};es.revertStoryPoint=function(e,gc){var gd=$.Deferred();var ge=new U('none',function(gf){es.$6()},es.$3(e,gc),ba.$2(gd),ba.$1(gd));ba.SendCommand(ge);return gd.promise()};es.$6=function(){es.$5()};es.$3=function(e,gc){var gd=bk.newDocCommand('revert-story-point');gd.commandParams={};bk.addStoryPointToCommand(gd.commandParams,e);gd.commandParams['hVl']=gc.toString();return gd};es.$7=function(e,gc,gd){if(ss.isValue(gc)){var ge=gd.makeMutablePresModel(gc);ge.yTB=e;es.$5()}};es.$0=function(e){var gc=es.$4('set-active-story-point');gc.commandParams['hVl']=e.toString();gc.commandParams['pLR']='false';gc.commandParams['XLf']='true';return gc};es.$1=function(){var e=es.$4('next-story-point');e.commandParams['pLR']='false';e.commandParams['XLf']='true';return e};es.$2=function(){var e=es.$4('previous-story-point');e.commandParams['pLR']='false';e.commandParams['XLf']='true';return e};es.$4=function(e){var gc=bk.newDocCommand(e);var gd=z.get_instance().get_workbook().get_storyboard().get_flipboard();var ge={};ge['Hna']=tsConfig.current_sheet_name;ge['WIZ']=gd.get_zoneId();gc.commandParams=ge;return gc};es.$5=function(){var e=z.get_instance().get_workbook().get_storyboard().get_flipboard();if(ss.isValue(e)){e.invalidated()}};global.tab.StoryClientCommands=es;var et=function(e,gc){this.$5=null;this.$2$1=null;this.$2$2=null;db.call(this,e,new ds(gc.toString(),0));this.$5=new bv(this,'dashboardPresModel')};et.__typeName='tab.StoryPointModel';global.tab.StoryPointModel=et;var eu=function(e){this.$3=null;db.call(this,e,new ds('stK'.toString()))};eu.__typeName='tab.StoryPointsModel';global.tab.StoryPointsModel=eu;var ev=function(e){this.$0=null;this.$0=e};ev.__typeName='tab.SubscriptionDisposable';global.tab.SubscriptionDisposable=ev;var ew=function(){ss.makeGenericType(A,[Object,ex]).call(this)};ew.__typeName='tab.TableCalcAddCmd';global.tab.TableCalcAddCmd=ew;var ex=function(e){this.$c=null;this.$c=e};ex.__typeName='tab.TableCalcAddCmd$Response';global.tab.TableCalcAddCmd$Response=ex;var ey=function(){ss.makeGenericType(A,[Object,ez]).call(this)};ey.__typeName='tab.TableCalcChangeTypeCmd';global.tab.TableCalcChangeTypeCmd=ey;var ez=function(e){this.$c=null;this.$c=e};ez.__typeName='tab.TableCalcChangeTypeCmd$Response';global.tab.TableCalcChangeTypeCmd$Response=ez;var eA=function(){ss.makeGenericType(A,[Object,eB]).call(this)};eA.__typeName='tab.TableCalcCloseCmd';global.tab.TableCalcCloseCmd=eA;var eB=function(e){this.$c=null;this.$c=e};eB.__typeName='tab.TableCalcCloseCmd$Response';global.tab.TableCalcCloseCmd$Response=eB;var eC=function(){ss.makeGenericType(A,[Object,eD]).call(this)};eC.__typeName='tab.TableCalcEditCmd';global.tab.TableCalcEditCmd=eC;var eD=function(e){this.$c=null;this.$c=e};eD.__typeName='tab.TableCalcEditCmd$Response';global.tab.TableCalcEditCmd$Response=eD;var eE=function(){ss.makeGenericType(A,[Object,eF]).call(this)};eE.__typeName='tab.TableCalcEditDefaultsCmd';global.tab.TableCalcEditDefaultsCmd=eE;var eF=function(e){this.$c=null;this.$c=e};eF.__typeName='tab.TableCalcEditDefaultsCmd$Response';global.tab.TableCalcEditDefaultsCmd$Response=eF;var eG=function(e,gc){this.$5=null;this.$7=null;this.$6=null;this.$2$1=null;db.call(this,e,new ds('OKS'.toString()));this.$6=new eI(this,gc);this.$5=gc};eG.__typeName='tab.TableCalcModel';eG.$0=function(e,gc){if(!(gc in e.wqq)){return null}return e.wqq[gc]};global.tab.TableCalcModel=eG;var eH=function(e,gc){this.$1=null;this.$0=null;this.$1=e;this.$0=gc};eH.__typeName='tab.TableCalcNesting';global.tab.TableCalcNesting=eH;var eI=function(e,gc){this.$3=null;this.$2$1=null;db.call(this,e,new ds('xtX'.toString()));this.$3=gc};eI.__typeName='tab.TableCalcOrderingModel';global.tab.TableCalcOrderingModel=eI;var eJ=function(){ss.makeGenericType(A,[Object,eK]).call(this)};eJ.__typeName='tab.TableCalcSetAddressingFieldsCmd';global.tab.TableCalcSetAddressingFieldsCmd=eJ;var eK=function(e){this.$c=null;this.$c=e};eK.__typeName='tab.TableCalcSetAddressingFieldsCmd$Response';global.tab.TableCalcSetAddressingFieldsCmd$Response=eK;var eL=function(){ss.makeGenericType(A,[Object,eM]).call(this)};eL.__typeName='tab.TableCalcSetAddressingFieldsOrderCmd';global.tab.TableCalcSetAddressingFieldsOrderCmd=eL;var eM=function(e){this.$c=null;this.$c=e};eM.__typeName='tab.TableCalcSetAddressingFieldsOrderCmd$Response';global.tab.TableCalcSetAddressingFieldsOrderCmd$Response=eM;var eN=function(){ss.makeGenericType(A,[Object,eO]).call(this)};eN.__typeName='tab.TableCalcSetAtTheLevelFieldCmd';global.tab.TableCalcSetAtTheLevelFieldCmd=eN;var eO=function(e){this.$c=null;this.$c=e};eO.__typeName='tab.TableCalcSetAtTheLevelFieldCmd$Response';global.tab.TableCalcSetAtTheLevelFieldCmd$Response=eO;var eP=function(){ss.makeGenericType(A,[Object,eQ]).call(this)};eP.__typeName='tab.TableCalcSetCumulativeOptionsCmd';global.tab.TableCalcSetCumulativeOptionsCmd=eP;var eQ=function(e){this.$c=null;this.$c=e};eQ.__typeName='tab.TableCalcSetCumulativeOptionsCmd$Response';global.tab.TableCalcSetCumulativeOptionsCmd$Response=eQ;var eR=function(){ss.makeGenericType(A,[Object,eS]).call(this)};eR.__typeName='tab.TableCalcSetCustomOptionsCmd';global.tab.TableCalcSetCustomOptionsCmd=eR;var eS=function(e){this.$c=null;this.$c=e};eS.__typeName='tab.TableCalcSetCustomOptionsCmd$Response';global.tab.TableCalcSetCustomOptionsCmd$Response=eS;var eT=function(){ss.makeGenericType(A,[Object,eU]).call(this)};eT.__typeName='tab.TableCalcSetDifferenceOptionsCmd';global.tab.TableCalcSetDifferenceOptionsCmd=eT;var eU=function(e){this.$c=null;this.$c=e};eU.__typeName='tab.TableCalcSetDifferenceOptionsCmd$Response';global.tab.TableCalcSetDifferenceOptionsCmd$Response=eU;var eV=function(){ss.makeGenericType(A,[Object,eW]).call(this)};eV.__typeName='tab.TableCalcSetOrderingTypeCmd';global.tab.TableCalcSetOrderingTypeCmd=eV;var eW=function(e){this.$c=null;this.$c=e};eW.__typeName='tab.TableCalcSetOrderingTypeCmd$Response';global.tab.TableCalcSetOrderingTypeCmd$Response=eW;var eX=function(){ss.makeGenericType(A,[Object,eY]).call(this)};eX.__typeName='tab.TableCalcSetPercentTotalOptionsCmd';global.tab.TableCalcSetPercentTotalOptionsCmd=eX;var eY=function(e){this.$c=null;this.$c=e};eY.__typeName='tab.TableCalcSetPercentTotalOptionsCmd$Response';global.tab.TableCalcSetPercentTotalOptionsCmd$Response=eY;var eZ=function(){ss.makeGenericType(A,[Object,fa]).call(this)};eZ.__typeName='tab.TableCalcSetRankSortDirectionCmd';global.tab.TableCalcSetRankSortDirectionCmd=eZ;var fa=function(e){this.$c=null;this.$c=e};fa.__typeName='tab.TableCalcSetRankSortDirectionCmd$Response';global.tab.TableCalcSetRankSortDirectionCmd$Response=fa;var fb=function(){ss.makeGenericType(A,[Object,fc]).call(this)};fb.__typeName='tab.TableCalcSetRankTypeCmd';global.tab.TableCalcSetRankTypeCmd=fb;var fc=function(e){this.$c=null;this.$c=e};fc.__typeName='tab.TableCalcSetRankTypeCmd$Response';global.tab.TableCalcSetRankTypeCmd$Response=fc;var fd=function(){ss.makeGenericType(A,[Object,fe]).call(this)};fd.__typeName='tab.TableCalcSetRestartEveryFieldCmd';global.tab.TableCalcSetRestartEveryFieldCmd=fd;var fe=function(e){this.$c=null;this.$c=e};fe.__typeName='tab.TableCalcSetRestartEveryFieldCmd$Response';global.tab.TableCalcSetRestartEveryFieldCmd$Response=fe;var ff=function(){ss.makeGenericType(A,[Object,fg]).call(this)};ff.__typeName='tab.TableCalcSetSortAggregationCmd';global.tab.TableCalcSetSortAggregationCmd=ff;var fg=function(e){this.$c=null;this.$c=e};fg.__typeName='tab.TableCalcSetSortAggregationCmd$Response';global.tab.TableCalcSetSortAggregationCmd$Response=fg;var fh=function(){ss.makeGenericType(A,[Object,fi]).call(this)};fh.__typeName='tab.TableCalcSetSortDirectionCmd';global.tab.TableCalcSetSortDirectionCmd=fh;var fi=function(e){this.$c=null;this.$c=e};fi.__typeName='tab.TableCalcSetSortDirectionCmd$Response';global.tab.TableCalcSetSortDirectionCmd$Response=fi;var fj=function(){ss.makeGenericType(A,[Object,fk]).call(this)};fj.__typeName='tab.TableCalcSetSortFieldCmd';global.tab.TableCalcSetSortFieldCmd=fj;var fk=function(e){this.$c=null;this.$c=e};fk.__typeName='tab.TableCalcSetSortFieldCmd$Response';global.tab.TableCalcSetSortFieldCmd$Response=fk;var fl=function(){ss.makeGenericType(A,[Object,fm]).call(this)};fl.__typeName='tab.TableCalcSetSortModeCmd';global.tab.TableCalcSetSortModeCmd=fl;var fm=function(e){this.$c=null;this.$c=e};fm.__typeName='tab.TableCalcSetSortModeCmd$Response';global.tab.TableCalcSetSortModeCmd$Response=fm;var fn=function(){ss.makeGenericType(A,[Object,fo]).call(this)};fn.__typeName='tab.TableCalcSetWindowOptionsCmd';global.tab.TableCalcSetWindowOptionsCmd=fn;var fo=function(e){this.$c=null;this.$c=e};fo.__typeName='tab.TableCalcSetWindowOptionsCmd$Response';global.tab.TableCalcSetWindowOptionsCmd$Response=fo;var fp=function(){ss.makeGenericType(A,[Object,fq]).call(this)};fp.__typeName='tab.TableCalcToggleSecondaryCalcCmd';global.tab.TableCalcToggleSecondaryCalcCmd=fp;var fq=function(e){this.$c=null;this.$c=e};fq.__typeName='tab.TableCalcToggleSecondaryCalcCmd$Response';global.tab.TableCalcToggleSecondaryCalcCmd$Response=fq;var fr=function(){};fr.__typeName='tab.TabResources';fr.getResourceName=function(e){return e.substring(e.lastIndexOf('/')+1,e.lastIndexOf('.'))};fr.lookupResourceAlias=function(e){return(ss.keyExists(fr.$0,e)?fr.$0[e]:'')};fr.lookupFullResourceAlias=function(e){var gc=e.split('/');var gd=((gc.length>0)?gc[gc.length-1]:e);return fr.lookupResourceAlias(gd)};fr.lookupTabRes=function(e){return fr.lookupResourceAlias(e)};fr.lookupDefaultTabRes=function(e){return':/'+tsConfig.locale+'/'+fr.lookupResourceAlias(e)};global.tab.TabResources=fr;var fs=function(e,gc){this.$2$1=null;db.call(this,e,new ds(gc))};fs.__typeName='tab.TextRegionModel';global.tab.TextRegionModel=fs;var ft=function(e){this.$2$1=null;db.call(this,e,new ds('R_T1'.toString()))};ft.__typeName='tab.ToolbarModel';global.tab.ToolbarModel=ft;var fu=function(){};fu.__typeName='tab.ToolbarServerCommands';fu.get_authoringVizUri=function(){var e;var gc=null;if(ss.isNullOrEmptyString(gc)){e=fN.createForAuthoringPublishedSheet(tsConfig.repositoryUrl)}else{e=fN.createForAuthoringUnpublishedSheet(tsConfig.repositoryUrl,gc)}e.removeHash();return e};fu.setAutoUpdate=function(e){var gc=new Object;gc.commandNamespace='tabsrv'.toString();gc.commandName='set-auto-update-server'.toString();var gd={};gd['chK']=e;gc.commandParams=gd;dU.executeServerCommand(gc,'immediately')};fu.refreshData=function(){var e=new Object;e.commandNamespace='tabsrv'.toString();e.commandName='refresh-data-server'.toString();var gc={};gc['IDV']=0;gc['jug']=true;e.commandParams=gc;dU.executeServerCommand(e,'immediately')};fu.launchEditing=function(){var e=fu.get_authoringVizUri();if(!tsConfig.openAuthoringInTopWindow&&(tabBootstrap.Utility.get_embedMode()==='embeddedNotInWg'||tsConfig.is_mobile_app)){tab.WindowHelper.open(e.get_uri(),'tableauAuthoring')}else{e.setTopWindowLocation()}};fu.downloadWorkbook=function(e){var gc;if(ss.isValue(e)){gc=e}else{gc=tsConfig.downloadURI}var gd;if(tsConfig.is_metrics_view){gd=ba.get().get_legacySession().metricsViewDownloadUrl()}else{gd=fu.$0(gc)}window.open(gd)};fu.exportData=function(e){if(ss.isNullOrUndefined(e)&&ss.isValue(de.findActiveOrDefaultVisual())){e=de.findActiveOrDefaultVisual().get_worksheetName()}var gc=de.findContentDashboard().getViewSession(e);if(ss.isValue(gc)){window.open(gc.formatUnderlyingDataURL(null),gc.getWindow('vud'),'scrollbars,resizable')}};fu.exportImage=function(e){var gc=z.get_instance().get_workbook().get_currentSheetStoryPointId();var gd=tableau.types.ExportDialogType['ExportImage'];var ge=[];var gf=[];if(de.findContentDashboard().get_isDashboard()){var gg=e.get_sheetScrollPositions();if(ss.isValue(gg)){var gh=ss.getEnumerator(Object.keys(gg));try{while(gh.moveNext()){var gi=gh.current();var gj=gg[gi];var gk=gj.x;var gl=gj.y;if(gk!==0||gl!==0){gf.push({x:gk,y:gl});ge.push(gi)}}}finally{gh.dispose()}}}bZ.exportImage(tsConfig.current_sheet_name,gc,gd,ge,gf)};fu.exportCrosstab=function(e){if(ss.isNullOrUndefined(e)&&ss.isValue(de.findActiveOrDefaultVisual())){e=de.findActiveOrDefaultVisual().get_worksheetName()}var gc=de.findContentDashboard().getViewSession(e);if(ss.isValue(gc)){var gd=tableau.types.ExportDialogType['ExportCrosstab'];gc.openDownload(gc.formatExportCrossTabURL('utf16'),gd)}};fu.exportPdf=function(e){e.triggerExportPdfUI()};fu.$0=function(e){if(ss.isValue(e)){var gc=e.match(fu.$1);if(ss.isValue(gc)&&gc.length>=2){return tabBootstrap.ViewerBootstrap.get_instance().location.protocol+'//'+tabBootstrap.ViewerBootstrap.get_instance().location.host+gc[1]}}return e};global.tab.ToolbarServerCommands=fu;var fv=function(){this.$1=null;this.$1=[]};fv.__typeName='tab.Transaction';global.tab.Transaction=fv;var fw=function(){this.$0=null};fw.__typeName='tab.Transactor';global.tab.Transactor=fw;var fx=function(e,gc){db.call(this,e,gc)};fx.__typeName='tab.TypeSpecificTableCalcModel';global.tab.TypeSpecificTableCalcModel=fx;var fy=function(){};fy.__typeName='tab.UberTipClientCommands';fy.$4=function(){return tab.MiscUtil.lazyInitStaticField(fy,'commandPermissions',function(){return dn.buildCommandPermission()})};fy.executeUbertipAction=function(e,gc,gd){var ge=new m(function(gf){u.executeAction(e,gc,gd,gf)});ba.SendCommand(ge)};fy.executeUbertipCommand=function(e){switch(e.commandType){case 1:{dN.clearAllSelections(de.findActiveOrDefaultVisual().get_visualId());break}case 2:case 10:{var gc=fy.$3(e);dU.executeServerCommand(gc,'immediately');break}case 4:case 11:case 12:case 13:case 15:case 17:case 18:case 22:{dU.executeServerCommand(e.command,'immediately');break}case 21:{dU.executeServerCommand(e.command,'immediately',bk.createCommandRedirectSuccessHandler(null),null);break}case 6:case 9:case 7:default:{return}}};fy.localAndRemoteUberTipCommand=function(e,gc,gd,ge,gf,gg,gh,gi,gj,gk){var gl=fy.$0(e,gc,gd,ge,gg,gh,gi,gj,gk,gf);ba.SendCommand(gl)};fy.$0=function(e,gc,gd,ge,gf,gg,gh,gi,gj,gk){var gl=new b(function(gm){if(!z.get_instance().get_isLocalRenderMode()){return}var gn=fz.createLocalUberTipModel(e,de.getVisualModelFromVisualId(gd),gf,tsConfig.is_authoring);if(ss.isValue(gn)){gn.isUpdate=false;dn.filterCommands(gn.commands,fy.$4())}gg(gn);u.executeActions(gd.AVP,'on-hover',gf.get_interactedTupleIds(),gm)},fy.$2(gc,gd,ge,gj,gk),fy.$1(true,gh),gi);return gl};fy.localOnlyUbertipCommand=function(e,gc,gd,ge){var gf=fy.buildLocalOnlyUbertipCommand(e,gc,gd,ge);gf.set_commandName('render-tooltip-server'.toString());ba.SendCommand(gf)};fy.buildLocalOnlyUbertipCommand=function(e,gc,gd,ge){var gf=new b(function(gg){var gh=fz.createLocalUberTipModel(e,de.getVisualModelFromVisualId(gc),gd,tsConfig.is_authoring);if(ss.isValue(gh)){gh.isUpdate=false;dn.filterCommands(gh.commands,fy.$4())}ge(gh);u.executeActions(gc.AVP,'on-hover',gd.get_interactedTupleIds(),gg)},null,null,null);return gf};fy.remoteOnlyUbertipCommand=function(e,gc,gd,ge,gf,gg,gh,gi){var gj=fy.buildRemoteOnlyUberTipCommand(e,gc,gd,ge,gf,gg,gh,gi);ba.SendCommand(gj)};fy.buildRemoteOnlyUberTipCommand=function(e,gc,gd,ge,gf,gg,gh,gi){var gj=null;if(gi&&ss.isValue(gh)){gj=function(gl){u.executeActions(gc.AVP,'on-hover',gh,gl)}}var gk=new b(gj,fy.$2(e,gc,gd,gg),fy.$1(false,ge),gf);return gk};fy.$2=function(e,gc,gd,ge,gf){var gg=new Object;gg.commandNamespace='tabsrv'.toString();gg.commandName='render-tooltip-server'.toString();var gh={};bk.addVisualIdToCommand(gh,gc);if(ss.isValue(gf)){gh['nSc']=[gf]}var gi=new Object;var gj=fM.create(gi);gj.set_r(e);gj.set_x(Math.round(gd.x));gj.set_y(Math.round(gd.y));gj.set_w(Math.round(gd.w));gj.set_h(Math.round(gd.h));gh['vpK']=gi;gh['QoN']=tsConfig.is_mobile||ge==='on-hover';gh['dhR']=true;gh['_JU']=tsConfig.is_mobile;gh['dkd']=true;gg.commandParams=gh;return gg};fy.$1=function(e,gc){return function(gd){if(!ss.isValue(gd)){return}var ge=tab.JsonUtil.parseJson(gd.toString());var gf=fz.deserializeUbertip(ge);if(ss.isValue(gf)){gf.isUpdate=e;dn.filterCommands(gf.commands,fy.$4())}if(ss.isValue(gc)){gc(gf)}}};fy.$3=function(e){var gc=bk.duplicateCommand(e.command);var gd=gc.commandParams;var ge=gd['OBN'];delete gd['OBN'];if(!ss.keyExists(gd,'ArG')&&ss.isValue(ge)){var gf=[parseInt(ge.toString())];var gg={};gg.kyj=gf;gg.coe='tuples';gd['Gvh']=gg}return gc};global.tab.UberTipClientCommands=fy;var fz=function(){};fz.__typeName='tab.UbertipSerializer';fz.deserializeUbertip=function(e){if(ss.isNullOrUndefined(e)){return null}var gc=[];var gd=[];var ge=[];if(ss.isValue(e.Jmx)){fz.$3(e.Jmx,gc,gd,ge)}var gf=[];if(ss.isValue(e.slk)){fz.$2(e.slk,gf,0)}var gg={};gg.tooltipHtml=fz.$6(e.LSs);gg.selectionHtml=fz.$6(e.lBv);gg.overlayImage=fz.$6(e.tkp);gg.overlayImageKey=fz.$6(e.MHp);gg.tupleId=e.OBN;gg.imageRegion=e.dpp;if(!ss.referenceEquals(gg.tupleId,0)){gg.interactedTupleId=gg.tupleId}gg.tupleSelected=e.vPt||false;gg.refLineSelected=e.CsR||false;gg.trendLineSelected=e.ioD||false;gg.isExplicitlyEmpty=e.ByD||false;gg.tooltipOffset=tab.PointUtil.fromPresModel(e.vGG);gg.markBounds=tab.RecordCast.rectPresModelAsRectXY(e.nwZ);gg.commands=gc;gg.subcommands=gd;gg.commandsAndSubcommands=ge;gg.actions=gf;if(ss.isValue(gg.overlayImage)||ss.isValue(gg.overlayImageKey)){var gh=e.CNg.length;gg.overlayAnchors=new Array(gh);for(var gi=0;gi<gh;++gi){var gj=e.CNg[gi];var gk=tab.PointUtil.fromPresModel(gj);gg.overlayAnchors[gi]={x:gk.x,y:gk.y}}}fz.$1(e,gc,ge,null);if(ss.isValue(gg.tooltipHtml)||ss.isValue(gg.selectionHtml)||gc.length>0||gf.length>0){return gg}return null};fz.createLocalUberTipModel=function(e,gc,gd,ge){var gf=gd.get_interactedTupleIds();var gg=gd.get_affectedTupleIds();var gh=gd.get_paneDescriptorKey();var gi=gc.get_vizDataModel();if(ss.isNullOrUndefined(gi)){return null}var gj=gi.get_ubertipData();var gk=fz.$5(gj,gh);var gl=z.get_instance().get_dataDictionary();var gm=null;var gn;var go=gk.LSs.toString().length===0;if(gf.length===1){gm=fz.$7(gl,gk,gi,gf);gn=gf[0]}else{gn=0}var gp=null;var gq=false;if(gg.length>1&&gk.BWC){gq=true;gp=fz.$4(gl,gi,gg,gk.zDK)}var gr=[];var gs=((gg.length>1)?0:gg[0]);if(gs<0){gs=0}var gt=[];if(gk.BWC&&gi.hasDimensionColumnNotMeasureNames()){if(fL.hasTupleWithNonTotalValue(gi,gl,gg)){fz.$2(gj.qCD,gr,gs)}if(gq){fz.$2(gj.NV$,gr,gs)}gr=gr.filter(function(gz){return gz.commandType!==10});fz.$1(null,gr,null,e);if(ge){var gu={};gu.commandType=10;gu.imageRes=fr.lookupResourceAlias('TQRC_SPLIT');gu.name='';if(tsConfig.is_mobile){var gv=tab.Strings.UbertipMergeMobile;var gw=tab.Strings.UbertipSplitMobile;gu.description=((gw.length>gv.length)?gw:gv)}gt.push(gu)}}var gx=u.getApplicableActions(gc.get_visualId().AVP,'explicitly');gx=_.filter(gx,function(gz){if(gz.bg$==='explicitly'&&u.getActionType(gz)!=='url'&&gz.kDm.length===0){return false}return true});if(ss.isValue(gm)||ss.isValue(gp)||gr.length>0||gx.length>0){var gy={};gy.tooltipHtml=gm;gy.selectionHtml=gp;gy.tupleId=gs;gy.interactedTupleId=gn;gy.isExplicitlyEmpty=go;gy.actionPMs=gx;gy.commands=gr;gy.placeHolders=gt;gy.visualId=gc.get_visualId();return gy}return null};fz.$5=function(e,gc){if(e.cJ$.length===1){return e.cJ$[0]}for(var gd=0;gd<e.cJ$.length;gd++){var ge=e.cJ$[gd];if(ss.isValue(ge.uNv)){if(ss.referenceEquals(ge.uNv.fDN,gc)){return ge}}}return null};fz.$7=function(e,gc,gd,ge){return fL.constructHtml(e,gc.LSs,gd,ge)};fz.$4=function(e,gc,gd,ge){var gf=gc.getVizDataField(ge||'');if(ss.isValue(gf)){var gg=[];$.extend.apply(null,[true,gg].concat(fz.$8));gg[2]=gd.length.toString();gg[4]=tab.Strings.UbertipItemsSelected;if(gf.get_aggType()!=='sum'){gg[8]=tab.Strings.SumOf}gg[10]=ge;gg[14]='&lt;'+ge+'&gt;';var gh=gg.join('');return fL.constructHtml(e,gh,gc,gd)}else{fz.$9[2]=gd.length.toString();fz.$9[4]=tab.Strings.UbertipItemsSelected;return fz.$9.join('')}};fz.$1=function(e,gc,gd,ge){var gf=ss.isNullOrUndefined(ge);if(gc.length<=0){return}var gg=false;if(ss.isValue(e)&&ss.isValue(e.dpp)){switch(e.dpp){case'viz':case'xheader':case'yheader':case'bottomaxis':case'leftaxis':case'rightaxis':case'topaxis':{gg=true;break}}gg=gg&&!e.CsR&&!e.ioD}if(!tsConfig.previewMode&&(gg||!gf)){var gh={};gh.commandType=7;gh.status='enabled';gh.description=tab.Strings.UbertipViewData;gh.command=new Object;gh.command.commandName='viewData';gh.command.commandNamespace='tabdoc'.toString();gh.command.commandParams={};if(gf){for(var gi=0;gi<gc.length;gi++){var gj=gc[gi];if(ss.isValue(gj.command)&&ss.isValue(gj.command.commandParams)&&ss.keyExists(gj.command.commandParams,'ArG')){gh.command.commandParams['ArG']=gj.command.commandParams['ArG'];break}}}else{gh.command.commandParams['ArG']=tab.JsonUtil.toJson(tab.PointUtil.toPresModel(ge))}fz.$0(gh,gc,gd)}if(tsConfig.is_mobile){var gk={};gk.commandType=1;gk.name=tab.Strings.UbertipClearSelection;gk.status='enabled';fz.$0(gk,gc,gd)}};fz.$0=function(e,gc,gd){gc.push(e);if(ss.isValue(gd)){gd.push({item1:true,item2:gc.length-1})}};fz.$2=function(e,gc,gd){var ge=bj.create(e);if(ss.isNullOrUndefined(ge)||ss.isNullOrUndefined(ge.get_commandItems())){return}var gf=ge.get_commandItems();for(var gg=0;gg<gf.length;gg++){var gh=gf[gg];var gi=bd.create(gh);var gj={};gj.command=bh.deserialize(gi.get_command());if(ss.isValue(gj.command)){fz.buildCommandModelFromWrapper(gj,gi,gd);gc.push(gj)}if(ss.isValue(gi.get_commands())){fz.$2(gi.get_commands(),gc,gd)}}};fz.$3=function(e,gc,gd,ge){var gf=bj.create(e);if(ss.isNullOrUndefined(gf)||ss.isNullOrUndefined(gf.get_commandItems())){return}var gg=0;var gh=0;var gi=gf.get_commandItems();for(var gj=0;gj<gi.length;gj++){var gk=gi[gj];var gl=bd.create(gk);var gm={};gm.command=bh.deserialize(gl.get_command());if(ss.isValue(gm.command)){fz.buildCommandModelFromWrapper(gm,gl,0);gc.push(gm);ge.push({item1:true,item2:gg});gg++}if(ss.isValue(gl.get_commands())){gd.push(gl);ge.push({item1:false,item2:gh});gh++}}};fz.buildCommandModelFromWrapper=function(e,gc,gd){fz.setCommandType(e);e.name=gc.get_name();e.description=gc.get_description();if(!tab.MiscUtil.isNullOrEmpty(gc.get_iconRes())){e.imageRes=fr.lookupFullResourceAlias(gc.get_iconRes())}var ge=gc.get_enabled();e.status=((ss.isNullOrUndefined(ge)||ge)?'enabled':'disabled');if(gd!==0&&!ss.isValue(e.command.commandParams['ArG'])){e.command.commandParams['OBN']=gd.toString()}};fz.setCommandType=function(e){var gc=bh.getCommandType(e.command);if(ss.isValue(gc)){e.commandType=ss.unbox(gc)}};fz.$6=function(e){return(ss.isNullOrEmptyString(e)?null:e)};global.tab.UbertipSerializer=fz;var fA=function(){};fA.__typeName='tab.UriPathStripper';fA.getModuleFromPath=function(e,gc){var gd=tsConfig.site_root||'';var ge=e.indexOf(gd,0);var gf;if(ge===-1){gf=e.substr(1)}else{var gg=ge+gd.length;gf=e.substr(gg+1)}for(var gh=0;gh<gc.length;gh++){var gi=gc[gh];if(ss.startsWithString(gf,gi+'/')){return gi}}return''};fA.getMeatFromPath=function(e,gc){var gd=fA.getModuleFromPath(e,gc);var ge=e.indexOf(gd,0);return e.substr(ge+gd.length+1)};global.tab.UriPathStripper=fA;var fB=function(){};fB.__typeName='tab.UrlStringReplacementOutcome';global.tab.UrlStringReplacementOutcome=fB;var fC=function(){this.id=0;this.friendlyName=null;this.username=null};fC.__typeName='tab.User';global.tab.User=fC;var fD=function(e){db.call(this,e,new ds('geometry'))};fD.__typeName='tab.ViewGeometryModel';global.tab.ViewGeometryModel=fD;var fE=function(e,gc,gd,ge){this.$o=null;this.viewid=null;eh.call(this,e,gc,ge);this.viewid=gd;this.$o=dn.buildCommandPermission()};fE.__typeName='tab.ViewSession';fE.$0=function(e){var gc=e;if(ss.isValue(e)){gc={x:Math.round(e.x),y:Math.round(e.y)}}return gc};global.tab.ViewSession=fE;var fF=function(e){this.$3=null;this.$2$1=null;db.call(this,e,new ds('visuallist'))};fF.__typeName='tab.VisualListModel';global.tab.VisualListModel=fF;var fG=function(e){this.$q=null;this.$l=null;this.$d=null;this.$g={};this.$i=null;this.$b=null;this.$r=null;this.$p=null;this.$m=null;this.$o=null;this.$n=null;this.$s=null;this.$w=null;this.$f=null;this.$u=null;this.$t=null;this.$j=null;this.$k=null;this.$a=null;this.$h=null;this.$9=null;this.$e=null;this.$v=false;this.$c=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;db.call(this,e,new ds('uqP'.toString()));this.$k={};this.$a={};this.$h={};this.$9={};this.$q=new dP(this,'pUG'.toString());this.$l=new dO(null,-1);this.$d=new dP(this,'iyL'.toString());this.$v=true;this.$c=false;this.$l.update(dP.$1('tuples'))};fG.__typeName='tab.VisualModel';fG.$0=function(){return tab.Logger.lazyGetLogger(fG)};global.tab.VisualModel=fG;var fH=function(){};fH.__typeName='tab.VizClientCommands';fH.invalidateVisualModel=function(e){fH.$0(e,false)};fH.validateVisualModel=function(e){fH.$0(e,true)};fH.$0=function(e,gc){var gd=new m(function(ge){de.setVisualValidStateOnModel(ge,e,gc)});ba.SendCommand(gd)};global.tab.VizClientCommands=fH;var fI=function(e,gc){this.$a=null;this.$d=null;this.$c=false;this.$b=false;this.$e=null;this.$a=e;this.$d=gc;this.$e={};this.$6();this.$c=this.$1();this.$b=this.$0()};fI.__typeName='tab.VizDataField';global.tab.VizDataField=fI;var fJ=function(){};fJ.__typeName='tab.VizDataLookup';fJ.lookupDisplayValue=function(e,gc,gd){if(!gc.isTupleIdValid(e)){var ge=ss.formatString('Failed trying to look up the display value for tuple id "{0}" because it is invalid for field "{1}"',e,gc.get_fieldCaption());return null}var gf=null;if(gc.get_hasAliases()){gf=fJ.lookupAlias(e,gc,gd,false)}if(gf===null&&gc.get_hasDataValues()){gf=fJ.$0(e,gc,gd)}if(gf===null){var gg=ss.formatString('Failed trying to look up the display value for tuple id "{0}" and field "{1}"',e,gc.get_fieldCaption());return null}return gf};fJ.lookupAlias=function(e,gc,gd,ge){if(!gc.isTupleIdValid(e)){var gf=ss.formatString('Failed trying to look up the alias for tuple id "{0}" because it is invalid for field "{1}"',e,gc.get_fieldCaption());return null}var gg=gc.getAliasIndex(e);return fJ.lookupAliasFromIndex(gg,gc,gd,ge)};fJ.lookupAliasFromIndex=function(e,gc,gd,ge){var gf=null;if(ss.isValue(e)){if(ss.Nullable$1.ge(e,0)){var gg=e;gf=(ge?fJ.lookupRawDataValueFromIndex(gg,gc,gd):fJ.$1(gg,gc,gd))}else{e=ss.Nullable$1.sub(ss.Nullable$1.neg(e),1);gf=gd.getRawValue('cstring',ss.unbox(e));if(tableau.format.isSpecialValue(gf)&&!ge){gf=tableau.format.formatSpecial(gf,gc.get_specialValuesOverride())}}}return gf};fJ.lookupRawDataValue=function(e,gc,gd){var ge=gc.getDataValueIndex(e);return fJ.lookupRawDataValueFromIndex(ge,gc,gd)};fJ.lookupRawDataValueFromIndex=function(e,gc,gd){var ge=null;if(ss.isValue(e)){var gf;var gg=ss.unbox(e);if(gg>=0){gf=gc.get_dataType()}else{gg=-gg-1;gf='cstring'}var gh=gd.getRawValue(gf,gg);if(ss.isValue(gh)){ge=gh.toString()}}return ge};fJ.$0=function(e,gc,gd){var ge=gc.getDataValueIndex(e);return fJ.$1(ge,gc,gd)};fJ.$1=function(e,gc,gd){var ge=null;var gf=fJ.lookupRawDataValueFromIndex(e,gc,gd);if(ss.isValue(gf)){if(tableau.format.isSpecialValue(gf)){ge=tableau.format.formatSpecial(gf,gc.get_specialValuesOverride())}else{ge=tableau.format.formatString(gf,gc.get_vizColumnDoNotUse())}}return ge};fJ.reverseLookupAlias=function(e,gc,gd,ge){var gf=null;if(gd.get_hasAliases()){gc.forEachTupleId(function(gg){var gh=fJ.lookupAlias(gg,gd,ge,false);if(ss.compareStrings(gh,e,false)===0){gf=gd.getAliasIndex(gg);return false}return true})}return gf};fJ.isSpecial=function(e,gc,gd,ge){{var gf=fJ.lookupRawDataValue(e,gc,gd);if(ss.isValue(gf)){return(ss.isValue(ge)?ss.referenceEquals(gf,ge):tableau.format.isSpecialValue(gf))}}{var gg=gc.getAliasIndex(e);if(ss.isValue(gg)&&ss.Nullable$1.ge(gg,0)){var gh=gg;var gi=fJ.lookupRawDataValueFromIndex(gh,gc,gd);if(ss.isValue(gi)){return(ss.isValue(ge)?ss.referenceEquals(gi,ge):tableau.format.isSpecialValue(gi))}}}return false};global.tab.VizDataLookup=fJ;var fK=function(e){this.$6=null;this.$8=null;this.$7=null;this.$2$1=null;db.call(this,e,new ds('zFl'.toString()));this.$6=[];this.$7=[]};fK.__typeName='tab.VizDataModel';global.tab.VizDataModel=fK;var fL=function(){};fL.__typeName='tab.VizDataUtils';fL.constructUrl=function(e,gc,gd,ge,gf){var gg=function(gh,gi,gj){if(ss.isNullOrEmptyString(gi)){if(ss.isValue(ge)){return fL.$6(e,gh,ge,1,gc)}return null}var gk=fL.$1(e,gh,gi);if(gc.KAU){gk=encodeURIComponent(gk)}return gk};return fL.decodeAndReplaceData(gc.ZNi,'<','>',gd,gg)};fL.constructUrlForFilterActionFromTargetURL=function(e,gc,gd,ge,gf){var gg=function(go,gp,gq){return fL.$5(e,go,gf,gq,gd)};var gh=gc.toString().split('?');if(gh.length===1){return gc}var gi=gh[0]+'?';var gj=gh[1].split('&');var gk=[];for(var gl=0;gl<gj.length;gl++){var gm=gj[gl];var gn=fL.decodeAndReplaceData(gm,'<','>',ge,gg);if(gn.item2==='success'){gk.push(gn.item1)}}gi+=gk.join('&');return gi};fL.constructUrlFromString=function(e,gc,gd,ge,gf){var gg=function(gi,gj,gk){if(ss.isNullOrEmptyString(gj)){return fL.$2(e,gi,ge,1)}else{return fL.$1(e,gi,gj)}};var gh=fL.decodeAndReplaceData(gc,'<','>',gd,gg);return gh.item1};fL.constructHtml=function(e,gc,gd,ge){var gf=function(gj,gk,gl){return fL.$2(e,gj,ge,0)};var gg=fL.decodeAndReplaceData(gc,'&lt;','&gt;',gd,gf);var gh=$(gg.item1);var gi=[];fL.getNodesOfInvalidFields(gh,gi);fL.$0(gh,gi);if(tab.MiscUtil.isNullOrEmpty(gh.text())){return''}return gh.wrap('<div>').parent().html()};fL.decodeAndReplaceData=function(e,gc,gd,ge,gf){var gg='success';var gh=fL.$4(e,'escaped_open_tag');var gi=fL.$4(e,'escaped_close_tag');var gj=ss.replaceAllString(ss.replaceAllString(e,gc+gc,gh),gd+gd,gi);var gk=gj.split(gc);var gl=null;var gm=new ss.StringBuilder(gk[0]);for(var gn=1;gn<gk.length;++gn){var go=gk[gn];var gp=go.split(gd);var gq=ss.htmlDecode(ss.replaceAllString(ss.replaceAllString(gp[0],gh,gc),gi,gd));var gr=gp[1];var gs;var gt=true;var gu=gq.lastIndexOf(String.fromCharCode(126));var gv=gq.lastIndexOf(String.fromCharCode(93));if(gu>=0&&(gv===-1||gv<gu)){gs=gq.substr(gu);gq=gq.substr(0,gu);if(gs==='~na'){gt=false}}if(fL.$7(gq)){var gw=gq.indexOf('(');gl=gq.substring(0,gw);gq=gq.substring(gw+1,gq.length-1)}var gx=gq.indexOf(String.fromCharCode(91));var gy=gq.lastIndexOf(String.fromCharCode(93));if(gx>=0&&gx<gy){gq=gq.substring(gx+1,gy)}if(ss.startsWithString(gq,'Parameters.')){return{item1:'',item2:'notEnoughInfoYet'}}var gz=ge.getVizDataField(gq);if(ss.isNullOrUndefined(gz)){return{item1:'',item2:'urlConstructionFail'}}var gA=gf(gz,gl,gt);if(ss.isNullOrUndefined(gA)){gg='urlConstructionFail'}else{gm.append(gA)}gm.append(gr)}var gB=ss.replaceAllString(ss.replaceAllString(gm.toString(),gh,gc),gi,gd);return{item1:gB,item2:gg}};fL.hasTupleWithNonTotalValue=function(e,gc,gd){for(var ge=0;ge<gd.length;ge++){var gf={$:gd[ge]};var gg={$:false};e.forEachVizDataField(ss.mkdel({tupleId:gf,tupleHasTotal:gg},function(gh,gi){if(gh.get_role()==='dimension'){if(fJ.isSpecial(this.tupleId.$,gh,gc,'%all%')){this.tupleHasTotal.$=true;return false}}return true}));if(!gg.$){return true}}return false};fL.isFieldNameOfColumn=function(e,gc){var gd=fL.stripNewlines(e.HBp);var ge=fL.stripNewlines(gc);var gf='['+ge+']';return ss.referenceEquals(ge,gd)||ss.referenceEquals(ge,fL.stripNewlines(e._cX))||ss.referenceEquals(gf,gd)||ss.referenceEquals(gf,fL.stripNewlines(e.JDJ))};fL.isFieldCaptionOfColumn=function(e,gc){return ss.referenceEquals(fL.stripNewlines(gc),fL.stripNewlines(e.OLk))};fL.$4=function(e,gc){var gd=gc;while(e.indexOf(gd)>-1){gd+=Math.random()*10000|0}return gd};fL.stripNewlines=function(e){return(ss.isValue(e)?e.replace(fL.$8,''):null)};fL.getNodesOfInvalidFields=function(e,gc){var gd='';var ge=e.contents().get();for(var gf=0;gf<ge.length;gf++){var gg=ge[gf];if(gg.nodeType===3){gd+=gg.textContent||(gg.textContent||'')}else{fL.getNodesOfInvalidFields($(gg),gc)}}if(gd.indexOf('~~~???~~~')!==-1){gc.push(e)}};fL.addVizDataToZones=function(e,gc){var gd=ss.getEnumerator(Object.keys(e));try{while(gd.moveNext()){var ge=gd.current();var gf=new ss.ObjectEnumerator(gc);try{while(gf.moveNext()){var gg=gf.current();var gh=gg.value;if(gh.jAM==='viz'&&ss.referenceEquals(gh.Gge,ge)){var gi=gh.wqq['uqP'.toString()];if(ss.isValue(gi)){var gj=e[ge].wqq;gi.zFl=gj['genVizDataPresModel']}break}}}finally{gf.dispose()}}}finally{gd.dispose()}};fL.$0=function(e,gc){for(var gd=0;gd<gc.length;gd++){var ge=gc[gd];var gf=fL.$3(e,ge,'tr');if(ss.isValue(gf)){gf.remove()}else{var gg=fL.$3(e,ge,'div');if(ss.isValue(gg)){gg.remove()}else{ge.remove()}}}};fL.$3=function(e,gc,gd){var ge=gc;if(ss.isValue(e)&&ss.isValue(gc)&&e.find(gc).length===1){while(!ss.referenceEquals(ge[0],e[0])){if(ss.referenceEquals(ge[0].tagName.toLowerCase(),gd)){return ge}ge=ge.parent()}}return null};fL.$6=function(e,gc,gd,ge,gf){var gg=[];for(var gh=0;gh<gd.length;++gh){var gi=fJ.lookupAlias(gd[gh],gc,e,true);if(ss.isNullOrUndefined(gi)){continue}if(gi==='%many-values%'){continue}else if(tableau.format.isSpecialValue(gi)){gi=tableau.format.formatSpecial(gi,gc.get_specialValuesOverride())}if(gi.indexOf(gf.cqY)>=0){gi=ss.replaceAllString(gi,gf.cqY,gf.ivU+gf.cqY)}if(gf.KAU){gi=encodeURIComponent(gi)}gg.push(gi)}if(gg.length===0){return null}if(gg.length>1&&ss.isNullOrUndefined(gf.cqY)){return null}var gj=gg.join(gf.cqY);if(ge===0){gj=tableau.format.escapeHTML(gj)}return gj};fL.$5=function(e,gc,gd,ge,gf){var gg=[];for(var gh=0;gh<gd.length;gh++){var gi=gd[gh];var gj='';if(ge){gj=fJ.lookupAlias(gi,gc,e,false)}else{gj=fJ.lookupRawDataValue(gi,gc,e)}gj=ss.replaceAllString(gj,gf.cqY,gf.ivU+gf.cqY);gg.push(gj)}return encodeURIComponent(gg.join(gf.cqY))};fL.$2=function(e,gc,gd,ge){var gf;if(gd.length>1){if(!gc.get_hasDataValues()){return'...'}var gg=new Array(gd.length);for(var gh=0;gh<gd.length;++gh){var gi=fJ.lookupRawDataValue(gd[gh],gc,e);if(gi===null||tableau.format.isSpecialValue(gi)){gi='0'}else if(typeof(gi)==='undefined'||gi.length===0){return'...'}gg[gh]=gi}var gj=0;for(var gk=0;gk<gg.length;++gk){gj+=parseFloat(gg[gk])}gf=tableau.format.formatString(gj.toString(),gc.get_vizColumnDoNotUse())}else if(gd.length===1){var gl=fJ.lookupDisplayValue(gd[0],gc,e);if(ss.isNullOrUndefined(gl)){return'~~~???~~~'}gf=gl}else{return''}if(ge===0){return tableau.format.escapeHTML(gf)}else{return gf}};fL.$7=function(e){if(ss.startsWithString(e,'FILTERMAX(')){return true}else if(ss.startsWithString(e,'FILTERMIN(')){return true}else if(ss.startsWithString(e,'FILTERVALUES(')){return true}return false};fL.$1=function(e,gc,gd){var ge=new String;if(ss.isValue(gc)&&ss.isValue(gc.get_filterContext())){var gf=gc.get_filterContext();var gg=null;if(gd==='FILTERMAX'){gg=gf.jBo}else if(gd==='FILTERMIN'){gg=gf.lHq}else if(gd==='FILTERVALUES'){gg=gf.kLT}if(!tab.MiscUtil.isNullOrEmpty(gg)){var gh=[];for(var gi=0;gi<gg.length;gi++){var gj=gg[gi];var gk=fJ.lookupRawDataValueFromIndex(gj,gc,e);gh.push(gk)}ge=gh.join(',')}}return ge};global.tab.VizDataUtils=fL;var fM=function(e){this.$0=null;this.$0=e};fM.__typeName='tab.VizRegionRectWrapper';fM.create=function(e){return new fM(e)};global.tab.VizRegionRectWrapper=fM;var fN=function(e){this.explicitNotGuest=false;this.$k=0;this.$l='';this.$j='';this.$e='';this.$i={};this.$f='';this.$g='';this.$h='';if(ss.getKeyCount(fN.$9)===0){fN.$2()}if(ss.isValue(e)){this.$4(e)}};fN.__typeName='tab.VizUriModel';fN.createForCurrentWindowLocation=function(e){if(tab.MiscUtil.isNullOrEmpty(e)){e=tabBootstrap.Utility.get_locationWindow()}var gc=new fN(tab.WindowHelper.getLocation(e));return gc};fN.createForViewingSheet=function(e){var gc=fN.$0();gc.$k=1;var gd=new dG(e);gc.$l=gd.get_workbookId();gc.$j=gd.get_sheetId();gc.$f=gd.get_customizedView();gc.$e='';return gc};fN.createForCurrentWindowLocationAndVizState=function(e,gc){var gd=fN.createForCurrentWindowLocation();var ge=new dG(e);gd.$l=ge.get_workbookId();gd.$j=ge.get_sheetId();gd.$f=ge.get_customizedView();gd.$e=gc;return gd};fN.createForAuthoringUnpublishedSheet=function(e,gc){var gd=fN.createForAuthoringPublishedSheet(e);gd.$e=gc;return gd};fN.createForAuthoringPublishedSheet=function(e){var gc=fN.$0();gc.$k=2;var gd=new dG(e);gc.$l=gd.get_workbookId();gc.$j=gd.get_sheetId();gc.$e='';gc.$d();return gc};fN.createInvalid=function(){var e=new fN;e.$k=0;return e};fN.$2=function(){var e=ss.getEnumerator(Object.keys(fN.$d));try{while(e.moveNext()){var gc=e.current();fN.$9[fN.$d[gc]]=gc}}finally{e.dispose()}};fN.$0=function(e){if(tab.MiscUtil.isNullOrEmpty(e)){e=tabBootstrap.Utility.get_locationWindow()}var gc=tab.WindowHelper.getLocation(e);var gd=new fN;gd.$i=fN.$1(gc);gd.$g=gc.hash;gd.$h=tab.BrowserSupport.getOrigin(gc);return gd};fN.$1=function(e){var gc=tab.MiscUtil.getUriQueryParameters(e.href);for(var gd=0;gd<fN.$c.length;gd++){var ge=fN.$c[gd];if(ss.keyExists(gc,ge)){delete gc[ge]}}return gc};fN.encodeUserName=function(e){var gc=tab.MiscUtil.percentEncode(e,fN.$a);return ss.replaceAllString(gc,'%40','@')};global.tab.VizUriModel=fN;var fO=function(){};fO.__typeName='tab.VizUriType';global.tab.VizUriType=fO;var fP=function(){this.$8=null;this.$f=null;this.$c=0;this.$9=null;this.$g=null;this.$7=null;this.$e=null;this.$6=null;this.$d=null;this.$b=false;this.$a=false;this.$8=$('#loadingGlassPane');this.$8.bind('mousedown',false);this.$8.on('mousewheel DOMMouseScroll',function(e){e.preventDefault()});this.$f=$('#loadingSpinner');this.$c=0;this.$7=null;this.$e=null;this.$b=true;this.$a=false};fP.__typeName='tab.WaitHandler';global.tab.WaitHandler=fP;var fQ=function(e){this.$3=null;this.$2$1=null;db.call(this,e,new ds('_Ss'.toString()));this.$3=e.get_zone()};fQ.__typeName='tab.WebZoneModel';global.tab.WebZoneModel=fQ;var fR=function(e){this.$3$1=null;fx.call(this,e,new ds('xKN'.toString()))};fR.__typeName='tab.WindowTableCalcModel';global.tab.WindowTableCalcModel=fR;var fS=function(e){this.$7=null;this.$9=null;this.$a=null;this.$c=null;this.$8=null;this.$b=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;db.call(this,e,new ds('res'.toString()));this.$7=new bi(this);this.$a=new bG(this)};fS.__typeName='tab.WorkbookModel';fS.$1=function(e){if(fS.$0(e)){return e.mmK.nhM.xD}return null};fS.$0=function(e){return ss.isValue(e)&&ss.isValue(e.mmK)&&ss.isValue(e.mmK.nhM)};global.tab.WorkbookModel=fS;var fT=function(){};fT.__typeName='tab.WorkbookViewObjectUtils';fT.createVizUriModelForAuthoringSheetInWorkbook=function(e,gc){var gd;var ge=fT.findSheetIdBySheetNameInWorkbook(e,gc);if(ge.length>0){gd=fN.createForAuthoringPublishedSheet(gc.repositoryUrl+'/'+ge)}else{var gf=fT.findFirstSheetInWorkbook(gc);gd=fN.createForAuthoringUnpublishedSheet(gc.repositoryUrl+'/'+gf,e)}if(tab.MiscUtil.isNullOrEmpty(gd)){gd=fN.createInvalid()}return gd};fT.createVizUriModelForViewingSheetInWorkbook=function(e,gc){var gd;var ge=fT.findSheetIdBySheetNameInWorkbook(e,gc);if(ge.length>0){gd=fN.createForViewingSheet(gc.repositoryUrl+'/'+ge)}else{gd=fN.createInvalid()}return gd};fT.findSheetIdBySheetNameInWorkbook=function(e,gc){var gd=_.find(gc.views,function(ge){return ss.referenceEquals(ge.name,e)});if(ss.isNullOrUndefined(gd)){return''}return gd.sheetId};fT.findFirstSheetInWorkbook=function(e){var gc=_.first(e.views);if(ss.isNullOrUndefined(gc)){return''}return gc.sheetId};global.tab.WorkbookViewObjectUtils=fT;var fU=function(){};fU.__typeName='tab.WorkgroupServerCommands';fU.getWritableProjects=function(e){var gc=[];fU.$1('getWritableProjects',function(gd){var ge=fU.$8(gd);ss.arrayAddRange(gc,ge);return ge.length},function(){e(gc)},0,null)};fU.extendWorkgroupSession=function(){if(!tsConfig.is_guest){fY.helper(fU.$0('getSessionInfo',null,function(){},function(){}))}};fU.getSchedules=function(e){var gc=[];fU.$1('getSchedules',function(gd){var ge=fU.$9(gd);ss.arrayAddRange(gc,ge);return ge.length},function(){e(gc)},0,null)};fU.getDatasources=function(e){var gc=[];var gd={operator:'and',clauses:[{field:'isPublished',operator:'eq',value:true}]};fU.$1('getDatasources',function(ge){var gf=fU.$7(ge);ss.arrayAddRange(gc,gf);return gf.length},function(){e(gc)},0,gd)};fU.$1=function(e,gc,gd,ge,gf){var gg=[ss.mkdict(['field','name','ascending',true])];var gh=ss.mkdict(['page',ss.mkdict(['startIndex',ge]),'order',gg]);if(ss.isValue(gf)){gh['filter']=gf}var gi=fU.$0(e,gh,function(){},function(){});gi.success=function(gj,gk,gl){var gm=fU.$3(gj);if(fU.$6(gm)){gd()}else{var gn=gc(gm);var go=gm['moreItems'].toString().toLowerCase()==='true';if(go){fU.$1(e,gc,gd,ge+gn,gf)}else{gd()}}};fY.helper(gi)};fU.setUserEmail=function(e,gc,gd){fU.$4(function(ge){var gf=ss.mkdict(['userId',ge,'email',e]);fY.helper(fU.$0('updateUserEmail',gf,gc,gd))},gd)};fU.$4=function(e,gc){var gd=tsConfig.current_user_name;var ge=tsConfig.current_user_domain_name;var gf=[{field:'username',operator:'eq',value:gd},{field:'domainName',operator:'eq',value:ge}];var gg=ss.mkdict(['filter',{clauses:gf}]);fY.helper(fU.$0('getServerUsers',gg,function(gh){var gi=gh['users'];if(ss.isValue(gi)&&gi.length>0&&ss.keyExists(gi[0],'id')){var gj=gi[0]['id'];e(gj)}else{gc(fU.$2(gh))}},gc))};fU.createSubscription=function(e,gc,gd,ge,gf){var gg=ss.mkdict(['scheduleId',gd.get_id(),'subject',$.trim(e),'targetType',(gc?'Workbook':'View'),'targetId',(gc?tsConfig.current_workbook_id:tsConfig.current_view_id),'customizedViewId',tsConfig.current_custom_view_id]);fY.helper(fU.$0('createSubscription',gg,ge,gf))};fU.logOff=function(e){var gc=function(gd){var ge=gd['redirectUrl'];tab.WindowHelper.setLocationHref(window.self,(ss.isValue(ge)?ge:'/'))};fY.helper(fU.$0('logout',{},gc,e))};fU.$0=function(e,gc,gd,ge){var gf=new Object;gf.type='POST';gf.contentType='application/json;charset=UTF-8';gf.dataType='json';gf.url='/vizportal/api/web/v1/'+e;var gg=fU.$5();if(ss.isValue(gg)){gf.headers=ss.mkdict(['X-XSRF-TOKEN',gg])}gf.data=JSON.stringify(ss.mkdict(['method',e,'params',gc]));gf.success=function(gh,gi,gj){var gk=fU.$3(gh);if(fU.$6(gk)){ge(fU.$2(gk))}else{gd(gk)}};gf.error=function(){ge(0)};return gf};fU.$5=function(){var e=document.cookie.match(new RegExp('(^|;) ?XSRF-TOKEN=([^;]*)(;|$)'));return(ss.isValue(e)?e[2]:null)};fU.$6=function(e){if(ss.keyExists(e,'errors')){var gc=e['errors'];return gc.length>0}else{return false}};fU.$2=function(e){if(ss.keyExists(e,'errors')){var gc=e['errors'];if(gc.length>0&&ss.keyExists(gc[0],'code')){return gc[0]['code']}}return 0};fU.$8=function(e){var gc=e['projects'];var gd=[];for(var ge=0;ge<gc.length;ge++){var gf=gc[ge];var gg=new dv;gg.set_name(gf['name'].toString());gg.set_id(gf['id'].toString());gd.push(gg)}return Array.prototype.slice.call(gd)};fU.$9=function(e){var gc=e['schedules'];var gd=[];for(var ge=0;ge<gc.length;ge++){var gf=gc[ge];var gg=new dL;gg.set_name(gf['name'].toString());gg.set_id(gf['id'].toString());gg.set_action(((gf['scheduledAction'].toString().toLowerCase()==='extract')?dL.extract:dL.subscription));gd.push(gg)}return Array.prototype.slice.call(gd)};fU.$7=function(e){return e['datasources']};fU.$3=function(e){var gc=e;return gc['result']};global.tab.WorkgroupServerCommands=fU;var fV=function(){};fV.__typeName='tab.WorkgroupServerErrorCode';global.tab.WorkgroupServerErrorCode=fV;var fW=function(){};fW.__typeName='tab.WorksheetServerCommands';fW.revert=function(){var e=bk.newSrvCommand('revert-workbook');ba.SendCommand(d.$0(e,'immediately'))};fW.undoToPosition=function(e){var gc=bk.newDocCommand('undo');gc.commandParams=fW.$0(e);ba.SendCommand(d.$0(gc,'immediately'))};fW.undo=function(){var e=bk.newDocCommand('undo');ba.SendCommand(d.$0(e,'immediately'))};fW.redoToPosition=function(e){var gc=bk.newDocCommand('redo');gc.commandParams=fW.$0(e);ba.SendCommand(d.$0(gc,'immediately'))};fW.redo=function(){var e=bk.newDocCommand('redo');ba.SendCommand(d.$0(e,'immediately'))};fW.$0=function(e){var gc={};gc['DfV']=e;return gc};global.tab.WorksheetServerCommands=fW;var fX=function(){};fX.__typeName='tab.WorldUpdateServerCommands';fX.getWorldUpdate=function(e){var gc=new Object;gc.commandNamespace='tabdoc'.toString();gc.commandName='get-world-update'.toString();gc.commandParams=fX.$0();dU.executeServerCommand(gc,'immediately',e,e)};fX.$0=function(){var e={};e['Gge']=tsConfig.current_sheet_name;return e};global.tab.WorldUpdateServerCommands=fX;var fY=function(){};fY.__typeName='tab.XhrUtil';fY.get_currentTabName=function(){return fY.$0};fY.set_currentTabName=function(e){fY.$0=e};fY.helper=function(e,gc){var gd=new fY;if(!ss.isValue(e.success)&&ss.isValue(gc)){e.success=gc.get_successDelegate()}if(!ss.isValue(e.complete)&&ss.isValue(gc)){e.complete=gc.get_completedDelegate()}if(!ss.isValue(e.error)&&ss.isValue(gc)){e.error=gc.get_errorDelegate()}return gd.request(e)};fY.getMultipartData=function(e,gc){var gd=fY.randomString();var ge='--'+gd;var gf='\r\n';var gg=new ss.StringBuilder;if(ss.isValue(e)){gg.append(ge);gg.append(gf);gg.append('Content-Disposition: form-data; name="');gg.append(e['name']);gg.append('"');if('filename'in e){gg.append('; filename="');gg.append(e['filename']);gg.append('"')}gg.append(gf);gg.append('Content-Type: ');gg.append(e['contentType']);gg.append(gf);gg.append(gf);gg.append(e['content']);gg.append(gf)}if(ss.isValue(gc)){var gh=new ss.ObjectEnumerator(gc);try{while(gh.moveNext()){var gi=gh.current();gg.append(ge);gg.append(gf);gg.append('Content-Disposition: form-data; name="');gg.append(gi.key);gg.append('"');gg.append(gf);gg.append(gf);if(ss.isInstanceOfType(gi.value,String)){gg.append(gi.value)}else{gg.append(tab.JsonUtil.toJson(gi.value))}gg.append(gf)}}finally{gh.dispose()}}gg.append(ge);gg.append('--');gg.append(gf);var gj={};gj.header=gd;gj.body=gg.toString();return gj};fY.randomString=function(){var e='0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';var gc=8;var gd='';for(var ge=0;ge<gc;ge++){var gf=Math.random()*e.length;var gg=gf|0;gd+=e.substring(gg,gg+1)}return gd};global.tab.XhrUtil=fY;var fZ=function(e){db.call(this,e,new ds('wqq'.toString()))};fZ.__typeName='tab.ZoneContentWrapperModel';global.tab.ZoneContentWrapperModel=fZ;var ga=function(e,gc,gd){this.$a=null;this.$b=null;this.$8=null;this.$6=null;this.$9=null;this.$7=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;db.call(this,e,new ds(gd.toString(),0));this.$a=gc;this.$6=new bi(this)};ga.__typeName='tab.ZoneModel';ga.typeOfContent=function(e){var gc=e.wqq;if(ss.isNullOrUndefined(gc)){return null}if(ss.getKeyCount(gc)===1){var gd=ss.getEnumerator(Object.keys(gc));try{while(gd.moveNext()){var ge=gd.current();return ge}}finally{gd.dispose()}}switch(e.jAM){case'filter':case'layout-basic':case'layout-flow':case'layout-free-form':case'empty':{return''}}return''};ga.getContent=function(e,gc){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.wqq)){return null}if(!(gc in e.wqq)){return null}return e.wqq[gc]};ga.$0=function(e){switch(e){case'color':{return'color'}case'shape':{return'shape'}case'size':{return'size'}case'map':{return'map'}}return'color'};global.tab.ZoneModel=ga;var gb=function(e){this.$8=null;this.$7=null;this.$2$1=null;this.$2$2=null;db.call(this,e,new ds('HCq'.toString()));this.set_zonePresModels({});this.$8={}};gb.__typeName='tab.ZonesModel';gb.$0=function(e){return'z_'+e};global.tab.ZonesModel=gb;ss.initClass(U,a,{get_blockType:function(){return this.$5},get_isOneAtATime:function(){return false},get_commandName:function(){return this.$1},set_commandName:function(e){this.$1=e},get_hasLocalComponent:function(){return this.hasLocalComponent},get_hasRemoteComponent:function(){return this.hasRemoteComponent},execute:function(e,gc,gd){var ge=null;if(!ss.staticEquals(gd,null)){ge=function(gf){_.defer(function(){gd(gf)})}}if(this.$4==='localFirst'){this.executeLocal(e);this.executeRemote(gc,ge)}else if(this.$4==='remoteFirst'){this.executeRemote(gc,ge);this.executeLocal(e)}if(!ss.isValue(this.doRemoteWork)&&ss.isValue(ge)){ge(bb.successResult)}},executeLocal:function(e){if(ss.isValue(this.doLocalWork)){{var gc=tabBootstrap.MetricsController.createContext('EXELOC'.toString(),8,this.buildCommandMetricsParameters());try{this.doLocalWork(e)}finally{if(ss.isValue(gc)){gc.dispose()}}}}},executeRemote:function(e,gc){if(ss.isValue(this.doRemoteWork)){this.$3=new Array;this.doRemoteWork(e,function(gd){if(ss.isValue(gc)){gc(gd)}})}},buildCommandMetricsParameters:function(){var e={};e['cn']=this.get_commandName();return e},reEnqueueCompletedCommandRecords:function(){if(ss.isNullOrUndefined(this.$3)){return}var e=this.$3;var gc=this.$2;while(gc.length>0){e.push(gc.shift())}this.$2=e;this.$3=gc},enqueueCommand:function(e){this.$2.push(e)},handleRemoteCommandSuccess:function(e,gc){if(ss.isValue(e.get_successCallback())){e.get_successCallback()(gc)}},handleRemoteCommandFailure:function(e,gc){if(ss.isValue(e.get_errorCallback())){e.get_errorCallback()(gc)}},$0:function(e,gc){if(this.$2.length===0){if(ss.isValue(gc)){gc(bb.successResult)}return}var gd=this.$2.shift();this.$3.push(gd);var ge=gd.get_commandToExecute();if(ss.isNullOrUndefined(ge)){if(ss.isValue(gc)){gc(bb.successResult)}return}e.executeCommand(ge,ss.mkdel(this,function(gf){try{this.handleRemoteCommandSuccess(gd,gf)}finally{this.$0(e,gc)}}),ss.mkdel(this,function(gf){try{this.handleRemoteCommandFailure(gd,gf)}finally{if(ss.isValue(gc)){gc(new bb(false,gf))}}}))}});ss.initClass(b,a,{get_isOneAtATime:function(){return true}},U);ss.initInterface(cK,a,{add_commmandSucceeded:null,remove_commmandSucceeded:null,add_commandFailed:null,remove_commandFailed:null,executeCommand:null});ss.initClass(c,a,{add_commmandSucceeded:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_commmandSucceeded:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_commandFailed:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_commandFailed:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},$0:function(e){var gc=e['kqB'.toString()];if(ss.isValue(gc)&&gc.mxu.length>0){var gd=gc.mxu[0];var ge=gd.nCR;if(ss.isValue(ge)&&ss.keyExists(ge,'TXj')){var gf=ge['TXj'];if(!gf.GiX){return new ss.Exception(ss.formatString('{0}: {1}',gd.$iY,gf.BNT))}}}return null},executeCommand:function(e,gc,gd){var ge=ss.getEnumerator(Object.keys(this.$4));try{while(ge.moveNext()){var gf=ge.current();if(this.$4[gf].$2(e,gc,gd)===0){return}}}finally{ge.dispose()}var gg={};gg['cn']=e.commandName;var gh=tabBootstrap.MetricsController.createContext('EXEREM'.toString(),8,gg);var gi=this.$3;var gj=ss.mkdel(this,function(gl){gh.dispose();if(ss.isValue(this.$1$2)){this.$1$2(gi,e,gl)}gd(gl)});var gk=ss.mkdel(this,function(gl){gh.dispose();var gm=this.$0(gl);if(ss.isNullOrUndefined(gm)){if(ss.isValue(this.$1$1)){this.$1$1(gi,e,gl)}var gn=dq.fromCommand(gl,e);gc(gn)}else{gj(gm)}});this.$5.executeServerCommand(e,gk,gj);++this.$3},$2:function(e,gc,gd,ge,gf){var gg=e.toString()+'-'+gc.toString();if(ss.keyExists(this.$4,gg)){return false}var gh=new l(this,e,gc,gd,ge,gf);gh.$h(ss.mkdel(this,this.$1));this.$4[gg]=gh;return true},$1:function(e,gc,gd){if(ss.isValue(this.$1$2)){this.$1$2(0,e,null)}gd(null)}},null,[cK]);ss.initClass(d,a,{},U);ss.initClass(f,a,{$0:function(){return this.$2},$1:function(){return this.$3}});ss.initClass(g,a,{$4:function(){return this.$9},$5:function(){return ss.getKeyCount(this.$a)===0},$6:function(){return _.map(this.$a,function(e,gc){return e})},$0:function(e,gc){if(ss.isNullOrUndefined(e)||e.length===0){return}this.$8.push(g.$0(gc,e));this.$7=this.$7||this.$2(e);e=g.$1(gc,e);this.$a[e.join(',')]=e},$1:function(e,gc){if(ss.isNullOrUndefined(gc)||gc.length===0){return false}var gd;if(this.$7||this.$2(gc)){gd=this.$3(e,gc)}else{var ge=g.$1(e,gc);gd=ss.keyExists(this.$a,ge.join(','))}return gd},$2:function(e){for(var gc=0;gc<e.length;gc++){var gd=e[gc];if(!ss.isValue(gd)){return true}}return false},$3:function(e,gc){var gd=g.$0(e,gc);for(var ge=0;ge<this.$8.length;ge++){var gf=this.$8[ge];var gg=true;var gh=false;var gi=0;var gj=0;while(gg&&gj<gf.length&&gi<gd.length){var gk=gf[gj];var gl=gd[gi];if(gk.item1<gl.item1){++gj}else if(gk.item1>gl.item1){++gi}else{gg=!ss.isValue(gk.item2)||!ss.isValue(gl.item2)||ss.referenceEquals(gk.item2,gl.item2);gh=gh||ss.referenceEquals(gk.item2,gl.item2);++gj;++gi}}if(gg&&gh){return true}}return false}});ss.initEnum(h,a,{$0:1,$1:2,$2:3,$3:4,$4:5,$5:6});ss.initClass(i,a,{});ss.initClass(j,a,{});ss.initEnum(k,a,{$0:0,$1:1});ss.initClass(l,a,{$h:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},$i:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},$2:function(e,gc,gd){if(!ss.referenceEquals(e.commandNamespace,this.$6)||!ss.referenceEquals(e.commandName,this.$5)){return 1}if(this.$7){return 1}if(ss.isValue(this.$c)&&ss.isValue(this.$g)){this.$1(this.$c,this.$e,this.$d);this.$c=e;this.$e=gc;this.$d=gd;return 0}var ge=Math.floor(tabBootstrap.MetricsController.getTiming());var gf=ge-this.$8;if(this.$f!==-1&&gf<this.$f){this.$3(e,gc,gd,this.$f-gf)}else if(this.$b!==-1&&this.$9>=this.$b){this.$3(e,gc,gd,this.$a*this.$9)}else{this.$7=true;++this.$9;try{this.$4.executeCommand(e,ss.mkdel(this,function(gg){if(this.$9>0){--this.$9}gc(gg)}),ss.mkdel(this,function(gg){if(this.$9>0){--this.$9}gd(gg)}))}finally{this.$7=false;this.$8=ge}}return 0},$0:function(){var e=this.$c;var gc=this.$e;var gd=this.$d;this.$c=null;this.$e=null;this.$d=null;if(!ss.isValue(e)){return}this.$4.executeCommand(e,gc,gd)},$3:function(e,gc,gd,ge){this.$c=e;this.$e=gc;this.$d=gd;this.$g=window.setTimeout(ss.mkdel(this,function(){this.$g=null;this.$0()}),ge)},$1:function(e,gc,gd){if(ss.isValue(this.$1$1)){this.$1$1(e,gc,gd)}}});ss.initClass(m,a,{},U);ss.initClass(db,a,{get_presModel:function(){return this.pm},get_presModelKey:function(){return this.$2},set_presModelKey:function(e){this.$2=e},get_parent:function(){return this.$1},getMutableCopyOfPresModel:function(){var e=tab.MiscUtil.cloneObject(this.pm);if(!ss.isValue(e)){e=new Object}return e},getPresModelPath:function(){return this.$0(new dr)},swapAndCopyPresModel:function(e){var gc=this.pm;if(ss.isValue(gc)&&ss.isValue(e)){var gd=e;var ge=gc;var gf=ss.getEnumerator(Object.keys(ge));try{while(gf.moveNext()){var gg=gf.current();if((!ss.keyExists(gd,gg)||typeof(gd[gg])==='undefined')&&!$.isFunction(ge[gg])&&(!_.isBoolean(ge[gg])||!db.removeUndefinedBoolsOnSwapCopy)){gd[gg]=ge[gg]}}}finally{gf.dispose()}}this.pm=e},swapPresModel:function(e){this.pm=e},simpleSwapToUpdate$1:function(e){return function(gc,gd,ge){this.simpleSwapToUpdate(gc,function(){if(!ss.staticEquals(gd,null)){gd(ge)}})}},simpleSwapToUpdate:function(e,gc){if(this.isNewPresModelSameAsOld(e)){return false}this.swapAndCopyPresModel(e);this.raiseEvent(gc);return true},isNewPresModelSameAsOld:function(e){return _.isEqual(this.pm,e)},raiseEvent$1:function(e){return function(gc,gd){if(ss.staticEquals(gc,null)){return}this.raiseEvent(function(){gc(gd)})}},raiseEvent$2:function(e,gc){return function(gd,ge,gf){if(ss.staticEquals(gd,null)){return}this.raiseEvent(function(){gd(ge,gf)})}},raiseEvent:function(e){if(ss.staticEquals(e,null)){return}if(ss.isValue(this.pm)){}if(ss.isNullOrUndefined(db.$0)){db.$0=[]}db.$0.push(e);if(ss.isNullOrUndefined(db.$1)){db.$1=window.setTimeout(function(){db.fireDeferredEvents(null,null)},0)}},$0:function(e){if(!ss.isValue(this.$1)){e.reverse();return e}if(ss.isValue(this.$2)){e.add(this.$2)}var gc=this.$1;return gc.$0(e)}});ss.initClass(n,a,{},db);ss.initClass(o,a,{},db);ss.initClass(p,a,{},db);ss.initClass(q,a,{handleRemoteCommandSuccess:function(e,gc){U.prototype.handleRemoteCommandSuccess.call(this,e,gc);if(this.$8){return}this.$8=true;var gd=gc;if(ss.isNullOrUndefined(gd)||ss.getKeyCount(gd)===0){return}var ge=this.$7;var gf=this.$7.commandParams;if(ss.keyExists(gd,'Iee')){var gg=gd['Iee'];var gh=bh.deserialize(en.create(gg).get_simpleCommand());if(ss.isValue(gh)){ge=gh;gf=gh.commandParams}}if(ss.keyExists(gd,'JPc')){gf['JPc']=gd['JPc']}else if(ss.keyExists(gd,'HBp')){var gi={};gi.HBp=gd['HBp'];gf['JPc']=tab.JsonUtil.toJson([gi])}if(ss.keyExists(gd,'lSS')&&gd['lSS']&&this.$6==='filter-shelf'){var gj=gd['iDH'];var gk=bk.newDocCommand('create-default-quick-filter');var gl={};gl['HBp']=gj.HBp;ei.setCommandParams(gk,gl);this.enqueueCommand(new bf(gk))}ei.setCommandParams(ge,gf);this.enqueueCommand(new bf(ge))}},U);ss.initClass(r,a,{$3:function(){return this.$4.length},$1:function(e){if(e.get_isOneAtATime()){this.$2(ss.getInstanceType(e))}this.$4.push(e)},$0:function(){if(this.$4.length<=0){return null}var e=this.$4[0];ss.removeAt(this.$4,0);return e},$2:function(e){var gc=0;for(var gd=this.$4.length-1;gd>=0;--gd){if(ss.referenceEquals(ss.getInstanceType(this.$4[gd]),e)){++gc;ss.removeAt(this.$4,gd)}}if(gc>0){}}});ss.initClass(dB,a,{fractionToValue:null,valueToFraction:null});ss.initClass(s,a,{fractionToValue:function(e){if(e<=this.$3){return this.$7+e*(this.$5-this.$7)/this.$3}if(e<=this.$4){var gc=(this.$6-this.$5)/(this.$4-this.$3);var gd=this.$5-gc*this.$3;return e*gc+gd}return this.$0*e*e+this.$1*e+this.$2},valueToFraction:function(e){if(e<=this.$5){return this.$3*(e-this.$7)/(this.$5-this.$7)}if(e<=this.$6){var gc=(this.$6-this.$5)/(this.$4-this.$3);var gd=this.$5-gc*this.$3;return(e-gd)/gc}var ge=Math.sqrt(this.$1*this.$1-4*this.$0*(this.$2-e));return(-this.$1+ge)/(2*this.$0)}},dB);ss.initEnum(t,a,{highlight:'highlight',filter:'filter',url:'url'},true);ss.initClass(u,a,{});ss.initClass(v,a,{invoke$1:function(){return this.invoke(bk.newSrvCommand$1('add-dataserver-data-source',this.c))}},ss.makeGenericType(A,[Object,w]));ss.initClass(w,a,{});ss.initClass(x,a,{add_newAnalyticsPane:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newAnalyticsPane:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_analyticsPresModel:function(){return this.pm},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(y,a,{});ss.initClass(z,a,{add_newWorkbook:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newWorkbook:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_applicationUpdate:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_applicationUpdate:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_toolbar:function(){return this.$a},get_workbook:function(){return this.$c},get_colorPalettes:function(){return this.$5},get_calculationModel:function(){return this.$4},get_compoundTableCalcModel:function(){return this.$6},get_isTableCalcHighlightingMode:function(){return tab.FeatureFlags.isEnabled('TableCalcsHighlighting')&&this.$6.get_hasTableCalc()},get_typeInPillCalculationModel:function(){return this.$b},get_refLineModel:function(){return this.$8},get_calculationFunctionListModel:function(){return this.$3},get_shapeManager:function(){return this.$9},get_dataDictionary:function(){return this.$7},get_renderMode:function(){return(ss.isValue(this.get_appPresModel())?this.get_appPresModel().ABX:'render-mode-server')},get_isLocalRenderMode:function(){return this.get_renderMode()==='render-mode-client'},get_appPresModel:function(){return this.pm},get_autoUpdate:function(){var e=de.findContentDashboard();return ss.isValue(e)&&e.get_autoUpdate()},set_autoUpdate:function(e){var gc=de.findContentDashboard();if(ss.isValue(gc)){gc.set_autoUpdate(e)}},get_invalid:function(){return de.findContentDashboard().get_invalid()},set_invalid:function(e){de.findContentDashboard().set_invalid(e)},get_showTabs:function(){return tsConfig.showTabs&&!this.get_isOffline()},get_showToolbar:function(){return!this.get_isOffline()},get_isOffline:function(){return tab.FeatureParamsLookup.getBool(41)},update:function(e,gc){if(ss.isNullOrUndefined(this.pm)){this.pm={}}if(ss.isValue(e.ABX)){this.get_appPresModel().ABX=e.ABX}if(ss.isValue(e.vZU)){this.$7.update(e.vZU)}if(ss.isValue(e.res)){if(!ss.isValue(this.$c)){this.$c=new fS(this);this.raiseEvent$1(fS).call(this,this.$2$1,this.$c)}this.$c.update(e.res,gc)}if(ss.isValue(e.ZgT)){this.$5.update(e.ZgT)}if(ss.isValue(e.Oss)){this.$4.update(e.Oss)}if(ss.isValue(e.QjR)){this.$b.update(e.QjR)}if(ss.isValue(e.Oss)&&ss.isValue(e.Oss.mu_)){this.$3.update(e.Oss.mu_)}if(tab.FeatureFlags.isEnabled('TableCalcsNonModal')){if(ss.isValue(e._Ja)){this.$6.update(e._Ja)}}if(ss.isValue(e.jal1)){this.$8.update(e.jal1)}if(ss.isValue(e.R_T1)){this.$a.update(e.R_T1)}this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$2)}},db);ss.initClass(B,a,{add_stateChanged:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_stateChanged:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},get_urlRoot:function(){return this.$j},get_id:function(){return tsConfig.sessionid},$d:function(){return B.$2},$e:function(e){B.$2=e},get_waitHandler:function(){if(ss.isNullOrUndefined(B.$3)){B.$3=new fP}return B.$3},get_sessionErrorHandler:function(){return this.defaultSessionErrorHandler},get_commonDialogProvider:function(){return this.$g},$f:function(){return this.$j+'/sessions/'+tsConfig.sessionid},formatThumbnailReference:function(e){return this.$i+'/thumb/views/'+e},formatSessionTempfileReference:function(e,gc,gd){return this.$j+'/tempfile/sessions/'+tsConfig.sessionid+'/?key='+e+(gc?'&keepfile=yes':'')+(gd?'&attachment=yes':'')},railsEncode:function(e){var gc=new ss.ObjectEnumerator(B.$1);try{while(gc.moveNext()){var gd=gc.current();e=e.replace(gd.value,gd.key)}}finally{gc.dispose()}return e},nudgeWait:function(){if(ss.isNullOrUndefined(B.$3)){return false}B.$3.nudge();return true},incrementWait:function(e){if(ss.isNullOrUndefined(B.$3)){return false}B.$3.addref(e);return true},decrementWait:function(){if(ss.isNullOrUndefined(B.$3)){return false}B.$3.release();return true},handleAuthenticationFailure:function(){this.defaultSessionErrorHandler.handleAuthenticationFailure()},getWindow:function(e){return e+tsConfig.sessionid.replace(new RegExp('[^A-Za-z0-9_]','g'),'_')},registerEventListener:function(e){return function(gc,gd){return dojo.subscribe(this.getTopic(gc),gd)}},fireEvent:function(e,gc){dojo.publish(this.getTopic(e),[gc])},fireStateChanged:function(e){if(ss.isValue(this.$1$1)){this.$1$1(e)}},openDownload:function(e,gc){if(ss.isValue(gc.popup)){var gd=gc.popup;var ge=window.open('about:blank',gd);window.setTimeout(ss.mkdel(this,function(){var gn=new tab.WindowHelper(ge);if(ss.isValue(ge)&&!ge.closed&&gn.get_innerWidth()!==0&&gn.get_innerHeight()!==0){ge.location.href=e}else{if(ss.isValue(ge)){ge.close()}gc.popup=null;this.openDownload(e,gc)}}),500)}else{var gf="\n<div style='text-align:center'>{0}</div><br/>\n  <div class='tab-dialog-actions'>\n    <div name='cancel' class='tabStyledTextButton tabMediumStyledTextButton tabStyledTextButtonFilledGrey' onclick='dijit.getEnclosingWidget(this).hide();'>\n        <span class='label'>{4}</span></div>\n    <a name='ok' class='tabStyledTextButton tabMediumStyledTextButton tabStyledTextButtonFilledGreen left' target='{1}' href='{2}' \n        style='margin-left:10px;text-decoration:none'  onclick='dijit.getEnclosingWidget(this).hide();'><span class='label'>{3}</span></a>\n  </div>";var gg=((e.indexOf(String.fromCharCode(63))===-1)?'?':'&');e+=gg+'download=true';var gh='_blank';var gi=ss.formatString(gf,gc.message,gh,e,tab.Strings.DialogButtonDownload,tab.Strings.DialogButtonCancel);var gj=ss.mkdel(this,function(){this.$g.showAlertDialog(gi,gc.title,false)});if(ss.isNullOrUndefined(gc.noping)){var gk=((e.indexOf(String.fromCharCode(63))===-1)?'?':'&');e+=gk+'nodata=true';var gl=this.$0(null,gj,null,'none');var gm=ss.mkdict([]);gm.headers=ss.mkdict(['Accept','text/plain']);gm.dataType='text';gm.type='GET';gm.url=e;this.$b(gm,gl)}else{this.$g.showAlertDialog(gi,gc.title,false)}}},showDownloads:function(e,gc){var gd="\n<div style='text-align:center'>{0}</div><br />\n<div class='dlgDownloads' style='text-align:center'>";var ge="<a href='{1}' target='_blank'>{0}</a><br />";var gf="</div>\n  <div class='tab-dialog-footer'>\n    <div class='tab-dialog-actions'>\n      <input onclick='dijit.getEnclosingWidget(this).hide(); return false;' type='button' value='{0}' name='cancel' />\n    </div>\n  </div>\n</div>";var gg=new ss.StringBuilder(ss.formatString(gd,gc['message']));var gh=ss.getEnumerator(Object.keys(e));try{while(gh.moveNext()){var gi=gh.current();gg.append(ss.formatString(ge,gi,e[gi]))}}finally{gh.dispose()}gg.append(ss.formatString(gf,tab.Strings.DialogButtonCancel));var gj=gg.toString();this.$g.showAlertDialog(gj,gc['title'],false)},$7:function(e,gc,gd){var ge=ss.mkdict([]);ge.type='POST';ge.url=this.$4('inform');ge.headers=ss.mkdict(['Accept','text/plain']);ge.contentType='text/plain';var gf=tsConfig.clientErrorReportingMaxRequestSizeBytes;var gg=new ss.StringBuilder;gg.appendLine('url: '+e);gg.appendLine('user-agent: '+gc);var gh=ss.Int32.div(gf-gg.toString().length,ss.getKeyCount(gd));var gi=new ss.ObjectEnumerator(gd);try{while(gi.moveNext()){var gj=gi.current();gg.appendLine(gj.key);gg.appendLine(gj.value.substr(0,gh-gj.key.length-2))}}finally{gi.dispose()}ge.data=gg.toString();this.$b(ge)},sendSessionCommand:function(e,gc,gd,ge,gf){var gg=ss.mkdict([]);gg.type='POST';gg.url=this.$3(e,gc);gg.headers=ss.mkdict(['Accept','application/json, text/javascript']);gg.dataType='json';gg.success=ge;gg.error=gf;var gh=fY.getMultipartData(null,gd);gg.contentType='multipart/form-data; boundary='+gh.header;gg.data=gh.body;var gi=this.$1(null,ge,null);this.$b(gg,gi)},$c:function(e,gc){if(gc){fW.redoToPosition(e)}else{fW.undoToPosition(e)}},requestRestoreFixedAxes:function(e){if(!tsConfig.allow_filter){return}var gc=new Object;gc.commandNamespace='tabsrv'.toString();gc.commandName='restore-fixed-axes'.toString();var gd={};bk.addVisualIdToCommand(gd,e);gc.commandParams=gd;var ge=ss.mkdel(this,function(gf){this.fireStateChanged(gf)});ba.SendCommand(new d(gc,'immediately',ge,function(){}))},executeServerCommand:function(e,gc,gd){var ge=ss.mkdict([]);this.$8(ge,e);ge.headers=ss.mkdict(['Accept','text/javascript']);var gf=function(gi,gj,gk){if(ss.isValue(gc)){gi=tab.RleDecoder.decode(gi);gc(gi)}};var gg=ss.mkdel(this,function(gi,gj,gk){this.$6(gk,gi,e.noExceptionDialog,e);if(ss.isValue(gd)){var gl=new ss.Exception(gi.responseText);gl['status']=gi.status;gd(gl)}});var gh=this.$1(null,gf,(ss.isValue(gd)?gg:null));this.$b(ge,gh)},basicPostOpts:function(e,gc){var gd=ss.mkdict([]);gd.type='POST';gd.url=e;gd.headers=ss.mkdict(['Accept','text/javascript']);gd.dataType='json';gd.data=gc;return gd},basicGetOpts:function(e){var gc=ss.mkdict([]);gc.type='GET';gc.url=e;gc.headers=ss.mkdict(['Accept','text/javascript']);gc.dataType='json';return gc},$8:function(e,gc){var gd=fY.getMultipartData(null,gc.commandParams);e.type='POST';e.dataType='json';e.contentType='multipart/form-data; boundary='+gd.header;e.data=gd.body;e.url=this.$3(gc.commandNamespace,gc.commandName)},$9:function(e){var gc=this.$d();var gd=ss.mkdel(this,function(){this.$c(gc,false)});var ge=ss.mkdel(this,function(){this.$c(gc+1,true)});this.$a(gd,ge);++B.$2},getTopic:function(e){return this.getTopicCore(e,null)},$2:function(e){return this.$j+'/'+e},$4:function(e){return tabBootstrap.BaseUrlFormatter.formatSessionMethod(e,tsConfig.sessionid,this.$j)},$3:function(e,gc){return this.$f()+'/commands/'+e+'/'+gc},$a:function(e,gc){if(!tsConfig.embedded||tsConfig.browserBackButtonUndo){if(ss.isValue(B.$0)){B.$0.back=e}else{bO.setInitialState(e)}B.$0=new bO;B.$0.back=null;B.$0.forward=gc;bO.addToHistory(B.$0)}},$6:function(e,gc,gd,ge){this.$h.handle(e,gc,ge,gd)},$b:function(e,gc){return fY.helper(e,gc)},$1:function(e,gc,gd){return new dV(this,e,gc,gd,false,false)},$0:function(e,gc,gd,ge){var gf=ge!=='none';var gg=ge==='immediately';return new dV(this,e,gc,gd,gf,gg)},formatLayoutMethod:function(e,gc){var gd=(ss.isValue(gc)?this.$4(gc):this.$f());gd+='/layouts/'+e;return gd},formatViewMethod:function(e,gc){var gd=(ss.isValue(gc)?this.$4(gc):this.$f());gd+='/views/'+e;return gd},formatFilterReference:function(e,gc,gd){return this.$5(e,gc,gd,'filters')},$5:function(e,gc,gd,ge){e=encodeURIComponent(this.railsEncode(e));var gf;if(ss.isValue(gd)){gf=this.$4(gd)}else{gf=this.$f()}gf+='/sheets/'+e+'/'+ge;if(ss.isValue(gc)){gf+='/'+encodeURIComponent(this.railsEncode(gc))}return gf},getTopicCore:function(e,gc){var gd=e;var ge=new bX;var gf=ge.$0(e);if(gf<0||gf>=ge.$1()){throw new ss.Exception('Illegal event id '+gd)}if(gf<=ge.$0('stateChanged')){gc=null}return(ss.isNullOrUndefined(gc)?gd:(gd+gc))}});ss.initClass(C,a,{get_isBrushingComputed:function(){return this.$1},hasBrushingForSheet:function(e){return ss.isValue(this.$5[e])||ss.isValue(this.$3[e])||ss.isValue(this.$2[e])},getTupleBrushing:function(e){return this.$5[e]||[]},getTrendlineBrushing:function(e){return this.$4[e]||[]},getNodeBrushing:function(e){return this.$3[e]||[]},getLegendBrushing:function(e){return this.$2[e]||{}},$0:function(e,gc,gd,ge,gf){var gg=e.get_vizDataModel();var gh=de.getVizCategoricalLegends(e);for(var gi=0;gi<gh.length;gi++){var gj=gh[gi];if(ss.isNullOrUndefined(gg)){continue}if(!gj.get_isHighlightEnabled()||gf.length===0&&gj.get_isOneWay()){continue}var gk=_.intersection(gc.get_vizDataModel().get_fieldCaptions(),gj.get_fieldCaptions());gk=C.getHighlightFieldCaptions(ge,gc.get_vizDataModel().get_highlightCaptions(),gk);var gl=i.$3(gc.get_vizDataModel(),gd,gk);var gm=i.$7(gl,gg,gj);if(!ss.keyExists(this.$2,e.get_worksheetName())){this.$2[e.get_worksheetName()]={}}this.$2[e.get_worksheetName()][C.$0(gj.get_legendTypeEnum(),gj.get_legendNames())]=gm}}});ss.initClass(D,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('build-sheet-list-context-menu',this.c))}},ss.makeGenericType(A,[Object,E]));ss.initClass(E,a,{});ss.initClass(F,a,{get_resultType:function(){return this.$1},get_errorMessage:function(){return this.$0},set_errorMessage:function(e){this.$0=e}});ss.initClass(G,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('calculation-auto-complete',this.c))}},ss.makeGenericType(A,[Object,H]));ss.initClass(H,a,{});ss.initClass(I,a,{$3:function(){return this.get_presModel()},get_itemType:function(){return(ss.isValue(this.$3().RBQ)?this.$3().RBQ:'func')},get_label:function(){return this.$3().pHt},get_styledLabel:function(){return this.$3().GMD},get_iconResource:function(){return this.$3().OxY},get_tooltip:function(){return this.$3().ApM},get_replaceText:function(){return this.$3().$e$},get_caretIndex:function(){return this.$3().$IL}},db);ss.initClass(J,a,{get_functionTooltip:function(){var e=this.get_presModel();return e.hzT},get_functionHelpPosition:function(){var e=this.get_presModel();return e.uHK},get_calculation:function(){var e=this.get_presModel();return e.nKr},get_startIndex:function(){var e=this.get_presModel();return e.QNi},get_endIndex:function(){var e=this.get_presModel();return e.sDT},get_items:function(){return this.$3}},db);ss.initClass(K,a,{});ss.initClass(L,a,{add_functionListUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_functionListUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$3:function(){return this.pm},get_functions:function(){return this.$3().giJ||[]},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(M,a,{add_calculationUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_calculationUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_hasCalculation:function(){return ss.isValue(this.pm)&&(!tab.MiscUtil.isNullOrEmpty(this.$3().QD)||!tab.MiscUtil.isNullOrEmpty(this.$3().MQQ)||!tab.MiscUtil.isNullOrEmpty(this.$3().UyO))},get_isNewCalculation:function(){return tab.MiscUtil.isNullOrEmpty(this.$3().HBp)},get_isAdhoc:function(){return this.$4&&this.$3().nFA},get_adHocShelf:function(){return this.$3().Ene||'none-shelf'},get_adHocShelfPosition:function(){return this.$3().ZMD},get_adHocPaneSpecId:function(){return this.$3().FsL},$3:function(){return this.pm},get_tokens:function(){return this.$3().rxV||[]},get_name:function(){return this.$3().MQQ||''},get_fieldName:function(){return this.$3().HBp||''},get_errors:function(){return this.$3().hit||[]},get_errorSummary:function(){return this.$3().bYn||''},get_caption:function(){return this.$3().QD||''},get_formula:function(){return this.$3().Fpl||''},get_dependencies:function(){return this.$3().AAa||''},get_dataSourceName:function(){return this.$3().UyO||''},get_dataSourceCaption:function(){var e=z.get_instance().get_workbook().get_dataSchema();if(ss.isNullOrUndefined(e)){return null}var gc=e.findDataSourceByName(this.get_dataSourceName());if(ss.isNullOrUndefined(gc)){return null}return gc.get_caption()},get_useParameters:function(){return ss.coalesce(this.$3().oVH,false)},get_calculationContext:function(){return ss.coalesce(this.$3().zZA,'calculation-dialog')},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(N,a,{get_items:function(){return this.$3().L_v},$3:function(){return this.pm},update:function(e){if(!this.isNewPresModelSameAsOld(e)){this.swapAndCopyPresModel(e)}}},db);ss.initClass(O,a,{add_legendChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_legendChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_legendNameChanged:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_legendNameChanged:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_worksheetName:function(){return this.$3().get_worksheetName()},get_id:function(){return this.get_legendNames().join(';')+this.$4},get_catLegendPresModel:function(){return this.pm},get_isHighlightEnabled:function(){return this.get_catLegendPresModel().MJI||false},get_isHighlightAllowed:function(){return this.get_catLegendPresModel().JuD||false},get_isOneWay:function(){return this.get_catLegendPresModel().i$I||false},get_fieldCaptions:function(){return this.get_catLegendPresModel().oKr},get_legendNames:function(){return this.get_catLegendPresModel().HhR},get_legendTypeEnum:function(){return this.$4},get_items:function(){return O.$0(this.get_legendTypeEnum(),this.get_catLegendPresModel())},$3:function(){var e=ss.safeCast(this.get_parent(),fZ);return e.get_zone()},findItemById:function(e){return _.find(this.get_items(),function(gc){return gc.YLs===e})},update:function(e){if(this.isNewPresModelSameAsOld(e)){return}var gc=this.get_catLegendPresModel();this.swapAndCopyPresModel(e);if(ss.isValue(gc)&&!_.isEqual(gc.HhR,e.HhR)){this.raiseEvent(this.$2$2)}this.raiseEvent(this.$2$1)}},db);ss.initClass(dz,a,{update:function(e){if(!this.isNewPresModelSameAsOld(e)){this.swapAndCopyPresModel(e)}}},db);ss.initClass(P,a,{get_categoricalFilter:function(){return this.$3$1},set_categoricalFilter:function(e){this.$3$1=e},get_mode:function(){return this.$3.etp},get_isAllButtonVisible:function(){return this.$3.dqD},get_isAllButtonSelected:function(){return this.$3.uPU.GtG},get_isSelectionExclusive:function(){return this.$3.uPU.jeJ},get_showApplyAndCancelButtons:function(){return this.$3.WZq},get_showSearchButton:function(){return this.$3.NLs},get_showMoreLessButton:function(){return this.$3.EQS},get_showResetButton:function(){return this.$3.shF},update:function(e){dz.prototype.update.call(this,e);this.$3=e;this.get_categoricalFilter().update(this.$3.uPU)}},dz);ss.initClass(Q,a,{addChange:function(e){this.$0.push(e)},compileForChecklist:function(e){var gc={};for(var gd=0;gd<this.$0.length;++gd){var ge=this.$0[gd];switch(ge.type){case 0:{gc[ge.index]=ge.checkState;break}case 1:{var gf=ge.range;var gg=ge.checkState;var gh=Math.min(gf.get_from(),gf.get_to());var gi=Math.max(gf.get_from(),gf.get_to());for(var gj=gh;gj<=gi;++gj){gc[gj]=gg}break}}}var gk=[];var gl=[];var gm=new ss.ObjectEnumerator(gc);try{while(gm.moveNext()){var gn=gm.current();var go=parseInt(gn.key,10);var gp=gn.value;if(gp){gk.push(go)}else{gl.push(go)}}}finally{gm.dispose()}var gq=new bl;gq.select=gk;gq.deselect=gl;gq.domain=e;return gq},compileForRadiolist:function(e){var gc=this.$0.length-1;var gd=this.$0[gc];var ge=new bm;ge.index=gd.index;ge.domain=e;return ge},reset:function(){ss.clear(this.$0)},appendChangelist:function(e){for(var gc=0;gc<e.$0.length;gc++){this.$0.push(e.$0[gc])}}});ss.initEnum(R,a,{single:0,range:1});ss.initClass(S,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('clear-highlighting',this.c))}},ss.makeGenericType(A,[Object,T]));ss.initClass(T,a,{});ss.initClass(V,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('close-ref-line-editor',this.c))}},ss.makeGenericType(A,[Object,W]));ss.initClass(W,a,{});ss.initClass(X,a,{get_r:function(){return this.$3},get_g:function(){return this.$2},get_b:function(){return this.$1},get_a:function(){return this.$0},toString:function(){return((this.$0>=0.999989986419678)?this.toRgb():this.toRgba())},luminance:function(){var e=X.$4(this.$3/255);var gc=X.$4(this.$2/255);var gd=X.$4(this.$1/255);var ge=0.212670996785164*e+0.715160012245178*gc+0.0721689984202385*gd;var gf=116*X.$3(ge)-16;return gf},toRgba:function(){return'rgba('+this.$3+','+this.$2+','+this.$1+','+this.$0+')'},toRgba255:function(){return'rgba('+this.$3+','+this.$2+','+this.$1+','+ss.Int32.trunc(this.$0*255)+')'},toRgb:function(){return'rgb('+this.$3+','+this.$2+','+this.$1+')'},toArgbHex:function(){var e=ss.Int32.trunc(this.$0)*255;return'#'+X.$5(e,2)+X.$5(this.$3,2)+X.$5(this.$2,2)+X.$5(this.$1,2)},toArgbInt:function(){var e=ss.Int32.trunc(this.$0)*255;return(e<<24)+(this.$3<<16)+(this.$2<<8)+this.$1}});ss.initClass(Y,a,{get_paletteCollectionPresModel:function(){return this.pm},get_qColorPaletteGroups:function(){return this.get_paletteCollectionPresModel().Jxz},get_catColorPaletteGroups:function(){return this.get_paletteCollectionPresModel().RSE},get_colorPalettes:function(){var e=this.pm;if(ss.isNullOrUndefined(e)){return[]}return e.HMF},colorPaletteGroup:function(e){var gc=e.HWn;return _.map(gc,ss.mkdel(this,function(gd){return this.get_colorPalettes()[gd]}))},update:function(e){this.simpleSwapToUpdate(e,null)}},db);ss.initClass(Z,a,{get_command:function(){return this.$1$1},set_command:function(e){this.$1$1=e},addParameter:function(e,gc){if(ss.isNullOrUndefined(this.get_command().commandParams)){this.get_command().commandParams=ss.mkdict([e,gc])}else{this.get_command().commandParams[e]=gc}},toCommandAction$1:function(e){return function(gc,gd){return ss.mkdel(this,function(ge){var gf=gd(ge);this.addParameter(gc,gf);dU.executeServerCommand(this.get_command(),'immediately')})}},toCommandAction:function(e){return ss.mkdel(this,function(){dU.executeServerCommand(this.get_command(),e)})}});ss.initClass(ba,a,{add_onUrlActionsResponse:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_onUrlActionsResponse:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_onInvalidation:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_onInvalidation:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},add_onPrimaryBootstrapSuccess:function(e){this.$1$3=ss.delegateCombine(this.$1$3,e)},remove_onPrimaryBootstrapSuccess:function(e){this.$1$3=ss.delegateRemove(this.$1$3,e)},add_destroyView:function(e){this.$1$4=ss.delegateCombine(this.$1$4,e)},remove_destroyView:function(e){this.$1$4=ss.delegateRemove(this.$1$4,e)},add_commandQueueComplete:function(e){this.$1$5=ss.delegateCombine(this.$1$5,e)},remove_commandQueueComplete:function(e){this.$1$5=ss.delegateRemove(this.$1$5,e)},add_undoCommand:function(e){this.$1$6=ss.delegateCombine(this.$1$6,e)},remove_undoCommand:function(e){this.$1$6=ss.delegateRemove(this.$1$6,e)},add_modelsUpdated:function(e){this.$1$7=ss.delegateCombine(this.$1$7,e)},remove_modelsUpdated:function(e){this.$1$7=ss.delegateRemove(this.$1$7,e)},add_intermediateUpdate:function(e){this.$1$8=ss.delegateCombine(this.$1$8,e)},remove_intermediateUpdate:function(e){this.$1$8=ss.delegateRemove(this.$1$8,e)},get_loader:function(){return this.$K},get_waitingOnCommands:function(){return ss.getKeyCount(this.$C)>0||this.$F.length>0||this.$O.$3()>0},get_deferredServerResponseQueueSize:function(){return ss.getKeyCount(this.$C)},get_currentWorldDiffersFromCheckpoint:function(){return this.$z},get_legacySession:function(){return this.$L},get_processingRenderModeChange:function(){return this.$I},get_processingStoryPointChange:function(){return this.$J},resetInvalidationHandlers:function(){this.$1$1=null;this.$1$2=null;this.$1$3=null},setBrowserViewportFunc:function(e){this.$H=e;if(du.get_progressiveLoadEnabled()){this.$H(ss.mkdel(this,function(gc){this.$K.setViewport(gc)}))}},prepareForSheetChange:function(){this.$L.get_waitHandler().showAndLock()},refreshLayout:function(){dojo.publish('close-menus');if(tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){return}var gc=ss.mkdel(this,function(gf){{var gg=tabBootstrap.MetricsController.createContext('RLE Decode Primary',32,null);try{gf=tab.RleDecoder.decode(gf)}finally{if(ss.isValue(gg)){gg.dispose()}}}var gh=gf;try{this.$u(gh);if(!ss.staticEquals(this.$1$3,null)){this.$1$3()}this.$c(gh.worldUpdate.hyc)}catch(gi){var e=ss.Exception.wrap(gi);ba.handleBootstrapException(e,this.$y)}});var gd=ss.mkdel(this,function(e){var gf=e;if(ss.isValue(gf)){_.defer(ss.mkdel(this,function(){{var gg=tabBootstrap.MetricsController.createContext('RLE Decode Secondary',32,null);try{gf=tab.RleDecoder.decode(gf)}finally{if(ss.isValue(gg)){gg.dispose()}}}{var gh=tabBootstrap.MetricsController.createContext('PROSEC'.toString(),2,null);try{try{this.$e(gf)}catch(gi){var e1=ss.Exception.wrap(gi);ba.handleBootstrapException(e1,this.$y)}}finally{if(ss.isValue(gh)){gh.dispose()}}}if(du.get_progressiveLoadEnabled()){this.$s()}else{this.$i()}}))}});var ge=ss.mkdel(this,function(e){fU.extendWorkgroupSession();var gf=e['status'];if(gf===200){var gg=e['message'];if(gg.substr(0,12)==='Invalid JSON'){ba.sendParentCompletedMessage();var gh=tab.Strings.ServerErrorInvalidJSON+'<br>';this.$y.showAlertDialog(gh,tab.Strings.SessionUnknownErrorTitle,true);throw new ss.Exception('Invalid JSON')}}else if(gf===403){var gi=0;var gj='';try{var gk=JSON.parse(e['responseText']);if(ss.isValue(gk)){gi=gk.code;gj=gk.message}}catch(gr){}ba.sendParentCompletedMessage();this.$L.get_sessionErrorHandler().handleSessionForbiddenAction(gi,gj)}else if(gf===401){if(tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad')){var gl=e['responseText'];var gm=tab.DataSourceConnectionAttemptErrorResponse.tryDeserialize(gl);var gn=(ss.isNullOrUndefined(gm)?gl:gm.RedirectUrl);tab.WindowHelper.locationReplace(window.self,gn)}else{var go=e['responseText'];tab.WindowHelper.locationReplace(window.self,go)}}else if(gf===410){this.$L.get_sessionErrorHandler().handleSessionExpiration(true)}else if(gf===413){ba.sendParentCompletedMessage();this.$L.get_sessionErrorHandler().handleSessionLimitExceeded()}else if(gf!==0){ba.sendParentCompletedMessage();var gp=e['responseText'];if(tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad')){var gq=tab.DataSourceConnectionAttemptErrorResponse.tryDeserialize(gp);if(ss.isValue(gq)){gp=gq.ErrorMessage}}if(gf===502||gf===503){this.$L.get_sessionErrorHandler().handleSessionKilled(gp)}else{this.$L.get_sessionErrorHandler().handleUnknownErrorStatus(gp)}this.$L.nudgeWait()}});tabBootstrap.ViewerBootstrap.get_instance().waitOnInitialLayoutModel(gc,ge,gd)},delayLocalUrlActions:function(e){this.$E=this.$E.concat.apply(this.$E,e)},checkpointAppPresModel:function(){this.$P=z.get_instance().get_presModel();ss.clearKeys(this.$C);this.$z=false},worldCheckpoint:function(){var e=tab.MiscUtil.cloneObject(this.$P);return e},SaveWorkbook:function(e,gc,gd,ge){this.$7('publish',e,gc,gd,null,null,ge,null)},SaveWorkbookAs:function(e,gc,gd,ge,gf,gg,gh){this.$7('publish_as',e,gc,gd,ge,gf,gg,gh)},$t:function(e){var gc=function(){e()};var gd=ss.mkdict([]);gd.type='POST';gd.url=this.$9('transitionGuest');var ge=tab.MiscUtil.get_urlPathnameParts();var gf=(ss.keyExists(ge,3)?ge[3]:'');var gg=tsConfig.current_sheet_name;var gh=ss.mkdict([':authSheet',gg,'sheet_id',gf]);gd.data=gh;var gi=new dV(this.$L,null,gc,null,true,true);fY.helper(gd,gi)},$9:function(e){return tabBootstrap.BaseUrlFormatter.formatSessionMethod(e,this.$L.get_id(),this.$L.get_urlRoot())},$j:function(e,gc,gd,ge,gf){this.$y.showAlertDialog(tab.Strings.UnhandledExceptionMessage(e),tab.Strings.UnhandledExceptionTitle,true);return false},$l:function(e){if(ss.isValue(e)){z.get_instance().update(e,this.$y);this.checkpointAppPresModel();db.fireDeferredEvents(null,this.$y);this.$o();this.$g();this.$h()}},$h:function(){if(!ss.staticEquals(this.$1$8,null)){this.$1$8()}},$g:function(){if(du.get_progressiveLoadEnabled()){if(this.$G){return}this.$G=true;var e={};e['t']=tabBootstrap.MetricsController.getTiming();e['d']='FirstZone';var gc=new tabBootstrap.MetricsEvent('gen',2,e);tabBootstrap.MetricsController.logEvent(gc)}},$3:function(){this.$K=new du;this.$K.add_progressiveLoad(ss.mkdel(this,this.$l));this.$K.add_progressiveLoadComplete(ss.mkdel(this,this.$k));this.$w=[]},$s:function(){this.$K.start()},$1:function(){if(du.get_progressiveLoadEnabled()&&this.$K.get_hasZonesToLoad()){this.$K.abort();this.$w=[];this.$k()}},$k:function(){this.$i();for(var e=0;e<this.$w.length;e++){var gc=this.$w[e];gc()}this.$w=[]},$c:function(e){{var gc=tabBootstrap.MetricsController.createContext('PROPRI'.toString(),2,null);try{if(du.get_progressiveLoadEnabled()){e=this.$K.extractZoneContent(e)}{var gd=tabBootstrap.MetricsController.createContext('MDLINI'.toString(),2,null);try{var ge=z.get_instance();ge.update(e,this.$y)}finally{if(ss.isValue(gd)){gd.dispose()}}}this.checkpointAppPresModel();er.notifyModelsInitialized();{var gf=tabBootstrap.MetricsController.createContext('MDLEVT'.toString(),2,null);try{db.fireDeferredEvents(ba.handleBootstrapException,this.$y)}finally{if(ss.isValue(gf)){gf.dispose()}}}}finally{if(ss.isValue(gc)){gc.dispose()}}}this.$o();if(!du.get_progressiveLoadEnabled()){tab.MiscUtil.raiseAllZonesLoaded()}this.get_legacySession().nudgeWait()},$e:function(e){var gc=e['UdM'.toString()];if(!ss.isValue(gc)||!ss.isValue(gc.NdE)||ss.getKeyCount(gc.NdE)===0){return}var gd=z.get_instance().get_appPresModel();if(ss.keyExists(gc.NdE,'dataDictionary')){var ge=gc.NdE['dataDictionary'].wqq;var gf=ge['genDataDictionaryPresModel'];if(ss.isValue(gf)){gd.vZU=gf}}if(ss.keyExists(gc.NdE,'vizData')){var gg=gd.res.mmK;var gh=gc.NdE['vizData'].wqq;var gi=gh['genPresModelMapPresModel'];if(du.get_progressiveLoadEnabled()&&this.$K.get_hasZonesToLoad()){this.$K.updateZonesWithVizData(gi)}else{fL.addVizDataToZones(gi.NdE,gg.HCq)}}z.get_instance().update(gd,this.$y);this.checkpointAppPresModel();if(de.hasAnyImpliedSelection()){db.fireDeferredEvents(ba.handleBootstrapException,this.$y)}else{db.clearDeferredEvents()}this.$o()},$u:function(e){tsConfig.layoutid=e.layoutId;this.$L.set_layoutId(tsConfig.layoutid);var gc=e.newSessionId;if(!tab.MiscUtil.isNullOrEmpty(gc)){tsConfig.sessionid=gc}var gd=e.workbookLocale;if(!ss.isNullOrEmptyString(gd)){tsConfig.workbookLocale=gd}var ge=e.newClientNum;if(!ss.isNullOrEmptyString(ge)){tsConfig.clientNumber=ge;tabBootstrap.Utility.addToUrlHash(tabBootstrap.Utility.CLIENTNO,ge)}tsConfig.current_sheet_name=e.sheetName;fY.set_currentTabName(tsConfig.current_sheet_name);tsConfig.workbook_allow_subscriptions=e.allowSubscriptions;if(ss.isValue(e.worldUpdate)&&ss.isValue(e.worldUpdate.hyc.res.mmK)){tsConfig.current_sheet_type=e.worldUpdate.hyc.res.mmK.nhM.xD}},$7:function(e,gc,gd,ge,gf,gg,gh,gi){var gj=function(gp,gq,gr){var gs=gp;if(ss.keyExists(gs,'workbook')){var gt=gs['workbook'];gh(gt)}else{gh(null)}};var gk=ss.mkdel(this,function(gp,gq,gr){var gs;try{gs=tab.JsonUtil.parseJson(gp.responseText)}catch(gu){gs=null}if(ss.isValue(gi)&&ss.isValue(gs)){var gt=gs;gi(gt)}else{this.$L.$6(gr,gp,false,null)}});var gl=ss.mkdict([]);gl.type='POST';gl.dataType='json';gl.url=this.$9(e);var gm=ss.mkdict(['project',gd,'name',gc,'display_tabs',ge]);if(ss.isValue(gf)){gm['save_db_passwords']=ss.unbox(gf)}if(ss.isValue(gg)){gm['no_overwrite']=ss.unbox(gg)}var gn=fY.getMultipartData(null,gm);gl.contentType='multipart/form-data; boundary='+gn.header;gl.data=gn.body;var go=new dV(this.$L,null,gj,gk,true,true);fY.helper(gl,go)},$f:function(){while(this.$O.$3()!==0&&!_.any(this.$F,ba.$5)){this.$6(this.$O.$0())}},$6:function(gc){this.$F.push(gc);if(gc.get_blockType()!=='none'){this.get_legacySession().incrementWait(gc.get_blockType()==='immediately')}var gd=this.$N.beginTransaction();var ge;try{gc.execute(gd,this.$x,ss.mkdel(this,function(e){this.$2(gc,e)}));ge=this.$N.endTransaction();this.$8(this.$E)}catch(gh){var e=ss.Exception.wrap(gh);tab.ErrorTrace.report(e,false);this.$N.rollbackTransaction();db.clearDeferredEvents();this.$q(gc);return}finally{this.$r()}var gf=null;if(gc.get_hasLocalComponent()){gf=tabBootstrap.MetricsController.createContext('PROLOC'.toString(),8,gc.buildCommandMetricsParameters())}{var gg=gf;try{if(ss.isValue(ge)){if(du.get_progressiveLoadEnabled()){ge=this.$K.processModelUpdate(ge,true)}z.get_instance().update(ge,this.$y);this.$4();db.fireDeferredEvents(null,this.$y)}}finally{if(ss.isValue(gg)){gg.dispose()}}}if(ss.isValue(ge)){this.$o()}},$2:function(e,gc){var gd=null;if(e.get_hasRemoteComponent()){gd=tabBootstrap.MetricsController.createContext('PROREM'.toString(),8,e.buildCommandMetricsParameters())}{var ge=gd;try{this.$q(e)}finally{if(ss.isValue(ge)){ge.dispose()}}}if(!gc.succeeded&&tab.FeatureFlags.isEnabled('SkipConnectionsDuringLoad')){this.$A.handle(gc.error,e)}if(this.$O.$3()>0){this.$f()}},$8:function(e){try{if(ss.isValue(this.$1$1)){if(ss.isValue(e)&&e.length>0){this.$1$1(e,this.$y)}}}finally{this.$r()}},$r:function(){this.$E.length=0},$d:function(e,gc,gd){if(!ss.isValue(gc)||!ss.isValue(gd)){return}var ge=gd['kqB'.toString()];if(!ss.isValue(ge)){return}if(ss.isValue(ge.$LE)){var gf=ge.$LE;if(ss.isValue(gf.Uwh)){this.$M|=gf.Uwh}if(ss.isValue(gf.LXK)&&!z.get_instance().get_isLocalRenderMode()||ba.get_fireDeferredUrlActions()){if(gf.LXK.length>0){ba.set_fireDeferredUrlActions(false);this.$8(gf.LXK)}}if(ss.isValue(gf.hyc)&&ss.isValue(gf.hyc.res)&&ss.isValue(gf.hyc.res.mmK)&&ss.isValue(gf.hyc.res.mmK.nhM)){this.$B=gf.hyc.res.mmK.nhM}var gg=null;if(ss.isValue(gc.commandParams)&&ss.keyExists(gc.commandParams,'AVP')&&!ss.referenceEquals(gc.commandName,'render-tooltip-server'.toString())){gg=gc.commandParams['AVP']}var gh=new cJ;gh.primarySheet=gg;gh.layoutStatus=ge.$LE;gh.cmdResult=ge.mxu[0];var gi=null;if(ss.isValue(ge.$LE.hyc)){gi=ge.$LE.hyc}var gj={item1:gi,item2:gh};this.$5(e,gj)}},$a:function(e){if(ss.isNullOrUndefined(this.$1$2)){return}this.$1$2(e);this.$A.handlePotentialTabSwitchDataSourceException(e.layoutStatus)},$q:function(e){try{ss.remove(this.$F,e);if(e.get_blockType()!=='none'){this.$D+=1}if(this.$F.length===0&&this.$O.$3()===0){var gc=false;var gd=z.get_instance();var ge=tsConfig.current_sheet_name;if(ss.isValue(this.$B)){gc=!ss.referenceEquals(tsConfig.current_sheet_name,this.$B.DDA);ge=this.$B.DDA;this.get_legacySession().set_layoutId(this.$B.JAR.toString());if(gc||this.$M){this.$1$4()}}var gf=this._getRenderMode();var gg=z.get_instance().get_workbook().get_isCurrentSheetStoryboard();var gh=(gg?z.get_instance().get_workbook().get_storyboard().get_sheetName():null);var gi=(gg?z.get_instance().get_workbook().get_storyboard().get_flipboard().get_currentStoryPointId():0);if(this.$z){gd.update(this.$P,this.$y)}if(this.$M){gd.get_workbook().$3()}if(this.$M||gc){this.$1()}var gj=_.keys(this.$C);gj=gj.sort(function(gA,gB){var gC=parseInt(gA);var gD=parseInt(gB);return((gC>gD)?1:-1)});var gk=gi;var gl=[];var gm=tsConfig.current_sheet_name;for(var gn=0;gn<gj.length;gn++){var go=gj[gn];var gp=this.$C[go];var gq=gp.item1;var gr=gp.item2;if(ss.isNullOrUndefined(gq)||ss.isNullOrUndefined(gr)||ss.isNullOrUndefined(gr.layoutStatus)){continue}var gs=gr.layoutStatus.Twp||'';if(!ss.referenceEquals(gs,ge)){continue}if(du.get_progressiveLoadEnabled()){var gt=false;if(gg){var gu=ba.$4(gq);gt=ss.isValue(gu)&&gk!==ss.unbox(gu);gk=(gt?ss.unbox(gu):gk)}var gv='';if(ss.isValue(gp.item2.layoutStatus)&&ss.isValue(gp.item2.layoutStatus.Twp)){gv=gp.item2.layoutStatus.Twp.toString()}var gw=!ss.equalsT(gm,gv);gm=gv;gq=this.$m(gq,gw,gt)}gd.update(gq,this.$y);gl.push(gr);if(ss.isValue(gr.layoutStatus.DfV)){if(gr.layoutStatus.DfV<this.get_legacySession().$d()){this.$p()}if(gr.layoutStatus.DfV>this.get_legacySession().$d()){this.$L.$9('')}this.get_legacySession().$e(gr.layoutStatus.DfV)}if(!this.$I&&gq.ABX!==gf){this.$I=true;this.$D+=1;this.get_legacySession().get_waitHandler().addrefAndTurnOnImmediately()}}this.checkpointAppPresModel();if(gg&&z.get_instance().get_workbook().get_isCurrentSheetStoryboard()){if(ss.isValue(gh)&&ss.referenceEquals(gh,z.get_instance().get_workbook().get_storyboard().get_sheetName())&&gi!==z.get_instance().get_workbook().get_storyboard().get_flipboard().get_currentStoryPointId()){this.$J=true}}var gx=null;if(ss.isValue(this.$B)){if(gc||this.$M){if(gc){try{if(ss.isValue(window.parent)&&typeof(window.parent['handleSheetChanged'])==='function'){window.parent['handleSheetChanged'](this.$B.DDA,this.$B.YnR)}}catch(gA){}}this.$B['oldSheetName']=tsConfig.current_sheet_name;if(tsConfig.is_mobile_app&&!('sheetname'in this.$B)){this.$B['sheetName']=this.$B.DDA}dojo.publish('newLayoutId'.toString(),[this.$B]);var gy=this.$B;gx=function(){dojo.publish('tabChangeCompleted'.toString(),[gy])};this.$B=null}}db.fireDeferredEvents(null,this.$y);this.$b(gl);this.$o();var gz=ss.mkdel(this,function(){if(!ss.staticEquals(gx,null)){gx()}this.$n()});if(du.get_progressiveLoadEnabled()&&this.$K.get_hasZonesToLoad()){this.$w.push(gz)}else{gz()}while(this.$D>0){this.get_legacySession().decrementWait();this.$D-=1}this.$M=false}}finally{this.$I=false;this.$J=false}},$m:function(e,gc,gd){if(du.get_progressiveLoadEnabled()){if(gd||gc){this.$1();e=this.$K.extractZoneContent(e);this.$s()}else{e=this.$K.processModelUpdate(e,false)}}return e},$b:function(e){for(var gc=0;gc<e.length;gc++){var gd=e[gc];this.$a(gd)}},$i:function(){if(this.$v){return}this.$v=true;ba.$6();er.$0();ba.sendParentCompletedMessage();fU.extendWorkgroupSession()},$5:function(e,gc){if(ss.isValue(gc)){this.$C[e.toString()]=gc}},_getRenderMode:function(){return z.get_instance().get_renderMode()},$4:function(){this.$z=true},$n:function(){if(ss.isValue(this.$1$5)){this.$1$5()}},$p:function(){if(ss.isValue(this.$1$6)){this.$1$6()}},$o:function(){if(ss.isValue(this.$1$7)){this.$1$7()}},$0:function(e){var gc=e.get_commandName();if(gc==='next-story-point'||gc==='previous-story-point'||gc==='set-active-story-point'||gc==='ensure-layout-for-sheet'||gc==='revert-workbook'){this.$1()}}});ss.initClass(bb,a,{});ss.initEnum(bc,a,{proceed:0,stop:1});ss.initClass(bd,a,{get_item:function(){return this.$0},get_name:function(){return this.$0['dMo'.toString()]},set_name:function(e){this.$0['dMo'.toString()]=e},get_description:function(){return this.$0['Mej'.toString()]},set_description:function(e){this.$0['Mej'.toString()]=e},get_commandsType:function(){return this.$0['jWE'.toString()]},set_commandsType:function(e){this.$0['jWE'.toString()]=e},get_enabled:function(){return this.$0['chK'.toString()]},set_enabled:function(e){this.$0['chK'.toString()]=e},get_isChecked:function(){return this.$0['mgL'.toString()]},set_isChecked:function(e){this.$0['mgL'.toString()]=e},get_isDefault:function(){return this.$0['wZB'.toString()]},set_isDefault:function(e){this.$0['wZB'.toString()]=e},get_isRadioOn:function(){return this.$0['Gff'.toString()]},set_isRadioOn:function(e){this.$0['Gff'.toString()]=e},get_isVisible:function(){return this.$0['DIk'.toString()]},set_isVisible:function(e){this.$0['DIk'.toString()]=e},get_commands:function(){return this.$0['Jmx'.toString()]},set_commands:function(e){this.$0['Jmx'.toString()]=e},get_command:function(){return this.$0['zRu'.toString()]},set_command:function(e){this.$0['zRu'.toString()]=e},get_argumentParams:function(){return this.$0['WQt'.toString()]},set_argumentParams:function(e){this.$0['WQt'.toString()]=e},get_iconRes:function(){return this.$0['yFv'.toString()]},set_iconRes:function(e){this.$0['yFv'.toString()]=e}});ss.initClass(be,a,{test:function(e){tab.Param.verifyValue(e,'command');if(ss.isNullOrUndefined(e.commandType)){}return ss.isValue(e.commandType)&&ss.keyExists(this.$0,e.commandType)&&this.$0[e.commandType]==='granted'}});ss.initClass(bf,a,{get_commandToExecute:function(){return this.$0},get_successCallback:function(){return this.$2},get_errorCallback:function(){return this.$1}});ss.initClass(bg,a,{});ss.initClass(bh,a,{});ss.initClass(bi,a,{add_commandsChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_commandsChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_shouldUpdate:function(){return this.$3},set_shouldUpdate:function(e){this.$3=e},get_commands:function(){return this.pm},update:function(e){if(this.get_shouldUpdate()){this.forceUpdate(e)}},forceUpdate:function(e){this.simpleSwapToUpdate$1(bi).call(this,e,this.$2$1,this)}},db);ss.initClass(bj,a,{get_presModel:function(){return this.$0},get_commandItems:function(){return this.$0['Szr'.toString()]},set_commandItems:function(e){this.$0['Szr'.toString()]=e},get_defaultItem:function(){return this.$0['Ayc'.toString()]},set_defaultItem:function(e){this.$0['Ayc'.toString()]=e}});ss.initClass(bk,a,{});ss.initClass(bl,a,{});ss.initClass(bm,a,{});ss.initClass(bn,a,{get_commandName:function(){return'Composite'},executeLocal:function(e){for(var gc=0;gc<this.$7.length;gc++){var gd=this.$7[gc];gd.executeLocal(e)}},executeRemote:function(e,gc){var gd=0;this.$6(e,function(ge){if(ss.isValue(gc)){gc(ge)}},gd)},$6:function(e,gc,gd){if(gd>=this.$7.length){gc(bb.successResult);return}var ge=this.$7[gd];ge.executeRemote(e,ss.mkdel(this,function(gf){if(gf.succeeded===false){gc(gf)}else{this.$6(e,gc,gd+1)}}))}},U);ss.initClass(bo,a,{add_compoundTableCalcUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_compoundTableCalcUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_tableCalcsPresModel:function(){return this.pm},get_hasTableCalc:function(){return this.get_primaryTableCalc().get_hasTableCalc()},get_fieldCaption:function(){return this.get_tableCalcsPresModel().OLk},get_primaryTableCalc:function(){return this.$3},get_hasSecondaryTableCalc:function(){return ss.isValue(this.get_tableCalcsPresModel())&&this.get_tableCalcsPresModel().KEu&&this.get_secondaryTableCalc().get_hasTableCalc()},get_secondaryTableCalc:function(){return this.$4},update:function(e){if(this.isNewPresModelSameAsOld(e)){return}var gc=e;this.$3.update(bo.$0(gc,0));this.$4.update(bo.$0(gc,1));this.swapAndCopyPresModel(gc);this.raiseEvent(this.$2$1)}},db);ss.initClass(cd,a,{get_instanceType:null,get_dataSourceModel:function(){return this.get_parent()},get_canHaveChildren:function(){return false},get_isUnsortedContainer:function(){return false},get_isSelectable:function(){return!this.get_isUnsortedContainer()},get_isDraggable:function(){return this.get_isSelectable()&&!this.get_isHidden()&&!this.get_isInvalid()},get_childToSelect:function(){return(this.get_isUnsortedContainer()?null:this)},get_isDerived:function(){if(this.get_canHaveChildren()){return false}return this.get_isGenerated()||this.get_isAutoColumn()||this.get_isColumn()&&this.asColumn().get_isInstance()},get_isMeasureNamesOrValues:function(){return ss.referenceEquals(this.get_localName(),cd.nameOfMeasuresColumn)||ss.referenceEquals(this.get_localName(),cd.nameOfMeasureValuesColumn)},get_field:function(){return this.pm},get_fieldIconResource:function(){if(tab.FeatureFlags.isEnabled('AuthoringBeautification')){var e=this.get_field().OxY;if(e.length===0){return e}if(this.get_field().SkN){e=e+'-invalid'}return e+'-ab'}return this.get_dataSourceModel().getFieldIconResource(this.get_field().wDF)},get_isInstance:function(){return!this.get_isGenerated()&&this.get_isDerived()},get_isHidden:function(){return this.get_field().XCW||this.get_isInstance()},get_isInvalid:function(){return this.get_field().SkN},get_isGenerated:function(){return this.get_field().r_$},get_isAutoColumn:function(){return this.get_field().$su},get_isAllowedInCalcs:function(){return this.get_field()._kV},get_isUnnamedCalc:function(){return this.get_field().qu||false},get_globalName:function(){return this.get_field().HBp},get_localName:function(){return this.get_field().dMo},get_description:function(){return this.get_field().Mej},get_userCaption:function(){return this.get_field().KDF},get_ordinal:function(){return this.get_field().hUu},get_isColumn:function(){return this.get_instanceType()==='column'||this.get_instanceType()==='group'},get_isGroup:function(){return this.get_instanceType()==='group'},get_isCubeDimension:function(){return this.get_instanceType()==='cubeDimension'},get_isDrillPath:function(){return this.get_instanceType()==='drillPath'},get_isCubeHierarchy:function(){return this.get_instanceType()==='cubeHierarchy'},get_isCubeFolder:function(){return this.get_instanceType()==='cubeFolder'},get_isFolder:function(){return this.get_instanceType()==='folder'},get_isRelationalTable:function(){return this.get_instanceType()==='relationalTable'},get_defaultRole:function(){return this.get_field().tgs},get_role:function(){return this.get_field().YIQ},get_defaultFieldType:function(){return(this.get_isColumn()?this.get_field().TOg:'unknown')},get_fieldType:function(){return(this.get_isColumn()?this.get_field().SEI:'unknown')},get_displayName:function(){return(this.get_isDrillPath()?(this.get_localName()||this.get_description()):(this.get_description()||this.get_localName()))},get_tooltip:function(){return this.get_userCaption()||(this.get_description()||this.get_displayName())},matchesFolderRole:function(e){if(this.get_isFolder()){return this.asFolder().get_folderRole()===e}else{switch(e){case'dimensions':{return this.get_defaultRole()==='dimension'}case'measure':{return this.get_defaultRole()==='measure'}case'groups':{return this.get_isGroup()}case'parameters':{return true}default:{return false}}}},asColumn:function(){return ss.safeCast(this,cb)},asGroup:function(){return ss.safeCast(this,cv)},asDimension:function(){return ss.safeCast(this,bp)},asHierarchy:function(){return ss.safeCast(this,br)},asCubeFolder:function(){return ss.safeCast(this,bq)},asFolder:function(){return ss.safeCast(this,ci)},asDrillPath:function(){return ss.safeCast(this,bP)},asRelationalTable:function(){return ss.safeCast(this,dF)}},db);ss.initClass(bp,a,{get_hierarchies:function(){return this.$5},get_childToSelect:function(){var e=this.pm.nkG;if(!ss.isNullOrEmptyString(e)){for(var gc=0;gc<this.$5.length;gc++){var gd=this.$5[gc];if(ss.referenceEquals(gd.get_localName(),e)){return gd.get_levels()[0]}}}var ge=[];for(var gf=0;gf<this.$5.length;gf++){var gg=this.$5[gf];ge.push(gg)}for(var gh=0;gh<this.$4.length;gh++){var gi=this.$4[gh];var gj=gi.get_hierarchies();for(var gk=0;gk<gj.length;gk++){var gl=gj[gk];ge.push(gl)}}ge.sort(function(gm,gn){if(gm.get_levels().length>1&&gn.get_levels().length<=1){return-1}else if(gm.get_levels().length<=1&&gn.get_levels().length>1){return 1}else{return 0}});return((ge.length>0)?ge[0].get_levels()[0]:null)},get_folders:function(){return this.$4},get_attributes:function(){return this.$3},get_instanceType:function(){return'cubeDimension'},get_canHaveChildren:function(){return true},update:function(e,gc,gd,ge){this.swapAndCopyPresModel(e);this.$5=gc;this.$4=gd;this.$3=ge}},cd);ss.initClass(bq,a,{get_hierarchies:function(){return this.$4},get_childToSelect:function(){return this.$4[0]},get_columns:function(){return this.$3},get_instanceType:function(){return'cubeFolder'},get_canHaveChildren:function(){return true},get_isUnsortedContainer:function(){return true},update:function(e,gc,gd){this.swapAndCopyPresModel(e);this.$4=gc;this.$3=gd}},cd);ss.initClass(br,a,{get_levels:function(){return this.$3},get_childToSelect:function(){return this.$3[0]},get_instanceType:function(){return'cubeHierarchy'},get_canHaveChildren:function(){return true},update:function(e,gc){this.swapAndCopyPresModel(e);this.$3=gc}},cd);ss.initClass(fx,a,{update:null},db);ss.initClass(bs,a,{add_modelUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_modelUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},$3:function(){return this.pm},get_aggregationIndex:function(){return this.$3().LLA},get_aggregationValues:function(){return this.$3().VRG},get_aggregationCaptions:function(){return this.$3().iSd},get_hasAggregation:function(){return ss.isValue(this.get_aggregationValues())&&this.get_aggregationValues().length>0},update:function(e){this.simpleSwapToUpdate(e,this.$3$1)}},fx);ss.initClass(bt,a,{navigateToCustomizedView:function(e){var gc=tabBootstrap.Utility.get_locationWindow();dX.destroySessionAndForward(gc,bt.buildUrl(e,false))},navigateToOriginalView:function(){var e=tabBootstrap.Utility.get_locationWindow();dX.destroySessionAndForward(e,bt.buildUrl(null,false))},getCustomizedViews:function(e,gc){var gd=function(ge,gf,gg){if(!ss.isValue(e)){return}var gh;var gi=null;if('customizedViews'in ge){gh=ge['customizedViews']}else{gh=[]}if('defaultCustomizedViewId'in ge){gi=ge['defaultCustomizedViewId']}e(gh,gi)};this.$2(gd,bt.$0(gc),'get_customized_views',ss.mkdict(['sheet_id',tsConfig.current_sheet_name]),'GET','none')},setDefaultCustomizedView:function(e,gc,gd){var ge=function(gg,gh,gi){if(!ss.isValue(gc)){return}var gj=null;if('defaultCv'in gg){gj=gg['defaultCv']}gc(gj)};var gf=ss.mkdict(['sheet_id',tsConfig.current_sheet_name]);if(ss.isValue(e)){gf['cvId']=e.id}this.$2(ge,bt.$0(gd),'set_default_customized_view',gf)},destroyCustomizedView:function(e,gc,gd){tab.Param.verifyValue(e,'cv');var ge=function(gf,gg,gh){if(!ss.isValue(gc)){return}gc()};this.$1(ge,bt.$0(gd),'destroy_customized_view',ss.mkdict(['cvId',e.id]))},saveCustomizedView:function(e,gc,gd){tab.Param.verifyValue(e,'cv');var ge=ss.mkdel(this,function(gg,gh,gi){if(!ss.isValue(gc)){return}var gj=null;if('cv'in gg){gj=gg['cv'];this.updateTsConfig(gj,true)}gc(gj)});var gf=ss.mkdict(['sheet_id',tsConfig.current_sheet_name,'name',e.name,'shared',e.isPublic]);if(ss.isValue(e.id)){gf['cvId']=e.id}this.$2(ge,bt.$0(gd),'save_customized_view',gf)},updateTsConfig:function(e,gc){tsConfig.repositoryUrl=this.$0(e);if(gc){if(ss.isNullOrUndefined(e)){tsConfig.current_custom_view_id=null}else{tsConfig.current_custom_view_id=e.id}}},$0:function(e){var gc=new dG(tsConfig.repositoryUrl);if(ss.isNullOrUndefined(e)){return ss.formatString('{0}/{1}',gc.get_workbookId(),gc.get_sheetId())}return ss.formatString('{0}/{1}/{2}/{3}',gc.get_workbookId(),gc.get_sheetId(),fN.encodeUserName(e.owner.username),e.urlId)},updateCustomizedView:function(e,gc,gd){tab.Param.verifyValue(e,'cv');var ge=ss.mkdel(this,function(gg,gh,gi){if(!ss.isValue(gc)){return}var gj=null;if('cv'in gg){gj=gg['cv'];this.updateTsConfig(gj,false)}gc(gj)});var gf=ss.mkdict(['sheet_id',tsConfig.current_sheet_name,'name',e.name,'shared',e.isPublic,'cvId',e.id]);this.$2(ge,bt.$0(gd),'update_customized_view',gf)},$1:function(e,gc,gd,ge){var gf=this.$3.$0(null,e,gc,'immediately');var gg=ss.mkdict([]);gg.type='POST';gg.url=this.$3.$2(gd);gg.headers=ss.mkdict(['Accept','text/javascript']);gg.dataType='json';if(ss.isValue(ge)){gg.data=ge}this.$3.$b(gg,gf)},$2:function(e,gc,gd,ge,gf,gg){var gh=ss.mkdict([]);gh.type=gf||'POST';gh.url=this.$3.$4(gd);gh.headers=ss.mkdict(['Accept','text/javascript']);gh.dataType='json';if(ss.isValue(ge)){gh.data=ge}var gi=gg||'immediately';var gj=this.$3.$0(null,e,gc,gi);this.$3.$b(gh,gj)}});ss.initClass(bu,a,{});ss.initClass(bv,a,{add_newDashboard:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newDashboard:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_activeZoneChanged:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_activeZoneChanged:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_readyZoneChanged:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_readyZoneChanged:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_renderModeChanged:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_renderModeChanged:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_portSizeChanged:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_portSizeChanged:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},add_sizeChanged:function(e){this.$2$6=ss.delegateCombine(this.$2$6,e)},remove_sizeChanged:function(e){this.$2$6=ss.delegateRemove(this.$2$6,e)},add_formatsChanged:function(e){this.$2$7=ss.delegateCombine(this.$2$7,e)},remove_formatsChanged:function(e){this.$2$7=ss.delegateRemove(this.$2$7,e)},get_zonesModel:function(){return this.$h},get_sheetListModel:function(){return this.$d},get_zoneModels:function(){return this.$h.get_zoneModels()},get_contentDashboard:function(){if(ss.isValue(this.pm)&&this.pm.Jqz){this.$e=this.$e||this.$4();return this.$e}return this},get_actionPresModels:function(){if(ss.isValue(this.pm)){return this.pm.SJs}return null},get_backgroundColor:function(){if(ss.isValue(this.pm)&&ss.isValue(this.pm.xYr1)){return this.pm.xYr1['backgroundColor']}return null},get_zonePlaceholderColor:function(){var e=this.$g;if(ss.isNullOrUndefined(e)){e=this.$3()}this.$g=e;return this.$g},get_sheetName:function(){if(ss.isValue(this.pm)&&ss.isValue(this.pm.nhM)){return this.pm.nhM.DDA}return null},get_sheetPath:function(){if(ss.isValue(this.pm)){return this.pm.IJE}return null},get_invalidSheets:function(){if(ss.isValue(this.pm)){return this.pm.JiV}return[]},get_autoUpdate:function(){return this.$7},set_autoUpdate:function(e){this.$7=e},get_invalid:function(){return this.$9},set_invalid:function(e){if(e===this.$9){return}this.$9=e},get_activeZoneID:function(){if(ss.isValue(this.pm)){return this.pm.xdK}return 0},get_readyZoneID:function(){return this.$c},set_readyZoneID:function(e){if(e===this.$c){return}this.$c=e;if(!ss.staticEquals(this.$2$3,null)){this.$2$3()}},get_activeVisual:function(){if(ss.isNullOrUndefined(this.pm)){return null}if(this.get_activeZoneID()>0){var e=this.get_zoneModels();for(var gc=0;gc<e.length;gc++){var gd=e[gc];if(gd.get_zoneId()===this.get_activeZoneID()){return gd.get_visualModel()}}}return null},get_renderMode:function(){return z.get_instance().get_renderMode()},get_formats:function(){if(ss.isValue(this.pm)){return this.pm.xYr1}return null},get_portSize:function(){return this.$b},set_portSize:function(e){if(_.isEqual(this.$b,e)){return}this.$b=e;if(!ss.staticEquals(this.$2$5,null)){this.$2$5()}},get_dashboardSize:function(){return(ss.isValue(this.pm)?this.pm.DqN:null)},get_dashboardSizeControlModel:function(){return this.$8},get_isDashboard:function(){if(ss.isValue(this.pm)&&ss.isValue(this.pm.IJE)){return this.pm.IJE.WeS}return false},get_flipboard:function(){var e=_.find(this.get_zoneModels(),function(gc){return gc.get_zoneType()==='flipboard'});return e.get_model()},get_legacyMenus:function(){if(ss.isValue(this.pm)){return this.pm.kB}return null},getViewId:function(e){if(!ss.keyExists(this.pm.dux,e)){return null}return this.pm.dux[e]},getViewSession:function(e){return this.$f[e]},getZone:function(e){return this.$h.getZone(e)},hasZone:function(e){return this.$h.hasZone(e)},isValidSheet:function(e){return ss.isValue(this.pm.JiV)&&(e.get_zoneType()!=='viz'||!_.any(this.pm.JiV,function(gc){return ss.referenceEquals(gc.AVP,e.get_worksheetName())}))},getMutableCopyOfPresModel:function(){var e=this.pm.HCq;delete this.pm['HCq'.toString()];var gc=db.prototype.getMutableCopyOfPresModel.call(this);this.pm.HCq=e;return gc},update:function(e,gc){if(ss.isValue(this.$a)&&this.$a!==this.get_renderMode()){this.raiseEvent(this.$2$4)}this.$a=this.get_renderMode();e.Jqz=e.Jqz||false;this.$e=null;if(ss.isValue(e.HCq)){this.$h.update(e.HCq,gc)}if(ss.isValue(e.XgC)){}if(ss.isValue(e.syO)){this.$7=e.syO}if(ss.isValue(e.dux)){var gd=_.keys(e.dux);for(var ge=0;ge<gd.length;ge++){var gf=gd[ge];var gg=e.dux[gf];var gh=this.$f[gf];if(ss.isNullOrUndefined(gh)){gh=new fE(ba.get().get_legacySession().get_urlRoot(),gf,gg,gc);this.$f[gf]=gh}gh.set_viewId(gg)}var gi=_.keys(this.$f);var gj=_.difference(gi,_.keys(e.dux));for(var gk=0;gk<gj.length;gk++){var gl=gj[gk];delete this.$f[gl]}}if(ss.isValue(e.xdK)){if(ss.isNullOrUndefined(this.pm)||this.pm.xdK!==e.xdK){this.raiseEvent(this.$2$2)}}if(!(typeof(e.kc$)==='undefined')&&(ss.isNullOrUndefined(this.pm)||!_.isEqual(e.kc$,this.pm.kc$))){this.raiseEvent(function(){ba.get().get_legacySession().fireEvent('modifiedSheetsChanged',e.kc$)})}if(ss.isNullOrUndefined(this.$b)){this.set_portSize(e.DqN)}if(ss.isValue(e.Tbf)){if(ss.isNullOrUndefined(this.$d)){this.$d=new eg(this)}this.$d.update(e.Tbf)}if(ss.isValue(e.OJ$)){if(ss.isNullOrUndefined(this.$8)){this.$8=new bw(this)}this.$8.update(e.OJ$)}if(ss.isValue(this.pm)){if(ss.isValue(e.DqN)&&!_.isEqual(e.DqN,this.pm.DqN)){this.raiseEvent(this.$2$6)}if(ss.isValue(e.xYr1)&&!_.isEqual(e.xYr1,this.pm.xYr1)){this.raiseEvent(this.$2$7)}}this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$1);this.$5()},$5:function(){if(!z.get_instance().get_isLocalRenderMode()){return}var e=de.getVisualModelsFromDashboard(this);var gc={};var gd=null;var ge=_.keys(e);for(var gf=0;gf<ge.length;gf++){var gg=ge[gf];var gh=e[gg];if(!gh.get_selectionsModel().get_tupleSelection().get_isEmpty()||gh.get_selectionsModel().get_brushVizForNodeSelection()){var gi=u.getApplicableActions(gg,'on-select','highlight');if(!tab.MiscUtil.isNullOrEmpty(gi)){gd=gg;var gj=gh.get_vizDataModel();for(var gk=0;gk<gi.length;gk++){var gl=gi[gk];if(ss.contains(gl.QGQ,gd)){var gm=bh.deserialize(en.create(gl.Yb$).get_simpleCommand(),true);var gn=ss.isNullOrUndefined(gj)||C.isSpecialDateTimeHighlighting(gm);if(!gn){var go=C.getHighlightFieldCaptions(gm,gj.get_highlightCaptions(),gj.get_fieldCaptions());gn=!tab.MiscUtil.isNullOrEmpty(go)}if(gn){for(var gp=0;gp<gl.kDm.length;gp++){var gq=gl.kDm[gp];gc[gq]=true}}}}}break}}if(ss.isNullOrUndefined(gd)){var gr=new ss.ObjectEnumerator(e);try{while(gr.moveNext()){var gs=gr.current();if(this.$6(gs.value)){var gt=ss.getEnumerator(Object.keys(e));try{while(gt.moveNext()){var gu=gt.current();gc[gu]=true}}finally{gt.dispose()}break}}}finally{gr.dispose()}}var gv=new ss.ObjectEnumerator(e);try{while(gv.moveNext()){var gw=gv.current();var gx=ss.keyExists(gc,gw.key);gw.value.set_isBrushedFromAction(gx)}}finally{gv.dispose()}},$6:function(e){var gc=de.getVizCategoricalLegends(e);for(var gd=0;gd<gc.length;gd++){var ge=gc[gd];if(ge.get_isHighlightEnabled()&&!e.get_selectionsModel().getLegendSelection(ge.get_legendTypeEnum(),ge.get_legendNames()).get_isEmpty()){return true}}return false},$4:function(){if(!this.pm.Jqz){return null}var e=null;var gc=this.$h.get_zoneModels();for(var gd=0;gd<gc.length;gd++){var ge=gc[gd];if(ss.isInstanceOfType(ge.get_model(),cf)){e=ge.get_model().get_dashboardModel();break}}return e},$3:function(){var e=X.fromColorCode(this.get_backgroundColor());e=e||new X(255,255,255,1);var gc=e.luminance()>31.5;var gd=(gc?0.0199999995529652:0.0299999993294477);var ge=(gc?new X(0,0,0,gd):new X(255,255,255,gd));return X.alphaBlend(ge,e).toRgba255()}},db);ss.initClass(bw,a,{add_sizeInfoUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_sizeInfoUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$3:function(){return this.pm},get_minDimension:function(){return this.$3().Y_V},get_maxDimension:function(){return this.$3().FUv},get_stepSize:function(){return this.$3().XZP},get_dashboardSizeModel:function(){return this.$4},get_layoutInfoModel:function(){return this.$5},get_sizeModeOptions:function(){return this.$6||[]},update:function(e){if(ss.isValue(e._yu)){if(ss.isNullOrUndefined(this.$4)){this.$4=new bx(this)}this.$4.update(e._yu)}if(ss.isValue(e.N_b)){if(ss.isNullOrUndefined(this.$5)){this.$5=new bM(this)}this.$5.update(e.N_b)}if(ss.isValue(e.iCp)){this.$6=e.iCp}this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(bx,a,{add_sizeUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_sizeUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$3:function(){return this.pm},get_currentSizeText:function(){return this.$3().$hZ},get_sizeMode:function(){if(this.$3().viO!=='unspecified'){return this.$3().viO}switch(this.$3().OTU){case'size-mode-auto':{return'automatic'}case'size-mode-fixed':{return'fixed'}default:{return'range'}}},get_currentWidth:function(){return this.$3().rec},get_currentMinWidth:function(){return this.$3().EVq},get_currentMaxWidth:function(){return this.$3().PiK},get_currentHeight:function(){return this.$3().EUR},get_currentMinHeight:function(){return this.$3().pAn},get_currentMaxHeight:function(){return this.$3().McJ},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(by,a,{});ss.initClass(bz,a,{$3:function(){return this.pm},get_datasourceName:function(){return this.$3().UyO||''},get_promptTitle:function(){return this.$3().lYk||''},get_variableListInstruction:function(){return this.$3().Ku_||''},get_variableListNameLabel:function(){return this.$3().qyO||''},get_variableListValueLabel:function(){return this.$3().CDS||''},get_addVariableLabel:function(){return this.$3().QRI||''},get_addVariableTooltip:function(){return this.$3().hhx||''},get_deleteVariableTooltip:function(){return this.$3().lvX||''},get_requiredVariableMessage:function(){return this.$3().XDV||''},get_editSectionTitle:function(){return this.$3().Pog||''},get_editSectionInstruction:function(){return this.$3().IoH||''},get_editSectionFromLabel:function(){return this.$3().IsA||''},get_editSectionToLabel:function(){return this.$3().umJ||''},get_connectionVariables:function(){return this.$4},update:function(e){this.swapAndCopyPresModel(e);if(ss.isValue(this.$3().AlT)){this.$4=[];for(var gc=0;gc<this.$3().AlT.length;gc++){var gd=new bB(new bA(this),gc);gd.update(this.$3().AlT[gc]);this.$4.push(gd)}}}},db);ss.initClass(bA,a,{},db);ss.initClass(bB,a,{$3:function(){return this.pm},get_displayName:function(){return this.$3()._Ks},get_description:function(){return this.$3().ZWM},get_guid:function(){return this.$3().tLJ},get_isRequired:function(){return this.$3().Ysn},get_defaultValue:function(){return this.$4},get_supportMultiValue:function(){return this.$3().Bdp},get_values:function(){return this.$5},get_selectableOperations:function(){return this.$3().Isb.lag},get_selectableValues:function(){return this.$3().Isb.Tmi},update:function(e){this.swapAndCopyPresModel(e);this.$4=new bD(null,-1);this.$4.update(this.$3().Isb.WSP);if(ss.isValue(this.$3().mFS)){this.$5=[];for(var gc=0;gc<this.$3().mFS.length;gc++){var gd=new bD(new bC(this),gc);gd.update(this.$3().mFS[gc]);this.$5.push(gd)}}}},db);ss.initClass(bC,a,{},db);ss.initClass(bD,a,{$3:function(){return this.pm},get_displayValue:function(){return this.$3().Ltd},get_valueIndex:function(){return this.$3().Ab$},get_operation:function(){return this.$3().uLd.dJp},set_operation:function(e){this.$3().uLd.dJp=e},get_firstValue:function(){return this.$3().uLd.RXR},get_firstValueIndex:function(){return this.$3().uLd.esa},get_secondValue:function(){return(this.$3().uLd.tSM?this.$3().uLd.HcP:null)},get_secondValueIndex:function(){return(this.$3().uLd.tSM?this.$3().uLd.fgO:-1)},update:function(e){this.swapAndCopyPresModel(e)}},db);ss.initClass(bE,a,{get_isEmpty:function(){return tab.MiscUtil.isNullOrEmpty(this.$3())||tab.MiscUtil.isNullOrEmpty(this.$3().SR_)},$3:function(){return this.get_presModel()},update:function(e){if(ss.isValue(this.$3())&&ss.isValue(e)){var gc=e.SR_;if(ss.isValue(gc)){var gd=this.$3().SR_;if(ss.isValue(gd)){var ge=new ss.ObjectEnumerator(gd);try{while(ge.moveNext()){var gf=ge.current();if(!ss.keyExists(gc,gf.key)){gc[gf.key]=gf.value}}}finally{ge.dispose()}}var gg=new ss.ObjectEnumerator(gc);try{while(gg.moveNext()){var gh=gg.current();if(gh.value===null){delete gc[gh.key]}}}finally{gg.dispose()}}}this.pm=e},getRawValue:function(e,gc){if(ss.isNullOrUndefined(this.$3())||ss.isNullOrUndefined(this.$3().SR_)){return null}var gd=ss.getKeyCount(this.$3().SR_);for(var ge=0;ge<gd;ge++){var gf=this.$3().SR_[ge.toString()];var gg=_.find(gf.mDL,function(gh){return gh.tbM===e});if(!ss.isValue(gg)){continue}if(gc<gg.uBu.length){return gg.uBu[gc]}gc-=gg.uBu.length}return null}},db);ss.initClass(bF,a,{add_newDataHighlighterPresModel:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newDataHighlighterPresModel:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_fieldName:function(){return this.$3().HBp},get_searchPlaceholderString:function(){return this.$3().udV},$3:function(){return this.pm},get_fullDomainItemSet:function(){return this.$3().DBQ},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(bG,a,{add_newDataSchema:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newDataSchema:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_parametersDataSource:function(){if(ss.isNullOrUndefined(this.get_dataSchemaPresModel())){return null}for(var e=0;e<this.$5.length;e++){var gc=this.$5[e];if(ss.referenceEquals(gc.get_name(),this.get_dataSchemaPresModel().TTN)){return gc}}return null},get_dataSchemaPresModel:function(){return this.pm},get_dataSources:function(){return this.$5},get_currentBlendingFields:function(){return this.$4},get_blendingFieldCandidates:function(){return this.$3},getDefaultDataSourceForSheet:function(e){if(ss.isNullOrUndefined(this.get_dataSchemaPresModel())){return null}var gc=null;if(ss.isValue(this.get_dataSchemaPresModel().zmP)&&ss.keyExists(this.get_dataSchemaPresModel().zmP,e)){gc=this.get_dataSchemaPresModel().zmP[e].PoP}if(ss.isNullOrEmptyString(gc)){return _.chain(this.$5).filter(ss.mkdel(this,function(gd){return!ss.referenceEquals(gd.get_name(),this.get_dataSchemaPresModel().TTN)})).last().value()}return _.find(this.$5,function(gd){return ss.referenceEquals(gd.get_name(),gc)})},getDataSourceCount:function(e){if(e||ss.isNullOrUndefined(this.get_parametersDataSource())){return this.get_dataSources().length}else{return this.get_dataSources().length-1}},findField:function(e){var gc=this.findDataSourceFromGlobalFieldName(e);if(ss.isNullOrUndefined(gc)){return null}return gc.findField(e)},findDataSourceByName:function(e){return _.find(this.get_dataSources(),function(gc){return ss.referenceEquals(gc.get_name().toString(),e)})},findDataSourceFromGlobalFieldName:function(e){var gc=bH.splitGlobalFieldName(e);if(gc.length<=1){return null}var gd=gc[0].replace(new RegExp('\\]\\]'),']');return this.findDataSourceByName(gd)},update:function(e){if(this.isNewPresModelSameAsOld(e)){return}var gc=((ss.isValue(e)&&ss.isValue(e.Zqk1))?e.Zqk1:[]);var gd=((ss.isValue(e)&&ss.isValue(e.MLW))?e.MLW:[]);this.$4=ss.arrayClone(gc);this.$3=ss.arrayClone(gd);var ge=((ss.isValue(e)&&ss.isValue(e.dhm))?e.dhm.rbg:[]);var gf=ss.arrayClone(this.$5);for(var gg=0;gg<ge.length;gg++){var gh={$:ge[gg]};var gi=_.find(this.$5,ss.mkdel({dataSourcePresModel:gh},function(gl){return ss.referenceEquals(gl.get_name(),this.dataSourcePresModel.$.UyO)}));if(ss.isNullOrUndefined(gi)){gi=new bH(this);this.$5.push(gi)}else{ss.remove(gf,gi)}gi.update(gh.$)}for(var gj=0;gj<gf.length;gj++){var gk=gf[gj];ss.remove(this.$5,gk)}this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$1)}},db);ss.initClass(bH,a,{get_name:function(){return this.$f().UyO},get_caption:function(){return this.$f().Fnn},get_fields:function(){return this.$m},get_dataSourceLayoutPresModel:function(){return this.$f().uVu},$f:function(){return this.pm},get_specifiedWidth:function(){return this.$n},set_specifiedWidth:function(e){this.$n=e},getFieldIconResource:function(e){var gc=this.$f().AFW;if(ss.isNullOrUndefined(gc)){return''}if(e<0||e>=gc.Rvq.length){return'invalid'}return gc.Rvq[e]},findField:function(e){if(ss.isValue(this.$i)&&ss.keyExists(this.$i,e)){return this.$i[e]}return null},findColumnDrillChain:function(e){var gc=null;var gd=e.get_localName();if(e.get_isColumn()&&e.asColumn().get_isInstance()){gd=bH.$1(e.asColumn().get_baseColumnName())}var ge=this.get_fields();for(var gf=0;gf<ge.length;gf++){var gg=ge[gf];switch(gg.get_instanceType()){case'drillPath':{gc=bH.$0(gg.asDrillPath().get_levels(),gd);if(ss.isValue(gc)){return gc}break}case'cubeDimension':{var gh=gg.asDimension().get_hierarchies();for(var gi=0;gi<gh.length;gi++){var gj=gh[gi];gc=bH.$0(gj.get_levels(),gd);if(ss.isValue(gc)){return gc}}break}}}return gc},update:function(e){if(this.isNewPresModelSameAsOld(e)){return}if(ss.isValue(e.Dfq)){ss.clear(this.$m);this.$j=$.extend({},this.$i);this.$l=$.extend({},this.$k);this.$h=$.extend({},this.$g);this.$p=$.extend({},this.$o);for(var gc=0;gc<e.Dfq.length;gc++){var gd=e.Dfq[gc];gd.OxY=gd.OxY||'';switch(gd.VzB){case'fhq':{this.$d(this.$a(gd),true);break}case'Xvi':{var ge=[];for(var gf=0;gf<gd.MWY.length;gf++){var gg=gd.MWY[gf];ge.push(this.$4(gg));this.$d(ge[ge.length-1],false)}this.$d(this.$9(gd,ge),true);break}case'NJp':{var gh=[];for(var gi=0;gi<gd.MWY.length;gi++){var gj=gd.MWY[gi];gh.push(this.$4(gj));this.$d(gh[gh.length-1],false)}this.$d(this.$c(gd,gh),true);break}case'byN':{this.$d(this.$6(gd),true);break}case'KEq':{var gk=gd;var gl=[];var gm=[];for(var gn=0;gn<gk.nIx.length;gn++){var go=gk.nIx[gn];var gp=[];for(var gq=0;gq<go.MWY.length;gq++){var gr=go.MWY[gq];gp.push(this.$4(gr));this.$d(gp[gp.length-1],false)}gl.push(this.$8(go,gp));this.$d(gl[gl.length-1],false)}for(var gs=0;gs<gk.MWY.length;gs++){var gt=gk.MWY[gs];var gu=this.$4(gt);gm.push(gu);this.$d(gu,false)}this.$d(this.$7(gk,gl,gm),true);break}case'ZqW':{this.$d(this.$b(gd),true);break}case'wAR':{this.$d(this.$4(gd),true);break}}}var gv=new ss.ObjectEnumerator(this.$k);try{while(gv.moveNext()){var gw=gv.current();var gx=gw.value;var gy=gx.get_presModel();var gz=[];for(var gA=0;gA<gy.rZD.length;gA++){var gB=gy.rZD[gA];var gC=(ss.keyExists(this.$i,gB)?this.$i[gB]:null);if(ss.isValue(gC)){gz.push(gC);ss.remove(this.$m,gC)}}for(var gD=0;gD<gy.hIp.length;gD++){var gE=gy.hIp[gD];var gF=(ss.keyExists(this.$g,gE)?this.$g[gE]:null);if(ss.isValue(gF)){gz.push(gF);ss.remove(this.$m,gF)}}gx.update(gy,gz)}}finally{gv.dispose()}if(ss.isValue(e.MWY)){for(var gG=0;gG<e.MWY.length;gG++){var gH=e.MWY[gG];this.$d(this.$4(gH),false)}}this.$3()}else{ss.clear(this.$m);ss.clearKeys(this.$i);ss.clearKeys(this.$g);ss.clearKeys(this.$k);ss.clearKeys(this.$o)}this.swapAndCopyPresModel(e)},$e:function(e){this.$m.push(e)},$d:function(e,gc){if(e.get_isColumn()&&!e.asColumn().get_isInstance()){delete this.$j[e.get_localName()];this.$i[e.get_localName()]=e}var gd=(ss.isNullOrEmptyString(e.get_globalName())?e.get_localName():e.get_globalName());switch(e.get_instanceType()){case'drillPath':{this.$g[gd]=e;delete this.$h[gd];break}case'folder':{gd=gd+e.get_folderRole();this.$k[gd]=e;delete this.$l[gd];break}case'relationalTable':{this.$o[gd]=e;delete this.$p[gd];break}default:{this.$i[gd]=e;delete this.$j[gd];break}}if(gc){this.$e(e)}},$3:function(){var e=new ss.ObjectEnumerator(this.$j);try{while(e.moveNext()){var gc=e.current();delete this.$i[gc.key]}}finally{e.dispose()}ss.clearKeys(this.$j);var gd=new ss.ObjectEnumerator(this.$h);try{while(gd.moveNext()){var ge=gd.current();delete this.$g[ge.key]}}finally{gd.dispose()}ss.clearKeys(this.$h);var gf=new ss.ObjectEnumerator(this.$l);try{while(gf.moveNext()){var gg=gf.current();delete this.$k[gg.key]}}finally{gf.dispose()}ss.clearKeys(this.$l);var gh=new ss.ObjectEnumerator(this.$p);try{while(gh.moveNext()){var gi=gh.current();delete this.$o[gi.key]}}finally{gh.dispose()}ss.clearKeys(this.$p)},$9:function(e,gc){var gd=null;if(ss.keyExists(this.$g,e.dMo)){var ge=this.$g[e.dMo];if(ge.get_isDrillPath()){gd=ge}else{}}if(ss.isNullOrUndefined(gd)){gd=new bP(this)}gd.update(e,gc);return gd},$a:function(e){var gc=null;var gd=e.dMo+e.HGC;if(ss.keyExists(this.$k,gd)){var ge=this.$k[gd];if(ge.get_isFolder()){gc=ge}else{}}if(ss.isNullOrUndefined(gc)){gc=new ci(this)}gc.update(e,[]);return gc},$4:function(e){var gc=null;if(ss.keyExists(this.$i,e.HBp)){var gd=this.$i[e.HBp];if(gd.get_isColumn()){gc=gd.asColumn()}else{}}if(ss.isNullOrUndefined(gc)){gc=new cb(this)}gc.update(e);return gc},$b:function(e){var gc=null;if(ss.keyExists(this.$i,e.HBp)){var gd=this.$i[e.HBp];if(gd.get_isGroup()){gc=gd.asGroup()}else{}}if(ss.isNullOrUndefined(gc)){gc=new cv(this)}gc.update(e);return gc},$c:function(e,gc){var gd=null;if(ss.keyExists(this.$o,e.dMo)){var ge=this.$o[e.dMo];if(ge.get_isRelationalTable()){gd=ge.asRelationalTable()}else{}}if(ss.isNullOrUndefined(gd)){gd=new dF(this)}gd.update(e,gc);return gd},$6:function(e){var gc=[];for(var gd=0;gd<e.nIx.length;gd++){var ge=e.nIx[gd];var gf=[];for(var gg=0;gg<ge.MWY.length;gg++){var gh=ge.MWY[gg];gf.push(this.$4(gh));this.$d(gf[gf.length-1],false)}gc.push(this.$8(ge,gf));this.$d(gc[gc.length-1],false)}var gi=[];for(var gj=0;gj<e.hQl.length;gj++){var gk=e.hQl[gj];var gl=[];var gm=[];for(var gn=0;gn<gk.nIx.length;gn++){var go=gk.nIx[gn];var gp=[];for(var gq=0;gq<go.MWY.length;gq++){var gr=go.MWY[gq];gp.push(this.$4(gr));this.$d(gp[gp.length-1],false)}gl.push(this.$8(go,gp));this.$d(gl[gl.length-1],false)}for(var gs=0;gs<gk.MWY.length;gs++){var gt=gk.MWY[gs];gm.push(this.$4(gt))}gi.push(this.$7(gk,gl,gm))}var gu=[];for(var gv=0;gv<e.NLZ.length;gv++){var gw=e.NLZ[gv];gu.push(this.$6(gw))}return this.$5(e,gc,gi,gu)},$5:function(e,gc,gd,ge){var gf=null;if(ss.keyExists(this.$i,e.HBp)){var gg=this.$i[e.HBp];if(gg.get_isCubeDimension()){gf=gg.asDimension()}else{}}if(ss.isNullOrUndefined(gf)){gf=new bp(this)}gf.update(e,gc,gd,ge);return gf},$8:function(e,gc){var gd=null;if(ss.keyExists(this.$i,e.HBp)){var ge=this.$i[e.HBp];if(ge.get_isCubeHierarchy()){gd=ge.asHierarchy()}else{}}if(ss.isNullOrUndefined(gd)){gd=new br(this)}gd.update(e,gc);return gd},$7:function(e,gc,gd){var ge=null;if(ss.keyExists(this.$i,e.dMo)){var gf=this.$i[e.dMo];if(gf.get_isCubeFolder()){ge=gf.asCubeFolder()}else{}}if(ss.isNullOrUndefined(ge)){ge=new bq(this)}ge.update(e,gc,gd);return ge}},db);ss.initInterface(cL,a,{handleCommandFailure:null});ss.initClass(bI,a,{handleCommandFailure:function(e,gc,gd,ge){if(tabBootstrap.ViewerBootstrap.get_instance().get_sessionBeingCleared()){return false}var gf=gc.responseText.match(new RegExp('Fatal exception in vizql engine'));if(gc.status===410||gc.status===404||gc.status===403){this.handleSessionExpiration(false)}else if(gc.status===401){this.handleAuthenticationFailure()}else if(gc.status===502||gc.status===503){this.handleSessionKilled(null)}else if(gc.status===500&&ss.isValue(gf)&&gf.length>0){this.handleUnknownErrorStatus(gc.responseText)}else if(gc.status===413){this.handleSessionLimitExceeded()}else if(gc.status===0){var gg;if(gc.responseText.length!==0){var gh=new ss.StringBuilder;gh.append('XHR Response Status: 0\nReadyState:');gh.append(gc.readyState);gh.append('\nHeaders:\n');gh.append(gc.getAllResponseHeaders());gh.append('\nResponse:\n');gh.append(gc.responseText);gg=ss.mkdel(this,function(){this.$5.showAlertDialog(gh.toString(),tab.Strings.RequestAbortedByBrowser,true)})}else{gg=ss.mkdel(this,function(){this.$1(e,gc)})}window.setTimeout(gg,5000)}else if(ss.isNullOrUndefined(ge)||!ge){this.$1(e,gc)}return true},handleSessionExpiration:function(e){var gc=fN.createForCurrentWindowLocation();if(e&&gc.get_retry()){throw new ss.Exception('Failed to re-initialize session')}this.$2(e)},handleAuthenticationFailure:function(){this.$2(false)},$1:function(e,gc){var gd=ss.safeCast(e,String);var ge=ss.safeCast(e,ss.Exception);var gf='';if(ss.isValue(gd)){gf=ss.replaceAllString(gd,'XMLHttpTransport.watchInFlight Error: ','')}else if(ss.isValue(ge)){gf=ss.replaceAllString(ge.get_message(),'XMLHttpTransport.watchInFlight Error: ','')}gf=ss.replaceAllString(gf,'XMLHttpTransport Error: ','');var gg=tab.Strings.ServerErrorUnexpected;if(gc.status<400){gg=tab.Strings.BrowserErrorProcessing;gf=tab.Strings.BrowserErrorProcessingMessage+'<br>'+gf}else if(gc.status===400){gg=tab.Strings.ServerErrorRejected;gf=tab.Strings.ServerErrorRejectedMessage+'<br>'}else{var gh;try{gh=eval('('+gc.responseText+')');gh=gh.replace(new RegExp('\n(?=s*[A-Z])','g'),'<li>').replace(new RegExp('\n','g'),'<br>');gh='<ul><li>'+gh+'</ul>'}catch(gi){gh=gc.responseText}if(ss.isNullOrEmptyString(gh)){gf=tab.Strings.ServerErrorGeneral(gc.status)+'<br>'}else{gf=gh}}this.$5.showAlertDialog(gf,gg,true)},$0:function(e,gc,gd){var ge=null;try{ge=window.parent.location}catch(gh){}e=ss.coalesce(e,'').trim();var gf=tab.Strings.UnhandledExceptionMessage(e);if(!ss.isNullOrEmptyString(e)){gf+='<br/><br/>'}var gg=ss.mkdel(this,function(){gf+=gd;var gh=ss.mkdel(this,function(){this.$4();document.body.style.cursor='wait';this.$2(false)});this.$5.showConfirmationDialog(gf,gc,true,gh,null)});if(tsConfig.single_frame){gg()}else if(ss.isNullOrUndefined(ge)){this.$5.showAlertDialog(gf,gc,true)}else{gg()}},$2:function(e){document.body.style.cursor='wait';var gc=tsConfig.repositoryUrl||tsConfig.origin_repository_url;var gd=fN.createForCurrentWindowLocationAndVizState(gc,tsConfig.current_sheet_name);gd.set_retry(e);gd.explicitNotGuest=tsConfig.is_authoring&&!tsConfig.is_guest;gd.fullPageLoad()},handleSessionForbiddenAction:function(e,gc){var gd=tab.Strings.SessionForbiddenActionTitle;var ge=tab.Strings.SessionForbiddenActionMsg;switch(e){case 16:case 19:case 21:{ge=gc;break}}this.$5.showAlertDialog(ge,gd,true)},handleSessionLimitExceeded:function(){if(bI.$0){return}var e=tab.Strings.TimeLimitExceededWarning;e+='\n';e+=tab.Strings.PressBackButtonMessage;var gc=tab.Strings.TimeLimitExceededTitle;bI.$0=true;this.$5.showAlertDialog(e,gc,true)},handleSessionKilled:function(e){this.$0(e,tab.Strings.SessionEndedAlertTitle,tab.Strings.SessionEndedAlertMessage)},handleUnknownErrorStatus:function(e){this.$0(e,tab.Strings.SessionUnknownErrorTitle,tab.Strings.SessionEndedAlertMessage)},$4:function(){var e=ss.mkdict([]);e.error=null;e.success=null;e.type='POST';e.url=this.$6+'/setignore/sessions';var gc=e;var gd=ss.mkdict(['_method','PUT','target',tsConfig.sessionid]);gc.data=gd;gc.async=false;this.$3(gc)},$3:function(e,gc){return fY.helper(e,gc)}},null,[cL]);ss.initClass(bJ,a,{get_isZoomin:function(){return this.$0},set_isZoomin:function(e){this.$0=e},shouldDeferLayoutUpdates:function(){return this.$1},setDeferLayoutUpdates:function(e){this.$1=e}});ss.initClass(bK,a,{handle:function(e,gc){if(!this.$2){return}if(ss.isNullOrUndefined(e)){return}var gd=tab.DataSourceConnectionAttemptErrorResponse.tryDeserialize(e.get_message());if(ss.isNullOrUndefined(gd)){return}var ge=e['status'];if(ss.isNullOrUndefined(ge)){return}if(!bK.shouldHandleWithGivenStatus(ge)){return}this.$0(gc,gd,false)},handlePotentialTabSwitchDataSourceException:function(e){if(!this.$2){return}if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.NHY)||ss.isNullOrUndefined(e.NHY.sq)||e.NHY.sq.length===0){return}var gc=ee.createSwitchSheetsCommand(tsConfig.current_sheet_name,tsConfig.embedded);gc.commandParams['ESN']=true;var gd=d.$0(gc,'immediately');var ge=e.NHY.sq[0];var gf=new tab.DataSourceConnectionAttemptErrorResponse;gf.ErrorType=ge.ppl;var gg=gf;var gh=bK.$1(ge.ppl);if(gh){var gi=bK.$0(ge);gg.RedirectUrl=gi}else{gg.ErrorMessage=ge.zRk}var gj=!ge.r_S;this.$0(gd,gg,gj)},$0:function(e,gc,gd){if(!ss.isNullOrEmptyString(gc.RedirectUrl)){var ge=(gd?'&skippopup=1':'');gc.RedirectUrl=ss.formatString('{0}{1}&vizqlSessionId={2}',gc.RedirectUrl,ge,tsConfig.sessionid)}e.reEnqueueCompletedCommandRecords();var gf=function(){ba.SendCommand(e)};var gg=!ss.isNullOrUndefined(e.get_commandName())&&ss.equalsT(e.get_commandName().toString(),'ensure-layout-for-sheet'.toString());var gh=bK.$1(gc.ErrorType);if(gg){if(gh){this.$1.showSheetAuthenticationOverlay(gc,gf)}else{this.$1.showGenericDataSourceErrorOverlay(gc,gf)}}else if(gh){this.$1.showSheetAuthenticationDialog(gc,gf)}else{this.$1.showGenericDataSourceErrorDialog(gc,gf)}}});ss.initClass(bL,a,{handleCommandFailure:function(e,gc,gd,ge){if(!this.$0){return false}if(!bK.shouldHandleWithGivenStatus(gc.status)){return false}var gf=tab.DataSourceConnectionAttemptErrorResponse.tryDeserialize(gc.responseText);if(ss.isNullOrUndefined(gf)){return false}return true}},null,[cL]);ss.initClass(bM,a,{add_layoutInfoUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_layoutInfoUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$3:function(){return this.pm},get_presetSizes:function(){return this.$4},get_defaultWidth:function(){return this.$3().Bgt},get_defaultHeight:function(){return this.$3().EVK},get_defaultMaxWidth:function(){return this.$3().PiK},get_defaultMaxHeight:function(){return this.$3().McJ},get_defaultMinWidth:function(){return this.$3().EVq},get_defaultMinHeight:function(){return this.$3().pAn},update:function(e){if(ss.isValue(e.ino)){this.$4=[];for(var gc=0;gc<e.ino.VGH.length;gc++){var gd=new eo(this.$5,gc);gd.update(e.ino.VGH[gc]);this.$4.push(gd)}}this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(bN,a,{add_modelUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_modelUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},$3:function(){return this.pm},get_diffOptionsRelativeValues:function(){return this.$3().XRV},get_diffOptionsRelativeCaptions:function(){return this.$3().lyG},get_diffOptionsFixedValues:function(){return this.$3().Eed},get_diffOptionsFixedCaptions:function(){return this.$3().xR_},get_diffOptionsParamValues:function(){return this.$3().GVW},get_diffOptionsParamCaptions:function(){return this.$3().Vhb},get_diffOptionsSets:function(){return this.$3().vGv},get_diffOptionsSelectionIndex:function(){return this.$3().MkB},get_computeCompoundedRate:function(){return this.$3().BVS},get_computeCompoundedRateState:function(){return this.$3().iPy},update:function(e){this.simpleSwapToUpdate(e,this.$3$1)}},fx);ss.initClass(bO,a,{});ss.initClass(bP,a,{get_levels:function(){return this.$3},get_childToSelect:function(){return this.$3[0]},get_instanceType:function(){return'drillPath'},get_canHaveChildren:function(){return true},update:function(e,gc){this.swapAndCopyPresModel(e);this.$3=gc}},cd);ss.initClass(bQ,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('drop-ref-line-on-filter-shelf',this.c))}},ss.makeGenericType(A,[Object,bR]));ss.initClass(bR,a,{});ss.initClass(bS,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('drop-ref-line-on-schema-viewer',this.c))}},ss.makeGenericType(A,[Object,bT]));ss.initClass(bT,a,{});ss.initClass(bU,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('drop-ref-line-on-shelf',this.c))}},ss.makeGenericType(A,[Object,bV]));ss.initClass(bV,a,{});ss.initClass(bW,a,{handle:function(e,gc,gd,ge){var gf=this.$0;for(var gg=0;gg<gf.length;gg++){var gh=gf[gg];if(gh.handleCommandFailure(e,gc,gd,ge)){return}}}});ss.initClass(bX,a,{$1:function(){return ss.getKeyCount(bX.$0)},$0:function(e){return bX.$0[e.toString()]}});ss.initEnum(bY,a,{onTabSelect:'onTabSelect',onDoLaunchAuthoring:'onDoLaunchAuthoring',newGuid:'newGuid',newLayoutId:'newLayoutId',activeViewChanged:'activeViewChanged',invalidate:'invalidate',hoverChanged:'hoverChanged',modifiedSheetsChanged:'modifiedSheetsChanged',workbookModifiedChanged:'workbookModifiedChanged',globalFirstTouch:'globalFirstTouch',globalPress:'globalPress',globalPotentialTap:'globalPotentialTap',globalLastTouch:'globalLastTouch',globalRightClick:'globalRightClick',globalDragEnd:'globalDragEnd',stateChanged:'stateChanged',layoutUpdated:'layoutUpdated',refreshLayoutModel:'refreshLayoutModel',sheetDataChanged:'sheetDataChanged',refreshSheetInfo:'refreshSheetInfo',refreshFilterModel:'refreshFilterModel',viewChanged:'viewChanged',refreshVisualModel:'refreshVisualModel',refreshLegacyLegendImages:'refreshLegacyLegendImages',refreshMenuModel:'refreshMenuModel',selectionChanged:'selectionChanged',onBootstrapSuccess:'onBootstrapSuccess',maxEvent:'maxEvent',openActionUrl:'openActionUrl',modifierKeysChanged:'modifierKeysChanged',fieldSelectionChanged:'fieldSelectionChanged',tabChangeCompleted:'tabChangeCompleted'},true);ss.initClass(bZ,a,{});ss.initClass(ca,a,{});ss.initClass(cb,a,{get_instanceType:function(){return'column'},get_defaultRole:function(){return this.fieldCol.tgs},get_role:function(){return this.fieldCol.YIQ},get_baseColumnName:function(){return(this.get_isInstance()?this.fieldCol._HL:this.get_globalName())},get_baseColumn:function(){return(this.get_isInstance()?this.get_parent().findField(this.get_baseColumnName()):this)},get_isInstance:function(){return!ss.isNullOrUndefined(this.fieldCol.sNb)&&this.fieldCol.sNb},get_isAllowedInCalcs:function(){var e=this.get_baseColumn();return(ss.referenceEquals(e,this)?cd.prototype.get_isAllowedInCalcs.call(this):e.get_isAllowedInCalcs())},get_isCalculated:function(){return this.fieldCol.TO_},update:function(e){this.fieldCol=e;this.swapAndCopyPresModel(e)}},cd);ss.initEnum(cc,a,{column:'column',drillPath:'drillPath',cubeDimension:'cubeDimension',group:'group',cubeHierarchy:'cubeHierarchy',relationalTable:'relationalTable',cubeFolder:'cubeFolder',folder:'folder',multiple:'multiple'},true);ss.initClass(ce,a,{});ss.initClass(cf,a,{add_invalidateZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_invalidateZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_flipboardPresModel:function(){return this.pm},get_storyPointModel:function(){return this.$3.get_currentStoryPoint()},get_dashboardModel:function(){return this.get_storyPointModel().get_dashboardModel()},get_zoneId:function(){return this.get_parent().get_zone().get_zoneId()},get_currentStoryPointId:function(){return this.get_flipboardPresModel().P_I},invalidated:function(){this.raiseEvent(this.$2$1)},update:function(e,gc){if(ss.isValue(e.P_I)){this.$3.update(e.stK[e.P_I.toString()],gc)}this.swapPresModel(e)}},db);ss.initClass(cg,a,{add_newFlipboardNav:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newFlipboardNav:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_flipboardNavPresModel:function(){return this.pm},get_currentPointIndex:function(){return this.get_flipboardNavPresModel().yTB},get_storyPoints:function(){return this.get_flipboardNavPresModel().mhR},get_zone:function(){return this.get_parent().get_zone()},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(ch,a,{});ss.initClass(ci,a,{get_fields:function(){return this.$3},get_folderRole:function(){return this.pm.HGC},get_instanceType:function(){return'folder'},get_canHaveChildren:function(){return true},get_isUnsortedContainer:function(){return true},update:function(e,gc){this.swapAndCopyPresModel(e);this.$3=gc}},cd);ss.initClass(cj,a,{get_fontGroup:function(){return this.$1$1},set_fontGroup:function(e){this.$1$1=e},get_fonts:function(){return this.$1$2},set_fonts:function(e){this.$1$2=e}});cj.$ctor1.prototype=cj.prototype;ss.initClass(cm,a,{add_updated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_updated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$3:function(){return this.pm},get_typeOfFormatItem:function(){return this.$3().XHt},get_widgetIdentifier:function(){return this.$3().KP$},get_isFormatContainer:function(){return this.get_typeOfFormatItem()==='formatContainer'},get_isFormatSection:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='formatSection'},get_isCollapsibleSection:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='collapsibleSection'},get_isCompositeContainer:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='compositeContainer'},get_isUnitContainer:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='unitContainer'},get_isTabGroup:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='tabGroup'},get_isTab:function(){return this.get_isFormatContainer()&&this.asFormatContainer().get_typeOfFormatContainer()==='tab'},get_isFormatControl:function(){return this.get_typeOfFormatItem()==='formatControl'},get_isTextControl:function(){return this.get_isFormatControl()&&this.asFormatControl().get_typeOfFormatControl()==='text-control'},raiseUpdated:function(){if(!ss.staticEquals(this.$2$1,null)){this.$2$1()}},asFormatContainer:function(){return ss.safeCast(this,ck)},asFormatControl:function(){return ss.safeCast(this,cl)},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(ck,a,{get_typeOfFormatContainer:function(){return this.pm.hfR},get_items:function(){return this.$5},get_name:function(){if(this.get_isFormatSection()){return this.pm.dMo}else{return null}},get_previewType:function(){if(this.get_isCompositeContainer()){return this.pm.cTa}else{return'none'}},get_previewProperties:function(){return this.$3$1},set_previewProperties:function(e){this.$3$1=e},get_label:function(){if(this.get_isUnitContainer()){return this.pm.pHt}else if(this.get_isTab()){return this.pm.pHt}else{return null}},get_isChanged:function(){if(this.get_isUnitContainer()){return this.pm.x$I}else{return false}},get_clearCommand:function(){if(this.get_isUnitContainer()){return this.pm.YOY}else{return null}},$4:function(){this.set_previewProperties({});var e=this.get_items();for(var gc=0;gc<e.length;gc++){var gd=e[gc];if(!gd.get_isFormatControl()){continue}var ge=gd.asFormatControl();var gf=ge.get_widgetKey();switch(gf){case'fontSize':{this.get_previewProperties()[gf]=ge.get_numericValue();break}case'fontFamily':{this.get_previewProperties()[gf]=ge.get_textValue();break}case'colorSwatch':{this.get_previewProperties()[gf]=ge.get_colorValue();break}case'bold':case'italics':case'underline':{this.get_previewProperties()[gf]=ge.get_toggleValue();break}default:{break}}}},update:function(e){this.simpleSwapToUpdate(e,ss.mkdel(this,function(){this.raiseUpdated()}));if(ss.isNullOrUndefined(this.$5)){this.$5=[];for(var gc=0;gc<this.pm.bRh.length;gc++){var gd=this.pm.bRh[gc];this.$5.push(cm.createModel(this,gd))}}else if(ss.isValue(this.pm.bRh)){for(var ge=0;ge<this.pm.bRh.length;ge++){var gf=this.pm.bRh[ge];this.$5[ge].update(gf)}}if(this.get_previewType()!=='none'){this.$4()}},isLinePicker:function(){if(this.get_items().length!==3){return false}if(this.get_items()[0].get_typeOfFormatItem()!=='formatControl'||this.get_items()[0].asFormatControl().get_widgetKey()!=='linePattern'){return false}if(this.get_items()[1].get_typeOfFormatItem()!=='formatControl'||this.get_items()[1].asFormatControl().get_widgetKey()!=='lineSize'){return false}if(this.get_items()[2].get_typeOfFormatItem()!=='formatControl'||this.get_items()[2].asFormatControl().get_widgetKey()!=='colorSwatch'){return false}return true}},cm);ss.initClass(cl,a,{get_typeOfFormatControl:function(){return this.pm.CFz},get_commandRedirectType:function(){return this.pm.XAS},get_formatCommand:function(){return this.pm.Fks},get_simpleCommand:function(){return bh.deserialize(en.create(this.get_formatCommand()).get_simpleCommand())},get_widgetKey:function(){return this.pm.eKx},get_textValue:function(){return this.get_presModel().vau},get_numericValue:function(){return this.get_presModel().hUw},get_colorValue:function(){return this.get_presModel().YhU},get_canBeAuto:function(){return this.get_presModel().yVr},get_canBeNone:function(){return this.get_presModel().FEU},get_canMatchMarkColor:function(){return this.get_presModel().uyN},get_hasOpacity:function(){return this.get_presModel().HUJ},get_colorSwatchType:function(){return this.get_presModel().VZa},get_selectorValue:function(){return this.get_presModel().vau},get_toggleValue:function(){return this.get_presModel().gbN}},cm);ss.initClass(cn,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('get-dashboard-drag-drop',this.c))}},ss.makeGenericType(A,[Object,co]));ss.initClass(co,a,{});ss.initClass(cp,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('get-drag-pres-model',this.c))}},ss.makeGenericType(A,[Object,cq]));ss.initClass(cq,a,{});ss.initClass(cr,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('get-ref-line-drag-info',this.c))}},ss.makeGenericType(A,[Object,cs]));ss.initClass(cs,a,{});ss.initClass(ct,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('get-ref-line-formula',this.c))}},ss.makeGenericType(A,[Object,cu]));ss.initClass(cu,a,{});ss.initClass(cv,a,{get_instanceType:function(){return'group'},get_isCombinedField:function(){return this.fieldCol.dhu||false}},cb);ss.initClass(cw,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('hide-zone',this.c))}},ss.makeGenericType(A,[Object,cx]));ss.initClass(cx,a,{});ss.initClass(cy,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('highlight-items-by-pattern-match',this.c))}},ss.makeGenericType(A,[Object,cz]));ss.initClass(cz,a,{});ss.initClass(cA,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('highlight-items',this.c))}},ss.makeGenericType(A,[Object,cB]));ss.initClass(cB,a,{});ss.initClass(cC,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('hit-test-scene',this.c))}},ss.makeGenericType(A,[Object,cD]));ss.initClass(cD,a,{});ss.initEnum(cE,a,{escape:0,noEscape:1});ss.initInterface(cF,a,{add_sliderFractionUpdated:null,remove_sliderFractionUpdated:null,get_currentFraction:null,setCurrentFraction:null});ss.initInterface(cG,a,{get_sheetScrollPositions:null});ss.initInterface(cH,a,{triggerExportPdfUI:null});ss.initClass(cI,a,{add_newImageZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newImageZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_zone:function(){return this.$3.get_presModel()},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(cJ,a,{});ss.initClass(cM,a,{add_newLayerEncoding:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newLayerEncoding:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_id:function(){return this.get_layerPresModel().FsL},get_name:function(){return this.get_layerPresModel().dMo},get_isTableCalc:function(){return this.get_layerPresModel().trO},get_encodings:function(){return _.filter(this.get_layerPresModel().Sfw,function(e){return e.DIk&&e.Tsz})},get_textEncodingDropdown:function(){return this.getDropdownPresModel('text-encoding')},get_colorEncodingDropdown:function(){return this.getDropdownPresModel('color-encoding')},get_currentPrimitiveType:function(){var e=_.find(this.get_primitiveTypes(),function(gc){return gc.NPh});return e},get_primitiveTypes:function(){return _.filter(this.get_layerPresModel().Arf,function(e){return e.DIk&&e.Tsz})},get_markSizeModel:function(){return this.$3},get_layerPresModel:function(){return this.pm},update:function(e){this.simpleSwapToUpdate(e,this.$2$1);if(ss.isNullOrUndefined(this.$3)){this.$3=new da(this)}this.$3.update(this.getDropdownPresModel('size-encoding'))},equals$1:function(e){return this.get_id()===e.FsL},getDropdownPresModel:function(e){var gc=_.filter(this.get_layerPresModel().Sfw,function(gd){return gd.DIk&&gd.Tsz&&gd.Srb===e});if(ss.isNullOrUndefined(gc)||gc.length!==1){return null}return gc[0].URw}},db);ss.initClass(cN,a,{get_layoutId:function(){return this.layoutid},set_layoutId:function(e){this.layoutid=e},formatDashboardTempfileReference:function(e,gc,gd){return this.formatLayoutMethod(this.layoutid,'tempfile')+'/?key='+e+(gc?'&keepfile=yes':'')+(gd?'&attachment=yes':'')},saveSharedView:function(e,gc,gd){var ge=function(gj,gk,gl){gj['button']=e;if(ss.isValue(gj['guid'])){fY.guid=gj['guid']}dojo.publish('newGuid'.toString(),[gj])};var gf=ss.mkdel(this,function(gj,gk,gl){fY.guid=null;if(gj.status===410||gj.status===403){this.defaultSessionErrorHandler.handleSessionExpiration(false)}else if(gj.status===401){this.handleAuthenticationFailure()}else{var gm=new Object;gm['button']=e;gd(gm)}});var gg=this.$0(null,ge,gf,'none');var gh={};gh['sheet_id']=fY.get_currentTabName();gh['parent_id']=fY.parentID;gh['primary_content_url']=gc;gh['share_button']=e;var gi=this.basicPostOpts(this.$4('save_shared_view'),gh);gi.async=false;gi.timeout=2000;this.$b(gi,gg)},saveAndOpenMetricsView:function(){window.open(this.$4('save_metrics_view'),'metrics','scrollbars,resizable')},metricsViewDownloadUrl:function(){return this.$4('download_metrics_view')},getAutocompleteInfo:function(e,gc,gd){var ge=function(gh,gi,gj){gc(gh['new_value'])};var gf=this.basicGetOpts(this.formatLayoutMethod(this.layoutid,'getautocomplete'));var gg=ss.mkdict(['fieldname',gd,'input_string',e]);gf.data=gg;gf.success=ge;this.$b(gf)},performPostLoadOperations:function(e,gc){var gd=function(gi,gj,gk){if(ss.isValue(gc)){gc(gi)}};var ge=ss.mkdel(this,function(gi,gj,gk){if(gi.status===410||gi.status===404||gi.status===403){throw new ss.Exception(gi.status+' response on postLoadOperations')}else{this.$6(gk,gi,true,null)}});var gf=this.$0(null,gd,ge,'none');var gg=ss.mkdict(['sheet_id',e]);var gh=ss.mkdict([]);gh.data=gg;gh.async=true;gh.type='GET';gh.headers=ss.mkdict(['Accept','text/javascript']);gh.dataType='json';gh.url=this.formatLayoutMethod(this.layoutid,'performPostLoadOperations');this.$b(gh,gf)},getTopic:function(e){return this.getTopicCore(e,'Layout_'+tsConfig.sheetId)}},B);ss.initClass(cO,a,{get_filterField:function(){return this.$0},get_targetSheets:function(){return this.$3},set_targetSheets:function(e){this.$3=e},get_includeAll:function(){return this.$1},set_includeAll:function(e){this.$1=e;this.clearValues()},get_isExclude:function(){return this.$2},addValue:function(e){if(ss.contains(this.$4,e)){return false}this.$4.push(e);return true},clearValues:function(){ss.clear(this.$4)},getFilterValues:function(){return Array.prototype.slice.call(this.$4)},includesValue:function(e){if(this.get_includeAll()){return true}return this.$2!==ss.contains(this.$4,e)},removeValue:function(e){if(ss.contains(this.$4,e)){return false}ss.remove(this.$4,e);return true}});ss.initClass(cQ,a,{add_filterUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_filterUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_filterPresModel:function(){return this.get_presModel()},get_filterType:function(){switch(this.get_filterPresModel().type){case'Q':{return'Quantitative'}case'H':{return'Hierarchical'}case'C':{return'Categorical'}case'RD':{if(this.get_filterPresModel().showRelDatePick){return'RelativeDatePick'}else{return'RelativeDate'}}default:{return'FilterDefault'}}},get_caption:function(){return this.get_filterPresModel().caption},get_fieldCaption:function(){return this.get_filterPresModel().fieldCaption},get_fieldName:function(){return this.get_filterPresModel().fieldName},get_datasourceName:function(){return this.get_filterPresModel().fieldDatasource},get_domains:function(){return this.get_filterPresModel().domains},get_name:function(){return this.get_filterPresModel().name},get_role:function(){return this.get_filterPresModel().role},get_targetSheets:function(){return this.get_filterPresModel().targetSheets},get_globalFieldName:function(){var e=this.get_presModel();var gc=new String;gc='[';for(var gd=0;gd<e.name.length;++gd){if(ss.endsWithString(gc,']')){gc+='.';gc+='['}gc+=e.name[gd];gc+=']'}return gc},update:function(e){if(!this.isNewPresModelSameAsOld(e)){this.pm=e;this.raiseEvent(this.$2$1)}else if(ss.isValue(e)&&e.isTiled){this.raiseEvent(this.$2$1)}}},db);ss.initClass(cP,a,{get_filterType:function(){return'Categorical'},get_mode:function(){switch(this.get_filterPresModel().mode){case'checklist':{return'check-list'}case'radiolist':{return'radio-list'}case'dropdown':{return'dropdown'}case'checkdropdown':{return'check-dropdown'}case'slider':{return'slider'}case'pattern':{return'pattern'}case'typeinlist':{return'type-in-list'}default:{return'check-list'}}},get_pattern:function(){return this.get_filterPresModel().pattern},get_isAllMode:function(){return this.get_filterPresModel().all},get_allItemsAreChecked:function(){return this.get_filterPresModel().allChecked},get_noItemsAreChecked:function(){return this.get_filterPresModel().allNotChecked},get_exclude:function(){return this.get_filterPresModel().exclude},get_isTiled:function(){return this.get_filterPresModel().isTiled},get_isSearchable:function(){return this.get_filterPresModel().is_searchable},get_summary:function(){return this.get_filterPresModel().summary},get_underlyingDataSourceIsCube:function(){return this.get_filterPresModel().catIsHier},get_condition:function(){return this.get_filterPresModel().condition},get_limit:function(){return this.get_filterPresModel().limit},get_rangeType:function(){return this.get_filterPresModel().rangeType},get_catFilterTable:function(){return this.get_filterPresModel().table},get_domainActualSize:function(){return this.get_catFilterTable().actual_size},get_tuples:function(){return this.get_catFilterTable().tuples}},cQ);ss.initClass(cR,a,{get_filterType:function(){return'Hierarchical'},get_hierarchyTables:function(){return this.get_filterPresModel().table},get_levels:function(){return this.get_filterPresModel().levels},get_isSearchable:function(){return this.get_filterPresModel().is_searchable}},cQ);ss.initClass(cS,a,{add_newLegacyLegend:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newLegacyLegend:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(cT,a,{get_filterType:function(){return'Quantitative'},get_range:function(){return this.get_filterPresModel().range},get_data:function(){return this.get_filterPresModel().data},get_dateFormat:function(){return this.get_filterPresModel().date_format},get_editingFormat:function(){return this.get_filterPresModel().editing_format},get_format:function(){return this.get_filterPresModel().format},get_calendarControlStartOfWeek:function(){return this.get_filterPresModel().first_day_of_week},get_dataSourceStartOfWeek:function(){return this.get_filterPresModel().start_of_week},get_quantitativeFilterTable:function(){return this.get_filterPresModel().table},get_column:function(){return this.get_quantitativeFilterTable().column},get_included:function(){return this.get_quantitativeFilterTable().included},get_min:function(){return this.get_quantitativeFilterTable().min},get_max:function(){return this.get_quantitativeFilterTable().max}},cQ);ss.initClass(cU,a,{add_quickFilterDisplayUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_quickFilterDisplayUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_quickFilterTitle:function(){return this.get_quickFilterDisplayPresModel().jOs},get_quickFilterCommands:function(){return this.get_quickFilterDisplayPresModel().D_I},get_quickFilterModeMatrix:function(){var e=tab.FeatureParamsLookup.getBool(4);if(e){return this.$3()}else{return null}},get_quickFilterDisplayPresModel:function(){return this.pm},get_zone:function(){return this.get_zoneModel().get_presModel()},get_frame:function(){return this.$4},get_zoneModel:function(){return this.get_parent().get_zone()},update:function(e,gc){var gd=!_.isEqual(this.$4,gc);this.$4=gc;if(this.isNewPresModelSameAsOld(e)){if(gd){this.raiseEvent$1(Object).call(this,this.$2$1,e)}return}if(ss.isValue(e)&&ss.isValue(e.jOs)){this.$6=new fs(this,'jOs'.toString())}this.$6.update(e.jOs);if(ss.isValue(e)&&ss.isValue(e.D_I)){this.$5=new bi(this)}this.$5.update(e.D_I);this.simpleSwapToUpdate$1(Object).call(this,e,this.$2$1,e)},$3:function(){var e=[];var gc=['year','qtr','month','day','hour','minute','second','week','weekday','month-year','mdy','none','trunc-year','trunc-qtr','trunc-month','trunc-week','trunc-day','trunc-hour','trunc-minute','trunc-second'];var gd=['check-list','radio-list','dropdown','slider','pattern','type-in-list','check-dropdown'];var ge=['min-max','min-only','max-only','rel-date','rel-pick'];for(var gf=0;gf<gc.length;gf++){var gg=gc[gf];for(var gh=0;gh<gd.length;gh++){var gi=gd[gh];var gj={};gj.Ymv1=gg;gj.etp=gi;e.push(gj)}for(var gk=0;gk<ge.length;gk++){var gl=ge[gk];var gm={};gm.Ymv1=gg;gm.SPS=gl;e.push(gm)}}return e}},db);ss.initClass(cV,a,{get_filterType:function(){return(this.get_isRelativeDatePick()?'RelativeDatePick':'RelativeDate')},get_defaultFormat:function(){return this.get_filterPresModel().default_format},get_fiscalYearStart:function(){return this.get_filterPresModel().fy},get_noTime:function(){return this.get_filterPresModel().noTime},get_isRelativeDatePick:function(){return this.get_filterPresModel().showRelDatePick},get_text:function(){return this.get_filterPresModel().text},get_relativeDateTable:function(){return this.get_filterPresModel().table},get_periodType:function(){return this.get_relativeDateTable().periodType},get_rangeType:function(){return this.get_relativeDateTable().rangeType},get_rangeN:function(){return this.get_relativeDateTable().rangeN},get_anchor:function(){return this.get_relativeDateTable().anchor}},cQ);ss.initClass(cW,a,{fractionToValue:function(e){return this.$1+e*(this.$0-this.$1)},valueToFraction:function(e){return((this.$1===this.$0)?0:((e-this.$1)/(this.$0-this.$1)))}},dB);ss.initClass(cX,a,{get_interactedTupleIds:function(){return this.$1},get_affectedTupleIds:function(){return this.$0},get_paneDescriptorKey:function(){return this.$3},get_needRemoteUbertip:function(){return this.$2},shouldDoLocalUbertip:function(){return ss.isValue(this.$1)&&ss.isValue(this.$3)&&this.$1.length>0}});ss.initClass(cY,a,{add_newMapServerInfo:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newMapServerInfo:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_useFastMaps:function(){return this.get_hasPresModel()&&this.get_mapServerPresModel().wKy},get_hasPresModel:function(){return ss.isValue(this.get_presModel())},get_isAttributionVisible:function(){return this.get_mapServerPresModel().cpo},get_minZoom:function(){return this.get_mapServerPresModel().Tvg},get_maxZoom:function(){return this.get_mapServerPresModel().AqY},get_zoom:function(){var e=Math.log(this.get_mapServerPresModel().nyL)/Math.LN2;var gc=this.get_mapServerPresModel().Vot+e;if(this.get_useFastMaps()){gc-=tab.MapUtil.getLeafletZoomOffsetForTileSize(this.get_tilePixelSize())}return gc},get_centerLatitude:function(){return this.get_mapServerPresModel().koK},get_centerLongitude:function(){return this.get_mapServerPresModel().gJt},get_tilePixelSize:function(){return this.get_mapServerPresModel().WLq},get_numWorldRepeats:function(){return this.get_mapServerPresModel().gub1},get_tileUrl:function(){var e=this.get_mapServerPresModel();var gc;if(ss.startsWithString(e.ywq.toString(),'http://')||ss.startsWithString(e.ywq.toString(),'https://')){gc=''}else{var gd=tab.WindowHelper.getLocation(window.self).protocol;gc=gd+'//'}gc+=e.ywq;if(!ss.endsWithString(gc,String.fromCharCode(47))&&!ss.startsWithString(e.hbM.toString(),String.fromCharCode(47))){gc+='/'}gc+=e.hbM;gc=ss.replaceAllString(gc,'{K}',e.Dwf);gc=ss.replaceAllString(gc,'{L}',e.buX);var ge=tab.DoubleUtil.isGreaterThanOrApproximatelyEqual(tab.BrowserSupport.get_devicePixelRatio(),2);gc=ss.replaceAllString(gc,'{D}',(ge?'@2x':''));gc=ss.replaceAllString(gc,'{X}','{x}');gc=ss.replaceAllString(gc,'{Y}','{y}');gc=ss.replaceAllString(gc,'{Z}','{z}');gc=ss.replaceAllString(gc,'{P}','{p}');return gc},get_hasValidTileLayer:function(){return this.get_mapServerPresModel().gxH},get_attributionUrl:function(){return this.get_mapServerPresModel().FMn},get_attributionText:function(){return this.get_mapServerPresModel().IRP},get_attributionTextColor:function(){return this.get_mapServerPresModel().Qfp},get_attributionTextSize:function(){return this.get_mapServerPresModel().iff},get_attributionBGColor:function(){return this.$3(this.get_mapServerPresModel().voD)},get_mapBGFillColor:function(){return this.$3(this.get_mapServerPresModel().mZp)},get_hasWashout:function(){return this.get_mapServerPresModel().gEj>0},get_washoutColor:function(){var e=Math.max(0,Math.min(1,this.get_mapServerPresModel().gEj));return new X(255,255,255,e)},get_intermediateTileLevels:function(){return this.get_mapServerPresModel().nUd},get_mapServerPresModel:function(){return this.pm},get_radialSelectionDistanceInfoModel:function(){return this.$4},update:function(e){this.simpleSwapToUpdate(e,this.$2$1);if(this.get_hasPresModel()){this.$4.update(this.get_mapServerPresModel().mZ_)}},$3:function(e){return X.fromColorCode(e||'rgb(255,255,255)').toString()}},db);ss.initClass(cZ,a,{add_newMarksCard:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newMarksCard:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_layers:function(){return this.$5},get_activePaneSpecId:function(){return this.$4},set_activePaneSpecId:function(e){this.$4=e},update:function(e){if(this.isNewPresModelSameAsOld(e)){return}var gc=[];if(ss.isValue(e)&&ss.isValue(e.baQ)){this.$3(e.baQ,gc)}if(ss.isValue(e)&&ss.isValue(e.CGV)){for(var gd=0;gd<e.CGV.length;gd++){var ge=e.CGV[gd];this.$3(ge,gc)}}this.$5=gc;this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$1)},$3:function(e,gc){var gd=_.find(this.$5,function(ge){return ge.equals$1(e)});if(ss.isNullOrUndefined(gd)){gd=new cM(this,e.FsL)}gd.update(e);gc.push(gd)}},db);ss.initClass(da,a,{add_sliderFractionUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_sliderFractionUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_markSizePresModel:function(){return this.pm},get_minMarkSize:function(){return this.get_markSizePresModel().wFL},get_maxMarkSize:function(){return this.get_markSizePresModel().Utx},get_currentMarkSize:function(){return this.get_markSizePresModel().DOI},get_currentSliderFraction:function(){return this.$5.valueToFraction(this.get_currentMarkSize())},get_transform:function(){return this.$5},get_parentModel:function(){return this.$4},get_currentFraction:function(){return this.get_currentSliderFraction()},setCurrentFraction:function(e){},markSizeUpdated:function(){if(ss.isValue(this.$2$1)){this.$2$1(this.get_currentSliderFraction())}},update:function(e){if(ss.isValue(e)){this.$3(e)}this.simpleSwapToUpdate(e,ss.mkdel(this,this.markSizeUpdated))},$3:function(e){switch(e.Iqw.length){case 0:{this.$5=new cW(e.wFL,e.Utx);break}case 1:{var gc=e.Iqw[0];this.$5=new s(e.wFL,e.Utx,gc.mOt,gc.dbq,gc.mOt,gc.dbq);break}case 2:default:{var gd=e.Iqw[0];var ge=e.Iqw[1];this.$5=new s(e.wFL,e.Utx,gd.mOt,gd.dbq,ge.mOt,ge.dbq);break}}}},db,[cF]);ss.initClass(de,a,{});ss.initClass(df,a,{get_instanceType:function(){return'multiple'}},cd);ss.initClass(dg,a,{add_newPage:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newPage:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_title:function(){return tableau.format.stripFormattedText(this.get_pagePresModel().us$)},get_pagePresModel:function(){return this.pm},get_zone:function(){return this.$4.get_presModel()},get_frame:function(){return this.$3},get_zoneModel:function(){return this.$4},update:function(e,gc,gd){this.$3=gc;if(gd){this.simpleSwapToUpdate$1(Object).call(this,e,this.$2$1,e)}else{this.swapAndCopyPresModel(e)}}},db);ss.initClass(dh,a,{});ss.initClass(di,a,{});ss.initClass(dj,a,{get_rowIndex:function(){return this.$0['ASo']},get_columnIndex:function(){return this.$0['_WI']},get_pageIndex:function(){return(ss.keyExists(this.$0,'jal')?this.$0['jal']:0)},get_presModel:function(){return this.$0},update:function(e){if(ss.isValue(e)){this.$0=e}else{this.$0={};this.$0['_WI']=0;this.$0['ASo']=0}}});dj.$ctor1.prototype=dj.prototype;ss.initClass(dk,a,{add_newParameterCtrl:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newParameterCtrl:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_parameterCtrlPresModel:function(){return this.pm},get_parameterCtrlJsonPresModel:function(){return this.get_parameterCtrlPresModel().nql},get_zone:function(){return this.get_zoneModel().get_presModel()},get_frame:function(){return this.$3},get_zoneModel:function(){return this.get_parent().get_zone()},update:function(e,gc){this.$3=gc;this.simpleSwapToUpdate$1(Object).call(this,e,this.$2$1,e)}},db);ss.initClass(dl,a,{});ss.initClass(dm,a,{add_modelUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_modelUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},$3:function(){return this.pm},get_allPages:function(){return this.$3().buS},get_allPagesState:function(){return this.$3().YtV},update:function(e){this.simpleSwapToUpdate(e,this.$3$1)}},fx);ss.initClass(dn,a,{});ss.initClass(dp,a,{get_encodingType:function(){if(ss.isNullOrUndefined(this.get_item())||ss.isNullOrUndefined(this.get_item().Srb)){return'invalid-encoding'}return this.get_item().Srb},get_alternateEncodings:function(){if(ss.isNullOrUndefined(this.get_item())||ss.isNullOrUndefined(this.get_item().Sfw)){return[]}return _.filter(this.get_item().Sfw,function(e){return e.DIk&&e.Tsz})},get_filterType:function(){if(ss.isNullOrUndefined(this.get_item())||ss.isNullOrUndefined(this.get_item().Obm)){return'no-filter'}return this.get_item().Obm},get_hasDrill:function(){return this.get_item().IXT||false},get_shouldDrill:function(){return this.get_hasDrill()&&(this.get_item()._lm||false)},get_item:function(){return this.pm},get_column:function(){return this.$3},get_tooltip:function(){return tableau.format.stripFormattedText(this.get_item().iHY)},get_sideIconToolip:function(){return tableau.format.stripFormattedText(this.get_item().tCk)},get_displayName:function(){return this.get_item().MzX},get_contextMenuCommands:function(){return this.get_item().Jmx},get_isMultipleFields:function(){return this.get_item().Srb!=='invalid-encoding'&&ss.isInstanceOfType(this.$3,df)},update:function(e,gc){if(this.isNewPresModelSameAsOld(e)){return}this.$3=gc;this.swapAndCopyPresModel(e)}},db);ss.initClass(dq,a,{});ss.initClass(dr,a,{get_pathList:function(){return this.$0},add:function(e){this.$0.push(e)},reverse:function(){this.$0.reverse()}});ss.initClass(ds,a,{});ss.initEnum(dt,a,{simple:0,array:1});ss.initClass(du,a,{add_progressiveLoad:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_progressiveLoad:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_progressiveLoadComplete:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_progressiveLoadComplete:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},get_hasZonesToLoad:function(){if(ss.isValue(this.$k)&&ss.getKeyCount(this.$k)>0){return true}if(ss.isNullOrUndefined(this.$j)){return false}for(var e=0;e<du.$6.length;e++){var gc=du.$6[e];if(ss.isNullOrUndefined(this.$j[gc])){continue}return true}return false},extractZoneContent:function(e){if(!du.$3(e)){return e}var gc=this.$4(e);if(ss.isNullOrUndefined(gc)){return e}gc.HCq=this.$5(gc.HCq);return e},updateZonesWithVizData:function(e){if(ss.isNullOrUndefined(this.$o)||ss.getKeyCount(this.$o)===0){return}fL.addVizDataToZones(e.NdE,this.$o);var gc=_.keys(this.$o);for(var gd=0;gd<gc.length;gd++){var ge=gc[gd];var gf=this.$p[ge]||this.$3(this.$o[ge]);if(ss.isValue(gf)&&ss.isValue(gf.get_visualModel())){var gg=gf.get_visualModel();gg.update(gg.pm)}}},processModelUpdate:function(e,gc){if(!du.$3(e)||!this.get_hasZonesToLoad()){return e}var gd=this.$4(e);if(ss.isNullOrUndefined(gd)){return e}var ge=db.removeUndefinedBoolsOnSwapCopy;if(gc){db.removeUndefinedBoolsOnSwapCopy=false}try{var gf=gd.HCq;var gg=_.keys(gf);for(var gh=0;gh<gg.length;gh++){var gi=gg[gh];var gj=gf[gi];if(ss.isNullOrUndefined(gj)){continue}if(!ss.contains(du.zonesThatDeferContentCreation,gj.jAM)){continue}var gk=false;var gl=gj.BCp;var gm=[du.$7[gj.jAM],6];for(var gn=0;gn<gm.length;gn++){var go=gm[gn];var gp=this.$j[go];if(ss.isValue(gp)){var gq=gp.length;for(var gr=0;gr<gq;gr++){var gs=gp[gr];if(ss.isValue(gs)&&gs.BCp===gl){gk=true;gp[gr]=this.$1(gs,gj);break}}}if(gk){break}}if(!gk&&gj.jAM==='viz'){var gt=_.keys(this.$k);for(var gu=0;gu<gt.length;gu++){var gv=gt[gu];var gw=this.$k[gv];if(gl===gw.BCp){gk=true;this.$k[gv]=this.$1(gw,gj);break}}}if(gk){gj=du.removeZoneContent(gj)}}}finally{db.removeUndefinedBoolsOnSwapCopy=ge}return e},start:function(){if(!this.get_hasZonesToLoad()){this.$6();this.$c();return}this.$b();this.$e();this.$d()},abort:function(){if(ss.isValue(this.$l)){if(ss.isValue(tab.FeatureParamsLookup.getInt(39))){window.clearTimeout(ss.unbox(this.$l))}else{tab.WindowHelper.cancelAnimationFrame(ss.unbox(this.$l))}this.$l=null}this.$c()},setViewport:function(e){var gc=e.get_dimensions();this.$n={x:gc.l,y:gc.t,w:gc.w,h:gc.h};this.$b()},getPendingVisuals:function(){var e={};var gc=_.keys(this.$o);for(var gd=0;gd<gc.length;gd++){var ge=gc[gd];var gf=this.$o[ge].AVP;var gg=this.getPendingVisual(gf);if(ss.isValue(gg)){e[gf]=gg}}return e},getPendingVisual:function(e){var gc=null;var gd=_.keys(this.$o);for(var ge=0;ge<gd.length;ge++){var gf=gd[ge];if(ss.referenceEquals(this.$o[gf].AVP,e)){gc=this.$o[gf];break}}if(ss.isNullOrUndefined(gc)){return null}var gg=this.$p[gc.BCp]||this.$3(gc);return gg.get_visualModel()},$c:function(){this.$j=null;this.$k=null;this.$o=null;this.$p=null;this.$m=null;this.$l=null;this.$n=null;this.$h=false},$8:function(){var e={};for(var gc=0;gc<du.$6.length;gc++){var gd=du.$6[gc];if(gd===6&&ss.isValue(this.$k)&&ss.getKeyCount(this.$k)>0){this.$j[6]=this.$j[6]||[];var ge=_.keys(this.$k);for(var gf=0;gf<ge.length;gf++){var gg=ge[gf];this.$j[6].push(this.$k[gg])}this.$k=null}var gh=this.$j[gd];if(ss.isNullOrUndefined(gh)){continue}var gi=gh.length;var gj=du.$5[gd];var gk=0;if(gj.item1===-1){gk=gi}else{gk=Math.max(gj.item1,Math.ceil(gj.item2*gi))}var gl=0;var gm=0;while(gl<gk&&gm<gi){var gn=gh[gm];gh[gm]=null;gm++;if(ss.isNullOrUndefined(gn)){continue}if(du.$2(gn.jAM)){var go=gn.AVP;if(ss.isValue(this.$k)&&ss.keyExists(this.$k,go)){var gp=this.$k[go];delete this.$k[go];delete this.$o[gp.BCp];e[gp.BCp.toString()]=gp}}delete this.$o[gn.BCp];delete this.$p[gn.BCp];e[gn.BCp.toString()]=gn;++gl}if(gm===gi){this.$j[gd]=null}break}return e},$9:function(e){if(ss.isNullOrUndefined(this.$n)){var gc=new tab.WindowHelper(window.self);var gd=gc.get_innerWidth();var ge=gc.get_innerHeight();var gf=gc.get_pageXOffset();var gg=gc.get_pageYOffset();this.$n={x:gf,y:gg,w:gd,h:ge}}var gh={x:e.thj,y:e.RAC,w:e.rec,h:e.EUR};return tab.RectXYUtil.intersectsWith(gh,this.$n)},$0:function(){var e=this.$8();if(ss.isNullOrUndefined(e)||ss.getKeyCount(e)===0){return null}var gc=tab.MiscUtil.cloneObject(this.$m);du.getZoneRoot(gc).HCq=e;return gc},$d:function(){var e=tab.FeatureParamsLookup.getInt(39);if(ss.isValue(e)){this.$l=window.setTimeout(ss.mkdel(this,this.$a),ss.unbox(e))}else{this.$l=tab.WindowHelper.requestAnimationFrame(ss.mkdel(this,function(){this.$a()}))}},$g:function(){for(var e=0;e<du.$6.length;e++){var gc=du.$6[e];if(gc===6){continue}if(ss.isValue(this.$j[gc])){return true}}return false},$a:function(){var e=this.$0();this.$7(e);if(!this.$h&&!this.$g()){tab.MiscUtil.raiseAllZonesLoaded();this.$h=true}if(this.get_hasZonesToLoad()){this.$d()}else{this.$6();this.$c()}},$7:function(e){if(!ss.staticEquals(this.$1$1,null)){this.$1$1(e)}},$6:function(){if(!ss.staticEquals(this.$1$2,null)){this.$1$2()}},$4:function(e){if(ss.isNullOrUndefined(e)){return null}var gc=du.getZoneRoot(e);if(ss.isNullOrUndefined(gc)&&ss.isNullOrUndefined(this.$m)){return null}this.$2(e);return gc},$5:function(e){if(ss.isNullOrUndefined(e)){return null}du.$1();this.$o={};this.$j={};this.$p={};var gc=ss.getEnumerator(Object.keys(e));try{while(gc.moveNext()){var gd=gc.current();var ge=e[gd];if(!ss.contains(du.zonesThatDeferContentCreation,ge.jAM)){continue}var gf=du.cloneZone(ge);ge=du.removeZoneContent(ge);if(gf.jAM==='viz'){this.$o[gd]=gf}var gg=5;if(ss.keyExists(du.$7,gf.jAM)){gg=du.$7[gf.jAM]}this.$j[gg]=this.$j[gg]||[];this.$j[gg].push(gf)}}finally{gc.dispose()}return e},$b:function(){if(ss.isNullOrUndefined(this.$j)||this.$i){return}this.$k=this.$k||{};for(var e=0;e<du.$6.length;e++){var gc=du.$6[e];if(gc===6){continue}var gd=this.$j[gc];if(ss.isNullOrUndefined(gd)||gd.length===0){continue}var ge=0;var gf=new Array(gd.length);for(var gg=0;gg<gd.length;gg++){var gh=gd[gg];if(this.$9(gh)){gf[ge]=gh;ge++}else if(gh.jAM==='viz'){this.$k[gh.AVP]=gh}else{this.$j[6]=this.$j[6]||[];this.$j[6].push(gh)}}if(ge>0){gf.length=ge;this.$j[gc]=gf}else{this.$j[gc]=null}}this.$i=true},$f:function(e){if(ss.isNullOrUndefined(e)||e.length===0){return null}var gc={};for(var gd=0;gd<e.length;gd++){var ge=e[gd];var gf=ge.RAC*5000+ge.thj;while(ss.isValue(gc[gf])){gf+=1}gc[gf]=ge}var gg=_.keys(gc);var gh=gg.length;for(var gi=0;gi<gh;gi++){gg[gi]=parseInt(gg[gi].toString())}gg=gg.sort(function(gm,gn){return((gm>gn)?1:-1)});for(var gj=0;gj<gh;gj++){var gk=gg[gj];var gl=gc[gk];e[gj]=gl}return e},$e:function(){if(ss.isNullOrUndefined(this.$j)){return}for(var e=0;e<du.$6.length;e++){var gc=du.$6[e];if(gc===6){continue}var gd=this.$j[gc];this.$j[gc]=this.$f(gd)}},$3:function(e){var gc=de.findContentDashboard();var gd=new ga(gc.get_zonesModel(),gc,e.BCp);gd.update(e,null);this.$p[e.BCp]=gd;if(e.jAM==='viz'){var ge=gd.get_visualModel();if(ss.isValue(ge)){var gf=function(){if(!ge.get_isVisualValid()||ss.getKeyCount(ge.get_hiddenTuples())>0||ss.getKeyCount(ge.get_filteredTuples())>0){ge.pm.GiX=false}};ge.add_newFilteredTuples(gf);ge.add_newHiddenTuples(gf);ge.add_visualValidStateChanged(gf)}}return gd},$1:function(e,gc){var gd=this.$p[e.BCp]||this.$3(e);var ge=du.cloneZone(gc);gd.update(ge,null);return ge},$2:function(e){if(ss.isNullOrUndefined(e)){return}var gc=this.$m;var gd=e;var ge=null;this.$m=du.$0(gd,gc);ge=this.$m;gd=gd.res;gc=(ss.isNullOrUndefined(gc)?null:gc.res);ge.res=du.$0(gd,gc);if(ss.isNullOrUndefined(gd)){return}ge=ge.res;gd=gd.mmK;gc=(ss.isNullOrUndefined(gc)?null:gc.mmK);ge.mmK=du.$0(gd,gc);if(ss.isNullOrUndefined(gd)){return}if(e.res.mmK.Jqz){ge=ge.mmK;gd=gd.HCq;gc=(ss.isNullOrUndefined(gc)?null:gc.HCq);var gf=null;var gg='';if(ss.isValue(gd)){var gh=gd;var gi=_.keys(gh);for(var gj=0;gj<gi.length;gj++){var gk=gi[gj];if(gh[gk].jAM!=='flipboard'){continue}gf=gh[gk];gg=gk;break}}if(ss.isNullOrUndefined(gf)){ge.HCq=gc;return}ge.HCq={};ge.HCq[gg]=dq.cloneObjWithScalarsOnly(gf);ge=ge.HCq[gg];gd=gd[gg].wqq;gc=(ss.isNullOrUndefined(gc)?null:gc[gg].wqq);ge.wqq=du.$0(gd,gc);if(ss.isNullOrUndefined(gd)){return}ge=ge.wqq;gd=gd['XIo'];gc=(ss.isNullOrUndefined(gc)?null:gc['XIo']);ge['XIo']=du.$0(gd,gc);if(ss.isNullOrUndefined(gd)){return}var gl=gd.P_I;ge=ge['XIo'];gd=gd.stK;gc=(ss.isNullOrUndefined(gc)?null:gc.stK);ge.stK=du.$0(gd,gc);if(ss.isNullOrUndefined(gd)){return}ge=ge.stK;gd=gd[gl.toString()];gc=(ss.isNullOrUndefined(gc)?null:gc[gl.toString()]);ge[gl.toString()]=du.$0(gd,gc);if(ss.isNullOrUndefined(gd)){return}ge=ge[gl.toString()];gd=gd.mmK;gc=(ss.isNullOrUndefined(gc)?null:gc.mmK);ge.mmK=du.$0(gd,gc)}}});ss.initClass(dv,a,{get_name:function(){return this.$1},set_name:function(e){this.$1=e},get_id:function(){return this.$0},set_id:function(e){this.$0=e}});ss.initClass(dw,a,{add_legendChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_legendChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_quantColorLegendPresModel:function(){return this.pm},update:function(e){if(this.isNewPresModelSameAsOld(e)){return}this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$1)}},db);ss.initClass(dx,a,{get_filterField:function(){return this.$2},get_currentMaxVal:function(){return this.$0},get_currentMinVal:function(){return this.$1},get_targetSheets:function(){return this.$5},set_targetSheets:function(e){this.$5=e},get_previousMaxVal:function(){return this.$3},get_previousMinVal:function(){return this.$4},valueInRange:function(e){var gc=true;if(ss.isValue(this.$1)){gc=gc&&tab.DoubleUtil.isGreaterThanOrApproximatelyEqual(e,ss.unbox(this.$1))}if(ss.isValue(this.$0)){gc=gc&&tab.DoubleUtil.isLessThanOrApproximatelyEqual(e,ss.unbox(this.$0))}return gc}});ss.initClass(dy,a,{add_filterUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_filterUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_quickFilterModel:function(){return this.$2$2},set_quickFilterModel:function(e){this.$2$2=e},get_quickFilterType:function(){return this.$2$3},set_quickFilterType:function(e){this.$2$3=e},get_quickFilterCommands:function(){return this.$4().D_I},get_titleHtml:function(){return this.$4().jOs.xBc},get_titleHeight:function(){return this.$4().jOs.EUR},get_itemsHeight:function(){return this.$4().$tN},get_itemsFontName:function(){return this.$4().mCc.sGS.toString()},get_itemsFontSize:function(){return this.$4().mCc.Qvi+'pt'},get_itemsTextColor:function(){return this.$4().mCc.YhU},get_itemsFontWeight:function(){return this.$4().mCc.cjf},get_itemsFontStyle:function(){return this.$4().mCc.BxQ},get_itemsTextDecoration:function(){return this.$4().mCc.zwp},get_backgroundColor:function(){var e=this.get_parent();return e.get_zone().pm.rPC.eBu},get_visualId:function(){var e=this.get_parent();return de.getVisualId(e.get_zone().pm.Gge)},get_fieldName:function(){return this.$4().ps$.HBp},$4:function(){return this.pm},update:function(e){if(!this.isNewPresModelSameAsOld(e)){this.swapAndCopyPresModel(e);if(e.ps$.VOu!==this.get_quickFilterType()){this.set_quickFilterModel(this.$3(e.ps$));this.set_quickFilterType(e.ps$.VOu)}if(ss.isValue(this.get_quickFilterModel())){this.get_quickFilterModel().update(e.ps$)}if(!ss.staticEquals(this.$2$1,null)){this.$2$1()}}},$3:function(e){switch(e.VOu){case'categorical':{return new P(this)}default:{return null}}}},db);ss.initClass(dA,a,{get_radialSelectionDistanceInfoPresModel:function(){return this.pm},get_earthRadius:function(){return this.get_radialSelectionDistanceInfoPresModel().uwy},get_fontSizePixels:function(){return this.get_radialSelectionDistanceInfoPresModel().Qvi},get_largeUnitDisplay:function(){return this.get_radialSelectionDistanceInfoPresModel().Wec},get_latLongRect:function(){return this.get_radialSelectionDistanceInfoPresModel().v_N},get_mapHeight:function(){return this.get_radialSelectionDistanceInfoPresModel().EUR},get_mapWidth:function(){return this.get_radialSelectionDistanceInfoPresModel().rec},get_readoutOffsetPixels:function(){return this.get_radialSelectionDistanceInfoPresModel().fDh},get_shouldShowDistance:function(){return this.get_radialSelectionDistanceInfoPresModel().vZo},get_sigFigs:function(){return this.get_radialSelectionDistanceInfoPresModel().nKM},get_smallToLargeUnitDivisor:function(){return this.get_radialSelectionDistanceInfoPresModel().goC},get_smallUnitDisplay:function(){return this.get_radialSelectionDistanceInfoPresModel().zIs},get_unitTransition:function(){return this.get_radialSelectionDistanceInfoPresModel().FRN},get_decimalMark:function(){return this.get_radialSelectionDistanceInfoPresModel().QFu},get_fontColor:function(){return this.get_radialSelectionDistanceInfoPresModel().hlO},update:function(e){if(!this.isNewPresModelSameAsOld(e)){this.swapAndCopyPresModel(e)}}},db);ss.initClass(dC,a,{add_modelUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_modelUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},$3:function(){return this.pm},get_rankTypeValues:function(){return this.$3().weN},get_rankTypeCaptions:function(){return this.$3().QIk},get_rankTypeIndex:function(){return this.$3().SWx},get_rankType:function(){return this.get_rankTypeValues()[this.get_rankTypeIndex()]},get_rankTypeState:function(){return this.$3().JGE},get_sortDirectionValues:function(){return this.$3().GJK},get_sortDirectionCaptions:function(){return this.$3().sxj},get_sortDirectionIndex:function(){return this.$3().HcK},get_sortDirection:function(){return this.get_sortDirectionValues()[this.get_sortDirectionIndex()]},update:function(e){this.simpleSwapToUpdate(e,this.$3$1)}},fx);ss.initClass(dD,a,{setRange:function(e,gc){this.type=1;this.range=e;this.checkState=gc},setSingle:function(e,gc){this.type=0;this.index=e;this.checkState=gc}});ss.initClass(dE,a,{add_modelUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_modelUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$3:function(){return this.pm},get_isEditing:function(){return!ss.isNullOrEmptyString(this.get_refLineId())},get_refLineId:function(){return this.$3().hGF||''},get_pairedId:function(){return this.$3().wal||''},get_axisColumn:function(){return this.$3().TLN||''},get_valueColumn:function(){return this.$3().PNP||''},get_referenceParam:function(){return this.$3().ltC||''},get_scopeType:function(){return ss.coalesce(this.$3().CAX,'scope-per-pane')},get_labelType:function(){return ss.coalesce(this.$3().Fj,'label-automatic')},get_customLabel:function(){return this.$3().pHt||''},get_formulaType:function(){return ss.coalesce(this.$3().lqd,'formula-average')},get_factors:function(){return this.$3().max||[]},get_percentiles:function(){return this.$3().UDP||[]},get_constantValue:function(){return this.$3().is$||''},get_constantType:function(){return ss.coalesce(this.$3().tbM,'real')},get_formattedConstantValue:function(){return this.$3().ybD||''},get_tileCount:function(){return this.$3().VoR},get_stDevType:function(){return ss.coalesce(this.$3().eci,'stdev-sample')},get_showBounds:function(){return ss.coalesce(this.$3().KB_,'show-both')},get_confidencePercentage:function(){return this.$3().lI_},get_percentageBands:function(){return this.$3().cYW},get_percentages:function(){return this.$3()._xO||[]},get_fillAbove:function(){return this.$3().fwK},get_fillBelow:function(){return this.$3().XqO},get_symmetric:function(){return this.$3().gaG},get_zOrder:function(){return this.$3().jwq},get_isBoxplot:function(){return this.$3().UqU},get_boxplotWhiskerType:function(){return ss.coalesce(this.$3().pjK,'boxplot-whisker-standard')},get_boxplotMarkExclusion:function(){return this.$3().vUG},get_enableInstantAnalytics:function(){return ss.coalesce(this.$3().tDf,true)},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(dF,a,{get_columns:function(){return this.$3},get_instanceType:function(){return'relationalTable'},get_canHaveChildren:function(){return true},get_isUnsortedContainer:function(){return true},update:function(e,gc){this.swapAndCopyPresModel(e);this.$3=gc}},cd);ss.initClass(dG,a,{get_workbookId:function(){return this.$2},get_sheetId:function(){return this.$1},get_customizedView:function(){return this.$0},get_originalViewURL:function(){return ss.formatString('{0}/{1}',this.get_workbookId(),this.get_sheetId())}});ss.initClass(dH,a,{});ss.initClass(dI,a,{get_sceneElementPM:function(){return this.$2$1},set_sceneElementPM:function(e){this.$2$1=e},get_paneId:function(){return this.$2$2},set_paneId:function(e){this.$2$2=e},get_index:function(){return this.get_sceneElementPM().imC},get_paneIndex:function(){return this.get_sceneElementPM().hJq},get_tupleId:function(){return this.get_sceneElementPM().OBN},get_bounds:function(){return this.$2$3},set_bounds:function(e){this.$2$3=e},get_visualPart:function(){return this.get_sceneElementPM().oqX},get_detail:function(){return this.get_sceneElementPM().NtP},get_hitType:function(){return this.get_sceneElementPM().FCs},get_detailId:function(){return this.get_sceneElementPM().ATa},get_cellId:function(){return this.get_sceneElementPM().OCD},get_worldOffset:function(){return this.get_sceneElementPM().kAz},get_markState:function(){return this.get_sceneElementPM().cwS},get_hitDistance:function(){return this.get_sceneElementPM().JWU},get_overlayHit:function(){return this.get_sceneElementPM().GN_}},db);ss.initClass(dJ,a,{add_newSceneModel:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newSceneModel:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_scenePresModel:function(){return this.pm},get_visualListModels:function(){return this.$a},get_refLineVisualLists:function(){return this.$8},get_trendLineVisualLists:function(){return this.$9},get_drawFirstParts:function(){return this.$6},get_drawLastParts:function(){return this.$7},get_backgroundColor:function(){return this.$5},get_paneDescriptorCount:function(){return ss.getKeyCount(this.get_scenePresModel().ObZ)},update:function(e){if(this.isNewPresModelSameAsOld(e)){return}if(ss.isValue(e.QV$)){z.get_instance().get_shapeManager().updateCustomImageMap(e.QV$)}this.$4(e);if(ss.isValue(e.KCi)){ss.clear(this.$6);for(var gc=0;gc<e.KCi.length;gc++){var gd=e.KCi[gc];var ge=gd.oqX;if(!ss.keyExists(this.$a,ge)){this.$a[ge]=new fF(this)}if(ss.contains(this.$6,ge)){continue}this.$6.push(ge);this.$a[ge].update(gd)}}if(ss.isValue(e.lb_)){ss.clear(this.$7);for(var gf=0;gf<e.lb_.length;gf++){var gg=e.lb_[gf];var gh=gg.oqX;if(!ss.keyExists(this.$a,gh)){this.$a[gh]=new fF(this)}this.$7.push(gh);this.$a[gh].update(gg)}}if(ss.isValue(this.get_scenePresModel())){this.get_scenePresModel().$Ww=null}this.swapAndCopyPresModel(e);this.$5=dJ.$0(this.$a,e);this.$3();this.raiseEvent(this.$2$1)},$3:function(){ss.clear(this.$8);ss.clear(this.$9);if(ss.isValue(this.get_scenePresModel().HUq)){var e=this.get_scenePresModel().HUq;for(var gc=0;gc<e.length;gc++){var gd=e[gc];if(ss.isValue(gd.MdI)){for(var ge=0;ge<gd.MdI.length;ge++){var gf=gd.MdI[ge];if(ss.isValue(gf)){if(gf.oqX==='ref-lines'){this.$8.push(gf)}else if(gf.oqX==='trend-lines'){this.$9.push(gf)}}}}}}},$4:function(e){var gc=new ss.ObjectEnumerator(this.get_visualListModels());try{while(gc.moveNext()){var gd=gc.current();var ge={$:gd.key};var gf=_.find(e.KCi,ss.mkdel({currentPart:ge},function(gg){return this.currentPart.$===gg.oqX}));if(ss.isNullOrUndefined(gf)){gf=_.find(e.lb_,ss.mkdel({currentPart:ge},function(gg){return this.currentPart.$===gg.oqX}))}if(ss.isNullOrUndefined(gf)){delete this.get_visualListModels()[ge.$]}}}finally{gc.dispose()}}},db);ss.initClass(dK,a,{});ss.initClass(dL,a,{get_name:function(){return this.$2},set_name:function(e){this.$2=e},get_id:function(){return this.$1},set_id:function(e){this.$1=e},get_action:function(){return this.$0},set_action:function(e){this.$0=e}});ss.initClass(dM,a,{});ss.initClass(dN,a,{});ss.initClass(dO,a,{add_newSelection:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newSelection:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_selectionPresModel:function(){if(ss.isValue(this.$5)){var e={};e.coe='tuples';e.kyj=this.$5;return e}return this.$4()},get_selectionType:function(){return this.$4().coe},get_isEmpty:function(){return tab.MiscUtil.isNullOrEmpty(this.get_ids())&&tab.MiscUtil.isNullOrEmpty(this.$4().p$U)},get_nodes:function(){return this.$4().p$U},get_ids:function(){if(ss.isValue(this.$5)){return this.$5}return this.$4().kyj},get_hashKey:function(){var e=this.get_selectionType().toString();if(this.get_selectionType()==='legend-items'){e+='-'+this.get_selectionPresModel().VNi.jhL+':'+this.get_selectionPresModel().VNi.pMg.join(';')}return e},$4:function(){return this.pm},isMarkSelected:function(e){if(ss.isNullOrUndefined(this.$4())){return false}if(ss.isNullOrUndefined(this.get_ids())){return false}return ss.contains(this.get_ids(),e)},isLegendItemSelected:function(e){if(this.get_selectionType()!=='legend-items'){return false}if(ss.isNullOrUndefined(this.$6)){this.$6={};if(ss.isValue(this.get_ids())){var gc=this.get_ids();for(var gd=0;gd<gc.length;gd++){var ge=gc[gd];this.$6[ge]=true}}}return ss.keyExists(this.$6,e.YLs)},isAnyLegendItemSelected:function(){if(this.get_selectionType()!=='legend-items'){return false}if(ss.isValue(this.get_ids())){return this.get_ids().length>0}return false},isNodeSelected:function(e){return ss.isValue(this.$3(e.ZHX,e.wwF))},findNodeSelection:function(e){return this.$3(e.ZHX,e.wwF)},isNodeAncestorSelected:function(e,gc){if(ss.isNullOrUndefined(e.ZHX)||ss.isNullOrUndefined(e.wwF)){return false}var gd=(gc?0:1);for(var ge=1;ge<e.ZHX.length;ge++){var gf=ss.arrayExtract(e.ZHX,ge);var gg=ss.arrayExtract(e.wwF,ge-gd);if(ss.isValue(this.$3(gf,gg))){return true}}return false},setOverriddenTupleIds:function(e){if(this.$4().coe!=='tuples'){return}if(_.isEqual(this.$5,e)||tab.MiscUtil.isNullOrEmpty(this.$5)&&tab.MiscUtil.isNullOrEmpty(e)){return}this.$5=e;this.raiseEvent(this.$2$1)},update:function(e){if(this.isNewPresModelSameAsOld(e)&&ss.isNullOrUndefined(this.$5)){return}this.$7=null;this.$6=null;this.$5=null;this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$1)},isNewPresModelSameAsOld:function(e){if(ss.isNullOrUndefined(this.pm)!==ss.isNullOrUndefined(e)){return false}var gc=e;if(gc.coe!==this.get_selectionPresModel().coe){return false}if(ss.isValue(gc.kyj)&&!_.isEqual(gc.kyj,this.get_selectionPresModel().kyj)){return false}if(ss.isValue(gc.p$U)&&!_.isEqual(gc.p$U,this.get_selectionPresModel().p$U)){return false}if(ss.isValue(gc.VNi)&&!_.isEqual(gc.VNi,this.get_selectionPresModel().VNi)){return false}return true},$3:function(e,gc){if(ss.isNullOrUndefined(e)&&ss.isNullOrUndefined(gc)){return null}if(ss.isNullOrUndefined(this.$7)){this.$7={};var gd=this.$4();if(ss.isValue(gd.p$U)){for(var ge=0;ge<gd.p$U.length;ge++){var gf=gd.p$U[ge];this.$7[dO.$0(gf.ZHX,gf.wwF)]=gf}}}if(ss.getKeyCount(this.$7)===0){return null}return this.$7[dO.$0(e,gc)]},createSelectionToken:function(){return this.get_selectionPresModel()}},db);ss.initClass(dP,a,{add_newSelections:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newSelections:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_selectionModels:function(){return this.$5},get_isEmpty:function(){for(var e=0;e<this.$5.length;e++){var gc=this.$5[e];if(!gc.get_isEmpty()){return false}}return true},get_hasPaneTableObjectSelection:function(){for(var e=0;e<this.$5.length;e++){var gc=this.$5[e];if(!gc.get_isEmpty()&&gc.get_selectionType()!=='legend-items'&&gc.get_selectionType()!=='nodes'){return true}}return false},get_tupleSelection:function(){return this.$4('tuples')},get_nodeSelection:function(){return this.$4('nodes')},get_refLineSelection:function(){return this.$4('ref-lines')},get_trendLineSelection:function(){return this.$4('trend-lines')},get_allLegendSelections:function(){return _.filter(this.$5,function(e){return e.get_selectionType()==='legend-items'})},get_brushVizForNodeSelection:function(){if(this.get_nodeSelection().get_isEmpty()){return false}var e=this.get_nodeSelection().get_nodes();for(var gc=0;gc<e.length;gc++){var gd=e[gc];if(dR.isCategoricalAndTupleAssociatedHeader(gd.ZHX,gd.wwF)){return true}}return false},getLegendSelection:function(e,gc){var gd=_.find(this.$5,function(ge){return ge.get_selectionType()==='legend-items'&&ss.isValue(ge.get_selectionPresModel())&&ge.get_selectionPresModel().VNi.jhL===e&&_.isEqual(ge.get_selectionPresModel().VNi.pMg,gc)});if(ss.isNullOrUndefined(gd)){gd=this.$3('legend-items');gd.get_selectionPresModel().VNi.jhL=e;gd.get_selectionPresModel().VNi.pMg=gc}return gd},update:function(e){var gc=_.compact(e);var gd=[];var ge=[];for(var gf=0;gf<gc.length;gf++){var gg=gc[gf];var gh;if(gg.coe==='legend-items'){gh=this.getLegendSelection(gg.VNi.jhL,gg.VNi.pMg)}else{gh=this.$4(gg.coe)}if(ss.isNullOrUndefined(gh)){gh=new dO(this,this.$5.length);this.$5.push(gh)}var gi=parseInt(gh.get_presModelKey().name);gd[gi]=gg;gh.update(gg);ge.push(gh.get_hashKey())}for(var gj=0;gj<this.$5.length;gj++){var gk=this.$5[gj];if(ss.contains(ge,gk.get_hashKey())){continue}var gl=dP.$1(gk.get_selectionType());if(gl.coe==='legend-items'){gl.VNi=gk.get_selectionPresModel().VNi}gk.update(gl);var gm=parseInt(gk.get_presModelKey().name);gd[gm]=gk.get_selectionPresModel()}for(var gn=0;gn<gd.length;++gn){e[gn]=gd[gn]}var go=new dQ;go.selections=e;if(this.isNewPresModelSameAsOld(go)){return}this.swapAndCopyPresModel(go);this.raiseEvent(this.$2$1)},$4:function(e){return _.find(this.$5,function(gc){return gc.get_selectionType()===e})},$3:function(e){var gc=new dO(this,this.$5.length);this.$5.push(gc);var gd=dP.$1(e);gc.update(gd);return gc},createSelectionsToken:function(){return this.get_presModel()},computeSelectionsDiff:function(e,gc,gd){if(ss.isNullOrUndefined(e)){return{item1:true,item2:[]}}var ge={item1:false,item2:[]};for(var gf=0;gf<e.selections.length;gf++){var gg=e.selections[gf];switch(gg.coe){case'ref-lines':case'trend-lines':{var gh=gg.kyj||[];var gi=dP.$0(gh,this.$4(gg.coe).get_ids());if(gi.length>0){return{item1:true,item2:[]}}break}case'tuples':{var gj=gg.kyj;var gk=this.get_tupleSelection().get_ids();var gl=(ss.isValue(gc)?gc.kyj:[]);var gm=(ss.isValue(gd)?gd.get_ids():[]);var gn=gj.length+gl.length!==0!==(gk.length+gm.length!==0);if(gn){return{item1:true,item2:[]}}var go=dP.$0(gj,gk);var gp=dP.$0(gl,gm);var gq=[];ss.arrayAddRange(gq,go);ss.arrayAddRange(gq,gp);ge={item1:ge.item1,item2:Array.prototype.slice.call(gq)};break}default:{break}}}return ge}},db);ss.initClass(dQ,a,{});ss.initClass(dR,a,{});ss.initClass(dS,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('select-zone-parent',this.c))}},ss.makeGenericType(A,[Object,dT]));ss.initClass(dT,a,{});ss.initClass(dU,a,{});ss.initClass(dV,a,{get_completedDelegate:function(){return ss.mkdel(this,this.onComplete)},get_successDelegate:function(){return ss.mkdel(this,this.onSuccess)},get_errorDelegate:function(){return ss.mkdel(this,this.onError)},onComplete:function(e,gc){try{if(ss.isValue(this.$2)){this.$2(e,gc)}}finally{this.$0()}},onSuccess:function(e,gc,gd){try{var ge=ss.isInstanceOfType(e,Error);if(ge){this.$5.$6(e,gd,false,null)}else if(gd.status===202){var gf=gd['args'];var gg=new dW(this.$5,gf);gg.requestStatus();ge=true}if(!ge){if(ss.isValue(this.$4)){this.$4(e,gc,gd)}}}finally{this.$0()}},onError:function(e,gc,gd){try{if(ss.isValue(this.$3)){this.$3(e,gc,gd)}else{this.$5.$6(gd,e,false,null)}}finally{this.$0()}},$0:function(){if(this.$1){this.$1=false;this.$5.decrementWait()}}});ss.initClass(dW,a,{requestStatus:function(){var e=ss.mkdel(this,function(gf,gg,gh){this.$1(gg,gh)});var gc=ss.mkdel(this,function(gf,gg,gh){this.$0(gf,gg)});var gd=new dV(this.$8,null,e,gc,false,false);var ge=ss.mkdict([]);ge.type='GET';ge.url=this.$9;ge.cache=false;fY.helper(ge,gd)},$1:function(e,gc){if(gc.status===204){this.$6=true}this.$2(e,gc)},$0:function(e,gc){if(ss.isNullOrUndefined(this.$5.complete)){this.$5.complete(e,gc)}},$2:function(e,gc){++this.$7;if(this.$7%10===0&&this.$4<4000){this.$4*=2}if(!this.$6){window.setTimeout(ss.mkdel(this,function(){this.requestStatus()}),this.$4)}else{var gd=this.$5['skipResendOriginal'];if(ss.isValue(gd)&&gd){if(ss.isValue(this.$5.complete)){this.$5.complete(gc,e)}}else{window.setTimeout(ss.mkdel(this,function(){this.$3()}),0)}}},$3:function(){if(!this.$5.async){delete this.$5['async']}fY.helper(this.$5)}});ss.initClass(dX,a,{});ss.initClass(dY,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('set-dashboard-sizing-with-validation',this.c))}},ss.makeGenericType(A,[Object,dZ]));ss.initClass(dZ,a,{});ss.initClass(ea,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('set-variables-prompt-responded',this.c))}},ss.makeGenericType(A,[Object,eb]));ss.initClass(eb,a,{});ss.initClass(ec,a,{add_shapeLoaded:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_shapeLoaded:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},get_imageKeys:function(){return _.keys(this.$2)},getImageElement:function(e){return this.$2[e]},getCachedCanvas:function(e,gc,gd,ge,gf,gg,gh){var gi=null;var gj=ec.$1(e,gc,gd,ge,gf,gg);if(!ss.keyExists(this.$1,gj)){if(ss.isValue(gh)){gi=gh();if(ss.isValue(gi)){this.$1[gj]=gi}}}else{gi=this.$1[gj]}return gi},getCachedStampCanvas:function(e,gc,gd,ge,gf,gg){var gh=null;var gi=ec.$0(e,gc,gd,ge,gf);if(!ss.keyExists(this.$3,gi)){if(ss.getKeyCount(this.$3)<ec.$3){if(ss.isValue(gg)){gh=gg();if(ss.isValue(gh)){this.$3[gi]=gh}}}}else{gh=this.$3[gi]}return gh},updateCustomImageMap:function(e){for(var gc=0;gc<e.length;gc++){var gd=e[gc];if(ss.isValue(gd)){var ge={$:gd.Yi};var gf=ge.$.toString();var gg=null;var gh={$:false};if(ss.keyExists(this.$2,gf)){gh.$=true;gg=this.$2[gf]}var gi=gd.Gqc;var gj={$:document.createElement('img')};gj.$.src='data:image/png;base64,'+gi;if(!gh.$||ss.isValue(gg)&&gj.$.height>gg.height&&gj.$.width>gg.width){this.$2[gf]=gj.$;var gk={$:null};gk.$=ss.thisFix(ss.mkdel({doesMapContainImage:gh,shapeId:ge,imgElt:gj,imageFinishedLoad:gk,$this:this},function(){if(this.doesMapContainImage.$){ss.clearKeys(this.$this.$1)}this.$this.$0(this.shapeId.$);this.imgElt.$.removeEventListener('load',this.imageFinishedLoad.$,false)}));gj.$.addEventListener('load',gk.$,false)}}}},hasShape:function(e){return ss.keyExists(this.$2,e.toString())&&this.$2[e.toString()].complete},$0:function(e){if(!ss.staticEquals(this.$1$1,null)){this.$1$1(e)}},clearShapeStampCache:function(){ss.clearKeys(this.$3)}});ss.initClass(ed,a,{get_palette:function(){return this.$0},get_shapeType:function(){return this.$1},equals$1:function(e){return ss.isValue(e)&&ss.referenceEquals(this.$0,e.$0)&&this.$1===e.$1},toString:function(){if(ss.isNullOrUndefined(this.$0)){return this.get_shapeType().toString()}return':'+this.get_palette()+'/'+this.get_shapeType()}});ss.initClass(ee,a,{});ss.initClass(ef,a,{$3:function(){return this.pm},get_isDashboard:function(){return this.$3().WeS},get_isIncluded:function(){return this.$3().RuK},get_name:function(){return this.$3().dMo},update:function(e){this.swapAndCopyPresModel(e)}},db);ss.initClass(eg,a,{add_sheetListUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_sheetListUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_sheets:function(){return this.$4},update:function(e){if(ss.isValue(e.xl_)){this.$4=[];for(var gc=0;gc<e.xl_.length;gc++){var gd=new ef(this.$3,gc);gd.update(e.xl_[gc]);this.$4.push(gd)}}this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(eh,a,{add_sheetDataChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_sheetDataChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_visualId:function(){return de.getVisualId(this.sheetid)},requestHSMChildren:function(e,gc,gd,ge){if(!tsConfig.allow_filter){return}var gf=function(gl,gm,gn){gd(gl)};var gg=this.$0(null,gf,null,'none');var gh=new Object;gh['name']='file';gh['filename']='file';gh['contentType']='text/javascript';gh['content']=tab.JsonUtil.toJson(gc,true,'');var gi=ss.mkdict(['_method','PUT']);var gj=fY.getMultipartData(gh,gi);var gk=ss.mkdict([]);gk.type='POST';gk.url=this.formatFilterReference(this.sheetid,e,'show_children');gk.dataType='json';gk.contentType='multipart/form-data; boundary='+gj.header;gk.data=gj.body;this.$b(gk,gg)},getFilterItems:function(e,gc,gd,ge,gf){if(!tsConfig.allow_filter){return}var gg=function(gk,gl,gm){ge(gk)};var gh=this.$0(null,gg,null,'none');var gi={};gi['fromIndex']=gd.get_from();gi['toIndex']=gd.get_to();gi['domain']=gc;var gj=this.basicGetOpts(this.formatFilterReference(this.sheetid,e,'getfilteritems'));gj.data=gi;this.$b(gj,gh)},setPatternFilterState:function(e,gc){var gd=gc['field'];ce.setPatternFilterState(this.get_visualId(),gd,e.toString())},addManualFilterItems:function(e,gc){var gd=gc['field'];ce.addManualFilterItems(this.get_visualId(),gd,e)},searchFilter:function(e,gc,gd,ge,gf,gg,gh){if(!tsConfig.allow_filter){return null}var gi=function(go,gp,gq){var gr=go;gg(gr)};var gj=function(go,gp,gq){gh(gq)};var gk=this.$0(null,gi,gj,'none');var gl=(ge?'searchwithindex':'search');var gm=this.basicGetOpts(this.formatFilterReference(this.sheetid,e,gl));var gn=ss.mkdict(['query',gc,'maxRows',gd,'domain',gf]);gm.data=gn;return this.$b(gm,gk)},restoreSheetAxes:function(){this.requestRestoreFixedAxes(this.get_visualId())},getTopic:function(e){return this.getTopicCore(e,'Sheet_'+this.sheetid)},fireSheetDataChanged:function(){if(ss.isValue(this.$2$1)){this.$2$1()}}},B);ss.initClass(ei,a,{});ss.initClass(ej,a,{},db);ss.initClass(ek,a,{},db);ss.initClass(el,a,{add_shelfChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_shelfChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_paneId:function(){return(ss.isValue(this.$3().FsL)?this.$3().FsL:0)},get_shelfType:function(){return this.$3().Ene},get_pills:function(){return this.$4},get_tooltip:function(){return tableau.format.stripFormattedText(this.$3().iHY)},$3:function(){return this.get_presModel()},update:function(e,gc){if(this.isNewPresModelSameAsOld(e)){return}if(e.zcg===null){this.$4=[]}else if(ss.isValue(e.zcg)){var gd=[];var ge=new ej(this);for(var gf=0;gf<e.zcg.length;gf++){var gg=e.zcg[gf];if(gg.Srb==='annotation-encoding'){continue}var gh=gg.HBp;var gi;if(ss.isNullOrEmptyString(gh)&&e.Ene==='encoding-shelf'){gi=new df}else{gi=gc.findField(gh)}if(ss.isNullOrUndefined(gi)){gg.SkN=true}if(gg.SkN){var gj=new cb(gc.findDataSourceFromGlobalFieldName(gh));var gk={};gk.VzB='wAR';gk.HBp=gh;gk.Mej=gh;gk.wDF=0;gj.update(gk);gi=gj}var gl=new dp(ge,gf);gl.update(gg,gi);gd.push(gl)}this.$4=gd}this.swapAndCopyPresModel(e);this.raiseEvent$1(el).call(this,this.$2$1,this)}},db);ss.initClass(em,a,{add_newShelves:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newShelves:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_shelves:function(){return this.$5},findShelf:function(e){return this.$4(this.$5,e)},update:function(e,gc,gd){if(this.isNewPresModelSameAsOld(e)){return}this.swapAndCopyPresModel(e);this.$3(e,gc,gd);this.raiseEvent(this.$2$1)},$3:function(e,gc,gd){if(ss.isValue(e)){var ge=ss.arrayClone(this.$5);for(var gf=0;gf<e.PmI.length;gf++){var gg={$:e.PmI[gf]};if(ss.isNullOrUndefined(gg.$.FsL)&&ss.isValue(gd)){gg.$.FsL=ss.unbox(gd)}var gh=_.find(this.$5,ss.mkdel({shelf:gg},function(gk){return gk.get_shelfType()===this.shelf.$.Ene&&gk.get_paneId()===(this.shelf.$.FsL||0)}));if(ss.isValue(gh)){ss.remove(ge,gh);gh.update(gg.$,gc)}else{this.$5.push(em.createShelfModel(this,gg.$,gc,gf))}}for(var gi=0;gi<ge.length;gi++){var gj=ge[gi];ss.remove(this.$5,gj)}}},$4:function(e,gc){return _.find(e,function(gd){return gd.get_shelfType()===gc})}},db);ss.initClass(en,a,{get_simpleCommand:function(){return this.$0['eDX'.toString()]},set_simpleCommand:function(e){this.$0['eDX'.toString()]=e}});ss.initClass(eo,a,{add_sizeInfoUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_sizeInfoUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$3:function(){return this.pm},get_name:function(){return this.$3().dMo},get_width:function(){return this.$3().rec},get_height:function(){return this.$3().EUR},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(ep,a,{add_newSortIndicators:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newSortIndicators:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_sortIndicatorsPresModel:function(){return this.get_presModel()},update:function(e){this.simpleSwapToUpdate$1(Object).call(this,e,this.$2$1,e)}},db);ss.initClass(eq,a,{});ss.initClass(er,a,{});ss.initClass(es,a,{});ss.initClass(et,a,{add_dashboardDisposal:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_dashboardDisposal:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_newStoryPoint:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_newStoryPoint:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_dashboardModel:function(){return this.$5},get_isBackingSheetDashboard:function(){return this.$4().QTm},$4:function(){return this.pm},get_storyPointId:function(){return this.$4().hVl},update:function(e,gc){if(ss.isValue(this.$4())&&this.get_storyPointId()!==e.hVl){this.set_presModelKey(new ds(e.hVl.toString(),0));if(ss.isValue(this.$5)){this.raiseEvent(this.$2$1);this.$5=null}this.$5=new bv(this,'dashboardPresModel');this.$3(e.mmK,gc);this.raiseEvent(this.$2$2)}else{this.$3(e.mmK,gc)}this.swapPresModel(e)},$3:function(e,gc){if(ss.isValue(e)){this.get_dashboardModel().update(e,gc)}}},db);ss.initClass(eu,a,{get_currentStoryPoint:function(){return this.$3},update:function(e,gc){if(!ss.isValue(this.$3)){this.$3=new et(this,e.hVl)}this.$3.update(e,gc)}},db);ss.initClass(ev,a,{dispose:function(){dojo.unsubscribe(this.$0)}},null,[ss.IDisposable]);ss.initClass(ew,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-add',this.c))}},ss.makeGenericType(A,[Object,ex]));ss.initClass(ex,a,{});ss.initClass(ey,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-change-type',this.c))}},ss.makeGenericType(A,[Object,ez]));ss.initClass(ez,a,{});ss.initClass(eA,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-close',this.c))}},ss.makeGenericType(A,[Object,eB]));ss.initClass(eB,a,{});ss.initClass(eC,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-edit',this.c))}},ss.makeGenericType(A,[Object,eD]));ss.initClass(eD,a,{});ss.initClass(eE,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-edit-defaults',this.c))}},ss.makeGenericType(A,[Object,eF]));ss.initClass(eF,a,{});ss.initClass(eG,a,{add_modelUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_modelUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$4:function(){return this.pm},get_hasTableCalc:function(){return ss.isValue(this.pm)},get_tableCalcType:function(){return(this.get_hasTableCalc()?this.get_tableCalcTypeValues()[this.get_tableCalcTypeIndex()]:'none')},get_tableCalcTypeIndex:function(){return this.$4().kPv},get_tableCalcTypeCaptions:function(){return this.$4().ygw},get_tableCalcTypeValues:function(){return this.$4().TR$},get_typeSpecificTableCalcModel:function(){return this.$7},get_tableCalcOrderingModel:function(){return this.$6},get_nesting:function(){return this.$5},update:function(e){var gc=e;if(this.isNewPresModelSameAsOld(gc)){return}this.swapAndCopyPresModel(gc);if(this.get_hasTableCalc()){this.$6.update(gc.xtX);this.$3()}else{this.$6.update(null)}this.raiseEvent(this.$2$1)},$3:function(){var e=null;var gc=null;switch(this.get_tableCalcType()){case'diff':case'pct-diff':case'pct-value':{e=bN;gc='_fE'.toString();break}case'pct-total':{e=dm;gc='oHf'.toString();break}case'rank':case'pct-rank':{e=dC;gc='jFF'.toString();break}case'cumulative':{e=bs;gc='Wlk'.toString();break}case'window':{e=fR;gc='xKN'.toString();break}default:{break}}if(ss.isNullOrUndefined(e)){this.$7=null;return}if(ss.isNullOrUndefined(this.$7)||!ss.referenceEquals(ss.getInstanceType(this.$7),e)){this.$7=new e(this)}this.$7.update(eG.$0(this.$4(),gc))}},db);ss.initClass(eH,a,{get_nestingLevel:function(){return this.$1},get_nestedField:function(){return this.$0}});ss.initClass(eI,a,{add_modelUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_modelUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_nesting:function(){return this.$3},get_orderingTypeValues:function(){return this.get_ordering().Hin},get_orderingTypeIndex:function(){return this.get_ordering().Ok$},get_orderingTypeCaptions:function(){return this.get_ordering().BOC},get_addressingIndexes:function(){return this.get_ordering().RoD},get_addressingCaptions:function(){return this.get_ordering().NXj},get_addressingValues:function(){return this.get_ordering().IuE},get_addressingState:function(){return this.get_ordering().hCr},get_atTheLevelState:function(){return this.get_ordering().OVd},get_atTheLevelCaptions:function(){return this.get_ordering().VLX},get_atTheLevelValues:function(){return this.get_ordering().cHO},get_atTheLevelIndex:function(){return this.get_ordering().KsW},get_atTheLevelSpecialCaption:function(){return this.get_ordering().tnI},get_atTheLevelSpecialValue:function(){return''},get_atTheLevelValue:function(){return((this.get_atTheLevelIndex()===-1)?this.get_atTheLevelSpecialValue():this.get_atTheLevelValues()[this.get_atTheLevelIndex()])},get_restartEveryState:function(){return this.get_ordering().OIM},get_restartEveryCaptions:function(){return this.get_ordering().WJC},get_restartEveryIndex:function(){return this.get_ordering().NaB},get_restartEveryValues:function(){return this.get_ordering().yqF},get_restartEverySpecialCaption:function(){return this.get_ordering().kyd},get_restartEverySpecialValue:function(){return''},get_restartEveryValue:function(){return((this.get_restartEveryIndex()===-1)?this.get_restartEverySpecialValue():this.get_restartEveryValues()[this.get_restartEveryIndex()])},get_sortState:function(){return this.get_ordering().IyP},get_sortModeIsAuto:function(){return this.get_ordering().IHq},get_sortModeCaption:function(){return this.get_ordering().IeG},get_sortField:function(){if(this.get_ordering().IHq){return null}return this.get_ordering().uBB[this.get_ordering().C$V]},get_sortFieldCaptions:function(){return this.get_ordering().lAu},get_sortFieldIndex:function(){return this.get_ordering().C$V},get_sortFieldValues:function(){return this.get_ordering().uBB},get_sortAgg:function(){if(this.get_ordering().IHq){return null}return this.get_ordering().kqU[this.get_ordering().JeY]},get_sortAggCaptions:function(){return this.get_ordering().eLv},get_sortAggIndex:function(){return this.get_ordering().JeY},get_sortAggValues:function(){return this.get_ordering().kqU},get_sortDirectionValues:function(){return this.get_ordering().GJK},get_sortDirectionIndex:function(){return this.get_ordering().HcK},get_sortDirectionCaptions:function(){return this.get_ordering().sxj},get_ordering:function(){return(ss.isValue(this.pm)?this.pm:null)},get_hasOrdering:function(){return ss.isValue(this.get_ordering())},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(eJ,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-addressing-fields',this.c))}},ss.makeGenericType(A,[Object,eK]));ss.initClass(eK,a,{});ss.initClass(eL,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-addressing-fields-order',this.c))}},ss.makeGenericType(A,[Object,eM]));ss.initClass(eM,a,{});ss.initClass(eN,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-at-the-level-field',this.c))}},ss.makeGenericType(A,[Object,eO]));ss.initClass(eO,a,{});ss.initClass(eP,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-cumulative-options',this.c))}},ss.makeGenericType(A,[Object,eQ]));ss.initClass(eQ,a,{});ss.initClass(eR,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-custom-options',this.c))}},ss.makeGenericType(A,[Object,eS]));ss.initClass(eS,a,{});ss.initClass(eT,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-difference-options',this.c))}},ss.makeGenericType(A,[Object,eU]));ss.initClass(eU,a,{});ss.initClass(eV,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-ordering-type',this.c))}},ss.makeGenericType(A,[Object,eW]));ss.initClass(eW,a,{});ss.initClass(eX,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-percent-total-options',this.c))}},ss.makeGenericType(A,[Object,eY]));ss.initClass(eY,a,{});ss.initClass(eZ,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-rank-sort-direction',this.c))}},ss.makeGenericType(A,[Object,fa]));ss.initClass(fa,a,{});ss.initClass(fb,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-rank-type',this.c))}},ss.makeGenericType(A,[Object,fc]));ss.initClass(fc,a,{});ss.initClass(fd,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-restart-every-field',this.c))}},ss.makeGenericType(A,[Object,fe]));ss.initClass(fe,a,{});ss.initClass(ff,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-sort-aggregation',this.c))}},ss.makeGenericType(A,[Object,fg]));ss.initClass(fg,a,{});ss.initClass(fh,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-sort-direction',this.c))}},ss.makeGenericType(A,[Object,fi]));ss.initClass(fi,a,{});ss.initClass(fj,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-sort-field',this.c))}},ss.makeGenericType(A,[Object,fk]));ss.initClass(fk,a,{});ss.initClass(fl,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-sort-mode',this.c))}},ss.makeGenericType(A,[Object,fm]));ss.initClass(fm,a,{});ss.initClass(fn,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-set-window-options',this.c))}},ss.makeGenericType(A,[Object,fo]));ss.initClass(fo,a,{});ss.initClass(fp,a,{invoke$1:function(){return this.invoke(bk.newDocCommand('table-calc-toggle-secondary-calc',this.c))}},ss.makeGenericType(A,[Object,fq]));ss.initClass(fq,a,{});ss.initClass(fr,a,{});ss.initClass(fs,a,{add_newText:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newText:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_hAlign:function(){return this.$3().weu},get_html:function(){return this.$3().xBc},get_orientation:function(){return this.$3().JxR},get_styledBox:function(){return this.$3().rPC},get_vAlign:function(){return this.$3().Uec},$3:function(){return this.pm},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(ft,a,{add_newToolbar:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newToolbar:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_toolbarPresModel:function(){return this.pm},get_vizCommandItems:function(){var e=null;if(ss.isValue(this.get_toolbarPresModel())){var gc=bj.create(this.get_toolbarPresModel().sjb);e=gc.get_commandItems()}return e},get_nonVizCommandItems:function(){var e=null;if(ss.isValue(this.get_toolbarPresModel())){var gc=bj.create(this.get_toolbarPresModel().xvl);e=gc.get_commandItems()}return e},get_legacyMenuItems:function(){return this.get_toolbarPresModel().kB},update:function(e){if(ss.isValue(e)){this.simpleSwapToUpdate(e,this.$2$1)}},isLegacyMenuItemEnabled:function(e){if(ss.isNullOrUndefined(this.get_legacyMenuItems())){return false}var gc=_.find(this.get_legacyMenuItems(),function(gd){return gd.rhe===e});return ss.isValue(gc)&&_.every(gc.FwB,function(gd){return gd!=='grayed'})}},db);ss.initClass(fu,a,{});ss.initClass(fv,a,{get_transactedChange:function(){return this.$0()},makeMutablePresModel:function(e){var gc=e.getPresModelPath();for(var gd=0;gd<this.$1.length;gd++){var ge=this.$1[gd];if(_.isEqual(ge.$1(),gc)){return ge.$0()}}var gf=e.getMutableCopyOfPresModel();this.$1.push(new f(gc,gf));return gf},$0:function(){if(this.$1.length===0){return null}this.$1=_.sortBy(this.$1,function(gg){return gg.$1().get_pathList().length});var e=z.get_instance().get_presModel();var gc=dq.cloneObjWithScalarsOnly(e);if(!ss.isValue(gc)){gc=new Object}for(var gd=0,ge=this.$1.length;gd<ge;gd++){var gf=this.$1[gd];dq.insertAtPath(e,gc,gf.$1(),gf.$0())}return gc}});ss.initClass(fw,a,{beginTransaction:function(){if(ss.isValue(this.$0)){throw new ss.Exception('Internal error: nested transaction')}this.$0=new fv;return this.$0},rollbackTransaction:function(){this.$0=null},endTransaction:function(){var e=this.$0.get_transactedChange();this.$0=null;return e},doTransaction:function(e){this.beginTransaction();e(this.$0);return this.endTransaction()}});ss.initClass(fy,a,{});ss.initClass(fz,a,{});ss.initClass(fA,a,{});ss.initEnum(fB,a,{success:'success',urlConstructionFail:'urlConstructionFail',notEnoughInfoYet:'notEnoughInfoYet'},true);ss.initClass(fC,a,{});ss.initClass(fD,a,{update:function(e){this.pm=e}},db);ss.initClass(fE,a,{get_viewId:function(){return this.viewid},set_viewId:function(e){if(ss.referenceEquals(this.viewid,e)){return}this.viewid=e},fireSelectionChanged:function(e){this.fireEvent('selectionChanged',e)},$l:function(e){return this.formatViewMethod(this.viewid,'region')+'?r='+e},formatRegionTileURL:function(e,gc,gd){if(e.useUrl){return this.formatTileURL(e,gc,0,0,'',gd)}return this.$l(gc)+'&'+gd},$k:function(e,gc){var gd='';if(!tab.MiscUtil.isNullOrEmpty(gc)){gd='&fn='+encodeURIComponent(gc)}return this.formatViewMethod(this.viewid,'region')+'?r='+e+gd},formatLegendRegionTileURL:function(e,gc,gd,ge,gf){ge=(ss.isNullOrUndefined(ge)?'':ge);if(e.useUrl){return this.formatTileURL(e,gc+ge,0,0,gd,gf)}return this.$k(gc,gd)+'&'+gf},formatTileURL:function(e,gc,gd,ge,gf,gg){if(e.useUrl){var gh=e.url;var gi='';if(!tab.MiscUtil.isNullOrEmpty(gf)){gi='?fn='+encodeURIComponent(gf)+'&'+gg}else{gi='?='+gg}return ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(gh,'%SESSIONID%',tsConfig.sessionid),'[r]',gc),'[x]',gd.toString()),'[y]',ge.toString())+gi}var gj=this.formatViewMethod(this.viewid,'tile');return gj+'?r='+gc+'&x='+gd+'&y='+ge+'&'+gg},formatUnderlyingDataURL:function(e){var gc=new ss.StringBuilder(this.formatViewMethod(this.viewid,'viewData'));gc.append('?maxrows=200');if(ss.isValue(e)){gc.append('&select_x=').append(e.x);gc.append('&select_y=').append(e.y)}return gc.toString()},formatExportCrossTabURL:function(e){if(ss.isNullOrUndefined(e)){e='utf8'}return this.formatViewMethod(this.viewid,'exportcrosstab')+'?charset='+e},fireRefreshLegacyLegendImages:function(e){this.fireEvent('refreshLegacyLegendImages',e)},zoomDoubleClick:function(e,gc,gd,ge,gf){gf.set_isZoomin(ge);this.zoom(e,gc,gd,ge,gf)},zoomIn:function(e,gc,gd){this.zoom(e,gc,gd,true,null)},zoomOut:function(e,gc,gd){this.zoom(e,gc,gd,false,null)},zoomWithAnchorPoint:function(e,gc,gd,ge){var gf=new Object;var gg=fM.create(gf);gg.set_r(e);gg.set_x(gc.x);gg.set_y(gc.y);var gh={};gh['vpK']=gf;gh['BdT']=tab.PointUtil.toPresModel(gc);gh['WR_']=gd;var gi=new Object;gi.commandNamespace='tabsrv'.toString();gi.commandName='pane-anchor-zoom-server'.toString();gi.commandParams=gh;bk.addVisualIdToCommand(gi.commandParams,this.get_visualId());var gj=ss.mkdel(this,function(gk){this.fireSheetDataChanged();ge()});this.$m(gi,gj,null)},zoom:function(e,gc,gd,ge,gf){if(!tsConfig.allow_filter){return}var gg={};var gh=new Object;var gi=fM.create(gh);gi.set_r(e);gi.set_x(gc['x']);gi.set_y(gc['y']);if(ss.isValue(gi.get_x())){gi.set_x(Math.round(gi.get_x()))}if(ss.isValue(gi.get_y())){gi.set_y(Math.round(gi.get_y()))}if(ss.isValue(gc['w'])&&ss.isValue(gc['h'])){gi.set_w(gc['w']);gi.set_h(gc['h'])}gg['vpK']=gh;gg['kFe']=ge;gg['tmF']=false;if(ss.isValue(gd)){gd=fE.$0(gd);var gj=tab.PointUtil.toPresModel(gd);gg['koe']=gj}var gk=new Object;gk.commandNamespace='tabsrv'.toString();gk.commandName='pane-zoom-server'.toString();gk.commandParams=gg;bk.addVisualIdToCommand(gk.commandParams,this.get_visualId());var gl=ss.mkdel(this,function(gm){if(ss.isValue(gf)){gf.setDeferLayoutUpdates(false)}this.fireSheetDataChanged()});this.$m(gk,gl,null)},pan:function(e,gc,gd,ge){if(!tsConfig.allow_filter){return}var gf={};gf['dpp']=e;gf['KIO']=tab.PointUtil.toPresModel(fE.$0(gc));gf['vGR']=tab.PointUtil.toPresModel(fE.$0(gd));var gg=new Object;gg.commandNamespace='tabsrv'.toString();gg.commandName='pane-pan-server'.toString();gg.commandParams=gf;bk.addVisualIdToCommand(gg.commandParams,this.get_visualId());var gh=ss.mkdel(this,function(gj){this.fireSheetDataChanged()});var gi=function(gj){ge()};this.$m(gg,gh,gi)},toggleHighlight:function(e,gc){var gd=ss.mkdel(this,function(gg){this.$n(null,gg)});var ge=gc.split('\n');var gf=de.getZoneIdForSheetName(this.sheetid);if(gf!==-1){dN.toggleLegendHighlight(gf,this.get_visualId(),e,ge,gd)}},executeAction:function(e,gc,gd){if(e.commandType===9){this.executeCommand(e)}else{var ge=new Object;ge.commandNamespace='tabdoc'.toString();ge.commandName='run-action';ge.commandParams=e.command.commandParams;dU.executeServerCommand(ge,'immediately',gc,gd)}},executeCommand:function(e){if(ss.isNullOrUndefined(e)){return}switch(e.commandType){case 9:{var gc={};gc.ZNi=e.command.commandParams.ZNi;gc.ALQ=e.command.commandParams.ALQ;u.launchActionUrls([gc],this.get_commonDialogProvider());break}case 7:{var gd=null;if(ss.isValue(e.command)&&ss.isValue(e.command.commandParams)&&ss.keyExists(e.command.commandParams,'ArG')){var ge=tab.JsonUtil.parseJson(e.command.commandParams['ArG']);gd=tab.PointUtil.fromPresModel(ge)}window.open(this.formatUnderlyingDataURL(gd),this.getWindow('vud'),'scrollbars,resizable');break}case 1:case 2:case 4:case 6:case 11:case 12:case 10:case 13:{break}default:{break}}},levelDrill:function(e,gc,gd){if(!tsConfig.allow_filter||ss.isNullOrUndefined(gd)){return}var ge=((gd.toString()==='yheader')?'rows-shelf':'columns-shelf');var gf=gc==='down';ce.levelDrill(this.get_visualId(),e,ge,gf)},createUbertipModel:function(e){var gc=fz.deserializeUbertip(e);if(ss.isValue(gc)){dn.filterCommands(gc.commands,this.$o)}return gc},getTopic:function(e){var gc=new bX;var gd=gc.$0(e);var ge=gc.$0('viewChanged');if(gd>=ge){return this.getTopicCore(e,'View_'+this.sheetid)}return eh.prototype.getTopic.call(this,e)},$m:function(e,gc,gd){var ge=new U('none',ss.mkdel(this,function(gf){var gg=de.getVisualModel(z.get_instance(),this.sheetid);de.setVisualValidStateOnModel(gf,gg,false)}),e,gc,gd);ba.SendCommand(ge)},$n:function(e,gc){var gd=false;var ge=dojo.subscribe(this.getTopic('onTabSelect'),function(gh){gd=true});gc['primarySheet']=this.sheetid;if(ss.isValue(gc)&&ss.isValue(e)){var gf;if(!gd&&(ss.isNullOrUndefined(tsConfig.allow_tooltip)||tsConfig.allow_tooltip)){var gg=gc['ubertip'];gf=this.createUbertipModel(gg)}else{gf=null}e(gf)}dojo.unsubscribe(ge)}},eh);ss.initClass(fF,a,{add_newVisualList:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newVisualList:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_visualListPresModel:function(){return this.pm},get_groupItemNodes:function(){if(ss.isNullOrUndefined(this.$3)){this.$3=[];var e=this.get_visualListPresModel().tOA;for(var gc=0;gc<e.length;gc++){var gd=e[gc];if(gd.VzB==='rOX'){this.$3.push(gd)}}}return this.$3},update:function(e){if(this.isNewPresModelSameAsOld(e)){return}this.$3=null;this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$1)}},db);ss.initClass(fG,a,{add_newVisual:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newVisual:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_newHiddenTuples:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_newHiddenTuples:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_newFilteredTuples:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_newFilteredTuples:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_urlInfoCacheChange:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_urlInfoCacheChange:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_visualValidStateChanged:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_visualValidStateChanged:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},add_brushingFromActionChanged:function(e){this.$2$6=ss.delegateCombine(this.$2$6,e)},remove_brushingFromActionChanged:function(e){this.$2$6=ss.delegateRemove(this.$2$6,e)},add_colorDictionaryChanged:function(e){this.$2$7=ss.delegateCombine(this.$2$7,e)},remove_colorDictionaryChanged:function(e){this.$2$7=ss.delegateRemove(this.$2$7,e)},add_customShapesLoaded:function(e){this.$2$8=ss.delegateCombine(this.$2$8,e)},remove_customShapesLoaded:function(e){this.$2$8=ss.delegateRemove(this.$2$8,e)},get_worksheetName:function(){return this.get_visualId().AVP},get_visualId:function(){return this.pm.J_M},get_containerGeometry:function(){return this.get_zone().get_zoneContentRect()},get_tooltipMode:function(){return this.pm.SmW},get_scenePresModel:function(){return this.pm.X$},get_shelves:function(){return this.$r},get_analyticsModel:function(){return this.$b},get_marksCardModel:function(){return this.$o},get_selectionsModel:function(){return this.$q},get_impliedSelectionModel:function(){return this.$l},get_brushingsModel:function(){return this.$d},get_showMeModel:function(){return this.$s},get_sceneModel:function(){return this.$p},get_labelsModel:function(){return this.$m},get_mapServerModel:function(){return this.$n},get_filters:function(){return _.values(this.$g)},get_filterModels:function(){return this.$g},get_geometryModel:function(){return this.$j},get_sortIndicatorsModel:function(){return this.$t},get_vizDataModel:function(){return this.$w},get_titleModel:function(){return this.$u},get_captionModel:function(){return this.$f},get_hiddenTuples:function(){return this.$a},get_filteredTuples:function(){return this.$9},get_isMap:function(){return this.pm.ri},get_hasBackgroundImage:function(){return this.pm.mqY},get_floatingToolbarVisibility:function(){return this.pm.cqq},get_geoSearchVisibility:function(){return this.pm.pKy},get_vizNavigationSetting:function(){return this.pm.haE},get_defaultMapTool:function(){return this.pm.DpY},get_cacheUrlInfo:function(){return this.$e},get_hasModifiedAxes:function(){return this.pm.qFh},get_backgroundColor:function(){return this.pm.oiS},get_paneBGColor:function(){return this.pm.QLN},get_headerBGColor:function(){return this.pm.ogc},get_shouldUpdate:function(){return z.get_instance().get_autoUpdate()},get_invalidSheets:function(){var e=de.findContentDashboard();return e.get_invalidSheets()},get_isVisualValid:function(){return this.$v},set_isVisualValid:function(e){if(this.pm.GiX&&e!==this.$v){this.$v=e;this.raiseEvent(this.$2$5)}},get_isBrushedFromAction:function(){return this.$c},set_isBrushedFromAction:function(e){if(this.$c!==e){this.$c=e;this.raiseEvent(this.$2$6)}},get_zone:function(){var e=ss.safeCast(this.get_parent(),fZ);return e.get_zone()},vizDataContainsDuplicateCaption:function(e){if(ss.isNullOrUndefined(this.get_vizDataModel())){return false}return _.filter(this.get_vizDataModel().get_fieldCaptions(),function(gc){return ss.referenceEquals(gc,e)}).length>1},setFilteredTuples:function(e,gc){this.$h[e]=gc;var gd={};var ge=ss.getEnumerator(Object.keys(this.$h));try{while(ge.moveNext()){var gf=ge.current();var gg=this.$h[gf];for(var gh=0;gh<gg.length;gh++){var gi=gg[gh];gd[gi.toString()]=gi}}}finally{ge.dispose()}var gj=ss.getKeyCount(this.$9)!==ss.getKeyCount(gd);if(!gj){var gk=ss.getEnumerator(Object.keys(this.$9));try{while(gk.moveNext()){var gl=gk.current();if(!ss.keyExists(gd,gl)){gj=true;break}}}finally{gk.dispose()}}if(gj){this.$9=gd;if(ss.isValue(this.$2$3)){this.$2$3()}}},setHiddenTuples:function(e,gc){this.$k[e]=gc;var gd={};var ge=ss.getEnumerator(Object.keys(this.$k));try{while(ge.moveNext()){var gf=ge.current();var gg=this.$k[gf];for(var gh=0;gh<gg.length;gh++){var gi=gg[gh];gd[gi.toString()]=gi}}}finally{ge.dispose()}var gj=ss.getKeyCount(this.$a)!==ss.getKeyCount(gd);if(!gj){var gk=ss.getEnumerator(Object.keys(this.$a));try{while(gk.moveNext()){var gl=gk.current();if(!ss.keyExists(gd,gl)){gj=true;break}}}finally{gk.dispose()}}if(gj){this.$a=gd;if(ss.isValue(this.$2$2)){this.$2$2()}}},getMutableCopyOfPresModel:function(){var e=this.pm.X$;var gc=this.pm.vnA;var gd=this.pm.zFl;delete this.pm['X$'.toString()];delete this.pm['zFl'.toString()];delete this.pm['vnA'.toString()];var ge=db.prototype.getMutableCopyOfPresModel.call(this);this.pm.X$=e;this.pm.zFl=gd;this.pm.vnA=gc;return ge},update:function(e){if(ss.isNullOrUndefined(this.$r)){this.$r=new em(this)}if(ss.isValue(e.MiB)){var gc=this.$4(e);this.$r.update(e.MiB,z.get_instance().get_workbook().get_dataSchema(),gc)}if(ss.isValue(e.OIO)){if(ss.isNullOrUndefined(this.$b)){this.$b=new x(this)}this.$b.update(e.OIO)}if(ss.isValue(e.zFl)){if(ss.isNullOrUndefined(this.$w)){this.$w=new fK(this)}this.$w.update(e.zFl)}if(ss.isNullOrUndefined(this.$p)){this.$p=new dJ(this)}if(ss.isValue(e.X$)){if(ss.isValue(this.$k)){var gd=ss.getKeyCount(this.$a)>0;this.$k={};this.$a={};if(gd){this.raiseEvent(this.$2$2)}}if(ss.isValue(this.$h)){var ge=ss.getKeyCount(this.$9)>0;this.$h={};this.$9={};if(ge){this.raiseEvent(this.$2$3)}}this.$p.update(e.X$)}if(ss.isValue(e.Ucd)&&ss.isValue(this.pm)){if(!_.isEqual(this.pm.Ucd,e.Ucd)){this.raiseEvent(this.$2$7)}}if(ss.isNullOrUndefined(this.$m)){this.$m=new dJ(this)}if(ss.isValue(e.vnA)){this.$m.update(e.vnA)}if(ss.isNullOrUndefined(this.$o)){this.$o=new cZ(this)}if(ss.isValue(e.Inn)){this.$o.update(e.Inn)}if(ss.isValue(e.pUG)&&e.pUG.length>0){this.$q.update(e.pUG)}if(ss.isValue(e.iyL)){this.$d.update(e.iyL)}this.$6(this.$q.get_nodeSelection().get_nodes());if(!ss.isValue(this.$s)){this.$s=new bi(this)}if(ss.isValue(e.kCM)){this.$s.update(e.kCM)}if(ss.isNullOrUndefined(this.$n)){this.$n=new cY(this)}if(ss.isValue(e.RFX)||!e.ri){var gf=(e.ri?e.RFX:null);this.$n.update(gf)}var gg=e.DbF||'';var gh=tab.JsonUtil.parseJson(gg);if(this.$7(gh,gg)){this.$i=gg;if(ss.isValue(gh)){var gi={};for(var gj=0;gj<gh.length;gj++){var gk=gh[gj];var gl=tableau.format.formatQualifiedName(gk.name);var gm=this.$g[gl];if(ss.isNullOrUndefined(gm)){gm=de.createFilterModel(this,gk)}gm.update(gk);gi[gl]=gm}this.$g=gi}}var gn=e.XJV||'';var go=tab.JsonUtil.parseJson(gn);if(!_.isEqual(go,this.get_cacheUrlInfo())){this.$e=go;this.$5()}var gp=e.kI||'';if(!ss.isValue(this.$j)){this.$j=new fD(this)}var gq=tab.JsonUtil.parseJson(gp);this.$j.update(gq);if(ss.isNullOrUndefined(this.$u)){this.$u=new fs(this,'CTm'.toString())}if(ss.isValue(e.CTm)){this.$u.update(e.CTm)}if(!ss.isValue(this.$f)){this.$f=new fs(this,'vv_'.toString())}if(ss.isValue(e.vv_)){this.$f.update(e.vv_)}if(!ss.isValue(this.$t)){this.$t=new ep(this)}if(ss.isValue(e.$tK)){this.$t.update(e.$tK)}this.swapAndCopyPresModel(e);if(this.get_isVisualValid()!==this.pm.GiX){this.$v=this.pm.GiX;this.raiseEvent(this.$2$5)}this.$8()},$8:function(){this.raiseEvent(this.$2$1)},$5:function(){if(ss.isValue(this.get_cacheUrlInfo())){this.raiseEvent(this.$2$4)}},$7:function(e,gc){if(ss.isNullOrUndefined(this.$i)){return true}if(ss.isValue(e)){var gd=_.find(e,function(ge){return ge.isTiled});if(ss.isValue(gd)){return true}}return!ss.referenceEquals(this.$i,gc)},hasFilterFieldData:function(e){return ss.isValue(this.get_vizDataModel())&&ss.indexOf(this.get_vizDataModel().get_filterFields(),e)!==-1},getEffectiveSelectedTuples:function(e){var gc;var gd=this.$l.get_ids();if(tab.MiscUtil.isNullOrEmpty(gd)){gc=e}else if(tab.MiscUtil.isNullOrEmpty(e)){gc=gd}else{var ge=[];ss.arrayAddRange(ge,e);ss.arrayAddRange(ge,gd);gc=Array.prototype.slice.call(ge)}return gc},$6:function(e){var gc=C.getTuplesAssociatedWithSelectedNodes(this,e);this.$l.setOverriddenTupleIds(gc)},$3:function(){this.$l.setOverriddenTupleIds([])},$4:function(e){if(ss.isValue(e)&&ss.isValue(e.Inn)&&ss.isValue(e.Inn.FsL)){return e.Inn.FsL}return de.findActivePaneSpecId()}},db);ss.initClass(fH,a,{});ss.initClass(fI,a,{get_hasDataValues:function(){return this.$c},get_hasAliases:function(){return this.$b},get_dataType:function(){return this.$a.tbM},get_fieldName:function(){return this.$a.HBp},get_fieldCaption:function(){return this.$a.OLk},get_baseColumnName:function(){return this.$a._HL},get_role:function(){return this.$a.YIQ},get_aggType:function(){return this.$a.Ymv1},get_specialValuesOverride:function(){return this.$a.ywi},get_filterContext:function(){return this.$a.HWT},get_vizColumnDoNotUse:function(){return this.$a},$8:function(){return this.$a.ISx},$9:function(){return this.$a.ZHX},$7:function(){return tab.Logger.lazyGetLogger(fI)},isTupleIdValid:function(e){for(var gc=0;gc<this.$a.ISx.length;++gc){var gd=this.$a.ISx[gc];var ge=this.$5(e,gd);if(ss.isValue(ge)){return true}}return false},$2:function(e){var gc=this.$3(e,0);var gd={};var ge=0;for(var gf=0;gf<gc.nSc.length;gf++){var gg=gc.nSc[gf];gd[gg]=ge++}this.$e[e]=gd},$5:function(e,gc){if(!ss.keyExists(this.$e,gc)){this.$2(gc)}return this.$e[gc][e]},getAliasIndex:function(e){var gc=null;if(!this.get_hasAliases()){return gc}for(var gd=0;gd<this.$a.ISx.length;++gd){var ge=this.$a.ISx[gd];var gf=this.$5(e,ge);if(ss.isValue(gf)){var gg=this.$a.ZHX[gd];var gh=this.$3(ge,gg);gc=gh.wwF[gf];break}}return gc},getDataValueIndex:function(e){var gc=null;if(this.get_hasDataValues()){for(var gd=0;gd<this.$a.ISx.length;++gd){var ge=this.$a.ISx[gd];var gf=this.$5(e,ge);if(ss.isValue(gf)){var gg=this.$a.ZHX[gd];var gh=this.$3(ge,gg);gc=gh.qtG[gf];break}}}return gc},getPaneDescriptorKey:function(e){var gc=null;for(var gd=0;gd<this.$a.ISx.length;++gd){var ge=this.$8()[gd];var gf=this.$5(e,ge);if(ss.isValue(gf)){var gg=this.$4(ge);gc=gg.uNv.fDN;break}}return gc},$4:function(e){var gc=null;if(this.$d.length>e){gc=this.$d[e]}else{}return gc},$3:function(e,gc){var gd=null;var ge=this.$4(e);if(ss.isValue(ge)){if(ge.ZKj.length>gc){gd=ge.ZKj[gc]}else{}}return gd},$1:function(){var e=false;for(var gc=0;gc<this.$8().length;gc++){var gd=this.$8()[gc];var ge=this.$9()[gc];var gf=this.$3(gd,ge);if(ss.isValue(gf)){e=e||ss.isValue(gf.qtG)&&gf.qtG.length>0}}return e},$0:function(){var e=false;for(var gc=0;gc<this.$8().length;gc++){var gd=this.$8()[gc];var ge=this.$9()[gc];var gf=this.$3(gd,ge);if(ss.isValue(gf)){e=e||ss.isValue(gf.wwF)&&gf.wwF.length>0}}return e},$6:function(){}});ss.initClass(fJ,a,{});ss.initClass(fK,a,{add_newVizData:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newVizData:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_hasTupleIdColumn:function(){return ss.isValue(this.$8)},get_highlightCaptions:function(){return this.$5().RjV},get_filterFields:function(){return this.$5().Ubv},get_fieldCaptions:function(){return this.$7},get_ubertipData:function(){return this.$5().sZN},$5:function(){return this.pm},$3:function(){return this.$5().FOi},$4:function(){return this.$3().wIG},getVizDataFieldByIndex:function(e){if(e>=0&&e<this.$6.length){return this.$6[e]}return null},getColumnIndex:function(e){if(ss.isNullOrUndefined(this.$3())){return-1}var gc=this.$3().Ekt;for(var gd=0;gd<gc.length;++gd){if(fL.isFieldCaptionOfColumn(gc[gd],e)){return gd}}for(var ge=0;ge<gc.length;++ge){if(fL.isFieldNameOfColumn(gc[ge],e)){return ge}}return-1},getVizDataField:function(e){return this.getVizDataFieldByIndex(this.getColumnIndex(e))},hasDimensionColumnNotMeasureNames:function(){if(ss.isValue(this.$3())){var e=this.$3().Ekt;for(var gc=0;gc<e.length;gc++){var gd=e[gc];if(gd.YIQ==='dimension'&&gd.JDJ!=='[:Measure Names]'){return true}}}return false},hasTupleId:function(e){var gc=false;if(this.get_hasTupleIdColumn()){this.forEachVizDataField(function(gd,ge){if(gd.isTupleIdValid(e)){gc=true;return false}return true})}return gc},forEachTupleId:function(e){for(var gc=0;gc<this.$4().length;++gc){var gd=this.$4()[gc].ZKj[0];for(var ge=0;ge<gd.nSc.length;ge++){var gf=gd.nSc[ge];var gg=!e(gf);if(gg){break}}}},forEachVizDataField:function(e){var gc=this.$6.length;for(var gd=0;gd<gc;++gd){var ge=this.$6[gd];if(ss.isNullOrUndefined(ge)){continue}var gf=!e(ge,gd);if(gf){break}}},update:function(e){var gc=this.simpleSwapToUpdate(e,this.$2$1);if(gc&&ss.isValue(this.$3())){this.$8=null;ss.clear(this.$6);this.$7=[];var gd=this.$3().Ekt;for(var ge=0;ge<gd.length;ge++){var gf=gd[ge];if(gf.HBp==='[system:visual].[tuple_id]'){this.$8=gf;this.$6.push(null);continue}this.$7.push(gf.OLk);var gg=new fI(gf,this.$3().wIG);this.$6.push(gg)}}}},db);ss.initClass(fL,a,{});ss.initClass(fM,a,{get_r:function(){return this.$0['dpp'.toString()]},set_r:function(e){this.$0['dpp'.toString()]=e},get_fns:function(){return this.$0['HVp'.toString()]},set_fns:function(e){this.$0['HVp'.toString()]=e},get_x:function(){return this.$0['thj'.toString()]},set_x:function(e){this.$0['thj'.toString()]=e},get_y:function(){return this.$0['RAC'.toString()]},set_y:function(e){this.$0['RAC'.toString()]=e},get_w:function(){return this.$0['rec'.toString()]},set_w:function(e){this.$0['rec'.toString()]=e},get_h:function(){return this.$0['EUR'.toString()]},set_h:function(e){this.$0['EUR'.toString()]=e}});ss.initClass(fN,a,{get_isViewingUri:function(){return this.$k===1},get_isAuthoringUri:function(){return this.$k===2},get_isAuthorNewWorkbookUri:function(){return this.$k===3},get_isInvalid:function(){return this.$k===0},get_isAdminUri:function(){return this.$k===4},get_isSharedViewUri:function(){return this.$k===5},get_absoluteUri:function(){return this.$5()},get_uri:function(){return this.$9()},get_path:function(){return this.$8()},get_queryParams:function(){return this.$i},get_retry:function(){return this.$6(':retry')},set_retry:function(e){this.$c(':retry',e)},get_originalView:function(){return this.$6(':original_view')},set_originalView:function(e){this.$c(':original_view',e);if(e){this.$f=''}},get_showSaveAs:function(){return this.$6(':showSaveAs')},set_showSaveAs:function(e){this.$c(':showSaveAs',e)},$6:function(e){return ss.keyExists(this.$i,e)&&tab.MiscUtil.toBoolean(this.$i[e][0],false)},$c:function(e,gc){if(gc){this.$i[e]=[];this.$i[e].push('yes')}else{delete this.$i[e]}},removeQueryParam:function(e){delete this.$i[e];return this},removeAllQueryParams:function(){ss.clearKeys(this.$i);return this},$d:function(){var e={};var gc=ss.getEnumerator(Object.keys(this.$i));try{while(gc.moveNext()){var gd=gc.current();var ge=decodeURIComponent(gd);if(ss.startsWithString(ge,':ff_')||ss.contains(fN.$b,ge)){e[gd]=this.$i[gd]}}}finally{gc.dispose()}this.$i=e;return this},fullPageLoad:function(e){e=e||tabBootstrap.Utility.get_locationWindow();this.setWindowLocation();window.setTimeout(function(){tab.WindowHelper.reload(e,false)},300)},replaceState:function(e){if(tab.MiscUtil.isNullOrEmpty(e)){e=tabBootstrap.Utility.get_locationWindow()}tab.HistoryUtil.replaceState(e,new Object,'',this.get_uri())},setWindowLocation:function(e){if(tab.MiscUtil.isNullOrEmpty(e)){e=tabBootstrap.Utility.get_locationWindow()}tab.WindowHelper.setLocationHref(e,this.get_uri())},setTopWindowLocation:function(){this.setWindowLocation(window.top)},matchesCurrentWindowLocationUri:function(e){return ss.referenceEquals(this.get_uri(),fN.createForCurrentWindowLocation(e).get_uri())},matchesCurrentWindowLocationAbsoluteUri:function(){return ss.referenceEquals(this.get_absoluteUri(),fN.createForCurrentWindowLocation().get_absoluteUri())},matchesCurrentWindowLocationPath:function(e){return ss.referenceEquals(this.get_path(),fN.createForCurrentWindowLocation(e).get_path())},removeHash:function(){this.$g=''},$5:function(){var e=this.$9();var gc=this.$h;if(!ss.startsWithString(e,'/')){gc+='/'}gc+=e;return gc},$9:function(){var e=new ss.StringBuilder;e.append(this.$8());var gc=tab.MiscUtil.replaceUriQueryParameters('',this.$i);if(!tab.MiscUtil.isNullOrEmpty(gc)){e.append(gc)}e.append(this.$7());return e.toString()},$8:function(){var e=new ss.StringBuilder;if(!tab.MiscUtil.isNullOrEmpty(tsConfig.site_root)&&!this.get_isAdminUri()){e.append(tsConfig.site_root)}e.append('/');e.append(this.$b(this.$k));if(this.$k===2){e.append('/');e.append(this.$l);e.append('/');e.append(this.$j);if(!tab.MiscUtil.isNullOrEmpty(this.$e)){e.append('/');e.append(encodeURIComponent(this.$e))}}else if(this.$k===1){e.append('/');e.append(this.$l);e.append('/');e.append(this.$j);if(!tab.MiscUtil.isNullOrEmpty(this.$f)){e.append('/');e.append(this.$f)}}else if(this.$k===4){e.append('/');e.append(this.$l);e.append('/');e.append(this.$j)}else if(this.$k===3){e.append('/');e.append(this.$l)}else if(this.$k===5){e.append('/');e.append(tsConfig.guid)}return e.toString()},$7:function(){if(this.explicitNotGuest){return'#guest=n'}return this.$g},$4:function(e){var gc=_.keys(fN.$d);var gd=fA.getModuleFromPath(e.pathname,gc);this.$k=this.$a(gd);var ge=fA.getMeatFromPath(e.pathname,gc);if(this.$k===1){this.$3(ge)}else if(this.$k===2){this.$2(ge)}else if(this.$k===3){this.$1(ge)}else if(this.$k===4){this.$0(ge)}this.$i=fN.$1(e);this.$g=e.hash;this.$h=tab.BrowserSupport.getOrigin(e)},$3:function(e){var gc=e.split('/');this.$l=gc[0];this.$j=gc[1];if(gc.length>2){if(gc.length===3){this.$f=gc[2]}this.$f=gc[2]+'/'+gc[3]}},$2:function(e){var gc=e.split('/');this.$l=gc[0];this.$j=gc[1];if(gc.length>2){this.$e=decodeURIComponent(gc[2])}},$0:function(e){var gc=e.split('/');this.$l=gc[0];this.$j=gc[1]},$1:function(e){this.$l=e},$b:function(e){return fN.$9[e]},$a:function(e){return fN.$d[e]},updateForViewingSheet:function(e){if(!this.get_isViewingUri()&&!this.get_isAuthoringUri()&&!this.get_isAdminUri()&&!this.get_isSharedViewUri()){throw new ss.Exception('Cannot call UpdateForViewingNewTab() from a VizUriModel that does not have VizUriType Viewing')}var gc=new dG(e);this.$l=gc.get_workbookId();this.$j=gc.get_sheetId();this.$e='';return this},updateForCustomizedView:function(e){if(!this.get_isViewingUri()){throw new ss.Exception('Cannot call UpdateForCustomizedView() from a VizUriModel that does not have VizUriType Viewing')}var gc=e.startViewId;if(ss.isNullOrUndefined(gc)){gc=this.$j}this.$j=gc;this.$f=ss.formatString('{0}/{1}',fN.encodeUserName(e.owner.username),e.urlId);this.$e='';this.set_originalView(false);return this}});ss.initEnum(fO,a,{invalid:0,viewing:1,authoring:2,authorNewWorkbook:3,admin:4,sharedView:5});ss.initClass(fP,a,{isBusy:function(){return this.$c>0},addref:function(e){this.$c+=1;if(this.$c===1&&!this.$b&&!this.$a){this.$5(e)}},addrefAndTurnOnImmediately:function(){this.$c+=1;this.$5(true,true)},showAndLock:function(){if(!this.$b){this.$5(true,true)}this.$2()},$2:function(){this.$a=true},unlock:function(){this.$a=false},release:function(){this.$c-=1;if(this.$c<0){this.$c=0}this.nudge()},nudge:function(){if(this.$c>0||this.$a){return}this.$1()},reset:function(){this.$0();var e=300;this.$f.hide().css('opacity','0');if(this.$8.length===0){return}var gc=ss.mkdel(this,function(){this.$8.css('cursor','default').hide();this.$6=null;var gf=$('.facadedom');if(gf.length>0){gf.remove()}});var gd=new Object;gd.node=this.$8[0];gd.duration=e;gd.easing=dojo.fx.easing.linear;gd.onEnd=gc;var ge=gd;this.$6=dojo.fadeOut(ge);this.$6.play()},onNextHide:function(e){this.$d=e},$0:function(){if(ss.isValue(this.$9)){window.clearTimeout(ss.unbox(this.$9));this.$9=null}if(ss.isValue(this.$g)){window.clearTimeout(ss.unbox(this.$g));this.$g=null}if(ss.isValue(this.$6)){this.$6.stop();this.$6=null}if(ss.isValue(this.$7)){this.$7.stop();this.$7=null}if(ss.isValue(this.$e)){this.$e.stop();this.$e=null}},$1:function(){if(ss.isValue(this.$d)){this.$d();this.$d=null;this.$0()}else{this.reset()}this.$b=false},$5:function(e,gc){var gd=400;var ge=500;var gf=1900;var gg=100;var gh=dojo.fx.easing.quadOut;var gi=dojo.fx.easing.linear;var gj=0.419999986886978;if(e){gd=0;gf-=400}this.$0();if(gc){this.$3(ge,gh,gj);this.$4(gg,gi)}else{this.$9=window.setTimeout(ss.mkdel(this,function(){this.$3(ge,gh,gj)}),gd);this.$g=window.setTimeout(ss.mkdel(this,function(){this.$4(gg,gi)}),gf)}this.$b=true},$3:function(e,gc,gd){if(ss.isValue(this.$6)){this.$6.stop();this.$6=null}var ge=ss.mkdel(this,function(){this.$8.show().css('cursor','wait')});var gf=ss.mkdel(this,function(){this.$9=null;this.$7=null});var gg=new Object;gg.node=this.$8[0];gg.onBegin=ge;gg.onEnd=gf;gg.onStop=gf;gg.properties=ss.mkdict(['opacity',ss.mkdict(['start',0,'end',gd])]);gg.duration=e;gg.easing=gc;var gh=gg;this.$7=dojo.animateProperty(gh);this.$7.play()},$4:function(e,gc){var gd=ss.mkdel(this,function(){this.$f.show()});var ge=ss.mkdel(this,function(){this.$g=null;this.$e=null});var gf=new Object;gf.node=this.$f[0];gf.onBegin=gd;gf.onEnd=ge;gf.onStop=ge;gf.properties=ss.mkdict(['opacity',ss.mkdict(['start',0,'end',1])]);gf.duration=e;gf.easing=gc;var gg=gf;this.$e=dojo.animateProperty(gg);this.$e.play()}});ss.initClass(fQ,a,{add_newWebZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newWebZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_zone:function(){return this.$3.get_presModel()},update:function(e){this.simpleSwapToUpdate(e,this.$2$1)}},db);ss.initClass(fR,a,{add_modelUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_modelUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},$4:function(){return this.pm},$3:function(){return this.$4().LLA},get_aggregationValues:function(){return this.$4().VRG},get_aggregationCaptions:function(){return this.$4().iSd},get_aggregation:function(){return this.get_aggregationValues()[this.$3()]},get_hasAggregation:function(){return ss.isValue(this.get_aggregationValues())&&this.get_aggregationValues().length>0},get_numberOfPrevValues:function(){return this.$4().EQP},get_numberOfNextValues:function(){return this.$4().Xsn},get_minPrevOrNextValues:function(){return this.$4().d$o},get_maxPrevOrNextValues:function(){return this.$4().ysc},get_summaryCaption:function(){return this.$4().Bcu},get_includeCurrentValue:function(){return this.$4().sBD},get_nullIfIncomplete:function(){return this.$4().SvL},update:function(e){this.simpleSwapToUpdate(e,this.$3$1)}},fx);ss.initClass(fS,a,{add_newDashboard:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newDashboard:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_dashboardDeleted:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_dashboardDeleted:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_sheetsChanged:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_sheetsChanged:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_newDataConnectionPrompt:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_newDataConnectionPrompt:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_dataConnectionPromptDismissed:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_dataConnectionPromptDismissed:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},add_sheetTypeChanged:function(e){this.$2$6=ss.delegateCombine(this.$2$6,e)},remove_sheetTypeChanged:function(e){this.$2$6=ss.delegateRemove(this.$2$6,e)},get_sheetType:function(){return ss.coalesce(fS.$1(this.pm),'worksheet')},get_dataSchema:function(){return this.$a},get_commands:function(){return this.$7},$6:function(){return this.$9},get_isCurrentSheetStoryboard:function(){return ss.isValue(this.get_storyboard())},get_currentSheetStoryPointId:function(){if(this.get_isCurrentSheetStoryboard()){var e=this.get_storyboard().get_flipboard();if(ss.isValue(e)){return e.get_currentStoryPointId()}}return 0},get_storyboard:function(){var e=this.findContentDashboard();if(ss.isValue(e)&&ss.referenceEquals(e.get_sheetName(),this.$9.get_sheetName())){return null}return this.$9},get_hasPublishedSheets:function(){return this.get_sheetsInfo().some(function(e){return e.GJq})},get_sheetsInfo:function(){return this.$c},get_isWorkbookIncomplete:function(){return this.get_removedDataSourceCount()>0||this.get_removedSheetCount()>0},get_isWorkbookModifiedAuthoring:function(){return ss.isValue(this.pm)&&this.pm.$Dn},get_isCurrentDashboardModified:function(){return ss.isValue(this.$6())&&ss.isValue(this.$6().pm)&&ss.isValue(this.$6().pm.kc$)&&this.$6().pm.kc$.length>0},get_removedDataSourceCount:function(){return this.pm.DxN||0},get_removedSheetCount:function(){return this.pm.yNn||0},get_outerDashboardRepositoryUrl:function(){return((ss.isValue(this.$9)&&ss.isValue(this.$9.pm)&&ss.isValue(this.$9.pm.nhM))?this.$9.pm.nhM.YnR:null)},get_outerDashboardSize:function(){if(ss.isNullOrUndefined(this.$9)){return null}var e=this.$9.get_dashboardSize();return{w:e.rec,h:e.EUR}},get_connectionPromptModel:function(){return this.$8},get_formatPaneModel:function(){return this.$b},$3:function(){this.$9=null},withDashboard:function(e){var gc=this.findContentDashboard();if(ss.isValue(gc)){e(gc);return}var gd=null;gd=ss.mkdel(this,function(ge){e(ge);this.remove_newDashboard(gd)});this.add_newDashboard(gd)},$5:function(e){return fS.$0(e)&&ss.isValue(fS.$1(this.pm))&&this.get_sheetType()!==e.mmK.nhM.xD},addNewDashboardHandler:function(e){this.add_newDashboard(e);if(ss.isValue(this.$9)){e(this.$9)}},removeDashboardHandler:function(e){this.remove_newDashboard(e)},findContentDashboard:function(){if(ss.isNullOrUndefined(this.$9)){return null}return this.$9.get_contentDashboard()},$4:function(e){return ss.isValue(e.mmK.nhM)&&!ss.referenceEquals(e.mmK.nhM.DDA,tsConfig.current_sheet_name)},update:function(e,gc){if(ss.isValue(e._$p)){this.$8=new bz(this);this.get_connectionPromptModel().update(e._$p);if(!ss.isNullOrEmptyString(this.$8.get_datasourceName())){this.raiseEvent$1(bz).call(this,this.$2$4,this.get_connectionPromptModel())}else{this.raiseEvent(this.$2$5)}}if(ss.isValue(e.$Dn)&&(ss.isNullOrUndefined(this.pm)||this.get_isWorkbookModifiedAuthoring()!==e.$Dn)){this.raiseEvent(function(){ba.get().get_legacySession().fireEvent('workbookModifiedChanged',e.$Dn)})}if(this.$5(e)){this.raiseEvent$1(Object).call(this,this.$2$6,e.mmK.nhM.xD)}if(!ss.isValue(this.$a)){this.$a=new bG(this)}if(ss.isValue(e.dJ$1)){this.$a.update(e.dJ$1)}var gd=false;if(typeof(e.mmK)==='undefined'){}else if(e.mmK===null){var ge=this.$9;this.$9=null;this.raiseEvent$1(bv).call(this,this.$2$2,ge)}else{if(this.$4(e)){this.$3();gd=true}if(!ss.isValue(this.$9)){this.$9=new bv(this,'mmK'.toString());this.raiseEvent$1(bv).call(this,this.$2$1,this.$9)}this.$9.update(e.mmK,gc)}if(ss.isValue(e.Jmx)){this.$7.update(e.Jmx)}if(ss.isValue(e.jky)&&!_.isEqual(e.jky,this.$c)){this.$c=e.jky;gd=true}if(gd){this.raiseEvent$1(fS).call(this,this.$2$3,this)}if(ss.isValue(e.tfj)){if(ss.isNullOrUndefined(this.$b)){this.$b=cm.createModel(this,e.tfj)}this.$b.update(e.tfj)}this.swapAndCopyPresModel(e)}},db);ss.initClass(fT,a,{});ss.initClass(fU,a,{});ss.initEnum(fV,a,{none:0,userInvalidEmailAddress:10011});ss.initClass(fW,a,{});ss.initClass(fX,a,{});ss.initClass(fY,a,{request:function(e){var gc='X-Tsi-Supports-Accepted';e.headers=e.headers||{};if(ss.keyExists(e.headers,gc)&&e.headers[gc]===false){delete e.headers[gc]}else{e.headers[gc]=true}if(ss.isValue(fY.$0)&&fY.$0.length>0){e.headers['X-Tsi-Active-Tab']=encodeURIComponent(fY.$0)}if(ss.isValue(e.complete)){var gd=e.complete;e.complete=function(gi,gj){gi['args']=e;gd(gi,gj)}}if(ss.isValue(e.success)){var ge=e.success;e.success=function(gi,gj,gk){gk['args']=e;ge(gi,gj,gk)}}if(ss.isValue(e.error)){var gf=e.error;e.error=function(gi,gj,gk){gi['args']=e;gf(gi,gj,gk)}}if(ss.isValue(e.beforeSend)){var gg=e.beforeSend;e.beforeSend=function(gi){gi['args']=e;gg(gi)}}var gh=e;return $.ajax(gh)}});ss.initClass(fZ,a,{get_zone:function(){return ss.safeCast(this.get_parent(),ga)}},db);ss.initClass(ga,a,{add_newZoneContent:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newZoneContent:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_removeZoneContent:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_removeZoneContent:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_updateZone:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_updateZone:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_resizeZone:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_resizeZone:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},get_model:function(){return this.$b},get_dashboardModel:function(){return this.$a},get_visualModel:function(){if(this.get_zoneType()==='viz'){return this.$b}return null},get_zoneType:function(){return this.$3(this.pm)},get_height:function(){return this.pm.EUR},get_width:function(){return this.pm.rec},get_x:function(){return this.pm.thj},get_y:function(){return this.pm.RAC},get_zoneContentRect:function(){return{x:this.get_x(),y:this.get_y(),w:this.get_width(),h:this.get_height()}},get_zoneId:function(){return this.pm.BCp},get_worksheetName:function(){return this.pm.AVP},get_contentType:function(){return ga.typeOfContent(this.pm)},get_isFloating:function(){return this.pm.Qba||false},get_isSelectionDisabled:function(){return this.pm.OKP||false},get_contextMenuCommands:function(){if(this.get_zoneType()==='filter'){if(tab.FeatureFlags.isEnabled('VizCatQF')&&!this.$7){var e=this.get_model();return e.get_quickFilterCommands()}else{var gc=this.get_model();return gc.get_quickFilterCommands()}}return new Object},get_chromeCommands:function(){return this.$6},get_backgroundColor:function(){if(ss.isValue(this.pm.oiS)){this.$9=this.$9||X.convertColorForCanvas(this.pm.oiS);return this.$9}return null},get_relativeZoneZIndex:function(){return this.pm.Vk$+1},get_associatedSheet:function(){return this.pm.Gge},get_isDependentOnViz:function(){switch(this.get_zoneType()){case'viz':case'color':case'shape':case'size':case'map':{return true}}return false},get_hasBorder:function(){return de.hasBorder(this.pm.rPC)},raiseRemoveZoneContent:function(){this.raiseEvent(this.$2$2)},update:function(e,gc){if(ss.isValue(e)){{e.Gge=e.Gge||'';e.nkG1=e.nkG1||0;e.jZr=e.jZr||0}var gd=!this.$4(e);if(gd){this.raiseEvent(this.$2$4)}if(ss.isNullOrUndefined(this.pm)||!ss.referenceEquals(this.pm.oiS,e.oiS)){this.$9=null}if(ss.isValue(e.OnR)){this.$6.update(e.OnR)}if(ss.isValue(e.wqq)){if(!ss.isValue(this.$8)){this.$8=new fZ(this)}var ge=ga.typeOfContent(e);if(ss.isValue(this.pm)&&!ss.referenceEquals(this.get_contentType(),ge)){this.$b=null}if(ss.referenceEquals(ge,ga.$g)){var gf=ga.getContent(e,ga.$g);if(ss.isNullOrUndefined(this.$b)){this.$b=new fG(this.$8);this.$5(this.$b)}var gg=this.$b;gg.update(gf)}else if(ss.referenceEquals(ge,ga.$f)){var gh=ga.getContent(e,ga.$f);if(ss.isNullOrUndefined(this.$b)){this.$b=new fs(this.$8,ga.$f);this.$5(this.$b)}var gi=this.$b;gi.update(gh)}else if(ss.referenceEquals(ge,ga.$e)){var gj=ga.getContent(e,ga.$e);if(ss.isNullOrUndefined(this.$b)){this.$b=new fs(this.$8,ga.$e);this.$5(this.$b)}var gk=this.$b;gk.update(gj)}else if(ss.referenceEquals(ge,ga.$a)){var gl=ga.getContent(e,ga.$a);var gm=this.$7;if(tab.FeatureFlags.isEnabled('VizCatQF')&&dy.supportsQuickFilterType(gl)){this.$7=false;if(ss.isNullOrUndefined(this.$b)){this.$b=new dy(this.$8);this.$5(this.$b)}else if(gm){this.$b=new dy(this.$8);this.$5(this.$b)}var gn=this.$b;gn.update(gl)}else{this.$7=true;if(ss.isNullOrUndefined(this.$b)){this.$b=new cU(this.$8);this.$5(this.$b)}else if(!gm){this.$b=new cU(this.$8);this.$5(this.$b)}var go=tab.JsonUtil.parseJson(e.dCB);var gp=this.$b;gp.update(gl,go)}}else if(ss.referenceEquals(ge,ga.$9)){if(z.get_instance().get_isLocalRenderMode()){var gq=ga.getContent(e,ge);if(ss.isNullOrUndefined(this.$b)){this.$b=new dw(this.$8,ge);this.$5(this.$b)}var gr=this.$b;gr.update(gq)}}else if(ss.referenceEquals(ge,ga.$1)||ss.referenceEquals(ge,ga.$d)||ss.referenceEquals(ge,ga.$c)||ss.referenceEquals(ge,ga.$6)){if(z.get_instance().get_isLocalRenderMode()){var gs=ga.getContent(e,ge);if(ss.isNullOrUndefined(this.$b)){var gt=this.$3(e);this.$b=new O(this.$8,ge,ga.$0(gt));this.$5(this.$b)}var gu=this.$b;gu.update(gs)}}else if(ss.referenceEquals(ge,ga.$8)){var gv=ga.getContent(e,ga.$8);var gw=tab.JsonUtil.parseJson(gv.Vn);gv.nql=gw;if(ss.isNullOrUndefined(this.$b)){this.$b=new dk(this.$8);this.$5(this.$b)}var gx=tab.JsonUtil.parseJson(e.dCB);var gy=this.$b;gy.update(gv,gx)}else if(ss.referenceEquals(ge,ga.$7)){var gz=ga.getContent(e,ga.$7);if(ss.isNullOrUndefined(this.$b)){this.$b=new dg(this.$8);this.$5(this.$b)}var gA=!gd||ss.isNullOrUndefined(this.get_presModel());var gB=tab.JsonUtil.parseJson(e.dCB);var gC=this.$b;gC.update(gz,gB,gA)}else if(ss.referenceEquals(ge,ga.$4)){var gD=ga.getContent(e,ga.$4);if(ss.isNullOrUndefined(this.$b)){this.$b=new cg(this.$8);this.$5(this.$b)}var gE=this.$b;gE.update(gD)}else if(ss.referenceEquals(ge,ga.$3)){var gF=ga.getContent(e,ga.$3);if(ss.isNullOrUndefined(this.$b)){this.$b=new cf(this.$8);this.$5(this.$b)}var gG=this.$b;gG.update(gF,gc)}else if(ss.referenceEquals(ge,ga.$b)){var gH=ga.getContent(e,ga.$b);if(ss.isNullOrUndefined(this.$b)){this.$b=new cS(this.$8);this.$5(this.$b)}var gI=this.$b;gI.update(gH)}else if(ss.referenceEquals(ge,ga.$h)){var gJ=ga.getContent(e,ga.$h);if(ss.isNullOrUndefined(this.$b)){this.$b=new fQ(this.$8);this.$5(this.$b)}var gK=this.$b;gK.update(gJ)}else if(ss.referenceEquals(ge,ga.$5)){var gL=ga.getContent(e,ga.$5);if(ss.isNullOrUndefined(this.$b)){this.$b=new cI(this.$8);this.$5(this.$b)}var gM=this.$b;gM.update(gL)}else if(ss.referenceEquals(ge,ga.$2)){var gN=ga.getContent(e,ga.$2);if(ss.isNullOrUndefined(this.$b)){this.$b=new bF(this.$8);this.$5(this.$b)}var gO=this.$b;gO.update(gN)}}else if(this.$7&&e.jAM==='filter'){if(ss.isValue(this.pm)&&!ss.referenceEquals(e.dCB,this.pm.dCB)){if(ss.isValue(this.$b)){var gP=tab.JsonUtil.parseJson(e.dCB);var gQ=this.$b;gQ.update(gQ.get_quickFilterDisplayPresModel(),gP)}}}}this.swapAndCopyPresModel(e);this.raiseEvent(this.$2$3)},$3:function(e){if(ss.isValue(e)){return e.jAM}return'invalid'},$4:function(e){if(ss.isValue(this.get_presModel())){return e.EUR===this.get_height()&&e.rec===this.get_width()&&e.thj===this.get_x()&&e.RAC===this.get_y()}return false},borderWidth:function(){var e=0;if(this.get_hasBorder()){e=this.pm.rPC.s$V}return e},$5:function(e){this.raiseEvent$1(db).call(this,this.$2$1,e)}},db);ss.initClass(gb,a,{add_newZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_removedZone:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_removedZone:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_zoneModels:function(){if(ss.isNullOrUndefined(this.$7)){this.$7=_.values(this.$8)}return this.$7},get_zonePresModels:function(){return this.pm},set_zonePresModels:function(e){this.pm=e},getZone:function(e){return this.$8[gb.$0(e)]},hasZone:function(e){return ss.keyExists(this.$8,gb.$0(e))},update:function(gc,gd){this.$4('Zones before update: ');this.$5(gc);var ge=_.keys(gc);for(var gf=0;gf<ge.length;gf++){var gg=ge[gf];var gh=gc[gg];if(ss.isValue(gh)){var gi=gh.BCp;try{var gj=gb.$0(gi);if(!ss.isValue(this.$8[gj])){var gk=new ga(this,this.get_parent(),gi);this.$8[gj]=gk;this.raiseEvent$1(ga).call(this,this.$2$1,this.$8[gj]);this.$7=null}else if(ss.isValue(gh)&&ss.isValue(gh.wqq)&&(this.$3(gj,gh)||this.$6(gj,gh))){this.$8[gj].raiseRemoveZoneContent();this.raiseEvent$1(ga).call(this,this.$2$1,this.$8[gj])}this.$8[gj].update(gh,gd)}catch(gl){var e=ss.Exception.wrap(gl);tab.ErrorTrace.report(e,false)}}}this.swapAndCopyPresModel(gc);this.$4('Zones after update: ')},$3:function(e,gc){if(tab.FeatureFlags.isEnabled('VizCatQF')){var gd=this.$8[e].pm;if(ss.isValue(gd.wqq)){var ge='WlK'.toString();if(ss.referenceEquals(ga.typeOfContent(gc),ge)){var gf=ga.getContent(gd,ge);var gg=ga.getContent(gc,ge);if(dy.supportsQuickFilterType(gf)!==dy.supportsQuickFilterType(gg)){return true}}}}return ss.isValue(this.$8[e].get_contentType())&&!ss.referenceEquals(this.$8[e].get_contentType(),ga.typeOfContent(gc))},$6:function(e,gc){return ss.isValue(this.$8[e].get_worksheetName())&&!ss.referenceEquals(this.$8[e].get_worksheetName(),gc.Gge)},$5:function(e){var gc=_.keys(this.$8);for(var gd=0;gd<gc.length;gd++){var ge=gc[gd];var gf=this.$8[ge];var gg=e[gf.get_zoneId().toString()];if(gg===null){var gh=gf.get_zoneId().toString();delete e[gh];delete this.get_zonePresModels()[gh];this.removeZone(gf);continue}if(ss.isValue(gg)&&gf.get_zoneType()!==gg.jAM){this.removeZone(gf)}}},removeZone:function(e){e.raiseRemoveZoneContent();this.raiseEvent$1(ga).call(this,this.$2$2,e);delete this.$8[gb.$0(e.get_zoneId())];this.$7=null},$4:function(e){var gc=new ss.StringBuilder;gc.appendLine(e);var gd=new ss.ObjectEnumerator(this.get_zonePresModels());try{while(gd.moveNext()){var ge=gd.current();if(ss.isValue(ge.value)){gc.append('[ ');gc.append(ge.value.BCp);gc.append(' ');gc.append(ge.value.jAM);gc.append(' ] ');gc.appendLine()}}}finally{gd.dispose()}}},db);(function(){bb.successResult=new bb(true,null)})();(function(){bh.$5=15;bh.$8={};bh.$6={};bh.$7=[];bh.$8['keep-only-or-exclude']=2;bh.$8['quick-sort']=4;bh.$8['clear-sorts']=6;bh.$8['run-action']=8;bh.$8['load-url']=9;bh.$8['merge-or-split']=10;bh.$8['legend-group-or-ungroup']=13;bh.$8['label-drill']=11;bh.$8['level-drill']=12;bh.$8['remove-reference-line']=15;bh.$8['show-reference-line-constant-value-editor']=21;bh.$8['trend-lines']=17;bh.$8['show-col-totals']=18;bh.$8['show-row-totals']=18;bh.$8['remove-subtotals']=18;bh.$8['set-totals-type']=19;bh.$8['set-reference-line-formula']=20;bh.$8['show-reference-line-editor']=22})();(function(){l.$0=35;l.$1=1})();(function(){X.$6=0.999989986419678;X.defaultAlpha=1;X.$a=new X(255,255,255,1);X.$7=new RegExp('#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})','i');X.$8=new RegExp('rgb\\((\\d+), ?(\\d+), ?(\\d+)\\)','i');X.$9=new RegExp('rgba\\((\\d+), ?(\\d+), ?(\\d+), ?(\\d+|0\\.\\d+|1\\.0)\\)','i');X.$b=null})();(function(){db.removeUndefinedBoolsOnSwapCopy=true;db.$0=null;db.$1=null})();(function(){fL.unknownFieldMarker='~~~???~~~';fL.noLocalSummary='...';fL.invalidTupleId=0;fL.$8=new RegExp('(\\r|\\n)','g')})();(function(){fY.guid='';fY.parentID='';fY.$0=''})();(function(){dL.extract=0;dL.subscription=1})();(function(){er.$1=false;er.$2=false;er.$1$1=null;er.$1$2=null})();(function(){bg.$0=null})();(function(){cd.nameOfMeasuresColumn=':Measure Names';cd.nameOfMeasureValuesColumn='Multiple Values'})();(function(){bX.onTabSelect='onTabSelect';bX.onDoLaunchAuthoring='onDoLaunchAuthoring';bX.newGuid='newGuid';bX.newLayoutId='newLayoutId';bX.activeViewChanged='activeViewChanged';bX.invalidate='invalidate';bX.hoverChanged='hoverChanged';bX.stateChanged='stateChanged';bX.layoutUpdated='layoutUpdated';bX.refreshLayoutModel='refreshLayoutModel';bX.sheetDataChanged='sheetDataChanged';bX.refreshSheetInfo='refreshSheetInfo';bX.refreshFilterModel='refreshFilterModel';bX.viewChanged='viewChanged';bX.refreshVisualModel='refreshVisualModel';bX.refreshLegacyLegendImages='refreshLegacyLegendImages';bX.refreshMenuModel='refreshMenuModel';bX.selectionChanged='selectionChanged';bX.fieldSelectionChanged='fieldSelectionChanged';bX.onBootstrapSuccess='onBootstrapSuccess';bX.openActionUrl='openActionUrl';bX.modifierKeysChanged='modifierKeysChanged';bX.closeMenus='close-menus';bX.$0={};var e=0;var gc=ss.getEnumerator(Object.keys(bY.prototype));try{while(gc.moveNext()){var gd=gc.current();bX.$0[gd]=e++}}finally{gc.dispose()}})();(function(){fN.$7=':retry';fN.$5=':original_view';fN.$8=':showSaveAs';fN.$4=':jsdebug';fN.$6=':render';fN.$3=':app';fN.$b=[':app',':jsdebug',':render'];fN.$d=ss.mkdict(['authoring',2,'authoringNewWorkbook',3,'views',1,'vizql/showadminview',4,'shared',5]);fN.$c=[':bootstrapWhenNotified'];fN.$9={};fN.$a={};var e=function(gc,gd){for(var ge=gc;ge<=gd;ge++){var gf=String.fromCharCode(ge);fN.$a[gf]=gf}};e(97,122);e(65,90);e(48,57);e(95,95);e(45,46)})();(function(){bI.$0=false})();(function(){fr.$0={};fr.$0['TQRC_DRILL_DOWN']='others/DrillDown.png';fr.$0['TQRC_DRILL_DOWN_AB']='AuthBeauty/vizTooltips/Tooltip_Action_Down.png';fr.$0['TQRC_DRILL_DOWN_AB_2X']='AuthBeauty/vizTooltips/Tooltip_Action_Down@2x.png';fr.$0['TQRC_DRILL_DOWN_ACTIVE']='AuthBeauty/vizTooltips/Tooltip_Action_Down_Active.png';fr.$0['TQRC_DRILL_DOWN_ACTIVE_2X']='AuthBeauty/vizTooltips/Tooltip_Action_Down_Active@2x.png';fr.$0['TQRC_DRILL_UP']='others/DrillUp.png';fr.$0['TQRC_DRILL_UP_AB']='AuthBeauty/vizTooltips/Tooltip_Action_Up.png';fr.$0['TQRC_DRILL_UP_AB_2x']='AuthBeauty/vizTooltips/Tooltip_Action_Up@2x.png';fr.$0['TQRC_DRILL_UP_ACTIVE']='AuthBeauty/vizTooltips/Tooltip_Action_Up_Active.png';fr.$0['TQRC_DRILL_UP_ACTIVE_2x']='AuthBeauty/vizTooltips/Tooltip_Action_Up_Action@2x.png';fr.$0['TQRC_EXCLUDE']='others/Exclude.png';fr.$0['TQRC_EXCLUDE_2X']='others/Exclude@2x.png';fr.$0['TQRC_EXCLUDE_AB']='AuthBeauty/vizTooltips/Tooltip_Exclude.png';fr.$0['TQRC_EXCLUDE_AB_2X']='AuthBeauty/vizTooltips/Tooltip_Exclude@2x.png';fr.$0['TQRC_EXCLUDE_ACTIVE']='AuthBeauty/vizTooltips/Tooltip_Exclude_Active.png';fr.$0['TQRC_EXCLUDE_ACTIVE_2X']='AuthBeauty/vizTooltips/Tooltip_Exclude_Active@2x.png';fr.$0['TQRC_KEEP_ONLY']='others/KeepOnly.png';fr.$0['TQRC_KEEP_ONLY_2X']='others/KeepOnly@2x.png';fr.$0['TQRC_KEEP_ONLY_AB']='AuthBeauty/vizTooltips/Tooltip_KeepOnly.png';fr.$0['TQRC_KEEP_ONLY_AB_2X']='AuthBeauty/vizTooltips/Tooltip_KeepOnly@2x.png';fr.$0['TQRC_KEEP_ONLY_ACTIVE']='AuthBeauty/vizTooltips/Tooltip_KeepOnly_Active.png';fr.$0['TQRC_KEEP_ONLY_ACTIVE_2X']='AuthBeauty/vizTooltips/Tooltip_KeepOnly_Active@2x.png';fr.$0['TQRC_MERGE']='others/Merge.png';fr.$0['TQRC_MERGE_2X']='others/Merge@2x.png';fr.$0['TQRC_MERGE_AB']='AuthBeauty/vizTooltips/Tooltip_Group.png';fr.$0['TQRC_MERGE_AB_2X']='AuthBeauty/vizTooltips/Tooltip_Group@2x.png';fr.$0['TQRC_MERGE_ACTIVE']='AuthBeauty/vizTooltips/Tooltip_Group_Active.png';fr.$0['TQRC_MERGE_ACTIVE_2X']='AuthBeauty/vizTooltips/Tooltip_Group_Active@2x.png';fr.$0['TQRC_VIEWDATA']='others/ViewData.png';fr.$0['TQRC_VIEWDATA_AB']='AuthBeauty/vizTooltips/Tooltip_ViewData.png';fr.$0['TQRC_VIEWDATA_ACTIVE']='AuthBeauty/vizTooltips/Tooltip_ViewData_Active.png';fr.$0['TQRC_SORT_ASCENDING']='others/SortAscending.png';fr.$0['TQRC_SORT_ASCENDING_2X']='others/SortAscending@2x.png';fr.$0['TQRC_SORT_ASCENDING_AB']='AuthBeauty/vizTooltips/Tooltip_SortAscending.png';fr.$0['TQRC_SORT_ASCENDING_AB_2X']='AuthBeauty/vizTooltips/Tooltip_Sort_Ascending@2x.png';fr.$0['TQRC_SORT_ASCENDING_ACTIVE']='AuthBeauty/vizTooltips/Tooltip_SortAscending_Active.png';fr.$0['TQRC_SORT_ASCENDING_ACTIVE_2X']='AuthBeauty/vizTooltips/Tooltip_Sort_Ascending_Active@2x.png';fr.$0['TQRC_SORT_DESCENDING']='others/SortDescending.png';fr.$0['TQRC_SORT_DESCENDING_2X']='others/SortDescending@2x.png';fr.$0['TQRC_SORT_DESCENDING_AB']='AuthBeauty/vizTooltips/Tooltip_SortDescending.png';fr.$0['TQRC_SORT_DESCENDING_AB_2X']='AuthBeauty/vizTooltips/Tooltip_Sort_Descending@2x.png';fr.$0['TQRC_SORT_DESCENDING_ACTIVE']='AuthBeauty/vizTooltips/Tooltip_SortDescending_Active.png';fr.$0['TQRC_SORT_DESCENDING_ACTIVE_2X']='AuthBeauty/vizTooltips/Tooltip_Sort_Descending_Active@2x.png';fr.$0['TQRC_SPLIT']='others/Split.png';fr.$0['TQRC_SPLIT_2X']='others/Split@2x.png';fr.$0['TQRC_SPLIT_AB']='AuthBeauty/vizTooltips/Tooltip_Split.png';fr.$0['TQRC_SPLIT_AB_2X']='AuthBeauty/vizTooltips/Tooltip_Split@2x.png';fr.$0['TQRC_SPLIT_ACTIVE']='AuthBeauty/vizTooltips/Tooltip_Split_Active.png';fr.$0['TQRC_SPLIT_ACTIVE_2X']='AuthBeauty/vizTooltips/Tooltip_Split_Active@2x.png';fr.$0['TQRC_SHOWME_BIN']='showme/bin.png';fr.$0['TQRC_SHOWME_BIN_2X']='showme/bin@2x.png';fr.$0['TQRC_SHOWME_CLOSE']='showme/close.png';fr.$0['TQRC_SHOWME_CLOSE_2X']='showme/close@2x.png';fr.$0['TQRC_SHOWME_CLOSE_AB']='AuthBeauty/showme/close.png';fr.$0['TQRC_SHOWME_CLOSE_2X_AB']='AuthBeauty/showme/close@2x.png';fr.$0['TQRC_SHOWME_CLOSE_PRESS']='AuthBeauty/showme/Close_Press.png';fr.$0['TQRC_SHOWME_CLOSE_PRESS_2X']='AuthBeauty/showme/Close_Press@2x.png';fr.$0['TQRC_SHOWME_DATE']='showme/date.png';fr.$0['TQRC_SHOWME_DATE_2X']='showme/date@2x.png';fr.$0['TQRC_SHOWME_GEO']='showme/geo.png';fr.$0['TQRC_SHOWME_GEO_2X']='showme/geo@2x.png';fr.$0['TQRC_SHOWME_GLOW']='showme/glow.png';fr.$0['TQRC_SHOWME_GLOW_2X']='showme/glow@2x.png';fr.$0['TQRC_SHOWME_GRIPPER']='showme/gripper.png';fr.$0['TQRC_SHOWME_GRIPPER_2X']='showme/gripper@2x.png';fr.$0['TQRC_SHOWME_SHOWME']='showme/showme.png';fr.$0['TQRC_SHOWME_SHOWME_2X']='showme/showme@2x.png';fr.$0['TQRC_SHOWME_TITLE_BACKGROUND_HOVER']='showme/Title-background-hover.png';fr.$0['TQRC_SHOWME_TITLE_BACKGROUND_HOVER_2X']='showme/Title-background-hover@2x.png';fr.$0['TQRC_SHOWME_TITLE_BACKGROUND_REST']='showme/Title-background-rest.png';fr.$0['TQRC_SHOWME_TITLE_BACKGROUND_REST_2X']='showme/Title-background-rest@2x.png';fr.$0['TQRC_SHOWME_AREAMEAS']='showme/ShowMe_AreaContinuous.png';fr.$0['TQRC_SHOWME_AREADIM']='showme/ShowMe_AreaDiscrete.png';fr.$0['TQRC_SHOWME_FILLEDMAPS']='showme/ShowMe_AreaMap.png';fr.$0['TQRC_SHOWME_BOXPLOT']='showme/ShowMe_BoxAndWhisker.png';fr.$0['TQRC_SHOWME_BUBBLE']='showme/ShowMe_Bubble.png';fr.$0['TQRC_SHOWME_BULLET']='showme/ShowMe_Bullett.png';fr.$0['TQRC_SHOWME_CIRCLE']='showme/ShowMe_Circles.png';fr.$0['TQRC_SHOWME_BARLINE']='showme/ShowMe_DualCombination.png';fr.$0['TQRC_SHOWME_DUALLINE']='showme/ShowMe_DualLine.png';fr.$0['TQRC_SHOWME_GANTT']='showme/ShowMe_Gantt.png';fr.$0['TQRC_SHOWME_HEATMAP']='showme/ShowMe_HeatMap.png';fr.$0['TQRC_SHOWME_SPOTTABLE']='showme/ShowMe_HighlightTable.png';fr.$0['TQRC_SHOWME_HISTOGRAM']='showme/ShowMe_Histogram.png';fr.$0['TQRC_SHOWME_BARHORIZONTAL']='showme/ShowMe_HorizontalBars.png';fr.$0['TQRC_SHOWME_LINEMEAS']='showme/ShowMe_LinesContinuous.png';fr.$0['TQRC_SHOWME_LINEDIM']='showme/ShowMe_LinesDiscrete.png';fr.$0['TQRC_SHOWME_PIES']='showme/ShowMe_Pie.png';fr.$0['TQRC_SHOWME_SCATSING']='showme/ShowMe_Scatter.png';fr.$0['TQRC_SHOWME_BARSIDEBY']='showme/ShowMe_SideBySideBars.png';fr.$0['TQRC_SHOWME_CIRCLESIDEBYSIDE']='showme/ShowMe_SideBySideCircles.png';fr.$0['TQRC_SHOWME_BARSTACKED']='showme/ShowMe_StackedBars.png';fr.$0['TQRC_SHOWME_MAPS']='showme/ShowMe_SymbolMap.png';fr.$0['TQRC_SHOWME_TEXTTABLE']='showme/ShowMe_TextTable.png';fr.$0['TQRC_SHOWME_TREEMAP']='showme/ShowMe_TreeMap.png';fr.$0['TQRC_SHOWME_AREAMEAS_2X']='showme/ShowMe_AreaContinuous@2x.png';fr.$0['TQRC_SHOWME_AREADIM_2X']='showme/ShowMe_AreaDiscrete@2x.png';fr.$0['TQRC_SHOWME_FILLEDMAPS_2X']='showme/ShowMe_AreaMap@2x.png';fr.$0['TQRC_SHOWME_BOXPLOT_2X']='showme/ShowMe_BoxAndWhisker@2x.png';fr.$0['TQRC_SHOWME_BUBBLE_2X']='showme/ShowMe_Bubble@2x.png';fr.$0['TQRC_SHOWME_BULLET_2X']='showme/ShowMe_Bullett@2x.png';fr.$0['TQRC_SHOWME_CIRCLE_2X']='showme/ShowMe_Circles@2x.png';fr.$0['TQRC_SHOWME_BARLINE_2X']='showme/ShowMe_DualCombination@2x.png';fr.$0['TQRC_SHOWME_DUALLINE_2X']='showme/ShowMe_DualLine@2x.png';fr.$0['TQRC_SHOWME_GANTT_2X']='showme/ShowMe_Gantt@2x.png';fr.$0['TQRC_SHOWME_HEATMAP_2X']='showme/ShowMe_HeatMap@2x.png';fr.$0['TQRC_SHOWME_SPOTTABLE_2X']='showme/ShowMe_HighlightTable@2x.png';fr.$0['TQRC_SHOWME_HISTOGRAM_2X']='showme/ShowMe_Histogram@2x.png';fr.$0['TQRC_SHOWME_BARHORIZONTAL_2X']='showme/ShowMe_HorizontalBars@2x.png';fr.$0['TQRC_SHOWME_LINEDIM_2X']='showme/ShowMe_LinesDiscrete@2x.png';fr.$0['TQRC_SHOWME_LINEMEAS_2X']='showme/ShowMe_LinesContinuous@2x.png';fr.$0['TQRC_SHOWME_PIES_2X']='showme/ShowMe_Pie@2x.png';fr.$0['TQRC_SHOWME_SCATSING_2X']='showme/ShowMe_Scatter@2x.png';fr.$0['TQRC_SHOWME_BARSIDEBY_2X']='showme/ShowMe_SideBySideBars@2x.png';fr.$0['TQRC_SHOWME_CIRCLESIDEBYSIDE_2X']='showme/ShowMe_SideBySideCircles@2x.png';fr.$0['TQRC_SHOWME_BARSTACKED_2X']='showme/ShowMe_StackedBars@2x.png';fr.$0['TQRC_SHOWME_MAPS_2X']='showme/ShowMe_SymbolMap@2x.png';fr.$0['TQRC_SHOWME_TEXTTABLE_2X']='showme/ShowMe_TextTable@2x.png';fr.$0['TQRC_SHOWME_TREEMAP_2X']='showme/ShowMe_TreeMap@2x.png';fr.$0['TQRC_SHOWME_1_BARSTACKED']='showme/enabled/BarStacked.png';fr.$0['TQRC_SHOWME_1_BARSIDEBY']='showme/enabled/BarSideBySide.png';fr.$0['TQRC_SHOWME_1_BARHORIZONTAL']='showme/enabled/BarHorizontal.png';fr.$0['TQRC_SHOWME_1_BARLINE']='showme/enabled/BarLine.png';fr.$0['TQRC_SHOWME_1_CIRCLE']='showme/enabled/Circle.png';fr.$0['TQRC_SHOWME_1_CIRCLESIDEBYSIDE']='showme/enabled/CircleSideBySide.png';fr.$0['TQRC_SHOWME_1_GANTT']='showme/enabled/Gantt.png';fr.$0['TQRC_SHOWME_1_HEATMAP']='showme/enabled/HeatMap.png';fr.$0['TQRC_SHOWME_1_HISTOGRAM']='showme/enabled/Histogram.png';fr.$0['TQRC_SHOWME_1_LINEDIM']='showme/enabled/LineDimension.png';fr.$0['TQRC_SHOWME_1_LINEMEAS']='showme/enabled/LineMeasure.png';fr.$0['TQRC_SHOWME_1_AREAMEAS']='showme/enabled/FilledLineContinuous.png';fr.$0['TQRC_SHOWME_1_AREADIM']='showme/enabled/FilledLineDiscrete.png';fr.$0['TQRC_SHOWME_1_SCATSING']='showme/enabled/ScatterSingle.png';fr.$0['TQRC_SHOWME_1_TEXTTABLE']='showme/enabled/TextTable.png';fr.$0['TQRC_SHOWME_1_SPOTTABLE']='showme/enabled/SpotTable.png';fr.$0['TQRC_SHOWME_1_MAPS']='showme/enabled/Maps.png';fr.$0['TQRC_SHOWME_1_FILLEDMAPS']='showme/enabled/FilledMaps.png';fr.$0['TQRC_SHOWME_1_PIES']='showme/enabled/Pies.png';fr.$0['TQRC_SHOWME_1_DUALLINE']='showme/enabled/DualAxis.png';fr.$0['TQRC_SHOWME_1_BULLET']='showme/enabled/Bullet.png';fr.$0['TQRC_SHOWME_1_TREEMAP']='showme/enabled/Treemap.png';fr.$0['TQRC_SHOWME_1_BUBBLE']='showme/enabled/Bubble.png';fr.$0['TQRC_SHOWME_1_BOXPLOT']='showme/enabled/Boxplot.png';fr.$0['TQRC_SHOWME_1_BARSTACKED_2X']='showme/enabled/BarStacked@2x.png';fr.$0['TQRC_SHOWME_1_BARSIDEBY_2X']='showme/enabled/BarSideBySide@2x.png';fr.$0['TQRC_SHOWME_1_BARHORIZONTAL_2X']='showme/enabled/BarHorizontal@2x.png';fr.$0['TQRC_SHOWME_1_BARLINE_2X']='showme/enabled/BarLine@2x.png';fr.$0['TQRC_SHOWME_1_CIRCLE_2X']='showme/enabled/Circle@2x.png';fr.$0['TQRC_SHOWME_1_CIRCLESIDEBYSIDE_2X']='showme/enabled/CircleSideBySide@2x.png';fr.$0['TQRC_SHOWME_1_GANTT_2X']='showme/enabled/Gantt@2x.png';fr.$0['TQRC_SHOWME_1_HEATMAP_2X']='showme/enabled/HeatMap@2x.png';fr.$0['TQRC_SHOWME_1_HISTOGRAM_2X']='showme/enabled/Histogram@2x.png';fr.$0['TQRC_SHOWME_1_LINEDIM_2X']='showme/enabled/LineDimension@2x.png';fr.$0['TQRC_SHOWME_1_LINEMEAS_2X']='showme/enabled/LineMeasure@2x.png';fr.$0['TQRC_SHOWME_1_AREAMEAS_2X']='showme/enabled/FilledLineContinuous@2x.png';fr.$0['TQRC_SHOWME_1_AREADIM_2X']='showme/enabled/FilledLineDiscrete@2x.png';fr.$0['TQRC_SHOWME_1_SCATSING_2X']='showme/enabled/ScatterSingle@2x.png';fr.$0['TQRC_SHOWME_1_TEXTTABLE_2X']='showme/enabled/TextTable@2x.png';fr.$0['TQRC_SHOWME_1_SPOTTABLE_2X']='showme/enabled/SpotTable@2x.png';fr.$0['TQRC_SHOWME_1_MAPS_2X']='showme/enabled/Maps@2x.png';fr.$0['TQRC_SHOWME_1_FILLEDMAPS_2X']='showme/enabled/FilledMaps@2x.png';fr.$0['TQRC_SHOWME_1_PIES_2X']='showme/enabled/Pies@2x.png';fr.$0['TQRC_SHOWME_1_DUALLINE_2X']='showme/enabled/DualAxis@2x.png';fr.$0['TQRC_SHOWME_1_BULLET_2X']='showme/enabled/Bullet@2x.png';fr.$0['TQRC_SHOWME_1_TREEMAP_2X']='showme/enabled/Treemap@2x.png';fr.$0['TQRC_SHOWME_1_BUBBLE_2X']='showme/enabled/Bubble@2x.png';fr.$0['TQRC_SHOWME_1_BOXPLOT_2X']='showme/enabled/Boxplot@2x.png';fr.$0['TQRC_SHOWME_0_BARSTACKED']='showme/disabled/BarStacked.png';fr.$0['TQRC_SHOWME_0_BARSIDEBY']='showme/disabled/BarSideBySide.png';fr.$0['TQRC_SHOWME_0_BARHORIZONTAL']='showme/disabled/BarHorizontal.png';fr.$0['TQRC_SHOWME_0_BARLINE']='showme/disabled/BarLine.png';fr.$0['TQRC_SHOWME_0_CIRCLE']='showme/disabled/Circle.png';fr.$0['TQRC_SHOWME_0_CIRCLESIDEBYSIDE']='showme/disabled/CircleSideBySide.png';fr.$0['TQRC_SHOWME_0_GANTT']='showme/disabled/Gantt.png';fr.$0['TQRC_SHOWME_0_HEATMAP']='showme/disabled/HeatMap.png';fr.$0['TQRC_SHOWME_0_HISTOGRAM']='showme/disabled/Histogram.png';fr.$0['TQRC_SHOWME_0_LINEDIM']='showme/disabled/LineDimension.png';fr.$0['TQRC_SHOWME_0_LINEMEAS']='showme/disabled/LineMeasure.png';fr.$0['TQRC_SHOWME_0_AREAMEAS']='showme/disabled/FilledLineContinuous.png';fr.$0['TQRC_SHOWME_0_AREADIM']='showme/disabled/FilledLineDiscrete.png';fr.$0['TQRC_SHOWME_0_SCATSING']='showme/disabled/ScatterSingle.png';fr.$0['TQRC_SHOWME_0_TEXTTABLE']='showme/disabled/TextTable.png';fr.$0['TQRC_SHOWME_0_SPOTTABLE']='showme/disabled/SpotTable.png';fr.$0['TQRC_SHOWME_0_MAPS']='showme/disabled/Maps.png';fr.$0['TQRC_SHOWME_0_FILLEDMAPS']='showme/disabled/FilledMaps.png';fr.$0['TQRC_SHOWME_0_PIES']='showme/disabled/Pies.png';fr.$0['TQRC_SHOWME_0_DUALLINE']='showme/disabled/DualAxis.png';fr.$0['TQRC_SHOWME_0_BULLET']='showme/disabled/Bullet.png';fr.$0['TQRC_SHOWME_0_TREEMAP']='showme/disabled/Treemap.png';fr.$0['TQRC_SHOWME_0_BUBBLE']='showme/disabled/Bubble.png';fr.$0['TQRC_SHOWME_0_BOXPLOT']='showme/disabled/Boxplot.png';fr.$0['TQRC_SHOWME_0_BARSTACKED_2X']='showme/disabled/BarStacked@2x.png';fr.$0['TQRC_SHOWME_0_BARSIDEBY_2X']='showme/disabled/BarSideBySide@2x.png';fr.$0['TQRC_SHOWME_0_BARHORIZONTAL_2X']='showme/disabled/BarHorizontal@2x.png';fr.$0['TQRC_SHOWME_0_BARLINE_2X']='showme/disabled/BarLine@2x.png';fr.$0['TQRC_SHOWME_0_CIRCLE_2X']='showme/disabled/Circle@2x.png';fr.$0['TQRC_SHOWME_0_CIRCLESIDEBYSIDE_2X']='showme/disabled/CircleSideBySide@2x.png';fr.$0['TQRC_SHOWME_0_GANTT_2X']='showme/disabled/Gantt@2x.png';fr.$0['TQRC_SHOWME_0_HEATMAP_2X']='showme/disabled/HeatMap@2x.png';fr.$0['TQRC_SHOWME_0_HISTOGRAM_2X']='showme/disabled/Histogram@2x.png';fr.$0['TQRC_SHOWME_0_LINEDIM_2X']='showme/disabled/LineDimension@2x.png';fr.$0['TQRC_SHOWME_0_LINEMEAS_2X']='showme/disabled/LineMeasure@2x.png';fr.$0['TQRC_SHOWME_0_AREAMEAS_2X']='showme/disabled/FilledLineContinuous@2x.png';fr.$0['TQRC_SHOWME_0_AREADIM_2X']='showme/disabled/FilledLineDiscrete@2x.png';fr.$0['TQRC_SHOWME_0_SCATSING_2X']='showme/disabled/ScatterSingle@2x.png';fr.$0['TQRC_SHOWME_0_TEXTTABLE_2X']='showme/disabled/TextTable@2x.png';fr.$0['TQRC_SHOWME_0_SPOTTABLE_2X']='showme/disabled/SpotTable@2x.png';fr.$0['TQRC_SHOWME_0_MAPS_2X']='showme/disabled/Maps@2x.png';fr.$0['TQRC_SHOWME_0_FILLEDMAPS_2X']='showme/disabled/FilledMaps@2x.png';fr.$0['TQRC_SHOWME_0_PIES_2X']='showme/disabled/Pies@2x.png';fr.$0['TQRC_SHOWME_0_DUALLINE_2X']='showme/disabled/DualAxis@2x.png';fr.$0['TQRC_SHOWME_0_BULLET_2X']='showme/disabled/Bullet@2x.png';fr.$0['TQRC_SHOWME_0_TREEMAP_2X']='showme/disabled/Treemap@2x.png';fr.$0['TQRC_SHOWME_0_BUBBLE_2X']='showme/disabled/Bubble@2x.png';fr.$0['TQRC_SHOWME_0_BOXPLOT_2X']='showme/disabled/Boxplot@2x.png';fr.$0['TQRC_TREE_MINUS']='others/TreeMinus.png';fr.$0['TQRC_TREE_MINUS_2X']='others/TreeMinus@2x.png';fr.$0['TQRC_TREE_PLUS']='others/TreePlus.png';fr.$0['TQRC_TREE_PLUS_2X']='others/TreePlus@2x.png';fr.$0['TQRC_ANALYTICSPANE_DROP_TABLE']='analyticspane/drop/table.png';fr.$0['TQRC_ANALYTICSPANE_DROP_PANE']='analyticspane/drop/pane.png';fr.$0['TQRC_ANALYTICSPANE_DROP_CELL']='analyticspane/drop/cell.png';fr.$0['TQRC_ANALYTICSPANE_DROP_LINEAR']='analyticspane/drop/trend-linear.png';fr.$0['TQRC_ANALYTICSPANE_DROP_POLY']='analyticspane/drop/trend-polynomial.png';fr.$0['TQRC_ANALYTICSPANE_DROP_LOG']='analyticspane/drop/trend-logarithmic.png';fr.$0['TQRC_ANALYTICSPANE_DROP_EXP']='analyticspane/drop/trend-exponential.png';fr.$0['TQRC_ANALYTICSPANE_DROP_SUBTOTAL']='analyticspane/drop/sub-total.png';fr.$0['TQRC_ANALYTICSPANE_DROP_COLUMN']='analyticspane/drop/column-total.png';fr.$0['TQRC_ANALYTICSPANE_DROP_ROW']='analyticspane/drop/row-total.png';fr.$0['TQRC_ANALYTICSPANE_DROP_FORECAST']='analyticspane/drop/forecast.png';fr.$0['TQRC_ANALYTICSPANE_DROP_CLUSTER']='analyticspane/drop/cluster.png';fr.$0['TQRC_ANALYTICSPANE_DROP_OUTLIER']='analyticspane/drop/outliers.png';fr.$0['TQRC_ANALYTICSPANE_REFLINE']='analyticspane/refline.png';fr.$0['TQRC_ANALYTICSPANE_REFBAND']='analyticspane/refband.png';fr.$0['TQRC_ANALYTICSPANE_DISTBAND']='analyticspane/distband.png';fr.$0['TQRC_ANALYTICSPANE_BOXPLOT']='analyticspane/boxplot.png';fr.$0['TQRC_ANALYTICSPANE_TOTAL']='analyticspane/total.png';fr.$0['TQRC_ANALYTICSPANE_TRENDLINE']='analyticspane/trendline.png';fr.$0['TQRC_ANALYTICSPANE_95ANDMEDIAN']='analyticspane/95andmedian.png';fr.$0['TQRC_ANALYTICSPANE_FORECAST']='analyticspane/forecast.png';fr.$0['TQRC_ANALYTICSPANE_CLUSTER']='analyticspane/cluster.png';fr.$0['TQRC_ANALYTICSPANE_OUTLIER']='analyticspane/outliers.png'})();(function(){be.$0='granted'})();(function(){eH.default$1=new eH(null,'')})();(function(){bo.primaryTableCalcIndex=0;bo.secondaryTableCalcIndex=1})();(function(){ec.$2='data:image/png;base64,';ec.selectionBorderSize=1;ec.$3=(tab.BrowserSupport.get_isMobile()?50:200)})();(function(){fK.tupleIdColumnName='[system:visual].[tuple_id]';fK.measureNamesColumnName='[:Measure Names]'})();(function(){cY.$1='@2x';cY.$0='rgb(255,255,255)'})();(function(){dJ.$1=new X(0,0,0,1)})();(function(){z._instance=null})();(function(){ga.$g='uqP'.toString();ga.$f='YYO'.toString();ga.$e='tLp'.toString();ga.$9='ylS'.toString();ga.$1='lDC'.toString();ga.$d='ylX'.toString();ga.$c='nud'.toString();ga.$6='C$K'.toString();ga.$8='j_S'.toString();ga.$7='cfW'.toString();ga.$b='KmA'.toString();ga.$5='wBL'.toString();ga.$h='_Ss'.toString();ga.$a='WlK'.toString();ga.$2='AEl'.toString();ga.$4='lRq'.toString();ga.$3='XIo'.toString()})();(function(){du.$4=6;du.zonesThatDeferContentCreation=['viz','size','shape','color','map','filter','paramctrl','current-page','bitmap','web','flipboard','flipboard-nav','highlighter'];du.$6=[1,2,3,4,5,6];du.$7=null;du.$5=null})();(function(){ba.$8=135;ba.$a=false;ba.$b=false;ba.$9=false;ba._instance=null})();(function(){de.visualPartToRegionMap=null;de.regionToVisualPartMap=null;de.visualPartToRegionMap={};de.visualPartToRegionMap['left-axis']='leftaxis';de.visualPartToRegionMap['right-axis']='rightaxis';de.visualPartToRegionMap['top-axis']='topaxis';de.visualPartToRegionMap['bottom-axis']='bottomaxis';de.visualPartToRegionMap['y-labels']='yheader';de.visualPartToRegionMap['x-labels']='xheader';de.regionToVisualPartMap={};de.regionToVisualPartMap['leftaxis']='left-axis';de.regionToVisualPartMap['rightaxis']='right-axis';de.regionToVisualPartMap['topaxis']='top-axis';de.regionToVisualPartMap['bottomaxis']='bottom-axis';de.regionToVisualPartMap['yheader']='y-labels';de.regionToVisualPartMap['xheader']='x-labels'})();(function(){dU.$1={}})();(function(){B.linkTarget=null;B.autoUpdate=true;B.$0=null;B.$1=null;B.$2=0;B.$3=null;B.$1=ss.mkdict(['%25',new RegExp('%','g'),'%3B',new RegExp(';','g'),'%2C',new RegExp(',','g'),'%2E',new RegExp('\\.','g'),'%2F',new RegExp('\\/','g'),'%3F',new RegExp('\\?','g'),'%2B',new RegExp('\\+','g'),'%20',new RegExp(' ','g'),'%5C',new RegExp('\\\\','g')])})();(function(){dN.$i=null;dN.$i={};dN.$i['simple']='select-options-simple';dN.$i['toggle']='select-options-toggle';dN.$i['range']='select-options-range';dN.$i['menu']='select-options-menu'})();(function(){C.$5='date-time';C.$4='all'})();(function(){u.$c=['http:','https:','mailto:','news:','gopher:','tsc:','tsl:'];u.$b=false;u.$a=false})();(function(){fz.$8=['<span style="white-space:pre"><div class="uberSelection"style="text-align:center;"><span>&nbsp;&nbsp;</span>','<span style="font-weight:bold;">','','</span><span> ','','  </span><span>','·','  </span><span>','',' </span><span>','','</span><span>',': ','</span><span style="font-weight:bold;">','','</span><span>&nbsp;&nbsp;','</span></div></span>'];fz.$9=['<div class="uberSelection"style="text-align:center;"><span></span>','<span style="font-weight:bold;"> ','',' </span><span>','','</span><div> ']})();(function(){bK.$3='badpassword';bK.$2='badoauthcredentials';bK.$4='NoAssociatedCustomOAuthKey'})();(function(){K.registerCommandInterceptors()})();(function(){dX.$0=0})();(function(){bt.$4='get_customized_views';bt.$6='set_default_customized_view';bt.$3='destroy_customized_view';bt.$5='save_customized_view';bt.$7='update_customized_view';bt.$2=tab.Logger.getLogger(bt)})();(function(){bJ.$0=null})();(function(){ca.$0=5000;ca.$1=120;ca.$2=0;if(typeof(tsConfig)==='undefined'){return}var e=tsConfig.clientErrorReportingLevel;if(!ss.isNullOrEmptyString(e)){tab.ErrorTrace.install();ca.$2=window.setInterval(ca.reportFailures,5000)}})();(function(){dj.currentPage=4294967295})();(function(){dK.blackColor=null;var e=(new X(0,0,0,1)).toRgba();dK.blackColor={};dK.blackColor['colorOverrideNone']=e;dK.blackColor['colorOverrideFog']=e;dK.blackColor['colorOverrideOpaque']=e})();(function(){fu.$1=new RegExp('^https?://[^/]+(.*)$')})()})();;
/*! BEGIN SpiffUI */
/*! iScroll v5.0.6 ~ (c) 2008-2013 Matteo Spinelli ~ http://cubiq.org/license */
var IScroll=function(n,t,i){function u(n,i){this.wrapper=typeof n=="string"?t.querySelector(n):n,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeIndicator:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var u in i)this.options[u]=i[u];this.translateZ=this.options.HWCompositing&&r.hasPerspective?" translateZ(0)":"",this.options.useTransition=r.hasTransition&&this.options.useTransition,this.options.useTransform=r.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY=this.options.eventPassthrough=="vertical"?!1:this.options.scrollY,this.options.scrollX=this.options.eventPassthrough=="horizontal"?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing=typeof this.options.bounceEasing=="string"?r.ease[this.options.bounceEasing]||r.ease.circular:this.options.bounceEasing,this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function f(n,i,r){var u=t.createElement("div"),f=t.createElement("div");return r===!0&&(u.style.cssText="position:absolute;z-index:9999",f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),f.className="iScrollIndicator",n=="h"?(r===!0&&(u.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",f.style.height="100%"),u.className="iScrollHorizontalScrollbar"):(r===!0&&(u.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",f.style.width="100%"),u.className="iScrollVerticalScrollbar"),i||(u.style.pointerEvents="none"),u.appendChild(f),u}function e(i,u){this.wrapper=typeof u.el=="string"?t.querySelector(u.el):u.el,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=i,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,speedRatioX:0,speedRatioY:0};for(var f in u)this.options[f]=u[f];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(r.addEvent(this.indicator,"touchstart",this),r.addEvent(n,"touchend",this)),this.options.disablePointer||(n.PointerEvent?(r.addEvent(this.indicator,"pointerdown",this),r.addEvent(n,"pointerup",this)):n.MSPointerEvent&&(r.addEvent(this.indicator,"MSPointerDown",this),r.addEvent(n,"MSPointerUp",this))),this.options.disableMouse||(r.addEvent(this.indicator,"mousedown",this),r.addEvent(n,"mouseup",this)))}var o=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)},r=function(){function u(n){return e===!1?!1:e===""?n:e+n.charAt(0).toUpperCase()+n.substr(1)}var r={},f=t.createElement("div").style,e=function(){for(var t=["t","webkitT","MozT","msT","OT"],i,n=0,r=t.length;n<r;n++)if(i=t[n]+"ransform",i in f)return t[n].substr(0,t[n].length-1);return!1}(),o;return r.getTime=Date.now||function(){return+new Date},r.extend=function(n,t){for(var i in t)n[i]=t[i]},r.addEvent=function(n,t,i,r){n.addEventListener(t,i,!!r)},r.removeEvent=function(n,t,i,r){n.removeEventListener(t,i,!!r)},r.momentum=function(n,t,r,u,f){var s=n-t,o=i.abs(s)/r,e,h,c=.0006;return e=n+o*o/(2*c)*(s<0?-1:1),h=o/c,e<u?(e=f?u-f/2.5*(o/8):u,s=i.abs(e-n),h=s/o):e>0&&(e=f?f/2.5*(o/8):0,s=i.abs(n)+e,h=s/o),{destination:i.round(e),duration:h}},o=u("transform"),r.extend(r,{hasTransform:o!==!1,hasPerspective:u("perspective")in f,hasTouch:"ontouchstart"in n,hasPointer:navigator.msPointerEnabled,hasTransition:u("transition")in f}),r.isAndroidBrowser=/Android/.test(n.navigator.appVersion)&&/Version\/\d/.test(n.navigator.appVersion),r.extend(r.style={},{transform:o,transitionTimingFunction:u("transitionTimingFunction"),transitionDuration:u("transitionDuration"),transformOrigin:u("transformOrigin")}),r.hasClass=function(n,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");return i.test(n.className)},r.addClass=function(n,t){if(!r.hasClass(n,t)){var i=n.className.split(" ");i.push(t),n.className=i.join(" ")}},r.removeClass=function(n,t){if(r.hasClass(n,t)){var i=new RegExp("(^|\\s)"+t+"(\\s|$)","g");n.className=n.className.replace(i," ")}},r.offset=function(n){for(var t=-n.offsetLeft,i=-n.offsetTop;n=n.offsetParent;)t-=n.offsetLeft,i-=n.offsetTop;return{left:t,top:i}},r.preventDefaultException=function(n,t){for(var i in t)if(t[i].test(n[i]))return!0;return!1},r.extend(r.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),r.extend(r.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(n){return n*(2-n)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(n){return i.sqrt(1- --n*n)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(n){var t=4;return(n=n-1)*n*((t+1)*n+t)+1}},bounce:{style:"",fn:function(n){return(n/=1)<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}},elastic:{style:"",fn:function(n){var t=.22,r=.4;return n===0?0:n==1?1:r*i.pow(2,-10*n)*i.sin((n-t/4)*2*i.PI/t)+1}}}),r.tap=function(n,i){var r=t.createEvent("Event");r.initEvent(i,!0,!0),r.pageX=n.pageX,r.pageY=n.pageY,n.target.dispatchEvent(r)},r.click=function(n){var i=n.target,r;i.tagName!="SELECT"&&i.tagName!="INPUT"&&i.tagName!="TEXTAREA"&&(r=t.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,n.view,1,i.screenX,i.screenY,i.clientX,i.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),r._constructed=!0,i.dispatchEvent(r))},r}();return u.prototype={version:"5.0.6",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(n){n.target==this.scroller&&(this._transitionTime(0),this.resetPosition(this.options.bounceTime)||this._execEvent("scrollEnd"))},_start:function(n){if((r.eventType[n.type]==1||n.button===0)&&this.enabled&&(!this.initiated||r.eventType[n.type]===this.initiated)){!this.options.preventDefault||r.isAndroidBrowser||r.preventDefaultException(n.target,this.options.preventDefaultException)||n.preventDefault();var u=n.touches?n.touches[0]:n,t;this.initiated=r.eventType[n.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.isAnimating=!1,this.startTime=r.getTime(),this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this._execEvent("scrollEnd"),this.isInTransition=!1),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=u.pageX,this.pointY=u.pageY,this._execEvent("beforeScrollStart")}},_move:function(n){if(this.enabled&&r.eventType[n.type]===this.initiated){this.options.preventDefault&&n.preventDefault();var o=n.touches?n.touches[0]:n,t=o.pageX-this.pointX,u=o.pageY-this.pointY,c=r.getTime(),f,e,s,h;if(this.pointX=o.pageX,this.pointY=o.pageY,this.distX+=t,this.distY+=u,s=i.abs(this.distX),h=i.abs(this.distY),!(c-this.endTime>300)||!(s<10)||!(h<10)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=s>h+this.options.directionLockThreshold?"h":h>=s+this.options.directionLockThreshold?"v":"n"),this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical")n.preventDefault();else if(this.options.eventPassthrough=="horizontal"){this.initiated=!1;return}u=0}else if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal")n.preventDefault();else if(this.options.eventPassthrough=="vertical"){this.initiated=!1;return}t=0}t=this.hasHorizontalScroll?t:0,u=this.hasVerticalScroll?u:0,f=this.x+t,e=this.y+u,(f>0||f<this.maxScrollX)&&(f=this.options.bounce?this.x+t/3:f>0?0:this.maxScrollX),(e>0||e<this.maxScrollY)&&(e=this.options.bounce?this.y+u/3:e>0?0:this.maxScrollY),this.directionX=t>0?-1:t<0?1:0,this.directionY=u>0?-1:u<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(f,e),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y)}}},_end:function(n){var f;if(this.enabled&&r.eventType[n.type]===this.initiated){this.options.preventDefault&&!r.preventDefaultException(n.target,this.options.preventDefaultException)&&n.preventDefault();var v=n.changedTouches?n.changedTouches[0]:n,o,s,e=r.getTime()-this.startTime,t=i.round(this.x),u=i.round(this.y),l=i.abs(t-this.startX),a=i.abs(u-this.startY),h=0,c="";if(this.scrollTo(t,u),this.isInTransition=0,this.initiated=0,this.endTime=r.getTime(),!this.resetPosition(this.options.bounceTime)){if(!this.moved){this.options.tap&&r.tap(n,this.options.tap),this.options.click&&r.click(n);return}if(this._events.flick&&e<200&&l<100&&a<100){this._execEvent("flick");return}if(this.options.momentum&&e<300&&(o=this.hasHorizontalScroll?r.momentum(this.x,this.startX,e,this.maxScrollX,this.options.bounce?this.wrapperWidth:0):{destination:t,duration:0},s=this.hasVerticalScroll?r.momentum(this.y,this.startY,e,this.maxScrollY,this.options.bounce?this.wrapperHeight:0):{destination:u,duration:0},t=o.destination,u=s.destination,h=i.max(o.duration,s.duration),this.isInTransition=1),this.options.snap&&(f=this._nearestSnap(t,u),this.currentPage=f,h=this.options.snapSpeed||i.max(i.max(i.min(i.abs(t-f.x),1e3),i.min(i.abs(u-f.y),1e3)),300),t=f.x,u=f.y,this.directionX=0,this.directionY=0,c=this.options.bounceEasing),t!=this.x||u!=this.y){(t>0||t<this.maxScrollX||u>0||u<this.maxScrollY)&&(c=r.ease.quadratic),this.scrollTo(t,u,h,c);return}this._execEvent("scrollEnd")}}},_resize:function(){var n=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){n.refresh()},this.options.resizePolling)},resetPosition:function(n){var t=this.x,i=this.y;return(n=n||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),t==this.x&&i==this.y)?!1:(this.scrollTo(t,i,n,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){var n=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=r.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(n,t){this._events[n]||(this._events[n]=[]),this._events[n].push(t)},_execEvent:function(n){if(this._events[n]){var t=0,i=this._events[n].length;if(i)for(;t<i;t++)this._events[n][t].call(this)}},scrollBy:function(n,t,i,r){n=this.x+n,t=this.y+t,i=i||0,this.scrollTo(n,t,i,r)},scrollTo:function(n,t,i,u){u=u||r.ease.circular,!i||this.options.useTransition&&u.style?(this._transitionTimingFunction(u.style),this._transitionTime(i),this._translate(n,t)):this._animate(n,t,i,u.fn)},scrollToElement:function(n,t,u,f,e){if(n=n.nodeType?n:this.scroller.querySelector(n),n){var o=r.offset(n);o.left-=this.wrapperOffset.left,o.top-=this.wrapperOffset.top,u===!0&&(u=i.round(n.offsetWidth/2-this.wrapper.offsetWidth/2)),f===!0&&(f=i.round(n.offsetHeight/2-this.wrapper.offsetHeight/2)),o.left-=u||0,o.top-=f||0,o.left=o.left>0?0:o.left<this.maxScrollX?this.maxScrollX:o.left,o.top=o.top>0?0:o.top<this.maxScrollY?this.maxScrollY:o.top,t=t===undefined||t===null||t==="auto"?i.max(i.abs(this.x-o.left),i.abs(this.y-o.top)):t,this.scrollTo(o.left,o.top,t,e)}},_transitionTime:function(n){if(n=n||0,this.scrollerStyle[r.style.transitionDuration]=n+"ms",this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTime(n)},_transitionTimingFunction:function(n){if(this.scrollerStyle[r.style.transitionTimingFunction]=n,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(n)},_translate:function(n,t){if(this.options.useTransform?this.scrollerStyle[r.style.transform]="translate("+n+"px,"+t+"px)"+this.translateZ:(n=i.round(n),t=i.round(t),this.scrollerStyle.left=n+"px",this.scrollerStyle.top=t+"px"),this.x=n,this.y=t,this.indicators)for(var u=this.indicators.length;u--;)this.indicators[u].updatePosition()},_initEvents:function(t){var i=t?r.removeEvent:r.addEvent,u=this.options.bindToWrapper?this.wrapper:n;i(n,"orientationchange",this),i(n,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(u,"mousemove",this),i(u,"mousecancel",this),i(u,"mouseup",this)),r.hasPointer&&!this.options.disablePointer&&(n.PointerEvent?(i(this.wrapper,"pointerdown",this),i(u,"pointermove",this),i(u,"pointercancel",this),i(u,"pointerup",this)):n.MSPointerEvent&&(i(this.wrapper,"MSPointerDown",this),i(u,"MSPointerMove",this),i(u,"MSPointerCancel",this),i(u,"MSPointerUp",this))),r.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(u,"touchmove",this),i(u,"touchcancel",this),i(u,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t=n.getComputedStyle(this.scroller,null),i,u;return this.options.useTransform?(t=t[r.style.transform].split(")")[0].split(", "),i=+(t[12]||t[4]),u=+(t[13]||t[5])):(i=+t.left.replace(/[^-\d]/g,""),u=+t.top.replace(/[^-\d]/g,"")),{x:i,y:u}},_initIndicators:function(){var i=this.options.interactiveScrollbars,o=typeof this.options.scrollbars!="object",u=typeof this.options.scrollbars!="string",n=[],t,r;for(this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:f("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:u,resize:this.options.resizeIndicator,listenX:!1},this.wrapper.appendChild(t.el),n.push(t)),this.options.scrollX&&(t={el:f("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:u,resize:this.options.resizeIndicator,listenY:!1},this.wrapper.appendChild(t.el),n.push(t))),this.options.indicators&&(n=n.concat(this.options.indicators)),r=n.length;r--;)this.indicators[r]=new e(this,n[r]);this.on("refresh",function(){if(this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].refresh()});this.on("destroy",function(){if(this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].destroy();delete this.indicators})},_initWheel:function(){r.addEvent(this.wrapper,"mousewheel",this),r.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){r.removeEvent(this.wrapper,"mousewheel",this),r.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(n){if(this.enabled){n.preventDefault();var f,u,t,r,e=this;if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){e._execEvent("scrollEnd")},400),"wheelDeltaX"in n)f=n.wheelDeltaX/120,u=n.wheelDeltaY/120;else if("wheelDelta"in n)f=u=n.wheelDelta/120;else if("detail"in n)f=u=-n.detail/3;else return;if(f*=this.options.mouseWheelSpeed,u*=this.options.mouseWheelSpeed,this.hasVerticalScroll||(f=u,u=0),this.options.snap){t=this.currentPage.pageX,r=this.currentPage.pageY,f>0?t--:f<0&&t++,u>0?r--:u<0&&r++,this.goToPage(t,r);return}t=this.x+i.round(this.hasHorizontalScroll?f*this.options.invertWheelDirection:0),r=this.y+i.round(this.hasVerticalScroll?u*this.options.invertWheelDirection:0),t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),r>0?r=0:r<this.maxScrollY&&(r=this.maxScrollY),this.scrollTo(t,r,0)}},_initSnap:function(){this.currentPage={},typeof this.options.snap=="string"&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap));this.on("refresh",function(){var n=0,f,e=0,h,o,s,r=0,u,c=this.options.snapStepX||this.wrapperWidth,l=this.options.snapStepY||this.wrapperHeight,t;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(o=i.round(c/2),s=i.round(l/2);r>-this.scrollerWidth;){for(this.pages[n]=[],f=0,u=0;u>-this.scrollerHeight;)this.pages[n][f]={x:i.max(r,this.maxScrollX),y:i.max(u,this.maxScrollY),width:c,height:l,cx:r-o,cy:u-s},u-=l,f++;r-=c,n++}else for(t=this.options.snap,f=t.length,h=-1;n<f;n++)(n===0||t[n].offsetLeft<=t[n-1].offsetLeft)&&(e=0,h++),this.pages[e]||(this.pages[e]=[]),r=i.max(-t[n].offsetLeft,this.maxScrollX),u=i.max(-t[n].offsetTop,this.maxScrollY),o=r-i.round(t[n].offsetWidth/2),s=u-i.round(t[n].offsetHeight/2),this.pages[e][h]={x:r,y:u,width:t[n].offsetWidth,height:t[n].offsetHeight,cx:o,cy:s},r>this.maxScrollX&&e++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}});this.on("flick",function(){var n=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,n)})},_nearestSnap:function(n,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var r=0,f=this.pages.length,u=0;if(i.abs(n-this.absStartX)<this.snapThresholdX&&i.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(n>0?n=0:n<this.maxScrollX&&(n=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);r<f;r++)if(n>=this.pages[r][0].cx){n=this.pages[r][0].x;break}for(f=this.pages[r].length;u<f;u++)if(t>=this.pages[0][u].cy){t=this.pages[0][u].y;break}return r==this.currentPage.pageX&&(r+=this.directionX,r<0?r=0:r>=this.pages.length&&(r=this.pages.length-1),n=this.pages[r][0].x),u==this.currentPage.pageY&&(u+=this.directionY,u<0?u=0:u>=this.pages[0].length&&(u=this.pages[0].length-1),t=this.pages[0][u].y),{x:n,y:t,pageX:r,pageY:u}},goToPage:function(n,t,r,u){u=u||this.options.bounceEasing,n>=this.pages.length?n=this.pages.length-1:n<0&&(n=0),t>=this.pages[n].length?t=this.pages[n].length-1:t<0&&(t=0);var f=this.pages[n][t].x,e=this.pages[n][t].y;r=r===undefined?this.options.snapSpeed||i.max(i.max(i.min(i.abs(f-this.x),1e3),i.min(i.abs(e-this.y),1e3)),300):r,this.currentPage={x:f,y:e,pageX:n,pageY:t},this.scrollTo(f,e,r,u)},next:function(n,t){var i=this.currentPage.pageX,r=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,r++),this.goToPage(i,r,n,t)},prev:function(n,t){var i=this.currentPage.pageX,r=this.currentPage.pageY;i--,i<0&&this.hasVerticalScroll&&(i=0,r--),this.goToPage(i,r,n,t)},_initKeys:function(){var u={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40},i;if(typeof this.options.keyBindings=="object")for(i in this.options.keyBindings)typeof this.options.keyBindings[i]=="string"&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in u)this.options.keyBindings[i]=this.options.keyBindings[i]||u[i];r.addEvent(n,"keydown",this);this.on("destroy",function(){r.removeEvent(n,"keydown",this)})},_key:function(n){if(this.enabled){var t=this.options.snap,u=t?this.currentPage.pageX:this.x,f=t?this.currentPage.pageY:this.y,o=r.getTime(),s=this.keyTime||0,h=.25,e;this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this.isInTransition=!1),this.keyAcceleration=o-s<200?i.min(this.keyAcceleration+h,50):0;switch(n.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?u+=t?1:this.wrapperWidth:f+=t?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?u-=t?1:this.wrapperWidth:f-=t?1:this.wrapperHeight;break;case this.options.keyBindings.end:u=t?this.pages.length-1:this.maxScrollX,f=t?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:u=0,f=0;break;case this.options.keyBindings.left:u+=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:f+=t?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:u-=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:f-=t?1:5+this.keyAcceleration>>0;break;default:return}if(t){this.goToPage(u,f);return}u>0?(u=0,this.keyAcceleration=0):u<this.maxScrollX&&(u=this.maxScrollX,this.keyAcceleration=0),f>0?(f=0,this.keyAcceleration=0):f<this.maxScrollY&&(f=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(u,f,0),this.keyTime=o}},_animate:function(n,t,i,u){function c(){var a=r.getTime(),y,p,v;if(a>=l){f.isAnimating=!1,f._translate(n,t),f.resetPosition(f.options.bounceTime)||f._execEvent("scrollEnd");return}a=(a-h)/i,v=u(a),y=(n-e)*v+e,p=(t-s)*v+s,f._translate(y,p),f.isAnimating&&o(c)}var f=this,e=this.x,s=this.y,h=r.getTime(),l=h+i;this.isAnimating=!0,c()},handleEvent:function(n){if(n.type!="MSPointerDown"&&n.type!="MSPointerMove"&&n.type!="MSPointerCancel"&&n.type!="MSPointerUp"&&n.type!="pointerdown"&&n.type!="pointermove"&&n.type!="pointercancel"&&n.type!="pointerup"||n.pointerType!="mouse"&&n.pointerType!=4)switch(n.type){case"touchstart":case"MSPointerDown":case"pointerdown":case"mousedown":this._start(n);break;case"touchmove":case"MSPointerMove":case"pointermove":case"mousemove":this._move(n);break;case"touchend":case"MSPointerUp":case"pointerup":case"mouseup":case"touchcancel":case"MSPointerCancel":case"pointercancel":case"mousecancel":this._end(n);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(n);break;case"DOMMouseScroll":case"mousewheel":this._wheel(n);break;case"keydown":this._key(n);break;case"click":n._constructed||(n.preventDefault(),n.stopPropagation())}}},e.prototype={handleEvent:function(n){switch(n.type){case"touchstart":case"MSPointerDown":case"pointerdown":case"mousedown":this._start(n);break;case"touchmove":case"MSPointerMove":case"pointermove":case"mousemove":this._move(n);break;case"touchend":case"MSPointerUp":case"pointerup":case"mouseup":case"touchcancel":case"MSPointerCancel":case"pointercancel":case"mousecancel":this._end(n)}},destroy:function(){this.options.interactive&&(r.removeEvent(this.indicator,"touchstart",this),r.removeEvent(this.indicator,"MSPointerDown",this),r.removeEvent(this.indicator,"pointerdown",this),r.removeEvent(this.indicator,"mousedown",this),r.removeEvent(n,"touchmove",this),r.removeEvent(n,"MSPointerMove",this),r.removeEvent(n,"pointermove",this),r.removeEvent(n,"mousemove",this),r.removeEvent(n,"touchend",this),r.removeEvent(n,"MSPointerUp",this),r.removeEvent(n,"pointerup",this),r.removeEvent(n,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var i=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(0),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=r.getTime(),this.options.disableTouch||r.addEvent(n,"touchmove",this),this.options.disablePointer||(n.PointerEvent?r.addEvent(n,"pointermove",this):n.MSPointerEvent&&r.addEvent(n,"MSPointerMove",this)),this.options.disableMouse||r.addEvent(n,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(n){var t=n.touches?n.touches[0]:n,i,u,f,e,o=r.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,i=t.pageX-this.lastPointX,this.lastPointX=t.pageX,u=t.pageY-this.lastPointY,this.lastPointY=t.pageY,f=this.x+i,e=this.y+u,this._pos(f,e),n.preventDefault(),n.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),r.removeEvent(n,"touchmove",this),r.removeEvent(n,"MSPointerMove",this),r.removeEvent(n,"pointermove",this),r.removeEvent(n,"mousemove",this),this.scroller.options.snap){var u=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),f=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-u.x),1e3),i.min(i.abs(this.scroller.y-u.y),1e3)),300);(this.scroller.x!=u.x||this.scroller.y!=u.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=u,this.scroller.scrollTo(u.x,u.y,f,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(n){n=n||0,this.indicatorStyle[r.style.transitionDuration]=n+"ms"},transitionTimingFunction:function(n){this.indicatorStyle[r.style.transitionTimingFunction]=n},refresh:function(){this.transitionTime(0),this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(r.addClass(this.wrapper,"iScrollBothScrollbars"),r.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(r.removeClass(this.wrapper,"iScrollBothScrollbars"),r.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));var n=this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var n=i.round(this.sizeRatioX*this.scroller.x)||0,t=i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(n<0?n=0:n>this.maxPosX&&(n=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY)),this.x=n,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[r.style.transform]="translate("+n+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=n+"px",this.indicatorStyle.top=t+"px")},_pos:function(n,t){n<0?n=0:n>this.maxPosX&&(n=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY),n=this.options.listenX?i.round(n/this.sizeRatioX):this.scroller.x,t=this.options.listenY?i.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(n,t)}},u.ease=r.ease,u}(window,document,Math);(function(){'dont use strict';var a={};global.spiff=global.spiff||{};ss.initAssembly(a,'spiffui');var b=function(dv,dw){cL.call(this,dv,dw)};b.__typeName='spiff.$0';b.$1=function(){var dv=new bH;dv.iScrollOptions={disableMouse:true,interactiveScrollbars:true,mouseWheel:true,scrollbars:'custom'};return dv};b.$0=function(dv){var dw=b.$1();dw.extraCssClass=dv.extraCssClass;dw.iScrollOptions.scrollX=dv.scrollX;dw.iScrollOptions.scrollY=dv.scrollY;return dw};var c=function(dv,dw){this.$0=null;IScroll.call(this,dv,dw);this.$0=dv};c.__typeName='spiff.$1';var d=function(){this.$a=null;this.$7=null;this.$5=null;this.$6=null;this.$1=null;this.$9=null;this.$2=false;this.$3=false;this.$4=false;dc.call(this,$("\n<div class='tabMenuItem'>\n  <div class='tabMenuItemNameArea'>\n    <span class='tabMenuItemName'/>\n  </div>\n</div>"))};d.__typeName='spiff.$2';var e=function(dv,dw){this.$6=new d;this.$6.$7=this.$6.getElementBySelector('.tabMenuItemName');this.$6.$7.text(dv);if(!dw){this.$6.get_domRoot().addClass('tabDisabled')}};e.__typeName='spiff.$3';var f=function(){this.$4=null;this.$3=null;this.$5=null;dc.call(this,$("<div class='tab-editable-text-view'><div><div class='view-mode'><span/></div><input class='edit-mode' type='text'/></div></div>"));this.$4=this.getElementBySelector('.view-mode');this.$3=this.getElementBySelector('.edit-mode');this.$5=this.$4.find('span')};f.__typeName='spiff.$4';var g=function(){this.$1=null;dc.call(this,$("<div class='tabTextInputView'><input class='tabTextInputViewInputElement' type='text'/></div>"));this.$1=this.getElementBySelector('.tabTextInputViewInputElement')};g.__typeName='spiff.$5';var h=function(){this.$2=null;this.$1=null;dc.call(this,$("<div><div class='tabTabLabels'/><div class='tabTabContentArea'/></div>"));this.$2=this.getElementBySelector('.tabTabLabels');this.$1=this.getElementBySelector('.tabTabContentArea')};h.__typeName='spiff.$6';var i=function(){dc.call(this,$("<span class='tabTabLabel' />"))};i.__typeName='spiff.$7';var j=function(dv){this.$0=null;this.$0=dv};j.__typeName='spiff.$8';var k=function(dv){this.$0=null;this.$0=dv};k.__typeName='spiff.$9';var l=function(dv){var dw=function(){this.$2$1=null;this.$2$2=ss.getDefaultValue(dv);n.call(this)};ss.registerGenericClassInstance(dw,l,[dv],{add_propsUpdated:function(dx){this.$2$1=ss.delegateCombine(this.$2$1,dx)},remove_propsUpdated:function(dx){this.$2$1=ss.delegateRemove(this.$2$1,dx)},get_props:function(){return this.$2$2},set_props:function(dx){this.$2$2=dx},updateProps:function(dx){this.set_props(dx);this.raiseActionEvent(this.$2$1)}},function(){return n},function(){return[ss.IDisposable,bP,ss.makeGenericType(bD,[dv])]});return dw};l.__typeName='spiff.BaseComponentViewModel$1';ss.initGenericClass(l,a,1);global.spiff.BaseComponentViewModel$1=l;var m=function(dv){var dw=function(dx,dy){this.$5=null;this.$6=ss.getDefaultValue(dv);du.call(this,dy.get_domRoot());tab.Param.verifyValue(dx,'viewModel');tab.Param.verifyValue(dy,'t');this.$5=dy;this.$6=dx;this.$6.add_disposed(ss.mkdel(this,this.$4));this.$6.add_propertyChanged(ss.mkdel(this,this.onViewModelPropertyChanged))};ss.registerGenericClassInstance(dw,m,[dv],{get_template:function(){return this.$5},get_rootElement:function(){return this.get_element()},get_viewModel:function(){return this.$6},dispose:function(){this.$6.remove_propertyChanged(ss.mkdel(this,this.onViewModelPropertyChanged));this.$6.remove_disposed(ss.mkdel(this,this.$4));this.$5.dispose();du.prototype.dispose.call(this)},onViewModelPropertyChanged:function(dx,dy){},$4:function(dx){this.dispose()}},function(){return du},function(){return[bq,ss.IDisposable,ss.makeGenericType(bO,[dv])]});return dw};m.__typeName='spiff.BaseView$1';ss.initGenericClass(m,a,1);global.spiff.BaseView$1=m;var n=function(){this.disposables=new tab.DisposableHolder;this.$1$1=null;this.$1$2=null};n.__typeName='spiff.BaseViewModel';global.spiff.BaseViewModel=n;var o=function(dv){this.$9='hover';this.$8='focus';this.$7='disabled';this.$6=null;this.$a=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;du.call(this,dv);this.$4()};o.__typeName='spiff.Button';global.spiff.Button=o;var p=function(dv){var dw=function(dx){React.Component.call(this,dx)};ss.registerGenericClassInstance(dw,p,[dv],{get_className:function(){var dx=['tab-UnifiedButton'];if(ss.isValue(this.props.customClassName)){dx.push(this.props.customClassName)}if(this.props.border){dx.push('bordered')}if(this.props.disabled){dx.push('disabled')}return dx.join(' ')},customContentBefore:function(){return null},render:function(){var dx={};dx.tap=ss.mkdel(this,this.$0);return bb.div(dx,{className:this.get_className(),style:this.props.buttonStyle},[this.customContentBefore(),React.DOM.span({className:'tab-Text',style:this.props.labelStyle},this.props.label)])},$0:function(dx){if(!this.props.disabled&&!ss.staticEquals(this.props.onTap,null)){this.props.onTap(dx)}}},function(){return React.Component},function(){return[]});return dw};p.__typeName='spiff.ButtonBaseComponent$1';ss.initGenericClass(p,a,1);global.spiff.ButtonBaseComponent$1=p;var q=function(dv){ss.makeGenericType(p,[Object]).call(this,dv)};q.__typeName='spiff.ButtonComponent';global.spiff.ButtonComponent=q;var r=function(){};r.__typeName='spiff.ButtonSize';global.spiff.ButtonSize=r;var s=function(dv,dw){ss.makeGenericType(cG,[bS,Object,Object]).call(this,bS.newCheckbox(dv.label,dv.initialSelected),dv,dw);this.get_widget().set_disabled(dv.disabled);this.state={selected:this.get_widget().get_selected()}};s.__typeName='spiff.CheckboxComponent';global.spiff.CheckboxComponent=s;var t=function(dv,dw,dx,dy){this.$b=null;this.$c=null;dd.call(this,dv,dw,dx,null);this.$b=dv;this.add_propertyChanged(ss.mkdel(this,this.$a));this.$c=new o(this.$b.get_searchBoxClear());this.$c.onClick(ss.mkdel(this,this.$9));this.$c.set_hoverTooltipText(dy);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_propertyChanged(ss.mkdel(this,this.$a));this.$c.dispose()})));this.$8()};t.__typeName='spiff.ClearableTextInputView';t.newClearableTextInputView=function(dv,dw,dx){var dy=new u;return new t(dy,dv,dw,dx)};global.spiff.ClearableTextInputView=t;var u=function(){this.$1=null;this.$2=null;this.$3=null;dc.call(this,$("<div class='tabTextInputView'><span class='tabClearableTextBoxClearButton'/><div class='tabTextInputViewInputElementContainer'><input class='tabTextInputViewInputElement' type='text'/></div></div>"));this.$1=this.getElementBySelector('.tabTextInputViewInputElement');this.$2=this.getElementBySelector('.tabTextInputViewInputElementContainer');this.$3=this.getElementBySelector('.tabClearableTextBoxClearButton')};u.__typeName='spiff.ClearableTextInputViewTemplate';global.spiff.ClearableTextInputViewTemplate=u;var v=function(){};v.__typeName='spiff.ClickBuster';v.add_clickBustDetected=function(dv){v.$1$1=ss.delegateCombine(v.$1$1,dv)};v.remove_clickBustDetected=function(dv){v.$1$1=ss.delegateRemove(v.$1$1,dv)};v.preventGhostClick=function(dv,dw,dx){if(!tsConfig.is_touch||!tab.BrowserSupport.get_addEventListener()){return}if(ss.isNullOrUndefined(v.$3)){v.$3=[];document.addEventListener('click',v.$0,true)}v.$3.push({item1:dv,item2:dw});window.setTimeout(v.$1,ss.coalesce(dx,600))};v.$1=function(){ss.removeAt(v.$3,0)};v.$0=function(dv){var dw=dv;var dx=$(dv.target).parents('.tabDontBustMyClicks').length>0;if(dx){return}var dy=dw.pageX;var dz=dw.pageY;for(var dA=0;dA<v.$3.length;dA++){var dB=v.$3[dA];if(Math.abs(dB.item1-dy)<25&&Math.abs(dB.item2-dz)<25){dv.stopPropagation();dv.preventDefault();if(ss.isValue(v.$1$1)){v.$1$1(dv)}}}};global.spiff.ClickBuster=v;var w=function(){this.$b=new tab.DisposableHolder;this.$e=0;this.$f=0;this.$g=null;this.$c='clickHandler'+w.$2++;this.$d=null;this.$a=null;this.$1$1=null;this.$1$2=null;this.$1$3=null};w.__typeName='spiff.ClickHandler';w.targetAndClick=function(dv,dw){return(new w).setTarget(dv).onClick(dw)};w.targetAndRightClick=function(dv,dw){return(new w).setTarget(dv).onRightClick(dw)};w.targetAndPress=function(dv,dw){return(new w).setTarget(dv).onPress(dw)};global.spiff.ClickHandler=w;var x=function(dv){ck.call(this);this.itemClass='tabMenuItemComboDropdownTheme tab-ctrl-formatted-text';this.menuClass='tabMenuComboDropdownTheme tab-ctrl-formatted-widget '+dv};x.__typeName='spiff.ComboBoxDropdownMenuTheme';global.spiff.ComboBoxDropdownMenuTheme=x;var y=function(dv,dw,dx,dy){this.$2=null;this.$3=null;this.$0=null;this.$1=null;this.$2=dv;this.$3=dw;this.$0=dx;this.$1=dy};y.__typeName='spiff.ComboBoxItem';global.spiff.ComboBoxItem=y;var z=function(){ck.call(this);this.itemClass='tabMenuItemComboTheme';this.menuClass='tabMenuComboTheme'};z.__typeName='spiff.ComboBoxMenuTheme';global.spiff.ComboBoxMenuTheme=z;var A=function(){};A.__typeName='spiff.ComboBoxMenuThemeChoice';global.spiff.ComboBoxMenuThemeChoice=A;var B=function(){};B.__typeName='spiff.ComboBoxSizing';global.spiff.ComboBoxSizing=B;var C=function(){this.icon=null;this.name=null;this.button=null;dc.call(this,$("<span class='tabComboBox tab-ctrl-formatted-widget tab-ctrl-formatted-darker-border-hover'>\n    <span class='tabComboBoxIcon'/>\n    <div class='tabComboBoxNameContainer tab-ctrl-formatted-fixedsize'><span class='tabComboBoxName'/></div>\n    <div class='tabComboBoxButtonHolder'><span class='tabComboBoxButton'/></div>\n</span>"));this.icon=this.getElementBySelector('.tabComboBoxIcon');this.name=this.getElementBySelector('.tabComboBoxName');this.button=this.getElementBySelector('.tabComboBoxButtonHolder')};C.__typeName='spiff.ComboBoxTemplate';global.spiff.ComboBoxTemplate=C;var D=function(){};D.__typeName='spiff.ComboBoxTheme';global.spiff.ComboBoxTheme=D;var E=function(dv,dw){this.clickHandler=null;this.$e=null;this.$d=null;ss.makeGenericType(m,[F]).call(this,dv,dw);this.$e=dv;this.$d=dw;this.$e.add_selectedItemChanged(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$e.remove_selectedItemChanged(ss.mkdel(this,this.$c))})));this.$e.add_itemsChanged(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$e.remove_itemsChanged(ss.mkdel(this,this.$8))})));this.$e.add_enabledChanged(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$e.remove_enabledChanged(ss.mkdel(this,this.$7))})));this.clickHandler=cZ.targetAndClick(this.$d.get_domRoot()[0],ss.mkdel(this,this.$a));if(tab.FeatureFlags.isEnabled('DashWebAuthSP2')){this.clickHandler.set_stopPropagationOnEvent(false)}this.disposables.add$1(this.clickHandler);this.$d.get_domRoot().keydown(ss.mkdel(this,this.$b));this.$d.get_domRoot().addClass(E.classesForTheme[this.$e.get_theme()]);this.$e.add_menuHidden(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$e.remove_menuHidden(ss.mkdel(this,this.$9))})));this.$c(this.$e.get_selectedItem());this.$7()};E.__typeName='spiff.ComboBoxView';global.spiff.ComboBoxView=E;var F=function(){this.$9=[];this.$c=null;this.$g=null;this.$7=null;this.$h=0;this.$b=0;this.$f=0;this.$e=true;this.$d=false;this.$8=true;this.$a='';this.$6=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=false;n.call(this)};F.__typeName='spiff.ComboBoxViewModel';F.newUnificationComboBoxViewModel=function(){var dv=new F;dv.set_theme(2);dv.set_menuTheme(2);return dv};global.spiff.ComboBoxViewModel=F;var G=function(dv){this.compositeSearchWidgetTemplate=null;this.$9=null;this.initialSearchTextInfo=null;this.$8=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;du.call(this,dv.get_domRootElement());this.compositeSearchWidgetTemplate=dv;var dw=ss.mkdel(this,this.$4);this.compositeSearchWidgetTemplate.get_clearButton().add_click(dw);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.compositeSearchWidgetTemplate.get_clearButton().remove_click(dw);this.compositeSearchWidgetTemplate.disposeTemplate()})));this.disposables.add$1(be.bindWithDispose(this.get_textInputView().get_inputElement(),'keydown',ss.mkdel(this,this.$6)));this.disposables.add$1(be.bindWithDispose(this.get_textInputView().get_inputElement(),'mousedown',ss.mkdel(this,this.$5)));this.disposables.add$1(be.bindWithDispose(this.get_textInputView().get_inputElement(),'touchstart',ss.mkdel(this,this.$5)));this.get_textInputView().get_inputElement().bind('paste',ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_textInputView().get_inputElement().unbind('paste',ss.mkdel(this,this.$7))})));this.get_textInputView().get_inputElement().attr('autocomplete','off');this.get_textInputView().get_inputElement().attr('autocorrect','off');this.get_textInputView().get_inputElement().attr('autocapitalize','off');this.get_textInputView().get_inputElement().attr('spellcheck','false')};G.__typeName='spiff.CompositeSearchWidget';global.spiff.CompositeSearchWidget=G;var H=function(){this.initialSearchText='';this.initialSearchTextDomClassName=''};H.__typeName='spiff.CompositeSearchWidgetInitialSearchTextInfo';global.spiff.CompositeSearchWidgetInitialSearchTextInfo=H;var I=function(){this.searchTextInputView=null;this.$2=null;this.$1=null;dc.call(this,$("<div class='tabCompositeSearchWidget'><div>"));this.searchTextInputView=dd.newTextInputView('','',null);this.get_textInputView().addToDom(this.get_domRoot());this.$2=bR.newNativeButton();this.$2.addClass('tabCompositeSearchWidget-SearchButton');this.get_searchButton().addToDom(this.get_domRoot());this.$1=bR.newNativeButton();this.$1.addClass('tabCompositeSearchWidget-ClearButton');this.$1.addToDom(this.get_domRoot())};I.__typeName='spiff.CompositeSearchWidgetTemplate';global.spiff.CompositeSearchWidgetTemplate=I;var J=function(dv,dw,dx,dy,dz){this.$4=null;y.call(this,dw,dx,dy,dz);this.$4=dv};J.__typeName='spiff.CustomComboBoxItem';global.spiff.CustomComboBoxItem=J;var K=function(dv,dw){this.$0=null;if(ss.isValue(dv)){this.$0=(tab.BrowserSupport.get_isIE()?dw:('url('+tableau.util.assetUrl(dv,true)+'), '+dw))}else{this.$0=dw}};K.__typeName='spiff.CustomCursor';global.spiff.CustomCursor=K;var L=function(){this.contentWindow=null;this.verticalScrollbar=null;this.verticalScrollbarIndicator=null;this.horizontalScrollbar=null;this.horizontalScrollbarIndicator=null;bI.call(this,"<div class='tabCustomScroller'>\n            <div class='tabScrollerContentWindow'><span class='tabScrollerContent'/></div>\n            <div class='tabVerticalScrollbar'><div class='tabScrollbarIndicator'/></div>\n            <div class='tabHorizontalScrollbar'><div class='tabScrollbarIndicator'/></div>\n        </div>");this.content=this.getElementBySelector('.tabScrollerContent');this.scroll=this.get_domRoot();this.contentWindow=this.getElementBySelector('.tabScrollerContentWindow');this.verticalScrollbar=this.getElementBySelector('.tabVerticalScrollbar');this.verticalScrollbarIndicator=this.getElementBySelector('.tabVerticalScrollbar .tabScrollbarIndicator');this.horizontalScrollbar=this.getElementBySelector('.tabHorizontalScrollbar');this.horizontalScrollbarIndicator=this.getElementBySelector('.tabHorizontalScrollbar .tabScrollbarIndicator')};L.__typeName='spiff.CustomIScrollTemplate';global.spiff.CustomIScrollTemplate=L;var M=function(dv){bJ.call(this,dv,new L);this.$b();this.addScroller();this.setUpEvents();this.$c()};M.__typeName='spiff.CustomIScrollView';M.$0=function(dv,dw,dx){return Math.max(ss.round(dv*dw/Math.max(dx,1)),8)};global.spiff.CustomIScrollView=M;var N=function(){this.$0=null;cd.call(this)};N.__typeName='spiff.CustomMenuItem';N.newCustomMenuItem=function(dv){var dw=new N;dw.set_domRoot(dv);return dw};global.spiff.CustomMenuItem=N;var O=function(){bI.call(this,"<div class='tabScroller'><span class='tabScrollerContent'/></div>");this.content=this.getElementBySelector('.tabScrollerContent');this.scroll=this.get_domRoot()};O.__typeName='spiff.DefaultIScrollTemplate';global.spiff.DefaultIScrollTemplate=O;var P=function(dv){this.$c=null;this.$b=null;bJ.call(this,dv,new O);this.addScroller();this.setUpEvents()};P.__typeName='spiff.DefaultIScrollView';global.spiff.DefaultIScrollView=P;var Q=function(dv,dw){this.$f=null;this.$o=null;this.$l=null;this.$d=null;this.$e=null;this.$g=false;this.$p=false;this.$m=true;this.$h=null;this.$k=null;this.$n=false;this.$i=0;this.$j=0;this.$c=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;du.call(this,$("\n<div class='tab-dialog'>\n  <div class='tab-dialogTitleBar'>\n    <span class='tab-dialogTitle' />\n    <div class='tab-dialogCloseButton'></div>\n  </div>\n  <div class='tab-dialogBodyContainer'></div>\n  <div class='tab-dialogResizer tab-icon-cv-resize-se'><div class='tab-dialogResizerHit'/></div>\n</div>\n"));this.set_titleUnescaped(dv);this.set_body(dw);this.$e=bR.newNativeButton();this.$e.add_click(ss.mkdel(this,this.$8));this.get_element().find('.tab-dialogCloseButton').append(this.$e.get_element());this.$e.tabIndex(-2);this.$f=this.get_element();this.$o=this.get_element().find('.tab-dialogTitleBar');this.$l=this.get_element().find('.tab-dialogResizer');this.set_resizeable(false);this.$f.attr('tabIndex','-1');bh.add_firstTouch(ss.mkdel(this,this.$6));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){bh.remove_firstTouch(ss.mkdel(this,this.$6))})))};Q.__typeName='spiff.Dialog';global.spiff.Dialog=Q;var R=function(dv){this.$g=null;this.$o=0;this.$p=0;this.$k=false;this.$j=false;this.$i=false;this.$n=0;this.$m=null;this.$h=null;this.$l=null;bf.call(this,dv,'discrete',true)};R.__typeName='spiff.Discrete';global.spiff.Discrete=R;var S=function(){y.call(this,null,null,null,null)};S.__typeName='spiff.DividerComboBoxItem';global.spiff.DividerComboBoxItem=S;var T=function(){};T.__typeName='spiff.DocumentBodySizeUsage';global.spiff.DocumentBodySizeUsage=T;var U=function(dv){this.$6=false;this.$8=null;this.$7=null;this.$5=false;bf.call(this,dv,'drag',true)};U.__typeName='spiff.Drag';global.spiff.Drag=U;var V=function(){};V.__typeName='spiff.DragDropManager';V.add_dragStarted=function(dv){V.$1$1=ss.delegateCombine(V.$1$1,dv)};V.remove_dragStarted=function(dv){V.$1$1=ss.delegateRemove(V.$1$1,dv)};V.add_dragMoved=function(dv){V.$1$2=ss.delegateCombine(V.$1$2,dv)};V.remove_dragMoved=function(dv){V.$1$2=ss.delegateRemove(V.$1$2,dv)};V.add_dragEnded=function(dv){V.$1$3=ss.delegateCombine(V.$1$3,dv)};V.remove_dragEnded=function(dv){V.$1$3=ss.delegateRemove(V.$1$3,dv)};V.add_currentTargetChanged=function(dv){V.$1$4=ss.delegateCombine(V.$1$4,dv)};V.remove_currentTargetChanged=function(dv){V.$1$4=ss.delegateRemove(V.$1$4,dv)};V.get_isDragging=function(){return ss.isValue(V.$j)};V.$b=function(){return tab.Logger.lazyGetLogger(V)};V.get_lastDragEvent=function(){return V.$s};V.get_currentTarget=function(){return V.$k};V.set_currentTarget=function(dv){var dw=!ss.referenceEquals(V.$k,dv);V.$k=dv;if(dw&&!ss.staticEquals(null,V.$1$4)){V.$1$4(V.$k)}};V.init=function(){V.$m=new da.$ctor1(document.body,V.$p)};V.$0=function(dv,dw){var dx=dv.get(0);var dy=dx.getAttribute('class');if(ss.isNullOrEmptyString(dy)){dx.setAttribute('class',dw);return}var dz=dy.split(' ');if(ss.indexOf(dz,dw)===-1){dx.setAttribute('class',dz.concat([dw]).join(' '))}};V.$7=function(dv,dw){var dx=dv.get(0);var dy=dx.getAttribute('class');if(ss.isNullOrEmptyString(dy)){return}var dz=dy.split(' ');var dA=ss.indexOf(dz,dw);if(dA>=0){dz.splice(dA,1);dx.setAttribute('class',dz.join(' '))}};V.attachDropTarget=function(dv,dw){V.$0(dv,'tabDropTarget');dv.data('tabDropTarget',dw)};V.removeDragTarget=function(dv){dv.removeData('tabDropTarget');V.$7(dv,'tabDropTarget')};V.isDragTarget=function(dv){return dv.hasClass('tabDropTarget')};V.attachDragSource=function(dv,dw){V.$0(dv,'tabDragSource');dv.data('tabDragSource',dw)};V.removeDragSource=function(dv){dv.removeData('tabDragSource');V.$7(dv,'tabDragSource')};V.isDragSource=function(dv){return dv.hasClass('tabDragSource')};V.$1=function(){V.$n=new X;V.$n.show();V.$o=new da.$ctor1(V.$n.get_element().get(0),V.$p)};V.$2=function(){V.$o=tab.MiscUtil.dispose$1(V.$o);V.$n=tab.MiscUtil.dispose$1(V.$n)};V.startDrag=function(dv,dw){if(ss.isNullOrUndefined(dv)||ss.isNullOrUndefined(dw)||!dv.get_hasPayload()){return}V.$s=dw;V.cancelDrag(null);V.$j=dv;V.$8(V.$j.get_dragAvatar());V.$a();V.$i=tab.WindowHelper.requestAnimationFrame(V.$a);V.$1();V.$9(dw);if(ss.isValue(V.$1$1)){V.$1$1(V.$j)}};V.cancelDrag=function(dv){if(!ss.isValue(V.$j)){return}if(ss.isNullOrUndefined(dv)||ss.referenceEquals(dv,V.$j)){V.$5(null,true,false,function(){return $.Deferred().resolve(false).promise()})}};V.drop=function(dv,dw,dx){V.$j.isCopyDrag=ss.isValue(dw)&&dw;V.$j.isShiftDrag=ss.isValue(dx)&&dx;V.$5(dv,false,V.$j.isCopyDrag,function(){if(ss.isValue(dv)){return dv.acceptDrop(V.$j).always(function(dy){})}else{V.$j.dropToNowhereAction();return $.Deferred().resolve(true).promise()}})};V.firstTouch=function(dv){var dw=$(dv.target).closest('.tabDragSource');if(ss.isNullOrUndefined(dw)||dw.length===0){V.$q=null;return}V.$q=dw.data('tabDragSource')};V.dragEnd=function(dv){if(ss.isNullOrUndefined(V.$j)){return}switch(V.$j.get_dragType()){case'dragdrop':{V.drop(V.get_currentTarget(),dv.get_isCtrlKey(),dv.shiftKey);break}case'dragmove':{V.$5(null,false,false,function(){V.$j.endDragAt(dv);return $.Deferred().resolve(true).promise()});break}}};V.dragMove=function(dv){if(ss.isNullOrUndefined(V.$j)){return}dv.preventDefault();dv.stopPropagation();V.$s=dv;V.$j.isCopyDrag=dv.get_isCtrlKey();V.$j.isShiftDrag=dv.shiftKey;tab.WindowHelper.clearSelection();var dw=tab.DateUtil.get_nowAsTime();if(dw-V.$r>75){if(ss.isValue(V.$i)){tab.WindowHelper.cancelAnimationFrame(ss.unbox(V.$i))}V.$a()}V.$9(dv);if(ss.isValue(V.$1$2)){V.$1$2(V.$j)}};V.$9=function(dv){switch(V.$j.get_dragType()){case'dragdrop':{var dw=V.findDropTarget(dv);if(ss.isValue(dw)){var dx=dw.dragOver(V.$j);while(ss.isValue(dx)&&!ss.referenceEquals(dx,dw)){dw=dx;dx=dw.dragOver(V.$j)}dw=dx}if(ss.isValue(dw)){V.setDragCursor(dw.getDropCursor(V.$j))}else{V.setDragCursor(V.$j.get_defaultDropCursor())}if(ss.isValue(V.get_currentTarget())){if(!ss.referenceEquals(V.get_currentTarget(),dw)){V.get_currentTarget().dragExit(V.$j)}else if(V.get_currentTarget().get_feedbackType()==='dropfeedbackuponentry'){return}}V.set_currentTarget(dw);break}case'dragmove':{V.$j.moveTo(dv);break}default:{break}}};V.setDragCursor=function(dv){dv.setCursor(V.$n.get_element())};V.dragStart=function(dv){if(V.get_isDragging()){return}var dw=V.$q;if(ss.isNullOrUndefined(dw)){var dx=$(dv.target).closest('.tabDragSource');dw=dx.data('tabDragSource')}if(ss.isNullOrUndefined(dw)){return}var dy=dw.startDrag(dv);if(ss.isNullOrUndefined(dy)){return}V.startDrag(dy,dv)};V.$5=function(dv,dw,dx,dy){V.$8(null);V.$2();if(ss.isValue(V.$i)){tab.WindowHelper.cancelAnimationFrame(ss.unbox(V.$i));V.$i=null}dy().always(function(dz){if(ss.isValue(V.$1$3)){V.$1$3({drag:V.$j,target:dv,dropAccepted:dz,canceled:dw,isCopyDrop:dx})}V.$j=null;V.set_currentTarget(null)})};V.$8=function(dv){if(ss.isValue(V.$l)){V.$l.get_rootElement().detach();var dw=V.$l;dw.dispose();V.$l=null}V.$l=dv;if(ss.isValue(V.$l)){V.$l.get_rootElement().addClass('dragAvatar').css('position','absolute').css('pointer-events','none').appendTo($('body'))}};V.$a=function(){if(ss.isNullOrUndefined(V.$l)){return}var dv=function(dx,dy,dz){if(dy<ss.Int32.div(dz,2)){return 0}else if(dy>dx-ss.Int32.div(dz,2)){return dx-dz}else{return dy-ss.Int32.div(dz,2)}};var dw=tab.DomUtil.get_documentBody();tab.DomUtil.setElementPosition(V.$l.get_rootElement(),dv(dw.scrollWidth,V.$s.pageX,V.$l.get_rootElement().outerWidth()),dv(dw.scrollHeight,V.$s.pageY,V.$l.get_rootElement().outerHeight()));V.$r=tab.DateUtil.get_nowAsTime();V.$i=tab.WindowHelper.requestAnimationFrame(V.$a)};V.$6=function(dv){if(ss.isValue(V.$l)&&!tab.BrowserSupport.get_pointerEvents()){V.$l.get_rootElement().hide()}V.$3();var dw=dv.clientX;var dx=dv.clientY;if(tab.BrowserSupport.get_useAlternateHitStrategy()){if(ss.isValue(dv.touches)&&dv.touches.length>0&&ss.isValue(dv.touches[0].screenX)){dw=dv.touches[0].screenX;dx=dv.touches[0].screenY}else{dw=dv.originalEvent['screenX'];dx=dv.originalEvent['screenY']}}var dy=$(document.elementFromPoint(dw,dx));if(ss.isValue(V.$l)&&!tab.BrowserSupport.get_pointerEvents()){V.$l.get_rootElement().show()}V.$4();return dy};V.$3=function(){for(var dv=0;dv<V.$t.length;dv++){var dw=V.$t[dv];dw.disableHitTests()}};V.$4=function(){for(var dv=0;dv<V.$t.length;dv++){var dw=V.$t[dv];dw.enableHitTests()}};V.findDropTarget=function(dv){var dw=V.$6(dv);var dx=dw.closest('.tabDropTarget').data('tabDropTarget');if(ss.isValue(dx)){return dx.getDropTarget(dw)}return null};V.registerDragGlass=function(dv){V.$t.push(dv)};V.unregisterDragGlass=function(dv){ss.remove(V.$t,dv)};global.spiff.DragDropManager=V;var W=function(dv,dw){this.isCopyDrag=false;this.isShiftDrag=false;this.draggedObject=null;this.$0=null;this.draggedObject=dv;this.$0=dw;this.isCopyDrag=false;this.isShiftDrag=false};W.__typeName='spiff.DragInstance';global.spiff.DragInstance=W;var X=function(dv){bg.call(this,dv);V.registerDragGlass(this)};X.__typeName='spiff.DragSafeGlass';global.spiff.DragSafeGlass=X;var Y=function(dv){this.$0=null;this.$0=dv.get_element().clone(false).addClass('dragAvatar')};Y.__typeName='spiff.DragSortListItemDragAvatar';global.spiff.DragSortListItemDragAvatar=Y;var Z=function(dv,dw){this.$4=false;React.Component.call(this,dv,dw);this.state={isSelecting:false}};Z.__typeName='spiff.DropdownComponent';global.spiff.DropdownComponent=Z;var ba=function(dv,dw,dx){this.$e=null;this.$d=false;this.$3$1=null;this.$3$2=null;this.$3$3=null;dd.call(this,dv,dw,dx,null);this.$e=dv;this.updateTextElement(dw);var dy=new o(this.get_textElement());dy.add_click(ss.mkdel(this,this.edit));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){dy.remove_click(ss.mkdel(this,this.edit));dy.dispose()})));this.$c(this.get_textElement());this.$b(this.get_inputElement());this.get_inputElement().blur(ss.mkdel(this,function(dA){this.commit()}));this.get_inputElement().keyup(ss.mkdel(this,this.$a));if(!tsConfig.is_mobile){var dz=new bp(this,null,ss.mkdel(this,function(){this.get_element().addClass('hover');this.$9(true)}),ss.mkdel(this,function(){this.get_element().removeClass('hover');this.$9(false)}));this.disposables.add$1(dz)}this.set_isEditing(false);this.stopPropogationOfInputEvents()};ba.__typeName='spiff.EditableTextView';ba.newEditableTextView=function(dv,dw){var dx=new f;return new ba(dx,dv,dw)};global.spiff.EditableTextView=ba;var bb=function(dv){this.$2=null;this.$1=null;this.$3=null;React.Component.call(this,dv,null);this.$2=db.createEmpty()};bb.__typeName='spiff.EventForwarder';bb.$0=function(dv,dw,dx,dy){var dz=new bc;dz.tagName=dv;dz.htmlAttributes=dx;dz.spec=dw;var dA=dz;if(ss.isValue(dx.ref)){dA.ref=dx.ref;delete dx['ref']}return React.createElement(bb,dA,dy)};bb.div=function(dv,dw,dx){return bb.$0('div',dv,dw,dx)};bb.span=function(dv,dw,dx){return bb.$0('span',dv,dw,dx)};bb.$1=function(dv,dw){return!_.every(Object.keys(dw),function(dx){return ss.contains(Object.keys(dv),dx)})};global.spiff.EventForwarder=bb;var bc=function(){this.tagName=null;this.htmlAttributes=null;this.spec=null};bc.__typeName='spiff.EventForwarderProps';global.spiff.EventForwarderProps=bc;var bd=function(){};bd.__typeName='spiff.EventSource';global.spiff.EventSource=bd;var be=function(){};be.__typeName='spiff.EventUtil';be.bindWithDispose=function(dv,dw,dx){var dy=ss.formatString('{0}.{1}',dw,++be.$0);dv.bind(dy,dx);return new tab.CallOnDispose(function(){dv.unbind(dy)})};be.subscribeWithDispose=function(dv,dw){var dx=dojo.subscribe(dv,dw);return new tab.CallOnDispose(function(){dojo.unsubscribe(dx)})};be.isCtrlKey=function(dv){if(ss.isNullOrUndefined(dv)){return false}return(tab.BrowserSupport.get_isMac()?dv.metaKey:dv.ctrlKey)};be.preventDefaultOnEvent=function(dv){if(ss.isNullOrUndefined(dv)){return}if(typeof(dv['preventDefault'])==='function'){dv.preventDefault()}else{dv['returnValue']=false}};global.spiff.EventUtil=be;var bf=function(dv,dw,dx,dy){this.$2=null;this.slop=5;this.numTouches=1;this.type='gesture';if(ss.isValue(dw)){this.type=dw}if(ss.isValue(dx)){this.slop=(dx?bf.defaultSlop:0)}if(ss.isValue(dy)){this.numTouches=dy}this.$2={};this.update(dv)};bf.__typeName='spiff.Gesture';bf.$0=function(dv,dw){return dv.data('tab-'+dw)};global.spiff.Gesture=bf;var bg=function(dv){this.$5=null;this.$4=null;this.$2$1=null;du.call(this,$("<div class='tab-glass clear-glass'></div>"));this.$5=dv||document.body;if(!ss.referenceEquals(this.$5,document.body)){this.get_element().css('position','absolute')}this.get_element().on('mousewheel DOMMouseScroll',function(dx){dx.preventDefault()});var dw={};da.setHandler(dw,'firstTouch',ss.mkdel(this,this.handleClick));this.$4=cZ.targetAndConfig(this.get_element()[0],dw).onClick(ss.mkdel(this,this.handleClick)).onRightClick(ss.mkdel(this,this.handleClick))};bg.__typeName='spiff.Glass';global.spiff.Glass=bg;var bh=function(){};bh.__typeName='spiff.GlobalTouchWatcher';bh.add_firstTouch=function(dv){bh.$1$1=ss.delegateCombine(bh.$1$1,dv)};bh.remove_firstTouch=function(dv){bh.$1$1=ss.delegateRemove(bh.$1$1,dv)};bh.add_press=function(dv){bh.$1$2=ss.delegateCombine(bh.$1$2,dv)};bh.remove_press=function(dv){bh.$1$2=ss.delegateRemove(bh.$1$2,dv)};bh.add_potentialTap=function(dv){bh.$1$3=ss.delegateCombine(bh.$1$3,dv)};bh.remove_potentialTap=function(dv){bh.$1$3=ss.delegateRemove(bh.$1$3,dv)};bh.add_lastTouch=function(dv){bh.$1$4=ss.delegateCombine(bh.$1$4,dv)};bh.remove_lastTouch=function(dv){bh.$1$4=ss.delegateRemove(bh.$1$4,dv)};bh.add_rightClick=function(dv){bh.$1$5=ss.delegateCombine(bh.$1$5,dv)};bh.remove_rightClick=function(dv){bh.$1$5=ss.delegateRemove(bh.$1$5,dv)};bh.add_dragEnd=function(dv){bh.$1$6=ss.delegateCombine(bh.$1$6,dv)};bh.remove_dragEnd=function(dv){bh.$1$6=ss.delegateRemove(bh.$1$6,dv)};bh.dispose=function(){bh.$6.forEach(function(dv){dojo.unsubscribe(dv)})};bh.$1=function(dv,dw){if(ss.isValue(bh.$1$1)){bh.$1$1(dv,dw)}};bh.$4=function(dv,dw){if(ss.isValue(bh.$1$2)){bh.$1$2(dv,dw)}};bh.$3=function(dv,dw){if(ss.isValue(bh.$1$3)){bh.$1$3(dv,dw)}};bh.$2=function(dv,dw){if(ss.isValue(bh.$1$4)){bh.$1$4(dv,dw)}};bh.$5=function(dv,dw){if(ss.isValue(bh.$1$5)){bh.$1$5(dv,dw)}};bh.$0=function(dv,dw){if(ss.isValue(bh.$1$6)){bh.$1$6(dv,dw)}};global.spiff.GlobalTouchWatcher=bh;var bi=function(dv){this.groupSize=0;this.$1$1=false;this.$1$2=0;this.$1$3=null;this.groupSize=dv;this.set_allSelected(false);this.$1({});this.set_selectedCount(0)};bi.__typeName='spiff.GroupSelection';bi.op_Equality=function(dv,dw){if(ss.isValue(dv)&&ss.isValue(dw)){return dv.groupSize===dw.groupSize&&dv.get_allSelected()===dw.get_allSelected()&&dv.get_selectedCount()===dw.get_selectedCount()&&_.isEqual(dv.$0(),dw.$0())}return ss.isNullOrUndefined(dv)&&ss.isNullOrUndefined(dw)};bi.op_Inequality=function(dv,dw){return!bi.op_Equality(dv,dw)};global.spiff.GroupSelection=bi;var bj=function(){};bj.__typeName='spiff.GroupSelectionExtensions';bj.toGroupSelection$1=function(dv){return function(dw,dx){var dy=new bi(dw.length);for(var dz=0;dz<dw.length;++dz){if(dx(dw[dz],dz)){dy.select(dz)}}return dy}};bj.toGroupSelection$2=function(dv){return function(dw,dx){return bj.toGroupSelection$1(dv).call(null,dw,function(dy,dz){return dx(dy)})}};bj.toGroupSelection=function(dv){return function(dw,dx){var dy=new bi(dw.length);if(dx){dy.selectAll()}return dy}};global.spiff.GroupSelectionExtensions=bj;var bk=function(){};bk.__typeName='spiff.HorizonalSpinnerDirection';global.spiff.HorizonalSpinnerDirection=bk;var bl=function(dv,dw){React.Component.call(this,dv,dw)};bl.__typeName='spiff.HorizontalSpinnerComponent';global.spiff.HorizontalSpinnerComponent=bl;var bm=function(){this.styleClass='tab-outline-spinner';this.extraCssClass=null;this.disabled=false;this.onSpinnerClicked=null};bm.__typeName='spiff.HorizontalSpinnerProps';global.spiff.HorizontalSpinnerProps=bm;var bn=function(dv){this.$a=0;this.$b=0;this.$9=true;this.$8=false;this.$7=null;this.$6=0;bf.call(this,dv,'hover',false);this.$6=(ss.isValue(dv.hoverDelay)?dv.hoverDelay:150)};bn.__typeName='spiff.Hover';global.spiff.Hover=bn;var bo=function(){};bo.__typeName='spiff.HoverAddClassBehavior';bo.attach=function(dv,dw,dx){dw=ss.coalesce(dw,'hover');return new bp(dv,dx,function(dy){bo.$0(dy,dw)},function(dy){bo.$1(dy,dw)})};bo.$0=function(dv,dw){$(dv.currentTarget).addClass(dw)};bo.$1=function(dv,dw){$(dv.currentTarget).removeClass(dw)};global.spiff.HoverAddClassBehavior=bo;var bp=function(dv,dw,dx,dy){this.$4=null;this.$5=null;this.$6=null;this.$7=null;this.$7=dv;this.$4=dw;this.$5=dx;this.$6=dy;this.$7.add_disposed(ss.mkdel(this,this.$2));if(ss.isValue(dw)){this.$7.get_element().delegate(dw,'mouseenter'+this.$3(),ss.mkdel(this,this.$0));this.$7.get_element().delegate(dw,'mouseleave'+this.$3(),ss.mkdel(this,this.$1))}else{this.$7.get_element().bind('mouseenter'+this.$3(),ss.mkdel(this,this.$0));this.$7.get_element().bind('mouseleave'+this.$3(),ss.mkdel(this,this.$1))}};bp.__typeName='spiff.HoverBehavior';global.spiff.HoverBehavior=bp;var bq=function(){};bq.__typeName='spiff.IAppendableView';global.spiff.IAppendableView=bq;var br=function(){};br.__typeName='spiff.ICompositeSearchWidgetTemplate';global.spiff.ICompositeSearchWidgetTemplate=br;var bs=function(){this.iconElement=null;o.call(this,$('<a>').addClass('tab-iconButton'));this.setEnabled(true)};bs.__typeName='spiff.IconButton';global.spiff.IconButton=bs;var bt=function(dv){React.Component.call(this,dv);this.state=this.$0()};bt.__typeName='spiff.IconButtonComponent';global.spiff.IconButtonComponent=bt;var bu=function(){this.isActive=false};bu.__typeName='spiff.IconButtonState';global.spiff.IconButtonState=bu;var bv=function(){};bv.__typeName='spiff.IDragResponder';global.spiff.IDragResponder=bv;var bw=function(){};bw.__typeName='spiff.IDragSource';global.spiff.IDragSource=bw;var bx=function(){};bx.__typeName='spiff.IDropTarget';global.spiff.IDropTarget=bx;var by=function(){};by.__typeName='spiff.IListItemContentCreator';global.spiff.IListItemContentCreator=by;var bz=function(){};bz.__typeName='spiff.IListItemDragAvatarCreator';global.spiff.IListItemDragAvatarCreator=bz;var bA=function(){};bA.__typeName='spiff.IListViewDragFeedback';global.spiff.IListViewDragFeedback=bA;var bB=function(){};bB.__typeName='spiff.IListViewScrollHandler';global.spiff.IListViewScrollHandler=bB;var bC=function(){};bC.__typeName='spiff.IMouseCaptureEventHandler';global.spiff.IMouseCaptureEventHandler=bC;var bD=function(dv){var dw=function(){};ss.registerGenericInterfaceInstance(dw,bD,[dv],{add_propsUpdated:null,remove_propsUpdated:null,get_props:null},function(){return[]});return dw};bD.__typeName='spiff.IPropsProvider$1';ss.initGenericInterface(bD,a,1);global.spiff.IPropsProvider$1=bD;var bE=function(){};bE.__typeName='spiff.IScrollable';global.spiff.IScrollable=bE;var bF=function(dv,dw){this.$2=null;React.Component.call(this,dv,dw);this.state={hovered:false,scrolling:false}};bF.__typeName='spiff.IScrollComponent';global.spiff.IScrollComponent=bF;var bG=function(){};bG.__typeName='spiff.IScroller';global.spiff.IScroller=bG;var bH=function(){this.extraCssClass=null;this.iScrollOptions=null;this.refreshDelay=0;this.keepPositionOnRecreate=true};bH.__typeName='spiff.IScrollProps';global.spiff.IScrollProps=bH;var bI=function(dv){this.content=null;this.scroll=null;dc.call(this,$(dv))};bI.__typeName='spiff.IScrollTemplate';global.spiff.IScrollTemplate=bI;var bJ=function(dv,dw){this.scrollEndCleanup=new tab.DisposableHolder;this.scroller=null;cI.call(this,dv,dw)};bJ.__typeName='spiff.IScrollView';global.spiff.IScrollView=bJ;var bK=function(){};bK.__typeName='spiff.ISelectable';global.spiff.ISelectable=bK;var bL=function(){};bL.__typeName='spiff.ITabControlTemplate';global.spiff.ITabControlTemplate=bL;var bM=function(){};bM.__typeName='spiff.ITextInputViewTemplate';global.spiff.ITextInputViewTemplate=bM;var bN=function(){};bN.__typeName='spiff.IUberPopupContent';global.spiff.IUberPopupContent=bN;var bO=function(dv){var dw=function(){};ss.registerGenericInterfaceInstance(dw,bO,[dv],{get_viewModel:null,get_rootElement:null},function(){return[ss.IDisposable]});ss.setMetadata(dw,{variance:[1]});return dw};bO.__typeName='spiff.IView$1';ss.initGenericInterface(bO,a,1);global.spiff.IView$1=bO;var bP=function(){};bP.__typeName='spiff.IViewModel';global.spiff.IViewModel=bP;var bQ=function(){};bQ.__typeName='spiff.JQueryGestureExtensions';bQ.fireTableauGesture=function(dv,dw,dx,dy){if(ss.isNullOrUndefined(dx)){var dz=new Object;dz.type='touchend';dz.timeStamp=tab.DateUtil.get_nowAsTime();dz.keyCode=null;dz.ctrlKey=false;dz.altKey=false;dz.metaKey=false;dz.shiftKey=false;dz.charOrCode=null;dz.clientX=0;dz.clientY=0;dz.touches=new Array;dz.targetTouches=new Array;dz.changedTouches=new Array;dz.target=dv;dx=dz}var dA;switch(dw){case'dragMove':case'dragStart':case'dragEnd':{dA='drag';break}case'hover':case'moving':case'mouseleave':{dA='hover';break}case'pinchStart':case'pinchMove':case'pinchEnd':{dA='pinch';break}default:{dA='discrete';break}}var dB=new ct(dx,dv);bf.$0($(dv),dA).$0(dw,dB,dy||{})};global.spiff.JQueryGestureExtensions=bQ;var bR=function(dv,dw){this.$d='.label';o.call(this,dv);this.$d=dw};bR.__typeName='spiff.LabelButton';bR.newAnchorButton=function(){return new bR($("<a href='#' class='tab-link-button'><span class='label hide'></span></a>"),'.label')};bR.newNativeButton=function(){return new bR($("<button class='tab-button' type='button'><span class='icon'></span><span class='label hide'></span></button>"),'.label')};bR.newTextButton=function(dv,dw){var dx=new bR($("<span class='tab-text-button'><span class='label hide'></span></span>"),'.label');if(ss.isValue(dv)){dx.add_click(dv);dx.disposables.add$1(new tab.CallOnDispose(function(){dx.remove_click(dv)}))}if(ss.isValue(dw)){dx.set_label(dw)}return dx};global.spiff.LabelButton=bR;var bS=function(dv,dw){this.$g='.label';de.call(this,dv);this.$g=dw};bS.__typeName='spiff.LabelToggleButton';bS.newCheckbox=function(dv,dw){var dx=bS.$0("<span class='tab-icon-toggle'><span class='icon'></span><span class='label hide'></span></span>",dv,dw);dx.get_element().addClass('tab-unification-check').find('.icon').append($("<span class='innerIcon'></span>").addClass('tab-img-check'));return dx};bS.newRadioButton=function(dv,dw){var dx=bS.$0("<span class='tab-icon-toggle'><span class='icon'></span><span class='label hide'></span></span>",dv,dw);dx.get_element().addClass('tab-unification-radio').find('.icon').append($("<span class='innerIcon'></span>"));return dx};bS.newNativeCheckbox=function(dv,dw){return bS.$0("<span class='tab-checkbox'><input type='checkbox'></input><span class='label hide'></span></span>",dv,dw)};bS.newNativeRadioButton=function(dv,dw){var dx=bS.$0("<span class='tab-radio'><input type='radio'></input><span class='label hide'></span></span>",dv,dw);dx.set_preventMouseDeselect(true);return dx};bS.newLabelToggleButton=function(dv,dw){return bS.$0("<span class='tab-icon-toggle'><span class='icon'></span><span class='label hide'></span></span>",dv,dw)};bS.$0=function(dv,dw,dx){var dy=new bS($(dv),'.label');dy.set_label(dw);dy.set_selected(dx);var dz=dy;var dA=dz.get_inputElement();if(ss.isValue(dA)){dA.click(function(dB){dB.preventDefault()})}return dz};global.spiff.LabelToggleButton=bS;var bT=function(dv,dw){var dx=function(dy,dz){React.Component.call(this,dy,dz)};ss.registerGenericClassInstance(dx,bT,[dv,dw],{render:function(){var dy=_.map(this.props.items,ss.mkdel(this,function(dz){var dA=this.getEventHandleSpecForItem(dz);if(ss.isNullOrUndefined(dA)){return React.DOM.div({className:'tabListItem'},this.buildItem(dz.data))}else{return bb.div(dA,{className:'tabListItem'},[this.buildItem(dz.data)])}}));return React.DOM.div({className:'tabList'},dy)},buildItem:null,getEventHandleSpecForItem:function(dy){return null}},function(){return React.Component},function(){return[]});return dx};bT.__typeName='spiff.ListComponent$2';ss.initGenericClass(bT,a,2);global.spiff.ListComponent$2=bT;var bU=function(dv,dw){this.$1$1=null;this.$1$2=null;this.set_parentListView(dv);this.set_draggableListItemView(dw)};bU.__typeName='spiff.ListItemDragSource';global.spiff.ListItemDragSource=bU;var bV=function(dv){this.$c=null;this.$d=null;cQ.call(this);this.set_selectionType(dv)};bV.__typeName='spiff.ListItemGroup';global.spiff.ListItemGroup=bV;var bW=function(dv,dw){this.$i=null;this.$h=null;de.call(this,bW.$0(dv));tab.Param.verifyValue(dw,'viewModel');tab.Param.verifyValue(dw.get_id(),'viewModel.Id');this.$i=dw;this.$i.add_propertyChanged(ss.mkdel(this,this.$g));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$i.remove_propertyChanged(ss.mkdel(this,this.$g))})));this.set_selectionId(dw.get_id());this.set_widgetId(dw.get_id());this.$h=dv};bW.__typeName='spiff.ListItemView';bW.$0=function(dv){var dw=$('<div/>').addClass('tab-list-item');dw.append(dv);return dw};global.spiff.ListItemView=bW;var bX=function(dv,dw,dx){this.$3=null;this.$0=null;this.$4=false;this.$1=false;this.$2=false;n.call(this);this.$3=dv;if(ss.isValue(dw)){this.$0=dw}this.$4=dx};bX.__typeName='spiff.ListItemViewModel';bX.newListItem=function(dv,dw,dx){tab.Param.verifyString(dv,'id');return new bX(dv,dw,dx)};global.spiff.ListItemViewModel=bX;var bY=function(dv,dw){this.$k=[];this.$j=null;this.$3$1=null;this.$l=null;this.$3$2=null;ss.makeGenericType(m,[ca]).call(this,dv,new cb);this.get_viewModel().add_selectionModelUpdated(ss.mkdel(this,this.$c));this.get_viewModel().add_itemMoved(ss.mkdel(this,this.$d));this.set_scrollHandler(new k(this.get_element()));this.get_dom().get_listItemContainer().keypress(ss.mkdel(this,this.$b)).keydown(ss.mkdel(this,this.$b));this.$j=dw;this.$7()};bY.__typeName='spiff.ListView';bY.createListView=function(dv,dw){return new bY(dv,dw)};global.spiff.ListView=bY;var bZ=function(){this.$b='dragging';this.$c='dragHover';this.$e=null;this.$f=null;this.$n=0;this.$l=0;this.$g=null;this.$h=0;this.$k=null;this.$m=0;this.$j=0;this.$i=0;this.$d=null;this.$1$1=null;this.$1$2=null;this.$1$3=null};bZ.__typeName='spiff.ListViewDragSortFeedback';global.spiff.ListViewDragSortFeedback=bZ;var ca=function(dv,dw){this.$8=null;this.$6=null;this.$7=null;this.$5=null;this.$4=null;this.$9=null;this.$3=true;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;n.call(this);this.$8={};this.$6=new bV(dw);this.$6.add_selectionChanged(ss.mkdel(this,this.onSelectionChanged));this.update(dv)};ca.__typeName='spiff.ListViewModel';global.spiff.ListViewModel=ca;var cb=function(){this.$1=null;dc.call(this,$("<div class='tab-list'><div class='tab-list-itemHolder'></div></div>"));this.$1=this.getElementBySelector('.tab-list-itemHolder')};cb.__typeName='spiff.ListViewTemplate';global.spiff.ListViewTemplate=cb;var cc=function(dv){this.$0=null;this.$0=dv};cc.__typeName='spiff.Menu';global.spiff.Menu=cc;var cd=function(){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=0;this.$1$7=false;this.$1$8=false;this.$1$9=false;this.$1$10=null;this.$1$11=null;this.$1$12=null;++cd.$0;this.set_id('menuItem'+cd.$0)};cd.__typeName='spiff.MenuItem';cd.newDivider=function(){var dv=new cd;dv.set_isDivider(true);dv.set_enabled(false);return dv};cd.newTextInput=function(dv){var dw=new cd;dw.set_isTextInput(true);if(!ss.staticEquals(dv,null)){dw.set_data(dv);dw.set_enabled(true)}return dw};cd.newActionItem=function(dv,dw){var dx=new cd;dx.set_name(dv);if(ss.isValue(dw)){dx.set_data(dw);dx.set_enabled(true)}return dx};cd.newActionItemWithItemClass=function(dv,dw,dx){var dy=new cd;dy.set_name(dv);dy.set_itemClass(dx);if(ss.isValue(dw)){dy.set_data(dw);dy.set_enabled(true)}return dy};cd.newItemWithIcon=function(dv,dw,dx){var dy=new cd;dy.set_data(dv);dy.set_name(dw);dy.set_iconClass(dx);dy.set_iconClassTwo(null);dy.set_enabled(true);return dy};cd.newItemWithIconAndDescription=function(dv,dw,dx,dy){var dz=new cd;dz.set_data(dv);dz.set_name(dw);dz.set_iconClass(dx);dz.set_enabled(true);dz.set_description(dy);return dz};cd.newItem=function(dv,dw,dx,dy){var dz=new cd;dz.set_data(dv);dz.set_name(dw);if(ss.isValue(dx)){dz.set_checkState(dx)}if(ss.isValue(dy)){dz.set_subMenu(dy)}dz.set_enabled(true);return dz};global.spiff.MenuItem=cd;var ce=function(){};ce.__typeName='spiff.MenuItemCheckState';global.spiff.MenuItemCheckState=ce;var cf=function(){dc.call(this,$("<div class='tabMenuItemDivider'/>"))};cf.__typeName='spiff.MenuItemDividerTemplate';global.spiff.MenuItemDividerTemplate=cf;var cg=function(){this.textInput=null;dc.call(this,$("\n<div class='tabMenuItemTextInputPanel'>\n  <div class='tabMenuItemTextInputHolder'>\n    <input class='tabMenuItemTextInput' type='text'>\n  </div>\n</div>"));this.textInput=this.getElementBySelector('.tabMenuItemTextInput')};cg.__typeName='spiff.MenuItemTextInputTemplate';global.spiff.MenuItemTextInputTemplate=cg;var ch=function(dv){this.content=null;dc.call(this,$(dv));this.content=this.getElementBySelector('.tabMenuContent')};ch.__typeName='spiff.MenuTemplate';global.spiff.MenuTemplate=ch;var ci=function(dv,dw){this.menuStack=[];this.dom=null;this.menuViewModel=null;this.glass=null;this.$b={};this.menuDisposables=new tab.DisposableHolder;ss.makeGenericType(m,[cj]).call(this,dv,dw);this.menuViewModel=dv;this.dom=dw;this.menuStack[0]=this.dom;this.menuViewModel.add_menuChanged(ss.mkdel(this,this.updateMenu));this.menuViewModel.add_shown(ss.mkdel(this,this.shown));this.menuViewModel.add_hidden(ss.mkdel(this,this.hidden));this.menuViewModel.add_menuItemSelectionChanged(ss.mkdel(this,this.$a));this.get_element().addClass(this.menuViewModel.get_theme().menuClass)};ci.__typeName='spiff.MenuView';ci.getMenuItem=function(dv){return dv.data('tabMenuMenuItem')};ci.getMenuItemLevel=function(dv){return dv.data('tabMenuMenuItemLevel')};global.spiff.MenuView=ci;var cj=function(){this.$0=null;this.$2=null;this.$3=null;this.$1=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=false;this.$2$8=null;n.call(this);this.set_theme(new dr);this.$0=ss.mkdel(this,function(){_.defer(ss.mkdel(this,this.dispose))});this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_hidden(this.$0)})))};cj.__typeName='spiff.MenuViewModel';cj.createForMenu=function(dv,dw,dx){var dy=new cj;dy.set_menu(dv);if(ss.isValue(dw)){dy.add_menuItemClicked(dw);dy.disposables.add$1(new tab.CallOnDispose(function(){dy.remove_menuItemClicked(dw)}))}dy.set_disposeOnHide(true);dy.set_theme(dx||new dr);cu.newView(ci).call(null,[dy]);return dy};cj.handleMenuActionItemClicked=function(dv){if($.isFunction(dv.get_data())){dv.get_data()()}};global.spiff.MenuViewModel=cj;var ck=function(){this.menuClass='tabMenuBaseTheme';this.itemClass='tabMenuItemBaseTheme';this.dividerClass='tabMenuItemDividerBaseTheme';this.noIconClass='tabMenuNoIcons';this.noDescClass='tabMenuNoDesc'};ck.__typeName='spiff.MenuViewTheme';global.spiff.MenuViewTheme=ck;var cl=function(dv,dw){this.$r=null;Q.call(this,dv,dw);this.configMoveDragSource(Q.defaultStationaryDialogConfigurer)};cl.__typeName='spiff.ModalDialog';global.spiff.ModalDialog=cl;var cm=function(){};cm.__typeName='spiff.MouseCapture';cm.$6=function(){return tab.Logger.lazyGetLogger(cm)};cm.get_browserCaptureMouseEvents=function(){return tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9&&tab.BrowserSupport.get_mouseCapture()};cm.$7=function(){return!tsConfig.is_mobile&&tab.BrowserSupport.get_addEventListener()};cm.$5=function(){return tab.BrowserSupport.get_isIE()&&tabBootstrap.Utility.get_embedMode()!=='notEmbedded'};cm.setCapture=function(dv,dw,dx,dy){tab.Param.verifyValue(dv,'element');tab.Param.verifyValue(dx,'handler');if(cm.get_browserCaptureMouseEvents()){cm.releaseCapture();dv.setCapture(dw)}else if(cm.$7()){if(ss.isNullOrUndefined(cm.$8)||ss.isNullOrUndefined(dy)||!dy){cm.releaseCapture();document.addEventListener('mousemove',cm.$2,true);document.addEventListener('mouseup',cm.$4,true);document.addEventListener('mouseout',cm.$3,true);cm.$8=dx}else{}}};cm.releaseCapture=function(){if(cm.get_browserCaptureMouseEvents()){document.releaseCapture()}else if(cm.$7()){document.removeEventListener('mousemove',cm.$2,true);document.removeEventListener('mouseup',cm.$4,true);document.removeEventListener('mouseout',cm.$3,true)}};cm.$2=function(dv){if(ss.isValue(cm.$8)){cm.$8.handleCapturedMouseMove(dv)}};cm.$4=function(dv){cm.$1(dv)};cm.$3=function(dv){if(cm.$5()&&cm.$0(dv)){cm.$1(dv)}};cm.$1=function(dv){cm.releaseCapture();if(ss.isValue(cm.$8)){cm.$8.handleCapturedMouseComplete(dv);cm.$8=null}};cm.$0=function(dv){var dw=dv.toElement;return ss.isNullOrUndefined(dw)||dw.nodeName==='HTML'};global.spiff.MouseCapture=cm;var cn=function(){};cn.__typeName='spiff.MouseEventUtil';cn.get_clickEvent=function(){return(tsConfig.is_touch?'touchstart':'click')};cn.getMouseButtonEnum=function(dv){cn.$0();var dw='none';var dx=dv['which'];if(ss.isValue(dx)){var dy=dx;if(ss.keyExists(cn.$3,dy)){dw=cn.$3[dy]}}else if(ss.isValue(dv['button'])){var dz=dv['button'];if(ss.keyExists(cn.$2,dz)){dw=cn.$2[dz]}}return dw};cn.$0=function(){if(!cn.$1){cn.$2={};cn.$2[1]='left';cn.$2[4]='middle';cn.$2[2]='right';cn.$3={};cn.$3[1]='left';cn.$3[2]='middle';cn.$3[3]='right';cn.$1=true}};global.spiff.MouseEventUtil=cn;var co=function(dv,dw,dx,dy){this.$2=null;this.$1=null;W.call(this,dv,dy);this.$2=dw;this.$1=dx};co.__typeName='spiff.MoveDragInstance';global.spiff.MoveDragInstance=co;var cp=function(dv,dw){this.$2=null;this.$1=null;this.$3=null;this.$0=null;this.$1$1=null;this.$1$2=null;this.$2=dv;this.$1=dw;this.$0='useScrollSize';V.attachDragSource(this.$2,this)};cp.__typeName='spiff.MoveDragSource';global.spiff.MoveDragSource=cp;var cq=function(dv){cP.call(this,dv)};cq.__typeName='spiff.MultiSelectButtonGroupComponent';global.spiff.MultiSelectButtonGroupComponent=cq;var cr=function(dv){cI.call(this,dv,new cs);this.$8();this.$b().add_contentChanged(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$b().remove_contentChanged(ss.mkdel(this,this.$9))})))};cr.__typeName='spiff.NativeScrollableView';global.spiff.NativeScrollableView=cr;var cs=function(){this.content=null;this.scroll=null;dc.call(this,$("<div class='tabScroller'><span class='tabScrollerContent'/></div>"));this.content=this.getElementBySelector('.tabScrollerContent');this.scroll=this.get_domRoot()};cs.__typeName='spiff.NavtiveScrollableTemplate';global.spiff.NavtiveScrollableTemplate=cs;var ct=function(dv,dw){this.originalEvent=null;this.type=null;this.target=null;this.currentTarget=null;this.timeStamp=0;this.keyCode=0;this.ctrlKey=false;this.altKey=false;this.metaKey=false;this.shiftKey=false;this.clientX=0;this.clientY=0;this.pageX=0;this.pageY=0;this.charOrCode=null;this.touches=null;this.targetTouches=null;this.changedTouches=null;this.touchesById=null;this.gestureName=null;this.$0=null;this.originalEvent=dv;this.type=dv.type;this.timeStamp=dv.timeStamp;this.keyCode=dv['keyCode'];this.ctrlKey=dv.ctrlKey;this.altKey=dv.altKey;this.metaKey=dv.metaKey;this.shiftKey=dv.shiftKey;this.charOrCode=dv.charOrCode;this.clientX=dv['clientX'];this.clientY=dv['clientY'];if(ss.isValue(dv.touches)){this.touches=dv.touches;this.targetTouches=dv.targetTouches;this.changedTouches=dv.changedTouches;var dx=dv.target;this.target=((dx.nodeType===3)?dx.parentNode:dx);this.currentTarget=dw}else{this.targetTouches=((dv.type==='mouseup')?[]:[dv]);this.touches=this.targetTouches;this.changedTouches=[dv];this.currentTarget=dv.currentTarget;this.target=dv.target}var dy=this.touches.length;this.touchesById=new Array(dy);while(dy>0){dy-=1;var dz=this.touches[dy].identifier||0;this.touchesById[dz]=this.touches[dy]}dy=this.changedTouches.length;while(dy>0){dy-=1;var dA=this.changedTouches[dy].identifier||0;this.touchesById[dA]=this.changedTouches[dy]}};ct.__typeName='spiff.NormalizedEvent';global.spiff.NormalizedEvent=ct;var cu=function(){};cu.__typeName='spiff.ObjectRegistry';cu.registerType=function(dv,dw){return function(){if(ss.isNullOrUndefined(cu.$2)){cu.$2={}}cu.$2[ss.getTypeFullName(dv)]=dw}};cu.newView$1=function(dv){return function(dw,dx){return cu.$1(dv).call(null,dw,dx)}};cu.newView=function(dv){return function(dw){return cu.$1(dv).call(null,dv,dw)}};cu.newWidget$1=function(dv){return function(dw,dx){return cu.$1(dv).call(null,dw,dx)}};cu.newWidget=function(dv){return function(){return cu.$1(dv).call(null,dv,[])}};cu.$1=function(dv){return function(dw,dx){if(ss.isNullOrUndefined(cu.$2)){throw new ss.Exception('No types registered')}var dy=cu.$2[ss.getTypeFullName(dw)];if(ss.isNullOrUndefined(dy)){throw new ss.Exception('Unknown view type: '+ss.getTypeFullName(dw))}var dz=((dx.length===0)?ss.createInstance(dy):ss.applyConstructor(dy,dx));return(cu.$0(dy,dv)?dz:dz)}};cu.newLegacyTooltip=function(dv){return function(dw,dx,dy){if(ss.isNullOrUndefined(cu.$2)){throw new ss.Exception('No types registered')}var dz=cu.$2[ss.getTypeFullName(dw)];if(ss.isNullOrUndefined(dz)){throw new ss.Exception('Unknown tooltip type: '+ss.getTypeFullName(dw))}var dA=new dz(dx,dy);return dA}};cu.newLegacyTooltipBehavior=function(dv){return function(dw,dx){if(ss.isNullOrUndefined(cu.$2)){throw new ss.Exception('No types registered')}var dy=cu.$2[ss.getTypeFullName(dw)];if(ss.isNullOrUndefined(dy)){throw new ss.Exception('Unknown tooltip type: '+ss.getTypeFullName(dw))}var dz=new dy(dx);return dz}};cu.newExportPDFDialog=function(dv){return function(dw,dx){if(ss.isNullOrUndefined(cu.$2)){throw new ss.Exception('No types registered')}var dy=cu.$2[ss.getTypeFullName(dw)];if(ss.isNullOrUndefined(dy)){throw new ss.Exception('Unknown ExportPdfDialog type: '+ss.getTypeFullName(dw))}return new dy(dx,false)}};cu.$0=function(dv,dw){return ss.isNullOrUndefined(ss.getGenericTypeDefinition(dw))||ss.isValue(ss.getGenericTypeDefinition(dv))};global.spiff.ObjectRegistry=cu;var cv=function(){};cv.__typeName='spiff.OrientationHandler';cv.add_orientationChanged=function(dv){cv.$1$1=ss.delegateCombine(cv.$1$1,dv)};cv.remove_orientationChanged=function(dv){cv.$1$1=ss.delegateRemove(cv.$1$1,dv)};cv.get_isLandscape=function(){return cv.$a===90||cv.$a===-90};cv.get_isPortrait=function(){return cv.$a===0||cv.$a===180};cv.get_windowInstHelper=function(){return cv.$f};cv.init=function(){if(!tsConfig.is_mobile_device){cv.$a=0;return}cv.$e=cv.$1();cv.$f=new tab.WindowHelper(cv.$e);cv.$a=cv.$3();cv.$b=cv.$f.get_outerWidth();if(tab.BrowserSupport.get_orientationChange()){$(cv.$e).bind('orientationchange'.toString(),cv.$6)}$(cv.$e).bind('resize'.toString(),cv.$7)};cv.unbindEvents=function(){if(ss.isNullOrUndefined(cv.$e)){return}$(cv.$e).unbind('orientationchange'.toString(),cv.$6);$(cv.$e).unbind('resize'.toString(),cv.$7)};cv.$1=function(){var dv=tab.WindowHelper.get_windowSelf();if(tabBootstrap.Utility.get_embedMode()!=='notEmbedded'){try{while(ss.isValue(dv.parent)&&!ss.referenceEquals(dv.parent,dv)){var dw=dv.parent;var dx=new tab.WindowHelper(dw);if(ss.isNullOrUndefined(dx.get_outerWidth())){break}dv=dw}}catch(dy){}}return dv};cv.$6=function(dv){cv.$c=new Date;cv.$5()};cv.$5=function(){var dv=new Date;var dw=cv.$f.get_outerWidth();if(cv.$b!==dw||dv-cv.$c>=2500){cv.$b=dw;cv.$2()}else{cv.$0();cv.$d=window.setTimeout(cv.$5,150)}};cv.$7=function(dv){var dw=cv.$f.get_outerWidth();if(dw!==cv.$b){cv.$b=dw;cv.$2()}};cv.$2=function(){cv.$0();var dv=cv.$3();if(cv.$a!==dv){cv.$a=cv.$3();if(ss.isValue(cv.$1$1)){cv.$1$1()}}};cv.$3=function(){var dv;if(!tab.BrowserSupport.get_isAndroid()){dv=cv.$4();if(ss.isValue(dv)){return ss.unbox(dv)}}dv=((cv.$f.get_outerWidth()<cv.$f.get_outerHeight())?0:90);return ss.unbox(dv)};cv.$4=function(){try{return cv.$e.orientation}catch(dv){}return null};cv.$0=function(){if(ss.isValue(cv.$d)){window.clearTimeout(ss.unbox(cv.$d))}cv.$d=null};global.spiff.OrientationHandler=cv;var cw=function(dv){this.$6=false;this.$8=null;this.$9=null;this.$7=null;this.$5=null;bf.call(this,dv,'pinch',true,2)};cw.__typeName='spiff.Pinch';global.spiff.Pinch=cw;var cx=function(dv){bY.call(this,dv,dv.get_listItemCreator())};cx.__typeName='spiff.PopupListView';global.spiff.PopupListView=cx;var cy=function(dv,dw,dx){this.$a=null;ca.call(this,dv,dx);this.$a=dw};cy.__typeName='spiff.PopupListViewModel';global.spiff.PopupListViewModel=cy;var cz=function(dv){this.$0=null;ss.EventArgs.call(this);this.$0=dv};cz.__typeName='spiff.PropertyChangedEventArgs';global.spiff.PropertyChangedEventArgs=cz;var cA=function(dv,dw){this.$3=0;this.$2=0;this.$1=0;this.$0=0;this.$1$1=null;this.$3=this.$1=dv;this.$2=this.$0=dw};cA.__typeName='spiff.RangeSliderModel';global.spiff.RangeSliderModel=cA;var cB=function(){this.$5=null;this.$6=null;this.$2=null;this.$3=null;this.$8=null;this.$7=null;this.$4=null;this.$1=null;dc.call(this,$("<div class='tabRangeSlider'><div class='tabMinValueTextArea' /><div class='tabMaxValueTextArea' /><div class='tabRangeBarArea'><div class='tabRangeBar'><div class='tabMinValuePointer' /><div class='tabMaxValuePointer' /></div></div></div>"));this.$6=ba.newEditableTextView('','');this.get_minValueTextView().addClass('tabRangeSlider-MinValueText');this.$3=ba.newEditableTextView('','');this.get_maxValueTextView().addClass('tabRangeSlider-MaxValueText');this.$5=this.getElementBySelector('.tabMinValueTextArea');this.$2=this.getElementBySelector('.tabMaxValueTextArea');this.$8=this.getElementBySelector('.tabRangeBarArea');this.$7=this.getElementBySelector('.tabRangeBar');this.$4=this.getElementBySelector('.tabMinValuePointer');this.$1=this.getElementBySelector('.tabMaxValuePointer')};cB.__typeName='spiff.RangeSliderTemplate';global.spiff.RangeSliderTemplate=cB;var cC=function(dv){this.$c=null;this.$b=null;ss.makeGenericType(m,[cD]).call(this,dv,new cB);this.$c=dv;this.$b=this.get_template();this.get_minValueTextView().add_committed(ss.mkdel(this,this.$a));this.get_maxValueTextView().add_committed(ss.mkdel(this,this.$9));this.$c.add_propertyChanged(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_minValueTextView().remove_committed(ss.mkdel(this,this.$a));this.get_maxValueTextView().remove_committed(ss.mkdel(this,this.$9));this.$c.remove_propertyChanged(ss.mkdel(this,this.$8))})))};cC.__typeName='spiff.RangeSliderView';global.spiff.RangeSliderView=cC;var cD=function(dv){this.$4=null;this.$1=null;this.$0=null;this.$3=0;this.$2=1;n.call(this);this.$4=dv;this.$4.add_valueChanged(ss.mkdel(this,this.updateView));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$4.remove_valueChanged(ss.mkdel(this,this.updateView))})))};cD.__typeName='spiff.RangeSliderViewModel';global.spiff.RangeSliderViewModel=cD;var cE=function(){};cE.__typeName='spiff.ReactComponentExtensions';cE.generateUniqueKeys=function(dv){return function(dw,dx){var dy={};for(var dz=0;dz<dw.length;++dz){dy[dw[dz].toString()]=0}for(var dA=0;dA<dx.length;++dA){dy[dx[dA]]=1}return _.map(dw,function(dB){var dC=dB.toString();var dD=dy[dC];if(dD===0){dy[dC]=1;return dC}var dE=null;do dE=[dC,'_',++dD].join('');while(ss.isValue(dy[dE]));dy[dC]=dD;dy[dE]=1;return dE})}};global.spiff.ReactComponentExtensions=cE;var cF=function(dv,dw,dx){var dy=function(dz){this.$5=ss.getDefaultValue(dv);this.$1$1=null;this.$1$2=null;this.set_rootElement($("<div class='tab-ReactView' />"));this.$4(this.get_rootElement().get(0));this.$5=dz;this.$5.add_disposed(ss.mkdel(this,this.$1));this.$5.add_propsUpdated(ss.mkdel(this,this.$0))};ss.registerGenericClassInstance(dy,cF,[dv,dw,dx],{get_viewModel:function(){return this.$5},get_rootElement:function(){return this.$1$1},set_rootElement:function(dz){this.$1$1=dz},$3:function(){return this.$1$2},$4:function(dz){this.$1$2=dz},addToDom:function(dz){dz.append(this.$3());this.$2(this.$5.get_props())},onAddedToDom:function(){},$0:function(){this.$2(this.$5.get_props())},$2:function(dz){ReactDOM.render(React.createElement(dw,dz),this.$3())},dispose:function(){ReactDOM.unmountComponentAtNode(this.$3());this.get_rootElement().remove();this.$5.remove_propsUpdated(ss.mkdel(this,this.$0));this.$5.remove_disposed(ss.mkdel(this,this.$1))},$1:function(dz){this.dispose()},addClass:function(dz){this.get_rootElement().addClass(dz)}},function(){return null},function(){return[ss.IDisposable,ss.makeGenericType(bO,[dv]),bq]});dy.$0="<div class='tab-ReactView' />";cu.registerType(dy,dy).call(null);return dy};cF.__typeName='spiff.ReactHostView$3';ss.initGenericClass(cF,a,3);global.spiff.ReactHostView$3=cF;var cG=function(dv,dw,dx){var dy=function(dz,dA,dB){this.$3$1=null;React.Component.call(this,dA,dB);this.set_widget(dz);this.get_widget().add_propertyChanged(ss.mkdel(this,this.handleWidgetPropertyChanged))};ss.registerGenericClassInstance(dy,cG,[dv,dw,dx],{get_widget:function(){return this.$3$1},set_widget:function(dz){this.$3$1=dz},render:function(){return React.DOM.div(null,'')},componentDidMount:function(){var dz=$(ReactDOM.findDOMNode(this));dz.append(this.get_widget().get_element())},componentWillUnmount:function(){this.get_widget().remove_propertyChanged(ss.mkdel(this,this.handleWidgetPropertyChanged));this.get_widget().dispose()},componentWillReceiveProps:function(dz){this.updateWidgetState(dz)},handleWidgetPropertyChanged:null,updateWidgetState:null},function(){return React.Component},function(){return[]});return dy};cG.__typeName='spiff.ReactSpiffAdapter$3';ss.initGenericClass(cG,a,3);global.spiff.ReactSpiffAdapter$3=cG;var cH=function(dv,dw,dx){this.$4='bottomRight';cp.call(this,dv,dw);this.$4=dx};cH.__typeName='spiff.ResizeDragSource';global.spiff.ResizeDragSource=cH;var cI=function(dv,dw){ss.makeGenericType(m,[cJ]).call(this,dv,dw)};cI.__typeName='spiff.ScrollableView';cI.usingNativeScrollbars=function(){return tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9};cI.createScrollableView=function(dv){if(cI.usingNativeScrollbars()){return new cr(dv)}else if(dv.get_hasCustomIndicator()){return new M(dv)}else{return new P(dv)}};global.spiff.ScrollableView=cI;var cJ=function(){this.$3=null;this.$4=null;this.$2$1=null;this.$2$2=null;n.call(this);this.$0(cJ.get_browserSupportsCustomScrollbars())};cJ.__typeName='spiff.ScrollableViewModel';cJ.$ctor1=function(dv){this.$3=null;this.$4=null;this.$2$1=null;this.$2$2=null;n.call(this);this.$0(dv)};cJ.get_browserSupportsCustomScrollbars=function(){return!tab.BrowserSupport.get_isIE()||tab.BrowserSupport.get_browserVersion()>8};global.spiff.ScrollableViewModel=cJ;var cK=function(){};cK.__typeName='spiff.ScrollerType';global.spiff.ScrollerType=cK;var cL=function(dv,dw){React.Component.call(this,dv,dw)};cL.__typeName='spiff.ScrollingComponent';cL.$0=function(dv){var dw=dv.forceScrollerType;if(ss.isNullOrUndefined(dw)){dw=0}return ss.unbox(dw)};cL.createScroller=function(dv,dw){var dx=cL.$0(dv);var dy=cL.$1[dx];return React.createElement(dy,dv,dw)};global.spiff.ScrollingComponent=cL;var cM=function(){this.extraCssClass=null;this.forceScrollerType=null;this.scrollX=false;this.scrollY=false};cM.__typeName='spiff.ScrollingProps';global.spiff.ScrollingProps=cM;var cN=function(dv){React.Component.call(this,dv);this.state={userInput:'',hasFocus:dv.setFocus}};cN.__typeName='spiff.SearchFieldComponent';global.spiff.SearchFieldComponent=cN;var cO=function(dv){ss.makeGenericType(p,[Object]).call(this,dv)};cO.__typeName='spiff.SelectableButtonComponent';global.spiff.SelectableButtonComponent=cO;var cP=function(dv){React.Component.call(this,dv);this.state=this.$1(this.props.selection)};cP.__typeName='spiff.SelectableButtonGroupComponent';global.spiff.SelectableButtonGroupComponent=cP;var cQ=function(){this.$7=null;this.$9=null;this.$a=0;this.$8='tabSelected';this.$1$1=null;this.$7=[];this.$9={}};cQ.__typeName='spiff.SelectableGroup';global.spiff.SelectableGroup=cQ;var cR=function(dv,dw,dx){this.$1=false;this.$2=false;this.$0=false;ss.CancelEventArgs.call(this);this.$1=dv;this.$2=dw;this.$0=dx};cR.__typeName='spiff.SelectionEventArgs';global.spiff.SelectionEventArgs=cR;var cS=function(){};cS.__typeName='spiff.SelectionMethod';global.spiff.SelectionMethod=cS;var cT=function(dv,dw,dx){this.relativeDom=null;this.preferUp=false;this.preferLeft=false;this.minWidth=null;this.additionalMenuClass=null;this.relativeDom=dv;this.preferUp=dw;this.preferLeft=false;this.minWidth=dx;this.additionalMenuClass=null};cT.__typeName='spiff.ShowMenuOptions';cT.create=function(dv,dw,dx){return new cT(dv,dw,dx)};cT.preferDownAndLeft=function(dv,dw){var dx=new cT(dv,false,dw);dx.preferLeft=true;return dx};global.spiff.ShowMenuOptions=cT;var cU=function(dv){cP.call(this,dv);if(this.props.selection.get_selectedCount()>1){if(!this.props.selection.get_allSelected()){this.props.selection.unselectAll()}}};cU.__typeName='spiff.SingleSelectButtonGroupComponent';global.spiff.SingleSelectButtonGroupComponent=cU;var cV=function(dv,dw){this.$0=null;this.$1=null;this.$0=dv;this.$1=dw};cV.__typeName='spiff.SpiffBrowserViewport';cV.getViewport=function(dv){if(!ss.staticEquals(cV.getSpiffBrowserViewportFunc,null)){cV.getSpiffBrowserViewportFunc(dv)}else{dv(new cV(null,null))}};global.spiff.SpiffBrowserViewport=cV;var cW=function(dv){bR.call(this,cW.$0(dv),'.tab-styled-button-middle');this.set_focusClass('tab-focus');this.set_disabledClass('tab-disabled')};cW.__typeName='spiff.StyledButton';cW.createStyledButton=function(dv,dw,dx,dy){var dz=new cW(dx);dz.set_label(dw);dz.add_click(dv);dz.disposables.add$1(new tab.CallOnDispose(function(){dz.remove_click(dv)}));if(ss.isValue(dy)){dz.tabIndex(ss.unbox(dy))}return dz};cW.$0=function(dv){return $('<span>').addClass('tab-styled-button').addClass(dv).append($('<span>').addClass('tab-styled-button-left')).append($('<span>').addClass('tab-styled-button-middle')).append($('<span>').addClass('tab-styled-button-right'))};global.spiff.StyledButton=cW;var cX=function(){};cX.__typeName='spiff.StyledTextButton';cX.createUnificationLabelButton=function(dv,dw,dx,dy,dz){var dA=cX.$0(dv,dw,dx,1,dz);var dB;switch(dy){case 0:{dB='tabStyledTextButtonFilledGreen';break}case 1:{dB='tabStyledTextButtonFilledRed';break}case 2:{dB='tabStyledTextButtonFilledGrey';break}case 3:{dB='tabStyledTextButtonOutline';break}default:{dB='';break}}dA.addClass(dB);return dA};cX.createUnificationIconTextButton=function(dv,dw,dx){var dy=new bR($("<span class='tabTextIconButton'><span class='icon'/><span class='label hide'/></span>"),'.label');if(!ss.staticEquals(dv,null)){dy.onClick(function(dz){dv()})}if(!ss.isNullOrEmptyString(dw)){dy.set_label(dw)}if(!ss.isNullOrEmptyString(dx)){dy.addClass(dx)}return dy};cX.createActionButton=function(dv,dw,dx,dy,dz){var dA=cX.$0(dv,dw,dx,dy,dz);dA.addClass('tabStyledTextButtonAction');return dA};cX.$0=function(dv,dw,dx,dy,dz){var dA=bR.newTextButton(dv,dw);dA.addClass('tabStyledTextButton');switch(dy){case 2:{dA.addClass('tabLargeStyledTextButton');break}case 1:{dA.addClass('tabMediumStyledTextButton');break}}dA.addClass(dx);if(ss.isValue(dz)){dA.tabIndex(ss.unbox(dz))}return dA};global.spiff.StyledTextButton=cX;var cY=function(dv){this.$1=new cQ;this.$5=null;this.$3={};this.$2=new tab.DisposableHolder;this.$4=null;this.$1$1=null;if(ss.isNullOrUndefined(dv)){dv=new h}this.$5=dv};cY.__typeName='spiff.TabControl';global.spiff.TabControl=cY;var cZ=function(dv,dw){this.eventConfig=null;this.handler=null;this.$1=new tab.DisposableHolder;this.$2=0;this.$3=0;this.$4=true;this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.eventConfig=dw||{};da.setHandler(this.eventConfig,'firstTouch',ss.mkdel(this,this.handlePressEvent));da.setHandler(this.eventConfig,'potentialTap',ss.mkdel(this,this.handleClickEvent));da.setHandler(this.eventConfig,'rightClick',ss.mkdel(this,this.handleRightClickEvent));this.handler=new da.$ctor1(dv,this.eventConfig)};cZ.__typeName='spiff.TableauClickHandler';cZ.target=function(dv){return new cZ(dv,null)};cZ.targetAndConfig=function(dv,dw){return new cZ(dv,dw)};cZ.targetAndClick=function(dv,dw){return(new cZ(dv,null)).onClick(dw)};cZ.targetAndPress=function(dv,dw){return(new cZ(dv,null)).onPress(dw)};cZ.targetAndRightClick=function(dv,dw){return(new cZ(dv,null)).onRightClick(dw)};cZ.targetAndDoubleClick=function(dv,dw){return(new cZ(dv,null)).onDoubleClick(dw)};global.spiff.TableauClickHandler=cZ;var da=function(){this.handledEvents={};this.isTouch=false;this.config=null;this.mousedown=false;this.lastMouseButtonPressed=null;this.handlingContextMenu=false;this.startEvents={};this.moveEvents={};this.endEvents={};this.outEvents={};this.scrollEvents={};this.cancelEvents={};this.$4={};this.$3=null};da.__typeName='spiff.TableauEventHandler';da.$ctor1=function(dv,dw){this.handledEvents={};this.isTouch=false;this.config=null;this.mousedown=false;this.lastMouseButtonPressed=null;this.handlingContextMenu=false;this.startEvents={};this.moveEvents={};this.endEvents={};this.outEvents={};this.scrollEvents={};this.cancelEvents={};this.$4={};this.$3=null;this.config=dw||{};this.config.domElem=dv;this.makeRecognizers(this.config);this.configureDomElem(dv);this.setupPressDrag();this.setupEventNames();this.$0(dv)};da.$2=function(){return da.$4};da.$3=function(dv){if(da.$4!==dv){da.$4=dv}};da.setHandler=function(dv,dw,dx){dv[dw]=dx};da.removeHandler=function(dv,dw){dv[dw]=null};da.isHandling=function(dv,dw){var dx=dv;return ss.isValue(dx[dw])};da.$1=function(dv,dw){return dv[dw]};da.$0=function(dv){if(ss.isValue(dv)){dv.dispose()}};global.spiff.TableauEventHandler=da;var db=function(){this.$2$1=null;da.call(this);this.setupEventNames();this.set_eventHandlingAttributesForReact(this.$5())};db.__typeName='spiff.TableauEventHandlerForReact';db.createEmpty=function(){return new db};db.$0=function(dv){if(ss.isNullOrUndefined(db.$1)){db.$1={};db.$1['touchstart']='onTouchStart';db.$1['touchmove']='onTouchMove';db.$1['touchend']='onTouchEnd';db.$1['touchcancel']='onTouchCancel';db.$1['mousedown']='onMouseDown';db.$1['mousemove']='onMouseMove';db.$1['mouseup']='onMouseUp';db.$1['mouseout']='onMouseOut';db.$1['scroll']='onScroll';db.$1['contextmenu']='onContextMenu'}return db.$1[dv]};global.spiff.TableauEventHandlerForReact=db;var dc=function(dv){this.$0=null;this.disposables=new tab.DisposableHolder;this.$0=dv};dc.__typeName='spiff.Template';dc.fromHtml=function(dv){return new dc($(dv))};global.spiff.Template=dc;var dd=function(dv,dw,dx,dy){this.$6=null;this.$7=null;this.$2$1=null;this.$2$2=null;du.call(this,dv.get_domRootElement());this.$6=dv;this.$6.get_inputElement().val(dw);this.$6.get_inputElement().attr('placeholder',dx);this.$6.get_inputElement().attr('title',dx);if(ss.isValue(dy)){var dz=tab.DomUtil.generateUniqueId();dv.get_inputElement().attr('id',dz);dv.get_inputElement().before($(ss.formatString("<label for='{0}'>{1}</label>",dz,dy)))}this.$6.get_inputElement().keyup(ss.mkdel(this,this.$5));this.$6.get_inputElement().bind('input',ss.mkdel(this,this.$4));this.stopPropogationOfInputEvents();this.$7=dw;this.add_propertyChanged(ss.mkdel(this,function(){this.update()}))};dd.__typeName='spiff.TextInputView';dd.newTextInputView=function(dv,dw,dx){var dy=new g;return new dd(dy,dv,dw,dx)};global.spiff.TextInputView=dd;var de=function(dv,dw){this.$e=null;this.$f=null;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=false;o.call(this,dv);this.$f=de.$0();this.$e=ss.coalesce(dw,'selected')};de.__typeName='spiff.ToggleButton';de.createButton=function(dv,dw,dx){var dy=new de(dv,dw);dy.set_selected(dx.get_toggleValue());var dz=function(dA,dB){if(dB.get_propertyName()==='selected'){dx.raiseToggled()}};dy.add_propertyChanged(dz);dy.disposables.add$1(new tab.CallOnDispose(function(){dy.remove_propertyChanged(dz)}));return dy};de.$0=function(){de.$1++;return'toggleBtn-'+de.$1.toString()};global.spiff.ToggleButton=de;var df=function(dv,dw){this.$0=false;this.$2$1=null;this.$2$2=null;n.call(this);this.$0=dw;this.set_data({});this.add_toggled(dv);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_toggled(dv)})))};df.__typeName='spiff.ToggleButtonViewModel';global.spiff.ToggleButtonViewModel=df;var dg=function(){};dg.__typeName='spiff.UberPopupHorizontalAlign';global.spiff.UberPopupHorizontalAlign=dg;var dh=function(){};dh.__typeName='spiff.UberPopupHorizontalAttach';global.spiff.UberPopupHorizontalAttach=dh;var di=function(){};di.__typeName='spiff.UberPopupMode';global.spiff.UberPopupMode=di;var dj=function(dv,dw,dx,dy,dz,dA,dB,dC,dD){this.horizontalAlign=0;this.horizontalAttach=0;this.theme=0;this.preferUp=false;this.limitPopupHeight=false;this.additionalClassNames=null;this.isToolbarFlyout=false;this.popupWidth=null;this.popupMode=0;this.horizontalAlign=dv;this.horizontalAttach=dw;this.theme=dx;this.preferUp=dy;this.limitPopupHeight=dz;this.additionalClassNames=dA;this.isToolbarFlyout=dB;this.popupWidth=dC;this.popupMode=dD};dj.__typeName='spiff.UberPopupShowOptions';global.spiff.UberPopupShowOptions=dj;var dk=function(){this.content=null;dc.call(this,$("<div class='tabUberPopup'><div class='tabUberPopupContent'/></div>"));this.content=this.getElementBySelector('.tabUberPopupContent')};dk.__typeName='spiff.UberPopupTemplate';global.spiff.UberPopupTemplate=dk;var dl=function(){};dl.__typeName='spiff.UberPopupTheme';global.spiff.UberPopupTheme=dl;var dm=function(dv,dw){this.popupViewModel=null;this.glass=null;this.contentView=null;this.visible=false;ss.makeGenericType(m,[dn]).call(this,dv,dw);this.popupViewModel=dv;this.popupViewModel.add_shown(ss.mkdel(this,this.shown));this.popupViewModel.add_hidden(ss.mkdel(this,this.hidden))};dm.__typeName='spiff.UberPopupView';global.spiff.UberPopupView=dm;var dn=function(dv){this.$0=null;this.relativeElement=null;this.options=new dj(0,0,0,false,false,null,false,null,0);this.$2$1=null;this.$2$2=null;this.$2$3=null;n.call(this);this.relativeElement=dv;this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_hidden(ss.mkdel(this,this.dispose))})))};dn.__typeName='spiff.UberPopupViewModel';dn.createForContent=function(dv,dw,dx,dy){var dz=new dn(dw);if(!ss.staticEquals(dx,null)){dz.add_hidden(dx);dz.addDisposables(new tab.CallOnDispose(function(){dz.remove_hidden(dx)}))}dz.set_content(dv);dz.set_disposeOnHide(true);cu.newView(dm).call(null,[dz]);if(dy){dz.disposables.add$1(new tab.CallOnDispose(function(){dv.disposeViewModel()}))}return dz};global.spiff.UberPopupViewModel=dn;var dp=function(){};dp.__typeName='spiff.UnificationClassNames';global.spiff.UnificationClassNames=dp;var dq=function(){ck.call(this);this.menuClass='tabMenuUnificationTheme dark';this.itemClass='tabMenuItemUnificationTheme';this.dividerClass='tabMenuItemDividerUnificationTheme'};dq.__typeName='spiff.UnificationDarkMenuTheme';global.spiff.UnificationDarkMenuTheme=dq;var dr=function(){ck.call(this);this.menuClass='tabMenuUnificationTheme light';this.itemClass='tabMenuItemUnificationTheme';this.dividerClass='tabMenuItemDividerUnificationTheme'};dr.__typeName='spiff.UnificationLightMenuTheme';global.spiff.UnificationLightMenuTheme=dr;var ds=function(dv,dw){this.$b=null;React.Component.call(this,dv,dw);this.state=ds.$0(this.props.initialValue)};ds.__typeName='spiff.VerticalSpinnerComponent';ds.$0=function(dv){return{value:dv,pendingValue:dv,displayValue:dv.toString()}};global.spiff.VerticalSpinnerComponent=ds;var dt=function(){this.styleClass='tab-outline-spinner';this.extraCssClass=null;this.label=null;this.initialValue=0;this.maxValue=null;this.minValue=null;this.maxLength=16;this.stepSize=1;this.disabled=false;this.onValueChanged=null;this.actionDelay=0;this.tabIndex=0};dt.__typeName='spiff.VerticalSpinnerProps';global.spiff.VerticalSpinnerProps=dt;var du=function(dv){this.disposables=new tab.DisposableHolder;this.$1=null;this.$2=0;this.$3=null;this.$0=false;this.$1$1=null;this.$1$2=null;tab.Param.verifyValue(dv,'element');this.$1=dv;dv.addClass('tab-widget');dv.data('widgetInstance',this);du.$3++;this.$2=du.$3};du.__typeName='spiff.Widget';du.enableTextSelectionOnElement=function(dv){dv.removeClass('tab-unselectable');dv.addClass('tab-selectable');dv.unbind('.tab-disableSelection')};du.disableTextSelectionOnElement=function(dv){if(tab.BrowserSupport.get_isIE()){if(tab.BrowserSupport.get_browserVersion()===9){dv.attr('unselectable','on')}return}if(tab.BrowserSupport.get_isMobile()){return}dv.removeClass('tab-selectable');dv.addClass('tab-unselectable');if(tab.BrowserSupport.get_selectStart()){var dw='selectstart'+'.tab-disableSelection';dv.bind(dw,function(dx){if(tab.DomUtil.isFocusableTextElement(dx.target)){return}dx.preventDefault()})}};du.findWidget=function(dv,dw){tab.Param.verifyValue(dv,'element');var dx=dv;var dy;dw=dw||du;do{dy=dx.data('widgetInstance');if(ss.isValue(dy)&&!ss.isAssignableFrom(dw,ss.getInstanceType(dy))){dy=null}dx=dx.parent('.tab-widget')}while(ss.isNullOrUndefined(dy)&&!dx.is('body')&&dx.length>0);return(ss.isNullOrUndefined(dy)?null:dy)};du.getWidgets=function(dv,dw){var dx=[];dw=dw||du;var dy;dv.each(function(dz,dA){dy=$(dA).data('widgetInstance');if(ss.isValue(dy)&&ss.isAssignableFrom(dw,ss.getInstanceType(dy))){dx.push(dy)}});return dx};global.spiff.Widget=du;ss.initClass(cL,a,{render:null},React.Component);ss.initClass(b,a,{render:function(){var dv=b.$0(this.props);dv.ref='iscroll-component';return React.createElement(bF,dv,this.props.children)}},cL);ss.initClass(c,a,{refresh:function(){IScroll.prototype.refresh.call(this);var dv=$(this.$0).find('.iScrollHorizontalScrollbar');dv.toggleClass('noScroll',!this.hasHorizontalScroll);var dw=$(this.$0).find('.iScrollVerticalScrollbar');dw.toggleClass('noScroll',!this.hasVerticalScroll)}},IScroll);ss.initClass(dc,a,{get_domRoot:function(){return this.$0},getElementsBySelector:function(dv){return this.get_domRoot().find(dv)},getElementBySelector:function(dv){var dw=this.getElementsBySelector(dv);return dw},dispose:function(){this.disposables.dispose();this.get_domRoot().remove()},addDisposable:function(dv){if(ss.isValue(dv)){this.disposables.add$1(dv)}}},null,[ss.IDisposable]);ss.initClass(d,a,{$8:function(){return this.$a||(this.$a=this.getElementBySelector('.tabMenuItemNameArea'))}},dc,[ss.IDisposable]);ss.initClass(e,a,{$2:function(dv,dw){switch(dv){case 1:{this.$6.$5=$("<div class='tabMenuItemIcon tabMenuItemCheckIcon'/>");this.$6.get_domRoot().prepend(this.$6.$5);this.$6.$3=true;break}case 2:{this.$6.$5=$("<div class='tabMenuItemIcon tabMenuItemRadioIcon'/>");this.$6.get_domRoot().prepend(this.$6.$5);this.$6.$3=true;break}default:{if(dv===0&&!ss.isNullOrEmptyString(dw)){this.$6.$5=$(ss.formatString("<div class='tabMenuItemIcon {0}'/>",dw));this.$6.get_domRoot().prepend(this.$6.$5);this.$6.$3=true}break}}return this},$3:function(dv){if(ss.isNullOrEmptyString(dv)){return this}this.$6.$6=$(ss.formatString("<span class='tabMenuItemIconTwo {0}'/>",dv));this.$6.$8().append(this.$6.$6);this.$6.$4=true;return this},$1:function(dv){if(ss.isNullOrEmptyString(dv)){return this}this.$6.$1=$("<div class='tabMenuItemDesc'/>");this.$6.$1.text(dv);this.$6.$8().append(this.$6.$1);this.$6.$2=true;return this},$4:function(dv){if(ss.isNullOrUndefined(dv)){return this}this.$6.$9=$("<div class='tabMenuItemSubMenuIcon'/>");this.$6.get_domRoot().append(this.$6.$9);return this},$5:function(dv){for(var dw=0;dw<dv.length;dw++){var dx=dv[dw];if(ss.isValue(dx)){this.$6.get_domRoot().addClass(dx)}}return this},$0:function(){var dv=this.$6;this.$6=null;return dv},dispose:function(){this.$6.dispose()}},null,[ss.IDisposable]);ss.initInterface(bM,a,{get_domRootElement:null,get_inputElement:null});ss.initClass(f,a,{get_domRootElement:function(){return this.get_domRoot()},$1:function(){return this.$4},get_inputElement:function(){return this.$3},$2:function(){return this.$5}},dc,[ss.IDisposable,bM]);ss.initClass(g,a,{get_domRootElement:function(){return this.get_domRoot()},get_inputElement:function(){return this.$1}},dc,[ss.IDisposable,bM]);ss.initInterface(bL,a,{get_root:null,get_tabs:null,get_contentArea:null,createTabLabel:null});ss.initClass(h,a,{get_root:function(){return this.get_domRoot()},get_tabs:function(){return this.$2},get_contentArea:function(){return this.$1},createTabLabel:function(dv){return new i}},dc,[ss.IDisposable,bL]);ss.initClass(i,a,{},dc,[ss.IDisposable]);ss.initInterface(bB,a,{get_scrollViewPagePosition:null,get_scrollViewSize:null,scrollToElement:null});ss.initClass(j,a,{get_scrollViewPagePosition:function(){return tab.DomUtil.getElementPosition(this.$0.get_element())},get_scrollViewSize:function(){return{w:this.$0.get_element().outerWidth(),h:this.$0.get_element().outerHeight()}},scrollToElement:function(dv,dw){var dx=dv.offsetTop;var dy=dx+dv.offsetHeight;var dz=this.$0.get_scrollerY();var dA=dz+this.$0.get_element().height();if(dx<dz){var dB=((dx<=dw)?0:dx);this.$0.scrollTo(this.$0.get_scrollerX(),dB,0,null)}else if(dy>dA){this.$0.scrollTo(this.$0.get_scrollerX(),dz+dy-dA,0,null)}}},null,[bB]);ss.initClass(k,a,{get_scrollViewPagePosition:function(){return tab.DomUtil.getElementPosition(this.$0)},get_scrollViewSize:function(){return{w:this.$0[0].offsetWidth,h:this.$0[0].offsetHeight}},scrollToElement:function(dv,dw){var dx=dv.offsetTop;var dy=dx+dv.offsetHeight;var dz=this.$0.scrollTop();var dA=dz+this.$0[0].offsetHeight;if(dx<dz){var dB=((dx<=dw)?0:dx);this.$0.scrollTop(dB)}else if(dy>dA){this.$0.scrollTop(dz+dy-dA)}}},null,[bB]);ss.initInterface(bP,a,{add_disposed:null,remove_disposed:null},[ss.IDisposable]);ss.initClass(n,a,{add_disposed:function(dv){this.$1$1=ss.delegateCombine(this.$1$1,dv)},remove_disposed:function(dv){this.$1$1=ss.delegateRemove(this.$1$1,dv)},add_propertyChanged:function(dv){this.$1$2=ss.delegateCombine(this.$1$2,dv)},remove_propertyChanged:function(dv){this.$1$2=ss.delegateRemove(this.$1$2,dv)},dispose:function(){if(ss.isValue(this.$1$1)){this.$1$1(this);this.$1$1=null}this.$1$2=null;this.disposables.dispose()},notifyPropertyChanged:function(dv){if(!ss.staticEquals(this.$1$2,null)){this.$1$2(this,new cz(dv))}},raiseEvent:function(dv,dw){if(ss.isValue(dv)){dv(this,dw||ss.EventArgs.Empty)}},raiseActionEvent$1:function(dv){return function(dw,dx){if(ss.isValue(dw)){dw(dx)}}},raiseActionEvent:function(dv){if(ss.isValue(dv)){dv()}}},null,[ss.IDisposable,bP]);ss.initInterface(bq,a,{addToDom:null,onAddedToDom:null});ss.initClass(du,a,{add_disposed:function(dv){this.$1$1=ss.delegateCombine(this.$1$1,dv)},remove_disposed:function(dv){this.$1$1=ss.delegateRemove(this.$1$1,dv)},add_propertyChanged:function(dv){this.$1$2=ss.delegateCombine(this.$1$2,dv)},remove_propertyChanged:function(dv){this.$1$2=ss.delegateRemove(this.$1$2,dv)},get_element:function(){return this.$1},get_name:function(){return ss.getTypeFullName(ss.getInstanceType(this))},get_instanceId:function(){return this.$2},get_addedToDom:function(){return this.$0},get_eventNamespace:function(){return ss.formatString('.{0}_{1}',this.$2,ss.replaceAllString(ss.getTypeFullName(ss.getInstanceType(this)),'.','_'))},get_widgetId:function(){return this.$3},set_widgetId:function(dv){if(!ss.isNullOrEmptyString(this.$3)&&tab.StyleUtil.isValidCssClassName(this.$3)){this.$1.removeClass(this.$3)}this.$3=dv;if(!ss.isNullOrEmptyString(this.$3)&&tab.StyleUtil.isValidCssClassName(this.$3)){this.$1.addClass(this.$3)}},enableTextSelection:function(){du.enableTextSelectionOnElement(this.$1);return this},disableTextSelection:function(){du.disableTextSelectionOnElement(this.$1);return this},dispose:function(){this.disposables.dispose();this.$1.removeData('widgetInstance');this.$1.remove();this.onDisposed(ss.EventArgs.Empty)},toString:function(){return this.get_name()},raisePropertyChanged:function(dv){if(ss.isValue(this.$1$2)){this.$1$2(this,new cz(dv))}},createNamespacedEventName:function(dv){return dv+this.get_eventNamespace()},stopPropogationOfInputEvents:function(){tab.DomUtil.stopPropagationOfInputEvents(this.get_element(),this.get_eventNamespace())},handleInputEvents:function(dv){tab.DomUtil.handleInputEvents(this.get_element(),this.get_eventNamespace(),dv)},onDisposed:function(dv){if(ss.isValue(this.$1$1)){this.$1$1(this,ss.EventArgs.Empty)}},addToDom:function(dv){dv.append(this.$1);this.onAddedToDom()},onAddedToDom:function(){this.$0=true},addClass:function(dv){this.$1.addClass(dv)}},null,[bq,ss.IDisposable]);ss.initClass(o,a,{add_press:function(dv){this.$2$1=ss.delegateCombine(this.$2$1,dv)},remove_press:function(dv){this.$2$1=ss.delegateRemove(this.$2$1,dv)},add_click:function(dv){this.$2$2=ss.delegateCombine(this.$2$2,dv)},remove_click:function(dv){this.$2$2=ss.delegateRemove(this.$2$2,dv)},add_shiftClick:function(dv){this.$2$3=ss.delegateCombine(this.$2$3,dv)},remove_shiftClick:function(dv){this.$2$3=ss.delegateRemove(this.$2$3,dv)},add_ctrlClick:function(dv){this.$2$4=ss.delegateCombine(this.$2$4,dv)},remove_ctrlClick:function(dv){this.$2$4=ss.delegateRemove(this.$2$4,dv)},add_enter:function(dv){this.$2$5=ss.delegateCombine(this.$2$5,dv)},remove_enter:function(dv){this.$2$5=ss.delegateRemove(this.$2$5,dv)},add_exit:function(dv){this.$2$6=ss.delegateCombine(this.$2$6,dv)},remove_exit:function(dv){this.$2$6=ss.delegateRemove(this.$2$6,dv)},$b:function(dv){this.$2$7=ss.delegateCombine(this.$2$7,dv)},$c:function(dv){this.$2$7=ss.delegateRemove(this.$2$7,dv)},get_hoverTooltipText:function(){return this.get_element().attr('title')},set_hoverTooltipText:function(dv){this.get_element().attr('title',dv)},get_disabled:function(){return this.get_element().prop('disabled')},set_disabled:function(dv){this.get_element().prop('disabled',dv);this.get_element().toggleClass(this.$7,dv);if(dv){this.get_element().removeClass(this.$9)}},get_hoverClass:function(){return this.$9},set_hoverClass:function(dv){this.$9=dv},get_focusClass:function(){return this.$8},set_focusClass:function(dv){this.$8=dv},get_disabledClass:function(){return this.$7},set_disabledClass:function(dv){this.$7=dv},get_context:function(){return this.$6},set_context:function(dv){this.$6=dv},get_tableauClickHandler:function(){return this.$a},tabIndex:function(dv){this.get_element().attr('tabindex',dv.toString());return this},onClick:function(dv){var dw=ss.mkdel(this,function(){dv(this)});this.add_click(dw);return new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_click(dw)}))},onDoubleClick:function(dv){this.$a.onDoubleClick(ss.mkdel(this,this.handleDoubleClick));var dw=ss.mkdel(this,function(){dv(this)});this.$b(dw);return new tab.CallOnDispose(ss.mkdel(this,function(){this.$c(dw)}))},onShiftClick:function(dv){var dw=ss.mkdel(this,function(){dv(this)});this.add_shiftClick(dw);return new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_shiftClick(dw)}))},$4:function(){this.get_element().focusin(ss.mkdel(this,this.handleFocusIn)).focusout(ss.mkdel(this,this.handleFocusOut)).keypress(ss.mkdel(this,this.$5));var dv={};dv.hoverDelay=0;da.setHandler(dv,'hover',ss.mkdel(this,this.handleEnter));da.setHandler(dv,'mouseleave',ss.mkdel(this,this.handleLeave));this.$a=cZ.targetAndConfig(this.get_element().get(0),dv).onClick(ss.mkdel(this,this.handleClick)).onPress(ss.mkdel(this,this.handlePress));this.disposables.add$1(this.$a)},raiseEvent:function(dv){if(ss.isValue(dv)){dv()}},$5:function(dv){if(dv.which===13){dv.preventDefault();dv.stopPropagation();this.handleClick(null)}if(dv.which===32){dv.preventDefault();dv.stopPropagation();this.handleClick(null)}},handleFocusOut:function(dv){this.get_element().removeClass(this.$8)},handleFocusIn:function(dv){this.get_element().addClass(this.$8)},handleEnter:function(){if(!this.get_disabled()){this.get_element().addClass(this.$9)}this.raiseEvent(this.$2$5)},handleLeave:function(){this.get_element().removeClass(this.$9);this.raiseEvent(this.$2$6)},handleClick:function(dv){if(this.get_disabled()){return}if(ss.isValue(this.$2$3)&&ss.isValue(dv)&&dv.shiftKey){this.raiseEvent(this.$2$3)}else if(ss.isValue(this.$2$4)&&be.isCtrlKey(dv)){this.raiseEvent(this.$2$4)}else{this.raiseEvent(this.$2$2)}},handleDoubleClick:function(dv){if(this.get_disabled()){return}this.raiseEvent(this.$2$7)},handlePress:function(){if(this.get_disabled()){return}this.raiseEvent(this.$2$1)}},du,[bq,ss.IDisposable]);ss.initClass(q,a,{},ss.makeGenericType(p,[Object]));ss.initEnum(r,a,{medium:1,large:2});ss.initClass(s,a,{updateWidgetState:function(dv){this.get_widget().set_label(dv.label);this.get_widget().set_disabled(dv.disabled);this.get_widget().set_selected(dv.initialSelected);this.setState({selected:this.get_widget().get_selected()})},handleWidgetPropertyChanged:function(dv,dw){if(dw.get_propertyName()==='selected'){if(this.state.selected!==this.get_widget().get_selected()){this.setState({selected:this.get_widget().get_selected()});if(!ss.staticEquals(null,this.props.onSelectedChanged)){this.props.onSelectedChanged(this.state.selected)}}}}},ss.makeGenericType(cG,[bS,Object,Object]));ss.initClass(dd,a,{add_enterKeyPressed:function(dv){this.$2$1=ss.delegateCombine(this.$2$1,dv)},remove_enterKeyPressed:function(dv){this.$2$1=ss.delegateRemove(this.$2$1,dv)},add_escapeKeyPressed:function(dv){this.$2$2=ss.delegateCombine(this.$2$2,dv)},remove_escapeKeyPressed:function(dv){this.$2$2=ss.delegateRemove(this.$2$2,dv)},get_text:function(){return this.$7},set_text:function(dv){if(ss.referenceEquals(this.$7,dv)){return}this.$7=dv;this.raisePropertyChanged('text')},get_inputElement:function(){return this.$6.get_inputElement()},$4:function(dv){this.set_text(this.$6.get_inputElement().val())},$5:function(dv){if(dv.which===13){if(ss.isValue(this.$2$1)){this.$2$1()}return}if(dv.which===27){if(ss.isValue(this.$2$2)){this.$2$2()}}if(tab.BrowserSupport.get_isIE()&&(dv.which===27||tab.BrowserSupport.get_browserVersion()<9)){this.set_text(this.$6.get_inputElement().val())}},update:function(){if(!ss.referenceEquals(this.get_text(),this.$6.get_inputElement().val())){this.$6.get_inputElement().val(this.get_text())}}},du,[bq,ss.IDisposable]);ss.initClass(t,a,{get_dom:function(){return this.$b},get_searchBoxClearButton:function(){return this.$c},$8:function(){if(!ss.isNullOrEmptyString(this.get_text())){this.$b.get_searchBoxClear().show();this.$b.get_inputElementContainer().addClass('clearButtonOn')}else{this.$b.get_searchBoxClear().hide();this.$b.get_inputElementContainer().removeClass('clearButtonOn')}},$a:function(dv,dw){this.$8()},$9:function(dv){this.set_text('')}},dd,[bq,ss.IDisposable]);ss.initClass(u,a,{get_domRootElement:function(){return this.get_domRoot()},get_inputElement:function(){return this.$1},get_inputElementContainer:function(){return this.$2},get_searchBoxClear:function(){return this.$3}},dc,[ss.IDisposable,bM]);ss.initClass(v,a,{});ss.initClass(w,a,{$j:function(dv){this.$1$1=ss.delegateCombine(this.$1$1,dv)},$k:function(dv){this.$1$1=ss.delegateRemove(this.$1$1,dv)},$h:function(dv){this.$1$2=ss.delegateCombine(this.$1$2,dv)},$i:function(dv){this.$1$2=ss.delegateRemove(this.$1$2,dv)},$l:function(dv){this.$1$3=ss.delegateCombine(this.$1$3,dv)},$m:function(dv){this.$1$3=ss.delegateRemove(this.$1$3,dv)},get_target:function(){return this.$g},dispose:function(){this.$8();this.$b.dispose();if(!ss.isValue(this.$g)){return}this.$g.unbind('.'+this.$c);this.$g=null},onPress:function(dv){this.$j(dv);this.$b.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$k(dv)})));return this},onClick:function(dv){this.$h(dv);this.$b.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$i(dv)})));return this},onRightClick:function(dv){this.$l(dv);this.$b.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$m(dv)})));return this},setTarget:function(dv){this.$g=dv;dv.bind(this.$0('touchstart'),ss.mkdel(this,this.$7));this.$b.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){dv.unbind(this.$0('touchstart'))})));if(tsConfig.is_mobile){if(!tsConfig.is_touch){dv.bind(this.$0('mousedown'),ss.mkdel(this,this.$3)).bind(this.$0('click'),ss.mkdel(this,this.$2));this.$b.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){dv.unbind(this.$0('mousedown')).unbind(this.$0('click'))})))}}else{dv.bind(this.$0('mousedown'),ss.mkdel(this,this.$3)).bind(this.$0('click'),ss.mkdel(this,this.$2)).bind(this.$0('contextmenu'),ss.mkdel(this,this.$2));this.$b.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){dv.unbind(this.$0('mousedown')).unbind(this.$0('click')).unbind(this.$0('contextmenu'))})))}return this},$0:function(dv){return dv+'.'+this.$c},$8:function(){if(ss.isValue(this.$g)){this.$g.unbind(this.$0('touchend'));this.$g.unbind(this.$0('touchcancel'))}if(ss.isValue(this.$d)){document.body.removeEventListener('touchmove'.toString(),this.$d,true);this.$d=null}if(ss.isValue(this.$a)){window.clearTimeout(ss.unbox(this.$a));this.$a=null}},$3:function(dv){this.$e=dv.pageX;this.$f=dv.pageY;this.$9();if(ss.isValue(this.$1$1)){this.$1$1(dv)}},$1:function(dv){var dw=(ss.isValue(dv)?dv['originalEvent']:null);if(ss.isValue(dw)&&ss.isValue(dw.touches)&&ss.isValue(dw.touches[0])){return dw.touches[0]}return null},$7:function(dv){if(!tsConfig.is_mobile){if(tab.DomUtil.handleTouchEvents(dv.target)){dv.preventDefault()}else{return}}var dw=this.$1(dv);var dx=0;var dy=0;if(ss.isValue(dw)){dx=ss.coalesce(dw.pageX,0);dy=ss.coalesce(dw.pageY,0)}this.$g.bind(this.$0('touchend'),ss.mkdel(this,this.$5));this.$g.bind(this.$0('touchcancel'),ss.mkdel(this,this.$4));this.$9();if(tab.BrowserSupport.get_addEventListener()){this.$d=ss.thisFix(ss.mkdel(this,this.$6));document.body.addEventListener('touchmove'.toString(),this.$d,true)}this.$e=dx;this.$f=dy;if(ss.isValue(this.$1$1)){this.$1$1(dv)}},$5:function(dv){if(!tsConfig.is_mobile){if(tab.DomUtil.handleTouchEvents(dv.target)){dv.preventDefault()}else{return}}this.$2(dv)},$9:function(){if(ss.isValue(this.$a)){window.clearTimeout(ss.unbox(this.$a))}this.$a=window.setTimeout(ss.mkdel(this,this.$8),300)},$6:function(dv,dw){var dx=dw;if(!tsConfig.is_mobile){if(tab.DomUtil.handleTouchEvents(dv)){dw.preventDefault()}else{return}}var dy=dx.touches[0].pageX;var dz=dx.touches[0].pageY;if(Math.abs(dy-this.$e)>10||Math.abs(dz-this.$f)>10){this.$8()}},$4:function(dv){if(!tsConfig.is_mobile){if(tab.DomUtil.handleTouchEvents(dv.target)){dv.preventDefault()}else{return}}this.$8()},$2:function(dv){dv.stopPropagation();this.$8();if(dv.type==='contextmenu'){dv.preventDefault();if(ss.isValue(this.$1$3)){this.$1$3(dv)}}else{if(ss.isValue(this.$1$2)){this.$1$2(dv)}if(dv.type==='touchend'){v.preventGhostClick(this.$e,this.$f)}}}},null,[ss.IDisposable]);ss.initClass(ck,a,{});ss.initClass(x,a,{},ck);ss.initClass(y,a,{get_iconClass:function(){return this.$2},get_name:function(){return this.$3},get_data:function(){return this.$0},get_description:function(){return this.$1},asMenuItem:function(){return cd.newItemWithIconAndDescription(this,this.get_name(),this.get_iconClass(),this.get_description())}});ss.initClass(z,a,{},ck);ss.initEnum(A,a,{standard:0,dropdown:1,unification:2});ss.initEnum(B,a,{standard:0,autoFit:1});ss.initClass(C,a,{},dc,[ss.IDisposable]);ss.initEnum(D,a,{standard:0,compact:1,unification:2,lineAndArrow:3});ss.initClass(E,a,{$9:function(){this.$d.icon.removeClass('tabComboBoxNoIconPressed');this.$d.get_domRoot().removeClass('pressed')},$a:function(dv){if(!this.$e.get_enabled()){return}this.$d.get_domRoot().addClass('pressed');if(this.$e.get_showDropdownIcon()){this.$d.icon.addClass('tabComboBoxNoIconPressed')}this.$e.comboClicked(this.$d.get_domRoot())},$b:function(dv){var dw=0;switch(dv.which){case 40:{dw=1;break}case 38:{dw=-1;break}default:{return}}dv.preventDefault();dv.stopPropagation();var dx=ss.indexOf(this.$e.get_items(),this.$e.get_selectedItem());if(dx<0){return}dx+=dw;if(dx>=0&&dx<this.$e.get_items().length){this.$e.set_selectedItem(this.$e.get_items()[dx])}},$c:function(dv){if(ss.isInstanceOfType(dv,J)){return}this.$d.icon.remove();if(ss.isNullOrUndefined(dv)){var dw=(ss.isValue(this.$e.get_summary())?this.$e.get_summary():'&nbsp;');this.$d.name.html(dw);return}this.$d.icon=$('<span/>').addClass('tabComboBoxIcon').addClass(dv.get_iconClass()).appendTo(this.$d.get_domRoot());if(!ss.isValue(dv.get_iconClass())){this.$d.get_domRoot().addClass('tabComboBoxNoIcon')}this.$d.name.text(dv.get_name())},$8:function(){this.$c(this.$e.get_selectedItem())},$7:function(){this.$d.get_domRoot().toggleClass('disabled',!this.$e.get_enabled())},onAddedToDom:function(){du.prototype.onAddedToDom.call(this);if(this.$e.get_sizing()===1){var dv=cu.newView(ci).call(null,[this.$e.get_menu()]);var dw=$('<div>').css({visibility:'hidden',position:'absolute',left:0+'px',top:0+'px'});$(document.body).append(dw);dv.addToDom(dw);this.$d.get_domRoot().css({width:dv.get_element().width()+'px'});dv.dispose();dw.remove()}}},ss.makeGenericType(m,[F]),[bq,ss.IDisposable,ss.makeGenericType(bO,[F])]);ss.initClass(F,a,{add_itemsChanged:function(dv){this.$2$1=ss.delegateCombine(this.$2$1,dv)},remove_itemsChanged:function(dv){this.$2$1=ss.delegateRemove(this.$2$1,dv)},add_selectedItemChanged:function(dv){this.$2$2=ss.delegateCombine(this.$2$2,dv)},remove_selectedItemChanged:function(dv){this.$2$2=ss.delegateRemove(this.$2$2,dv)},add_menuHidden:function(dv){this.$2$3=ss.delegateCombine(this.$2$3,dv)},remove_menuHidden:function(dv){this.$2$3=ss.delegateRemove(this.$2$3,dv)},add_enabledChanged:function(dv){this.$2$4=ss.delegateCombine(this.$2$4,dv)},remove_enabledChanged:function(dv){this.$2$4=ss.delegateRemove(this.$2$4,dv)},get_theme:function(){return this.$h},set_theme:function(dv){this.$h=dv},get_menu:function(){if(ss.isNullOrUndefined(this.$7)){this.$2()}return this.$7},get_menuTheme:function(){return this.$b},set_menuTheme:function(dv){this.$b=dv},get_sizing:function(){return this.$f},set_sizing:function(dv){this.$f=dv},get_menuStyleClass:function(){return this.$a},set_menuStyleClass:function(dv){this.$a=dv},get_items:function(){return this.$9},get_selectedItem:function(){return this.$c},set_selectedItem:function(dv){if(ss.referenceEquals(this.$c,dv)&&!this.get_allowSetToSameValue()){return}this.$c=dv;if(ss.isValue(this.$2$2)){this.$2$2(this.$c)}},get_summary:function(){return this.$g},set_summary:function(dv){this.$g=dv},get_showSelectedItem:function(){return this.$e},set_showSelectedItem:function(dv){this.$e=dv},get_showDropdownIcon:function(){return this.$d},set_showDropdownIcon:function(dv){this.$d=dv},get_enabled:function(){return this.$8},set_enabled:function(dv){if(this.$8===dv){return}this.$8=dv;this.raiseActionEvent(this.$2$4)},get_additionalMenuClass:function(){return this.$6},set_additionalMenuClass:function(dv){this.$6=dv},get_allowSetToSameValue:function(){return this.$2$5},set_allowSetToSameValue:function(dv){this.$2$5=dv},dispose:function(){if(ss.isValue(this.$7)){this.$7.dispose()}n.prototype.dispose.call(this);this.$7=null},setItems:function(dv){ss.clear(this.$9);var dw=ss.getEnumerator(dv);try{while(dw.moveNext()){var dx=dw.current();this.$9.push(dx)}}finally{dw.dispose()}this.$4()},setItemsWithInitialSelection:function(dv,dw){ss.clear(this.$9);var dx=ss.getEnumerator(dv);try{while(dx.moveNext()){var dy=dx.current();this.$9.push(dy)}}finally{dx.dispose()}this.$c=dw;this.$4()},addItem:function(dv){this.$9.push(dv);this.$4()},clearItems:function(){ss.clear(this.$9);this.$4();this.set_selectedItem(null)},updateCurrentMenu:function(){if(this.$9.length===0||!this.$8||!ss.isValue(this.$7)){return}var dv=this.$1();this.$7.set_menu(new cc(dv.item1));this.$7.set_selectedItem(dv.item2)},$2:function(){if(this.$9.length===0||!this.$8){return}var dv=this.$1();this.$7=cj.createForMenu(new cc(dv.item1),ss.mkdel(this,this.$3),this.$0())},comboClicked:function(dv){if(this.$9.length===0||!this.$8){return}var dw=this.$1();this.$2();this.$7.add_hidden(ss.mkdel(this,this.$5));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$7.remove_hidden(ss.mkdel(this,this.$5))})));var dx=cT.create(dv,false);dx.minWidth=dv.outerWidth(false);dx.additionalMenuClass='tabComboBoxMenu';if(ss.isValue(this.$6)){dx.additionalMenuClass+=' '+this.$6}this.$7.show(dx);this.$7.set_selectedItem(dw.item2);this.$7.set_focusedItem(dw.item2)},$1:function(){var dv=[];var dw=null;if(ss.isValue(this.$9)){for(var dx=0;dx<this.$9.length;dx++){var dy=this.$9[dx];if(this.$e||!ss.referenceEquals(dy,this.$c)){var dz=dy.asMenuItem();if(ss.referenceEquals(dy,this.$c)){dw=dz}dv.push(dz)}}}return{item1:dv,item2:dw}},$0:function(){switch(this.$b){case 0:{return new z}case 1:{return new x(this.get_menuStyleClass())}case 2:{return new dr}default:{return new z}}},$5:function(){if(ss.isValue(this.$2$3)){this.$2$3()}},$4:function(){if(ss.isValue(this.$2$1)){this.$2$1()}},$3:function(dv){var dw=dv.get_data();this.set_selectedItem(dw)}},n,[ss.IDisposable,bP]);ss.initClass(G,a,{add_listItemClicked:function(dv){this.$2$1=ss.delegateCombine(this.$2$1,dv)},remove_listItemClicked:function(dv){this.$2$1=ss.delegateRemove(this.$2$1,dv)},add_textInputElementClicked:function(dv){this.$2$2=ss.delegateCombine(this.$2$2,dv)},remove_textInputElementClicked:function(dv){this.$2$2=ss.delegateRemove(this.$2$2,dv)},add_textInputClearButtonClicked:function(dv){this.$2$3=ss.delegateCombine(this.$2$3,dv)},remove_textInputClearButtonClicked:function(dv){this.$2$3=ss.delegateRemove(this.$2$3,dv)},add_isShowingInitialSearchTextChanged:function(dv){this.$2$4=ss.delegateCombine(this.$2$4,dv)},remove_isShowingInitialSearchTextChanged:function(dv){this.$2$4=ss.delegateRemove(this.$2$4,dv)},get_template:function(){return this.compositeSearchWidgetTemplate.get_template()},get_domRoot:function(){return this.compositeSearchWidgetTemplate.get_domRootElement()},get_textInputView:function(){return this.compositeSearchWidgetTemplate.get_textInputView()},get_searchButton:function(){return this.compositeSearchWidgetTemplate.get_searchButton()},get_clearButton:function(){return this.compositeSearchWidgetTemplate.get_clearButton()},get_listViewModel:function(){return this.$2$5},set_listViewModel:function(dv){this.$2$5=dv},get_isShowingInitialSearchText:function(){return this.$8},set_isShowingInitialSearchText:function(dv){if(dv===this.get_isShowingInitialSearchText()){return}this.$8=dv;if(!ss.staticEquals(this.$2$4,null)){this.$2$4(this.$8)}},showList:function(dv,dw,dx){this.removeList();if(dv.length>0){this.set_listViewModel(new cy(dv,dw,0));if(!ss.staticEquals(this.$2$1,null)){this.get_listViewModel().add_selectionChanged(ss.mkdel(this,function(){this.$2$1(this.get_listViewModel().get_firstSelectedItem())}))}var dy=new cx(this.get_listViewModel());dy.addClass('tabCompositeSearchWidgetList');dy.addToDom(dx||this.get_domRoot())}},showListInsideUberPopup:function(dv,dw,dx,dy){if(dv.length<=0){this.removeList();return}this.set_listViewModel(new cy(dv,dw,0));if(!ss.staticEquals(this.$2$1,null)){this.get_listViewModel().add_selectionChanged(ss.mkdel(this,function(){this.$2$1(this.get_listViewModel().get_firstSelectedItem())}))}if(ss.isNullOrUndefined(this.$9)){this.$9=dn.createForContent(this.get_listViewModel(),dx,null,true);var dz=(ss.isValue(dy)?['tabCompositeSearchWidgetList',dy]:['tabCompositeSearchWidgetList']);this.$9.options=new dj(0,1,1,false,true,dz,false,dx.outerWidth(),1);this.$9.add_hidden(ss.mkdel(this,function(){this.$9=null}));this.$9.show()}else{this.$9.set_content(this.get_listViewModel())}},removeList:function(){if(ss.isValue(this.$9)){this.$9.hide(false)}if(ss.isValue(this.get_listViewModel())){this.get_listViewModel().dispose();this.set_listViewModel(null)}},$4:function(){if(ss.isValue(this.initialSearchTextInfo)){this.showInitialSearchText(true)}else{this.get_textInputView().set_text('')}if(!ss.staticEquals(this.$2$3,null)){this.$2$3()}},showInitialSearchText:function(dv){if(ss.isNullOrUndefined(this.initialSearchTextInfo)||this.get_isShowingInitialSearchText()===dv){return}this.get_textInputView().set_text((dv?this.initialSearchTextInfo.initialSearchText:''));this.get_textInputView().get_inputElement().toggleClass(this.initialSearchTextInfo.initialSearchTextDomClassName,dv);if(dv&&this.get_textInputView().get_inputElement().is(':visible')){tab.DomUtil.setSelectionRangeOnInput(this.get_textInputView().get_inputElement().get(0),0,0)}this.set_isShowingInitialSearchText(dv)},$5:function(dv){if(this.get_isShowingInitialSearchText()){if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9||tab.BrowserSupport.get_isSafari()){this.showInitialSearchText(false)}else{dv.preventDefault();tab.DomUtil.setSelectionRangeOnInput(this.get_textInputView().get_inputElement().get(0),0,0);this.get_textInputView().get_inputElement().get(0).focus()}}if(!ss.staticEquals(this.$2$2,null)){this.$2$2()}},$6:function(dv){if(!this.get_isShowingInitialSearchText()){return}var dw=dv.which;if(dw===20||dw===16||dw===9||dw===27||dw===17||dw===91||dw===19||dw===18||dw===93||dw===45||dw===34||dw===33||dw===36||dw===35||dw===8||dw===46||dw>=112&&dw<=123||dw>=144&&dw<=145){return}this.showInitialSearchText(false)},$7:function(dv){if(!this.get_isShowingInitialSearchText()){return}this.showInitialSearchText(false)}},du,[bq,ss.IDisposable]);ss.initClass(H,a,{});ss.initInterface(br,a,{get_template:null,get_domRootElement:null,get_textInputView:null,get_searchButton:null,get_clearButton:null,disposeTemplate:null});ss.initClass(I,a,{get_domRootElement:function(){return this.get_domRoot()},get_template:function(){return this},get_textInputView:function(){return this.searchTextInputView},get_searchButton:function(){return this.$2},get_clearButton:function(){return this.$1},disposeTemplate:function(){this.dispose()}},dc,[ss.IDisposable,br]);ss.initClass(J,a,{get_domRoot:function(){return this.$4},asMenuItem:function(){return N.newCustomMenuItem(this.get_domRoot())}},y);ss.initClass(K,a,{setCursor:function(dv){dv.css('cursor',this.$0)}});ss.initClass(bI,a,{},dc,[ss.IDisposable]);ss.initClass(L,a,{},bI,[ss.IDisposable]);ss.initClass(cI,a,{get_scrollbarBuffer:null,get_scrollerX:null,get_scrollerY:null,scrollTo:null,scrollToElement:null},ss.makeGenericType(m,[cJ]),[bq,ss.IDisposable,ss.makeGenericType(bO,[cJ])]);ss.initClass(bJ,a,{get_scrollerX:function(){return-this.scroller.x},get_scrollerY:function(){return-this.scroller.y},get_dom:function(){return this.get_template()},get_scrollableViewModel:function(){return this.get_viewModel()},get_scrollbarBuffer:null,get_verticalScrollbar:null,get_horizontalScrollbar:null,addScroller:function(){this.createScroller();this.postCreationScrollerSetup();this.get_dom().scroll.toggleClass('tabScrollerCanScrollX',this.get_scrollableViewModel().get_scrollX());this.get_dom().scroll.toggleClass('tabScrollerCanScrollY',this.get_scrollableViewModel().get_scrollY())},createScroller:null,postCreationScrollerSetup:function(){this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.scroller.destroy()})));this.scroller.on('scrollStart',ss.mkdel(this,this.$a));this.scroller.on('scrollEnd',ss.mkdel(this,this.$9));this.get_dom().scroll.addClass('tabScrollerIScroll');this.disposables.add$1(w.targetAndClick(this.get_verticalScrollbar(),function(dv){dv.stopPropagation()}));this.disposables.add$1(w.targetAndClick(this.get_horizontalScrollbar(),function(dv){dv.stopPropagation()}));this.get_dom().get_domRoot().on('mousewheel DOMMouseScroll',function(dv){dv.stopPropagation()})},setUpEvents:function(){this.get_scrollableViewModel().add_contentChanged(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_scrollableViewModel().remove_contentChanged(ss.mkdel(this,this.$7))})));this.get_scrollableViewModel().add_refresh(ss.mkdel(this,this.handleRefresh));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_scrollableViewModel().remove_refresh(ss.mkdel(this,this.handleRefresh))})))},onAddedToDom:function(){du.prototype.onAddedToDom.call(this);this.addNewContent()},$7:function(){this.get_dom().content.empty();this.addNewContent()},addNewContent:null,handleRefresh:function(){this.scroller.refresh();this.$8()},$8:function(){this.get_verticalScrollbar().removeClass('noScroll');if(!this.scroller.hasVerticalScroll){this.get_verticalScrollbar().addClass('noScroll')}this.get_horizontalScrollbar().removeClass('noScroll');if(!this.scroller.hasHorizontalScroll){this.get_horizontalScrollbar().addClass('noScroll')}},$a:function(){if(tsConfig.is_mobile&&(this.scroller.directionX===0||!this.scroller.hasHorizontalScroll)&&(this.scroller.directionY===0||!this.scroller.hasVerticalScroll)){return}if(tab.BrowserSupport.get_mouseCapture()){tab.DomUtil.setCapture(this.get_dom().scroll[0],true);this.scrollEndCleanup.add$1(new tab.CallOnDispose(function(){tab.DomUtil.releaseCapture()}))}else if(tab.BrowserSupport.get_addEventListener()&&!tsConfig.is_mobile){var dv=ss.mkdel(this,function(dx){this.sendEventToScroller(dx)});var dw=ss.mkdel(this,function(dx){var dy=dx.toElement;if(ss.isNullOrUndefined(dy)||dy.nodeName==='HTML'){if('createEvent'in document){var dz=document.createEvent('MouseEvent');dz.initEvent('mouseup',false,false);this.sendEventToScroller(dz)}}});document.addEventListener('mousemove',dv,true);document.addEventListener('mouseup',dv,true);document.addEventListener('mouseout',dw,true);this.scrollEndCleanup.add$1(new tab.CallOnDispose(function(){document.removeEventListener('mousemove',dv,true);document.removeEventListener('mouseup',dv,true);document.removeEventListener('mouseout',dw,true)}))}this.get_dom().scroll.addClass('tabScrolling')},sendEventToScroller:function(dv){this.scroller.handleEvent(dv);for(var dw=0;dw<this.scroller.indicators.length;dw++){var dx=this.scroller.indicators[dw];if(!ss.referenceEquals(dv.type,'mousemove'.toString())||dx.moved){dx.handleEvent(dv)}}},$9:function(){this.scrollEndCleanup.dispose();this.get_dom().scroll.removeClass('tabScrolling')},scrollTo:function(dv,dw,dx,dy){this.scroller.scrollTo(-dv,-dw,dx,dy)},scrollToElement:function(dv,dw,dx,dy){this.scroller.scrollToElement(dv,dw,dx,dy)}},cI,[bq,ss.IDisposable,ss.makeGenericType(bO,[cJ])]);ss.initClass(M,a,{get_scrollbarBuffer:function(){return 0},$d:function(){return this.get_template()},get_verticalScrollbar:function(){return this.$d().verticalScrollbar},get_horizontalScrollbar:function(){return this.$d().horizontalScrollbar},$b:function(){this.get_scrollableViewModel().get_indicatorOptions().resize=false;if(!tsConfig.is_mobile){this.get_scrollableViewModel().get_indicatorOptions().interactive=true}if(this.get_scrollableViewModel().get_scrollY()){this.get_scrollableViewModel().get_indicatorOptions().el=this.get_verticalScrollbar()[0]}else if(this.get_scrollableViewModel().get_scrollX()){this.get_scrollableViewModel().get_indicatorOptions().el=this.get_horizontalScrollbar()[0]}},createScroller:function(){this.scroller=new IScroll(this.$d().contentWindow[0],this.get_scrollableViewModel().get_options())},$c:function(){if(tab.BrowserSupport.get_addEventListener()){var dv=ss.mkdel(this,function(dw){this.sendEventToScroller(dw)});if(!tsConfig.is_mobile){this.get_template().get_domRoot()[0].addEventListener('mousewheel',dv,false);this.get_template().get_domRoot()[0].addEventListener('DOMMouseScroll',dv,false);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_template().get_domRoot()[0].removeEventListener('mousewheel',dv,false);this.get_template().get_domRoot()[0].removeEventListener('DOMMouseScroll',dv,false)})))}}},addNewContent:function(){this.get_dom().content.append(this.get_scrollableViewModel().get_content());if(this.get_scrollableViewModel().get_scrollY()){this.$d().verticalScrollbarIndicator.height(M.$0(this.$d().verticalScrollbar.height(),this.$d().contentWindow.height(),this.$d().content.height())+'px')}else if(this.get_scrollableViewModel().get_scrollX()){this.$d().horizontalScrollbarIndicator.width(M.$0(this.$d().horizontalScrollbar.width(),this.$d().contentWindow.width(),this.$d().content.width())+'px')}this.handleRefresh()}},bJ,[bq,ss.IDisposable,ss.makeGenericType(bO,[cJ])]);ss.initClass(cd,a,{get_name:function(){return this.$1$1},set_name:function(dv){this.$1$1=dv},get_description:function(){return this.$1$2},set_description:function(dv){this.$1$2=dv},get_iconClass:function(){return this.$1$3},set_iconClass:function(dv){this.$1$3=dv},get_iconClassTwo:function(){return this.$1$4},set_iconClassTwo:function(dv){this.$1$4=dv},get_itemClass:function(){return this.$1$5},set_itemClass:function(dv){this.$1$5=dv},get_checkState:function(){return this.$1$6},set_checkState:function(dv){this.$1$6=dv},get_enabled:function(){return this.$1$7},set_enabled:function(dv){this.$1$7=dv},get_isDivider:function(){return this.$1$8},set_isDivider:function(dv){this.$1$8=dv},get_isTextInput:function(){return this.$1$9},set_isTextInput:function(dv){this.$1$9=dv},get_subMenu:function(){return this.$1$10},set_subMenu:function(dv){this.$1$10=dv},get_data:function(){return this.$1$11},set_data:function(dv){this.$1$11=dv},get_id:function(){return this.$1$12},set_id:function(dv){this.$1$12=dv}});ss.initClass(N,a,{get_domRoot:function(){return this.$0},set_domRoot:function(dv){this.$0=dv}},cd);ss.initClass(O,a,{},bI,[ss.IDisposable]);ss.initClass(P,a,{get_scrollbarSize:function(){return 9},get_scrollbarBuffer:function(){return 10},get_verticalScrollbar:function(){return this.$c},get_horizontalScrollbar:function(){return this.$b},createScroller:function(){this.scroller=new IScroll(this.get_dom().scroll[0],this.get_scrollableViewModel().get_options());if(this.get_scrollableViewModel().get_scrollY()){this.get_dom().content.css('margin-right',this.get_scrollbarBuffer()+'px')}if(this.get_scrollableViewModel().get_scrollX()){this.get_dom().content.css('margin-bottom',this.get_scrollbarBuffer()+'px')}this.$c=this.get_dom().scroll.find('.iScrollVerticalScrollbar').css('width',this.get_scrollbarSize()+'px');this.$b=this.get_dom().scroll.find('.iScrollHorizontalScrollbar').css('height',this.get_scrollbarSize()+'px')},addNewContent:function(){this.get_dom().content.append(this.get_scrollableViewModel().get_content());this.handleRefresh()}},bJ,[bq,ss.IDisposable,ss.makeGenericType(bO,[cJ])]);ss.initClass(Q,a,{add_closing:function(dv){this.$2$1=ss.delegateCombine(this.$2$1,dv)},remove_closing:function(dv){this.$2$1=ss.delegateRemove(this.$2$1,dv)},add_closed:function(dv){this.$2$2=ss.delegateCombine(this.$2$2,dv)},remove_closed:function(dv){this.$2$2=ss.delegateRemove(this.$2$2,dv)},add_resizeEnd:function(dv){this.$2$3=ss.delegateCombine(this.$2$3,dv)},remove_resizeEnd:function(dv){this.$2$3=ss.delegateRemove(this.$2$3,dv)},get_body:function(){return this.$d},set_body:function(dv){if(ss.referenceEquals(this.$d,dv)){return}if(ss.isValue(this.$d)){this.$d.unbind(this.get_eventNamespace())}this.$d=dv;this.get_element().find('.tab-dialogBodyContainer').html('').append(dv);this.setInitialFocus()},get_position:function(){return{x:this.$i,y:this.$j}},set_position:function(dv){this.$i=dv.x;this.$j=dv.y;tab.DomUtil.setElementPosition(this.$f,this.$i,this.$j,null,false);this.$f.css('position','fixed');this.raisePropertyChanged('position')},get_draggable:function(){return ss.isValue(this.$h)},get_resizeable:function(){return ss.isValue(this.$k)},set_resizeable:function(dv){if(dv){if(ss.isNullOrUndefined(this.$k)){this.$k=new cH(this.$l,this.$f,'bottomRight');this.$k.add_endAction(ss.mkdel(this,this.$b))}this.$l.show();this.$f.addClass('resizeable')}else{if(ss.isValue(this.$k)){this.$k.remove_endAction(ss.mkdel(this,this.$b));this.$k.dispose();this.$k=null}this.$l.hide();this.$f.removeClass('resizeable')}},get_zIndex:function(){return tab.DomUtil.getComputedZIndex(this.get_element()[0])},set_zIndex:function(dv){this.get_element().css('z-index',dv.toString())},get_startingPositionX:function(){return this.$2$4},set_startingPositionX:function(dv){this.$2$4=dv},get_startingPositionY:function(){return this.$2$5},set_startingPositionY:function(dv){this.$2$5=dv},get_titleUnescaped:function(){return this.get_titleElement().text()},set_titleUnescaped:function(dv){this.get_titleElement().text(dv)},get_isShown:function(){return this.$g},get_setFocusOnShow:function(){return this.$m},set_setFocusOnShow:function(dv){this.$m=dv},get_closeButton:function(){return this.$e},get_closeButtonVisible:function(){return this.get_element().find('.tab-dialogCloseButton').is(':visible')},set_closeButtonVisible:function(dv){if(dv){this.get_element().find('.tab-dialogCloseButton').show()}else{this.get_element().find('.tab-dialogCloseButton').hide()}},get_stayInWindow:function(){return this.get_stayInWindow()},set_stayInWindow:function(dv){if(dv&&!this.$n){this.$4()}else if(!dv){this.$a()}this.$n=dv},get_useClosingAnimation:function(){return this.$p},set_useClosingAnimation:function(dv){this.$p=dv},get_dialogElement:function(){return this.$f},get_titleBarElement:function(){return this.$o},get_titleElement:function(){return this.get_element().find('.tab-dialogTitle')},get_resizerElement:function(){return this.$l},configMoveDragSource:function(dv){if(ss.isValue(this.$h)){throw new ss.Exception('dialog can only be configured once.')}this.$h=dv(this);if(ss.isValue(this.$h)){this.$h.add_endAction(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$h.remove_endAction(ss.mkdel(this,this.$9));this.$h.dispose()})))}},show:function(){this.ensureAttachedAndSized();this.get_element().show();this.$g=true;this.moveToTop();if(this.get_setFocusOnShow()){this.setInitialFocus()}},close:function(dv){if(!this.get_isShown()){if(!ss.staticEquals(dv,null)){dv()}return}var dw=new ss.CancelEventArgs;this.onClosing(dw);if(dw.cancel){return}tab.DomUtil.blur();this.$c=dv;if(this.get_useClosingAnimation()){this.get_element().fadeOut('fast',ss.mkdel(this,this.$5))}else{this.get_element().hide();this.$5()}},closeAndDispose:function(){this.close(ss.mkdel(this,this.dispose))},$5:function(){this.detach();if(!ss.staticEquals(this.$c,null)){this.$c();this.$c=null}this.onClosed(new ss.EventArgs)},onClosing:function(dv){if(!ss.staticEquals(this.$2$1,null)){this.$2$1(this,dv)}},onClosed:function(dv){if(!ss.staticEquals(this.$2$2,null)){this.$2$2(this,dv)}},isAttached:function(){return ss.referenceEquals(this.get_element().parent().get(0),document.body)},ensureAttachedAndSized:function(){if(this.isAttached()){return}this.get_element().appendTo(document.body);this.positionInWindow();this.bindToEvents()},bindToEvents:function(){this.get_element().bind(this.createNamespacedEventName('keydown'),ss.mkdel(this,this.onKeyDown));this.get_element().bind(this.createNamespacedEventName('focusin'),ss.mkdel(this,this.onFocusIn))},$6:function(dv,dw){if(!this.$g){return}if(ss.isValue(dv)&&tab.DomUtil.isEqualOrAncestorOf(this.get_element()[0],dv.target)){this.moveToTop()}},unbindEvents:function(){this.get_element().unbind(this.get_eventNamespace())},$4:function(){cv.add_orientationChanged(ss.mkdel(this,this.ensureOnScreen));if(!tsConfig.is_mobile){$(window).bind(this.createNamespacedEventName('resize'),ss.mkdel(this,function(){this.ensureOnScreen()}))}},$a:function(){cv.remove_orientationChanged(ss.mkdel(this,this.ensureOnScreen));if(!tsConfig.is_mobile){$(window).unbind(this.createNamespacedEventName('resize'))}},detach:function(){this.$g=false;this.get_element().hide();this.get_element().detach();this.unbindEvents();if(ss.referenceEquals(Q.$6,this)){Q.$6=null}},dispose:function(){if(ss.isValue(this.$e)){this.$e.remove_click(ss.mkdel(this,this.$8));this.$e.dispose();this.$e=null}if(ss.isValue(this.$k)){this.$k.remove_endAction(ss.mkdel(this,this.$b));this.$k.dispose();this.$k=null}this.$a();this.$g=false;this.$2$2=null;this.$2$1=null;this.unbindEvents();du.prototype.dispose.call(this);if(ss.referenceEquals(Q.$6,this)){Q.$6=null}},setInitialFocus:function(){if(this.$g&&!tsConfig.is_mobile_app){var dv=this.get_element().find('.tab-dialogBodyContainer :tabbable');if(dv.length>0){dv.eq(0).focus()}else{this.$f.eq(0).focus()}}},ensureOnScreen:function(){if(!this.get_isShown()){return}cV.getViewport(ss.mkdel(this,function(dv){var dw=this.$f.outerWidth(true);var dx=this.$f.outerHeight(true);if(this.get_resizeable()){if(dw>dv.get_dimensions().w){var dy=this.$f.width();this.$f.width(dv.get_dimensions().w-(dw-dy));dw=dv.get_dimensions().w}if(dx>dv.get_dimensions().h){var dz=this.$f.height();this.$f.height(dv.get_dimensions().h-(dx-dz));dx=dv.get_dimensions().h}}var dA=null;if(this.$i+dw>dv.get_dimensions().w){dA=Math.max(0,dv.get_dimensions().w-dw)}var dB=null;if(this.$j+dx>dv.get_dimensions().h){dB=Math.max(0,dv.get_dimensions().h-dx)}if(ss.isValue(dA)||ss.isValue(dB)){var dC=dA;if(ss.isNullOrUndefined(dC)){dC=this.$i}dA=dC;var dD=dB;if(ss.isNullOrUndefined(dD)){dD=this.$j}dB=dD;this.set_position({x:ss.unbox(dA),y:ss.unbox(dB)})}}))},positionInWindow:function(){var dv=0;var dw=0;var dx=this.$f.outerWidth(true);var dy=this.$f.outerHeight(true);var dz=$(window).width();var dA=$(window).height();if(ss.isValue(this.get_startingPositionX())){var dB=Math.min(ss.unbox(this.get_startingPositionX())+dx,dz);dv=Math.max(0,dB-dx)}else{dv=Math.max(0,Math.round((dz-dx)/2))}if(ss.isValue(this.get_startingPositionY())){var dC=Math.min(ss.unbox(this.get_startingPositionY())+dy,dA);dw=Math.max(0,dC-dy)}else{dw=Math.max(0,Math.round((dA-dy)/2))}this.set_position({x:dv,y:dw})},moveToTop:function(){if(!this.$g){return}if(ss.isNullOrUndefined(Q.$6)){Q.$6=this;return}if(!ss.referenceEquals(Q.$6,this)){Q.$6=this;this.get_element().appendTo(document.body);tab.DomUtil.blur()}},$b:function(dv){if(!ss.staticEquals(this.$2$3,null)){this.$2$3()}},$9:function(dv){this.set_position(tab.PointUtil.fromPosition(this.$f.position()))},$8:function(){this.close(null)},onKeyDown:function(dv){if(dv.which===9){this.$7(dv);return}},onFocusIn:function(dv){if(V.get_isDragging()){return}this.moveToTop()},$7:function(dv){var dw=this.get_element().find(':tabbable');var dx=dw.filter(':first');var dy=dw.filter(':last');if(ss.referenceEquals(dv.target,dx[0])&&dv.shiftKey){dy.focusDelayed(1);dv.preventDefault();dv.stopPropagation()}else if(ss.referenceEquals(dv.target,dy[0])&&!dv.shiftKey){dx.focusDelayed(1);dv.preventDefault();dv.stopPropagation()}}},du,[bq,ss.IDisposable]);ss.initClass(bf,a,{$1:function(){return'tab-'+this.type},update:function(dv){if(ss.isValue(dv)){$.extend(this.$2,dv);$(this.$2.domElem).data(this.$1(),this)}},start:function(dv){},move:function(dv){},end:function(dv){},cancel:function(){},$0:function(dv,dw,dx){if(da.isHandling(this.$2,dv)){var dy=dw;$.extend(dy,dx);dy.gestureName=this.type;dy.$0=dv;var dz=da.$1(this.$2,dv);dz(dy)}},dispose:function(){this.cancel();$(this.$2.domElem).removeData(this.$1())}},null,[ss.IDisposable]);ss.initClass(R,a,{start:function(dv){var dw=dv.touches[0];if(dv.touches.length!==this.numTouches){this.reset();return}var dx=this.$d(dv);if(!this.$f('globalFirstTouch',dv)){return}this.$0('firstTouch',dv,dx);this.$o=dw.pageX;this.$p=dw.pageY;this.$k=true;this.$4(this.$m);this.$m=null;if(!ss.isValue(this.$g)){this.$n=(new Date).getTime();this.$l=window.setTimeout(ss.mkdel(this,function(){this.$7(dv,dx)}),500);this.$m=window.setTimeout(ss.mkdel(this,function(){this.$9(dv,dx)}),750)}},move:function(dv){if(this.$e(dv)){this.reset()}if(dv.type==='touchmove'){this.$0('touchMove',dv,this.$d(dv))}},end:function(dv){var dw=this.$d(dv);if(this.$i){this.$a(dv,dw)}this.$3();if(this.$k){if(ss.isValue(this.$g)&&ss.unbox(this.$g)){this.$5(dv,dw)}else{this.$8(dv,dw)}}if(dv.type==='contextmenu'){if(!this.$f('globalRightClick',dv)){return}this.$b(dv,dw)}if(dv.touches.length===0){if(!this.$f('globalLastTouch',dv)){return}this.$0('lastTouch',dv,dw)}},cancel:function(){this.reset()},reset:function(){this.$3();this.$k=false;this.$g=null;this.$j=false;this.$i=false;this.$4(this.$h);this.$h=null},$6:function(dv,dw,dx,dy){this.$0(dv,dw,dx);if(ss.isValue(dy)&&dy['reset']===true){this.reset()}},$5:function(dv,dw){this.$4(this.$h);this.$h=null;this.$6('doubleTap',dv,dw,ss.mkdict(['reset',true]))},$9:function(dv,dw){this.$j=false;if(!this.$f('globalPress',dv)){return}this.$6('press',dv,dw,ss.mkdict(['reset',true]));this.$i=true},$7:function(dv,dw){this.$j=true;this.$6('potentialPress',dv,dw)},$a:function(dv,dw){this.$6('pressEnd',dv,dw);this.$i=false},$3:function(){this.$4(this.$l);this.$l=null;this.$4(this.$m);this.$m=null;if(this.$j){this.$6('cancelPotentialPress',{},null)}},$8:function(dv,dw){this.$g=true;if(!this.$f('globalPotentialTap',dv)){return}if(da.isHandling(this.$2,'doubleTap')){this.$h=window.setTimeout(ss.mkdel(this,function(){this.reset()}),390-this.$c())}else{this.reset()}this.$0('potentialTap',dv,dw);this.$0('tap',dv,dw)},$b:function(dv,dw){this.$0('rightClick',dv,dw)},$f:function(dv,dw){var dx=false;var dy=ss.mkdel(this,function(dz){this.reset();if(dz){dw.preventDefault();dw.stopPropagation()}dx=true});dojo.publish(dv.toString(),[dw,dy]);return!dx},$4:function(dv){if(ss.isValue(dv)){window.clearTimeout(ss.unbox(dv))}},$c:function(){var dv=(new Date).getTime()-this.$n;return dv},$e:function(dv){var dw=dv.touches[0];return Math.abs(dw.pageX-this.$o)>this.slop||Math.abs(dw.pageY-this.$p)>this.slop},$d:function(dv){var dw={};dw.pageX=dv.changedTouches[0].pageX;dw.pageY=dv.changedTouches[0].pageY;dw.clientX=dv.changedTouches[0].clientX;dw.clientY=dv.changedTouches[0].clientY;return dw}},bf,[ss.IDisposable]);ss.initClass(S,a,{asMenuItem:function(){return cd.newDivider()}},y);ss.initEnum(T,a,{useScrollSize:'useScrollSize',useClientSize:'useClientSize'},true);ss.initInterface(bC,a,{handleCapturedMouseMove:null,handleCapturedMouseComplete:null});ss.initClass(U,a,{start:function(dv){var dw=dv.touches[0];if(ss.isValue(dv.target)&&dv.target.tagName.toUpperCase()==='IMG'&&!tsConfig.is_mobile){dv.preventDefault()}if(dv.touches.length!==this.numTouches){if(this.$6){this.$0('dragEnd',dv,this.$7)}this.$6=false;this.$5=true;return}if(ss.isValue(this.$8)&&!tsConfig.is_touch){this.end(dv)}this.$5=false;this.$8={};this.$8.pageX=dw.pageX;this.$8.pageY=dw.pageY;this.$7=this.$8},move:function(dv){if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9&&ss.isValue(dv.target)&&dv.target.tagName.toUpperCase()==='IMG'){dv.preventDefault()}if(this.$5){return}this.$7=this.$3(dv);if(this.$6){this.$0('dragMove',dv,this.$7)}else if(this.$4(dv)){this.$6=true;this.$0('dragStart',dv,this.$7);this.$0('dragMove',dv,this.$7);if(ss.isValue(this.$2.dragEnd)){cm.setCapture(document.body,true,this,false)}}},end:function(dv){var dw;if(!this.$6){if(dv.touches.length!==this.numTouches||ss.isNullOrUndefined(dv.touches[0].identifier)){return}this.$8={};this.$8.pageX=dv.touches[0].pageX;this.$8.pageY=dv.touches[0].pageY;this.$7=this.$8;dw=this.$3(dv);this.$5=false;this.$6=true;this.$0('dragStart',dv,dw);return}cm.releaseCapture();dw=this.$3(dv);this.$6=false;this.$8=null;if(da.isHandling(this.$2,'dragEnd')){var dx=new ct(dv.originalEvent,null);$.extend(dx,this.$7);var dy=function(){V.cancelDrag(null)};dojo.publish('globalDragEnd'.toString(),[dx,dy])}this.$0('dragEnd',dv,dw)},cancel:function(){this.$5=true},$3:function(dv){var dw=dv.changedTouches[0];if(ss.isNullOrUndefined(this.$8)){this.$8={};this.$8.pageX=dv['pageX'];this.$8.pageY=dv['pageY']}if(ss.isNullOrUndefined(this.$7)){this.$7=this.$8}var dx={};dx.clientX=dw.clientX;dx.clientY=dw.clientY;if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()===9&&dw.pageX===0&&dw.pageY===0){dx.pageX=dw.clientX+document.documentElement.scrollLeft;dx.pageY=dw.clientY+document.documentElement.scrollTop}else{dx.pageX=dw.pageX;dx.pageY=dw.pageY}dx.startX=this.$8.pageX;dx.startY=this.$8.pageY;dx.deltaX=dx.pageX-this.$8.pageX;dx.deltaY=dx.pageY-this.$8.pageY;dx.deltaXSinceLast=dx.pageX-this.$7.pageX;dx.deltaYSinceLast=dx.pageY-this.$7.pageY;dx.scale=1;return dx},$4:function(dv){var dw=dv.touches[0];if(ss.isNullOrUndefined(this.$8)){return false}return Math.abs(dw.pageX-this.$8.pageX)>this.slop||Math.abs(dw.pageY-this.$8.pageY)>this.slop},handleCapturedMouseMove:function(dv){var dw=dv['offsetX'];var dx=dv['offsetY'];if(dw<0||dw>document.body.offsetWidth||dx<0||dx>document.body.offsetHeight){var dy=new ct(dv,this.$2.domElem);this.move(dy)}},handleCapturedMouseComplete:function(dv){var dw=document.createEvent('MouseEvents');dw.initMouseEvent('mouseup'.toString(),false,true,window.self,null,this.$7.pageX,this.$7.pageY,this.$7.clientX,this.$7.clientY,dv.ctrlKey,dv.altKey,dv.shiftKey,dv.metaKey,null,null);document.body.dispatchEvent(dw)}},bf,[ss.IDisposable,bC]);ss.initClass(V,a,{});ss.initClass(W,a,{get_payload:function(){return this.draggedObject},get_hasPayload:function(){return ss.isValue(this.draggedObject)},get_dragAvatar:function(){return this.$0},get_dragType:function(){return'dragdrop'},get_readyToDrop:function(){return true},get_defaultDropCursor:function(){return K.noOp},moveTo:function(dv){},endDragAt:function(dv){},payloadEquals:function(dv){if(ss.referenceEquals(this.draggedObject,dv)){return true}if($.isArray(this.draggedObject)){var dw=this.draggedObject;if(dw.length===1&&ss.referenceEquals(dw[0],dv)){return true}}return false},dropToNowhereAction:function(){}});ss.initClass(bg,a,{add_click:function(dv){this.$2$1=ss.delegateCombine(this.$2$1,dv)},remove_click:function(dv){this.$2$1=ss.delegateRemove(this.$2$1,dv)},get_zIndex:function(){return tab.DomUtil.getComputedZIndex(this.get_element()[0])},set_zIndex:function(dv){this.get_element().css('z-index',dv.toString())},get_opaque:function(){return this.get_element().hasClass('opaque-glass')},set_opaque:function(dv){this.get_element().toggleClass('clear-glass',!dv);this.get_element().toggleClass('opaque-glass',dv)},show:function(){if(!ss.referenceEquals(this.get_element().parent()[0],this.$5)){this.get_element().appendTo(this.$5)}this.get_element().show()},hide:function(){this.get_element().hide()},dispose:function(){if(ss.isValue(this.$4)){this.$4.dispose();this.$4=null}du.prototype.dispose.call(this)},handleClick:function(dv){if(ss.isValue(this.$2$1)){this.$2$1()}}},du,[bq,ss.IDisposable]);ss.initClass(X,a,{dispose:function(){V.unregisterDragGlass(this);bg.prototype.dispose.call(this)},disableHitTests:function(){if(tab.BrowserSupport.get_pointerEvents()){this.get_element().css('pointer-events','none')}else{this.hide()}},enableHitTests:function(){if(tab.BrowserSupport.get_pointerEvents()){this.get_element().css('pointer-events','auto')}else{this.show()}}},bg,[bq,ss.IDisposable]);ss.initClass(Y,a,{get_rootElement:function(){return this.$0},get_viewModel:function(){return null},dispose:function(){this.$0=null}},null,[ss.IDisposable,ss.makeGenericType(bO,[bP])]);ss.initClass(Z,a,{componentDidMount:function(){bh.add_firstTouch(ss.mkdel(this,this.$0))},componentWillUnmount:function(){bh.remove_firstTouch(ss.mkdel(this,this.$0))},componentWillReceiveProps:function(dv){if(dv.resetSelector){this.setState({isSelecting:false})}},render:function(){var dv='tab-SelectionText'+(this.props.isSelectionTextMarkedAsExcluded?' excluded':'');var dw=React.DOM.div;var dx={className:'tab-Dropdown '+this.props.styleClass,onTouchStart:ss.mkdel(this,function(dB){this.$1()}),onMouseDown:ss.mkdel(this,function(dB){this.$1()})};var dy={};dy.tap=ss.mkdel(this,function(dB){this.$3()});var dz=bb.span(dy,{className:dv},[this.props.selectionText]);var dA={};dA.tap=ss.mkdel(this,function(dB){this.$3()});return dw(dx,dz,bb.span(dA,{className:'tab-DownArrowButton'},[React.DOM.div({className:'arrow down'})]),(this.state.isSelecting?this.renderSelector():null))},renderSelector:function(){return React.DOM.div({className:'tab-SelectorContainerOuter'},React.DOM.button({className:'tab-SelectorFocuser',autoFocus:true,onBlur:ss.mkdel(this,function(dv){_.defer(ss.mkdel(this,this.$2))}),ref:'focusable'}),React.DOM.div({className:'tab-SelectorContainer'},this.props.children))},$3:function(){this.setState({isSelecting:!this.state.isSelecting});this.$4=false},$1:function(){this.$4=true},$0:function(dv,dw){var dx=ReactDOM.findDOMNode(this.refs['focusable']);if(ss.isValue(dx)){dx.blur()}},$2:function(){if(this.$4){var dv=ReactDOM.findDOMNode(this.refs['focusable']);if(ss.isValue(dv)){dv.focus()}}else{this.setState({isSelecting:false})}this.$4=false}},React.Component);ss.initClass(ba,a,{add_hoverStateChanged:function(dv){this.$3$1=ss.delegateCombine(this.$3$1,dv)},remove_hoverStateChanged:function(dv){this.$3$1=ss.delegateRemove(this.$3$1,dv)},add_editing:function(dv){this.$3$2=ss.delegateCombine(this.$3$2,dv)},remove_editing:function(dv){this.$3$2=ss.delegateRemove(this.$3$2,dv)},add_committed:function(dv){this.$3$3=ss.delegateCombine(this.$3$3,dv)},remove_committed:function(dv){this.$3$3=ss.delegateRemove(this.$3$3,dv)},get_textElement:function(){return this.$e.$1()},get_isEditing:function(){return this.$d},set_isEditing:function(dv){this.$d=dv},get_textDisplayWidth:function(){return Math.min(this.$e.$2().width(),this.$e.$1().width())},$b:function(dv){dv.css('display','none')},$c:function(dv){dv.css('display','block')},$9:function(dv){if(ss.isValue(this.$3$1)){this.$3$1(dv)}},updateTextElement:function(dv){this.$e.$2().text(dv)},edit:function(){this.$b(this.get_textElement());this.$c(this.get_inputElement());this.get_inputElement().focus();tab.DomUtil.selectAllInputText(this.get_inputElement());this.set_isEditing(true);this.get_element().addClass('editing');if(ss.isValue(this.$3$2)){this.$3$2()}},commit:function(){this.set_text(this.get_inputElement().val());this.$b(this.get_inputElement());this.$c(this.get_textElement());this.set_isEditing(false);this.get_element().removeClass('editing');if(ss.isValue(this.$3$3)){this.$3$3()}},$a:function(dv){if(dv.which===13){this.commit()}},update:function(){this.updateTextElement(this.get_text());dd.prototype.update.call(this)},$8:function(){var dv=this.get_element().parent().height();this.get_element().height(dv);var dw=this.get_element().children('div');var dx=dw.height();this.get_textElement().css('height',dx+'px');this.get_textElement().css('line-height',dx+'px');this.get_inputElement().css('height',dx+'px');this.get_inputElement().css('line-height',dx+'px')},onAddedToDom:function(){this.$8();du.prototype.onAddedToDom.call(this)}},dd,[bq,ss.IDisposable]);ss.initClass(bb,a,{render:function(){return React.createElement(this.props.tagName,$.extend({},this.$2.get_eventHandlingAttributesForReact(),this.props.htmlAttributes),this.props.children)},componentDidMount:function(){this.$0()},componentDidUpdate:function(){this.$0()},componentWillUnmount:function(){if(ss.isValue(this.$2)){this.$2.dispose()}},$0:function(){if(ss.isValue(this.props.spec)){var dv=ReactDOM.findDOMNode(this);if(!ss.referenceEquals(this.$1,dv)||bb.$1(this.$3,this.props.spec)){this.$2.updateEventHandleSpec(dv,this.props.spec);this.$1=dv;this.$3=this.props.spec}}}},React.Component);ss.initClass(bc,a,{});ss.initEnum(bd,a,{mouse:1,touch:2});ss.initClass(be,a,{});ss.initClass(bh,a,{});ss.initClass(bi,a,{get_allSelected:function(){return this.$1$1},set_allSelected:function(dv){this.$1$1=dv},get_selectedCount:function(){return this.$1$2},set_selectedCount:function(dv){this.$1$2=dv},$0:function(){return this.$1$3},$1:function(dv){this.$1$3=dv},getHashCode:function(){return ss.defaultHashCode(this)},equals:function(dv){return bi.op_Equality(this,dv)},mapSelected:function(dv){return function(dw,dx){var dy;if(this.get_allSelected()&&dx){dy=[];for(var dz=0;dz<this.groupSize;++dz){dy.push(dz)}}else{dy=_.map(this.$0(),function(dA,dB){return dB}).sort()}return _.map(dy,function(dA){return dw(dA)})}},selectAll:function(){if(!this.get_allSelected()&&this.groupSize>0){this.set_allSelected(true);this.$1(null);this.set_selectedCount(this.groupSize)}},unselectAll:function(){if(this.get_selectedCount()>0){this.set_allSelected(false);this.$1({});this.set_selectedCount(0)}},toggleAll:function(){if(this.get_allSelected()){this.unselectAll()}else{this.selectAll()}},select:function(dv){if(!this.get_allSelected()){if(!this.$0()[dv]){this.$0()[dv]=true;this.set_selectedCount(this.get_selectedCount()+1)}if(this.get_selectedCount()===this.groupSize){this.selectAll()}}},unselect:function(dv){if(this.get_allSelected()){this.unselectAll();for(var dw=0;dw<this.groupSize;++dw){if(dw!==dv){this.$0()[dw]=true;this.set_selectedCount(this.get_selectedCount()+1)}}}else if(this.$0()[dv]){delete this.$0()[dv];this.set_selectedCount(this.get_selectedCount()-1)}},toggle:function(dv){if(this.isSelected(dv)){this.unselect(dv)}else{this.select(dv)}},isSelected:function(dv){return this.get_allSelected()||ss.keyExists(this.$0(),dv)},clone:function(){var dv=new bi(this.groupSize);dv.set_allSelected(this.get_allSelected());dv.set_selectedCount(this.get_selectedCount());dv.$1(_.clone(this.$0()));return dv}});ss.initClass(bj,a,{});ss.initEnum(bk,a,{left:0,right:1});ss.initClass(bl,a,{render:function(){var dv=React.DOM.div;var dw={};dw.tap=ss.mkdel(this,function(dA){this.$0(0)});var dx=bb.div(dw,{className:'tab-unification-spinner-btn'},[React.DOM.span({className:'tab-img-triangle-left'})]);var dy={};dy.tap=ss.mkdel(this,function(dA){this.$0(1)});var dz=dv({className:'tab-unification-spinner-btn-group tab-unification-spinner-btn-group-horizontal'},dx,bb.div(dy,{className:'tab-unification-spinner-btn'},[React.DOM.span({className:'tab-img-triangle-right'})]));dz=React.DOM.div({className:'tab-unification-spinner-ctrl'+(this.props.disabled?' disabled':'')},dz);dz=React.DOM.div({className:this.props.styleClass},dz);if(ss.isValue(this.props.extraCssClass)){dz=React.DOM.div({className:this.props.extraCssClass},dz)}return dz},$0:function(dv){if(this.props.disabled){return}if(!ss.staticEquals(null,this.props.onSpinnerClicked)){this.props.onSpinnerClicked(dv)}}},React.Component);ss.initClass(bm,a,{});ss.initClass(bn,a,{start:function(dv){this.cancel();this.$9=false},move:function(dv){var dw=dv.touches[0];if(!this.$9){return}if(!this.$5(dv)){return}var dx=this.$4(dv);if(ss.isValue(this.$7)){this.cancel()}this.$0('moving',dv,dx);this.$a=dw.pageX;this.$b=dw.pageY;this.$7=window.setTimeout(ss.mkdel(this,function(){if(!this.$8){this.$0('hover',dv,dx)}this.$3()}),this.$6)},end:function(dv){if(dv.touches.length===0){this.$9=true}},out:function(dv){var dw=dv.originalEvent['relatedTarget'];if(!ss.referenceEquals(this.$2.domElem,dw)&&!tab.DomUtil.isAncestorOf(this.$2.domElem,dw)){this.cancel();this.$0('mouseleave',dv,this.$4(dv))}},suppressHover:function(){if(!this.$8){}this.$8=true},unsuppressHover:function(){if(this.$8){}this.$8=false;this.$9=true},cancel:function(){this.$3();this.$a=0;this.$b=0;this.$9=true},$3:function(){if(ss.isValue(this.$7)){window.clearTimeout(ss.unbox(this.$7));this.$7=null}},$5:function(dv){var dw=dv.touches[0];var dx=Math.abs(dw.pageX-this.$a);var dy=Math.abs(dw.pageY-this.$b);return dx+dy>this.slop},$4:function(dv){var dw={};dw.pageX=dv.changedTouches[0].pageX;dw.pageY=dv.changedTouches[0].pageY;dw.clientX=dv.changedTouches[0].clientX;dw.clientY=dv.changedTouches[0].clientY;return dw}},bf,[ss.IDisposable]);ss.initClass(bo,a,{});ss.initClass(bp,a,{$3:function(){return ss.formatString('.{0}',ss.replaceAllString(ss.getTypeFullName(ss.getInstanceType(this)),'.','_'))},dispose:function(){if(ss.isNullOrUndefined(this.$7)){return}this.$7.remove_disposed(ss.mkdel(this,this.$2));if(ss.isValue(this.$4)){this.$7.get_element().undelegate(this.$4,this.$3())}else{this.$7.get_element().unbind(this.$3())}this.$7=null},$0:function(dv){if(ss.isValue(this.$5)){this.$5(dv)}},$1:function(dv){if(ss.isValue(this.$6)){this.$6(dv)}},$2:function(dv,dw){this.dispose()}},null,[ss.IDisposable]);ss.initClass(bs,a,{get_buttonElement:function(){return this.get_element()},setEnabled:function(dv){if(dv){this.get_buttonElement().removeClass('tab-disabled');this.get_buttonElement().addClass('tab-enabled')}else{this.get_buttonElement().removeClass('tab-enabled');this.get_buttonElement().addClass('tab-disabled')}return this},setIcon:function(dv){if(!ss.isValue(this.iconElement)){this.iconElement=$('<span>');this.iconElement.appendTo(this.get_buttonElement())}this.iconElement.removeClass().addClass('tab-iconButtonIcon').addClass(dv);return this}},o,[bq,ss.IDisposable]);ss.initClass(bt,a,{get_className:function(){var dv=['tab-IconBtn'];dv.push(this.props.customClassName);if(this.props.disabled){dv.push('disabled')}return dv.join(' ')},$0:function(){var dv=new bu;dv.isActive=(ss.isValue(this.state)?this.state.isActive:false);return dv},render:function(){var dv={};dv.tap=ss.mkdel(this,this.$1);dv.firstTouch=ss.mkdel(this,function(dw){if(tsConfig.is_mobile){var dx=new bu;dx.isActive=true;this.setState(dx)}});dv.lastTouch=ss.mkdel(this,function(dw){if(tsConfig.is_mobile){var dx=new bu;dx.isActive=false;this.setState(dx)}});return bb.div(dv,{className:this.get_className(),title:this.props.title,onMouseEnter:ss.mkdel(this,function(dw){if(!tsConfig.is_mobile){var dx=new bu;dx.isActive=true;this.setState(dx)}}),onMouseLeave:ss.mkdel(this,function(dw){if(!tsConfig.is_mobile){var dx=new bu;dx.isActive=false;this.setState(dx)}})},[React.DOM.div({className:'tab-Icon '+this.props.iconClassName+(this.state.isActive?' active':'')})])},$1:function(dv){if(!this.props.disabled&&!ss.staticEquals(this.props.onTap,null)){this.props.onTap(dv)}}},React.Component);ss.initClass(bu,a,{});ss.initInterface(bv,a,{dragStarted:null,dragEnded:null});ss.initInterface(bw,a,{startDrag:null});ss.initInterface(bx,a,{get_feedbackType:null,dragOver:null,dragExit:null,acceptDrop:null,getDropTarget:null,getDropCursor:null});ss.initInterface(by,a,{createListItemContent:null});ss.initInterface(bz,a,{createListItemDragAvatar:null});ss.initInterface(bA,a,{add_dragStarting:null,remove_dragStarting:null,add_dragEnded:null,remove_dragEnded:null,get_avatarCreator:null,set_avatarCreator:null,startDrag:null});ss.initInterface(bE,a,{get_canScrollX:null,get_canScrollY:null,get_docSize:null,get_actualViewSize:null,set_actualViewSize:null,get_effectiveViewSize:null,get_scrollPos:null,set_scrollPos:null,setXPos:null,setYPos:null});ss.initClass(bF,a,{get_iScroll:function(){return this.$2},render:function(){var dv=['tab-iscroll-component'];if(this.state.hovered){dv.push('hover')}if(this.state.scrolling){dv.push('tabScrolling')}if(ss.isValue(this.props.extraCssClass)){dv.push(this.props.extraCssClass)}var dw=ss.arrayFromEnumerable(dv).join(' ');return React.DOM.div({ref:'iscroll-wrapper',className:dw,onMouseOver:ss.mkdel(this,this.handleOnMouseOver),onMouseOut:ss.mkdel(this,this.handleOnMouseOut)},React.DOM.div({className:'tab-iscroll-content'},this.props.children))},componentDidMount:function(){$(window).bind('resize'.toString(),ss.mkdel(this,this.$0));var dv=ReactDOM.findDOMNode(this.refs['iscroll-wrapper']);this.$2=new c(dv,this.props.iScrollOptions);this.$2.on('scrollStart',ss.mkdel(this,this.handleScrollStart));this.$2.on('scrollEnd',ss.mkdel(this,this.handleScrollStop));this.$1()},componentWillUnmount:function(){$(window).unbind('resize'.toString(),ss.mkdel(this,this.$0));this.$2.destroy()},componentDidUpdate:function(dv){this.$1()},handleOnMouseOver:function(dv){this.setState({hovered:true,scrolling:this.state.scrolling})},handleOnMouseOut:function(dv){this.setState({hovered:false,scrolling:this.state.scrolling})},handleScrollStart:function(){this.setState({hovered:this.state.hovered,scrolling:true})},handleScrollStop:function(){this.setState({hovered:this.state.hovered,scrolling:false})},$0:function(dv){this.$1()},$1:function(){window.setTimeout(ss.mkdel(this,function(){this.$2.refresh()}),this.props.refreshDelay)}},React.Component);ss.initInterface(bG,a,{get_canScrollX:null,get_canScrollY:null,get_scrollPos:null,get_maxScroll:null,get_visibleArea:null,scrollX:null,scrollY:null,setScrollTarget:null,refresh:null});ss.initClass(bH,a,{});ss.initInterface(bK,a,{add_selectableDisposed:null,remove_selectableDisposed:null,add_selectedChanging:null,remove_selectedChanging:null,add_selectedChanged:null,remove_selectedChanged:null,get_selectionId:null,set_selectionId:null,get_selected:null,set_selected:null,get_selectedClass:null,set_selectedClass:null});ss.initInterface(bN,a,{get_viewType:null,get_viewModel:null,disposeViewModel:null,updateUberPopupViewModel:null});ss.initClass(bQ,a,{});ss.initClass(bR,a,{get_labelElement:function(){return this.get_element().find(this.$d)},get_label:function(){return this.get_labelElement().text()},set_label:function(dv){this.get_labelElement().text(dv);if(ss.isNullOrEmptyString(dv)){this.get_labelElement().addClass('hide')}else{this.get_labelElement().removeClass('hide')}},setLabelContents:function(dv){if(ss.isValue(dv)){this.get_labelElement().html(dv);this.get_labelElement().removeClass('hide')}else{this.get_labelElement().html('');this.get_labelElement().addClass('hide')}},setTooltip:function(dv){if(!ss.isNullOrEmptyString(dv)){this.get_element().prop('title',dv)}}},o,[bq,ss.IDisposable]);ss.initClass(de,a,{add_selectableDisposed:function(dv){this.$3$1=ss.delegateCombine(this.$3$1,dv)},remove_selectableDisposed:function(dv){this.$3$1=ss.delegateRemove(this.$3$1,dv)},add_selectedChanging:function(dv){this.$3$2=ss.delegateCombine(this.$3$2,dv)},remove_selectedChanging:function(dv){this.$3$2=ss.delegateRemove(this.$3$2,dv)},add_selectedChanged:function(dv){this.$3$3=ss.delegateCombine(this.$3$3,dv)},remove_selectedChanged:function(dv){this.$3$3=ss.delegateRemove(this.$3$3,dv)},get_selectedClass:function(){return this.$e},set_selectedClass:function(dv){if(ss.referenceEquals(this.$e,dv)){return}if(this.get_selected()){this.get_element().toggleClass(this.$e,false);this.get_element().toggleClass(dv,true)}this.$e=dv},get_selectionId:function(){return this.$f},set_selectionId:function(dv){this.$f=dv},get_selected:function(){return this.get_element().hasClass(this.$e)},set_selected:function(dv){if(this.get_selected()===dv){return}this.get_element().toggleClass(this.$e,dv);this.raisePropertyChanged('selected');this.$d(this.$3$3,null)},get_preventMouseDeselect:function(){return this.$3$4},set_preventMouseDeselect:function(dv){this.$3$4=dv},handleClick:function(dv){if(this.get_disabled()){return}var dw=!this.get_selected();if(this.get_preventMouseDeselect()&&!dw){return}if(!ss.staticEquals(this.$3$2,null)){var dx=new cR(dw,ss.isValue(dv)&&dv.shiftKey,be.isCtrlKey(dv));this.$3$2(this,dx);if(dx.cancel){return}}this.set_selected(dw);o.prototype.handleClick.call(this,dv)},$d:function(dv,dw){if(!ss.staticEquals(dv,null)){dv(this,dw)}},onDisposed:function(dv){this.$d(this.$3$1,null);du.prototype.onDisposed.call(this,dv)}},o,[bq,ss.IDisposable,bK]);ss.initClass(bS,a,{get_labelElement:function(){return this.get_element().find(this.$g)},get_inputElement:function(){return this.get_element().find('input')},get_label:function(){return this.get_labelElement().text()},set_label:function(dv){this.get_labelElement().text(dv);if(ss.isNullOrEmptyString(dv)){this.get_labelElement().addClass('hide')}else{this.get_labelElement().removeClass('hide')}},get_selected:function(){return de.prototype.get_selected.call(this)},set_selected:function(dv){if(this.get_selected()===dv){return}var dw=this.get_inputElement();if(ss.isValue(dw)){dw.prop('checked',(dv?'checked':''))}de.prototype.set_selected.call(this,dv)},get_disabled:function(){return o.prototype.get_disabled.call(this)},set_disabled:function(dv){var dw=this.get_inputElement();if(ss.isValue(dw)){dw.prop('disabled',dv)}o.prototype.set_disabled.call(this,dv)}},de,[bq,ss.IDisposable,bK]);ss.initClass(bU,a,{get_parentListView:function(){return this.$1$1},set_parentListView:function(dv){this.$1$1=dv},get_draggableListItemView:function(){return this.$1$2},set_draggableListItemView:function(dv){this.$1$2=dv},startDrag:function(dv){if(ss.isNullOrUndefined(this.get_parentListView())||ss.isNullOrUndefined(this.get_draggableListItemView())||ss.isNullOrUndefined(this.get_parentListView().get_dragFeedback())){return null}return this.get_parentListView().get_dragFeedback().startDrag(this.get_parentListView(),this.get_draggableListItemView())}},null,[bw]);ss.initClass(cQ,a,{add_selectionChanged:function(dv){this.$1$1=ss.delegateCombine(this.$1$1,dv)},remove_selectionChanged:function(dv){this.$1$1=ss.delegateRemove(this.$1$1,dv)},get_selectedClass:function(){return this.$8},set_selectedClass:function(dv){this.$8=dv},get_selectionType:function(){return this.$a},set_selectionType:function(dv){this.$a=dv},get_items:function(){return this.$7},get_selectedItems:function(){var dv=[];var dw=ss.getEnumerator(Object.keys(this.$9));try{while(dw.moveNext()){var dx=dw.current();dv.push(this.$9[dx])}}finally{dw.dispose()}return dv},get_selectedItem:function(){if(this.get_numberOfSelectedItems()===0){return null}var dv=Object.keys(this.$9)[0];return this.$9[dv]},get_numberOfSelectedItems:function(){return ss.getKeyCount(this.$9)},addItem:function(dv){dv.set_selectedClass(this.$8);this.$7.push(dv);if(dv.get_selected()){this.$6(dv,false,false)}this.$0(dv)},containsItem:function(dv){return ss.contains(this.get_items(),dv)},dispose:function(){ss.clearKeys(this.$9);this.get_items().forEach(ss.mkdel(this,this.$5));ss.clear(this.get_items())},onItemDisposed:function(dv,dw){var dx=dv;this.$5(dx);if(this.isItemSelected$1(dx)){delete this.$9[dx.get_selectionId()]}ss.remove(this.$7,dx)},$0:function(dv){dv.add_selectableDisposed(ss.mkdel(this,this.onItemDisposed));dv.add_selectedChanging(ss.mkdel(this,this.handleSelectionChanging));dv.add_selectedChanged(ss.mkdel(this,this.handleSelectionChanged))},$5:function(dv){dv.remove_selectableDisposed(ss.mkdel(this,this.onItemDisposed));dv.remove_selectedChanging(ss.mkdel(this,this.handleSelectionChanging));dv.remove_selectedChanged(ss.mkdel(this,this.handleSelectionChanged))},selectAll:function(){this.selectItems(this.get_items(),false)},isItemSelected$1:function(dv){return ss.isValue(dv)&&ss.keyExists(this.$9,dv.get_selectionId())},isItemSelected:function(dv){return ss.keyExists(this.$9,dv)},selectItem:function(dv){this.$6(dv,false,true)},selectSingleItem:function(dv){this.$6(dv,true,true)},$6:function(dv,dw,dx){var dy=false;if(dw||this.get_selectionType()===0){dy=this.$1(dv)}dy=this.$2(dv)||dy;if(dx&&dy){this.$4()}},selectItems:function(dv,dw){switch(this.get_selectionType()){case 0:{var dx=((ss.isValue(dv)&&dv.length>0)?dv[0]:null);this.selectItem(dx);break}case 1:case 2:{var dy=false;if(dw){dy=this.$1(null)}if(ss.isValue(dv)){for(var dz=0,dA=dv.length;dz<dA;dz++){dy=this.$2(dv[dz])||dy}}if(dy){this.$4()}break}}},$2:function(dv){if(ss.isNullOrUndefined(dv)){return false}if(ss.isNullOrUndefined(dv.get_selectionId())){return false}if(this.isItemSelected$1(dv)){return false}if(!this.containsItem(dv)){return false}this.$9[dv.get_selectionId()]=dv;dv.set_selected(true);return true},clearSelection:function(dv){if(this.$1(dv)){this.$4()}},$1:function(dv){var dw=ss.getKeyCount(this.$9);var dx=ss.getEnumerator(Object.keys(this.$9));try{while(dx.moveNext()){var dy=dx.current();if(ss.isValue(dv)&&ss.referenceEquals(dy,dv.get_selectionId())){continue}this.$3(this.$9[dy])}}finally{dx.dispose()}return dw>0&&ss.getKeyCount(this.$9)!==dw},unselectItem:function(dv){if(!this.isItemSelected$1(dv)){return}this.$3(dv);this.$4()},$3:function(dv){delete this.$9[dv.get_selectionId()];dv.set_selected(false)},handleSelectionChanging:function(dv,dw){var dx=dv;if(dw.get_selecting()){this.selectItem(dx)}else if(this.get_selectionType()!==0){this.unselectItem(dx)}else if(ss.referenceEquals(this.get_selectedItem(),dx)){dw.cancel=true}},handleSelectionChanged:function(dv,dw){var dx=dv;var dy=this.isItemSelected$1(dx);if(dx.get_selected()&&!dy){this.$2(dx)}else if(!dx.get_selected()&&dy){this.$3(dx)}},$4:function(){if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}}},null,[ss.IDisposable]);ss.initClass(bV,a,{onItemDisposed:function(dv,dw){this.$c=null;this.$d=null;cQ.prototype.onItemDisposed.call(this,dv,dw)},dispose:function(){this.$c=null;this.$d=null;cQ.prototype.dispose.call(this)},selectItem:function(dv){this.selectItemAtIndex(ss.indexOf(this.get_items(),dv))},selectSingleItem:function(dv){var dw=ss.indexOf(this.get_items(),dv);if(dw<0||dw>=this.get_items().length){return}cQ.prototype.selectSingleItem.call(this,dv);this.$c=dw;this.$d=null},selectItemAtIndex:function(dv){cQ.prototype.selectItem.call(this,this.get_items()[dv]);this.$c=dv;this.$d=null},selectItems:function(dv,dw){this.$b(dv,dw);this.$d=null},$b:function(dv,dw){cQ.prototype.selectItems.call(this,dv,dw)},clearSelection:function(dv){cQ.prototype.clearSelection.call(this,dv);this.$c=null;this.$d=null},selectItemForKey:function(dv,dw){if(this.get_selectionType()===2){return null}if(!ss.isValue(this.$c)){return null}var dx=dv===38;var dy=dv===40;if(dx||dy){if(!this.get_items()[ss.unbox(this.$c)].get_selected()){this.selectItem(this.get_items()[ss.unbox(this.$c)])}var dz=ss.unbox(this.$c)+(dx?-1:1);if(dz<0||dz>=this.get_items().length){return null}if(this.get_selectionType()===1&&dw){var dA=this.$d;if(ss.isValue(this.$d)){var dB=Math.min(ss.unbox(this.$d),ss.unbox(this.$c));var dC=Math.max(ss.unbox(this.$d),ss.unbox(this.$c));if(dz>=dB&&dz<=dC){this.unselectItem(this.get_items()[ss.unbox(this.$c)])}}else{dA=this.$c}this.selectItem(this.get_items()[dz]);this.$d=dA}else{this.selectSingleItem(this.get_items()[dz]);this.$d=null}this.$c=dz;return this.get_items()[dz]}return null},handleSelectionChanging:function(dv,dw){var dx=dv;var dy=ss.indexOf(this.get_items(),dx);if(dy<0){return}if(this.get_selectionType()===0){cQ.prototype.handleSelectionChanging.call(this,dv,dw);return}var dz=this.$c;var dA=this.$d;this.$c=dy;this.$d=null;if(this.get_selectionType()===2||dw.get_ctrlKey()){if(dw.get_selecting()){this.selectItem(dx)}else{this.unselectItem(dx)}return}if(dw.get_shiftKey()&&(ss.isValue(dz)||ss.isValue(dA))){this.$d=ss.coalesce(dA,dz);var dB=Math.min(ss.unbox(this.$d),ss.unbox(this.$c));var dC=Math.max(ss.unbox(this.$d),ss.unbox(this.$c));var dD=[];for(var dE=dB;dE<=dC;dE++){dD.push(this.get_items()[dE])}this.$b(dD,true);dw.cancel=true;return}this.selectSingleItem(dx);if(ss.referenceEquals(this.get_selectedItem(),dx)){dw.cancel=true}}},cQ,[ss.IDisposable]);ss.initClass(bW,a,{get_viewModel:function(){return this.$i},get_selected:function(){return(this.get_addedToDom()?de.prototype.get_selected.call(this):this.$i.get_selected())},set_selected:function(dv){de.prototype.set_selected.call(this,dv);this.get_viewModel().set_selected(dv)},get_disabled:function(){return o.prototype.get_disabled.call(this)},set_disabled:function(dv){this.$h.toggleClass('disabled',dv);o.prototype.set_disabled.call(this,dv)},init:function(){this.set_selected(this.$i.get_selected())},$g:function(dv,dw){switch(dw.get_propertyName()){case'selected':{this.set_selected(this.get_viewModel().get_selected());break}case'highlighted':{this.get_element().toggleClass('tab-list-item-highlighted',this.get_viewModel().get_highlighted());break}default:{break}}}},de,[bq,ss.IDisposable,bK]);ss.initClass(bX,a,{get_id:function(){return this.$3},get_data:function(){return this.$0},get_selected:function(){return this.$4},set_selected:function(dv){if(this.$4===dv){return}this.$4=dv;this.notifyPropertyChanged('selected')},get_draggable:function(){return this.$1},set_draggable:function(dv){if(this.$1===dv){return}this.$1=dv;this.notifyPropertyChanged('draggable')},get_highlighted:function(){return this.$2},set_highlighted:function(dv){if(this.$2===dv){return}this.$2=dv;this.notifyPropertyChanged('highlighted')}},n,[ss.IDisposable,bP]);ss.initClass(bY,a,{get_dragFeedback:function(){return this.$3$1},set_dragFeedback:function(dv){this.$3$1=dv},add_listItemsUpdated:function(dv){this.$3$2=ss.delegateCombine(this.$3$2,dv)},remove_listItemsUpdated:function(dv){this.$3$2=ss.delegateRemove(this.$3$2,dv)},get_dom:function(){return this.get_template()},get_domRoot:function(){return this.get_dom().get_domRoot()},get_itemViews:function(){return this.$k},$i:function(){return((this.$k.length>0)?this.$k[0].get_element()[0].offsetTop:0)},get_scrollerPosition:function(){return this.get_scrollHandler().get_scrollViewPagePosition()},get_scrollerSize:function(){return this.get_scrollHandler().get_scrollViewSize()},get_scrollHandler:function(){return this.$l},set_scrollHandler:function(dv){this.$l=dv||new k(this.get_element())},useScrollableView:function(dv){this.set_scrollHandler(new j(dv))},$7:function(){for(var dv=0;dv<this.get_viewModel().get_collection().length;dv++){var dw=this.get_viewModel().get_collection()[dv];if(ss.isValue(dw)){var dx=this.$j.createListItemContent(dw);var dy=new bW(dx,dw);dy.init();dy.onDoubleClick(ss.mkdel(this,this.$a));dy.set_disabled(!this.get_viewModel().get_enabled());this.$h(dy);this.$k.push(dy);this.get_viewModel().addItemToGroup(dy);dy.addToDom(this.get_dom().get_listItemContainer());dw.add_propertyChanged(ss.mkdel(this,this.$e))}}this.$f(this.$3$2)},$c:function(dv){if(!ss.isValue(dv)){return}this.$g(this.$k[ss.unbox(dv)])},$a:function(dv){this.get_viewModel().selectionSubmitted()},$b:function(dv){var dw=this.get_viewModel().get_listItemGroup().selectItemForKey(dv.which,dv.shiftKey);if(ss.isValue(dw)){dv.preventDefault();dv.stopPropagation();this.$g(dw)}},onViewModelPropertyChanged:function(dv,dw){if(dw.get_propertyName()==='collection'){this.$8();this.get_dom().get_listItemContainer().empty();this.$7()}else if(dw.get_propertyName()==='enabled'){this.$k.forEach(ss.mkdel(this,function(dx){dx.set_disabled(!this.get_viewModel().get_enabled());this.$h(dx)}))}ss.makeGenericType(m,[ca]).prototype.onViewModelPropertyChanged.call(this,dv,dw)},$e:function(dv,dw){if(dw.get_propertyName()==='draggable'){var dx=this.$9(dv);this.$h(dx)}},$h:function(dv){if(dv.get_viewModel().get_draggable()&&!dv.get_disabled()){V.attachDragSource(dv.get_element(),new bU(this,dv))}else{V.removeDragSource(dv.get_element())}},tabIndex:function(dv){this.get_dom().get_listItemContainer().attr('tabindex',dv.toString());return this},showItemAtIndex:function(dv){this.$g(this.get_itemViews()[dv])},$g:function(dv){if(ss.isNullOrUndefined(dv)){return}var dw=dv.get_element()[0];this.$l.scrollToElement(dw,this.$i())},$d:function(dv,dw){if(dv===dw||dv<0||dv>=this.get_itemViews().length||dw<0||dw>=this.get_itemViews().length){return}var dx=this.get_itemViews()[dv];dx.get_element().hide();if(dw<dv){dx.get_element().insertBefore(this.get_itemViews()[dw].get_element())}else{dx.get_element().insertAfter(this.get_itemViews()[dw].get_element())}dx.get_element().fadeIn();ss.removeAt(this.get_itemViews(),dv);ss.insert(this.get_itemViews(),dw,dx)},dispose:function(){this.get_viewModel().remove_selectionModelUpdated(ss.mkdel(this,this.$c));this.get_viewModel().remove_itemMoved(ss.mkdel(this,this.$d));this.$8();ss.makeGenericType(m,[ca]).prototype.dispose.call(this)},$8:function(){this.$k.forEach(ss.mkdel(this,function(dv){dv.get_viewModel().remove_propertyChanged(ss.mkdel(this,this.$e));dv.dispose()}));ss.clear(this.$k)},$f:function(dv){if(ss.isValue(dv)){dv()}},$9:function(dv){for(var dw=0,dx=this.$k.length;dw<dx;dw++){if(ss.referenceEquals(this.$k[dw].get_selectionId(),dv.get_id())){return this.$k[dw]}}return null}},ss.makeGenericType(m,[ca]),[bq,ss.IDisposable,ss.makeGenericType(bO,[ca])]);ss.initClass(bZ,a,{add_dragStarting:function(dv){this.$1$1=ss.delegateCombine(this.$1$1,dv)},remove_dragStarting:function(dv){this.$1$1=ss.delegateRemove(this.$1$1,dv)},add_dragEnded:function(dv){this.$1$2=ss.delegateCombine(this.$1$2,dv)},remove_dragEnded:function(dv){this.$1$2=ss.delegateRemove(this.$1$2,dv)},get_dragClassName:function(){return this.$b},set_dragClassName:function(dv){this.$b=dv},get_dragHoverClassName:function(){return this.$c},set_dragHoverClassName:function(dv){this.$c=dv},get_avatarCreator:function(){return this.$1$3},set_avatarCreator:function(dv){this.$1$3=dv},dispose:function(){V.remove_dragStarted(ss.mkdel(this,this.$8));V.remove_dragEnded(ss.mkdel(this,this.$7));this.$9();this.$0()},startDrag:function(dv,dw){if(ss.isNullOrUndefined(dv)||ss.isNullOrUndefined(dv.get_itemViews())){return null}var dx=ss.indexOf(dv.get_itemViews(),dw);if(dx<0){return null}this.$5(dv,dx);this.$6(this.$e.outerWidth());this.$e.toggleClass(this.get_dragClassName(),true);this.$a();if(!ss.staticEquals(this.$1$1,null)){this.$1$1(this.$f)}V.add_dragStarted(ss.mkdel(this,this.$8));V.add_dragEnded(ss.mkdel(this,this.$7));var dy=this.$1(dv.get_itemViews()[dx]);return new co(this.$e,ss.mkdel(this,this.$3),ss.mkdel(this,this.$4),dy)},$5:function(dv,dw){this.$k=dv;this.$m=this.$k.get_itemViews().length;this.$j=this.$k.get_scrollerPosition().y;this.$i=this.$j+this.$k.get_scrollerSize().h;this.$n=dw;this.$l=dw;var dx=dv.get_itemViews()[dw];this.$f=dx.get_viewModel();this.$e=dx.get_element()},$6:function(dv){this.$g=this.$2(dv).appendTo($('body')).hide();this.$h=ss.Int32.div(this.$g.outerHeight(),2)},$2:function(dv){return $("<div class='tab-list-item-insertion-pointer'>").width(dv)},$1:function(dv){if(ss.isValue(this.get_avatarCreator())){return this.get_avatarCreator().createListItemDragAvatar(dv.get_viewModel())}return new Y(dv)},$8:function(dv){V.remove_dragStarted(ss.mkdel(this,this.$8));V.setDragCursor(new K(null,'move'));V.setDragCursor(new K(null,'-webkit-grabbing'));V.setDragCursor(new K(null,'-moz-grabbing'));V.setDragCursor(new K(null,'grabbing'))},$7:function(dv){V.remove_dragEnded(ss.mkdel(this,this.$7));this.$0();this.$9()},$3:function(dv){if(ss.isNullOrUndefined(this.$e)){return}this.$0();var dw=this.$k.get_itemViews()[this.$l].get_element();var dx=tab.DomUtil.getElementPosition(dw);var dy=this.$l>0&&(dv.pageY<this.$j||dv.pageY<dx.y);var dz=this.$l<this.$m-1&&(dv.pageY>this.$i||dv.pageY>dx.y+dw.outerHeight());if(!dy&&!dz){return}var dA=(dy?-1:1);this.$l+=dA;this.$k.showItemAtIndex(this.$l);this.$a();this.$d=window.setTimeout(ss.mkdel(this,function(){this.$3(V.get_lastDragEvent())}),10)},$a:function(){if(this.$l===this.$n){this.$g.hide();this.$e.toggleClass(this.get_dragHoverClassName(),true);return}this.$e.toggleClass(this.get_dragHoverClassName(),false);var dv=this.$k.get_itemViews()[this.$l].get_element();var dw=tab.DomUtil.getElementPosition(dv);if(this.$l>this.$n){dw.y+=dv.outerHeight()}tab.DomUtil.setElementPosition(this.$g,dw.x,dw.y-this.$h,null,false);this.$g.show()},$4:function(dv){this.$0();this.$9();if(this.$n!==this.$l){this.$k.get_viewModel().moveItem(this.$n,this.$l)}if(!ss.staticEquals(this.$1$2,null)){this.$1$2(this.$f,this.$n!==this.$l)}},$9:function(){if(ss.isValue(this.$g)){this.$g.remove();this.$g=null}if(ss.isValue(this.$e)){this.$e.removeClass(this.get_dragHoverClassName());this.$e.removeClass(this.get_dragClassName());this.$e=null}},$0:function(){if(ss.isValue(this.$d)){window.clearTimeout(ss.unbox(this.$d));this.$d=null}}},null,[bA,ss.IDisposable]);ss.initClass(ca,a,{add_propsUpdated:function(dv){this.$2$1=ss.delegateCombine(this.$2$1,dv)},remove_propsUpdated:function(dv){this.$2$1=ss.delegateRemove(this.$2$1,dv)},add_selectionChanged:function(dv){this.$2$2=ss.delegateCombine(this.$2$2,dv)},remove_selectionChanged:function(dv){this.$2$2=ss.delegateRemove(this.$2$2,dv)},add_submitSelection:function(dv){this.$2$3=ss.delegateCombine(this.$2$3,dv)},remove_submitSelection:function(dv){this.$2$3=ss.delegateRemove(this.$2$3,dv)},add_selectionModelUpdated:function(dv){this.$2$4=ss.delegateCombine(this.$2$4,dv)},remove_selectionModelUpdated:function(dv){this.$2$4=ss.delegateRemove(this.$2$4,dv)},add_itemMoved:function(dv){this.$2$5=ss.delegateCombine(this.$2$5,dv)},remove_itemMoved:function(dv){this.$2$5=ss.delegateRemove(this.$2$5,dv)},get_originalCollection:function(){return this.$7},get_collection:function(){return this.$5},get_filter:function(){return this.$4},set_filter:function(dv){this.$4=dv;this.$0()},get_sort:function(){return this.$9},set_sort:function(dv){this.$9=dv;this.$0()},$2:function(){return!ss.staticEquals(this.$4,null)||!ss.staticEquals(this.$9,null)},get_props:function(){return this.$8},get_selectionType:function(){return this.$6.get_selectionType()},get_listItemGroup:function(){return this.$6},get_firstSelectedItem:function(){var dv=this.$1(1);return((dv.length>0)?dv[0]:null)},get_selectedItems:function(){return this.$1(this.$6.get_numberOfSelectedItems())},get_enabled:function(){return this.$3},set_enabled:function(dv){if(this.$3===dv){return}this.$3=dv;this.notifyPropertyChanged('enabled')},dispose:function(){this.$6.remove_selectionChanged(ss.mkdel(this,this.onSelectionChanged));this.$6.dispose();ss.clear(this.$7);ss.clear(this.$5);n.prototype.dispose.call(this)},selectionSubmitted:function(){this.raiseActionEvent(this.$2$3)},update:function(dv){this.$7=ss.arrayClone(dv);this.$0();this.$8.items=_.map(this.get_collection(),function(dw){return{data:dw.get_data()}});this.raiseActionEvent(this.$2$1)},addItemToGroup:function(dv){this.$6.addItem(dv)},$0:function(){if(this.$2()){this.$5=(ss.isValue(this.$4)?this.$7.filter(this.$4):ss.arrayClone(this.$7));if(ss.isValue(this.$9)){this.$5.sort(this.$9)}}else{this.$5=this.$7}this.notifyPropertyChanged('collection')},onSelectionChanged:function(){this.raiseActionEvent(this.$2$2)},$1:function(dv){var dw=[];var dx=this.$6.get_numberOfSelectedItems();if(dx===1){dw.push(this.$6.get_selectedItem().get_viewModel());return dw}var dy=Math.min(dx,dv);for(var dz=0,dA=this.get_collection().length;dz<dA&&dw.length<dy;dz++){if(this.$6.isItemSelected(this.get_collection()[dz].get_id())){dw.push(this.get_collection()[dz])}}return dw},setSelectedItems:function(dv){if(this.get_collection().length===0){return}this.$6.remove_selectionChanged(ss.mkdel(this,this.onSelectionChanged));this.get_listItemGroup().clearSelection(null);var dw=null;for(var dx=0,dy=dv.length;dx<dy;dx++){var dz=dv[dx];dw=Math.min(ss.coalesce(dw,dz),dz);this.get_collection()[dz].set_selected(true);if(this.get_listItemGroup().get_selectionType()===0){break}}this.raiseActionEvent$1(ss.makeGenericType(ss.Nullable$1,[ss.Int32])).call(this,this.$2$4,ss.coalesce(dw,0));this.$6.add_selectionChanged(ss.mkdel(this,this.onSelectionChanged))},selectItemById:function(dv){for(var dw=0,dx=this.get_collection().length;dw<dx;dw++){var dy=this.get_collection()[dw];if(ss.referenceEquals(dy.get_id(),dv)){this.selectItemAtIndex(dw);break}}},selectItemAtIndex:function(dv){this.$6.remove_selectionChanged(ss.mkdel(this,this.onSelectionChanged));var dw=this.get_collection()[dv];var dx=!dw.get_selected();if(this.$6.get_selectionType()===0){this.clearSelection()}dw.set_selected(true);if(dx){this.raiseActionEvent(this.$2$2)}this.raiseActionEvent$1(ss.makeGenericType(ss.Nullable$1,[ss.Int32])).call(this,this.$2$4,dv);this.$6.add_selectionChanged(ss.mkdel(this,this.onSelectionChanged))},clearSelection:function(){this.$6.clearSelection(null)},moveItem:function(dv,dw){if(dv===dw){return}var dx=this.get_collection()[dv];ss.removeAt(this.get_collection(),dv);ss.insert(this.get_collection(),dw,dx);if(!ss.staticEquals(this.$2$5,null)){this.$2$5(dv,dw)}}},n,[ss.IDisposable,bP,ss.makeGenericType(bD,[Object])]);ss.initClass(cb,a,{get_domRootElement:function(){return this.get_domRoot()},get_listItemContainer:function(){return this.$1}},dc,[ss.IDisposable]);ss.initClass(cc,a,{get_menuItems:function(){return this.$0}});ss.initEnum(ce,a,{none:0,check:1,radio:2});ss.initClass(cf,a,{},dc,[ss.IDisposable]);ss.initClass(cg,a,{},dc,[ss.IDisposable]);ss.initClass(ch,a,{},dc,[ss.IDisposable]);ss.initClass(ci,a,{dispose:function(){this.menuViewModel.remove_menuChanged(ss.mkdel(this,this.updateMenu));this.menuViewModel.remove_shown(ss.mkdel(this,this.shown));this.menuViewModel.remove_hidden(ss.mkdel(this,this.hidden));this.menuViewModel.remove_menuItemSelectionChanged(ss.mkdel(this,this.$a));var dv=ss.mkdel(this,function(){this.menuDisposables.dispose();for(var dw=0;dw<this.menuStack.length;dw++){var dx=this.menuStack[dw];dx.dispose()}ss.clear(this.menuStack);this.removeGlass();ss.makeGenericType(m,[cj]).prototype.dispose.call(this)});if($.fx.off){dv()}else{$('.tabMenu').fadeOut(50,dv)}},removeGlass:function(){if(ss.isValue(this.glass)){this.glass.remove_click(ss.mkdel(this,this.glassClicked));this.glass.dispose();this.glass=null}},getElementForMenuItem:function(dv){if(ss.isValue(dv)){return this.$b[dv.get_id()]}else{return null}},updateMenu:function(){this.dom.content.children().remove();this.$b={};this.menuDisposables.dispose();this.menuDisposables=new tab.DisposableHolder;this.buildMenu(this.dom,this.menuViewModel.get_menu())},hidden:function(){var dv=ss.mkdel(this,function(){this.dom.get_domRoot().detach();this.removeGlass()});if($.fx.off){dv()}else{$('.tabMenu').fadeOut(50,dv)}},shown:function(dv){if(ss.isValue(dv.minWidth)){var dw=this.dom.get_domRoot().outerWidth(true)-this.dom.get_domRoot().width();this.dom.get_domRoot().css('min-width',ss.unbox(dv.minWidth)-dw+'px')}var dx=989;if(dv.relativeDom.length>0){var dy=tab.DomUtil.getComputedZIndex(dv.relativeDom[0]);if(dy>=dx){dx=Math.max(1000,dy+1)}}this.removeGlass();this.glass=new bg;this.glass.set_zIndex(dx-1);this.glass.add_click(ss.mkdel(this,this.glassClicked));this.glass.show();this.dom.get_domRoot().css('z-index',dx.toString());if(ss.isValue(dv.additionalMenuClass)){this.dom.get_domRoot().addClass(dv.additionalMenuClass)}cV.getViewport(ss.mkdel(this,function(dz){this.dom.get_domRoot().appendTo($('body'));this.positionMenu(dz,dv,this.dom);this.dom.get_domRoot().css('visibility','visible');this.onAddedToDom();this.dom.get_domRoot().show()}));this.disposables.add$1(be.bindWithDispose($(window),'resize',ss.mkdel(this,function(dz){this.menuViewModel.hide()})))},$a:function(dv,dw){var dx=this.$b[dv.get_id()];if(ss.isValue(dx)&&dx.is(':visible')){dx.toggleClass('tabMenuSelectedItem',dw);if(dw){this.scrollToMenuItem(dx)}}},scrollToMenuItem:function(dv){dv.offsetParent().scrollTop(tab.DoubleUtil.roundToInt(dv.position().top))},glassClicked:function(){this.menuViewModel.hide()},showSubmenu:null,activateSubmenu:function(dv,dw){var dx=dw.data('tabMenuMenuItemLevel');if(ss.isValue(dx)&&dx<this.menuStack.length){return}var dy=new ch("<div class='tabMenu' tabindex='1'><div class='tabMenuContent'/></div>");dy.get_domRoot().addClass(this.menuViewModel.get_theme().menuClass);dy.get_domRoot().attr('data-sub-menu-depth',this.menuStack.length.toString());this.menuStack.push(dy);this.buildMenu(dy,dv.get_subMenu());this.showSubmenu(dv,dw,dy)},positionMenu:function(dv,dw,dx){var dy=$(window).scrollLeft()+6;var dz=dy+$(window).width()-12;var dA=$(window).innerWidth()-12;var dB=dx.get_domRoot().outerHeight(false);var dC=dx.get_domRoot().outerWidth(false);var dD=dB-dx.get_domRoot().height();var dE=dw.relativeDom.outerWidth(false);var dF=dw.relativeDom.outerHeight(false);var dG,dH;var dI=tab.PointUtil.fromPosition(tab.DomUtil.getElementOffset(dw.relativeDom,true));var dJ=dv.getVisibleRoom(dI);var dK=new tab.WindowHelper(window.window);dI.x+=dK.get_pageXOffset();dI.y+=dK.get_pageYOffset();var dL=null;if(!dw.preferUp&&dJ.roomBelow>=dB+dF){dH=dI.y+dF}else if(dJ.roomAbove>dB){dH=dI.y-dB}else if(dJ.roomBelow-dF>=dJ.roomAbove){dH=dI.y+dF;dL=dJ.roomBelow-dF-dD-6}else{dH=dI.y-dJ.roomAbove+6;dL=dJ.roomAbove-dD-6}if(dw.preferLeft){dG=dI.x+dE-dC}else{dG=dI.x}dG=Math.max(dG,dy);if(dG+dC>dz){dG=dz-dC}dG=Math.max(6,dG);var dM={};dM['top']=dH+'px';dM['left']=dG+'px';dM['max-height']=(ss.isValue(dL)?(dL+'px'):'');dM['max-width']=dA+'px';dx.get_domRoot().css(dM)},buildMenu:function(dv,dw){var dx=false;var dy=false;var dz=false;var dA=[];var dB=cZ.targetAndClick(dv.get_domRoot().get(0),ss.mkdel(this,this.$9));this.menuDisposables.add$1(dB);var dC=dw.get_menuItems();for(var dD=0;dD<dC.length;dD++){var dE=dC[dD];var dF;if(dE.get_isDivider()){dF=(new cf).get_domRoot().addClass(this.menuViewModel.get_theme().dividerClass)}else{if(dE.get_isTextInput()){var dG=this.$7(dE);dF=dG.get_domRoot()}else if(ss.isInstanceOfType(dE,N)){dF=dE.get_domRoot()}else{var dH=(new e(dE.get_name(),dE.get_enabled())).$2(dE.get_checkState(),dE.get_iconClass()).$3(dE.get_iconClassTwo()).$1(dE.get_description()).$4(dE.get_subMenu()).$5([this.menuViewModel.get_theme().itemClass,dE.get_itemClass()]).$0();dx=dx||dH.$3;dy=dy||dH.$4;dz=dz||dH.$2;dH.get_domRoot().data('tabMenuMenuItem',dE);dH.get_domRoot().data('tabMenuMenuItemLevel',this.menuStack.length);dF=dH.get_domRoot()}dF.addClass('tabMenuMenuItem')}dA.push(dF);this.$b[dE.get_id()]=dF}dv.content.append(dA);if(!dx){dv.get_domRoot().addClass(this.menuViewModel.get_theme().noIconClass)}if(dy){dv.get_domRoot().addClass('tabMenuHasIconTwo')}if(!dz){dv.get_domRoot().addClass(this.menuViewModel.get_theme().noDescClass)}if(ss.isValue(this.menuViewModel.get_selectedItem())){this.$a(this.menuViewModel.get_selectedItem(),true)}},$9:function(dv){var dw=$(dv.target).closest('.tabMenuMenuItem');var dx=dw.data('tabMenuMenuItem');if(ss.isNullOrUndefined(dx)){return}else if(ss.isValue(dx.get_subMenu())){this.activateSubmenu(dx,dw)}else{this.menuViewModel.clickMenuItem(dx)}},$8:function(dv){dv.stopPropagation();if(dv.which===13){var dw=dv.data['callback'];if($.isFunction(dw)){dw($(dv.target).val())}}else if(dv.which===9){dv.preventDefault();dv.target.blur();this.menuViewModel.iterateFocus((dv.shiftKey?-1:1))}},$7:function(dv){var dw=new cg;dw.textInput.keydown(ss.mkdict(['callback',dv.get_data()]),ss.mkdel(this,this.$8)).focus(ss.mkdel(this,function(dx){this.get_viewModel().set_focusedItem(dv)}));if(!ss.isNullOrEmptyString(dv.get_itemClass())){dw.get_domRoot().addClass(dv.get_itemClass())}this.disposables.add$1(new tab.CallOnDispose(function(){dw.textInput.unbind()}));return dw}},ss.makeGenericType(m,[cj]),[bq,ss.IDisposable,ss.makeGenericType(bO,[cj])]);ss.initClass(cj,a,{add_shown:function(dv){this.$2$1=ss.delegateCombine(this.$2$1,dv)},remove_shown:function(dv){this.$2$1=ss.delegateRemove(this.$2$1,dv)},add_hidden:function(dv){this.$2$2=ss.delegateCombine(this.$2$2,dv)},remove_hidden:function(dv){this.$2$2=ss.delegateRemove(this.$2$2,dv)},add_menuChanged:function(dv){this.$2$3=ss.delegateCombine(this.$2$3,dv)},remove_menuChanged:function(dv){this.$2$3=ss.delegateRemove(this.$2$3,dv)},add_menuItemClicked:function(dv){this.$2$4=ss.delegateCombine(this.$2$4,dv)},remove_menuItemClicked:function(dv){this.$2$4=ss.delegateRemove(this.$2$4,dv)},add_menuItemSelectionChanged:function(dv){this.$2$5=ss.delegateCombine(this.$2$5,dv)},remove_menuItemSelectionChanged:function(dv){this.$2$5=ss.delegateRemove(this.$2$5,dv)},add_menuItemFocusChanged:function(dv){this.$2$6=ss.delegateCombine(this.$2$6,dv)},remove_menuItemFocusChanged:function(dv){this.$2$6=ss.delegateRemove(this.$2$6,dv)},get_visible:function(){return this.$2$7},set_visible:function(dv){this.$2$7=dv},set_disposeOnHide:function(dv){this.remove_hidden(this.$0);if(dv){this.add_hidden(this.$0)}},get_menu:function(){return this.$2},set_menu:function(dv){if(_.isEqual(this.$2,dv)){return}this.$2=dv;if(ss.isValue(this.$2$3)){this.$2$3()}},get_theme:function(){return this.$2$8},set_theme:function(dv){this.$2$8=dv},get_selectedItem:function(){return this.$3},set_selectedItem:function(dv){if(ss.isValue(this.$3)){if(ss.isValue(this.$2$5)){this.$2$5(this.$3,false)}}if(ss.isNullOrUndefined(dv)){this.$3=null;return}this.$3=dv;if(ss.isValue(this.$2$5)){this.$2$5(this.$3,true)}},get_focusedItem:function(){return this.$1},set_focusedItem:function(dv){if(ss.referenceEquals(this.$1,dv)){return}if(ss.isValue(this.$1)){if(ss.isValue(this.$2$6)){this.$2$6(this.$1,false)}}if(ss.isNullOrUndefined(dv)||!dv.get_enabled()){this.$1=null;return}this.$1=dv;if(ss.isValue(this.$2$6)){this.$2$6(this.$1,true)}},show:function(dv){if(this.get_visible()){return}this.set_visible(true);if(ss.isValue(this.$2$1)){this.$2$1(dv)}},dispose:function(){this.hide();n.prototype.dispose.call(this)},hide:function(){if(this.get_visible()===false){return}this.set_visible(false);this.raiseActionEvent(this.$2$2)},clickMenuItem:function(dv){if(!dv.get_enabled()){return}this.hide();if(ss.isValue(this.$2$4)){this.$2$4(dv)}},iterateFocus:function(dv){var dw=this.findMenuForFocusedItem();if(ss.isNullOrUndefined(dw)){return}var dx=ss.indexOf(dw.get_menuItems(),this.get_focusedItem());if(dx<0){return}dx+=dv;while(dx>=0&&dx<dw.get_menuItems().length&&(dw.get_menuItems()[dx].get_isDivider()||!dw.get_menuItems()[dx].get_enabled())){dx+=dv}if(dx>=0&&dx<dw.get_menuItems().length){this.set_focusedItem(dw.get_menuItems()[dx])}},focusByNamePrefix:function(dv){dv=dv.toLowerCase();var dw=this.findMenuForFocusedItem();if(ss.isNullOrUndefined(dw)){return}var dx=ss.indexOf(dw.get_menuItems(),this.get_focusedItem())+1;if(dx>=dw.get_menuItems().length){dx=0}var dy=dx;do{if(dw.get_menuItems()[dy].get_enabled()&&!dw.get_menuItems()[dy].get_isDivider()){if(ss.isValue(dw.get_menuItems()[dy].get_name())&&ss.startsWithString(dw.get_menuItems()[dy].get_name().toLowerCase(),dv)){this.set_focusedItem(dw.get_menuItems()[dy]);return}}++dy;if(dy>=dw.get_menuItems().length){dy=0}}while(dy!==dx)},findMenuForFocusedItem:function(){if(ss.isNullOrUndefined(this.get_focusedItem())){return null}var dv=null;dv=ss.mkdel(this,function(dw){if(ss.contains(dw.get_menuItems(),this.get_focusedItem())){return dw}var dx=dw.get_menuItems();for(var dy=0;dy<dx.length;dy++){var dz=dx[dy];if(ss.isValue(dz.get_subMenu())){var dA=dv(dz.get_subMenu());if(ss.isValue(dA)){return dA}}}return null});return dv(this.get_menu())},findItemContainingSubMenu:function(dv){if(ss.isNullOrUndefined(dv)||ss.referenceEquals(this.get_menu(),dv)){return null}var dw=null;dw=function(dx){var dy=null;var dz=dx.get_menuItems();for(var dA=0;dA<dz.length;dA++){var dB=dz[dA];if(ss.isValue(dB.get_subMenu())){dy=(ss.referenceEquals(dB.get_subMenu(),dv)?dB:dw(dB.get_subMenu()));if(ss.isValue(dy)){break}}}return dy};return dw(this.get_menu())}},n,[ss.IDisposable,bP]);ss.initClass(cl,a,{get_glass:function(){return this.$r},ensureAttachedAndSized:function(){if(ss.isValue(this.$r)||this.isAttached()){return}this.$r=new bg;this.$r.set_opaque(true);this.$r.show();this.get_element().css('z-index',(this.$r.get_zIndex()+1).toString());Q.prototype.ensureAttachedAndSized.call(this)},bindToEvents:function(){Q.prototype.bindToEvents.call(this);$(window).bind(this.createNamespacedEventName('resize'),ss.mkdel(this,this.onWindowResize));$(document).bind(this.createNamespacedEventName('keydown'),ss.mkdel(this,this.onDocumentKeyDown))},unbindEvents:function(){$(window).unbind(this.get_eventNamespace());$(document).unbind(this.get_eventNamespace());Q.prototype.unbindEvents.call(this)},detach:function(){this.$q();Q.prototype.detach.call(this)},dispose:function(){this.$q();Q.prototype.dispose.call(this)},$q:function(){if(ss.isValue(this.$r)){this.$r.dispose();this.$r=null}},onWindowResize:function(dv){this.positionInWindow()},onDocumentKeyDown:function(dv){if(dv.which===27){this.close(null);dv.preventDefault();return}}},Q,[bq,ss.IDisposable]);ss.initClass(cm,a,{});ss.initClass(cn,a,{});ss.initClass(co,a,{get_dragType:function(){return'dragmove'},moveTo:function(dv){if(ss.isValue(this.$2)){this.$2(dv)}},endDragAt:function(dv){if(ss.isValue(this.$1)){this.$1(dv)}}},W);ss.initClass(cp,a,{add_moveAction:function(dv){this.$1$1=ss.delegateCombine(this.$1$1,dv)},remove_moveAction:function(dv){this.$1$1=ss.delegateRemove(this.$1$1,dv)},add_endAction:function(dv){this.$1$2=ss.delegateCombine(this.$1$2,dv)},remove_endAction:function(dv){this.$1$2=ss.delegateRemove(this.$1$2,dv)},get_offset:function(){return this.$3},set_offset:function(dv){this.$3=dv},get_elementToDrag:function(){return this.$2},get_elementToChange:function(){return this.$1},get_documentBodySize:function(){return this.$0},set_documentBodySize:function(dv){this.$0=dv},dispose:function(){V.removeDragSource(this.$2)},calculateOffset:function(dv){var dw=this.$1.position();return{x:dv.pageX-tab.DoubleUtil.roundToInt(dw.left),y:dv.pageY-tab.DoubleUtil.roundToInt(dw.top)}},startDrag:function(dv){this.$3=this.calculateOffset(dv);this.$2.addClass('dragging');return new co(this.$2,ss.mkdel(this,this.dragMove),ss.mkdel(this,this.dragEnd),null)},dragMove:function(dv){this.performMove(dv);if(ss.isValue(this.$1$1)){this.$1$1(dv)}},performMove:function(dv){var dw=dv.pageX-this.$3.x;var dx=dv.pageY-this.$3.y;var dy=((this.$0==='useClientSize')?document.body.clientWidth:document.body.scrollWidth);var dz=((this.$0==='useClientSize')?document.body.clientHeight:document.body.scrollHeight);dw=Math.max(0,Math.min(dy-this.$1.outerWidth(),dw));dx=Math.max(0,Math.min(dz-this.$1.outerHeight(),dx));tab.DomUtil.setElementPosition(this.$1,dw,dx)},dragEnd:function(dv){this.performMove(dv);this.$2.removeClass('dragging');if(ss.isValue(this.$1$2)){this.$1$2(dv)}}},null,[ss.IDisposable,bw]);ss.initClass(cP,a,{get_selection:function(){return this.state.currentSelection},$5:function(){return this.props.showApplyAndCancelButtons&&bi.op_Inequality(this.state.currentSelection,this.state.currentlyAppliedSelection)},$1:function(dv){var dw=dv;if(bi.op_Inequality(dw,null)){dw=dw.clone()}return{currentlyAppliedSelection:dv,currentSelection:dw}},componentWillReceiveProps:function(dv){if(bi.op_Inequality(dv.selection,this.state.currentlyAppliedSelection)){this.setState(this.$1(dv.selection))}},$0:function(){if(bi.op_Equality(this.get_selection(),this.state.currentlyAppliedSelection)){return}this.setState(this.$1(this.get_selection()));if(!ss.staticEquals(this.props.onSelectionChanged,null)){this.props.onSelectionChanged(this.get_selection())}},$4:function(){this.setState(this.$1(this.state.currentlyAppliedSelection))},render:function(){var dv=this.props.allOption&&this.get_selection().groupSize>0;var dw;if(ss.isValue(this.props.buttonKeys)&&this.props.buttonKeys.length===this.props.labels.length){dw=this.props.buttonKeys}else{dw=cE.generateUniqueKeys(String).call(null,this.props.labels,[(dv?'__ALL__':null)])}var dx='tab-vScrollable';if(this.props.showApplyAndCancelButtons){dx+=' apply-cancel'}return React.DOM.div({className:'tab-SelectableButtonGroup'},React.DOM.div({className:dx},(dv?ss.mkdel(this,function(){var dy=new Object;dy.border=this.props.borders;dy.label=this.props.allLabel;dy.buttonStyle=this.props.buttonStyle;dy.labelStyle=this.props.labelStyle;dy.isSelected=this.shouldDisplayAllButtonSelected();dy.isButtonTextMarkedAsExcluded=false;dy.onTap=ss.mkdel(this,function(dz){this.onAllButtonTap()});dy.key='__ALL__';dy.customClassName=this.getSelectionSpanClassNames(-1,this.props.labels.length-1,dv);dy.selectionMarkStyle=this.props.selectionMarkStyle;return React.createElement(cO,dy)})():null),_.map(this.props.labels,ss.mkdel(this,function(dy,dz){var dA=new Object;dA.border=this.props.borders;dA.label=dy;dA.buttonStyle=this.props.buttonStyle;dA.labelStyle=this.props.labelStyle;dA.isSelected=this.shouldDisplayButtonSelected(dz);dA.isButtonTextMarkedAsExcluded=this.props.isSelectionExclusive;dA.onTap=ss.mkdel(this,function(dB){this.onButtonTap(dz)});dA.key=dw[dz];dA.customClassName=this.getSelectionSpanClassNames(dz,this.props.labels.length-1,dv);dA.selectionMarkStyle=this.props.selectionMarkStyle;return React.createElement(cO,dA)}))),(this.props.showApplyAndCancelButtons?ss.mkdel(this,function(){return React.DOM.div({className:'tab-ApplyCancelPanel'},React.createElement(q,{label:this.props.applyButtonLabel,customClassName:'apply',border:false,onTap:ss.mkdel(this,function(dy){this.$0()}),disabled:!this.$5()}),React.createElement(q,{label:this.props.cancelButtonLabel,customClassName:'cancel',border:false,onTap:ss.mkdel(this,function(dy){this.$4()}),disabled:!this.$5()}))})():null))},shouldDisplayAllButtonSelected:function(){return this.get_selection().get_allSelected()},getSelectionSpanClassNames:function(dv,dw,dx){var dy=this.$3(dv,dx)+' '+this.$2(dv,dw,dx);dy=dy.trim();if(dy.length===0){dy=null}return dy},shouldDisplayButtonSelected:null,onAllButtonTap:function(){},onButtonTap:null,notifySelectionChanged:function(){if(this.props.showApplyAndCancelButtons){this.setState(this.state)}else{this.$0()}},$3:function(dv,dw){if(dv===-1){if(dw&&this.shouldDisplayAllButtonSelected()){return'tab-SelectionStart'}}else if(this.shouldDisplayButtonSelected(dv)){if(dv===0){if(!dw||!this.shouldDisplayAllButtonSelected()){return'tab-SelectionStart'}}else if(!this.shouldDisplayButtonSelected(dv-1)){return'tab-SelectionStart'}}return''},$2:function(dv,dw,dx){if(dv===-1){if(dx&&this.shouldDisplayAllButtonSelected()&&(this.props.labels.length===0||!this.shouldDisplayButtonSelected(0))){return'tab-SelectionEnd'}}else if(this.shouldDisplayButtonSelected(dv)){if(dv===dw){return'tab-SelectionEnd'}else if(!this.shouldDisplayButtonSelected(dv+1)){return'tab-SelectionEnd'}}return''}},React.Component);ss.initClass(cq,a,{shouldDisplayButtonSelected:function(dv){return this.get_selection().isSelected(dv)},onAllButtonTap:function(){this.get_selection().toggleAll();this.notifySelectionChanged()},onButtonTap:function(dv){this.get_selection().toggle(dv);this.notifySelectionChanged()}},cP);ss.initClass(cr,a,{get_scrollbarBuffer:function(){return 18},get_scrollerX:function(){return this.$a().scroll.scrollLeft()},get_scrollerY:function(){return this.$a().scroll.scrollTop()},$a:function(){return this.get_template()},$b:function(){return this.get_viewModel()},$8:function(){var dv=(this.$b().get_scrollX()?'auto':'hidden');var dw=(this.$b().get_scrollY()?'auto':'hidden');this.$a().scroll.css({'overflow-x':dv,'overflow-y':dw}).addClass('tabScollerNative');this.$a().scroll.toggleClass('tabScrollerCanScrollX',this.$b().get_scrollX());this.$a().scroll.toggleClass('tabScrollerCanScrollY',this.$b().get_scrollY())},onAddedToDom:function(){du.prototype.onAddedToDom.call(this);this.$7()},$9:function(){this.$a().content.empty();this.$7()},$7:function(){this.$a().content.append(this.$b().get_content())},scrollTo:function(dv,dw,dx,dy){this.$a().scroll.scrollLeft(dv);this.$a().scroll.scrollTop(dw)},scrollToElement:function(dv,dw,dx,dy){var dz=$(dv).offset();this.$a().scroll.scrollLeft(tab.DoubleUtil.roundToInt(dz.left)+dx);this.$a().scroll.scrollTop(tab.DoubleUtil.roundToInt(dz.top)+dy)}},cI,[bq,ss.IDisposable,ss.makeGenericType(bO,[cJ])]);ss.initClass(cs,a,{},dc,[ss.IDisposable]);ss.initClass(ct,a,{get_isCtrlKey:function(){return(tab.BrowserSupport.get_isMac()?this.metaKey:this.ctrlKey)},get_gestureInfo:function(){return this},getSelectAction:function(){var dv='simple';var dw=this.get_isCtrlKey();if(this.shiftKey){dv='range'}if(dw){dv='toggle'}return dv},preventDefault:function(){if(typeof(this.originalEvent['preventDefault'])==='function'){this.originalEvent.preventDefault()}},stopPropagation:function(){if(typeof(this.originalEvent['stopPropagation'])==='function'){this.originalEvent.stopPropagation()}}});ss.initClass(cu,a,{});ss.initClass(cv,a,{});ss.initClass(cw,a,{start:function(dv){if(dv.touches.length<this.numTouches){return}if(!this.$6){this.$8=dv.touches[0];this.$9=dv.touches[1];this.$7=this.$4();this.$5=this.$7;var dw=this.$3();this.$0('pinchStart',dv,dw);this.$6=true}},move:function(dv){if(this.$6){if(dv.touches.length<2){this.end(dv);return}this.$8=dv.touches[0];this.$9=dv.touches[1];this.$5=this.$3();this.$0('pinchMove',dv,this.$5)}},end:function(dv){var dw;if(dv.touches.length>=this.numTouches){return}if(this.$6){this.$6=false;dw=this.$3();this.$0('pinchEnd',dv,dw)}},$4:function(){var dv=this.$8;var dw=this.$9;var dx=dw.pageX-dv.pageX;var dy=dw.pageY-dv.pageY;var dz=Math.sqrt(dx*dx+dy*dy);var dA=ss.Int32.div(dx,2)+dv.pageX;var dB=ss.Int32.div(dy,2)+dv.pageY;var dC={};dC.pageX=dA;dC.pageY=dB;dC.distance=dz;return dC},$3:function(){var dv=this.$8;var dw=this.$9;var dx=dw.pageX-dv.pageX;var dy=dw.pageY-dv.pageY;var dz=Math.sqrt(dx*dx+dy*dy);var dA=ss.Int32.div(dx,2)+dv.pageX;var dB=ss.Int32.div(dy,2)+dv.pageY;var dC={};dC.pageX=dA;dC.pageY=dB;dC.scale=dz/this.$7.distance;dC.deltaX=dA-this.$7.pageX;dC.deltaY=dB-this.$7.pageY;dC.startX=this.$7.pageX;dC.startY=this.$7.pageY;dC.deltaXSinceLast=dA-this.$5.pageX;dC.deltaYSinceLast=dB-this.$5.pageY;return dC}},bf,[ss.IDisposable]);ss.initClass(cx,a,{},bY,[bq,ss.IDisposable,ss.makeGenericType(bO,[ca])]);ss.initClass(cy,a,{get_viewType:function(){return cx},get_viewModel:function(){return this},get_listItemCreator:function(){return this.$a},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(dv){}},ca,[ss.IDisposable,bP,ss.makeGenericType(bD,[Object]),bN]);ss.initClass(cz,a,{get_propertyName:function(){return this.$0}},ss.EventArgs);ss.initClass(cA,a,{add_valueChanged:function(dv){this.$1$1=ss.delegateCombine(this.$1$1,dv)},remove_valueChanged:function(dv){this.$1$1=ss.delegateRemove(this.$1$1,dv)},get_initialMinRange:function(){return this.$3},get_initialMaxRange:function(){return this.$2},get_currentMinValue:function(){return this.$1},set_currentMinValue:function(dv){this.$1=dv;if(ss.isValue(this.$1$1)){this.$1$1()}},get_currentMaxValue:function(){return this.$0},set_currentMaxValue:function(dv){this.$0=dv;if(ss.isValue(this.$1$1)){this.$1$1()}}});ss.initClass(cB,a,{get_rangeBar:function(){return this.$7},get_minValuePointer:function(){return this.$4},get_maxValuePointer:function(){return this.$1},get_minValueTextView:function(){return this.$6},get_maxValueTextView:function(){return this.$3},finishLayout:function(){this.get_minValueTextView().addToDom(this.$5);this.get_maxValueTextView().addToDom(this.$2);var dv=this.get_domRoot().width();this.$8.width(dv)}},dc,[ss.IDisposable]);ss.initClass(cC,a,{get_rangeBar:function(){return this.$b.get_rangeBar()},get_minValuePointer:function(){return this.$b.get_minValuePointer()},get_maxValuePointer:function(){return this.$b.get_maxValuePointer()},get_minValueTextView:function(){return this.$b.get_minValueTextView()},get_maxValueTextView:function(){return this.$b.get_maxValueTextView()},onAddedToDom:function(){this.$b.finishLayout();this.$c.updateView();du.prototype.onAddedToDom.call(this)},$8:function(dv,dw){switch(dw.get_propertyName()){case'CurrentMinValueText':{this.get_minValueTextView().set_text(this.$c.get_currentMinValueText());break}case'CurrentMaxValueText':{this.get_maxValueTextView().set_text(this.$c.get_currentMaxValueText());break}case'MinValuePointerPosition':{this.updateMinPointerPixelPosition(this.$c.get_minValuePointerPosition());break}case'MaxValuePointerPosition':{this.updateMaxPointerPixelPosition(this.$c.get_maxValuePointerPosition());break}}},$a:function(){this.$c.valueTextCommittedByUser(true,this.get_minValueTextView().get_text())},$9:function(){this.$c.valueTextCommittedByUser(false,this.get_maxValueTextView().get_text())},updateValueText:function(dv,dw){this.get_minValueTextView().set_text(dv);this.get_maxValueTextView().set_text(dw)},$7:function(){var dv=this.get_minValuePointer().width();var dw=this.get_rangeBar().width()-this.get_maxValuePointer().width();return dw-dv},updateMinPointerPixelPosition:function(dv){var dw=Math.round(dv*this.$7()+this.get_minValuePointer().width());this.get_minValuePointer().css('left',dw-this.get_minValuePointer().width()+'px')},updateMaxPointerPixelPosition:function(dv){var dw=Math.round(dv*this.$7()+this.get_minValuePointer().width());this.get_maxValuePointer().css('left',dw+'px')}},ss.makeGenericType(m,[cD]),[bq,ss.IDisposable,ss.makeGenericType(bO,[cD])]);ss.initClass(cD,a,{get_currentMinValueText:function(){return this.$1},set_currentMinValueText:function(dv){this.$1=dv;this.notifyPropertyChanged('CurrentMinValueText')},get_currentMaxValueText:function(){return this.$0},set_currentMaxValueText:function(dv){this.$0=dv;this.notifyPropertyChanged('CurrentMaxValueText')},get_minValuePointerPosition:function(){return this.$3},set_minValuePointerPosition:function(dv){this.$3=dv;this.notifyPropertyChanged('MinValuePointerPosition')},get_maxValuePointerPosition:function(){return this.$2},set_maxValuePointerPosition:function(dv){this.$2=dv;this.notifyPropertyChanged('MaxValuePointerPosition')},updateView:function(){this.set_currentMinValueText(this.$4.get_currentMinValue().toString());this.set_currentMaxValueText(this.$4.get_currentMaxValue().toString());this.updatePointerPositions()},valueTextCommittedByUser:function(dv,dw){var dx=parseFloat(dw);if(isNaN(dx)){this.updateView();return}var dy=false;if(dv&&dx<this.$4.get_initialMinRange()){dy=true}else if(!dv&&dx>this.$4.get_initialMaxRange()){dy=true}if(dy){dx=(dv?this.$4.get_initialMinRange():this.$4.get_initialMaxRange())}var dz=false;if(dv&&dx>this.$4.get_currentMaxValue()){dz=true}else if(!dv&&dx<this.$4.get_currentMinValue()){dz=true}if(dz){dx=(dv?this.$4.get_currentMaxValue():this.$4.get_currentMinValue())}if(dv){this.$4.set_currentMinValue(dx)}else{this.$4.set_currentMaxValue(dx)}},updatePointerPositions:function(){var dv=this.$4.get_initialMaxRange()-this.$4.get_initialMinRange();var dw=this.$4.get_currentMinValue()-this.$4.get_initialMinRange();var dx=this.$4.get_initialMaxRange()-this.$4.get_currentMaxValue();this.set_minValuePointerPosition(dw/dv);this.set_maxValuePointerPosition(1-dx/dv)}},n,[ss.IDisposable,bP]);ss.initClass(cE,a,{});ss.initClass(cH,a,{calculateOffset:function(dv){var dw=tab.PointUtil.fromPosition(this.get_elementToChange().position());var dx={x:0,y:0};switch(this.$4){case'bottomRight':{dx.x=dw.x+this.get_elementToChange().width()-dv.pageX;dx.y=dw.y+this.get_elementToChange().height()-dv.pageY;break}case'topLeft':{dx.x=dv.pageX-dw.x;dx.y=dv.pageY-dw.y;break}case'left':{dx.x=dv.pageX-dw.x;break}case'right':{dx.x=dw.x+this.get_elementToChange().width()-dv.pageX;break}case'top':{dx.y=dv.pageY-dw.y;break}case'bottom':{dx.y=dw.y+this.get_elementToChange().height()-dv.pageY;break}}return dx},performMove:function(dv){var dw=tab.PointUtil.fromPosition(this.get_elementToChange().position());var dx=this.get_elementToChange().width();var dy=this.get_elementToChange().height();var dz=((this.get_documentBodySize()==='useClientSize')?tab.DomUtil.get_documentBody().clientWidth:tab.DomUtil.get_documentBody().scrollWidth);var dA=((this.get_documentBodySize()==='useClientSize')?tab.DomUtil.get_documentBody().clientHeight:tab.DomUtil.get_documentBody().scrollHeight);switch(this.$4){case'bottomRight':{this.get_elementToChange().width(Math.min(dv.pageX+this.get_offset().x,dz)-dw.x);this.get_elementToChange().height(Math.min(dv.pageY+this.get_offset().y,dA)-dw.y);break}case'topLeft':{this.get_elementToChange().width(dx+(dw.x-Math.max(dv.pageX-this.get_offset().x,0)));this.get_elementToChange().height(dy+(dw.y-Math.max(dv.pageY-this.get_offset().y,0)));tab.DomUtil.setElementPosition(this.get_elementToChange(),dw.x+dx-this.get_elementToChange().width(),dw.y+dy-this.get_elementToChange().height());break}case'left':{this.get_elementToChange().width(dx+(dw.x-Math.max(dv.pageX-this.get_offset().x,0)));tab.DomUtil.setElementPosition(this.get_elementToChange(),dw.x+dx-this.get_elementToChange().width(),dw.y);break}case'right':{this.get_elementToChange().width(Math.min(dv.pageX+this.get_offset().x,dz)-dw.x);break}case'top':{this.get_elementToChange().height(dy+(dw.y-Math.max(dv.pageY-this.get_offset().y,0)));tab.DomUtil.setElementPosition(this.get_elementToChange(),dw.x,dw.y+dy-this.get_elementToChange().height());break}case'bottom':{this.get_elementToChange().height(Math.min(dv.pageY+this.get_offset().y,dA)-dw.y);break}}}},cp,[ss.IDisposable,bw]);ss.initClass(cJ,a,{add_contentChanged:function(dv){this.$2$1=ss.delegateCombine(this.$2$1,dv)},remove_contentChanged:function(dv){this.$2$1=ss.delegateRemove(this.$2$1,dv)},add_refresh:function(dv){this.$2$2=ss.delegateCombine(this.$2$2,dv)},remove_refresh:function(dv){this.$2$2=ss.delegateRemove(this.$2$2,dv)},get_content:function(){return this.$3},set_content:function(dv){this.$3=dv;this.raiseActionEvent(this.$2$1)},get_options:function(){return this.$4},get_scrollX:function(){return(ss.isValue(this.$4.scrollX)?this.$4.scrollX:false)},set_scrollX:function(dv){this.$4.scrollX=dv;if(this.get_hasCustomIndicator()){this.get_indicatorOptions().listenX=dv}},get_scrollY:function(){return(ss.isValue(this.$4.scrollY)?this.$4.scrollY:false)},set_scrollY:function(dv){this.$4.scrollY=dv;if(this.get_hasCustomIndicator()){this.get_indicatorOptions().listenY=dv}},get_hasCustomIndicator:function(){return ss.isValue(this.$4.indicators)},set_hasCustomIndicator:function(dv){if(dv){if(ss.isNullOrUndefined(this.$4.indicators)){this.get_options().indicators=new Object;this.get_options().indicators.listenX=this.get_scrollX();this.get_options().indicators.listenY=this.get_scrollY()}}else{this.get_options().indicators=null}},get_indicatorOptions:function(){return this.get_options().indicators},$0:function(dv){this.$4={};this.set_hasCustomIndicator(dv);if(tsConfig.is_mobile){this.$1()}else{this.$2()}},$2:function(){if(!this.get_hasCustomIndicator()){this.$4.scrollbars='custom';this.$4.interactiveScrollbars=true}this.$4.mouseWheel=true;this.$4.disableMouse=true},$1:function(){if(!this.get_hasCustomIndicator()){this.$4.scrollbars='custom'}},triggerRefresh:function(){this.raiseActionEvent(this.$2$2)}},n,[ss.IDisposable,bP]);cJ.$ctor1.prototype=cJ.prototype;ss.initEnum(cK,a,{iScroll:0});ss.initClass(cM,a,{});ss.initClass(cN,a,{componentWillReceiveProps:function(dv){this.$4(dv.setFocus)},$4:function(dv){if(dv===this.state.hasFocus){return}this.state.hasFocus=dv;this.setState(this.state);if(dv){this.$0()}},render:function(){var dv='tab-UnifiedSearchField';if(this.state.hasFocus){dv+=' focused'}var dw=React.DOM.div;var dx=((this.state.userInput.length===0)?ss.mkdel(this,function(){return React.DOM.span({className:'tab-GhostText'},this.props.ghostText)})():null);var dy=React.DOM.div({className:'tab-PositioningContainer'},React.DOM.input({type:'text',value:this.state.userInput,className:'tab-SearchInput',onChange:ss.mkdel(this,function(dA){this.$3(dA.target.value)}),onFocus:ss.mkdel(this,function(dA){this.$4(true)}),onBlur:ss.mkdel(this,function(dA){this.$4(false)}),onKeyDown:ss.mkdel(this,this.$2),ref:'SearchFieldComponentInput'}));var dz=new Object;dz.onTap=ss.mkdel(this,function(dA){this.$1()});dz.customClassName='tab-SearchClearButton';dz.iconClassName='tab-SearchClearButtonIcon';dz.title=((this.state.userInput.length===0)?this.props.closeText:this.props.clearText);return dw({className:dv},dx,dy,React.createElement(bt,dz))},componentDidMount:function(){if(this.state.hasFocus){this.$0()}},$2:function(dv){if(dv.keyCode===27){this.$1()}},$0:function(){var dv=ReactDOM.findDOMNode(this.refs['SearchFieldComponentInput']);if(ss.isValue(dv)){dv.focus()}},$1:function(){if(this.state.userInput.length===0){if(!ss.staticEquals(this.props.onClose,null)){this.props.onClose()}}else{this.$3('');this.$0()}},$3:function(dv){this.state.userInput=dv;this.setState(this.state)}},React.Component);ss.initClass(cO,a,{get_className:function(){var dv=[ss.makeGenericType(p,[Object]).prototype.get_className.call(this)];dv.push('selectable');if(this.props.isSelected){dv.push('selected');if(this.props.isButtonTextMarkedAsExcluded){dv.push('excluded')}}else{dv.push('unselected');dv.push('tab-DesignTint')}return dv.join(' ')},customContentBefore:function(){return React.DOM.div({className:'tab-SelectionMark',style:this.props.selectionMarkStyle})}},ss.makeGenericType(p,[Object]));ss.initClass(cR,a,{get_selecting:function(){return this.$1},get_shiftKey:function(){return this.$2},get_ctrlKey:function(){return this.$0}},ss.CancelEventArgs);ss.initEnum(cS,a,{single:0,multiGrouped:1,multiToggle:2});ss.initClass(cT,a,{});ss.initClass(cU,a,{shouldDisplayButtonSelected:function(dv){return!this.get_selection().get_allSelected()&&this.get_selection().isSelected(dv)},onAllButtonTap:function(){this.get_selection().selectAll();this.notifySelectionChanged()},onButtonTap:function(dv){this.get_selection().unselectAll();this.get_selection().select(dv);this.notifySelectionChanged()}},cP);ss.initClass(cV,a,{get_dimensions:function(){return this.$0},get_getVisibleRoomFunc:function(){return this.$1},getVisibleRoom:function(dv){if(!ss.staticEquals(this.get_getVisibleRoomFunc(),null)){return this.get_getVisibleRoomFunc()(dv)}var dw=2147483647;return{roomAbove:dw,roomBelow:dw,roomLeft:dw,roomRight:dw}}});ss.initClass(cW,a,{},bR,[bq,ss.IDisposable]);ss.initClass(cX,a,{});ss.initClass(cY,a,{add_tabChanged:function(dv){this.$1$1=ss.delegateCombine(this.$1$1,dv)},remove_tabChanged:function(dv){this.$1$1=ss.delegateRemove(this.$1$1,dv)},get_domRoot:function(){return this.$5.get_root()},get_tabs:function(){return this.$5.get_tabs()},get_contentArea:function(){return this.$5.get_contentArea()},get_activeTabId:function(){return this.$4},set_activeTabId:function(dv){if(!ss.referenceEquals(this.$4,dv)){this.$4=dv;if(ss.isValue(this.$1$1)){this.$1$1()}}},addTab:function(dv,dw,dx){if(ss.keyExists(this.$3,dv)){return}var dy=this.$5.createTabLabel(dw);dy.get_domRoot().addClass('tabTabLabelId-'+dv);var dz=new de(dy.get_domRoot());var dA=ss.mkdel(this,function(dB,dC){if(dC.get_propertyName()==='selected'&&dz.get_selected()){this.$0(dx,dv)}});dz.add_propertyChanged(dA);this.$2.add$1(new tab.CallOnDispose(function(){dz.remove_propertyChanged(dA)}));this.$2.add$1(dz);this.$1.addItem(dz);this.$3[dv]=dz;this.$5.get_tabs().append(dy.get_domRoot());this.$5.get_contentArea().append(dx);this.selectTab(dv)},selectTab:function(dv){if(!ss.keyExists(this.$3,dv)){return}this.$1.selectItem(this.$3[dv])},dispose:function(){this.$2.dispose();this.$1.dispose()},$0:function(dv,dw){this.$5.get_contentArea().children().hide();dv.show();this.set_activeTabId(dw)}},null,[ss.IDisposable]);ss.initClass(cZ,a,{$9:function(dv){this.$1$1=ss.delegateCombine(this.$1$1,dv)},$a:function(dv){this.$1$1=ss.delegateRemove(this.$1$1,dv)},$5:function(dv){this.$1$2=ss.delegateCombine(this.$1$2,dv)},$6:function(dv){this.$1$2=ss.delegateRemove(this.$1$2,dv)},$7:function(dv){this.$1$3=ss.delegateCombine(this.$1$3,dv)},$8:function(dv){this.$1$3=ss.delegateRemove(this.$1$3,dv)},$b:function(dv){this.$1$4=ss.delegateCombine(this.$1$4,dv)},$c:function(dv){this.$1$4=ss.delegateRemove(this.$1$4,dv)},get_stopPropagationOnEvent:function(){return this.$4},set_stopPropagationOnEvent:function(dv){this.$4=dv},dispose:function(){if(ss.isValue(this.handler)){this.handler.dispose();this.handler=null}this.$1.dispose()},onPress:function(dv){this.$9(dv);this.$1.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$a(dv)})));return this},onClick:function(dv){this.$5(dv);this.$1.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$6(dv)})));return this},onDoubleClick:function(dv){this.$7(dv);this.$1.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$8(dv)})));this.$0('doubleTap',ss.mkdel(this,this.handleDoubleClickEvent));return this},onRightClick:function(dv){this.$b(dv);this.$1.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$c(dv)})));return this},$0:function(dv,dw){if(!da.isHandling(this.eventConfig,dv)){var dx={};da.setHandler(dx,dv,dw);this.handler.update(dx);$.extend(this.eventConfig,dx)}},raiseEvent:function(dv,dw,dx){if(ss.isValue(dw)){if(dx){dv.stopPropagation()}dw(dv)}},handlePressEvent:function(dv){this.$2=dv.pageX;this.$3=dv.pageY;this.raiseEvent(dv,this.$1$1,false)},handleClickEvent:function(dv){this.raiseEvent(dv,this.$1$2,this.$4);if(dv.type==='touchend'){v.preventGhostClick(this.$2,this.$3)}},handleDoubleClickEvent:function(dv){this.raiseEvent(dv,this.$1$3,this.$4)},handleRightClickEvent:function(dv){dv.preventDefault();this.raiseEvent(dv,this.$1$4,this.$4)}},null,[ss.IDisposable]);ss.initClass(da,a,{get_usingHover:function(){return da.isHandling(this.config,'hover')||da.isHandling(this.config,'moving')},isStartEvent:function(dv){return ss.keyExists(this.startEvents,dv)},isMoveEvent:function(dv){return ss.keyExists(this.moveEvents,dv)},isEndEvent:function(dv){return ss.keyExists(this.endEvents,dv)},isOutEvent:function(dv){return ss.keyExists(this.outEvents,dv)},isScrollEvent:function(dv){return ss.keyExists(this.scrollEvents,dv)},isCancelEvent:function(dv){return ss.keyExists(this.cancelEvents,dv)},isMouseEvent:function(dv){return this.handledEvents[dv]===1},isTouchEvent:function(dv){return this.handledEvents[dv]===2},isRightClickEvent:function(dv){return dv==='contextmenu'&&this.handledEvents[dv]===1},isLeftMouseEvent:function(dv){if(this.isMouseEvent(dv.type)){var dw=cn.getMouseButtonEnum(dv.originalEvent);if(dw==='left'){if(tab.BrowserSupport.get_isMac()&&dv.ctrlKey){return false}return true}}return false},suppressHover:function(){if(this.get_usingHover()){this.$4.hover.suppressHover()}},unsuppressHover:function(){if(this.get_usingHover()){this.$4.hover.unsuppressHover()}},cancelHover:function(){if(this.get_usingHover()){this.$4.hover.cancel()}},update:function(dv){$.extend(this.config,dv);var dw=new ss.ObjectEnumerator(this.$4);try{while(dw.moveNext()){var dx=dw.current();var dy=dx.value;dy.update(this.config)}}finally{dw.dispose()}this.setupPressDrag()},destroy:function(){this.dispose()},dispose:function(){if(ss.isValue(this.$3)){for(var dv=0;dv<this.$3.length;dv++){var dw=this.$3[dv];dojo.disconnect(dw)}}if(ss.isValue(this['debugger'])){this['debugger']['destroy']()}da.$0(this.$4.discrete);da.$0(this.$4.drag);da.$0(this.$4.hover);da.$0(this.$4.pinch)},setupEventNames:function(){this.startEvents['touchstart']=2;this.moveEvents['touchmove']=2;this.endEvents['touchend']=2;this.cancelEvents['touchcancel']=2;if(tsConfig.is_mobile){if(!tsConfig.is_touch){this.startEvents['mousedown']=1;this.moveEvents['mousemove']=1;this.endEvents['mouseup']=1;this.outEvents['mouseout']=1}}else{this.startEvents['mousedown']=1;this.moveEvents['mousemove']=1;this.endEvents['mouseup']=1;this.outEvents['mouseout']=1;this.scrollEvents['scroll']=1;this.endEvents['contextmenu']=1}$.extend(this.handledEvents,this.startEvents,this.moveEvents,this.endEvents,this.outEvents,this.scrollEvents,this.cancelEvents)},makeRecognizers:function(dv){this.$4.drag=new U(dv);this.$4.discrete=new R(dv);this.$4.pinch=new cw(dv);if(this.get_usingHover()){this.$4.hover=new bn(dv)}},configureDomElem:function(dv){dv.style['-webkit-user-select']='none';dv.style['-webkit-touch-callout']='none';dv.style['-webkit-tap-highlight-color']='transparent';dv.style['-ms-touch-action']='none'},handler:function(dv){var dw=new ct(dv,this.config.domElem);if(!tsConfig.is_mobile&&this.isTouchEvent(dw.type)){if(tab.DomUtil.handleTouchEvents(dw.target)){dv.preventDefault()}else{return}}if(this.mousedown&&da.$2()!=='left'){this.mousedown=false}if(dw.touches.length>1&&!this.$1(dw)){var dx=new ss.ObjectEnumerator(this.$4);try{while(dx.moveNext()){var dy=dx.current();var dz=dy.value;dz.cancel()}}finally{dx.dispose()}return}if(this.isScrollEvent(dw.type)){this.mousedown=false}else if(this.isOutEvent(dw.type)){if(this.get_usingHover()){this.$4.hover.out(dw)}}else if(this.isStartEvent(dw.type)){this.handlingContextMenu=false;this.lastMouseButtonPressed=cn.getMouseButtonEnum(dv);if(this.isMouseEvent(dw.type)){if(!this.isLeftMouseEvent(dw)){return}this.mousedown=true;da.$3(this.lastMouseButtonPressed)}if(this.get_usingHover()){this.$4.hover.start(dw)}this.$4.discrete.start(dw);this.$4.drag.start(dw);if(ss.isValue(this.$4.pinch)){this.$4.pinch.start(dw)}}else if(this.isMoveEvent(dw.type)){if(this.get_usingHover()){this.$4.hover.move(dw)}if(this.isMouseEvent(dw.type)&&this.lastMouseButtonPressed!=='left'){return}if(this.isMouseEvent(dw.type)&&!this.mousedown){return}this.$4.discrete.move(dw);this.$4.drag.move(dw);if(ss.isValue(this.$4.pinch)){this.$4.pinch.move(dw)}}else{da.$3('none');if(this.isMouseEvent(dw.type)){this.mousedown=false}if(this.get_usingHover()){this.$4.hover.end(dw)}if(ss.isValue(this.$4.pinch)){this.$4.pinch.end(dw)}this.$4.drag.end(dw);if(this.isMouseEvent(dw.type)&&(this.isRightClickEvent(dw.type)||this.lastMouseButtonPressed==='right')){this.handlingContextMenu=true}if(tab.BrowserSupport.get_isMac()&&this.handlingContextMenu&&this.isMouseEvent(dw.type)&&dw.type==='mouseup'){return}if(this.handlingContextMenu&&this.isMouseEvent(dw.type)&&!this.isRightClickEvent(dw.type)){return}this.$4.discrete.end(dw)}},$0:function(dv){var dw=ss.mkdel(this,function(dA){this.handler(dA)});this.$3=new Array(ss.getKeyCount(this.handledEvents));var dx=0;var dy=ss.getEnumerator(Object.keys(this.handledEvents));try{while(dy.moveNext()){var dz=dy.current();this.$3[dx]=dojo.connect(dv,dz.toString(),this,dw);dx++}}finally{dy.dispose()}},$2:function(){return da.isHandling(this.config,'pressDragStart')||da.isHandling(this.config,'pressDragMove')||da.isHandling(this.config,'pressDragEnd')||da.isHandling(this.config,'doublePressDragStart')||da.isHandling(this.config,'doublePressDragMove')||da.isHandling(this.config,'doublePressDragEnd')},$1:function(dv){var dw=dv.touches[0].target;var dx=dv.touches[1].target;var dy=document.body;var dz=dv.currentTarget;var dA=false;while(!dA&&ss.isValue(dw)&&ss.isValue(dx)){dA=true;if(!ss.referenceEquals(dw,dz)&&!ss.referenceEquals(dw,dy)){dw=dw.parentNode;dA=false}if(!ss.referenceEquals(dx,dz)&&!ss.referenceEquals(dx,dy)){dx=dx.parentNode;dA=false}if(ss.referenceEquals(dw,dx)){dA=true}}return ss.referenceEquals(dw,dx)},setupPressDrag:function(){if(!this.$2()){return}var dv=ss.mkdel(this,function(dy){if(da.isHandling(this.config,'press')){var dz=da.$1(this.config,'press');dz(dy)}var dA={};da.setHandler(dA,'dragStart',da.$1(this.config,'pressDragStart'));da.setHandler(dA,'dragMove',da.$1(this.config,'pressDragMove'));da.setHandler(dA,'dragEnd',da.$1(this.config,'pressDragEnd'));da.setHandler(dA,'pinchStart',da.$1(this.config,'doublePressDragStart'));da.setHandler(dA,'pinchMove',da.$1(this.config,'doublePressDragMove'));da.setHandler(dA,'pinchEnd',da.$1(this.config,'doublePressDragEnd'));this.$4.drag.update(dA);if(ss.isValue(this.$4.pinch)){this.$4.pinch.update(dA)}});var dw=ss.mkdel(this,function(dy){if(da.isHandling(this.config,'lastTouch')){var dz=da.$1(this.config,'lastTouch');dz(dy)}this.$4.drag.update(this.config);if(ss.isValue(this.$4.pinch)){this.$4.pinch.update(this.config)}});var dx={};da.setHandler(dx,'press',dv);da.setHandler(dx,'lastTouch',dw);this.$4.discrete.update(dx)}},null,[ss.IDisposable]);da.$ctor1.prototype=da.prototype;ss.initClass(db,a,{get_eventHandlingAttributesForReact:function(){return this.$2$1},set_eventHandlingAttributesForReact:function(dv){this.$2$1=dv},updateEventHandleSpec:function(dv,dw){this.config=dw||{};this.config.domElem=dv;this.makeRecognizers(this.config);this.configureDomElem(dv);this.setupPressDrag()},$5:function(){var dv={};var dw=ss.mkdel(this,function(dA){this.handler(dA.nativeEvent)});var dx=ss.getEnumerator(Object.keys(this.handledEvents));try{while(dx.moveNext()){var dy=dx.current();var dz=db.$0(dy);if(ss.isValue(dz)){dv[dz]=dw}else{}}}finally{dx.dispose()}return dv}},da,[ss.IDisposable]);ss.initClass(df,a,{add_toggled:function(dv){this.$2$1=ss.delegateCombine(this.$2$1,dv)},remove_toggled:function(dv){this.$2$1=ss.delegateRemove(this.$2$1,dv)},get_toggleValue:function(){return this.$0},set_toggleValue:function(dv){if(dv!==this.get_toggleValue()){this.raiseToggled()}this.$0=dv},get_data:function(){return this.$2$2},set_data:function(dv){this.$2$2=dv},raiseToggled:function(){if(!ss.staticEquals(this.$2$1,null)){this.$2$1()}}},n,[ss.IDisposable,bP]);ss.initEnum(dg,a,{left:0,center:1,right:2});ss.initEnum(dh,a,{left:0,right:1});ss.initEnum(di,a,{blockAndAutoHide:0,doNotBlockAndAutoHide:1,doNotBlockAndStayOpen:2});ss.initClass(dj,a,{});ss.initClass(dk,a,{},dc,[ss.IDisposable]);ss.initEnum(dl,a,{standard:0,minimalist:1});ss.initClass(dm,a,{get_uberPopupShadowHeight:null,get_uberPopupMinimalistShadowHeight:function(){return 0},get_width:function(){return this.get_element().outerWidth(false)},get_height:function(){return this.get_element().outerHeight(false)},dispose:function(){if(ss.isValue(this.contentView)){this.contentView.dispose()}this.popupViewModel.remove_shown(ss.mkdel(this,this.shown));this.popupViewModel.remove_hidden(ss.mkdel(this,this.hidden));this.disposeGlass();this.$b();ss.makeGenericType(m,[dn]).prototype.dispose.call(this)},updateMode:function(){if(!this.visible){return}switch(this.popupViewModel.get_mode()){case 0:{this.$b();this.showGlass();break}case 1:{this.hideGlass();this.$7();break}case 2:{this.$b();this.hideGlass();break}}},onViewModelPropertyChanged:function(dv,dw){if(dw.get_propertyName()==='mode'){this.updateMode()}else if(dw.get_propertyName()==='size'){this.positionPopup()}else{this.updateContent()}},shown:function(){this.updateContent();this.visible=true;this.updateMode();if(this.get_viewModel().options.theme===1){this.get_element().addClass('tabUberPopupMinimal')}this.get_element().appendTo('body');this.get_element().hide();if(ss.isInstanceOfType(this.contentView,du)){this.contentView.onAddedToDom()}if(ss.isValue(this.get_viewModel().options.additionalClassNames)){this.get_viewModel().options.additionalClassNames.forEach(ss.mkdel(this,function(dv){this.get_element().addClass(dv)}))}this.positionPopup();this.get_element().show()},hidden:function(){this.visible=false;this.hideGlass();this.get_element().hide();this.get_element().detach()},showGlass:function(){if(ss.isNullOrUndefined(this.glass)){this.glass=new bg;this.glass.set_zIndex(987);this.glass.add_click(ss.mkdel(this,this.glassClicked))}this.glass.show()},hideGlass:function(){if(ss.isValue(this.glass)){this.glass.hide()}},disposeGlass:function(){if(ss.isValue(this.glass)){this.glass.remove_click(ss.mkdel(this,this.glassClicked));this.glass.dispose();this.glass=null}},glassClicked:function(){this.get_element().fadeOut(50,ss.mkdel(this,function(){this.popupViewModel.hide(true)}))},$7:function(){bh.add_firstTouch(ss.mkdel(this,this.$8))},$b:function(){bh.remove_firstTouch(ss.mkdel(this,this.$8))},$8:function(dv,dw){if(this.get_template().get_domRoot().get(0).contains(dv.target)){return}this.popupViewModel.hide(false)},positionPopup:function(){this.positionPopupHorizontally();if(this.popupViewModel.options.isToolbarFlyout){this.$a()}else{cV.getViewport(ss.mkdel(this,function(dv){this.positionPopupVertically(dv)}))}},positionPopupHorizontally:function(){var dv=this.get_viewModel().options;var dw=this.get_viewModel().relativeElement;var dx=dv.popupWidth;if(ss.isNullOrUndefined(dx)){dx=this.get_width()}var dy=dx;var dz=tab.DomUtil.getElementOffset(dw,false).left;if(dv.horizontalAlign===1){dz+=dw.outerWidth(false)/2;dz-=dy/2}else if(dv.horizontalAlign===2){dz+=dw.outerWidth(false);dz-=dy}var dA=dz+dy-$(document).width();if(dA>0){dz-=dA}if(dv.horizontalAttach===0){this.get_element().css('right','');this.get_element().css('left',Math.max(dz,0)+'px')}else{var dB=$('body').outerWidth(true);var dC=dB-(dz+dy);dC-=Math.max(0,dC+dy-dB);if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){dC=Math.max(0,dC)}this.get_element().css('left','');this.get_element().css('right',dC+'px')}if(ss.isValue(dv.popupWidth)){this.get_element().css('width',ss.unbox(dv.popupWidth)+'px')}},$a:function(){var dv=this.get_viewModel().options;var dw=this.get_viewModel().relativeElement;var dx=$('body');var dy=tab.DomUtil.getElementOffset(dw,false).top;if(dv.preferUp){dy+=1;var dz=dx.outerHeight(true);this.get_element().css('top','');this.get_element().css('bottom',ss.Int32.trunc(dz-dy)+'px')}else{dy-=1;this.get_element().css('bottom','');this.get_element().css('top',ss.Int32.trunc(dy+dw.outerHeight(false))+'px')}},positionPopupVertically:function(dv){var dw=this.get_viewModel().options;var dx=this.get_viewModel().relativeElement;var dy=tab.PointUtil.fromPosition(dx.offset());var dz=dv.getVisibleRoom(dy);var dA=dx.innerHeight();var dB=((dw.theme===1)?this.get_uberPopupMinimalistShadowHeight():this.get_uberPopupShadowHeight());if(dw.limitPopupHeight){var dC=Math.max(dz.roomAbove-dB,dz.roomBelow-dA-dB);this.get_element().css('max-height',dC+'px')}var dD=ss.Int32.trunc(this.get_height());var dE=dz.roomBelow>=dD+dA+dB;var dF=dz.roomAbove>dD+dB;var dG=dy.y+dA;var dH=dy.y-dD;var dI;if(dw.preferUp&&dF){dI=dH}else if(dE){dI=dG}else if(dF){dI=dH}else if(dz.roomBelow>=dz.roomAbove){dI=dy.y-(dD-dz.roomBelow+dB)}else{dI=dy.y-dz.roomAbove+dB}if(this.$9()){dI-=$(window).scrollTop()}this.get_element().css('top',dI+'px')},$9:function(){return tab.BrowserSupport.get_isChrome()&&window.innerHeight/window.outerHeight<0.9},updateContent:function(){var dv=this.get_template().content;var dw=dv.width();var dx=dv.height();if(ss.isValue(this.contentView)){this.contentView.dispose()}dv.children().detach();this.contentView=cu.newView$1(ss.makeGenericType(bO,[bP])).call(null,this.popupViewModel.get_content().get_viewType(),[this.popupViewModel.get_content().get_viewModel()]);dv.append(this.contentView.get_rootElement());if(dw!==dv.width()||dx!==dv.height()){this.positionPopup()}if(this.visible&&ss.isInstanceOfType(this.contentView,du)){this.contentView.onAddedToDom()}}},ss.makeGenericType(m,[dn]),[bq,ss.IDisposable,ss.makeGenericType(bO,[dn])]);ss.initClass(dn,a,{add_shown:function(dv){this.$2$1=ss.delegateCombine(this.$2$1,dv)},remove_shown:function(dv){this.$2$1=ss.delegateRemove(this.$2$1,dv)},add_hidden:function(dv){this.$2$2=ss.delegateCombine(this.$2$2,dv)},remove_hidden:function(dv){this.$2$2=ss.delegateRemove(this.$2$2,dv)},add_commit:function(dv){this.$2$3=ss.delegateCombine(this.$2$3,dv)},remove_commit:function(dv){this.$2$3=ss.delegateRemove(this.$2$3,dv)},get_mode:function(){return this.options.popupMode},set_mode:function(dv){if(this.options.popupMode===dv){return}this.options.popupMode=dv;this.notifyPropertyChanged('mode')},get_content:function(){return this.$0},set_content:function(dv){this.$0=dv;if(ss.isValue(this.$0)){this.$0.updateUberPopupViewModel(this)}this.notifyPropertyChanged('content')},set_disposeOnHide:function(dv){this.remove_hidden(ss.mkdel(this,this.dispose));if(dv){this.add_hidden(ss.mkdel(this,this.dispose))}},updatePosition:function(){this.notifyPropertyChanged('size')},show:function(){if(ss.isNullOrUndefined(this.$2$1)){return}this.$2$1()},hide:function(dv){if(dv&&ss.isValue(this.$2$3)){this.$2$3()}this.raiseActionEvent(this.$2$2)},addDisposables:function(dv){this.disposables.add$1(dv)}},n,[ss.IDisposable,bP]);ss.initClass(dp,a,{});ss.initClass(dq,a,{},ck);ss.initClass(dr,a,{},ck);ss.initClass(ds,a,{render:function(){var dv=React.DOM.input({type:'text',value:this.state.displayValue,onChange:ss.mkdel(this,this.$8),onBlur:ss.mkdel(this,this.$0),disabled:this.props.disabled,maxLength:this.props.maxLength,tabIndex:this.props.tabIndex,onKeyDown:ss.mkdel(this,this.$5),onKeyUp:ss.mkdel(this,this.$6)});var dw=React.DOM.div;var dx={};dx.tap=ss.mkdel(this,function(dC){this.$7()});var dy=bb.div(dx,{className:'tab-unification-spinner-btn'},[React.DOM.span({className:'tab-img-triangle-up'})]);var dz={};dz.tap=ss.mkdel(this,function(dC){this.$2()});var dA=dw({className:'tab-unification-spinner-btn-group tab-unification-spinner-btn-group-vertical'},dy,bb.div(dz,{className:'tab-unification-spinner-btn'},[React.DOM.span({className:'tab-img-triangle-down'})]));var dB=React.DOM.div({className:'tab-unification-spinner-ctrl'+(this.props.disabled?' disabled':'')},dv,dA);if(ss.isValue(this.props.label)){dB=React.DOM.div(null,React.DOM.span({className:'tab-unification-spinner-label'+(this.props.disabled?' disabled':'')},this.props.label),dB)}dB=React.DOM.div({className:ss.coalesce(this.props.styleClass,'tab-outline-spinner')},dB);if(ss.isValue(this.props.extraCssClass)){dB=React.DOM.div({className:this.props.extraCssClass},dB)}return dB},componentWillReceiveProps:function(dv){this.setState(ds.$0(dv.initialValue))},componentWillUnmount:function(){this.$1()},$8:function(dv){this.$1();var dw=dv.target;this.setState({value:this.state.value,pendingValue:this.state.pendingValue,displayValue:dw.value})},$0:function(dv){this.$1();var dw={};if(!ss.Int32.tryParse(this.state.displayValue,dw)){dw.$=this.state.value}this.$a(dw.$)},$5:function(dv){switch(dv.keyCode){case 38:{this.$1();this.$9(this.state.pendingValue+this.props.stepSize);break}case 40:{this.$1();this.$9(this.state.pendingValue-this.props.stepSize);break}case 13:{this.$0(null);break}}},$6:function(dv){switch(dv.keyCode){case 38:case 40:{this.$3(this.state.pendingValue);break}}},$7:function(){if(this.props.disabled){return}this.$3(this.state.pendingValue+this.props.stepSize)},$2:function(){if(this.props.disabled){return}this.$3(this.state.pendingValue-this.props.stepSize)},$3:function(dv){this.$1();if(this.props.actionDelay===0){this.$a(dv)}else{this.$9(dv);this.$b=window.setTimeout(ss.mkdel(this,function(){this.$a(this.state.pendingValue)}),this.props.actionDelay)}},$1:function(){if(ss.isValue(this.$b)){window.clearTimeout(ss.unbox(this.$b));this.$b=null}},$a:function(dv){dv=this.$4(dv);var dw=dv!==this.state.value;this.setState(ds.$0(dv));if(dw&&!ss.staticEquals(null,this.props.onValueChanged)){this.props.onValueChanged(dv)}},$4:function(dv){if(ss.isValue(this.props.minValue)){dv=Math.max(dv,ss.unbox(this.props.minValue))}if(ss.isValue(this.props.maxValue)){dv=Math.min(dv,ss.unbox(this.props.maxValue))}return dv},$9:function(dv){dv=this.$4(dv);this.setState({value:this.state.value,pendingValue:dv,displayValue:dv.toString()})}},React.Component);ss.initClass(dt,a,{});ss.setMetadata(bO,{variance:[1]});(function(){cL.$1=null;cL.$1={};cL.$1[0]=b})();(function(){d.$0="\n<div class='tabMenuItem'>\n  <div class='tabMenuItemNameArea'>\n    <span class='tabMenuItemName'/>\n  </div>\n</div>"})();(function(){f.$0="<div class='tab-editable-text-view'><div><div class='view-mode'><span/></div><input class='edit-mode' type='text'/></div></div>"})();(function(){g.$0="<div class='tabTextInputView'><input class='tabTextInputViewInputElement' type='text'/></div>"})();(function(){i.$0="<span class='tabTabLabel' />"})();(function(){h.$0="<div><div class='tabTabLabels'/><div class='tabTabContentArea'/></div>"})();(function(){du.$2='widgetInstance';du.$1='tab-widget';du.$0='.tab-disableSelection';du.$3=0;if(tab.FeatureParamsLookup.getBool(33)===true){$(document.head).append('<style type="text/css">.tab-DesignTint { background-color: #F1F1FC; }</style>')}})();(function(){cn.$2=null;cn.$3=null;cn.$1=false})();(function(){cm.$8=null})();(function(){ct.$0=0})();(function(){v.$2=25;v.$3=null;v.$1$1=null})();(function(){bn.hoverTime=150;bn.fastHoverTime=120})();(function(){R.$0=390;R.$1=500;R.$2=750})();(function(){bf.defaultSlop=5;bf.$1='tab-'})();(function(){bg.$1="<div class='tab-glass clear-glass'></div>";bg.$0='clear-glass';bg.$2='opaque-glass'})();(function(){da.$4='none'})();(function(){V.$c='tabDragSource';V.$e='.tabDragSource';V.$d='tabDragSource';V.$f='tabDropTarget';V.$h='.tabDropTarget';V.$g='tabDropTarget';V.$j=null;V.$k=null;V.$l=null;V.$q=null;V.$s=null;V.$r=0;V.$i=null;V.$p=null;V.$m=null;V.$n=null;V.$t=[];V.$o=null;V.$1$1=null;V.$1$2=null;V.$1$3=null;V.$1$4=null;V.$p={};V.$p.dragStart=V.dragStart;V.$p.dragMove=V.dragMove;V.$p.dragEnd=V.dragEnd;V.$p.pressEnd=V.dragEnd;V.$p.firstTouch=V.firstTouch})();(function(){be.$0=0})();(function(){db.$1=null})();(function(){de.defaultSelectedClassName='selected';de.selectedProperty='selected';de.toggleClassProperty='selectedClass';de.$1=0})();(function(){bS.$2="<span class='tab-checkbox'><input type='checkbox'></input><span class='label hide'></span></span>";bS.$4="<span class='tab-radio'><input type='radio'></input><span class='label hide'></span></span>";bS.$5="<span class='tab-icon-toggle'><span class='icon'></span><span class='label hide'></span></span>";bS.$3="<span class='innerIcon'></span>";bS.$6='.label';bS.$1='hide';bS.$7='tab-unification-check';bS.$8='tab-img-check';bS.$9='tab-unification-radio'})();(function(){dd.textPropertyName='text'})();(function(){u.$0="<div class='tabTextInputView'><span class='tabClearableTextBoxClearButton'/><div class='tabTextInputViewInputElementContainer'><input class='tabTextInputViewInputElement' type='text'/></div></div>"})();(function(){w.$1=10;w.$0=300;w.$2=0})();(function(){cd.$0=0})();(function(){C.$0="<span class='tabComboBox tab-ctrl-formatted-widget tab-ctrl-formatted-darker-border-hover'>\n    <span class='tabComboBoxIcon'/>\n    <div class='tabComboBoxNameContainer tab-ctrl-formatted-fixedsize'><span class='tabComboBoxName'/></div>\n    <div class='tabComboBoxButtonHolder'><span class='tabComboBoxButton'/></div>\n</span>"})();(function(){cu.$2=null})();(function(){cV.getSpiffBrowserViewportFunc=null})();(function(){ch.htmlTemplate="<div class='tabMenu' tabindex='1'><div class='tabMenuContent'/></div>"})();(function(){cf.$0="<div class='tabMenuItemDivider'/>"})();(function(){cg.$0="\n<div class='tabMenuItemTextInputPanel'>\n  <div class='tabMenuItemTextInputHolder'>\n    <input class='tabMenuItemTextInput' type='text'>\n  </div>\n</div>"})();(function(){ci.classMenuItem='tabMenuMenuItem';ci.keyMenuItem='tabMenuMenuItem';ci.$4=6;ci.menuFadeDurationMS=50;ci.$3='tabMenuMenuItemLevel';ci.$1='tabMenuHasIconTwo';ci.$0=989;ci.$2=1000;ci.$5=20})();(function(){E.noIconClass='tabComboBoxNoIcon';E.iconPressedClass='tabComboBoxNoIconPressed';E.pressedClass='pressed';E.disabledClass='disabled';E.classesForTheme=ss.mkdict([0,'tabComboStdTheme',1,'tabComboCompactTheme',2,'tabComboStdTheme tabUnification',3,'tabComboStdTheme tab-unification-line-arrow-dropdown'])})();(function(){bW.listItemHighlightedClassName='tab-list-item-highlighted'})();(function(){ca.collectionProperty='collection';ca.enabledProperty='enabled'})();(function(){cb.$0="<div class='tab-list'><div class='tab-list-itemHolder'></div></div>"})();(function(){cu.registerType(cx,cx).call(null)})();(function(){bh.$6=[];bh.$1$1=null;bh.$1$2=null;bh.$1$3=null;bh.$1$4=null;bh.$1$5=null;bh.$1$6=null;bh.$6.push(dojo.subscribe('globalFirstTouch'.toString(),bh.$1));bh.$6.push(dojo.subscribe('globalPress'.toString(),bh.$4));bh.$6.push(dojo.subscribe('globalPotentialTap'.toString(),bh.$3));bh.$6.push(dojo.subscribe('globalLastTouch'.toString(),bh.$2));bh.$6.push(dojo.subscribe('globalRightClick'.toString(),bh.$5));bh.$6.push(dojo.subscribe('globalDragEnd'.toString(),bh.$0))})();(function(){dm.minimalistThemeClass='tabUberPopupMinimal';dm.glassZIndex=987})();(function(){dn.modeProperty='mode';dn.sizeProperty='size'})();(function(){G.listClassName='tabCompositeSearchWidgetList'})();(function(){bR.$1="<a href='#' class='tab-link-button'><span class='label hide'></span></a>";bR.$0="<button class='tab-button' type='button'><span class='icon'></span><span class='label hide'></span></button>";bR.$2="<span class='tab-text-button'><span class='label hide'></span></span>";bR.$3='.label'})();(function(){I.$0="<div class='tabCompositeSearchWidget'><div>"})();(function(){K.noOp=new K('cursors/dragnop-black.png','auto');K.delete$1=new K('cursors/dragdel-black.png','auto');K.copy=new K('cursors/dragcopy-black.png','auto');K.move=new K('cursors/dragmove-black.png','auto')})();(function(){L.$0="<div class='tabCustomScroller'>\n            <div class='tabScrollerContentWindow'><span class='tabScrollerContent'/></div>\n            <div class='tabVerticalScrollbar'><div class='tabScrollbarIndicator'/></div>\n            <div class='tabHorizontalScrollbar'><div class='tabScrollbarIndicator'/></div>\n        </div>"})();(function(){cs.$0="<div class='tabScroller'><span class='tabScrollerContent'/></div>"})();(function(){O.$0="<div class='tabScroller'><span class='tabScrollerContent'/></div>"})();(function(){P.$1=1;P.$0=9})();(function(){cr.$0=18})();(function(){M.$1=8})();(function(){cv.$8=2500;cv.$9=150;cv.$e=null;cv.$f=null;cv.$a=0;cv.$b=0;cv.$d=null;cv.$c=null;cv.$1$1=null;cv.init()})();(function(){Q.positionProperty='position';Q.$1='.tab-dialogCloseButton';Q.$0='.tab-dialogBodyContainer';Q.$4='.tab-dialogTitleBar';Q.$5='.tab-dialogTitle';Q.$3='.tab-dialogResizer';Q.$2="\n<div class='tab-dialog'>\n  <div class='tab-dialogTitleBar'>\n    <span class='tab-dialogTitle' />\n    <div class='tab-dialogCloseButton'></div>\n  </div>\n  <div class='tab-dialogBodyContainer'></div>\n  <div class='tab-dialogResizer tab-icon-cv-resize-se'><div class='tab-dialogResizerHit'/></div>\n</div>\n";Q.$6=null;Q.defaultDraggableDialogConfigurer=null;Q.defaultStationaryDialogConfigurer=null;Q.defaultDraggableDialogConfigurer=function(dv){var dw=new cp(dv.$o,dv.$f);dw.set_documentBodySize('useClientSize');return dw};Q.defaultStationaryDialogConfigurer=function(){return null}})();(function(){Z.$0='focusable'})();(function(){ba.$0='editing';ba.$1='hover'})();(function(){bX.selectedProperty='selected';bX.draggableProperty='draggable';bX.highlightedProperty='highlighted'})();(function(){bZ.$0=10})();(function(){cP.allKey='__ALL__'})();(function(){cB.$0="<div class='tabRangeSlider'><div class='tabMinValueTextArea' /><div class='tabMaxValueTextArea' /><div class='tabRangeBarArea'><div class='tabRangeBar'><div class='tabMinValuePointer' /><div class='tabMaxValuePointer' /></div></div></div>"})();(function(){cD.currentMinValueTextPropertyName='CurrentMinValueText';cD.currentMaxValueTextPropertyName='CurrentMaxValueText';cD.minValuePointerPositionPropertyName='MinValuePointerPosition';cD.maxValuePointerPositionPropertyName='MaxValuePointerPosition'})();(function(){cu.registerType(cC,cC).call(null)})();(function(){cN.$0='SearchFieldComponentInput'})();(function(){cX.$1="<span class='tabTextIconButton'><span class='icon'/><span class='label hide'/></span>"})();(function(){dk.$0="<div class='tabUberPopup'><div class='tabUberPopupContent'/></div>"})();(function(){dp.designTint='tab-DesignTint';dp.text='tab-Text';dp.button='tab-UnifiedButton';dp.searchField='tab-UnifiedSearchField';dp.searchClearButton='tab-SearchClearButton';dp.positioningContainer='tab-PositioningContainer';dp.searchInput='tab-SearchInput';dp.selectableButtonGroup='tab-SelectableButtonGroup';dp.selectionStart='tab-SelectionStart';dp.selectionEnd='tab-SelectionEnd';dp.selectionMark='tab-SelectionMark';dp.vScrollable='tab-vScrollable';dp.applyCancelPanel='tab-ApplyCancelPanel';dp.ghostText='tab-GhostText';dp.icon='tab-Icon';dp.iconButton='tab-IconBtn';dp.qfTitleBarButton='tab-NewQFTitleBarBtn';dp.darkBackground='tab-darkBackground';dp.active='active';dp.focused='focused';dp.bordered='bordered';dp.disabled='disabled';dp.selectable='selectable';dp.selected='selected';dp.unselected='unselected';dp.excluded='excluded';dp.applyCancel='apply-cancel';dp.apply$1='apply';dp.cancel='cancel'})()})();;
/*! BEGIN UI */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlui');var b=function(){};b.__typeName='tab.$0';b.$0=function(e,L,hy){var hz=e.zmP[L].PoP;var hA=e.TTN;var hB=[];for(var hC=0;hC<e.dhm.rbg.length;hC++){var hD=e.dhm.rbg[hC];if(ss.referenceEquals(hD.UyO,hA)){continue}if(!ss.isNullOrEmptyString(hy)&&!ss.referenceEquals(hD.UyO,hy)){continue}var hE=[];for(var hF=0;hF<hD.Dfq.length;hF++){var hG=hD.Dfq[hF];if(ss.isValue(hG._HL)){continue}if(hG.VzB==='fhq'){continue}var hH=hG;if(ss.isValue(hH.MWY)){for(var hI=0;hI<hH.MWY.length;hI++){var hJ=hH.MWY[hI];var hK=I.newField(hJ.dMo,c.$2(hJ.YIQ),c.$1(hJ.Ymv1));hE.push(hK)}}else{var hL=I.newField(hG.dMo,c.$2(hG.tgs),c.$1(hG.fuT));hE.push(hL)}}var hM=ss.referenceEquals(hD.UyO,hz);var hN=I.newDataSource(hD.UyO,Array.prototype.slice.call(hE),hM);hB.push(hN)}var hO=I.newDataSourcesForWorksheet(L,Array.prototype.slice.call(hB));return hO};var c=function(){};c.__typeName='tab.$1';c.$0=function(e){switch(e){case'boolean':{return'bool'}case'date':case'datetime':{return'date'}case'integer':case'real':case'tuple':{return'number'}case'cstring':{return'string'}case'unknown':default:{return'string'}}};c.$1=function(e){switch(e){case'attr':{return'ATTR'}case'average':{return'AVG'}case'count':{return'COUNT'}case'count-d':{return'COUNTD'}case'day':{return'DAY'}case'end':{return'END'}case'hour':{return'HOUR'}case'in-out':{return'INOUT'}case'kurtosis':{return'KURTOSIS'}case'max':{return'MAX'}case'mdy':{return'MDY'}case'median':{return'MEDIAN'}case'min':{return'MIN'}case'minute':{return'MINUTE'}case'month':{return'MONTH'}case'month-year':{return'MONTHYEAR'}case'none':{return'NONE'}case'percentile':{return'PERCENTILE'}case'qtr':{return'QTR'}case'quart1':{return'QUART1'}case'quart3':{return'QUART3'}case'second':{return'SECOND'}case'skewness':{return'SKEWNESS'}case'std-dev':{return'STDEV'}case'std-dev-p':{return'STDEVP'}case'sum':{return'SUM'}case'sum-xsqr':{return'SUM_XSQR'}case'trunc-day':{return'TRUNC_DAY'}case'trunc-hour':{return'TRUNC_HOUR'}case'trunc-month':{return'TRUNC_MONTH'}case'trunc-qtr':{return'TRUNC_QTR'}case'trunc-second':{return'TRUNC_SECOND'}case'trunc-week':{return'TRUNC_WEEK'}case'trunc-year':{return'TRUNC_YEAR'}case'user':{return'USER'}case'var':{return'VAR'}case'var-p':{return'VARP'}case'week':{return'WEEK'}case'weekday':{return'WEEKDAY'}case'year':{return'YEAR'}default:{throw new ss.Exception('Unknown AggType: '+e)}}};c.$2=function(e){switch(e){case'dimension':{return'dimension'}case'measure':{return'measure'}case'unknown':{return'unknown'}default:{throw new ss.Exception('Unknown FieldRole type: '+e)}}};c.$3=function(e){switch(e){case'any':{return'all'}case'list':{return'list'}case'range':{return'range'}default:{throw new ss.Exception('Unknown ParameterTypesDomainType: '+e)}}};c.$4=function(e){switch(e){case'year':{return'year'}case'day':{return'day'}case'hour':{return'hour'}case'minute':{return'minute'}case'month':{return'month'}case'quarter':{return'quarter'}case'second':{return'second'}case'week':{return'week'}default:{throw new ss.Exception('Unknown DatePeriodType: '+e)}}};c.$5=function(e){switch(e){case'curr':{return'curr'}case'last':{return'last'}case'lastn':{return'lastn'}case'next':{return'next'}case'nextn':{return'nextn'}case'todate':{return'todate'}case'invalid':default:{throw new ss.Exception('Unknown or invalid Filters.RelativeDateRangeType: '+e)}}};c.$6=function(e){switch(e){case'color':case'shape':case'size':{return'legend'}case'map':{return'legend'}case'filter':{return'quickFilter'}case'viz':{return'worksheet'}case'paramctrl':{return'parameterControl'}case'empty':{return'blank'}case'title':{return'title'}case'text':{return'text'}case'bitmap':{return'image'}case'web':{return'webPage'}case'layout-basic':case'layout-flow':case'layout-free-form':{return null}default:{return'blank'}}};var d=function(){this.$4=0;this.$5=0;this.$3=null;this.$1$1=null};d.__typeName='tab.$10';var f=function(e,L){this.$1=null;this.$3=null;this.$2=0;this.$1=e;this.$3=L};f.__typeName='tab.$11';var g=function(){this.$b=null;this.$a=null;this.$e=null;this.$i=null;this.$d=null;this.$g=null;this.$h=null;this.$c=null;this.$f=null;spiff.Template.call(this,$("\n<div class='tabDataConnVarEditControl'>\n    <span class='tabDataConnVarEditCtrlVarArea'>\n        <div class='tabDataConnVarEditCtrlName'/>\n        <div class='tabDataConnVarEditCtrlDesc'/>\n    </span>\n    <span class='tabDataConnVarEditCtrlOpSelector'/>\n    <input class='tabDataConnVarEditCtrlValInput' type='text'/>\n    <span class='tabDataConnVarEditCtrlValSelector'>\n        <div class='tabDataConnVarEditCtrlFirstValSelector'>\n            <span class='tabDataConnVarEditCtrlFromLabel'/>\n        </div>\n        <div class='tabDataConnVarEditCtrlSecondValSelector'>\n            <span class='tabDataConnVarEditCtrlToLabel'/>\n        </div>\n    </span>\n</div>"));this.$b=this.getElementBySelector('.tabDataConnVarEditCtrlName');this.$a=this.getElementBySelector('.tabDataConnVarEditCtrlDesc');this.$e=this.getElementBySelector('.tabDataConnVarEditCtrlOpSelector');this.$i=this.getElementBySelector('.tabDataConnVarEditCtrlValInput');this.$d=this.getElementBySelector('.tabDataConnVarEditCtrlFromLabel');this.$g=this.getElementBySelector('.tabDataConnVarEditCtrlToLabel');this.$h=this.getElementBySelector('.tabDataConnVarEditCtrlValSelector');this.$c=this.getElementBySelector('.tabDataConnVarEditCtrlFirstValSelector');this.$f=this.getElementBySelector('.tabDataConnVarEditCtrlSecondValSelector')};g.__typeName='tab.$12';var h=function(){this.$2=null;this.$1=null;spiff.Template.call(this,$("\n<div class='tabPane'>\n    <div class='tabPaneTitle'/>\n    <div class='tabPaneBody'/>\n</div>"));this.$2=this.getElementBySelector('.tabPaneTitle');this.$1=this.getElementBySelector('.tabPaneBody')};h.__typeName='tab.$13';var i=function(){this.$1=null;spiff.Template.call(this,$("<div class='refLineConstantValueEditor'><span class='refLineConstantValueEditorTitle'></span><input class='refLineConstantValueEditorInput' type='text'/></div>"));this.$1=this.getElementBySelector('.refLineConstantValueEditorInput');this.getElementBySelector('.refLineConstantValueEditorTitle').text(tab.Strings.RefLineEditorInputTitle)};i.__typeName='tab.$14';var j=function(){this.$2=null;this.$1=null;spiff.Template.call(this,$("\n<div class='tabTabbedPane'>\n    <div class='tabTabLabels'/>\n    <div class='tabTabContentArea'/>\n</div>"));this.$2=this.getElementBySelector('.tabTabLabels');this.$1=this.getElementBySelector('.tabTabContentArea')};j.__typeName='tab.$15';var k=function(){this.$1=null;spiff.Template.call(this,$("<div class='tabMapsSearchContainer'><div class='tabMapsSearchView'><div class='tabMapsSearchView-searchControlsContainer'></div></div></div>"));this.$1=spiff.ObjectRegistry.newWidget(spiff.CompositeSearchWidget).call(null);var e=this.getElementBySelector('.tabMapsSearchView-searchControlsContainer');this.$1.get_textInputView().addToDom(e);this.$1.get_searchButton().addToDom(e);this.$1.get_clearButton().addToDom(e)};k.__typeName='tab.$16';var l=function(e){this.$8=null;this.$c=null;this.$9=false;this.$a=0;this.$b=null;this.$c=e;this.$9=false;this.$a=0};l.__typeName='tab.$17';var m=function(e,L,hy,hz,hA,hB){this.$T=null;this.$U=null;this.$S=null;en.call(this,e.canvasElt,e.renderContext);this.$U={};var hC=tab.ApplicationModel.get_instance().get_shapeManager().get_imageKeys();var hD=ss.getKeyCount(fx.shapeMapping)+hC.length;var hE=2;var hF=hz-4;var hG=hA-4;var hH=L-hF/2;var hI=hy-hG/2;var hJ=hz-1;var hK=hA-1;var hL=L-hJ/2;var hM=hy-hK/2;var hN=this.$Q(hD);var hO=this.$Q(hD);var hP=this.$Q(hD);var hQ=this.$Q(hD);var hR=this.$Q(hD);var hS=this.$Q(hD);for(var hT=0;hT<hD;hT++){var hU;if(hT<ss.getKeyCount(fx.shapeMapping)){hU=_.keys(fx.shapeMapping)[hT];hP.uBu[hT]=hF;hQ.uBu[hT]=hG;hR.uBu[hT]=hH;hS.uBu[hT]=hI}else{hU=hC[hT-ss.getKeyCount(fx.shapeMapping)];hP.uBu[hT]=hJ;hQ.uBu[hT]=hK;hR.uBu[hT]=hL;hS.uBu[hT]=hM}this.$U[hU]=hT;hO.uBu[hT]=hU;hN.uBu[hT]=hT.toString()}var hV={};hV.GKA={};hV.GKA['shape_id']=hO;hV.GKA['tuple_id']=hN;hV.GKA['size']=hP;hV.GKA['width']=hP;hV.GKA['height']=hQ;hV.GKA['left']=hR;hV.GKA['top']=hS;hV.LTd={};hV.LTd['color']=(new tab.ColorModel(0,0,0,1)).toArgbInt();hV.LTd['background_color']=hB.toArgbInt();hV.DTe={};hV.DTe['x']=L;hV.DTe['y']=hy;var hW={};hW.PeS={};hW.PeS.RAC=0;hW.PeS.thj=0;hW.PeS.rec=hz;hW.PeS.EUR=hA;var hX={};hX.QNi=0;hX.sDT=hD;var hY=new fy;this.$T=new fa.$ctor1('pdKey',hY,hW,hX,hV,null,'pdKey')};m.__typeName='tab.$18';var n=function(){spiff.Template.call(this,$("<div class='tabHorizontalSlider'>\n</div>'"))};n.__typeName='tab.$19';var o=function(){};o.__typeName='tab.$2';o.$0=function(e,L){var hy={};hy['api.commandResult']=e;hy['api.commandData']=L;var hz=J.toJsonHelper(hy);return hz};var p=function(e){this.$9=0;this.$b=-1;this.$a=null;this.$8=true;this.$1$1=null;this.$1$2=null;this.$9=e;this.$b=-1;this.$8=true};p.__typeName='tab.$20';var q=function(){this.$6=null;this.$7=null;this.$8=null;spiff.Template.call(this,$("<div><div class='tabLeafletMapHolder' /><div class='tabLeftBarnDoor' /><div class='tabRightBarnDoor' /></div>"));this.$6=this.getElementBySelector('.tabLeftBarnDoor');this.$7=this.getElementBySelector('.tabRightBarnDoor');this.$8=this.getElementBySelector('.tabLeafletMapHolder');var e=ss.mkdict(['position','absolute','top','0px','bottom','0px']);this.$6.css(e);this.$7.css(e);this.$6.css('left','0px');this.$7.css('right','0px');if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<=9){this.$6.css('z-index','10');this.$7.css('z-index','10')}};q.__typeName='tab.$21';var r=function(e,L,hy){this.$4=null;this.$2=null;this.$3=0;this.$4=e;this.$2=L;this.$3=hy};r.__typeName='tab.$22';var s=function(e,L,hy,hz,hA){this.$6=false;this.$a=0;this.$7=null;this.$8=null;this.$9=null;this.$a=e;this.$6=L;this.$7=hy;this.$8=hz;this.$9=hA};s.__typeName='tab.$23';var t=function(){this.$6=null;this.$5=0;this.$5=-1};t.__typeName='tab.$24';var u=function(){};u.__typeName='tab.$3';u.$a=function(e){var L=JSON.parse(e.toString());var hy=[];if(ss.isValue(L)){for(var hz=0;hz<L.length;hz++){var hA=L[hz];var hB=u.$5(hA);if(ss.isValue(hB)){hy.push(hB)}}}var hC=new Object;hC.filters=Array.prototype.slice.call(hy);return hC};u.$9=function(e){var L=u.$0(e);if(ss.isValue(L)){return L}return e};u.$e=function(e){var L=u.$0(e);if(ss.isValue(L)){return L}var hy=JSON.parse(e.toString());if(ss.isValue(hy)){return u.$5(hy)}return null};u.$0=function(e){var L=e;if(ss.keyExists(L,'BhX')){if(ss.isValue(L['oIc'])){return I.newCommandError('invalidFilterFieldName',L['oIc'])}else if(ss.isValue(L['cVZ'])){return I.newCommandError('invalidFilterFieldValue',L['cVZ'])}else if(ss.isValue(L['sRL'])){return I.newCommandError('invalidAggregationFieldName',L['OLk'])}else{return I.newCommandError('serverError',null)}}return null};u.$2=function(e){switch(e){case'C':{return'categorical'}case'H':{return'hierarchical'}case'Q':{return'quantitative'}case'RD':{return'relativedate'}default:{throw new ss.Exception('Unknown filter type: '+e)}}};u.$5=function(e){var L=u.$2(e.type);switch(L){case'categorical':{return u.$7(e)}case'relativedate':{return u.$d(e)}case'hierarchical':{return u.$b(e)}case'quantitative':{return u.$c(e)}default:{throw new ss.Exception('Unknown FilterType: '+L)}}};u.$6=function(e,L){var hy=e.fieldName;var hz=e.fieldCaption;var hA=u.$2(e.type);var hB=null;var hC=null;var hD=null;if(ss.isValue(e.fieldDetailsJson)&&ss.isValue(e.fieldDatasource)){hB=e.fieldDatasource;var hE=JSON.parse(e.fieldDetailsJson);var hF=hE['genFieldColumnPresModel'];hC=c.$2(hF.YIQ);hD=c.$1(hF.Ymv1)}return L(hy,hA,hz,hB,hC,hD)};u.$7=function(e){var L=e.exclude||false;var hy=null;if(ss.isValue(e.table)){var hz=e.table;if(ss.isValue(hz.tuples)){var hA=ss.coalesce(e.all,false)||ss.coalesce(e.allChecked,false);var hB=hz.tuples;var hC=[];for(var hD=0;hD<hB.length;hD++){var hE=hB[hD];if(hA||ss.isValue(hE.s)&&hE.s){var hF=hE.t[0];var hG=hE.d;hC.push(u.$4(e,hF,hG))}}hy=Array.prototype.slice.call(hC)}}var hH=function(hI,hJ,hK,hL,hM,hN){return I.newCategoricalFilter(hI,hJ,hK,hL,hM,hN,L,hy)};return u.$6(e,hH)};u.$c=function(e){var L=null;var hy=null;var hz=null;var hA=null;var hB=false;if(ss.isValue(e.range)){var hC=e.range;if(ss.isValue(hC.min)&&ss.isValue(hC.min.v)){L=u.$3(e,hC.min,null)}if(ss.isValue(hC.max)&&ss.isValue(hC.max.v)){hy=u.$3(e,hC.max,null)}}if(ss.isValue(e.table)){var hD=e.table;if(ss.isValue(hD.min)&&ss.isValue(hD.min.v)){hz=u.$3(e,hD.min,null)}if(ss.isValue(hD.max)&&ss.isValue(hD.max.v)){hA=u.$3(e,hD.max,null)}if(ss.isValue(hD.included)){var hE=hD.included;hB=hE==='include-all'||hE==='include-null'||hE==='include-range-or-null'}}var hF=function(hG,hH,hI,hJ,hK,hL){return I.newQuantitativeFilter(hG,hH,hI,hJ,hK,hL,L,hy,hz,hA,hB)};return u.$6(e,hF)};u.$d=function(e){var L=null;var hy=null;var hz=null;var hA=e.table;if(ss.isValue(hA)){if(ss.isValue(hA.periodType)){L=c.$4(hA.periodType)}if(ss.isValue(hA.rangeType)){hy=c.$5(hA.rangeType)}if(ss.isValue(hA.rangeN)){hz=hA.rangeN}}var hB=function(hC,hD,hE,hF,hG,hH){return I.newRelativeDateFilter(hC,hD,hE,hF,hG,hH,L,hy,hz)};return u.$6(e,hB)};u.$4=function(e,L,hy){return u.$3(e,L,hy)};u.$3=function(e,L,hy){var hz=new Object;if(ss.isNullOrUndefined(L)){return hz}var hA=u.$1(L.t);var hB=[L];if(ss.isValue(e.range)){hB.push(e.range.min,e.range.max)}if(ss.isValue(e.table)){hB.push(e.table.min,e.table.max)}var hC=dT.getDateTimeFormatMode(hB,'none',e.date_format);hz.type=c.$0(hA);var hD=((hA==='date'||hA==='datetime')?e.date_format:e.format);hz.formattedValue=tableau.format.formatDataValue(L,e.role,hD,null,hC);if(ss.isValue(hy)){hz.aliasedValue=hy}hz.value=B.serializeDataValue(L.v,hA);return hz};u.$1=function(e){switch(e){case'b':{return'boolean'}case'd':{return'date'}case'i':{return'integer'}case'r':{return'real'}case's':{return'cstring'}case't':{return'datetime'}case null:{return'unknown'}}return'unknown'};u.$b=function(e){var L=0;if(ss.isValue(e.levels)){L=e.levels.length}var hy=function(hz,hA,hB,hC,hD,hE){return I.newHierarchicalFilter(hz,hA,hB,hC,hD,hE,L)};return u.$6(e,hy)};u.$8=function(e,L,hy){for(var hz=0;hz<e.length;hz++){var hA=e[hz];if(ss.isValue(hA.table)){u.$f(hA.table,L,hy)}if(ss.isValue(hA.children)){u.$8(hA.children,L,hy)}}};u.$f=function(e,L,hy){if(ss.isValue(e.tuples)){u.$h(e.tuples,L,hy)}};u.$h=function(e,L,hy){for(var hz=0;hz<e.length;hz++){var hA=e[hz];if(hA.s){var hB=u.$g(hA);var hC=hB[hB.length-1];if(!ss.isValue(hy[hC])){hy[hC]=0;L.push(hC)}}}};u.$g=function(e){var L=null;if(ss.isValue(e.t)){L=[];var hy=e.t;for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];L.push(hA.v)}}return L};var v=function(){};v.__typeName='tab.$4';v.$8=function(e){var L=e;var hy=[];if(ss.isValue(L)){for(var hz=0;hz<L.length;hz++){var hA=L[hz];var hB=v.$1(hA);if(ss.isValue(hB)&&hB.isValidPresModel){hy.push(hB)}}}var hC=new Object;hC.parameters=Array.prototype.slice.call(hy);return hC};v.$6=function(e){var L=e;if(ss.isValue(L.GiX)&&!L.GiX){var hy=new Object;hy.isValidPresModel=false;return hy}else{var hz=e;if(ss.isValue(hz)){return v.$1(hz)}}return null};v.$0=function(e){switch(e){case'boolean':{return'boolean'}case'real':{return'float'}case'integer':case'tuple':{return'integer'}case'date':{return'date'}case'datetime':{return'datetime'}case'cstring':default:{return'string'}}};v.$1=function(e){if(!ss.isValue(e.DMC)||!ss.isValue(e.OLk)){return null}var L=e.tbM;var hy=[];for(var hz=0;hz<e.vdO.length;hz++){var hA=e.vdO[hz];var hB=e.wwu[hz];hy.push(v.$4(L,hA,hB))}var hC=new Object;hC.isValidPresModel=true;hC.parameterName=e.DMC;hC.name=e.OLk;hC.currentValue=v.$4(L,e.UIt,e.ybD);hC.dataType=v.$0(L);hC.allowableValuesType=c.$3(e.ReU);hC.allowableValues=Array.prototype.slice.call(hy);hC.stepSize=v.$7(L,e.FcN1);hC.minValue=v.$5(L,e.JLD,e.Qza,null);hC.maxValue=v.$5(L,e.zG$,e.Deq,null);if(L==='date'||L==='datetime'){hC.dateStepPeriod=c.$4(e.JAO)}return hC};v.$5=function(e,L,hy,hz){var hA=new Object;hA.type=c.$0(e);hA.value=B.serializeDataValue(L,e);if(!tab.MiscUtil.isNullOrEmpty(hz)){hA.aliasedValue=hz}if(!tab.MiscUtil.isNullOrEmpty(hy)){hA.formattedValue=hy}return hA};v.$4=function(e,L,hy){return v.$5(e,v.$3(L),hy,v.$2(L))};v.$7=function(e,L){if(ss.isValue(L)){if(e==='integer'||e==='date'||e==='datetime'){return parseInt(L)}if(e==='real'){return parseFloat(L)}}return null};v.$3=function(e){return e[0]};v.$2=function(e){if(e.length<2){return null}if(ss.isNullOrUndefined(e[1])||e[1].length===0){return null}return e[1]};var w=function(){};w.__typeName='tab.$5';var x=function(e,L,hy,hz,hA){this.$5=0;this.$6=0;this.$4=0;this.$2=false;this.$3=null;this.$5=e;this.$6=L;this.$4=hy;this.$2=hz;this.$3=hA};x.__typeName='tab.$6';var y=function(e){this.$2=null;this.$3=null;this.$5=null;this.$4=false;this.$5=e;this.$4=this.$5==='selected'||this.$5==='highlighted'||this.$5==='hover'};y.__typeName='tab.$7';var z=function(e){this.$1=0;this.$6=0;this.$5=null;this.$4=null;this.$3=null;this.$8=null;this.$7=null;this.$b=null;this.$a=0;this.$2=null;this.$9=null;this.$1=e.get_alpha();this.$4=e.get_lineJoin();this.$3=e.get_lineCap();this.$5=e.get_linePattern();this.$8=e.get_strokeStyle();this.$6=e.get_lineWidth();this.$a=e.get_textAngle();this.$2=e.get_font();this.$7=e.get_shapeFillStyle();this.$b=e.get_textFillStyle();this.$9=e.get_textAlign()};z.__typeName='tab.$8';var A=function(e,L,hy,hz,hA,hB,hC){this.$1=null;this.$5=0;this.$2=null;this.$6=null;this.$3=false;this.$4=false;this.$7=null;this.$1=e;this.$5=L;this.$2=hy;this.$6=hz;this.$3=hA;this.$4=hB;this.$7=hC.clone()};A.__typeName='tab.$9';var B=function(){};B.__typeName='tab._ApiSerializer';B.serializeClientInfo=function(e,L){var hy=e.get_applicationPresModel().res.mmK;var hz=e.get_toolbarCommands().$2();var hA=!ss.isNullOrEmptyString(hy.nhM.VrA)||e.get_toolbarCommands().$3();var hB=tsConfig.current_sheet_name;var hC=tsConfig.current_workbook_name;var hD=B.serializeDashboardZones(hy.HCq);var hE=B.serializePublishedSheets(e.get_applicationPresModel().res.jky);var hF=B.serializeStory(L);var hG=I.newClientInfo(hz,hA,hC,hB,ss.coalesce(tsConfig.clientNumber,''),hE,hD,hF);return hG};B.serializeSheetInfo=function(e,L){var hy;if(e.Jqz){hy='story'}else if(e.WeS){hy='dashboard'}else{hy='worksheet'}var hz=I.newSheetInfo(e.Gge,hy,e.EVq,e.pAn,e.PiK,e.McJ,L);return hz};B.serializePublishedSheets=function(e){var L={};for(var hy=0;hy<e.length;hy++){var hz=e[hy];L[hz.Gge]=hz}var hA=[];for(var hB=0;hB<tsConfig.visible_sheets.length;hB++){var hC=L[tsConfig.visible_sheets[hB]];var hD=B.$0(tsConfig.repository_urls[hB]);var hE=B.serializeSheetInfo(hC,hD);hA.push(hE)}return hA};B.serializeDashboardZones=function(e){var L=[];if(ss.isNullOrUndefined(e)||ss.getKeyCount(e)===0){return L}var hy=_.keys(e);hy.sort(function(hK,hL){return parseInt(hK,10)-parseInt(hL,10)});for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];var hB=e[hA];if(ss.isNullOrUndefined(hB)){continue}var hC=c.$6(hB.jAM);if(!ss.isValue(hC)){continue}var hD=(ss.isValue(hB.AVP)?hB.AVP:null);var hE=hB.thj;var hF=hB.RAC;var hG=hB.rec;var hH=hB.EUR;var hI=hB.BCp;var hJ=I.newDashboardZone(hD,hI,ss.unbox(hC),hH,hG,hE,hF);L.push(hJ)}return L};B.serializeStory=function(e){var L=e.get_flipboardNavigatorViewModel();if(ss.isNullOrUndefined(L)){return null}var hy=L.get_currentPointIndex();var hz=B.serializeStoryPoints(L.get_captions(),e);var hA=I.newStory(hy,hz);return hA};B.serializeStoryPoints=function(e,L){var hy=[];var hz=ss.getEnumerator(e);try{while(hz.moveNext()){var hA=hz.current();var hB=B.serializeStoryPoint(hA,L);hy.push(hB)}}finally{hz.dispose()}return hy};B.serializeStoryPoint=function(e,L){var hy=null;if(e.get_isCurrentPoint()&&L.get_hasContainedSheet()){var hz=L.get_containedSheetName();var hA=L.get_containedSheetType();var hB=B.serializeDashboardZones(L.get_containedDashboardZones());hy=I.newContainedSheetInfo(hz,hA,ss.unbox(L.get_containedSheetZoneId()),hB)}var hC=I.newStoryPoint(e.get_caption(),e.get_storyPointIndex(),e.get_storyPointId(),e.get_isCaptured(),hy);return hC};B.serializeDataValue=function(e,L){if(L==='boolean'){if(_.isBoolean(e)){return e}return(ss.isValue(e)?(e.toString().toLowerCase()==='true'):false)}if(ss.isNullOrUndefined(e)){return null}switch(L){case'boolean':{if(_.isBoolean(e)){return e}return(ss.isValue(e)?(e.toString().toLowerCase()==='true'):false)}case'date':case'datetime':{var hy=null;if(_.isDate(e)){hy=e}else if(_.isNumber(e)){if(isNaN(e)){hy=null}else{hy=new Date(tableau.types.JsDateFromOleDate(e))}}else{hy=tab.DateUtil.parsePresModelDate(e.toString())}if(ss.isNullOrUndefined(hy)||isNaN(hy)){return null}return hy.getTime()}case'integer':{if(_.isNumber(e)){return(isNaN(e)?null:e)}var hz=parseInt(e.toString(),10);return(isNaN(hz)?null:hz)}case'real':{if(_.isNumber(e)){return(isNaN(e)?null:e)}var hA=parseFloat(e.toString());return(isNaN(hA)?null:hA)}default:case'cstring':case'tuple':case'unknown':{return e.toString()}}};B.serializeCustomView=function(e,L){return I.newCustomView(e.id,e.name,e.urlId,L,e.startViewId,e.isPublic,B.serializeUser(e.owner))};B.serializeUser=function(e){return I.newUser(e.id,e.friendlyName,e.username)};B.convertToCustomizedView=function(e){var L=new Object;L.id=e.id;L.isPublic=e.isPublic;L.name=e.name;L.owner=B.convertToUser(e.owner);L.startViewId=e.startViewId;L.urlId=e.urlId;return L};B.convertToUser=function(e){var L=new tab.User;L.friendlyName=e.friendlyName;L.id=e.id;L.username=e.username;return L};B.$0=function(e){var L=tab.VizUriModel.createForViewingSheet(e);L.removeAllQueryParams();return L.get_absoluteUri()};global.tab._ApiSerializer=B;var C=function(e,L,hy){this.$3=null;this.$1=null;this.$2=null;this.$0=null;this.$3=e;this.$1=L;this.$2=null;this.$0=hy};C.__typeName='tab.AccordionItem';global.tab.AccordionItem=C;var D=function(e){this.title=null;this.content=null;this.icon=null;this.iconTwo=null;this.header=null;spiff.Template.call(this,e);this.title=this.getElementBySelector('.tabAccordionItemTitle');this.content=this.getElementBySelector('.tabAccordionItemContent');this.icon=this.getElementBySelector('.tabAccordionItemIcon');this.iconTwo=this.getElementBySelector('.tabAccordionItemIconTwo');this.header=this.getElementBySelector('.tabAccordionItemHeader')};D.__typeName='tab.AccordionItemTemplate';D.createDefault=function(){return new D($("<div class='tabAccordionItem'>\n        <div class='tabAccordionItemHeader'><span class='tabAccordionItemTitle'/><span class='tabAccordionItemIconTwo'/><div class='tabAccordionItemIcon'/></div>\n        <div class='tabAccordionItemContent'/>\n        </div>"))};global.tab.AccordionItemTemplate=D;var E=function(){this.itemsContainer=null;spiff.Template.call(this,$("<div class='tabAccordion'><div class='tabAccordionItems'/></div>"));this.itemsContainer=this.getElementBySelector('.tabAccordionItems')};E.__typeName='tab.AccordionTemplate';global.tab.AccordionTemplate=E;var F=function(e,L){this.$g=null;this.$f=null;this.$e=[];this.$d=[];ss.makeGenericType(spiff.BaseView$1,[G]).call(this,e,L);this.$g=e;this.$f=L;this.update()};F.__typeName='tab.AccordionView';global.tab.AccordionView=F;var G=function(){this.$4=[];this.$2=null;this.$3=false;spiff.BaseViewModel.call(this)};G.__typeName='tab.AccordionViewModel';global.tab.AccordionViewModel=G;var H=function(){this.action=null;ss.EventArgs.call(this)};H.__typeName='tab.ActionExecutedEventArgs';global.tab.ActionExecutedEventArgs=H;var I=function(){};I.__typeName='tab.ApiCrossDomainPresModelsFactory';I.newClientInfo=function(e,L,hy,hz,hA,hB,hC,hD){var hE=new Object;hE.isAutoUpdate=e;hE.isDownloadAllowed=L;hE.workbookName=hy;hE.instanceId=hA;hE.currentSheetName=hz;hE.publishedSheets=hB;hE.dashboardZones=hC;hE.story=hD;return hE};I.newAutoUpdateState=function(e){var L=new Object;L.isAutoUpdate=e;return L};I.newCommandError=function(e,L){var hy=new Object;hy.errorCode=e;hy.additionalInformation=L;return hy};I.newSheetInfo=function(e,L,hy,hz,hA,hB,hC){var hD=new Object;hD.maxHeight=hB;hD.maxWidth=hA;hD.minHeight=hz;hD.minWidth=hy;var hE=new Object;hE.name=e;hE.sizeConstraints=hD;hE.repositoryUrl=hC;hE.sheetType=L;return hE};I.newContainedSheetInfo=function(e,L,hy,hz){var hA=new Object;hA.name=e;hA.sheetType=L;hA.zoneId=hy;hA.dashboardZones=hz;return hA};I.newDashboardZone=function(e,L,hy,hz,hA,hB,hC){var hD=new Object;hD.name=e;hD.zoneId=L;hD.zoneType=hy;hD.height=hz;hD.width=hA;hD.x=hB;hD.y=hC;return hD};I.newStory=function(e,L){var hy=new Object;hy.activeStoryPointIndex=e;hy.storyPoints=L;return hy};I.newStoryPoint=function(e,L,hy,hz,hA){var hB=new Object;hB.caption=e;hB.index=L;hB.storyPointId=hy;hB.isUpdated=hz;hB.containedSheetInfo=hA;return hB};I.$0=function(e,L,hy,hz,hA,hB){var hC=new Object;hC.fieldName=e;hC.filterType=L;hC.caption=hy;hC.dataSourceName=hz;hC.fieldRole=hA;hC.fieldAggregation=hB;return hC};I.newCategoricalFilter=function(e,L,hy,hz,hA,hB,hC,hD){var hE=I.$0(e,L,hy,hz,hA,hB);hE.isExclude=hC;hE.appliedValues=hD;return hE};I.newQuantitativeFilter=function(e,L,hy,hz,hA,hB,hC,hD,hE,hF,hG){var hH=I.$0(e,L,hy,hz,hA,hB);hH.domainMinValue=hC;hH.domainMaxValue=hD;hH.minValue=hE;hH.maxValue=hF;hH.includeNullValues=hG;return hH};I.newHierarchicalFilter=function(e,L,hy,hz,hA,hB,hC){var hD=I.$0(e,L,hy,hz,hA,hB);hD.levels=hC;return hD};I.newRelativeDateFilter=function(e,L,hy,hz,hA,hB,hC,hD,hE){var hF=I.$0(e,L,hy,hz,hA,hB);hF.periodType=hC;hF.rangeType=hD;hF.rangeN=hE;return hF};I.newDataSourcesForWorksheet=function(e,L){var hy=new Object;hy.worksheetName=e;hy.dataSources=L;return hy};I.newDataSource=function(e,L,hy){var hz=new Object;hz.name=e;hz.fields=L;hz.isPrimary=hy;return hz};I.newField=function(e,L,hy){var hz=new Object;hz.name=e;hz.role=L;hz.aggregation=hy;return hz};I.newCustomViewsInfo=function(e,L,hy,hz){var hA=new Object;hA.customViewLoaded=e;hA.defaultCustomViewId=L;hA.currentView=hy;hA.customViews=hz;return hA};I.newCustomView=function(e,L,hy,hz,hA,hB,hC){var hD=new Object;hD.id=e;hD.name=L;hD.urlId=hy;hD.url=hz;hD.startViewId=hA;hD.isPublic=hB;hD.owner=hC;return hD};I.newUser=function(e,L,hy){var hz=new Object;hz.id=e;hz.friendlyName=L;hz.username=hy;return hz};global.tab.ApiCrossDomainPresModelsFactory=I;var J=function(e,L,hy){this.$J=new tab.DisposableHolder;this.$H=null;this.$L=null;this.$M=null;this.$G=null;this.$I=false;this.$K=false;this.$N=null;this.$G=hy;this.updateClients(e,L);dojo.subscribe('tabChangeCompleted',ss.mkdel(this,this.handleNewLayout));tab.StartupUtils.add_clientFullyLoaded(ss.mkdel(this,this.onClientFullyLoaded));tab.CommandController.get().add_commandQueueComplete(ss.mkdel(this,this.onCommandComplete))};J.__typeName='tab.ApiEventHandler';J.toJsonHelper=function(e){return(J.$3?JSON.stringify(e):tab.JsonUtil.toJson(e))};J.fromJsonHelper=function(e){return(J.$3?JSON.parse(e):tab.JsonUtil.parseJson(e))};J.$0=function(e){var L=new ss.StringBuilder;for(var hy=0;hy<e.length;hy++){var hz=e[hy];if(!(L.length===0)){L.append('.')}L.append('['+hz+']')}return L.toString()};J.$1=function(){var e={};var L=tab.ModelUtils.findContentDashboard();var hy=L.get_zoneModels();for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];if(hA.get_zoneType()==='filter'&&ss.referenceEquals(hA.get_worksheetName(),tsConfig.current_sheet_name)){var hB=J.fromJsonHelper(hA.pm.dCB);e[hB.param]=true}}var hC={};var hD=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);if(ss.isValue(hD)){var hE=hD.get_filters();for(var hF=0;hF<hE.length;hF++){var hG=hE[hF];var hH=J.$0(hG.get_filterPresModel().name);if(ss.keyExists(e,hH)){var hI=hG.get_filterPresModel().fieldCaption;if(hG.get_filterPresModel().type!=='H'){hC[hI]=hG.get_filterPresModel().type}else{hI='';var hJ=hG.get_filterPresModel().table[0].table;if(ss.isValue(hJ)&&ss.isValue(hJ.schema)&&ss.isValue(hJ.schema[0])&&ss.isValue(hJ.schema[0].name)){var hK=hJ.schema[0].name;for(var hL=1;hL<hK.length;hL++){hI+='['+hK[hL]+']';hC[hI]=hG.get_filterPresModel().type;hI+='.'}}}}}}return hC};J.$2=function(e){var L=e;if(ss.isValue(L['eck'])){return I.newCommandError('invalidSelectionFieldName',L['eck'])}else if(ss.isValue(L['cVZ'])){return I.newCommandError('invalidSelectionValue',L['cVZ'])}else if(ss.isValue(L['ifc'])){return I.newCommandError('invalidSelectionDate',L['ifc'])}return null};global.tab.ApiEventHandler=J;var K=function(e,L){this.$7=null;this.$a=null;this.$8=new tab.DisposableHolder;this.$9=false;tab.Param.verifyValue(e,'client');tab.Param.verifyValue(L,'responder');this.$7=e;this.$a=L;var hy=ss.mkdel(this,function(){var hz=e.get_flipboardNavigatorViewModel();if(ss.isValue(hz)){hz.add_remoteUpdateComplete(ss.mkdel(this,this.$4));this.$8.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){hz.remove_remoteUpdateComplete(ss.mkdel(this,this.$4))})))}return ss.isValue(hz)});if(!hy()){_.defer(ss.mkdel(this,function(){if(this.$9){return}hy()}))}};K.__typeName='tab.ApiStorytellingHandler';K.$0=function(e,L){var hy=($.isArray(L)?L:[L]);var hz=_.any(hy,function(hA){return hA===e.get_name()});if(!hz){throw new ss.Exception("Command '"+e.get_name()+"' is not valid for the handler.")}};global.tab.ApiStorytellingHandler=K;var M=function(){this.$h=null;this.$j=null;this.$i=null;this.$g=null;this.$l=null;this.$k=[];this.$1$3=null;M.add_starting(ss.mkdel(this,function(){this.$k.push(dojo.subscribe('newLayoutId',ss.mkdel(this,this.$5)));this.$k.push(dojo.subscribe('tabChangeCompleted',ss.mkdel(this,function(){this.$d()})));this.$k.push(dojo.subscribe('onTabSelect',ss.mkdel(this,this.$2)));tab.ApplicationModel.get_instance().get_workbook().add_dashboardDeleted(ss.mkdel(this,this.$f));var e=new tab.LayoutSession(null,null,M.$1);tab.CommandController.create(e,M.$1);tab.CommandController.get().setBrowserViewportFunc(ba.getViewport);tab.CommandController.get().add_destroyView(ss.mkdel(this,function(){this.$1()}));tab.CommandController.get().add_intermediateUpdate(ss.mkdel(this,function(){this.$d()}));tab.StartupUtils.add_clientFullyLoaded(ss.mkdel(this,this.$4));var L=M.$0(false,e);this.$h=L;this.$j=L;this.$h.startup();this.$7(this.$h,this.$j);if(tab.BrowserSupport.get_isIE()){this.$0()}this.$i=new ep;spiff.SpiffBrowserViewport.getSpiffBrowserViewportFunc=function(hy){ba.getViewport(function(hz){var hA=new spiff.SpiffBrowserViewport(hz.get_dimensions(),function(hB){return hz.getVisibleRoom(hB,0)});hy(hA)})}}))};M.__typeName='tab.Application';M.add_starting=function(e){M.$1$1=ss.delegateCombine(M.$1$1,e)};M.remove_starting=function(e){M.$1$1=ss.delegateRemove(M.$1$1,e)};M.add_started=function(e){M.$1$2=ss.delegateCombine(M.$1$2,e)};M.remove_started=function(e){M.$1$2=ss.delegateRemove(M.$1$2,e)};M.get_instance=function(){if(ss.isNullOrUndefined(M.$2)){M.$2=new M}return M.$2};M.get_isHostedInApiContext=function(){return!ss.isNullOrEmptyString(tsConfig.apiID)};M.get_isStarted=function(){return M.$3};M.get_commonDialogProvider=function(){return M.$1};M.startup=function(){var e={};e['t']=tabBootstrap.MetricsController.getTiming();e['d']='APPSTR'.toString();var L=new tabBootstrap.MetricsEvent('gen',2,e);tabBootstrap.MetricsController.logEvent(L);if(ss.isValue(M.$3)&&M.$3){throw new ss.Exception('Application.Startup() can only be called once')}var hy=M.get_instance();if(ss.isValue(M.$1$1)){M.$1$1(hy,ss.EventArgs.Empty)}if(ss.isValue(M.$1$2)){M.$1$2(hy,ss.EventArgs.Empty)}spiff.DragDropManager.init();M.$3=true};M.$0=function(e,L){var hy=ss.getType((tsConfig.is_mobile?'tab.ApplicationViewModelMobile':'tab.ApplicationViewModelWeb'));return new hy(e,L)};global.tab.Application=M;var N=function(){this.domNode=null;this.toolbarContainer=null;this.vizPlaceholder=null;spiff.Template.call(this,$("<div id='tabViewer' class='wcBody' style='visibility:hidden;'><div class='wcVizPlaceholder'/></div>"));this.domNode=this.get_domRoot();this.vizPlaceholder=this.getElementBySelector('.wcVizPlaceholder');this.toolbarContainer=$('.tab-toolbar-container')};N.__typeName='tab.ApplicationTemplate';global.tab.ApplicationTemplate=N;var O=function(e){this.$d=null;this.$c=null;ss.makeGenericType(spiff.BaseView$1,[Q]).call(this,e,new N)};O.__typeName='tab.ApplicationView';global.tab.ApplicationView=O;var P=function(e,L){this.session=null;this._connections=[];this._subscriptions=[];this.skipInit=false;this.$y=null;this.$I=0;this.$F=null;this.$B=false;this.$E=null;this.$H=null;this.$A=null;this.$z=null;this.$C=false;this.$D=false;this.$G=0;spiff.Widget.call(this,$(null));this.session=L;this.skipInit=e;var hy=tabBootstrap.ViewerBootstrap.get_instance();if(ss.isNullOrUndefined(hy)){throw new ss.Exception('tabBootstrap.ViewerBootstrap is undefined')}this.$I=(new Date).getTime();if(hy.get_hasBootstrapCompleted()){tab.XhrUtil.set_currentTabName(tsConfig.current_sheet_name)}tab.XhrUtil.guid=tsConfig.guid;tab.XhrUtil.parentID=tsConfig.parentID;this.$k();this.$H=new ha(this);this.enableTextSelection()};P.__typeName='tab.ApplicationViewModel';P.$0=function(e,L){var hy=hw.calculateZoneZIndex(e);$(L).css('z-index',hy.toString())};P.getClientBounds=function(){var e=tabBootstrap.ViewerBootstrap.get_instance().getWebClientDashboardContainerSize(tsConfig.current_sheet_type);var L=tabBootstrap.ViewerBootstrap.get_instance().get_tabsHeight();var hy={l:0,t:L,w:e.w,h:e.h};if(!gA.get_toolbarIsBottom()&&!tsConfig.is_authoring){hy.t+=tabBootstrap.ViewerBootstrap.get_instance().get_vizToolbarHeight()}return hy};global.tab.ApplicationViewModel=P;var Q=function(e){this.$3=null;this.$5=null;this.$4=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$3=e;this.$3.add_newWorkbook(ss.mkdel(this,this.handleNewWorkbook));if(ss.isValue(this.$3.get_workbook())){this.handleNewWorkbook(this.$3.get_workbook())}this.$3.add_applicationUpdate(ss.mkdel(this,this.handleApplicationUpdate));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_applicationUpdate(ss.mkdel(this,this.handleApplicationUpdate))})));this.$4=new gA(this.$3.get_toolbar())};Q.__typeName='tab.ApplicationViewModelReal';global.tab.ApplicationViewModelReal=Q;var R=function(e){this.$9=null;this.$2$1=null;this.$2$2=null;spiff.Widget.call(this,e.get_domRoot());this.$9=e;this.$8()};R.__typeName='tab.AreYouSureButtons';R.create=function(e,L){var hy=new R(new S);if(ss.isValue(e)){hy.$a(e);hy.disposables.add$1(new tab.CallOnDispose(function(){hy.$b(e)}))}if(ss.isValue(L)){hy.$c(L);hy.disposables.add$1(new tab.CallOnDispose(function(){hy.$d(L)}))}return hy};global.tab.AreYouSureButtons=R;var S=function(){this.container=null;this.label=null;this.cancelButton=null;this.confirmButton=null;spiff.Template.call(this,$("<div class='tab-areYouSure-container'><div class='tab-areYouSure-outer'><div class='tab-areYouSure-inner'><span class='tab-areYouSure-label'></span><div class='tab-areYouSure-no tab-areYouSure-button'></div><div class='tab-areYouSure-yes tab-areYouSure-button'></div></div></div></div>"));this.container=this.get_domRoot();this.label=this.getElementBySelector('.tab-areYouSure-label');this.cancelButton=this.getElementBySelector('.tab-areYouSure-no');this.confirmButton=this.getElementBySelector('.tab-areYouSure-yes')};S.__typeName='tab.AreYouSureTemplate';global.tab.AreYouSureTemplate=S;var T=function(e){this.authorBylineElement=null;this.authorBylineText=null;this.$1=null;this.$1=e;this.authorBylineElement=$('<div>').addClass('wcAuthorByline');this.authorBylineText=$('<span>');this.authorBylineElement.append(this.authorBylineText)};T.__typeName='tab.AuthorByline';global.tab.AuthorByline=T;var U=function(e,L){this.$0=null;V.call(this,e,L);this.$0=e.RedirectUrl};U.__typeName='tab.BadPasswordAuthPromptOverlayWidget';global.tab.BadPasswordAuthPromptOverlayWidget=U;var V=function(e,L){W.call(this,e,L)};V.__typeName='tab.BaseDataSourceConnectionErrorOverlayWidget';global.tab.BaseDataSourceConnectionErrorOverlayWidget=V;var W=function(e,L){this.onProceed=null;this.dataSourceConnectionAttemptErrorResponse=null;this.dataSourceConnectionAttemptErrorResponse=e;this.onProceed=L};W.__typeName='tab.BaseDataSourceConnectionErrorWidget';global.tab.BaseDataSourceConnectionErrorWidget=W;var X=function(e,L,hy){this.dropdown=null;this.menuNode=null;this.glass=null;this.dropdownLabelContainer=null;this.fillListElement=null;this.searchBox=null;this.currentlySelected=0;this.multimode=false;this.$c=false;this.$b=false;Z.call(this,e,L,hy);this.searchBox=e.get_searchWidget();this.searchBox.setStyle(1);this.$b=false};X.__typeName='tab.BaseDropdown';global.tab.BaseDropdown=X;var Y=function(e){var L=function(hy,hz){this.$c=null;ss.makeGenericType(spiff.BaseView$1,[e]).call(this,hy,hz)};ss.registerGenericClassInstance(L,Y,[e],{get_legendViewModel:function(){return this.get_viewModel()},get_baseLegendTemplate:function(){return this.get_template()},get_legendTooltip:function(){this.$9();return this.$c},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this)},dispose:function(){if(ss.isValue(this.$c)){this.$c.remove_ubertipCommandExecuted(ss.mkdel(this,this.$a));this.$c.dispose()}ss.makeGenericType(spiff.BaseView$1,[e]).prototype.dispose.call(this)},drawTitle:function(){this.get_baseLegendTemplate().titleArea.html(this.get_legendViewModel().get_titleHtml());cL.cleanUpFontFamilyStyles(this.get_baseLegendTemplate().titleArea);this.$b(this.get_legendViewModel().get_titleInline());tableau.util.setupTitleEllipsis(this.get_baseLegendTemplate().titleArea)},$b:function(hy){var hz='';var hA='';if(hy){this.get_baseLegendTemplate().titleArea.width(this.get_legendViewModel().get_titleWidth());hz='inline-block';hA='top'}else{this.get_baseLegendTemplate().titleArea.width('');this.get_baseLegendTemplate().titleArea.height(this.get_legendViewModel().get_titleHeight())}this.get_baseLegendTemplate().titleArea.css('display',hz);this.get_baseLegendTemplate().titleArea.css('vertical-align',hA);if(ss.isValue(this.get_baseLegendTemplate().get_contentArea())){this.get_baseLegendTemplate().get_contentArea().css('display',hz)}},highlighterFitsUpperRight:function(){var hy=!this.get_legendViewModel().get_titleInline();if(this.get_legendViewModel().get_hasTitle()&&hy){return true}return false},$a:function(hy,hz){tab.UberTipClientCommands.executeUbertipCommand(hz.command)},makeTooltip:function(){var hy=this.get_legendViewModel().$6();if(ss.isNullOrUndefined(hy)){return null}return spiff.ObjectRegistry.newLegacyTooltip(gC).call(null,gC,null,hy)},$9:function(){if(ss.isNullOrUndefined(this.$c)){this.$c=this.makeTooltip();if(ss.isNullOrUndefined(this.$c)){return}this.$c.add_ubertipCommandExecuted(ss.mkdel(this,this.$a))}}},function(){return ss.makeGenericType(spiff.BaseView$1,[e])},function(){return[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[e])]});L.controlsMargin=2;return L};Y.__typeName='tab.BaseLegendView$1';ss.initGenericClass(Y,a,1);global.tab.BaseLegendView$1=Y;var Z=function(e,L,hy){this.$2=0;this.div=null;this.parent=null;this.attributes=null;this.$1=null;this.pendingManager=null;this.apply=null;this.cancel=null;this.disposables=new tab.DisposableHolder;this.tiledWidget=null;Object.call(this);this.disposables=new tab.DisposableHolder;this.parent=e;this.div=L;this.attributes={};if(ss.isValue(hy)){this.attributes=hy}};Z.__typeName='tab.BaseMode';global.tab.BaseMode=Z;var ba=function(e){this.$0=null;this.$0=e};ba.__typeName='tab.BrowserViewport';ba.$8=function(){return tab.Logger.lazyGetLogger(ba)};ba.$7=function(){var e=new tab.WindowHelper(window.self);return{l:e.get_pageXOffset(),t:e.get_pageYOffset(),w:e.get_clientWidth(),h:e.get_clientHeight()}};ba.getViewport=function(e){tab.Param.verifyValue(e,'callback');if(!ba.$b){e(new ba(ba.$7()))}else{ba.$9=e;ba.$6()}};ba.$0=function(e){if(tabBootstrap.Utility.get_embedMode()==='embeddedNotInWg'){if(ss.isValue(ba.$c)){e.y+=ba.$c.y;e.x+=ba.$c.x}}else{try{var L=window.self;while(ss.isValue(L.frameElement)){var hy=$(L.frameElement).offset();e.y+=tab.DoubleUtil.roundToInt(hy.top);e.x+=tab.DoubleUtil.roundToInt(hy.left);L=L.parent}}catch(hz){var e=ss.Exception.wrap(hz)}}};ba.$3=function(e){if(typeof(ss.getType('ss'))==='undefined'){return}var L=e.data;if(ss.isNullOrUndefined(L)||typeof(L)!=='string'){return}var hy=L;var hz=hy.split(',');if(!ss.isValue(hz)){return}if(ss.referenceEquals(hz[0],'layoutInfoResp'.toString())){var hA={l:parseInt(hz[1],10),t:parseInt(hz[2],10),w:parseInt(hz[3],10),h:parseInt(hz[4],10)};ba.$2(hA)}else if(ss.referenceEquals(hz[0],'tableau.enableVisibleRectCommunication'.toString())){ba.$b=true}else if(ss.referenceEquals(hz[0],'vizOffsetResp'.toString())){ba.$c={x:parseInt(hz[1],10),y:parseInt(hz[2],10)};ba.$b=true}};ba.$2=function(e){var L=new ba(e);if(ss.isValue(ba.$9)){ba.$9(L);ba.$9=null}};ba.$6=function(){if(tab.BrowserSupport.get_postMessage()){window.parent.postMessage('layoutInfoReq'.toString(),'*')}else{ba.$2(ba.$7())}};ba.$5=function(){if(ba.$a){if('removeEventListener'in window.self){window.removeEventListener('message',ba.$3,true)}else{window.self.detachEvent('onmessage',ba.$3)}ba.$a=false}};ba.$1=function(){if('addEventListener'in window.self){window.addEventListener('unload',ba.$4,true)}else{window.self.attachEvent('onunload',ba.$4)}};ba.$4=function(e){ba.$5()};global.tab.BrowserViewport=ba;var bb=function(e,L){this.$0=null;this.$1=null;this.$2=null;this.$3=null;this.$5=false;this.$4=null;this.$6=null;this.$0=e;this.$1=L;this.$5=false;this.$6={x:0,y:0};if(tab.BrowserSupport.get_isSafari()&&!tab.BrowserSupport.get_isMobile()){this.$0.style['webkitFontSmoothing']='antialiased'}};bb.__typeName='tab.CanvasRenderer';bb.get_multipolyLineSizeOffset=function(){return(tab.BrowserSupport.get_isChrome()?0.400000005960464:0)};bb.bBoxMultipolygon=function(e,L,hy,hz,hA,hB){var hC;if(ss.isNullOrUndefined(hB)){var hD=hA/2;var hE=Math.floor(hA+1);var hF={x:L-hD,y:hy-hD};hC={minX:hF.x,minY:hF.y,maxX:hF.x+hE,maxY:hF.y+hE}}else{hC={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY};bb.boundsMultipolygon(hB,hC)}if(e){return tab.RectXYUtil.rectXYFromBBoxRectF(hC)}var hG=tab.Transform.domainToPixel(L,hy,hz);return hG.transformBounds(hC)};bb.modifyLineEndpoints=function(e,L,hy){if(Math.round(hy)%2===1){var hz=L.x-e.x;var hA=L.y-e.y;if(hz!==0||hA!==0){var hB=hz*hz+hA*hA;hB=Math.sqrt(hB);var hC=Math.abs(0.5*(hz/hB));var hD=Math.abs(0.5*(hA/hB));e.x+=hD;e.y+=hC;L.x+=hD;L.y+=hC}}};bb.getShapeColorForLayer=function(e,L,hy,hz){switch(hy){case'highlightedUnder':case'normalUnder':{return e.getMarkProperty('halo_color',L)[hz]}case'selectedOn':case'highlightedOn':case'normalOn':{return e.getMarkColors(L)[hz]}case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{return e.getMarkProperty('selected_halo_color',L)[hz]}}return'rgba(255,255,255,1)'};bb.getRenderContext=function(e,L){var hy;if(L==='opaque'&&tab.FeatureParamsLookup.getBool(42)){var hz=ss.mkdict(['alpha',false]);hy=e.getContext('2d',hz)}else{hy=e.getContext('2d')}return new gg(hy)};bb.addMultipolygonPath=function(e,L){var hy=L.KCe;var hz=hy.length;for(var hA=0;hA<hz;hA++){var hB=hy[hA].jWM;var hC=hB.length;for(var hD=0;hD<hC;hD++){var hE=hB[hD].xCr;var hF=hE.length;if(hF<2){continue}e.moveTo(hE[0],hE[1]);for(var hG=2;hG<hF;hG=hG+2){e.lineTo(hE[hG],hE[hG+1])}}}};bb.boundsMultipolygon=function(e,L){var hy=L.minX;var hz=L.minY;var hA=L.maxX;var hB=L.maxY;var hC=e.KCe;var hD=hC.length;for(var hE=0;hE<hD;hE++){var hF=hC[hE].jWM;var hG=hF.length;for(var hH=0;hH<hG;hH++){var hI=hF[hH].xCr;var hJ=hI.length;for(var hK=0;hK<hJ;hK=hK+2){var hL=hI[hK];var hM=hI[hK+1];hy=Math.min(hy,hL);hz=Math.min(hz,hM);hA=Math.max(hA,hL);hB=Math.max(hB,hM)}}}L.minX=hy;L.minY=hz;L.maxX=hA;L.maxY=hB};bb.fillPath=function(e,L,hy){var hz=Math.floor(L.length/2);if(hz<2){return}e.beginPath();e.moveTo(L[0],L[1]);for(var hA=2;hA<hz*2;hA+=2){e.lineTo(L[hA],L[hA+1])}if(hy){e.closePath()}e.fill()};bb.strokePath=function(e,L,hy,hz){var hA=Math.floor(L.length/2);if(hA<2){return}e.beginPath();for(var hB=0;hB<hA*2-2;hB+=2){var hC={x:L[hB],y:L[hB+1]};var hD={x:L[hB+2],y:L[hB+3]};if(hA<=2&&hz){bb.modifyLineEndpoints(hC,hD,e.get_lineWidth())}if(hB===0){e.moveTo(hC.x,hC.y)}bb.$1(e,hC,hD)}if(hy){e.closePath();var hE=hA*2;var hF={x:L[hE-2],y:L[hE-1]};var hG={x:L[0],y:L[1]};if(hA<=2&&hz){bb.modifyLineEndpoints(hF,hG,e.get_lineWidth())}bb.$1(e,hF,hG)}e.stroke()};bb.toCanvasAngle=function(e){return e*bb.twoPI-bb.halfPI};bb.toCanvasLineCap=function(e){switch(e){case'flat':{return'butt'}case'square':{return'square'}case'round':{return'round'}case'triangle':{break}}return'butt'};bb.toCanvasLineJoin=function(e){switch(e){case'bevel':{return'bevel'}case'miter':{return'miter'}case'round':{return'round'}}return'miter'};bb.lineEdgeContains=function(e,L,hy,hz,hA,hB,hC,hD){var hE=bb.$5(hy,hz,hA,hB,hC,hD);return cR.isPointInPoly(hE,{x:e,y:L})};bb.boundLineEdgeInPlace=function(e,L,hy,hz,hA,hB,hC){var hD=bb.$5(L,hy,hz,hA,hB,hC);var hE=hD[0];var hF=hE;var hG=hD[1];var hH=hG;var hI=hD.length;for(var hJ=0;hJ<hI;hJ=hJ+2){hE=Math.min(hE,hD[hJ]);hF=Math.max(hF,hD[hJ]);hG=Math.min(hG,hD[hJ+1]);hH=Math.max(hH,hD[hJ+1])}tab.RectXYUtil.unionInPlace(e,{x:ss.Int32.trunc(hE),y:ss.Int32.trunc(hG),w:ss.Int32.trunc(hF-hE)+1,h:ss.Int32.trunc(hH-hG)+1})};bb.boundWedge=function(e,L,hy,hz,hA){if(hz>hA){var hB=hz;hz=hA;hA=hB}if(hA-hz>=1){var hC=Math.ceil(2*hy);return{x:Math.floor(e-hy),y:Math.floor(L-hy),w:hC,h:hC}}var hD=bb.toCanvasAngle(hz);var hE=bb.toCanvasAngle(hA);var hF=[];hF.push({x:e,y:L});hF.push({x:e+hy*Math.cos(hD),y:L+hy*Math.sin(hD)});hF.push({x:e+hy*Math.cos(hE),y:L+hy*Math.sin(hE)});hD=cR.normalizeAngle(hD);hE=cR.normalizeAngle(hE);if(cR.isInBetweenAngles(0,hD,hE)){hF.push({x:e+hy,y:L})}if(cR.isInBetweenAngles(bb.halfPI,hD,hE)){hF.push({x:e,y:L+hy})}if(cR.isInBetweenAngles(bb.onePI,hD,hE)){hF.push({x:e-hy,y:L})}if(cR.isInBetweenAngles(bb.oneAndHalfPI,hD,hE)){hF.push({x:e,y:L-hy})}var hG=Number.POSITIVE_INFINITY;var hH=Number.POSITIVE_INFINITY;var hI=Number.NEGATIVE_INFINITY;var hJ=Number.NEGATIVE_INFINITY;for(var hK=0;hK<hF.length;hK++){var hL=hF[hK];hG=Math.min(hG,hL.x);hH=Math.min(hH,hL.y);hI=Math.max(hI,hL.x);hJ=Math.max(hJ,hL.y)}return tab.RectXYUtil.rectXYFromMinAndMax(hG,hH,hI,hJ)};bb.roundStartAndExtent=function(e,L,hy){var hz=Math.round(e+L);e=Math.round(e);L=Math.max(Math.abs(hz-e),hy);return{item1:e,item2:L}};bb.isPointInExpandedRectHelperF=function(e,L,hy,hz,hA,hB,hC,hD,hE,hF){if(hy<0){e+=hy;hy=Math.abs(hy)}if(hz<0){L+=hz;hz=Math.abs(hz)}var hG=bb.roundStartAndExtent(e-hA,hy+hA+hA,hC+hA+hA);var hH=bb.roundStartAndExtent(L-hB,hz+hB+hB,hD+hB+hB);var hI={x:ss.Int32.trunc(hH.item1),y:ss.Int32.trunc(hG.item1),w:ss.Int32.trunc(hH.item2),h:ss.Int32.trunc(hG.item2)};if(tab.RectXYUtil.inRectPointF(hI,{x:hE,y:hF})){return true}return false};bb.renderCustomShape=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('shape_id',hy);if(ss.isValue(hB)){var hC=tab.ApplicationModel.get_instance().get_shapeManager();var hD=hC.getImageElement(hB);if(!ss.isValue(hD)){bb.renderCircle(e,L.getMarkProperty('x',hy),L.getMarkProperty('y',hy),L.getMarkProperty('size',hy),bb.getShapeColorForLayer(L,hy,hz,hA),2);return}if(!hD.complete){return}var hE=L.isMarkPropertyConstant('color');var hF=L.getMarkProperty('size',hy);var hG=L.getMarkProperty('left',hy);var hH=L.getMarkProperty('top',hy);var hI;var hJ;if(hD.naturalWidth>hD.naturalHeight){var hK=hD.naturalWidth/hD.naturalHeight;hI=hF;hJ=Math.max(hF/hK,1);hH+=ss.Int32.trunc((hF-hJ)/2)}else{var hL=hD.naturalHeight/hD.naturalWidth;hI=Math.max(hF/hL,1);hJ=hF;hG+=ss.Int32.trunc((hF-hI)/2)}var hM=bb.$2(L,hy,hz,hA);hz=((hz==='normalOn'&&hA==='colorOverrideOpaque')?'selectedOn':hz);var hN=null;switch(hz){case'normalUnder':case'highlightedUnder':case'selectedUnder':{hN=function(){return fH.generateSelectedUnderCustomShape(hD,hM,tab.ShapeManager.selectionBorderSize,hI,hJ)};break}case'normalOn':{if(hE){if(hA==='colorOverrideFog'){hN=function(){return fH.applyFoggingToImage(hD,L.get_foggedBackgroundColor(),L.get_fogBlendFactor(),hI,hJ)}}}else{hN=function(){return fH.colorTransformImage(hD,hM,hI,hJ)}}break}case'highlightedOn':{if(!hE){hN=function(){return fH.colorTransformImage(hD,hM,hI,hJ)}}break}case'selectedOn':{if(!hE){hN=function(){hM=tab.ColorModel.fromColorModelPlusAlpha(hM,255);return fH.colorTransformImage(hD,hM,hI,hJ)}}break}case'hoverOverlay':{hN=function(){return fH.generateOverlayForShape(hD,hM,tab.ShapeManager.selectionBorderSize,hI,hJ)};break}case'pressedOverlay':{hN=function(){return fH.generateOverlayForShape(hD,hM,tab.ShapeManager.selectionBorderSize*2,hI,hJ)};break}}if(!ss.isValue(hN)){hN=function(){return fH.generateCanvasAndPrescaleAsNeeded(hD,hI,hJ)}}var hO=hC.getCachedCanvas(hB,hz,hA,hM.toString(),hI,hJ,hN);if(ss.isValue(hO)){switch(hz){case'normalUnder':case'highlightedUnder':case'selectedUnder':case'hoverOverlay':{e.drawImage3(hO,hG-tab.ShapeManager.selectionBorderSize,hH-tab.ShapeManager.selectionBorderSize,hO.width,hO.height);break}case'pressedOverlay':{e.drawImage3(hO,hG-tab.ShapeManager.selectionBorderSize*2,hH-tab.ShapeManager.selectionBorderSize*2,hO.width,hO.height);break}case'normalOn':{e.set_alpha(hM.get_a());e.drawImage3(hO,hG,hH,hI,hJ);break}default:{e.drawImage3(hO,hG,hH,hI,hJ);break}}}else{}}};bb.$2=function(e,L,hy,hz){var hA=bb.getShapeColorForLayer(e,L,hy,hz);return tab.ColorModel.fromColorCode(hA)};bb.renderBarOutline=function(e,L,hy,hz,hA,hB,hC,hD,hE,hF){e.set_lineWidth(hC);e.set_strokeStyle(hB);var hG=((Math.round(hC)%2===0)?0:0.5);var hH=bb.roundStartAndExtent(hy,hA,hE);var hI=bb.roundStartAndExtent(L,hz,hD);if(hF){var hJ=Math.min(hI.item2,hH.item2);hI={item1:hI.item1,item2:hJ};hH={item1:hH.item1,item2:hJ}}e.strokeRect(hI.item1+hG,hH.item1+hG,hI.item2,hH.item2)};bb.renderFilledBar=function(e,L,hy,hz,hA,hB,hC,hD,hE){e.set_shapeFillStyle(hB);{var hF=bb.roundStartAndExtent(hy,hA,hD);hy=hF.item1;hA=hF.item2;var hG=bb.roundStartAndExtent(L,hz,hC);L=hG.item1;hz=hG.item2}if(hE){hz=hA=Math.min(hz,hA)}e.fillRect(L,hy,hz,hA)};bb.renderRectangle=function(e,L,hy,hz,hA,hB,hC){var hD=hz/2;var hE=hA/2;e.set_lineJoin('miter');e.set_lineWidth(hC);e.set_strokeStyle(hB);e.strokeRect(L-hD,hy-hE,hz,hA)};bb.renderCircle=function(e,L,hy,hz,hA,hB){e.beginPath();e.arc(L,hy,hz/2,0,bb.twoPI,true);e.closePath();e.set_lineWidth(hB);e.set_strokeStyle(hA);e.stroke()};bb.renderFilledCircle=function(e,L,hy,hz,hA){e.beginPath();e.arc(L,hy,hz/2,0,bb.twoPI,true);e.closePath();e.set_shapeFillStyle(hA);e.fill()};bb.renderWedge=function(e,L,hy,hz,hA,hB,hC,hD,hE,hF){var hG=bb.toCanvasAngle(hA);var hH=bb.toCanvasAngle(hB);if(Math.abs(hH-hG)<bb.angleEpsilon){return}if(ss.isNullOrUndefined(hE)){hE=false}var hI=false;if(Math.abs(hB-hA)>=1){hI=true}e.beginPath();if(!hI){e.moveTo(L,hy)}hG=bb.$6(hG);hH=bb.$6(hH);e.arc(L,hy,hz,hG,hH,hE);e.closePath();e.set_lineJoin((hF?'miter':'round'));e.set_lineWidth(hD);e.set_strokeStyle(hC);e.stroke()};bb.createMultipolygonPath=function(e,L,hy,hz,hA,hB,hC){if(hC===null){e.beginPath();e.arc(hy,hz,hB/2,0,bb.twoPI,true);e.closePath()}else{if(!L){e.save();e.translate(hy,hz);e.scale(hA,hA)}e.beginPath();bb.addMultipolygonPath(e,hC);e.closePath();if(!L){e.restore()}}};bb.$5=function(e,L,hy,hz,hA,hB){var hC=Math.atan2(hA-L,hz-e);var hD=Math.cos(hC);var hE=Math.sin(hC);hy/=2;hB/=2;var hF=hy*hE;var hG=hB*hE;var hH=hy*hD;var hI=hB*hD;var hJ=new Array(8);hJ[0]=e+hF;hJ[1]=L-hH;hJ[2]=hz+hG;hJ[3]=hA-hI;hJ[4]=hz-hG;hJ[5]=hA+hI;hJ[6]=e-hF;hJ[7]=L+hH;return hJ};bb.$1=function(e,L,hy){if(tab.BrowserSupport.get_canvasLinePattern()){e.lineTo(hy.x,hy.y)}else{switch(e.get_linePattern()){case'dashed':{bb.$0(e,L,hy,gg.defaultLineDashDashed[0],gg.defaultLineDashDashed[1]);break}case'dotted':{bb.$0(e,L,hy,gg.defaultLineDashDotted[0],gg.defaultLineDashDotted[1]);break}case'solid':default:{e.lineTo(hy.x,hy.y);break}}}};bb.$0=function(e,L,hy,hz,hA){var hB=e.get_lineWidth();hz=hB*hz;hA=hB*hA;e.moveTo(L.x,L.y);var hC=false;var hD=hz;var hE=L.x;var hF=L.y;var hG=hy.x-L.x;var hH=hy.y-L.y;var hI=hG*hG+hH*hH;hI=Math.sqrt(hI);var hJ=hG/hI;var hK=hH/hI;while(hI>0){var hL=((hI>hD)?hD:hI);var hM=hE+hL*hJ;var hN=hF+hL*hK;if(hC){e.moveTo(hM,hN)}else{e.lineTo(hM,hN)}hI-=hL;hD-=hL;if(hD===0){hC=!hC;hD=(hC?hA:hz)}hE=hM;hF=hN}};bb.$4=function(e,L){var hy=tab.DomUtil.parseWidthFromStyle(e.style);hy=(isNaN(hy)?L:hy);return hy};bb.$3=function(e,L){var hy=tab.DomUtil.parseHeightFromStyle(e.style);hy=(isNaN(hy)?L:hy);return hy};bb.$6=function(e){return ss.Int32.trunc(e*100000)/100000};global.tab.CanvasRenderer=bb;var bc=function(){this.canvasElt=null;spiff.Template.call(this,$("<canvas class='tabCanvas'></canvas>"));this.canvasElt=this.get_domRoot()};bc.__typeName='tab.CanvasTemplate';global.tab.CanvasTemplate=bc;var bd=function(){};bd.__typeName='tab.CanvasUtil';bd.sizeCanvasWithHighDPISupport=function(e,L,hy){var hz=fv.calculatePixelRatio();bd.setCanvasSizeAndDensify(e,hz,hy);if(!tab.DoubleUtil.isApproximatelyEqual(hz,1)){bd.scaleCanvasDrawing(L,hz)}};bd.setCanvasSizeAndDensify=function(e,L,hy){if(ss.isValue(e)){var hz={w:ss.Int32.trunc(hy.w*L),h:ss.Int32.trunc(hy.h*L)};bd.densifyCanvasUsingSize(e,hz,hy)}};bd.densifyCanvasUsingSize=function(e,L,hy){if(ss.isValue(e)&&ss.isValue(L)&&ss.isValue(hy)){e.width=L.w;e.height=L.h;e.style.width=bd.$0(hy.w);e.style.height=bd.$0(hy.h)}};bd.scaleCanvasDrawing=function(e,L){if(ss.isValue(e)){e.scale(L,L)}};bd.isOverCanvasSizeLimit=function(e,L,hy){var hz=Math.floor(hy*e*hy*L+0.5);return hz>tabBootstrap.ViewerBootstrap.get_canvasPixelLimit()};bd.canvasDensified=function(e){return!!e.style.height&&!ss.referenceEquals(e.style.height,bd.$0(e.height))};bd.$0=function(e){return e+'px'};global.tab.CanvasUtil=bd;var be=function(e){var L=function(hy,hz){this.canvasElt=null;this.context=null;this.scrollOffset=null;this.$e=null;this.$f=0;this.$g=null;this.$c=null;this.$h=null;this.$d=false;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[e]).call(this,hy,new bc);this.canvasElt=this.get_template().canvasElt.get(0);this.scrollOffset={x:0,y:0};this.$e={x:0,y:0};this.$d=false;this.context=bb.getRenderContext(this.canvasElt,hz);this.$f=fv.calculatePixelRatio();tab.CommandController.get().add_modelsUpdated(ss.mkdel(this,this.$b))};ss.registerGenericClassInstance(L,be,[e],{add_sizeChange:function(hy){this.$3$1=ss.delegateCombine(this.$3$1,hy)},remove_sizeChange:function(hy){this.$3$1=ss.delegateRemove(this.$3$1,hy)},get_canScrollX:function(){return this.get_docSize().w-this.get_effectiveViewSize().w>0},get_canScrollY:function(){return this.get_docSize().h-this.get_effectiveViewSize().h>0},get_docSize:null,get_actualViewSize:function(){if(!ss.isValue(this.canvasElt)){return{w:0,h:0}}return{w:this.canvasElt.width,h:this.canvasElt.height}},set_actualViewSize:function(hy){if(!ss.isValue(this.canvasElt)){return}if(bd.isOverCanvasSizeLimit(hy.w,hy.h,this.get_pixelRatio())){this.$f=1}if(this.get_effectiveViewSize().w!==hy.w||this.get_effectiveViewSize().h!==hy.h){this.$c={w:hy.w,h:hy.h};bd.setCanvasSizeAndDensify(this.canvasElt,this.get_pixelRatio(),this.$c);this.invalidate(false);if(!ss.staticEquals(this.$3$1,null)){this.$3$1()}}},get_effectiveViewSize:function(){if(ss.isValue(this.$c)){return this.$c}else{return this.get_actualViewSize()}},get_pixelRatio:function(){return this.$f},get_isContentOpaque:function(){return true},get_needsRedraw:function(){return!tab.RectXYUtil.isEmpty(this.get_dirtyRect())},get_scrollPos:function(){return this.scrollOffset},set_scrollPos:function(hy){if(!tab.PointUtil.equals(this.scrollOffset,hy)){var hz=tab.PointFUtil.timesScalar(hy,this.$f);var hA=tab.PointFUtil.round(hz);var hB=tab.PointUtil.subtract(hA,this.$e);var hC=tab.PointUtil.subtract(hy,this.scrollOffset);this.$e=hA;this.scrollOffset=hy;if(!tab.RectXYUtil.isEmpty(this.get_dirtyRect())){var hD={x:-hC.x,y:-hC.y};var hE=tab.RectXYUtil.offsetRect(this.get_dirtyRect(),hD);this.set_dirtyRect(hE)}if(hC.x!==0&&hC.y!==0||!this.get_isContentOpaque()){this.invalidate(true)}else{var hF=hB.x;var hG=hB.y;var hH=this.get_actualViewSize().w-Math.abs(hF);var hI=((hF>0)?hF:0);var hJ=((hF>0)?0:-hF);var hK=this.get_actualViewSize().h-Math.abs(hG);var hL=((hG>0)?hG:0);var hM=((hG>0)?0:-hG);if(hH<=0||hK<=0){this.invalidate(true)}else{this.context.reset();this.context.drawImage5(this.canvasElt,hI,hL,hH,hK,hJ,hM,hH,hK);var hN={x:0,y:0,w:this.get_effectiveViewSize().w,h:this.get_effectiveViewSize().h};if(hC.x>0){hN.x=hN.w-hC.x}else if(hC.x<0){hN.w=-hC.x}if(hC.y>0){hN.y=hN.h-hC.y}else if(hC.y<0){hN.h=-hC.y}if(hC.x===0){hN.h=Math.abs(hC.y)}if(hC.y===0){hN.w=Math.abs(hC.x)}hN=tab.RectXYUtil.dialate(hN,3);this.invalidateRect(hN,true)}}}},get_dirtyRect:function(){return(ss.isValue(this.context)?this.context.get_dirtyRect():{x:0,y:0,w:0,h:0})},set_dirtyRect:function(hy){if(ss.isValue(this.context)){this.context.set_dirtyRect(hy)}},dispose:function(){if(ss.isValue(this.$g)){tab.WindowHelper.cancelAnimationFrame(ss.unbox(this.$g));this.$g=null}this.$9();tab.CommandController.get().remove_modelsUpdated(ss.mkdel(this,this.$b));ss.makeGenericType(spiff.BaseView$1,[e]).prototype.dispose.call(this)},clearDirty:function(){this.set_dirtyRect({x:0,y:0,w:0,h:0})},invalidate:function(hy){this.set_dirtyRect({x:0,y:0,w:this.get_effectiveViewSize().w,h:this.get_effectiveViewSize().h});this.triggerRedraw(hy)},invalidateRect:function(hy,hz){var hA;if(tab.RectXYUtil.isEmpty(this.get_dirtyRect())){hA=tab.RectXYUtil.clone(hy)}else{hA=tab.RectXYUtil.union(this.get_dirtyRect(),hy)}if(hA.x<0){hA.x=0}if(hA.x+hA.w>this.get_effectiveViewSize().w){hA.w=this.get_effectiveViewSize().w-hA.x}if(hA.y<0){hA.y=0}if(hA.y+hA.h>this.get_effectiveViewSize().h){hA.h=this.get_effectiveViewSize().h-hA.y}this.set_dirtyRect(hA);this.triggerRedraw(hz)},setXPos:function(hy){this.set_scrollPos({x:hy,y:this.get_scrollPos().y})},setYPos:function(hy){this.set_scrollPos({x:this.get_scrollPos().x,y:hy})},redraw:null,redrawFinished:null,triggerRedraw:function(hy){var hz=ss.isValue(this.$g);hy=hy||false;if(hy){this.$a();this.redraw();this.$9();if(hz){tab.WindowHelper.cancelAnimationFrame(ss.unbox(this.$g));this.$g=null}this.redrawFinished()}else if(!hz){this.$a();this.$g=tab.WindowHelper.requestAnimationFrame(ss.mkdel(this,function(){this.$b()}))}},$b:function(){if(ss.isValue(this.$g)){this.triggerRedraw(true)}},$a:function(){this.$h=this.$h||tab.CommandController.get().get_legacySession().get_waitHandler();var hy=!this.$d&&this.$h.isBusy();if(hy){this.$h.addref(false);this.$d=true;return true}return false},$9:function(){if(this.$d){this.$h=this.$h||tab.CommandController.get().get_legacySession().get_waitHandler();this.$h.release();this.$d=false}}},function(){return ss.makeGenericType(spiff.BaseView$1,[e])},function(){return[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[e]),spiff.IScrollable]});return L};be.__typeName='tab.CanvasView$1';ss.initGenericClass(be,a,1);global.tab.CanvasView$1=be;var bf=function(e,L,hy,hz,hA,hB){this.column=null;this.$1=null;spiff.Template.call(this,$("<span class='tabLegendItemColumn'/>"));this.column=this.get_domRoot();this.$1=[];for(var hC=0;hC<e;++hC){this.$1[hC]=new bg(hz,hA,hB);bi.setDomNodeStyleSize(this.$1[hC].get_domRoot(),L,hy);this.$1[hC].itemLabel.width(L);this.column.append(this.$1[hC].get_domRoot())}};bf.__typeName='tab.CategoricalLegendColumnHtmlTemplate';global.tab.CategoricalLegendColumnHtmlTemplate=bf;var bg=function(e,L,hy){this.item=null;this.itemSwatch=null;this.itemLabelHolder=null;this.itemLabel=null;this.renderContext=null;this.canvasElt=null;spiff.Template.call(this,$("<div class='tabLegendItem'><span class='tabLegendItemSwatchHolder'></span><span class='tabLegendItemLabelHolder'><span class='tabLegendItemLabel' /></span></div>"));this.item=this.get_domRoot();var hz=this.getElementBySelector('.tabLegendItemSwatchHolder');this.itemLabel=this.getElementBySelector('.tabLegendItemLabel');this.itemLabelHolder=this.getElementBySelector('.tabLegendItemLabelHolder');bi.setDomNodeStyleSize(hz,e.w,e.h);var hA=(ss.isValue(L)?"<span class='tabLegendItemSwatch' />":"<canvas class='tabLegendItemSwatch' />");hz.append($(hA));this.itemSwatch=this.getElementBySelector('.tabLegendItemSwatch');if(ss.isNullOrUndefined(L)){var hB=this.itemSwatch.get(0);this.renderContext=bb.getRenderContext(hB,'transparent');this.canvasElt=hB;bd.sizeCanvasWithHighDPISupport(this.canvasElt,this.renderContext,e)}else{var hC={l:L.l,t:L.t,w:L.w,h:L.h};if(hy){var hD=1;hC.w-=2;hC.h-=2;this.itemSwatch.css('border-width',hD+'px');this.itemSwatch.css('border-style','none')}bi.setDomNodeStyleSize(this.itemSwatch,hC.w,hC.h);this.itemSwatch.css('top',hC.t+'px');this.itemSwatch.css('left',hC.l+'px');this.renderContext=null}};bg.__typeName='tab.CategoricalLegendItemHtmlTemplate';global.tab.CategoricalLegendItemHtmlTemplate=bg;var bh=function(e){this.panel=null;this.columnsHolder=null;this.columnHolder=null;this.legendHighlighter=null;ec.call(this,e);this.panel=this.get_domRoot();this.panel.append($("<div class='tabLegendHighlighter'/>"));this.columnsHolder=this.getElementBySelector('.tabLegendContentHolder');this.columnHolder=this.getElementBySelector('.tabLegendColumnHolder');this.legendHighlighter=this.getElementBySelector('.tabLegendHighlighter');this.legendHighlighter.attr('title',tab.Strings.LegendPanelHighlightSelectedItems)};bh.__typeName='tab.CategoricalLegendTemplate';global.tab.CategoricalLegendTemplate=bh;var bi=function(e,L){this.viewportWidth=0;this.viewportHeight=0;this.bodyOffset=null;this.$l=[];this.$n=null;this.$m=null;ss.makeGenericType(Y,[bj]).call(this,e,L);this.setHighlightButtonVisibility(false)};bi.__typeName='tab.CategoricalLegendView';bi.setDomNodeStyleSize=function(e,L,hy){e.css('width',L+'px');e.css('height',hy+'px')};bi.$0=function(e,L){if(L){e.show()}else{e.hide()}};global.tab.CategoricalLegendView=bi;var bj=function(e,L,hy,hz){this.legendType=null;this.$q=null;this.$u=null;this.$r=null;this.$t=null;this.$p=null;this.$s=null;ea.call(this,hy,hz);this.legendType=L;this.$q=e;this.$q.add_legendChanged(ss.mkdel(this,this.$e));this.$q.add_legendNameChanged(ss.mkdel(this,this.$d));var hA=this.get_visualModel();this.$t=hA.get_selectionsModel().getLegendSelection(this.get_legendTypeEnum(),this.$k());this.$t.add_newSelection(ss.mkdel(this,this.$f));this.$p=hA.get_brushingsModel().getLegendSelection(this.get_legendTypeEnum(),this.$k());this.$p.add_newSelection(ss.mkdel(this,this.$f));hA.get_selectionsModel().add_newSelections(ss.mkdel(this,this.$f));this.$u=((this.legendType==='color')?tab.ColorModel.fromColorCode(this.$h().mNx):this.$g());this.$e()};bj.__typeName='tab.CategoricalLegendViewModel';bj.legendShouldBeGrayed=function(e,L,hy,hz){if(e&&L&&!hy){return false}return hy||L||hz};global.tab.CategoricalLegendViewModel=bj;var bk=function(){this.selection=null;this.displaySearchArea=false;this.displayTitleBarButtons=false};bk.__typeName='tab.CategoricalQFState';global.tab.CategoricalQFState=bk;var bl=function(e,L){this.$q=false;this.$p=4;React.Component.call(this,e,L);this.state=this.$1(this.props);this.$p=this.$2(e)};bl.__typeName='tab.CategoricalQuickFilterComponent';global.tab.CategoricalQuickFilterComponent=bl;var bm=function(){this.label=null;this.isSelected=false};bm.__typeName='tab.CategoricalQuickFilterListItem';global.tab.CategoricalQuickFilterListItem=bm;var bn=function(e){this.categoricalQuickFilterModel=null;this.$3$1=null;fh.call(this,e);this.categoricalQuickFilterModel=this.displayModel.get_quickFilterModel()};bn.__typeName='tab.CategoricalQuickFilterViewModel';global.tab.CategoricalQuickFilterViewModel=bn;var bo=function(e){this.$2=null;this._anchorIndex=-1;this._selectedIndexes=[];this._lastRangeSelectionIndex=-1;this.changelist=null;this._applyTimer=null;this.$2=e};bo.__typeName='tab.CategoricalSelection';global.tab.CategoricalSelection=bo;var bp=function(e,L,hy){X.call(this,e,L,hy);this.set_itemFormatter(ss.mkdel(cF.filterItem,cF.filterItem.formatChecklistFilterItemHtml))};bp.__typeName='tab.CheckDropdown';global.tab.CheckDropdown=bp;var bq=function(e,L,hy){this.checkListContainer=null;this.$3=null;Z.call(this,e,L,hy);this.set_itemFormatter(bq.getFilterItemHtml)};bq.__typeName='tab.Checklist';bq.addAllItem=function(e,L,hy,hz,hA,hB){var hC=cF.getAllItemHtml(L,hy,hz,hA,hB);var hD=e.append($(hC).addClass('tab-ctrl-formatted-text'));cF.filterItem.setChecked(hD.children().get(0),hA)};bq.shouldCheckAllItem=function(e,L){if(ss.isValue(L)&&ss.isValue(L.get_allItemCheckState())){return ss.unbox(L.get_allItemCheckState())}return e.all||e.allChecked&&!e.exclude||e.allNotChecked&&e.exclude};global.tab.Checklist=bq;var br=function(e,L,hy){fP.call(this,e,L,hy)};br.__typeName='tab.ChecklistContentFormatter';global.tab.ChecklistContentFormatter=br;var bs=function(e,L){this.$i=null;this.$j=null;this.$k=null;fF.call(this,e,(fF.get_isUsingVml()?"<div>\n                                                    <div class='selectionShape'>\n                                                        <v:oval class='voval'><v:fill opacity='25%' color='rgb(0, 176, 240)'/><v:stroke color='rgb(0, 176, 240)'/></v:oval><v:rect class='circle_crosshair'><v:fill color='rgb(0, 176, 240)'/><v:stroke color='rgb(0, 176, 240)'/></v:rect><v:rect class='circle_crosshair'><v:fill color='rgb(0, 176, 240)'/><v:stroke color='rgb(0, 176, 240)'/></v:rect><v:rect class='circle_radius'><v:fill color='rgb(0, 176, 240)'/><v:stroke color='rgb(0, 176, 240)'/></v:rect></div><div class='tabDistanceReadout'></div></div>":"<div>\n                                                <svg class='selectionShape'>\n                                                    <circle class='tvdrag_svg_marquee'></circle><line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line><line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line><line class='circle_radius'x1='0' y1='0' x2='0' y2='0'></line></svg><div class='tabDistanceReadout'></div></div>"),'tvdrag_svg_div');this.$i={center:{x:0,y:0},radius:0};this.$j={center:{x:0,y:0},radius:0};this.$k=L};bs.__typeName='tab.CircleShapeSelector';global.tab.CircleShapeSelector=bs;var bt=function(){this.$0=null;this.$1=null;fG.call(this);this.$0={center:{x:0,y:0},radius:0};this.$1={center:{x:0,y:0},radius:0}};bt.__typeName='tab.CircleShapeState';global.tab.CircleShapeState=bt;var bu=function(){};bu.__typeName='tab.ClipCase';global.tab.ClipCase=bu;var bv=function(){this.command=null;ss.EventArgs.call(this)};bv.__typeName='tab.CommandExecutedEventArgs';global.tab.CommandExecutedEventArgs=bv;var bw=function(){this.templateString="<div class='ConditionalsWidget tab-ctrl-formatted-text'><div class='Conditional' dojoAttachPoint='domCondition'><span dojoAttachPoint='domConditionTitle' class='ConditionalTitle'>Condition</span><br/><span dojoAttachPoint='domConditionText'></span></div><div class='Conditional' dojoAttachPoint='domLimit'><span dojoAttachPoint='domLimitTitle' class='ConditionalTitle'>Limit</span><br/><span dojoAttachPoint='domLimitText'></span></div></div>";this.isContainer=false;this.domCondition=null;this.domConditionTitle=null;this.domConditionText=null;this.domLimit=null;this.domLimitTitle=null;this.domLimitText=null;Object.call(this)};bw.__typeName='tab.ConditionalsWidget';global.tab.ConditionalsWidget=bw;var bx=function(){};bx.__typeName='tab.ConfirmationCommandRedirectHandler';bx.$0=function(e){var L=$.Deferred();var hy=e['bQT'.toString()];var hz=$('<div>').append($('<div>').text(hy.E_S).css('white-space','pre-wrap'));var hA=hz.html();bz.showConfirmation(hA,function(hB){var hC=((hB==='confirm')?hy.MUY:hy.XNG);if(ss.isNullOrUndefined(hC)){L.resolve();return}var hD=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(hC).get_simpleCommand());tab.ServerCommands.executeServerCommand(hD,'immediately',tab.CommandUtils.createCommandRedirectSuccessHandler(L),function(){L.reject()})});return L.promise()};global.tab.ConfirmationCommandRedirectHandler=bx;var by=function(e){this.confirmViewModel=null;this.$g=null;this.$f=null;this.$e=null;ss.makeGenericType(spiff.BaseView$1,[bz]).call(this,e,spiff.Template.fromHtml("<div class='tabConfirmation'>"));this.confirmViewModel=e;this.confirmViewModel.add_shown(ss.mkdel(this,this.$d));this.confirmViewModel.add_hidden(ss.mkdel(this,this.$c));this.buildDom()};by.__typeName='tab.ConfirmationView';global.tab.ConfirmationView=by;var bz=function(){this.$5=null;this.$3=tab.Strings.ConfirmationButtonConfirm;this.$4=tab.Strings.ConfirmationButtonDeny;this.$8=tab.Strings.ConfirmationTitle;this.$6=true;this.$7=true;this.$a=false;this.$9=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this)};bz.__typeName='tab.ConfirmationViewModel';bz.create=function(e,L){var hy=new bz;hy.set_messageHtml(e);hy.disposeOnHide();hy.add_hidden(L);hy.disposables.add$1(new tab.CallOnDispose(function(){hy.remove_hidden(L)}));return hy};bz.showConfirmation=function(e,L){var hy=bz.create(e,L);hy.show()};bz.showNotification=function(e,L){var hy=bz.create(e,L);hy.set_showDenyButton(false);hy.set_confirmText(tab.Strings.DialogButtonOK);hy.show()};global.tab.ConfirmationViewModel=bz;var bA=function(e){tab.FontFamily.$ctor1.call(this,e,[])};bA.__typeName='tab.ConstructableFontFamily';global.tab.ConstructableFontFamily=bA;var bB=function(e,L,hy){this.$2=0;this.$1=null;this.$0=null;ss.EventArgs.call(this);this.$2=e;this.$1=L;this.$0=hy};bB.__typeName='tab.ContentFetchedEventArgs';global.tab.ContentFetchedEventArgs=bB;var bC=function(e){this.viewModel=null;ss.makeGenericType(spiff.BaseView$1,[bD]).call(this,e,new n);this.viewModel=e;this.get_template().get_domRoot().addClass(this.viewModel.get_sliderClassName())};bC.__typeName='tab.ContinuousSlider';global.tab.ContinuousSlider=bC;var bD=function(e){this.$6=null;this.$3=0;this.$4=0;this.$5=0;this.$7=0;this.$8='';this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$6=e;this.$3=e.get_currentFraction();this.$6.add_sliderFractionUpdated(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$6.remove_sliderFractionUpdated(ss.mkdel(this,this.$2))})));this.$5=200};bD.__typeName='tab.ContinuousSliderViewModel';global.tab.ContinuousSliderViewModel=bD;var bE=function(e){this.baseClass='currentPagePanel';this.templateString="<div dojoAttachPoint='containerNode' baseClass='currentPagePanel'><div dojoAttachPoint='_titlePane' style='border:0; float:left; width:100%; overflow:hidden;'></div><div dojoType='dijit.layout.SplitContainer' persist='false' dojoAttachPoint='innerWrapper' orientation='${cpOrientation}' sizerWidth='0' dragRestriction='true' activeSizing='false' style='float:left;'><div dojoType='dijit.layout.LayoutContainer' sizeShare='24' sizeMin='24' style='display:${display_dropdown};' dojoAttachPoint='buttonsContainer' ><button dojoAttachEvent='onClick:prevPage' dojoType='dijit.form.Button' layoutAlign='left' style='margin:0; margin-right:2px;' iconClass='dijitIcon cpLeftArrowBlack' showLabel='false' dojoAttachPoint='_leftBtn'></button><select dojoAttachEvent='onChange:onSelection' dojoType='tableau.base.widget.ui.iDropDownSelect' dojoAttachPoint='_dropdown' layoutAlign='client' autoWidth='true' minSize='100' hasDownArrow='true' popupExtraClass='${popupClass}'></select><button dojoAttachEvent='onClick:nextPage' dojoType='dijit.form.Button' layoutAlign='right' style='clear: left; margin:0; margin-left:2px;' iconClass='dijitIcon cpRightArrowBlack' showLabel='false' dojoAttachPoint='_rightBtn'></button></div><div dojoType='dijit.layout.ContentPane' sizeShare='24' sizeMin='24' style='display:${display_slider}; padding:6px 0 0 0; border:0; overflow:hidden;' dojoAttachPoint='sliderPane'><div dojoAttachEvent='onChange:onSliderChange' dojoType='dijit.form.HorizontalSlider' slideDuration='0'pageIncrement='1' minimum='0' maximum='${maximum}' discreteValues='${discrete_values}' intermediateChanges='false' showButtons='false'dojoAttachPoint='_slider'></div><div dojoAttachPoint='_horizontalRuleNode'></div></div></div><div dojoType='dijit.layout.ContentPane' dojoAttachPoint='_checkboxPane' style='padding:0; height:16px; width:110px; display:${display_toggle}; border:0; position:relative; float:left;'><input dojoAttachEvent='onChange:onCheckboxChange' dojoType='dijit.form.CheckBox' dojoAttachPoint='_showHistoryCb'/></div></div>";this.widgetsInTemplate=true;this._subscriptions=null;this.zid=0;this.sliderPane=null;this.show_toggle=false;this.show_dropdown=false;this.show_slider=false;this.sheetid=null;this.session=null;this.lTitle=null;this.titleHtml=null;this.isDashboard=false;this.pageViewModel=null;this.innerWrapper=null;this.cpHeight=0;this.buttonsContainer=null;this._started=false;this._slider=null;this._showHistoryCb=null;this._rightBtn=null;this._leftBtn=null;this._horizontalRuleNode=null;this._dropdown=null;this._checkboxPane=null;this.rid=0;this.timestamp=0;this._horizontalRule=null;this.oldSize=0;this.containerNode=null;this.titleSize=null;this.zoneTitleHeight=0;this.zoneTitleWidth=0;this._titlePane=null;this.pages=null;this.current_page=0;this.refreshed=false;this.enable=false;this.cpOrientation=null;this.display_dropdown=null;this.display_slider=null;this.display_toggle=null;this.maximum=0;this.discrete_values=0;this.show_ruler=null;this.ruler_count=0;this.popupClass=null;this.requestTimeout=null;this.rebuildLayoutTimeout=null;this.BUTTONS_HEIGHT=26;this.ONLY_BUTTONS=24;this.SLIDER_HEIGHT=22;this.ONLY_SLIDER=16;this.TOGGLE_HEIGHT=16;this.TOGGLE_WIDTH_OFFSET=90;this.RULE_OFFSET=5;this.DOM_OFFSET=4;this.WIDGET_SPACE=8;this.SCROLL_PAGES=14;Object.call(this)};bE.__typeName='tab.CurrentPagePanel';global.tab.CurrentPagePanel=bE;var bF=function(){this.customViewsArea=null;this.manageModeControlArea=null;this.myViewsTitle=null;this.myViewsListArea=null;this.otherViewsTitle=null;this.otherViewsListArea=null;this.myViewsListWrapper=null;this.otherViewsListWrapper=null;this.saveViewArea=null;spiff.Template.call(this,$("\n<div class='tab-customViewsView tab-toolbarFlyout'>\n    <div class='tab-cv-flyoutSection tab-customViews-saveView' />\n    <div class='tab-cv-flyoutSection tab-cv-myViews'>\n        <div class='tab-toolbarFlyoutTitle'/>\n        <div class='tab-cv-listWrapper'>\n            <div class='tab-cv-viewsList'/>\n        </div>\n    </div>\n    <div class='tab-cv-flyoutSection tab-cv-otherViews'>\n        <div class='tab-toolbarFlyoutTitle'/>\n        <div class='tab-cv-listWrapper'>\n            <div class='tab-cv-viewsList'/>\n        </div>\n    </div>\n    <div class='tab-cv-flyoutSection tab-cv-manageModeControls' />\n</div>"));this.customViewsArea=this.get_domRoot();this.manageModeControlArea=this.getElementBySelector('.tab-cv-manageModeControls');this.myViewsListArea=this.getElementBySelector('.tab-cv-myViews .tab-cv-viewsList');this.myViewsTitle=this.getElementBySelector('.tab-cv-myViews .tab-toolbarFlyoutTitle');this.otherViewsTitle=this.getElementBySelector('.tab-cv-otherViews .tab-toolbarFlyoutTitle');this.otherViewsListArea=this.getElementBySelector('.tab-cv-otherViews .tab-cv-viewsList');this.myViewsListWrapper=this.getElementBySelector('.tab-cv-myViews .tab-cv-listWrapper');this.otherViewsListWrapper=this.getElementBySelector('.tab-cv-otherViews .tab-cv-listWrapper');this.saveViewArea=this.getElementBySelector('.tab-customViews-saveView')};bF.__typeName='tab.CustomViewsTemplate';global.tab.CustomViewsTemplate=bF;var bG=function(e){this.$15=null;this.$14=null;this.$12=null;this.$X=null;this.$Y=null;this.$Z=null;this.$10={};this.$11=null;this.$W=null;this.$13=null;ss.makeGenericType(spiff.BaseView$1,[bH]).call(this,e,new bF);this.$a();this.get_viewModel().add_customViewListChanged(ss.mkdel(this,this.$P));this.get_viewModel().updateCustomizedViews(null,null)};bG.__typeName='tab.CustomViewsView';global.tab.CustomViewsView=bG;var bH=function(){this.$s=null;this.$p=bH.modeSelect;this.$q=[];this.$r=[];this.$l=null;this.$m=null;this.$n=null;this.$o=false;this.$t=[];this.hideView=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;spiff.BaseViewModel.call(this);this.$s=new tab.CustomizedViewSession(tab.CommandController.get().get_legacySession());if(tsConfig.allow_custom_views){tab.StartupUtils.callAfterBootstrap(ss.mkdel(this,function(){this.$5(null,null)}));this.$t.push(dojo.subscribe('modifiedSheetsChanged',ss.mkdel(this,this.$9)))}};bH.__typeName='tab.CustomViewsViewModel';bH.$0=function(e,L){return ss.compareStrings(e.name,L.name,true)};global.tab.CustomViewsViewModel=bH;var bI=function(e,L){this.dashboardNode=null;spiff.Template.call(this,$(e));if(L){this.dashboardNode=this.getElementBySelector('.tab-dashboard')}else{this.dashboardNode=this.get_domRoot()}};bI.__typeName='tab.DashboardTemplate';bI.newDashboardTemplate=function(){var e='';var L=false;if(tsConfig.current_sheet_type==='dashboard'&&tsConfig.is_authoring){e="<div class='tab-gutter'><div class='tab-dashboard'/></div>";L=true}else{e="<div class='tab-dashboard'/>"}return new bI(e,L)};global.tab.DashboardTemplate=bI;var bJ=function(e){this.$f=null;ss.makeGenericType(spiff.BaseView$1,[bK]).call(this,e,bI.newDashboardTemplate());this.$f=e;this.$f.add_formatsChanged(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_formatsChanged(ss.mkdel(this,this.$a))})));this.$f.add_newZone(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_newZone(ss.mkdel(this,this.$b))})));this.$f.add_vizRebuildStart(ss.mkdel(this,this.$d));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_vizRebuildStart(ss.mkdel(this,this.$d))})));this.$f.add_sizeChanged(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_sizeChanged(ss.mkdel(this,this.$c))})))};bJ.__typeName='tab.DashboardView';bJ.findDashboard=function(){return $('.tab-dashboard')};bJ.uniquefyClonedFilterRadioElements=function(e){var L=e.find('input:radio');for(var hy=0;hy<L.length;++hy){var hz=L[hy];var hA=ss.coalesce(hz.getAttribute('name'),'');hA+='_%%%CLONE%%%';hz.setAttribute('name',hA)}};global.tab.DashboardView=bJ;var bK=function(e){this.$p={};this.$m=null;this.$o=[];this.$n=null;this.viewControllersBySheet={};this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.gutterSize=0;spiff.BaseViewModel.call(this);this.gutterSize=tabBootstrap.ViewerBootstrap.get_instance().get_authoringGutterSize();this.$m=e;this.$m.get_zonesModel().add_newZone(ss.mkdel(this,this.$8));this.$m.add_newDashboard(ss.mkdel(this,this.$7));this.$m.add_activeZoneChanged(ss.mkdel(this,this.$6));this.$m.add_readyZoneChanged(ss.mkdel(this,this.$9));this.$l().add_stateChanged(ss.mkdel(this,this.$h));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$l().remove_stateChanged(ss.mkdel(this,this.$h))})));this.disposables.add$1(new tab.CallOnDispose(function(){tab.StyleUtil.clearDefaultStyleSheet()}));this.$m.add_renderModeChanged(ss.mkdel(this,this.$a));this.$m.add_sizeChanged(ss.mkdel(this,this.$g));this.$m.add_portSizeChanged(ss.mkdel(this,this.$f));this.$m.add_formatsChanged(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$m.remove_renderModeChanged(ss.mkdel(this,this.$a));this.$m.remove_sizeChanged(ss.mkdel(this,this.$g));this.$m.remove_portSizeChanged(ss.mkdel(this,this.$f));this.$m.remove_formatsChanged(ss.mkdel(this,this.$e))})));this.$2()};bK.__typeName='tab.DashboardViewModel';bK.new$1=function(e){return new bK(e)};global.tab.DashboardViewModel=bK;var bL=function(){this.$5=null;this.$9=null;this.$7=null;this.$8=null;this.$6=null;this.$1=null;this.$2=null;this.$4=null;this.$3=null;spiff.Template.call(this,$("\n<div class='tabDataConnectionPrompt'>\n    <div class='tabDataConnPromptCtrlArea'>\n        <div class='tabDataConnPromptVarListArea'>\n            <div class='tabDataConnPromptVarListInstr'/>\n            <div class='tabDataConnPromptVarListHeader'>\n                <span class='tabDataConnPromptVarListHeaderName'/>\n                <span class='tabDataConnPromptVarListHeaderValue'/>\n            </div>\n            <div class='tabDataConnPromptVarListContainer'/>\n        </div>\n        <div class='tabDataConnPromptEditArea'>\n            <div class='tabDataConnPromptEditTitle'/>\n            <div class='tabDataConnPromptEditInstr'/>\n        </div>\n    </div>\n    <div class='tabDataConnPromptBtnArea'/>\n</div>"));this.$5=this.getElementBySelector('.tabDataConnPromptVarListArea');this.$9=this.getElementBySelector('.tabDataConnPromptVarListInstr');this.$7=this.getElementBySelector('.tabDataConnPromptVarListHeaderName');this.$8=this.getElementBySelector('.tabDataConnPromptVarListHeaderValue');this.$6=this.getElementBySelector('.tabDataConnPromptVarListContainer');this.$1=this.getElementBySelector('.tabDataConnPromptBtnArea');this.$2=this.getElementBySelector('.tabDataConnPromptEditArea');this.$4=this.getElementBySelector('.tabDataConnPromptEditTitle');this.$3=this.getElementBySelector('.tabDataConnPromptEditInstr')};bL.__typeName='tab.DataConnectionPromptTemplate';global.tab.DataConnectionPromptTemplate=bL;var bM=function(e){this.$j=null;this.$g=null;this.$h=null;this.$i=null;ss.makeGenericType(spiff.BaseView$1,[bN]).call(this,e,new bL);var L=this.get_viewModel();L.variableFirstEdited=ss.delegateCombine(L.variableFirstEdited,ss.mkdel(this,this.$b));var hy=this.get_viewModel();hy.variableInEditDeleted=ss.delegateCombine(hy.variableInEditDeleted,ss.mkdel(this,this.$c));var hz=this.get_viewModel();hz.contentChanged=ss.delegateCombine(hz.contentChanged,ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){var hA=this.get_viewModel();hA.variableFirstEdited=ss.delegateRemove(hA.variableFirstEdited,ss.mkdel(this,this.$b));var hB=this.get_viewModel();hB.variableInEditDeleted=ss.delegateRemove(hB.variableInEditDeleted,ss.mkdel(this,this.$c));var hC=this.get_viewModel();hC.contentChanged=ss.delegateRemove(hC.contentChanged,ss.mkdel(this,this.$e))})));this.$j=spiff.ObjectRegistry.newView(bT).call(null,[this.get_viewModel().get_variableListViewModel()]);this.$d()};bM.__typeName='tab.DataConnectionPromptView';global.tab.DataConnectionPromptView=bM;var bN=function(e){this.$6=null;this.$4=null;this.$5=null;this.variableFirstEdited=null;this.variableInEditDeleted=null;this.contentChanged=null;this.promptUpdated=null;spiff.BaseViewModel.call(this);this.$4=e;this.$6=new bU(this.$4);this.promptUpdated=ss.delegateCombine(this.promptUpdated,ss.mkdel(this,this.$2));var L=this.get_variableListViewModel();L.selectedVariableChanged=ss.delegateCombine(L.selectedVariableChanged,ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.promptUpdated=ss.delegateRemove(this.promptUpdated,ss.mkdel(this,this.$2));var hy=this.get_variableListViewModel();hy.selectedVariableChanged=ss.delegateRemove(hy.selectedVariableChanged,ss.mkdel(this,this.$3))})))};bN.__typeName='tab.DataConnectionPromptViewModel';global.tab.DataConnectionPromptViewModel=bN;var bO=function(e,L,hy){this.$4=null;this.$3=null;this.$2=false;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$4=e;this.$3=L;this.$2=hy};bO.__typeName='tab.DataConnectionVariableDisplayViewModel';global.tab.DataConnectionVariableDisplayViewModel=bO;var bP=function(e){this.$k=null;this.$j=null;this.$l=null;ss.makeGenericType(spiff.BaseView$1,[bQ]).call(this,e,new g);this.$k=new spiff.ComboBoxViewModel;this.$j=new spiff.ComboBoxViewModel;this.$l=new spiff.ComboBoxViewModel;this.$k.add_selectedItemChanged(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$k.remove_selectedItemChanged(ss.mkdel(this,this.$b))})));this.$j.add_selectedItemChanged(ss.mkdel(this,this.$a));this.$l.add_selectedItemChanged(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$j.remove_selectedItemChanged(ss.mkdel(this,this.$a));this.$l.remove_selectedItemChanged(ss.mkdel(this,this.$c))})));this.$i().$9().blur(ss.mkdel(this,function(L){this.$d()}));this.$i().$9().keyup(ss.mkdel(this,this.$e));this.get_viewModel().add_contentUpdated(ss.mkdel(this,this.$f));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_contentUpdated(ss.mkdel(this,this.$f))})));this.$9();this.$f()};bP.__typeName='tab.DataConnectionVariableEditView';global.tab.DataConnectionVariableEditView=bP;var bQ=function(e,L,hy,hz,hA){this.$4=null;this.$3=null;this.$2=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this);this.$4=e;this.$3=L;this.$2=hy;this.set_fromLabel(hz);this.set_toLabel(hA)};bQ.__typeName='tab.DataConnectionVariableEditViewModel';global.tab.DataConnectionVariableEditViewModel=bQ;var bR=function(){this.$2=null;this.$3=null;this.$1=null;spiff.Template.call(this,$("\n<span class='tabDataConnPromptVarListItem'>\n    <div class='tabDataConnPromptVarName tabDataConnPromptVarListItemCell'/>\n    <div class='tabDataConnPromptVarValue tabDataConnPromptVarListItemCell'/>\n    <div class='tabDataConnPromptDeleteVarBtnArea'/>\n</span>"));this.$2=this.getElementBySelector('.tabDataConnPromptVarName');this.$3=this.getElementBySelector('.tabDataConnPromptVarValue');this.$1=this.getElementBySelector('.tabDataConnPromptDeleteVarBtnArea')};bR.__typeName='tab.DataConnectionVariableListItemTemplate';global.tab.DataConnectionVariableListItemTemplate=bR;var bS=function(e){ss.makeGenericType(spiff.BaseView$1,[bO]).call(this,e,new bR)};bS.__typeName='tab.DataConnectionVariableListItemView';global.tab.DataConnectionVariableListItemView=bS;var bT=function(e){this.$j=null;this.$f=null;this.$i=null;this.$h=null;this.$g=null;ss.makeGenericType(spiff.BaseView$1,[bU]).call(this,e,new gX);var L=this.get_viewModel();L.contentChanged=ss.delegateCombine(L.contentChanged,ss.mkdel(this,this.$d));var hy=this.get_viewModel();hy.selectedVariableChanged=ss.delegateCombine(hy.selectedVariableChanged,ss.mkdel(this,this.onSelectedVariableChanged));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){var hz=this.get_viewModel();hz.contentChanged=ss.delegateRemove(hz.contentChanged,ss.mkdel(this,this.$d));var hA=this.get_viewModel();hA.selectedVariableChanged=ss.delegateRemove(hA.selectedVariableChanged,ss.mkdel(this,this.onSelectedVariableChanged))})))};bT.__typeName='tab.DataConnectionVariableListView';global.tab.DataConnectionVariableListView=bT;var bU=function(e){this.$7=null;this.$5=null;this.$8=null;this.$6=null;this.contentChanged=null;this.selectedVariableChanged=null;this.variableAdded=null;spiff.BaseViewModel.call(this);this.$5=e;this.$6=_.map(this.$5.get_connectionVariables(),function(L){return new bV(L)});this.$7=new spiff.ListViewModel(this.$4(),0);this.$7.add_selectionChanged(ss.mkdel(this,this.$3))};bU.__typeName='tab.DataConnectionVariableListViewModel';global.tab.DataConnectionVariableListViewModel=bU;var bV=function(e){this.$2=null;this.$4=null;this.$3=null;spiff.BaseViewModel.call(this);this.$2=e;_.each(this.$4,function(L){L.dispose()});this.$4=_.map(this.$2.get_values(),ss.mkdel(this,function(L){return new bO(this.$2,L,false)}));this.$3=new bO(this.$2,this.$2.get_defaultValue(),true)};bV.__typeName='tab.DataConnectionVariableViewModel';global.tab.DataConnectionVariableViewModel=bV;var bW=function(e,L){this.dataHighlighterViewModel=null;this.$g=null;this.$h=null;this.dataHighlighterViewjQueryObject=null;this.zoneTitleRegionJQueryObject=null;this.$k=null;this.queryDelayTimer=null;this.lastSatisfiedSearchResults=null;this.lastSatisfiedSearchTerm=null;this.$i=null;this.currentSearchResultIDs=null;this.showingSearchPlaceholderText=false;this.currentListPopulationMode=0;this.$j=false;ss.makeGenericType(spiff.BaseView$1,[bY]).call(this,e,L);this.dataHighlighterViewModel=e;this.$g=spiff.ObjectRegistry.newWidget(spiff.CompositeSearchWidget).call(null);this.dataHighlighterViewjQueryObject=L.get_domRoot().find('.tabDataHighlighterView');this.zoneTitleRegionJQueryObject=L.get_domRoot().find('.tab-zone-titleregion');this.$h=L.searchControlsContainer;this.$g.get_textInputView().addToDom(this.$h);this.$g.get_searchButton().addToDom(this.$h);this.$g.get_clearButton().addToDom(this.$h);this.$g.get_textInputView().get_inputElement().on('select',ss.thisFix(ss.mkdel(this,this.handleSelectChanged)));var hy=this.get_compositeSearchWidget();var hz=new spiff.CompositeSearchWidgetInitialSearchTextInfo;hz.initialSearchText=this.get_viewModel().get_searchPlaceholderString();hz.initialSearchTextDomClassName='tabDataHighlighterViewInitialText';hy.initialSearchTextInfo=hz;this.get_compositeSearchWidget().showInitialSearchText(true);this.get_compositeSearchWidget().get_textInputView().add_propertyChanged(ss.mkdel(this,this.$9));this.get_compositeSearchWidget().add_isShowingInitialSearchTextChanged(ss.mkdel(this,this.handleInitialSearchTextStateChange));this.get_compositeSearchWidget().add_textInputElementClicked(ss.mkdel(this,this.handleTextInputElementClicked));this.get_compositeSearchWidget().add_textInputClearButtonClicked(ss.mkdel(this,this.handleTextInputCleared));this.dataHighlighterViewModel.add_receivedSearchQueryResults(ss.mkdel(this,this.handleNewSearchQueryResults));this.dataHighlighterViewModel.add_titleChanged(ss.mkdel(this,this.handleTitleChanged));this.get_compositeSearchWidget().get_textInputView().get_inputElement().focusin(ss.mkdel(this,this.$a));this.get_compositeSearchWidget().get_textInputView().get_inputElement().focusout(ss.mkdel(this,this.$b));this.get_compositeSearchWidget().get_textInputView().get_inputElement().mouseup(ss.mkdel(this,this.$c));this.setTitleFromModel();this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_compositeSearchWidget().removeList();this.get_compositeSearchWidget().get_textInputView().remove_propertyChanged(ss.mkdel(this,this.$9));this.get_compositeSearchWidget().remove_isShowingInitialSearchTextChanged(ss.mkdel(this,this.handleInitialSearchTextStateChange));this.get_compositeSearchWidget().remove_textInputElementClicked(ss.mkdel(this,this.handleTextInputElementClicked));this.get_compositeSearchWidget().remove_textInputClearButtonClicked(ss.mkdel(this,this.handleTextInputCleared));this.dataHighlighterViewModel.remove_receivedSearchQueryResults(ss.mkdel(this,this.handleNewSearchQueryResults));this.dataHighlighterViewModel.remove_titleChanged(ss.mkdel(this,this.handleTitleChanged));this.$e()})))};bW.__typeName='tab.DataHighlighterView';global.tab.DataHighlighterView=bW;var bX=function(){};bX.__typeName='tab.DataHighlighterView$ListPopulationMode';global.tab.DataHighlighterView$ListPopulationMode=bX;var bY=function(e,L,hy){this.$3=null;this.$5=null;this.$6=null;this.$4=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$3=e;this.$5=L;this.$4=hy;if(ss.isValue(this.$4)){if(ss.isValue(this.$4.get_model().pm)){this.$6=this.$4.get_model().pm.KDk}this.$4.add_updateZone(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$4.remove_updateZone(ss.mkdel(this,this.$2))})))}};bY.__typeName='tab.DataHighlighterViewModel';global.tab.DataHighlighterViewModel=bY;var bZ=function(){this.searchControlsContainer=null;spiff.Template.call(this,$("\n            <div class='tabDataHighlighterContainer'>\n                <div class='tab-zone-titleregion'/>\n                <div class='tabDataHighlighterView'>\n                    <div class='tabDataHighlighterView-searchControlsContainer'/>\n                </div>\n            </div>"));this.searchControlsContainer=this.getElementBySelector('.tabDataHighlighterView-searchControlsContainer')};bZ.__typeName='tab.DataHighlighterViewTemplate';global.tab.DataHighlighterViewTemplate=bZ;var ca=function(e,L){this.$0=null;W.call(this,e,L);this.$0=new cr(tab.Strings.AuthenticationRequired,e.RedirectUrl,'dse-frame')};ca.__typeName='tab.DataSourceConnectionErrorDialog';global.tab.DataSourceConnectionErrorDialog=ca;var cb=function(e){this.$x=null;this.$y=null;fa.call(this);this.$y=new Module.DataStore(new Module.RString(e));var L=this.$y.getKeyMap();this.$x=cb.$3(L)};cb.__typeName='tab.DataStorePaneDrawInfo';cb.$ctor1=function(e,L,hy,hz,hA,hB,hC){this.$x=null;this.$y=null;fa.call(this);this.paneMarks=hz;var hD=L.get_scene().Xmx;hD=ss.replaceAllString(hD,',"PresModel:x:VisualListPresModelExternal":"VisualListPresModel can\'t be serialized."','');this.$y=new Module.DataStore(new Module.RString(hD));var hE=this.$y.getKeyMap();this.$x=cb.$3(hE);this.pdiKeyStr=hC;this.shouldForceOpaqueColors=false;this.pdMarksKey=e;this.columns={};this.sceneInfo=L;this.paneMarks=this.$w();this.numMarks=fa.getNumPaneItems(this.paneMarks);var hF=this.$x['Panes'];var hG=hF[0];var hH=cb.$7(hG['Rect']);this.paneRectXY=tab.RecordCast.rectPresModelAsRectXY(hH);this.paneColumnIndex=hG['Column'];this.paneRowIndex=hG['Row'];var hI=this.$x['PDMarks'];var hJ='';var hK=ss.getEnumerator(Object.keys(hI));try{while(hK.moveNext()){var hL=hK.current();hJ=hL;break}}finally{hK.dispose()}var hM=cb.$5(hI[hJ]);this.domainExtents=fa.getDomainExtents(hy);this.markTypeValue=hM.tx;this.set_paneFlags(hM.LTd['pane_flags']);this.populateColumns(hM);this.hasPixelGeometry=this.scaleMarksInX&&this.scaleMarksInY;var hN=tab.ColorModel.fromArgbInt(hM.LTd['background_color']);this.fogBlendFactorValue=fx.getFogBlendFactor(hN);this.foggedBackgroundColorValue=fx.applyFogToBackgroundColor(hN,this.fogBlendFactorValue);this.convertMapData(this.columns);this.processColors(hB);this.drawBorder=ss.keyExists(this.columns,'draw_border')&&this.columns['draw_border'][0];if(this.markTypeValue==='line'||this.markTypeValue==='area'){this.prepareLeftRight()}if(this.markTypeValue==='line'){this.ensureLinePixelAlignment()}this.parseTextInfo(hM,false);if(ss.isValue(this.paneRectXY)&&ss.isValue(this.paneRectXY.w)&&ss.isValue(this.domainExtents)&&ss.isValue(this.domainExtents.w)&&this.domainExtents.w!==0){this.worldWidth=this.paneRectXY.w/this.domainExtents.w}this.clipCase=this.calcCellClip();this.mapExtentsRect=fa.buildMapExtentsRect(hz,this.domainExtents,this.paneRectXY);this.setupBoundingBoxes();this.setupCustomShapePositions();if(this.markTypeValue==='shape'){if(tab.FeatureFlags.isEnabled('FastRendering')){this.setupShapeMarkStampingMap()}else{this.shapeMarkStampingDecision=null}}this.buildTupleLookup();this.setUserPaneInfo(L.$r)};cb.$7=function(e){var L={};L.thj=e['Left'];L.RAC=e['Top'];L.rec=e['width'];L.EUR=e['height'];return L};cb.$1=function(e){var L={};L.BPK=e['Left'];L.KEc=e['Top'];L.POJ=e['width'];L.suk=e['height'];return L};cb.$8=function(e){var L=['standard','oo-stacked','gantt-stacked','treemap','bubble','wordle','highlight'];return L[e]};cb.$6=function(e){var L=['shape','line','polar-bar','text','label','pie','area','polygon','multipolygon','square'];return L[e]};cb.$5=function(e){var L={};L.tx=cb.$6(e['MarkType']);L.gUy=cb.$8(e['VizType']);L.HDS={};L.LTd={};L.DTe={};var hy=ss.getEnumerator(Object.keys(e));try{while(hy.moveNext()){var hz=hy.current();if(hz!=='MarkType'&&hz!=='VizType'&&hz!=='Encodings'){if(ss.getTypeFullName(ss.getInstanceType(e[hz]))==='Boolean'){L.HDS[hz]=e[hz]}else if(ss.getTypeFullName(ss.getInstanceType(e[hz]))==='Number'){var hA=e[hz];if(hA%1===0){L.LTd[hz]=e[hz]}else{L.DTe[hz]=e[hz]}}}}}finally{hy.dispose()}L.GKA=cb.$2(e['Encodings']);return L};cb.$2=function(e){var L={};var hy=ss.getEnumerator(Object.keys(e));try{while(hy.moveNext()){var hz=hy.current();var hA=e[hz];if(hA.length>0){var hB={};hB.tbM=cb.$0(hA);hB.KSc={};hB.KSc.dMo='';hB.KSc.Lox=0;hB.uBu=new Array(hA.length);for(var hC=0;hC<hA.length;++hC){hB.uBu[hC]=hA[hC]}L[hz]=hB}}}finally{hy.dispose()}return L};cb.$3=function(e){var L=e.getKeyValuePairs();var hy={};for(var hz=L.begin();hz.notEqualTo(L.end());hz.increment()){hy[hz.getFirst().toStdString()]=cb.$4(hz.getSecond())}return hy};cb.$4=function(e){var L=null;var hy=e.getStoreType();switch(hy.value){case 0:{L=e.asBool();break}case 1:{L=e.asInt32();break}case 3:{L=e.asReal32();break}case 4:{L=e.asReal64();break}case 8:{L=e.asColor().asInt32();break}case 11:{{var hz=e.asUniformCollection();var hA=hz.count();var hB=hz.getStoreValues();var hC=[hA];var hD=0;for(var hE=hB.begin();hE.notEqualTo(hB.end());hE.increment()){hC[hD]=cb.$4(hE.deref());++hD}L=hC}break}case 13:case 15:{{L=cb.$3(e.asDictionary())}break}case 14:{{var hF=e.asTuple();var hG=hF.getCount();var hH=[hG];for(var hI=0;hI<hG;++hI){hH[hI]=cb.$4(hF.getNth(hI))}L=hH}break}case 16:{{var hJ=e.asTable();var hK=hJ.getColumns();var hL={};for(var hM=hK.begin();hM.notEqualTo(hK.end());hM.increment()){hL[hM.getFirst().toStdString()]=cb.$4(hM.getSecond())}L=hL}break}}return L};cb.$0=function(e){var L='unknown';var hy=ss.getInstanceType(e);if(ss.getTypeFullName(hy)==='Float32Array'){L='real'}else if(ss.getTypeFullName(hy)==='Int32Array'){L='integer'}else{L='cstring'}return L};global.tab.DataStorePaneDrawInfo=cb;var cc=function(){this.firstPeriod=0;this.lastPeriod=0;this.isFutureIncluded=true;this.periodType=null;this.anchorDateTime=null;this.fy=0;this.startOfWeek=1;this._applyTimer=null;this.domPreview=null;this.textLast=null;this.textCurr=null;this.textNext=null;this.textLastn1=null;this.textLastn2=null;this.textNextn1=null;this.textNextn2=null;this.textTodate=null;this.rangeType=null;this.radioTodate=null;this.rangeN=0;this.UPDATE_DELAY=800;this.inputLastn=null;this.lowestAllowedDate=new Date(1753,0,1);this.highestAllowedDate=new Date(9999,11,31);dY.call(this)};cc.__typeName='tab.DateFilterWidget';global.tab.DateFilterWidget=cc;var cd=function(e){this.$q=0;this.$C=null;this.$y=null;this.$r=null;this.$p=null;this.$B=null;this.$u=null;this.$v=null;this.$s=null;this.$t=null;this.$x=null;this.$A=null;this.$z=null;this.$w=null;this.$E=null;this.$D=null;this.$F=false;spiff.Widget.call(this,$('<span>'));this.$q=e.firstDayOfWeek;this.$C=e.shortDayOfWeekNames;this.$D=e.todayFormatTemplate;this.$y=e.monthYearFormatter;this.$r=e.fullDateFormatter;this.$F=false;var L=new Date;this.$p=cd.$4(cd.$2(e.monthToShow)||L);this.$B=cd.$2(e.dateToSelect);this.setDateRange(e.minDate,e.maxDate);this.get_element().addClass('tab-datepicker');this.$d().appendTo(this.get_element());var hy=$('<div>').addClass('tab-datepicker-month-table-wrapper').append($('<div>').addClass('tab-datepicker-week-shade')).append(this.$e());hy.appendTo(this.get_element());this.$c().appendTo(this.get_element());this.get_element().mousedown(function(hz){hz.preventDefault();hz.stopPropagation()});this.$l()};cd.__typeName='tab.DatePicker';cd.$2=function(e){return(!!e?new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()):null)};cd.$3=function(e){return(!!e?new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())):null)};cd.$4=function(e){return(!!e?new Date(e.getFullYear(),e.getMonth(),1):null)};cd.$1=function(e,L,hy,hz){if(e+L>hz){e=hz-L;if(e<hy){e+=Math.ceil((hy-e)/2)}}return e};cd.$0=function(e,L){return(e+L+14)%7};cd.$5=function(e,L){return e.getFullYear()===L.getFullYear()&&e.getMonth()===L.getMonth()&&e.getDate()===L.getDate()};global.tab.DatePicker=cd;var ce=function(e,L,hy,hz,hA,hB,hC,hD,hE){this.monthToShow=null;this.dateToSelect=null;this.minDate=null;this.maxDate=null;this.firstDayOfWeek=0;this.shortDayOfWeekNames=null;this.todayFormatTemplate=null;this.monthYearFormatter=null;this.fullDateFormatter=null;this.monthToShow=(ss.isNullOrUndefined(e)?null:new Date(e.getTime()));this.dateToSelect=(ss.isNullOrUndefined(L)?null:new Date(L.getTime()));this.minDate=(ss.isNullOrUndefined(hy)?null:new Date(hy.getTime()));this.maxDate=(ss.isNullOrUndefined(hz)?null:new Date(hz.getTime()));this.firstDayOfWeek=ss.coalesce(hA,0);this.shortDayOfWeekNames=(ss.isNullOrUndefined(hB)?['S','M','T','W','T','F','S']:ss.arrayClone(hB));this.todayFormatTemplate=(ss.isNullOrUndefined(hC)?'Today: {0}':hC);this.monthYearFormatter=(ss.isNullOrUndefined(hD)?function(hF){return ss.localeFormatDate(cd.$2(hF),'MMMM yyyy')}:hD);this.fullDateFormatter=(ss.isNullOrUndefined(hE)?function(hF){return ss.localeFormatDate(cd.$2(hF),'MMMM d, yyyy')}:hE)};ce.__typeName='tab.DatePickerSettings';global.tab.DatePickerSettings=ce;var cf=function(){dijit.DialogUnderlay.call(this)};cf.__typeName='tab.DialogUnderlay';global.tab.DialogUnderlay=cf;var cg=function(){};cg.__typeName='tab.DisabledTooltipBehavior';global.tab.DisabledTooltipBehavior=cg;var ch=function(e,L){bb.call(this,e,L)};ch.__typeName='tab.DisplayList2DRenderer';ch.setTextProperties=function(e,L,hy){e.set_textFillStyle(L.YhU);var hz=new ss.StringBuilder;if(L.BxQ==='font-style-italic'){hz.append('italic ')}if(L.cjf==='font-weight-bold'){hz.append('bold ')}if(ss.isValue(L.zwp)&&L.zwp==='text-decoration-underline'){e.set_shouldUnderlineText(true)}if(ss.isNullOrUndefined(hy)||hy<=0){hy=L.Qvi}hz.append(hy+"pt '"+L.sGS+"'");e.set_font(hz.toString());e.set_textBaseline(cL.$1(L.Uec))};ch.$0=function(e,L){var hy=L;e.set_textFillStyle(tab.ColorModel.convertColorForCanvas(hy.YhU));if(ss.isValue(hy.FYO)){var hz=hy.FYO*Math.PI/180;e.set_textAngle(hz)}else{e.set_textAngle(0)}var hA=new ss.StringBuilder;if(hy.QRh){hA.append('italic ')}if(hy.xjH){hA.append('bold ')}if(hy.eXK){}var hB=gg.defaultTextAlign;if(e.get_isTextAngleHorizontal()){var hC=hy.nsE||'h-align-left';if(hC==='h-align-right'){hB='end'}}else{var hD=hy.$Q||'v-align-top';if(e.get_textAngle()<0&&hD==='v-align-top'||e.get_textAngle()>0&&hD==='v-align-bottom'){hB='end'}}e.set_textAlign(hB);e.set_shouldUnderlineText(hy.hhs||false);var hE=hy.sGS||'Arial';var hF=hy.pmz||8;hA.append(hF+"pt '"+hE+"'");e.set_font(hA.toString())};ch.$1=function(e,L,hy){var hz=L;if(hz.WzG.length!==4){return}var hA=hz.WzG[2]-hz.WzG[0];var hB=hz.WzG[3]-hz.WzG[1];var hC=hz.WzG[0]+hA/2;var hD=hz.WzG[1]+hB/2;var hE=((hA<hB)?hA:hB)/2;var hF=((hA<hB)?1:(hA/hB));var hG=((hB<hA)?1:(hB/hA));e.save();e.beginPath();e.translate(hC,hD);e.scale(hF,hG);e.arc(0,0,hE,0,bb.twoPI,false);e.closePath();if(hy){e.fill()}else{e.stroke()}e.restore()};ch.$2=function(e,L,hy){var hz=L.xCr;if(!hy&&Math.round(e.get_lineWidth())%2===1){hz=ss.arrayClone(hz);for(var hA=0,hB=hz.length;hA<hB;++hA){hz[hA]+=0.5}}var hC=L.Dpc;var hD=Math.floor(hz.length/2);if(hD<2){return}e.beginPath();var hE=0;for(var hF=0;hF<hC.length;hF++){var hG=hC[hF];switch(hG){case'moveto':{{e.moveTo(hz[hE],hz[hE+1]);hE+=2}break}case'lineto':{{e.lineTo(hz[hE],hz[hE+1]);hE+=2}break}case'curveto':{{e.bezierCurveTo(hz[hE],hz[hE+1],hz[hE+2],hz[hE+3],hz[hE+4],hz[hE+5]);hE+=6}break}default:{{}break}}}if(hy){e.fill()}else{e.stroke()}};ch.$4=function(e){switch(e.VzB){case'Osj':case'nuS':case'uXb':case'$OC':case'MqA':case'jp$':case'nfx':case'mpa':case'eTm':{return true}}return false};ch.$5=function(e,L){if(!L){return e}var hy=ch.$3(e);if(hy.length===0){return e}var hz=ss.arrayClone(e);var hA=function(hF,hG){var hH=hz[hF];hz[hF]=hz[hG];hz[hG]=hH};for(var hB=0;hB<hy.length;hB++){var hC=hy[hB];for(var hD=0;hD<ss.Int32.div(hC.length,2);++hD){var hE=hC.length-1-hD;hA(hC[hD].item1,hC[hE].item1);hA(hC[hD].item2,hC[hE].item2)}}return hz};ch.$3=function(e){var L=[];var hy=-99999999;var hz=false;var hA=-1;var hB=[];for(var hC=0;hC<e.length;hC++){var hD=e[hC];if(hD.VzB==='MqA'){var hE=hD;hz=ss.isValue(hE.nsE)&&hE.nsE==='h-align-right';hA=hC}else if(hz&&hD.VzB==='ADd'){var hF=hD;var hG=hF.WzG[1];if(hG!==hy){if(hB.length>=2){L.push(hB)}hB=[]}hB.push({item1:hA,item2:hC});hy=hG}}if(hB.length>=2){L.push(hB)}return L};global.tab.DisplayList2DRenderer=ch;var ci=function(){};ci.__typeName='tab.DisplayList2DUtils';ci.rectXYFromDrawRect=function(e){return{x:e[0],y:e[1],w:e[2]-e[0],h:e[3]-e[1]}};global.tab.DisplayList2DUtils=ci;var cj=function(){};cj.__typeName='tab.DojoCommonDialogProvider';cj.$0=function(e){spiff.Widget.enableTextSelectionOnElement($(e.containerNode))};global.tab.DojoCommonDialogProvider=cj;var ck=function(){};ck.__typeName='tab.DojoWidgets';ck.$0=function(){dojo.require('tableau.base.BaseClient');var e=null;e=[dijit._Widget];dojo.declare('tableau.base.widget.LegacyQuickFilterWidget',e,dY.prototype);e=[tableau.base.widget.LegacyQuickFilterWidget];dojo.declare('tableau.base.widget.DateFilterWidget',e,cc.prototype);e=[tableau.base.widget.LegacyQuickFilterWidget,dijit._Contained,dijit._Templated];dL.prototype['templateString']="<div class='CategoricalFilter'><div class='CategoricalFilterBox' dojoAttachPoint='domBox'><div class='TitleAndControls' dojoAttachPoint='domControls'><div class='FilterTitle' dojoAttachPoint='domTitleBar'></div><div dojoType='dijit.form.Button' class='CFButton CFResetButton' showlabel='false'dojoAttachPoint='resetButton' dojoAttachEvent='onClick:toggleReset'iconClass='wcIconNonfiltered'>Showing all values</div><div dojoType='dijit.form.Button' class='CFButton CFSearchButton' showlabel='false'dojoAttachPoint='searchButton' dojoAttachEvent='onClick:toggleSearchUI'iconClass='wcIconSearch'>Search</div><div dojoType='dijit.form.Button' class='CFButton CFDomainButton' showlabel='false'dojoAttachPoint='domainButton' dojoAttachEvent='onClick:toggleDomain'iconClass='wcIconDomainAll'>Show Fewer Values</div><div dojoType='dijit.form.Button' dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'class='CFButton CFMenuButton' dojoAttachPoint='menuButton' name='type'></div></div><div dojoAttachPoint='searchDiv'></div><div class='CFContent' dojoAttachPoint='domContent'></div><div class='CFHorizScroll' dojoAttachPoint='domHorizScroll' dojoAttachEvent='onscroll:doscrollHoriz'><div dojoAttachPoint='domHorizScrollContent'></div></div><div dojoType='tableau.base.widget.ConditionalsWidget' dojoAttachPoint='conditionals'></div></div></div>";dojo.declare('tableau.base.widget.LegacyCategoricalQuickFilter',e,dL.prototype);e=[dijit._Widget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.ConditionalsWidget',e,bw.prototype);e=[dijit.layout._LayoutWidget,dijit._Templated];dojo.declare('tableau.base.widget.TabbedNavigation',e,gc.prototype);e=[dijit.layout._LayoutWidget,dijit._Templated];dojo.declare('tableau.base.widget.CurrentPagePanel',e,bE.prototype);dojo.declare('tableau.base.widget.catmode.BaseMode',[dijit._Contained],Z.prototype);dojo.declare('tableau.base.widget.catmode.Checklist',[tableau.base.widget.catmode.BaseMode],bq.prototype);dojo.declare('tableau.base.widget.catmode.BaseDropdown',[tableau.base.widget.catmode.BaseMode],X.prototype);dojo.declare('tableau.base.widget.catmode.SimpleDropdown',[tableau.base.widget.catmode.BaseDropdown],fN.prototype);dojo.declare('tableau.base.widget.catmode.CheckDropdown',[tableau.base.widget.catmode.BaseDropdown],bp.prototype);dojo.declare('tableau.base.widget.catmode.Pattern',[tableau.base.widget.catmode.BaseMode],eU.prototype);dojo.declare('tableau.base.widget.catmode.Slider',[tableau.base.widget.catmode.BaseMode],fS.prototype);dojo.declare('tableau.base.widget.catmode.TypeIn',[tableau.base.widget.catmode.BaseMode],gO.prototype);dojo.declare('tableau.base.widget.catmode.Radiolist',[tableau.base.widget.catmode.BaseMode],fj.prototype);dojo.declare('tableau.base.widget.ui.iDropDownSelect',[dojox.form.DropDownSelect],dj.prototype);dojo.declare('tableau.base.widget.ui.Slider',[],fR.prototype);dojo.declare('tableau.base.widget.ui.TypeIn',[],gN.prototype);dojo.declare('tableau.base.widget.ui.TypeInDateField',[gN],gP.prototype);dojo.declare('tableau.base.widget.ui.onClickOverride',null,ev.prototype);dojo.declare('tableau.base.widget.ui.iMenuItem',[dijit.MenuItem,ev],gT.prototype);dojo.declare('tableau.base.widget.ui.iCheckedMenuItem',[dijit.CheckedMenuItem,ev],gS.prototype);dojo.declare('tableau.base.widget.hsm.TreeModel',null,gM.prototype);dojo.declare('tableau.base.widget.hsm.Tree',[dijit.Tree],gK.prototype);dojo.declare('tableau.base.widget.hsm._TreeNode',[dijit._TreeNode],gL.prototype);e=[tableau.base.widget.LegacyQuickFilterWidget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.LegacyHierarchicalQuickFilter',e,dO.prototype);e=[tableau.base.widget.LegacyQuickFilterWidget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.LegacyQuantitativeQuickFilter',e,dU.prototype);e=[tableau.base.widget.DateFilterWidget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.LegacyRelativeDateQuickFilter',e,dZ.prototype);e=[tableau.base.widget.LegacyQuickFilterWidget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.RelativeDatePickFilter',e,fu.prototype);e=[tableau.base.widget.LegacyQuantitativeQuickFilter];dojo.declare('tableau.base.widget.LegacyQuantitativeDateQuickFilter',e,dT.prototype);e=[dijit._Widget,dijit._Templated];eK.prototype['templateString']="<div class='ParameterControl'><div class='ParameterControlBox' dojoAttachPoint='domBox'><div class='TitleAndControls' dojoAttachPoint='domControls'><div class='ParamTitle' dojoAttachPoint='domTitleBar'></div></div><div class='PCContent' dojoAttachPoint='domContent'></div></div></div>";dojo.declare('tableau.base.widget.ParameterControl',e,eK.prototype);dojo.declare('tableau.base.widget.paramui.Base',[dijit._Contained],eO.prototype);dojo.declare('tableau.base.widget.paramui.TypeIn',[tableau.base.widget.paramui.Base],eS.prototype);dojo.declare('tableau.base.widget.paramui.TypeInDateField',[tableau.base.widget.paramui.Base],eT.prototype);dojo.declare('tableau.base.widget.paramui.Compact',[tableau.base.widget.paramui.Base],eP.prototype);dojo.declare('tableau.base.widget.paramui.List',[tableau.base.widget.paramui.Base],eQ.prototype);dojo.declare('tableau.base.widget.paramui.Slider',[tableau.base.widget.paramui.Base],eR.prototype);e=[dijit._Widget,dijit._Templated,dijit._Contained];dojo.declare('tableau.base.widget.SearchWidgetBase',e,fC.prototype);e=[tableau.base.widget.SearchWidgetBase];fB.prototype['templateString']="<div class='Search'><div class='SearchBox' dojoAttachPoint='domQuerySection'><textarea rows='1' class='QueryBox' spellcheck='false'dojoAttachPoint='domQueryBox'dojoAttachEvent='onkeydown:onQueryBoxKeyDown,onpaste:onQueryBoxPaste'></textarea><span class='wcSearchX' title='${XBUTTON_CLOSE_TOOLTIP}'dojoAttachPoint='domXButton'dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span><img class='searchBusyImg' title='${CANCEL_SEARCH_TOOLTIP}' src='${busy_gif_url}'dojoAttachPoint='domSearchBusyImg'dojoAttachEvent='onclick:onSearchBusyImgClick'></img><span class='wcIconSearch' title='${SEARCH_TOOLTIP}'dojoAttachPoint='domSearchButton'dojoAttachEvent='onclick:onSearchButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span><span class='wcIconSearchAdd' title='${ADD_ITEM_CTRL_ENTER}'dojoAttachPoint='domSearchAddButton'dojoAttachEvent='onclick:onSearchAddButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span></div><div class='SearchResults' dojoAttachPoint='domResults' dojoAttachEvent='onclick:onListItemClick'></div></div>";dojo.declare('tableau.base.widget.SearchWidget',e,fB.prototype);dojo.declare('tableau.base.widget.SmallSearchWidget',[tableau.base.widget.SearchWidgetBase],fT.prototype);dojo.declare('tableau.base.widget.FilteringSearchWidget',[tableau.base.widget.SearchWidgetBase],cA.prototype);e=[dijit._Widget,dijit._Templated,dijit._Contained];dojo.declare('tableau.base.widget.TypeInFilterContents',e,gQ.prototype);e=[dijit.layout._LayoutWidget,dijit._Templated];dojo.declare('tableau.base.widget.FilterPanel',e,cH.prototype);e=[dijit.DialogUnderlay];dojo.declare('tableau.base.widget.DialogUnderlay',e,cf.prototype);e=[dijit.Dialog];dojo.declare('tableau.base.widget.Dialog',e,dN.prototype)};global.tab.DojoWidgets=ck;var cl=function(){this.$3=null;this.$2=0;this.$1=null;this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$3=[];this.$1=new Array};cl.__typeName='tab.DownloadQueue';global.tab.DownloadQueue=cl;var cm=function(){this.downloadArea=null;this.menuArea=null;this.applicationArea=null;this.explanationTitle=null;this.explanationBody=null;this.actionArea=null;this.availablePlatforms=null;this.downloadAppButton=null;spiff.Template.call(this,$("<div class='tab-downloadView tab-toolbarFlyout'><div class='tab-downloadApplication'><div class='tab-explanationTitle' /><div class='tab-explanationBody' /><div class='tab-downloadAction'><div class='tab-availablePlatforms' /><div class='tab-downloadAppButton' /></div></div><div class='tab-downloadButtons'></div></div>"));this.downloadArea=this.get_domRoot();this.menuArea=this.getElementBySelector('.tab-downloadButtons');this.applicationArea=this.getElementBySelector('.tab-downloadApplication');this.explanationTitle=this.getElementBySelector('.tab-explanationTitle');this.explanationBody=this.getElementBySelector('.tab-explanationBody');this.actionArea=this.getElementBySelector('.tab-downloadAction');this.availablePlatforms=this.getElementBySelector('.tab-availablePlatforms');this.downloadAppButton=this.getElementBySelector('.tab-downloadAppButton');if(tsConfig.is_mobile){this.downloadArea.addClass('tab-mobileDownloadView')}};cm.__typeName='tab.DownloadTemplate';global.tab.DownloadTemplate=cm;var cn=function(e){this.$g=(tsConfig.is_mobile?925:715);this.$h=null;this.$i=false;ss.makeGenericType(spiff.BaseView$1,[co]).call(this,e,new cm);this.$h=e;this.$i=Math.min(tabBootstrap.ViewerBootstrap.get_instance().getWebClientDashboardContainerSize(tsConfig.current_sheet_type).w,window.innerWidth)<this.$g;if(this.$i){this.get_dom().downloadArea.addClass('tab-narrowDownloadView')}this.$a()};cn.__typeName='tab.DownloadView';global.tab.DownloadView=cn;var co=function(e){this.$3=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$3=e};co.__typeName='tab.DownloadViewModel';global.tab.DownloadViewModel=co;var cp=function(e){this.shouldLoadIntoIframe=false;this.frameTestHook=null;spiff.ModalDialog.call(this,e,$('<span></span>'))};cp.__typeName='tab.DynamicallyLoadedContentDialog';global.tab.DynamicallyLoadedContentDialog=cp;var cq=function(e,L,hy){this.$E=null;this.$D=null;cp.call(this,e);this.$E=hy;this.$D=L;this.get_dialogElement().addClass('tab-dsauthdlg tab-dsauthdlg-small')};cq.__typeName='tab.DynamicallyLoadedContentIntoDomDialog';global.tab.DynamicallyLoadedContentIntoDomDialog=cq;var cr=function(e,L,hy){this.$D=null;this.urlToLoadDialogContent=null;cp.call(this,e);this.$D=hy;this.urlToLoadDialogContent=L;this.get_dialogElement().addClass('tab-dsauthdlg tab-dsauthdlg-tall')};cr.__typeName='tab.DynamicallyLoadedContentIntoIframeDialog';global.tab.DynamicallyLoadedContentIntoIframeDialog=cr;var cs=function(){this.eventHandler=null;this.onTabSelectHandle=null;this.zoneBecameValidHandler=null};cs.__typeName='tab.EventHandlerParam';global.tab.EventHandlerParam=cs;var ct=function(e){spiff.MultiSelectButtonGroupComponent.call(this,e)};ct.__typeName='tab.ExclusiveMultiSelectButtonGroupComponent';global.tab.ExclusiveMultiSelectButtonGroupComponent=ct;var cu=function(e){spiff.SingleSelectButtonGroupComponent.call(this,e)};cu.__typeName='tab.ExclusiveSingleSelectButtonGroupComponent';global.tab.ExclusiveSingleSelectButtonGroupComponent=cu;var cv=function(){this.$0=null;this.$0={}};cv.__typeName='tab.ExportHelper';global.tab.ExportHelper=cv;var cw=function(e,L){this.dom=null;this.thumbnails=null;this.$1e=null;this.$1f=null;this.$1c=null;this.$1a=null;this.$1d=false;this.$1b=null;this.$19=null;spiff.ModalDialog.call(this,'',$(cw.dialogTemplate()));this.$1c=(L?'png':'pdf');this.$1f=e;this.dom=new cx(this.get_element());this.thumbnails=[];this.get_dialogElement().css(ss.mkdict(['minWidth','none','maxWidth','none']));switch(this.$1c){case'png':{this.set_titleUnescaped(tab.Strings.PdfExportTitlePNG);this.dom.getElementsBySelector('.pdf-only').hide();break}case'pdf':{this.set_titleUnescaped(tab.Strings.PdfExportTitlePDF);this.dom.getElementsBySelector('.png-only').hide();break}}this.$19=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.onCancel),tab.Strings.DialogButtonCancel,'cancel',2,null);this.$1b=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.onExport),tab.Strings.DialogButtonExport,'export',0,null);this.dom.buttons.append(this.$19.get_element());this.dom.buttons.append(this.$1b.get_element());this.set_closeButtonVisible(false);this.disableTextSelection()};cw.__typeName='tab.ExportPdfDialog';cw.dialogTemplate=function(){if(ss.isNullOrUndefined(cw.$0)){cw.$0=ss.localeFormatString(cx.template,tableau.format.escapeHTML(tab.Strings.PdfDialogPaperSize),tableau.format.escapeHTML(tab.Strings.PdfDialogImageSize),tableau.format.escapeHTML(tab.Strings.PdfDialogScalingLabel),tableau.format.escapeHTML(tab.Strings.PdfDialogSectionLayout),tableau.format.escapeHTML(tab.Strings.PdfExportPageOrientationPortrait),tableau.format.escapeHTML(tab.Strings.PdfExportPageOrientationLandscape),tableau.format.escapeHTML(tab.Strings.PdfDialogSectionContent),tableau.format.escapeHTML(tab.Strings.PdfDialogContentDashboardSheets),tableau.format.escapeHTML(tab.Strings.PdfDialogContentDashboard),tableau.format.escapeHTML(tab.Strings.PdfDialogContentTopSheets),tableau.format.escapeHTML(tab.Strings.PdfDialogContentWorksheet),tableau.format.escapeHTML(tab.Strings.PdfDialogSelectSheetToChangePrintScaling),tableau.format.escapeHTML(tab.Strings.PdfDialogContentStory))}return cw.$0};cw.scalingValueFromLayoutOptions=function(e){switch(e.kPf){case'fit-pages':{return ss.formatString('fit{0}x{1}',e.Jlj,e.ubB)}case'percent':{return ss.formatString('pct{0}',e.HZB)}case'auto':default:{return'auto'}}};cw.scalingLabelFromLayoutOptions=function(e){switch(e.kPf){case'fit-pages':{if(e.Jlj===0&&e.ubB>0){return tab.Strings.PdfExportFitHigh(e.ubB)}else if(e.ubB===0&&e.Jlj>0){return tab.Strings.PdfExportFitWide(e.Jlj)}else{return tab.Strings.PdfExportFitWideByHigh(e.Jlj,e.ubB)}}case'percent':{return tab.Strings.PdfExportPageScalePercent(e.HZB)}case'auto':default:{return tab.Strings.PdfExportPageScaleAuto}}};cw.canSelectSheet=function(e){return e.GJq||ss.isValue(tsConfig.is_authoring)&&tsConfig.is_authoring};global.tab.ExportPdfDialog=cw;var cx=function(e){this.orientationBtns=null;this.scalingSelector=null;this.sizeSelector=null;this.imageHeightBtn=null;this.imageWidthBtn=null;this.sizeControl=null;this.spinner=null;this.status=null;this.statusMsg=null;this.thumbListWrapper=null;this.thumbList=null;this.buttons=null;spiff.Template.call(this,e);this.orientationBtns=this.getElementsBySelector("button[name='orientation']");this.scalingSelector=this.getElementBySelector('#pdfdlgScaling');this.sizeSelector=this.getElementBySelector('#pdfdlgPageSize');this.imageHeightBtn=this.getElementBySelector("[name='imageHeight']");this.imageWidthBtn=this.getElementBySelector("[name='imageWidth']");this.sizeControl=this.getElementBySelector("[name='pageSize']");this.status=this.getElementBySelector('.tab-pdfdlg-status');this.statusMsg=this.getElementBySelector('.tab-dialog-status-msg');this.spinner=this.getElementBySelector('.tab-pdfdlg-spinner');this.thumbListWrapper=this.getElementBySelector('.tab-pdfdlg-sheets-container');this.thumbList=this.getElementBySelector('.tab-pdfdlg-sheet-list');this.buttons=this.getElementBySelector('.tab-dialog-actions')};cx.__typeName='tab.ExportPdfDialogTemplate';global.tab.ExportPdfDialogTemplate=cx;var cy=function(e,L,hy){this.$2=0;this.$0=null;this.$1=null;this.$2=e;this.$0=L;this.$1=hy};cy.__typeName='tab.FetchInfo';global.tab.FetchInfo=cy;var cz=function(e,L,hy){this.$4=null;this.$9=null;this.$3=null;this.$7=null;this.$8=null;this.$6=5;this.$5=false;this.$1$1=null;this.$4=L;this.$9=e;this.$3=hy;this.$7=[];this.$8=[]};cz.__typeName='tab.FilterContentFetcher';global.tab.FilterContentFetcher=cz;var cA=function(e){this.templateString="<div class='Search FilteringSearch'><div class='SearchBox' dojoAttachPoint='domQuerySection'><textarea rows='1' class='QueryBox' spellcheck='false'dojoAttachPoint='domQueryBox'dojoAttachEvent='onkeydown:onQueryBoxKeyDown,onclick:focusQueryBox,onfocus:focusQueryBox,onblur:blurQueryBox'></textarea><span class='wcSearchX' title='${XBUTTON_CLOSE_TOOLTIP}'dojoAttachPoint='domXButton'dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span></div></div>";this.domQueryBox=null;this.domSearchButton=null;this.domSearchBusyImg=null;this.$6=100;this.$7=null;this.$8=0;fC.call(this)};cA.__typeName='tab.FilteringSearchWidget';global.tab.FilteringSearchWidget=cA;var cB=function(){};cB.__typeName='tab.FilteringSearchWidgetStyle';global.tab.FilteringSearchWidgetStyle=cB;var cC=function(){};cC.__typeName='tab.FilterItemBase';global.tab.FilterItemBase=cC;var cD=function(){cC.call(this)};cD.__typeName='tab.FilterItemDesktop';global.tab.FilterItemDesktop=cD;var cE=function(){cC.call(this)};cE.__typeName='tab.FilterItemMobile';cE.formatListRowFilterItemHtml=function(e,L,hy,hz){var hA=cF.getItemId(hy,hz);var hB=hz===cF.allItemIndex;var hC;if(hB){hC=L.s}else if(e.isSingleSelect()){hC=cF.shouldCheckFilterItemSingleValue(L,e)}else{hC=cF.shouldCheckFilterItemMultiValue(L,e)}var hD=tableau.format.formatTupleDisplayName(L,false,e.get_oFilter().role);var hE=cF.showFacets(e);var hF=(hE?tableau.format.formatTupleDisplayFacet(L,false,e.get_oFilter().role):'');var hG=ss.isValue(e.get_modeContents())&&ss.isValue(e.get_modeContents().pendingManager)&&e.get_modeContents().pendingManager.isPending(L,hz);var hH=false;if(hB){var hI=(ss.isValue(e.get_modeContents())?e.get_modeContents().pendingManager:null);hH=bq.shouldCheckAllItem(e.get_oFilter(),hI)}else if(hC&&!hG||!hC&&hG){hH=true}return cE.getScrollingListRowHtml(hA,hD,hF,hB,hH,hE,hG)};cE.getScrollingListRowHtml=function(e,L,hy,hz,hA,hB,hC){return['<div class="ListRow',(hz?' rowAll':''),(hA?' checked':''),(hB?' Wide':''),(hC?' pending':''),'" id="_popup_',e,'">','<div class="facet">',hy,'</div>','<div class="checkArea">&nbsp;</div>','<div class="labelArea" style="margin-left: 28px;">',L,'</div></div>'].join('')};cE.formatRemovableListRowFilterItemHtml=function(e,L,hy,hz){var hA=cF.getItemId(hy,hz);var hB=tableau.format.formatTupleDisplayName(L,false,e.get_oFilter().role);return cE.getScrollingListRemovableRowHtml(hA,hB)};cE.getScrollingListRemovableRowHtml=function(e,L){return['<div class="ListRow" id="_popup_',e,'" style="min-width: 270px; white-space: nowrap;"><div class="wcIconSearchRemoveContainer" style="margin-right:10px"><div class="wcIconSearchRemove" style="margin-right:10px">&nbsp;</div></div><div class="xRowlabelArea">',L,'</div><div style="clear:both;"></div></div>'].join('')};global.tab.FilterItemMobile=cE;var cF=function(){};cF.__typeName='tab.FilterItemUtil';cF.getBaseItemName=function(e,L){var hy=L+'_'+e.get_oFilter().name;if(ss.isValue(e.get_session())){hy+=e.get_session().get_viewId()}return hy};cF.getItemId=function(e,L){return tableau.format.escapeHTML(e+'_'+((L===cF.allItemIndex)?cF.$1:L.toString()))};cF.getIndexFromId=function(e){var L=cF.$0(e);var hy=parseInt(L,10);if(isNaN(hy)){if(ss.referenceEquals(L,cF.$1)){return cF.allItemIndex}else{return cF.unknownItemIndex}}return hy};cF.isAllItemId=function(e){return ss.referenceEquals(cF.$0(e),cF.$1)};cF.getAllItemTuple=function(e,L){var hy={d:cF.$1,s:L,t:null};hy.f=[{t:'i',v:e}];return hy};cF.getAllItemHtml=function(e,L,hy,hz,hA){return hA(e,cF.getAllItemTuple(hy,hz),L,cF.allItemIndex)};cF.isAllOrAllChecked=function(e){return e.get_oFilter().all||e.get_oFilter().allChecked};cF.isAllMode=function(e){return e.get_oFilter().all};cF.addAllItemToTuples=function(e,L,hy){var hz=[];hz.push({d:tab.Strings.QuickFilterAll,s:L,t:[{t:'i',v:hy}]});return $.merge(hz,e)};cF.shouldCheckFilterItemSingleValue=function(e,L){return e.s&&!(L.get_oFilter().exclude&&cF.isAllOrAllChecked(L))};cF.shouldCheckFilterItemMultiValue=function(e,L){return e.s||!L.get_oFilter().exclude&&cF.isAllMode(L)};cF.showFacets=function(e){return e.get_oFilter().showFacets&&e.get_modeContents().get_width()>100};cF.resetPendingFilterItems=function(e,L){for(var hy=0;hy<e.length;hy++){var hz=e[hy];if(cF.filterItem.isPending(hz)){cF.filterItem.togglePendingState(hz);if(L){cF.filterItem.setChecked(hz,!cF.filterItem.isChecked(hz))}}}};cF.toggleClassState=function(e,L){var hy=!dojo.hasClass(e,L);dojo.toggleClass(e,L,hy);return hy};cF.getClassElement=function(e,L){for(var hy=0;ss.isValue(e)&&hy<5;hy++,e=e.parentNode){if(dojo.hasClass(e,L)){return e}}return null};cF.$0=function(e){var L=e.split(String.fromCharCode(95));return L[L.length-1]};global.tab.FilterItemUtil=cF;var cG=function(e,L,hy){this.$6=null;this.$4=null;this.$5=null;this.$3=null;this.$1=0;this.$2=0;this.$1$1=null;this.$6=$(e);this.$6.addClass('tiledContent');var hz=document.createElement('div');this.$4=$(hz);this.$4.css('left','0px');this.$4.css('position','relative');this.$4.css('height',L+'px');this.$4.css('width',this.$6.css('width')+'px');this.$4.addClass('tileContainer');this.$6.append(this.$4);this.$6.scroll(ss.mkdel(this,this.$0));this.$5=new Array(hy)};cG.__typeName='tab.FilterListUI';global.tab.FilterListUI=cG;var cH=function(e){this.templateString="<div class='FilterPanel' dojoAttachPoint='containerNode' dojoAttachEvent='onmousedown:onMouseDown'></div>";this.session=null;this.field='';this.filter=null;this.format={};this.width=0;this.metricsOnly=false;this.layoutSession=null;this.zid=0;this.quickFilterDisplayViewModel=null;this.$7=null;this.$9=null;this.requestSetAttributes=null;this.titleHTML=null;this.$a=0;this.$b=0;this.attributes={};this.$8=null;this.textStyle=null;this.backgroundColor=null;Object.call(this);this.$9=[];this.$7=new tab.DisposableHolder};cH.__typeName='tab.FilterPanel';global.tab.FilterPanel=cH;var cI=function(e,L,hy,hz,hA){this.parent=null;this.buttonContainer=null;this.flyOutContainer=null;this.flyOutButtons=null;this.zoomInBtn=null;this.zoomOutBtn=null;this.zoomHomeBtn=null;this.flyOutBtn=null;this.zoomAreaBtn=null;this.rectSelectBtn=null;this.radialSelectBtn=null;this.lassoSelectBtn=null;this.panBtn=null;this.api=null;this.canZoomHome=false;this.geoSearchEnabled=false;this.$7=null;this.toolbarType=null;this.acceptingInteraction=true;spiff.Widget.call(this,$("<div class='FloatingZoomToolbar'></div>"));this.parent=$(e);this.api=L;this.toolbarType=hy;this.canZoomHome=false;this.geoSearchEnabled=hA;this.get_element().css({top:hz+'px'})};cI.__typeName='tab.FloatingZoomToolbar';global.tab.FloatingZoomToolbar=cI;var cJ=function(){};cJ.__typeName='tab.FontFamilyProviderBuilder';cJ.createFontFamilyBuilder=function(){return new gU};global.tab.FontFamilyProviderBuilder=cJ;var cK=function(){this.normalizeFont=null;this.normalizeFont=(tab.BrowserSupport.get_isIE()?cK.$0:cK.$2)};cK.__typeName='tab.FontNormalizer';cK.instance=function(){if(ss.isNullOrUndefined(cK.$4)){cK.$4=new cK;cK.$1()}return cK.$4};cK.$0=function(e){var L=e.split(' ');var hy;var hz=false;for(var hA=0;hA<L.length;++hA){hy=cK.$3[L[hA]];if(!(typeof(hy)==='undefined')){hz=true;L[hA]=hy}}if(hz){return L.join(' ')}return e};cK.$2=function(e){return e};cK.$1=function(){if(ss.isValue(cK.$3)){return}if(tab.BrowserSupport.get_isIE()){cK.$3={};cK.$3['華康中明體']='DLCMingMedium';cK.$3['華康粗明體']='DLCMingBold';cK.$3['細明體']='Ming Light';cK.$3['新細明體']='PMingLiU';cK.$3['細明體-ExtB']='MingLiU-ExtB';cK.$3['新細明體-ExtB']='PMingLiU-ExtB';cK.$3['MS宋体']='MS Song';cK.$3['新宋体']='NSimSun';cK.$3['中易宋体']='SimSun';cK.$3['宋体']='SimSun';cK.$3['宋体-18030']='SimSun-18030';cK.$3['新宋体-18030']='NSimSun-18030';cK.$3['宋体–方正超大字符集']='SimSun (Founder Extended)';cK.$3['宋體ExtA']='SimSun-ExtA';cK.$3['宋體ExtB']='SimSun-ExtB';cK.$3['华文宋体']='STSong';cK.$3['华文中宋']='STZhongsong';cK.$3['ＭＳ']='MS';cK.$3['明朝']='Mincho';cK.$3['Ｐ明朝']='PMincho';cK.$3['平成明朝']='Heisei Minchō';cK.$3['リュウミン']='Ry­ūbundō Minchō';cK.$3['小塚明朝']='Kozuka Minchō';cK.$3['바탕']='Batang';cK.$3['바탕체']='BatangChe';cK.$3['궁서']='Gungsuh';cK.$3['궁서체']='GungsuhChe';cK.$3['华文细黑']='STHeiti Light';cK.$3['微軟正黑體']='Microsoft JhengHei';cK.$3['微软雅黑']='Microsoft YaHei';cK.$3['MS黑体']='MS Hei';cK.$3['蒙纳黑体']='MHei';cK.$3['中易黑体']='SimHei';cK.$3['メイリオ']='Meiryo';cK.$3['ゴシック']='Gothic';cK.$3['Ｐゴシック']='PGothic';cK.$3['돋움']='Dotum';cK.$3['돋움체']='DotumChe';cK.$3['굴림']='Gulim';cK.$3['굴림체']='GulimChe';cK.$3['맑은']='Malgun';cK.$3['고딕']='Gothic';cK.$3['새굴림']='New Gulim';cK.$3['標楷體']='KaiU';cK.$3['中易楷体']='SimKai';cK.$3['楷体_GB2312']='SimKai';cK.$3['华文楷体']='STKaiti';cK.$3['中易隶书']='SimLi';cK.$3['隶书']='SimLi';cK.$3['中易仿宋']='SimFang';cK.$3['仿宋']='SimFang';cK.$3['幼圆']='SimYou';cK.$3['华文行楷']='HuaWen Xingkai';cK.$3['华文彩云']='HuaWen CaiYun';cK.$3['方正舒体']='FangZheng ShuTi';cK.$3['方正启体']='FangZheng QiTi';cK.$3['汉仪雪君体']='HanYi XueJun';cK.$3['華康少女體']='HuaKang ShaoNu';cK.$3['華康娃娃體']='HuaKang WuaWua'}};global.tab.FontNormalizer=cK;var cL=function(){};cL.__typeName='tab.FormattingConverters';cL.getCSSBorderStyle=function(e){var L='solid';switch(e){case'bs-dashed':{L='dashed';break}case'bs-dotted':{L='dotted';break}case'bs-double':{L='double';break}case'bs-groove':{L='groove';break}case'bs-hidden':{L='hidden';break}case'bs-inset':{L='inset';break}case'bs-outset':{L='outset';break}case'bs-ridge':{L='ridge';break}case'bs-solid':{L='solid';break}case'bs-none':{L='none';break}default:{break}}return L};cL.makeStyledBoxCssDict=function(e,L){var hy={};if(ss.isValue(e)){hy=cL.$3(e);if(e.iKN){var hz=tab.ColorModel.fromColorCode(e.eBu);hy['background-color']=(L?hz.toString():hz.toRgb())}}return hy};cL.makeFormatStyleDict=function(e,L){var hy={'font-size':e.Qvi+'pt',color:e.YhU};if(ss.isValue(e.sGS)){var hz=e.sGS.split(',');for(var hA=0;hA<hz.length;hA++){var hB=hz[hA];hB=hB.trim();var hC=hB.length-1;if(hB.indexOf(' ')!==-1&&!(hB.charCodeAt(0)===39&&hB.charCodeAt(hC)===39)&&!(hB.charCodeAt(0)===34&&hB.charCodeAt(hC)===34)){hB='"'+hB+'"'}hz[hA]=hB}hy['font-family']=hz.join(',')}if(ss.isValue(L)){hy.color=L}if(e.BxQ==='font-style-italic'){hy['font-style']='italic'}if(e.cjf==='font-weight-bold'){hy['font-weight']='bold'}var hD='none';switch(e.zwp){case'text-decoration-overline':{hD='overline';break}case'text-decoration-strikethrough':{hD='line-through';break}case'text-decoration-underline':{hD='underline';break}}if(hD!=='none'){hy['text-decoration']=hD}if(ss.isValue(e.inn)){switch(e.inn){case'text-wrap-off':{hy['white-space']='nowrap';break}case'text-wrap-truncate':{hy['overflow-x']='hidden';break}}}return hy};cL.$3=function(e){var L={};if(ss.isValue(e.s$V)){L['border-width']=e.s$V+'px'}if(ss.isValue(e.mjt1)){L['border-color']=e.mjt1}if(ss.isValue(e.s$V)){L['border-style']=cL.getCSSBorderStyle(e.ysh)}return L};cL.$1=function(e){var L='bottom';switch(e){case'v-align-bottom':{L='bottom';break}case'v-align-top':{L='top';break}case'v-align-center':{L='middle';break}default:{break}}return L};cL.$0=function(e){var L='start';switch(e){case'h-align-left':{L='start';break}case'h-align-center':{L='center';break}case'h-align-right':{L='end';break}default:{break}}return L};cL.cleanUpFontFamilyStyles=function(e){var L=e.find('span');for(var hy=0;hy<L.length;++hy){var hz=L.eq(hy);var hA=hz.css('font-family');if(!ss.isNullOrEmptyString(hA)){var hB={};var hC=[];hC.push(hA);if(ss.startsWithString(hA,"'")||ss.startsWithString(hA,'"')){hA=hA.substr(1,hA.length-2)}hA=cL.$4(hz,hC,hB,hA,cL.$6,'font-style','fontStyle');hA=cL.$4(hz,hC,hB,hA,cL.$7,'font-weight','fontWeight');cL.$4(hz,hC,hB,hA,cL.$5,'font-stretch','fontStretch');if(hC.length>1){hB['font-family']=hC.join(',');hz.css(hB)}}}};cL.$4=function(e,L,hy,hz,hA,hB,hC){var hD=hz.toLowerCase();for(var hE=0;hE<hA.length;hE++){var hF=hA[hE];if(ss.endsWithString(hD,hF.item1)){hz=hz.substr(0,hD.lastIndexOf(hF.item1)).trim();L.push("'"+hz+"'");if(!cL.$2(e,hC)){hy[hB]=hF.item2}}}return hz};cL.$2=function(e,L){return!ss.isNullOrEmptyString(e.prop('style')[L])};global.tab.FormattingConverters=cL;var cM=function(e,L,hy){this.$2=null;this.$0=null;this.$1=null;this.$2=e;this.$0=L;this.$1=hy};cM.__typeName='tab.FormattingStyleInfo';global.tab.FormattingStyleInfo=cM;var cN=function(){spiff.Widget.call(this,$('<div class="auth-box ocontent tb-data-source-error-container"> \n                                                              <div class="tb-data-source-error"></div>\n                                                              <div class="tb-data-source-error-sub"></div>\n                                                              <div class="tab-UnifiedButton bordered tb-data-source-button-retry" id="ds-retrybtn"></div>\n                                                            </div>'));$('.tb-data-source-error',this.get_element()).text(tab.Strings.DataSourceGenericErrorMsg);$('.tb-data-source-error-sub',this.get_element()).text(tab.Strings.DataSourceGenericErrorSubMsg);$('.tb-data-source-button-retry',this.get_element()).text(tab.Strings.DataSourceGenericErrorButtonLabel)};cN.__typeName='tab.GenericDataSourceErrorWidget';global.tab.GenericDataSourceErrorWidget=cN;var cO=function(e,L){this.$0='Error occurred when trying to connect to the datasource';this.$1=null;W.call(this,e,L);var hy=new cN;this.$1=new cq(this.$0,hy.get_element(),this.getRetryConentLoadedHandler(null))};cO.__typeName='tab.GenericDataSourceExceptionDialogWidget';global.tab.GenericDataSourceExceptionDialogWidget=cO;var cP=function(e,L){V.call(this,e,L)};cP.__typeName='tab.GenericDataSourceExceptionOverlayWidget';global.tab.GenericDataSourceExceptionOverlayWidget=cP;var cQ=function(e){et.call(this,e);this.adjustMargin=false;this.get_element().addClass('tabGeoLocationNotification');if(ss.isValue(this.notificationViewModel.get_displayPosition())){this.messageDom.parent().css('left',this.notificationViewModel.get_displayPosition().x+'px');this.messageDom.parent().css('top',this.notificationViewModel.get_displayPosition().y+'px')}this.updateContent()};cQ.__typeName='tab.GeoLocationNotificationView';global.tab.GeoLocationNotificationView=cQ;var cR=function(){};cR.__typeName='tab.GeometryUtil';cR.domainToPixelMultipolygon=function(e,L,hy,hz){var hA=3;var hB=hy.w/L.w;var hC=hy.h/L.h;var hD=e.KCe;var hE=hD.length;for(var hF=0;hF<hE;hF++){var hG=hD[hF].jWM;var hH=hG.length;for(var hI=0;hI<hH;hI++){var hJ=hG[hI].xCr;var hK=hJ.length;if(hK<2){continue}var hL=null;var hM=null;var hN=0;for(var hO=0;hO<hK;hO+=2){var hP=fv.domainToPixel(hJ[hO],L.x,hy.x,hB);var hQ=fv.domainToPixel(hJ[hO+1],L.y,hy.y,hC);if(hz){var hR=hP*3<<0;var hS=hQ*3<<0;if(hR===hL&&hS===hM){continue}hL=hR;hM=hS}hJ[hN]=hP;hJ[hN+1]=hQ;hN+=2}if(hN+hN<hK){hJ.splice(hN,hK-hN)}else{hJ.length=hN}}}};cR.checkFor180DegLngLine=function(e){var L=e.KCe;var hy=L.length;for(var hz=0;hz<hy;hz++){var hA=L[hz].jWM;var hB=hA.length;var hC=false;for(var hD=0;hD<hB;hD++){var hE=hA[hD].xCr;var hF=hE.length;var hG=0;for(var hH=0;hH<hF;hH=hH+2){var hI=cR.$6(hE[hH]);if(hI&&hC){hG=hH;break}hC=hI}if(hG!==0){hA[hD].xCr=cR.$a(hE,hG)}}}};cR.isPointInPoly=function(e,L,hy){if(ss.isValue(hy)&&hy!==0){return cR.polygonIntersectsDoubleRect(e,{x:L.x-hy,y:L.y-hy,w:hy*2,h:hy*2})}var hz=0;var hA=e.length;for(var hB=0;hB<hA;hB+=2){var hC=e[hB];var hD=e[hB+1];var hE=(hB+2)%hA;var hF=e[hE];var hG=e[hE+1];if(hD<=L.y){if(hG>L.y){if(cR.$5(hC,hD,hF,hG,L.x,L.y)>0){++hz}}}else if(hG<=L.y){if(cR.$5(hC,hD,hF,hG,L.x,L.y)<0){--hz}}}return hz!==0};cR.isPointInPolygon=function(e,L){var hy=false;var hz=0;for(var hA=0;hA<e.jWM.length;hA++){var hB=e.jWM[hA];var hC=cR.isPointInPoly(hB.xCr,L);if(hz===0){if(hC){hy=true}else{break}}else if(hC){hy=false;break}hz++}return hy};cR.isPointInMultipolygon=function(e,L){var hy=false;for(var hz=0;hz<e.KCe.length;hz++){var hA=e.KCe[hz];hy=cR.isPointInPolygon(hA,L);if(hy){break}}return hy};cR.multipolygonIntersectsDoubleRect=function(e,L){for(var hy=0;hy<e.KCe.length;hy++){var hz=e.KCe[hy];for(var hA=0;hA<hz.jWM.length;hA++){var hB=hz.jWM[hA];if(cR.polygonIntersectsDoubleRect(hB.xCr,L)){return true}}}return false};cR.multipolygonIntersectsPolygon=function(e,L,hy){for(var hz=0;hz<e.KCe.length;hz++){var hA=e.KCe[hz];for(var hB=0;hB<hA.jWM.length;hB++){var hC=hA.jWM[hB];if(cR.$7(hC.xCr,L,hy)){return true}}}return false};cR.polygonIntersectsRect=function(e,L){return cR.$7(e,cR.$2(L))};cR.polygonIntersectsDoubleRect=function(e,L){return cR.$7(e,cR.$1(L))};cR.$7=function(e,L,hy){if(e.length===0||L.length===0){return false}if(cR.isPointInPoly(L,{x:e[0],y:e[1]})){return true}if(cR.isPointInPoly(e,{x:L[0],y:L[1]})){return true}if(e.length>L.length||ss.isValue(hy)){var hz=e;e=L;L=hz}var hA=hy;var hB=ss.isValue(hA);for(var hC=0,hD=e.length;hC<hD;hC+=2){var hE=(hC+2)%hD;if(hB&&!cR.$9(hA,e[hC],e[hC+1],e[hE],e[hE+1])){continue}if(cR.$8(L,e[hC],e[hC+1],e[hE],e[hE+1])){return true}}return false};cR.$9=function(e,L,hy,hz,hA){if(L>hz){var hB=L;L=hz;hz=hB}if(hz<e.x||L>e.x+e.w){return false}if(hy>hA){var hC=hy;hy=hA;hA=hC}return!(hA<e.y||hy>e.y+e.h)};cR.$8=function(e,L,hy,hz,hA){var hB=hz-L;var hC=hA-hy;var hD=e.length;for(var hE=0;hE<hD;hE+=2){var hF=(hE+2)%hD;var hG=e[hE];var hH=e[hE+1];var hI=e[hF];var hJ=e[hF+1];var hK=hB*(hH-hA)-hC*(hG-hz);var hL=hB*(hJ-hA)-hC*(hI-hz);if(hK<0&&hL<0||hK>0&&hL>0){continue}var hM=hI-hG;var hN=hJ-hH;var hO=hM*(hy-hJ)-hN*(L-hI);var hP=hM*(hA-hJ)-hN*(hz-hI);if(hK!==0&&hL!==0){if(hO<0&&hP>0||hO>0&&hP<0){return true}else if(hO!==0&&hP!==0){continue}}var hQ=[hO,hP,hK,hL];var hR=[L,hy,hz,hA,hG,hH,hI,hJ];if(cR.$4(hQ,hR)){return true}}return false};cR.$4=function(e,L){var hy=[4,4,0,0];var hz=[6,6,2,2];for(var hA=0,hB=0,hC=4;hA<hC;hA++,hB+=2){if(e[hA]===0){var hD=L[hB];var hE=L[hB+1];var hF=L[hy[hA]];var hG=L[hy[hA]+1];var hH=L[hz[hA]];var hI=L[hz[hA]+1];if(hD>=Math.min(hF,hH)&&hD<=Math.max(hF,hH)&&hE>=Math.min(hG,hI)&&hE<=Math.max(hG,hI)){return true}}}return false};cR.multipolygonIntersectsCircle=function(e,L){for(var hy=0;hy<e.KCe.length;hy++){var hz=e.KCe[hy];for(var hA=0;hA<hz.jWM.length;hA++){var hB=hz.jWM[hA];if(cR.polygonIntersectsCircle(hB.xCr,L)){return true}}}return false};cR.circleIntersectsCircle=function(e,L){var hy=Math.pow(e.center.x-L.center.x,2)+Math.pow(e.center.y-L.center.y,2);return Math.pow(e.radius+L.radius,2)>=hy};cR.polygonIntersectsCircle=function(e,L){if(e.length===0||L.radius===0){return false}if(cR.isPointInPoly(e,L.center)){return true}if(cR.isPointInCircle({x:e[0],y:e[1]},L)){return true}var hy=L.radius*L.radius;for(var hz=0,hA=e.length;hz<hA;hz+=2){var hB=e[hz];var hC=e[hz+1];var hD=(hz+2)%hA;var hE=e[hD];var hF=e[hD+1];var hG=hF-hC;var hH=hE-hB;var hI=hH*hH+hG*hG;var hJ=((L.center.x-hB)*hH+(L.center.y-hC)*hG)/hI;hJ=Math.min(1,Math.max(0,hJ));var hK=hB+hJ*hH;var hL=hC+hJ*hG;hH=hK-L.center.x;hG=hL-L.center.y;hI=hH*hH+hG*hG;if(hy>hI){return true}}return false};cR.circleIntersectsRect=function(e,L){if(e.radius<=0){return false}var hy=cR.$0(L);for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];if(cR.isPointInCircle(hA,e)){return true}}if(tab.RectXYUtil.inRectPointF(L,e.center)){return true}var hB=L.w/2;var hC=L.h/2;var hD={x:L.x+hB,y:L.y+hC};if(e.center.y<L.y||e.center.y>=L.y+L.h){return e.center.x>L.x&&e.center.x<L.x+L.w&&Math.abs(hD.y-e.center.y)<hC+e.radius}if(e.center.x<L.x||e.center.x>=L.x+L.w){return e.center.y>L.y&&e.center.y<L.y+L.h&&Math.abs(hD.x-e.center.x)<hB+e.radius}return false};cR.normalizeAngle=function(e){var L=e%cR.twoPI;if(L<0){L+=cR.twoPI}return L};cR.isInBetweenAngles=function(e,L,hy){var hz=false;if(L>hy){var hA=L;L=hy;hy=hA;hz=true}if(L<=e&&hy>=e){return!hz}return hz};cR.isPointInCircle=function(e,L){if(tab.FeatureFlags.isEnabled('RuntimeWeb')){return Module.Module.pointInCircle(e,L)}var hy=Math.pow(e.x-L.center.x,2)+Math.pow(e.y-L.center.y,2);var hz=L.radius*L.radius;var hA=hy<hz;return hA};cR.isPointInWedge=function(e,L,hy,hz){if(!cR.isPointInCircle(e,L)){return false}var hA=e.x-L.center.x;var hB=e.y-L.center.y;var hC=Math.atan2(hB,hA);hC=cR.normalizeAngle(hC);return cR.isInBetweenAngles(hC,hy,hz)};cR.rectIntersectsWedge=function(e,L,hy,hz){var hA=cR.$0(e);for(var hB=0;hB<hA.length;hB++){var hC=hA[hB];if(cR.isPointInWedge(hC,L,hy,hz)){return true}}if(tab.RectXYUtil.inRectPointF(e,L.center)){return true}var hD=cR.$3(L,hy,hz);return cR.polygonIntersectsRect(hD,e)};cR.polygonIntersectsWedge=function(e,L,hy,hz){if(e.length===0){return false}if(cR.isPointInWedge({x:e[0],y:e[1]},L,hy,hz)){return true}if(cR.isPointInPoly(e,L.center)){return true}var hA=cR.$3(L,hy,hz);return cR.$7(hA,e)};cR.circleIntersectsWedge=function(e,L,hy,hz){if(e.radius<=0){return false}if(cR.isPointInWedge(e.center,L,hy,hz)){return true}if(cR.isPointInCircle(L.center,e)){return true}var hA=cR.$3(L,hy,hz);return cR.polygonIntersectsCircle(hA,e)};cR.$3=function(e,L,hy){while(L>hy){hy+=cR.twoPI}var hz=L;var hA=new Array(4);hA[0]=e.center.x;hA[1]=e.center.y;hA[2]=e.center.x+Math.cos(hz)*e.radius;hA[3]=e.center.y+Math.sin(hz)*e.radius;while(hz<hy){var hB=Math.min(hz+cR.$c,hy);hA.push(e.center.x+Math.cos(hB)*e.radius);hA.push(e.center.y+Math.sin(hB)*e.radius);hz=hB}return hA};cR.areRectanglesIntersecting=function(e,L){return tab.RectXYUtil.intersectsWith(e,L)};cR.getSquaredDistanceToCenter=function(e,L){var hy=e.x+e.w/2;var hz=e.y+e.h/2;var hA=hy-L.x;var hB=hz-L.y;return hA*hA+hB*hB};cR.getSquaredDistanceToNearestSide=function(e,L){var hy=e.y;var hz=e.y+e.h;var hA=e.x;var hB=e.x+e.w;var hC,hD;if(L.x<hA){hC=hA-L.x}else if(L.x>hB){hC=L.x-hB}else{hC=0}if(L.y<hy){hD=hy-L.y}else if(L.y>hz){hD=L.y-hz}else{hD=0}return hC*hC+hD*hD};cR.getSquaredDistanceToCircumference=function(e,L){var hy=Math.sqrt(cR.getSquaredDistanceToCenter(e,L))-Math.min(e.w,e.h)/2;hy=Math.max(hy,0);return hy*hy};cR.getSquaredDistanceToLineSegment=function(e,L,hy){var hz,hA;if(hy.x<L.x){var hB=L;L=hy;hy=hB}var hC=hy.x-L.x;var hD=hy.y-L.y;var hE=hC*hC+hD*hD;if(hE===0){hz=e.x-L.x;hA=e.y-L.y;return hz*hz+hA*hA}var hF=((e.x-L.x)*hC+(e.y-L.y)*hD)/hE;var hG;var hH;if(hF<0){hG=L.x;hH=L.y}else if(hF>1){hG=hy.x;hH=hy.y}else{hG=L.x+hF*hC;hH=L.y+hF*hD}hz=e.x-hG;hA=e.y-hH;return hz*hz+hA*hA};cR.degreeToRad=function(e){return e*(Math.PI/180)};cR.radToDegree=function(e){return e*(180/Math.PI)};cR.haversineDistance=function(e,L,hy){var hz=cR.degreeToRad(L.item1-e.item1);var hA=cR.degreeToRad(e.item2);var hB=cR.degreeToRad(L.item2);var hC=hB-hA;var hD=Math.pow(Math.sin(hC/2),2)+Math.cos(hA)*Math.cos(hB)*Math.pow(Math.sin(hz/2),2);var hE=2*Math.atan2(Math.sqrt(hD),Math.sqrt(1-hD));return hE*hy};cR.$5=function(e,L,hy,hz,hA,hB){return(hy-e)*(hB-L)-(hA-e)*(hz-L)};cR.$0=function(e){var L=new Array(4);L[0]={x:e.x,y:e.y};L[1]={x:e.x+e.w,y:e.y};L[2]={x:e.x+e.w,y:e.y+e.h};L[3]={x:e.x,y:e.y+e.h};return L};cR.$2=function(e){var L=new Array(8);L[0]=e.x;L[1]=e.y;L[2]=e.x+e.w;L[3]=e.y;L[4]=L[2];L[5]=e.y+e.h;L[6]=e.x;L[7]=L[5];return L};cR.$1=function(e){var L=new Array(8);L[0]=e.x;L[1]=e.y;L[2]=e.x+e.w;L[3]=e.y;L[4]=L[2];L[5]=e.y+e.h;L[6]=e.x;L[7]=L[5];return L};cR.$6=function(e){var L=e-1;return L<9.99999974737875E-06&&L>-9.99999974737875E-06};cR.$a=function(e,L){var hy=e.length;var hz=tab.DoubleUtil.isApproximatelyEqual(e[0],e[hy-2])&&tab.DoubleUtil.isApproximatelyEqual(e[1],e[hy-1]);if(hz){e.pop();e.pop()}var hA=e.slice(L);var hB=hA.concat.apply(hA,e.slice(0,L));return hB};global.tab.GeometryUtil=cR;var cS=function(e){this.$a=null;this.$9=null;spiff.Widget.call(this,$("<div class='tabGotoMyLocationButtonContainer'></div>"));if(!tab.BrowserSupport.get_isGeolocationSupported()){return}this.$a=e;this.$9=spiff.LabelButton.newNativeButton();this.get_button().addClass('tabGotoMyLocationButton');this.get_element().attr('title',tab.Strings.GotoMyLocationTooltip);this.get_button().add_click(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_button().remove_click(ss.mkdel(this,this.$8))})));this.get_button().addToDom(this.get_element())};cS.__typeName='tab.GotoMyLocationButton';global.tab.GotoMyLocationButton=cS;var cT=function(){};cT.__typeName='tab.HitResultHitType';global.tab.HitResultHitType=cT;var cU=function(){};cU.__typeName='tab.HitResultObjectType';global.tab.HitResultObjectType=cU;var cV=function(){};cV.__typeName='tab.HitTargetColliders';global.tab.HitTargetColliders=cV;var cW=function(e,L,hy,hz,hA){this.$1=null;this.$0=null;this.$3=0;this.$4=0;this.$2=null;this.$9=0;this.$8=null;this.$6=null;this.$5=0;this.$7=0;this.$0=e;if(ss.isNullOrUndefined(hz)||tab.RectXYUtil.isEmpty(hz)){this.$2=null}else{this.$2=hz}if(ss.isNullOrUndefined(hy)){this.$4=-1}else{this.$4=hy}if(ss.isNullOrUndefined(hA)){this.$9=0}else{this.$9=hA}this.$3=L;this.$1=[]};cW.__typeName='tab.HitTargetNode';cW.findPaneNode=function(e){if(ss.isNullOrUndefined(e)){return null}while(e.$3!==0){if(e.get_nodeType()===1){return e}e=e.get_parent()}return null};cW.createRootNode=function(){return new cW({x:0,y:0,w:9999999,h:9999999},0)};global.tab.HitTargetNode=cW;var cX=function(){};cX.__typeName='tab.HitTargetType';global.tab.HitTargetType=cX;var cY=function(){this.$3=null;this.$4=null;this.$2=null;this.$1=null;var e=$('.tab-tvView .tabCanvas');this.$4=e.get(0);this.$3=this.$4.style.position;this.$4.style.position='absolute';this.$2=document.createElement('canvas');this.$2.width=this.$4.width;this.$2.height=this.$4.height;this.$2.style.position='absolute';this.$1=this.$4.parentNode;this.$1.appendChild(this.$2)};cY.__typeName='tab.HitTestDebugger';cY.get_instance=function(){if(ss.isNullOrUndefined(cY.$1)){cY.$1=new cY}return cY.$1};global.tab.HitTestDebugger=cY;var cZ=function(e){this.$5=null;this.$5=e};cZ.__typeName='tab.HitTester';cZ.$0=function(e,L,hy,hz,hA){switch(hA){case'area':{return en.$2(e,L.x-hz,L.y,hy)}case'line':{return en.$m(e,L.x-hz,L.y,hy)}case'multipolygon':{return en.$t(e,L.x-hz,L.y,hy)}case'pie':{return en.$x(e,L.x-hz,L.y,hy)}case'shape':{return en.$1x(e,L.x-hz,L.y,hy)}case'bar':case'square':{return en.$a(e,L.x-hz,L.y,hy)}case'text':{return en.$1F(e,L.x-hz,L.y,hy)}default:{var hB={x:L.x-Math.round(hz),y:L.y,w:L.w,h:L.h};return tab.RectXYUtil.intersectsWith(hB,e.getMarkBounds(hy))}}};cZ.$1=function(e,L,hy,hz,hA){switch(hA){case'line':{return en.$p(e,L.x-hz,L.y,hy)}case'shape':{return en.$1A(e,L.x-hz,L.y,hy)}case'bar':case'square':{return en.$d(e,L.x-hz,L.y,hy)}case'text':{return en.$1I(e,L.x-hz,L.y,hy)}case'area':{return en.$5(e,L.x-hz,L.y,hy)}default:{return false}}};cZ.rectangleAreaHit=function(e,L,hy,hz,hA,hB){var hC=(hA.get_isNull()?hy:tab.RectXYUtil.offsetRectF(hy,{x:-hA.get_translateX(),y:-hA.get_translateY()}));switch(hB){case'area':{return en.$7(e,hC,hz)}case'line':{return en.$r(e,hC,hz)}case'multipolygon':{var hD=hA.transformRect(hy);return en.$v(e,hD,hz)}case'pie':{return en.$z(e,hC,hz)}case'shape':{return en.$1C(e,hC,hz)}case'text':{return en.$1K(e,hC,hz)}case'bar':case'square':{return en.$f(e,hC,hz)}default:{return tab.RectXYUtil.intersectsWith(hy,L)}}};cZ.circleAreaHit=function(e,L,hy,hz,hA,hB,hC){var hD=(hA.get_isNull()?hy:tab.CircleUtil.offsetCircle(hy,{x:-hA.get_translateX(),y:-hA.get_translateY()}));var hE=(hA.get_isNull()?L:tab.RectXYUtil.offsetRectF(L,{x:-hA.get_translateX(),y:-hA.get_translateY()}));switch(hB){case'area':{return en.$1(e,hD,hz,hE,hC)}case'line':{return en.$l(e,hD,hz,hE,hC)}case'multipolygon':{var hF=hA.transformCircle(hy);return en.$s(e,hF,hz,hC)}case'pie':{return en.$w(e,hD,hz,hC)}case'shape':{return en.$1w(e,hD,hz,hC)}case'text':{return en.$1E(e,hD,hz,hE,hC)}case'bar':case'square':{return en.$9(e,hD,hz,hE,hC)}default:{return cR.circleIntersectsRect(hy,L)}}};cZ.polyAreaHit=function(e,L,hy,hz,hA,hB){var hC=(hA.get_isNull()?L:tab.RectXYUtil.offsetRectF(L,{x:-hA.get_translateX(),y:-hA.get_translateY()}));switch(hB){case'area':{return en.$6(e,hy,hz,hC)}case'line':{return en.$q(e,hy,hz,hC)}case'multipolygon':{return en.$u(e,hy,hz,hC)}case'pie':{return en.$y(e,hy,hz)}case'shape':{return en.$1B(e,hy,hz)}case'text':{return en.$1J(e,hy,hz,hC)}case'bar':case'square':{return en.$e(e,hy,hz,hC)}default:{return cR.polygonIntersectsRect(hy,hC)}}};cZ.getTransformInfo=function(e,L){var hy=e.get_paneRect();if(e.get_markType()==='multipolygon'&&!e.hasPixelGeometry){var hz=L.get_objectId();var hA=e.getMarkProperty('x',hz);var hB=e.getMarkProperty('y',hz);var hC=e.getMarkProperty('size',hz);return tab.Transform.pixelToDomain(hy.x+hA,hy.y+hB,hC)}var hD=L.get_worldOffset();return tab.Transform.offset(hy.x+hD,hy.y)};global.tab.HitTester=cZ;var da=function(e){da.$ctor1.call(this,e.get_index(),(ss.keyExists(da.$1,e.get_visualPart())?da.$1[e.get_visualPart()]:1),(ss.keyExists(da.$0,e.get_hitType())?da.$0[e.get_hitType()]:0))};da.__typeName='tab.HitTestResult';da.$ctor1=function(e,L,hy){this.$2=0;this.$0=0;this.$1=0;this.$3=false;this.$2=e;this.$0=L;this.$1=hy;this.$3=hy!==0};da.tieBreak=function(e,L){if(e.get_hitType()>L.get_hitType()||e.get_hitType()===L.get_hitType()&&(e.get_hitObjectType()>L.get_hitObjectType()||e.get_hitObjectType()===L.get_hitObjectType()&&e.get_id()>L.get_id())){return e}return L};da.getIdsFromHitTestResults=function(e,L){var hy=new tab.UintSet;for(var hz=0;hz<e.length;hz++){var hA=e[hz];hy.add(hA.get_id())}var hB=hy.get_values();if(L){hB.sort(function(hC,hD){return hC-hD})}return hB};da.hasExactHit=function(e){for(var L=0;L<e.length;L++){var hy=e[L];if(hy.get_hitType()===3){return true}}return false};da.tieBreakHits=function(e,L){var hy=new da.$ctor1(0,0,0);var hz=new da.$ctor1(0,0,0);for(var hA=0;hA<e.length;hA++){var hB=e[hA];if(hB.get_hitType()===3){return hB}if(hB.get_hitType()!==0&&hy.get_hitType()===0){hy=hB}}for(var hC=0;hC<L.length;hC++){var hD=L[hC];if(hD.get_hitType()===3){return hD}if(hD.get_hitType()!==0&&hz.get_hitType()===0){hz=hD}}if(hy.get_hitType()!==0){return hy}if(hz.get_hitType()!==0){return hz}return new da.$ctor1(0,0,0)};global.tab.HitTestResult=da;var db=function(){};db.__typeName='tab.HitTestStructureBuilder';db.buildBinnedHitTestStructure=function(e,L){var hy=cW.createRootNode();var hz=0;var hA=e.get_scene().HUq;for(var hB=0;hB<hA.length;hB++){var hC=hA[hB];var hD=db.$2(hC);for(var hE=0;hE<hD.length;hE++){var hF=hD[hE];var hG=e.$a(hF);var hH=hG.get_mapExtentOrPaneRect();var hI=new cW(hH,1);var hJ=fy.getPaneMarksKey(hF);hI.set_paneKey(hJ);hI.set_paneIndex(hF.hJq);hI.set_paneOrderIndex(hz++);hy.addNode(hI);var hK=Math.ceil(hH.w/L);for(var hL=0;hL<L;++hL){var hM=hL*hK+hH.x;var hN=hH.y;var hO=hK;var hP=hH.h;var hQ=new cW({x:hM,y:hN,w:hO,h:hP},2);hI.addNode(hQ)}var hR=db.buildMarkBounds(hG,0,hG.get_markCount()-1,hG.getAllMarkBounds());for(var hS=0;hS<hR.length;hS++){var hT=hR[hS];var hU=hI.get_children();for(var hV=0;hV<hU.length;hV++){var hW=hU[hV];if(tab.RectXYUtil.intersectsWith(hT.get_boundingBox(),hW.get_boundingBox())){hW.addNode(hT)}}}}}return hy};db.buildLinearHitTestStructure=function(e){var L=cW.createRootNode();var hy=0;var hz=e.get_scene().HUq;for(var hA=0;hA<hz.length;hA++){var hB=hz[hA];var hC=db.$2(hB);for(var hD=0;hD<hC.length;hD++){var hE=hC[hD];var hF=e.$a(hE);if(!ss.isValue(hF)){continue}var hG=db.$0(hE,hF,hy);L.addNode(hG);hy++}}return L};db.buildTrendLineHitTestStructure=function(e,L,hy){var hz=e.xCr;var hA=e.Dpc;var hB=Math.floor(hz.length/2);if(hB<2){return new cW({x:0,y:0,w:0,h:0},0)}var hC=[];var hD=0;for(var hE=0;hE<hA.length;hE++){var hF=hA[hE];switch(hF){case'moveto':{{hD+=2}break}case'lineto':{{if(ss.isValue(hz[hD+3])){var hG=[hz[hD],hz[hD+1],hz[hD+2],hz[hD+3]];var hH=ss.Int32.trunc(Math.min(hG[0],hG[2]));var hI=ss.Int32.trunc(Math.min(hG[1],hG[3]));var hJ=ss.Int32.trunc(Math.max(hG[0],hG[2]))-hH;var hK=ss.Int32.trunc(Math.max(hG[1],hG[3]))-hI;var hL={x:hH,y:hI,w:hJ,h:hK};hL=tab.RectXYUtil.dialate(hL,ss.Int32.trunc(L));var hM=new cW(hL,5,hy);hC.push(hM)}hD+=2}break}case'curveto':{{hD+=6}break}default:{{}break}}}var hN=db.$1(hC,4);return hN};db.buildMarkBounds=function(e,L,hy,hz){var hA=hy-L+1;var hB=[];var hC=0;for(var hD=L;hD<=hy;++hD){var hE=hz[hD].item1;var hF=hz[hD].item2;var hG=e.getMarkInstanceOffsets(hD);var hH=hG.length;for(var hI=0;hI<hH;hI++){var hJ=hE;var hK=hF;var hL=hG[hI];if(hL!==0){var hM=ss.Int32.trunc(hL);hJ=tab.RectXYUtil.offsetRectXY(hE,hM,0);hK=(ss.isValue(hF)?tab.RectXYUtil.offsetRectXY(hF,hM,0):null)}hB[hC]=new cW(hJ,3,hD,hK,hL);++hC}}return hB};db.print=function(e,L){var hy='';var hz=L;while(hz>0){hy+=' ';--hz}console.log(hy+e.get_objectId());if(e.get_nodeType()!==3){e.get_children().forEach(function(hA){db.print(hA,L+1)})}};db.$2=function(e){var L=[];for(var hy=0;hy<e.MdI.length;hy++){var hz=e.MdI[hy];if(hz.oqX==='marks'){L.push(hz.SgS)}}return L};db.$1=function(e,L){var hy=e;while(hy.length>1){var hz=[];for(var hA=0;hA<hy.length;hA+=L){var hB=L;var hC=hy.length-hA;if(hC<L){hB=hC}var hD=[];var hE=null;for(var hF=0;hF<hB;++hF){var hG=hy[hA+hF];hD.push(hG);if(hF===0){hE={x:hG.get_boundingBox().x,y:hG.get_boundingBox().y,w:hG.get_boundingBox().w,h:hG.get_boundingBox().h}}else{hE=tab.RectXYUtil.union(hE,hD[hF].get_boundingBox())}}var hH=new cW(hE,4);hH.addNodes(hD);hz.push(hH)}hy=hz}if(hy.length!==1){}var hI=cW.createRootNode();hI.addNodes(hy);return hI};db.$0=function(e,L,hy){var hz=L.get_mapExtentOrPaneRect();var hA=new cW(hz,1);var hB=fy.getPaneMarksKey(e);hA.set_paneKey(hB);hA.set_paneIndex(e.hJq);hA.set_paneOrderIndex(hy);var hC=(L.hasUserPanes?L.userPaneCount:1);var hD=L.get_paneRect().x;var hE=L.get_paneRect().y;var hF=L.getAllMarkBounds();for(var hG=0;hG<hC;++hG){var hH=tab.RectXYUtil.offsetRectXY(L.getUserPaneRectByIndex(hG),hD,hE);var hI=new cW(hH,6);var hJ=L.$d(hG);var hK=db.buildMarkBounds(L,hJ.firstMark,hJ.lastMark,hF);hI.addNodes(hK);hA.addNode(hI)}return hA};global.tab.HitTestStructureBuilder=db;var dc=function(){dG.call(this,"<div class='tabCatLegendScrollButtonHolder'><span class='tabCatLegendScrollPrev'/><span class='tabCatLegendScrollNext'/></div>")};dc.__typeName='tab.HorizontalIteratorButtonTemplate';global.tab.HorizontalIteratorButtonTemplate=dc;var dd=function(){};dd.__typeName='tab.IAccordionContent';global.tab.IAccordionContent=dd;var de=function(){};de.__typeName='tab.IApiStorytellingClient';global.tab.IApiStorytellingClient=de;var df=function(){};df.__typeName='tab.ICategoricalSelectionWidget';global.tab.ICategoricalSelectionWidget=df;var dg=function(){};dg.__typeName='tab.IClient';global.tab.IClient=dg;var dh=function(){};dh.__typeName='tab.IContentFetcher';global.tab.IContentFetcher=dh;var di=function(){};di.__typeName='tab.IContentFormatter';global.tab.IContentFormatter=di;var dj=function(){Object.call(this);if(tab.FeatureFlags.isEnabled('DashWebAuthSP2')){this['_stopClickEvents']=false}};dj.__typeName='tab.IDropDownSelect';global.tab.IDropDownSelect=dj;var dk=function(){};dk.__typeName='tab.IFilterTypeViewModel';global.tab.IFilterTypeViewModel=dk;var dl=function(){};dl.__typeName='tab.IFlipboardNavigatorViewModel';global.tab.IFlipboardNavigatorViewModel=dl;var dm=function(){};dm.__typeName='tab.IFlipboardViewModel';global.tab.IFlipboardViewModel=dm;var dn=function(){};dn.__typeName='tab.IHitTargetGeom';global.tab.IHitTargetGeom=dn;var dp=function(e,L,hy,hz,hA){this.$2=null;this.$1=0;this.$3=null;this.$0=null;this.$4=0;this.$2=e;this.$1=L;this.$3=hy;this.$0=hz;this.$4=hA};dp.__typeName='tab.ImageDownloaderImageData';global.tab.ImageDownloaderImageData=dp;var dq=function(e){this.$0=null;ss.EventArgs.call(this);this.$0=e};dq.__typeName='tab.ImageLoadedEventArgs';global.tab.ImageLoadedEventArgs=dq;var dr=function(){};dr.__typeName='tab.ImageUtil';dr.scaleImage=function(e,L,hy,hz,hA){var hB=document.createElement('canvas');hB.width=L;hB.height=hy;if(L>0&&hy>0){var hC=document.createElement('canvas');hC.width=hz;hC.height=hA;var hD=hC.getContext('2d');hD.drawImage(e,0,0);var hE=hD.getImageData(0,0,hz,hA);var hF=hB.getContext('2d');var hG=hF.createImageData(L,hy);dr.bilinearDownSampleAlgorithm(hE,hG);hF.putImageData(hG,0,0)}return hB};dr.bilinearDownSampleAlgorithm=function(e,L){var hy=e.width;var hz=e.height;var hA=hy/L.width;var hB=hz/L.height;var hC=hA;var hD=hB;var hE=e.data;var hF=L.data;var hG=new Array(hF.length);for(var hH=0;hH<hG.length;hH++){hG[hH]=0}var hI=1/(hA*hB);var hJ=0;var hK=0;var hL=false;var hM,hN;hM=hN=0;var hO=hI;var hP=0;var hQ=0;var hR=0;var hS=4*L.width;var hT,hU,hV,hW;for(var hX=0;hX<hz;hX++){hC=hA;for(var hY=0;hY<hy;hY++){hT=hE[hJ];hU=hE[hJ+1];hV=hE[hJ+2];hW=hE[hJ+3];hO=hI;if(hL){hO=hM;hQ=hN;if(hC<1){hQ*=hC}var hZ=hK+hS;hG[hZ]+=hT*hQ;hG[hZ+1]+=hU*hQ;hG[hZ+2]+=hV*hQ;hG[hZ+3]+=hW*hQ}if(hC<1){hP=hO*(1-hC);hO*=hC;if(hL){hR=hN*(1-hC);var ia=hK+hS;hG[ia+4]+=hT*hR;hG[ia+5]+=hU*hR;hG[ia+6]+=hV*hR;hG[ia+7]+=hW*hR}hG[hK+4]+=hT*hP;hG[hK+5]+=hU*hP;hG[hK+6]+=hV*hP;hG[hK+7]+=hW*hP}hG[hK++]+=hT*hO;hG[hK++]+=hU*hO;hG[hK++]+=hV*hO;hG[hK++]+=hW*hO;hJ+=4;hC-=1;if(hC<dr.$0){hC+=hA}else{hK-=4}}hD-=1;if(hD<dr.$0){hD+=hB}else{hK-=hS}if(hD<1){hL=true;hM=hD/(hA*hB);hN=(1-hD)/(hA*hB)}else{hL=false}}for(var ib=0;ib<hG.length;ib++){hF[ib]=hG[ib]+0.5}};global.tab.ImageUtil=dr;var ds=function(){spiff.Template.call(this,$("<div class='tab-image'></div>"))};ds.__typeName='tab.ImageZoneTemplate';global.tab.ImageZoneTemplate=ds;var dt=function(e,L){this.$l=null;this.$k=null;this.$j=null;ss.makeGenericType(spiff.BaseView$1,[du]).call(this,e,new ds);this.$l=L;this.$i().add_newImageZone(ss.mkdel(this,this.handleNewImageZone));this.$l.add_resizeZone(ss.mkdel(this,this.$d));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$i().remove_newImageZone(ss.mkdel(this,this.handleNewImageZone));this.$l.remove_resizeZone(ss.mkdel(this,this.$d));this.$l=null})))};dt.__typeName='tab.ImageZoneView';global.tab.ImageZoneView=dt;var du=function(e){this.$2=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$2=e;this.$2.add_newImageZone(ss.mkdel(this,this.handleNewImageZone));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$2.remove_newImageZone(ss.mkdel(this,this.handleNewImageZone))})))};du.__typeName='tab.ImageZoneViewModel';global.tab.ImageZoneViewModel=du;var dv=function(){};dv.__typeName='tab.IMapsSearchViewTemplate';global.tab.IMapsSearchViewTemplate=dv;var dw=function(e){gT.call(this)};dw.__typeName='tab.IMenuItem';global.tab.IMenuItem=dw;var dx=function(){};dx.__typeName='tab.IMovable';global.tab.IMovable=dx;var dy=function(){this.$0=null;this.$0=null};dy.__typeName='tab.IntersectionFontFamilyProviderBuilder';global.tab.IntersectionFontFamilyProviderBuilder=dy;var dz=function(){};dz.__typeName='tab.IPaneContent';global.tab.IPaneContent=dz;var dA=function(){};dA.__typeName='tab.IPaneContentSidebarProvider';global.tab.IPaneContentSidebarProvider=dA;var dB=function(){};dB.__typeName='tab.IRegionContentProvider';global.tab.IRegionContentProvider=dB;var dC=function(){};dC.__typeName='tab.ISlider';global.tab.ISlider=dC;var dD=function(){};dD.__typeName='tab.IStoryModule';global.tab.IStoryModule=dD;var dE=function(){};dE.__typeName='tab.IStoryPointCaptionViewModel';global.tab.IStoryPointCaptionViewModel=dE;var dF=function(e,L,hy){this.$a=null;this.$c=null;this.$8=new tab.DisposableHolder;this.$9=false;this.$b=0;this.$a=e;if(L){this.$c=new dc}else{this.$c=new gY}this.$b=100;this.$9=L;this.$c.$1();this.$c.nextButton.width(hy).height(hy).css('line-height',hy+'px');this.$c.prevButton.width(hy).height(hy).css('line-height',hy+'px');this.$8.add$1(spiff.EventUtil.bindWithDispose(this.$c.nextButton,'click',ss.mkdel(this,this.$2)));this.$8.add$1(spiff.EventUtil.bindWithDispose(this.$c.prevButton,'click',ss.mkdel(this,this.$3)));this.updateButtonState()};dF.__typeName='tab.IteratorButtons';global.tab.IteratorButtons=dF;var dG=function(e){this.prevButton=null;this.nextButton=null;spiff.Template.call(this,$(e));this.prevButton=this.getElementBySelector('.tabCatLegendScrollPrev');this.nextButton=this.getElementBySelector('.tabCatLegendScrollNext')};dG.__typeName='tab.IteratorButtonTemplate';global.tab.IteratorButtonTemplate=dG;var dH=function(){};dH.__typeName='tab.ITiledGridModel';global.tab.ITiledGridModel=dH;var dI=function(){};dI.__typeName='tab.ITiledWidgetUI';global.tab.ITiledWidgetUI=dI;var dJ=function(){};dJ.__typeName='tab.ITooltipBehavior';global.tab.ITooltipBehavior=dJ;var dK=function(){this.$h=null;this.$k=null;this.$i=null;this.$j=null;this.$m=null;this.$n=0;this.$l=false;this.$g=null};dK.__typeName='tab.LeafletMapControl';dK.$0=function(e){var L=256;var hy=document.createElement('canvas');hy.width=L;hy.height=L;var hz=bb.getRenderContext(hy,'transparent');hz.set_shapeFillStyle(e);hz.fillRect(0,0,256,256);var hA=hy.toDataURL('png',null);return hA};dK.$2=function(e){return new L.LatLng(e.item1,e.item2)};dK.$1=function(e,L,hy){var hz=Math.pow(2,e)*hy;var hA=Math.floor(L*hz);return hA};global.tab.LeafletMapControl=dK;var dL=function(e){this.widgetsInTemplate=true;this.$e=null;this.getContextMenuCommands=null;this.requestSetAttributes=null;this.session=null;this.field='';this.filterViewModel=null;this.presModel=null;this.applyDelay=1000;this.attributes={};this.isTypeInList=false;this.domContent=null;this.domBox=null;this.searchDiv=null;this.resetButton=null;this.domainButton=null;this.menuButton=null;this.stateId=0;this.$g=null;this.singleSelectMenuItem=null;this.multiSelectMenuItem=null;this.inclusiveMenuItem=null;this.exclusiveMenuItem=null;this.getSID=null;this.mode=null;this.metricsOnly=false;this.searchButton=null;this.domControls=null;this.titleH=0;this.titleW=0;this.width=0;this.modeContents=null;this.domHorizScroll=null;this.conditionals=null;this.showContextMenu=null;this.$f=null;dY.call(this);this.$e=new bo(this)};dL.__typeName='tab.LegacyCategoricalQuickFilter';dL.$0=function(e,L){if(ss.isNullOrUndefined(e)){return true}var hy=e.table.tuples;var hz=L.table.tuples;if(hy.length!==hz.length){return true}for(var hA=0,hB=hy.length;hA<hB;hA++){if(!ss.referenceEquals(hy[hA].t[0].v,hz[hA].t[0].v)){return true}}return false};dL.$1=function(e,L){if(ss.isNullOrUndefined(e)){return true}var hy=ss.isValue(e.all)&&e.all;var hz=ss.isValue(L.all)&&L.all;return hy!==hz&&hz};global.tab.LegacyCategoricalQuickFilter=dL;var dM=function(e){this.$2=null;spiff.BaseViewModel.call(this);this.$2=e;this.$2.add_filterUpdated(ss.mkdel(this,this.handleUpdateFilterContent))};dM.__typeName='tab.LegacyCategoricalQuickFilterViewModel';global.tab.LegacyCategoricalQuickFilterViewModel=dM;var dN=function(){this.buttons='None';this.title='';this.onYes=function(){};this.onNo=function(){};this.$6=null;this.$5=null;dijit.Dialog.call(this)};dN.__typeName='tab.LegacyDialog';global.tab.LegacyDialog=dN;var dO=function(e){this.templateString="<div class='HierarchicalFilter'><div dojoAttachPoint='domBox' class='HierarchicalFilterBox'><div class='TitleAndControls' dojoAttachPoint='domControls'><div class='FilterTitle' dojoAttachPoint='domTitleBar'></div><div dojoType='dijit.form.Button' class='HFButton HFSearchButton' showlabel='false'dojoAttachPoint='searchButton' dojoAttachEvent='onClick:toggleSearchUI'iconClass='wcIconSearch'>Search</div><div dojoType='dijit.form.Button' class='HFButton HFMenuButton' dojoAttachPoint='menuButton'name='type' dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'></div></div><div dojoAttachPoint='searchDiv'></div><div class='HFLevels tab-ctrl-formatted-coloronly' dojoAttachPoint='domLevelBox'><table cellspacing='2'><tr dojoAttachPoint='domLevelContainer'></tr></table></div><div class='HFSelection tab-ctrl-formatted-text' dojoAttachPoint='domContent'></div><div dojoType='tableau.base.widget.ConditionalsWidget' dojoAttachPoint='conditionals'></div></div></div>";this.widgetsInTemplate=true;this.$b=[];this.session=null;this.field='';this.filterViewModel=null;this.$9=500;this.attributes={};this.stateId=0;this.$d=0;this.$e=0;this.domBox=null;this.domLevelBox=null;this.domContent=null;this.domControls=null;this.searchDiv=null;this.searchButton=null;this.RANGE_START='minValue';this.RANGE_END='maxValue';this.$a=null;this.$c=null;this.tree=null;this._applyTimer=null;this.searchWidget=null;this.menuButton=null;this.conditionals=null;this.domLevelContainer=null;this.metricsOnly=false;this.getContextMenuCommands=null;this.showContextMenu=null;this.requestSetAttributes=null;dY.call(this)};dO.__typeName='tab.LegacyHierarchicalQuickFilter';dO.$0=function(e,L){var hy=tab.ColorModel.fromColorCode(L);var hz=tab.ColorModel.fromColorCode(e.YhU);var hA=tab.ColorModel.alphaCompositeSolidDest(tab.ColorModel.fromColorModelPlusAlpha(hz,0.235294118523598),hy);var hB={'border-width':'1px','border-style':'solid','border-color':hA.toRgb()};tab.StyleUtil.appendCSSRule('.HFLevels td.HFLevelNoneSelected',hB);var hC=tab.ColorModel.alphaCompositeSolidDest(tab.ColorModel.fromColorModelPlusAlpha(hz,0.411764711141586),hy);var hD={'border-color':hC.toRgb()};tab.StyleUtil.appendCSSRule('.HFLevels td.HFLevelSomeSelected',hD);tab.StyleUtil.appendCSSRule('.HFLevels td.HFLevelAllSelected',hD);var hE=tab.ColorModel.fromColorCode(L);var hF=tab.ColorModel.alphaCompositeSolidDest(tab.ColorModel.fromColorModelPlusAlpha(hy,0.39215686917305),dO.$8);var hG=tab.ColorModel.alphaCompositeSolidDest(tab.ColorModel.fromColorModelPlusAlpha(hy,0.549019634723663),dO.$8);if(hE.luminance()>95){hF=dO.$4;hG=dO.$2}var hH={'background-color':hF.toRgb()};var hI={'background-color':hG.toRgb()};var hJ={'background-color':hE.toRgb()};tab.StyleUtil.appendCSSRule('.HFLevels td.HFLevelAllSelected',hH);tab.StyleUtil.appendCSSRule('.HFLevels td.HFLevelSomeSelected',hI);tab.StyleUtil.appendCSSRule('.HFLevels td.HFLevelNoneSelected',hJ)};global.tab.LegacyHierarchicalQuickFilter=dO;var dP=function(e){this.$2=null;spiff.BaseViewModel.call(this);this.$2=e};dP.__typeName='tab.LegacyHierarchicalQuickFilterViewModel';global.tab.LegacyHierarchicalQuickFilterViewModel=dP;var dQ=function(e){this.domBox=null;this.domContent=null;this.domHighlighter=null;this.domImageBody=null;ec.call(this,e);this.domBox=this.getElementBySelector('.LegendBox');this.domContent=this.getElementBySelector('.LegendContent');this.domHighlighter=this.getElementBySelector('.tabLegendHighlighter');this.domImageBody=this.getElementBySelector('.LegendImageBody')};dQ.__typeName='tab.LegacyLegendTemplate';global.tab.LegacyLegendTemplate=dQ;var dR=function(e,L){this.$i=[];this.legacyLegendViewModel=null;this.$g=null;this.$j=0;this.eventHandler=null;this.iterButtons=null;this.$h=0;this.bodyOffset={x:0,y:0};this.bodySize=null;ss.makeGenericType(Y,[dS]).call(this,e,L);this.legacyLegendViewModel=e;this.legacyLegendViewModel.add_newLegacyLegend(ss.mkdel(this,this.handleNewLegacyLegend));this.legacyLegendViewModel.add_validStateChanged(ss.mkdel(this,this.handleValidStateChanged));this.$e()};dR.__typeName='tab.LegacyLegendView';global.tab.LegacyLegendView=dR;var dS=function(e,L,hy){this.$h=null;this.$i=null;this.$3$1=null;this.$3$2=null;ea.call(this,L,hy);this.$h=e;this.$h.add_newLegacyLegend(ss.mkdel(this,this.handleNewLegacyLegend));this.get_visualModel().add_urlInfoCacheChange(ss.mkdel(this,this.$c));this.$i=hy;this.$i.add_validStateChanged(ss.mkdel(this,this.handleZoneValidStateChanged))};dS.__typeName='tab.LegacyLegendViewModel';global.tab.LegacyLegendViewModel=dS;var dT=function(e){this.$p=0;this.$n=null;this.$o=null;this.$m=false;dU.call(this,e)};dT.__typeName='tab.LegacyQuantitativeDateQuickFilter';dT.getDateTimeFormatMode=function(e,L,hy,hz){if(ss.isNullOrUndefined(hy)||ss.isNullOrUndefined(hy.isAutoFormat)||!hy.isAutoFormat){return 0}if(dT.isPureTime(e,L)){return 1}if(hz===2){return 2}for(var hA=0;hA<e.length;hA++){var hB=e[hA];if(ss.isNullOrUndefined(hB)||!ss.isValue(hB.v)){continue}var hC={t:hB.t,v:ss.unbox(hB.v)};if(tableau.format.isDateTimeWithNonMidnightTime(hC)){return 2}}return 0};dT.isPureTime=function(e,L){var hy=tab.LegacyFilterModel.timestampsWithSameDateOrNull(e);var hz=L==='trunc-qtr'||L==='trunc-week'||L==='trunc-day';return hy&&!hz};global.tab.LegacyQuantitativeDateQuickFilter=dT;var dU=function(e){this.templateString="<div class='QuantitativeFilter'><div class='QuantitativeFilterBox' dojoAttachPoint='domBox'><div class='TitleAndControls' dojoAttachPoint='domControls'><div class='QFTitle' dojoAttachPoint='domTitleBar'></div><div dojoType='dijit.form.Button' class='QFButton QFResetButton' showlabel='false'dojoAttachPoint='resetButton' dojoAttachEvent='onClick:toggleReset'iconClass='wcIconNonfiltered'>Showing all values</div><div dojoType='dijit.form.Button' class='QFButton QFDomainButton' showlabel='false'dojoAttachPoint='domainButton' dojoAttachEvent='onClick:toggleDomain'iconClass='wcIconDomainAll'>Show Smaller Range</div><div dojoType='dijit.form.Button' class='QFButton QFMenuButton' name='type' dojoAttachPoint='menuButton'dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'></div></div><div class='QFContent' dojoAttachPoint='domContent'><div class='QFReadout QFLowerBound tab-ctrl-formatted-border-hover' dojoAttachEvent='onclick:showLowerInput' dojoAttachPoint='domLowerBound'><span class='readoutText tab-ctrl-formatted-fixedsize' dojoAttachPoint='domLowerText'></span><input type='text' dojoAttachPoint='domLowerInput'></input></div><div class='QFReadout QFUpperBound tab-ctrl-formatted-border-hover' dojoAttachEvent='onclick:showUpperInput' dojoAttachPoint='domUpperBound'><span class='readoutText tab-ctrl-formatted-fixedsize' dojoAttachPoint='domUpperText'></span><input type='text' dojoAttachPoint='domUpperInput'></input></div><div dojoAttachPoint='domBar' class='QFSlider QFBar'><div dojoAttachPoint='domRange' class='QFRange' dojoAttachEvent='onmousedown:startRangeCapture'><div dojoAttachPoint='domHighlight' class='QFRangeHighlight'></div></div></div><span dojoAttachPoint='domLowerImg' class='QFSlider QFImg QFIconFilterLeft' dojoAttachEvent='onmousedown:startLowerCapture'></span><span dojoAttachPoint='domUpperImg' class='QFSlider QFImg QFIconFilterRight' dojoAttachEvent='onmousedown:startUpperCapture'></span></div></div></div>";this.getContextMenuCommands=null;this.requestSetAttributes=null;this.attributes={};this.widgetsInTemplate=true;this.global=false;this.templateRoot=null;this.session=null;this.field='';this.filterViewModel=null;this.presModel=null;this.$b=200;this.$c=null;this.$e=10;this.rid=0;this.timestamp=0;this.domContent=null;this.domControls=null;this.domLowerText=null;this.domUpperText=null;this.domLowerInput=null;this.domUpperInput=null;this.domBar=null;this.domRange=null;this.domHighlight=null;this.domLowerImg=null;this.domUpperImg=null;this.domLowerBound=null;this.domUpperBound=null;this.resetButton=null;this.menuButton=null;this.domainButton=null;this.lastLowerOffset=0;this.lastUpperOffset=0;this.classQF='QF';this.classQFButtonR='QFButtonR';this.classQFButtonHide='QFButtonHide';this.classQFDisabled='QFDisabled';this.classQFCenterText='QFCenterText';this.classQFHideButtons='QFHideButtons';this.classQFHideSlider='QFHideSlider';this.classQFHideReadout='QFHideReadout';this.classQFResetDisabled='QFResetDisabled';this.oCurrentMin=null;this.oCurrentMax=null;this.oRangeMin=null;this.oRangeMax=null;this.oDataMin=null;this.oDataMax=null;this.rangeMinOverride=null;this.rangeMaxOverride=null;this.previousMinVal=null;this.previousMaxVal=null;this.metricsOnly=false;this.oMetrics=null;this.titleH=0;this.titleW=0;this.$f=null;this.precision=0;this.captureInfo=null;this.showInputStartValue=null;this.mode=null;this.showContextMenu=null;this.$d=null;dY.call(this)};dU.__typeName='tab.LegacyQuantitativeQuickFilter';global.tab.LegacyQuantitativeQuickFilter=dU;var dV=function(e){this.$2=null;spiff.BaseViewModel.call(this);this.$2=e};dV.__typeName='tab.LegacyQuantitativeQuickFilterViewModel';global.tab.LegacyQuantitativeQuickFilterViewModel=dV;var dW=function(e){this.$c=null;ss.makeGenericType(spiff.BaseView$1,[dX]).call(this,e,new ff);this.$b().add_updateQuickFilterDisplay(ss.mkdel(this,this.handleUpdateQuickFilterDisplay));this.$b().add_resized(ss.mkdel(this,this.updateSize));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$b().remove_updateQuickFilterDisplay(ss.mkdel(this,this.handleUpdateQuickFilterDisplay))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$b().remove_resized(ss.mkdel(this,this.updateSize))})));this.$b().add_updateQuickFilterContent(ss.mkdel(this,this.handleUpdateQuickFilterContent));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$b().remove_updateQuickFilterContent(ss.mkdel(this,this.handleUpdateQuickFilterContent))})));if(this.$b().get_hasBorder()){this.get_template().get_domRoot().addClass('tabBordered')}};dW.__typeName='tab.LegacyQuickFilterDisplayView';global.tab.LegacyQuickFilterDisplayView=dW;var dX=function(e,L){this.$a=null;this.$6=null;this.$8=true;this.$9=true;this.$7=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this);this.$6=L;this.$6.add_filterUpdated(ss.mkdel(this,this.$5));this.$a=e;this.$a.add_quickFilterDisplayUpdated(ss.mkdel(this,this.handleUpdateQuickFilterDisplay));this.$a.get_zoneModel().add_resizeZone(ss.mkdel(this,this.$4));this.$3()};dX.__typeName='tab.LegacyQuickFilterDisplayViewModel';global.tab.LegacyQuickFilterDisplayViewModel=dX;var dY=function(){this.titleHTML=null;this.format={};this.backgroundColor=null;this.textStyle=null;this.domTitleBar=null;this.oFilter=null;Object.call(this)};dY.__typeName='tab.LegacyQuickFilterWidget';global.tab.LegacyQuickFilterWidget=dY;var dZ=function(e){this.templateString="<div class='RelativeDateFilter'><div class='RelativeDateFilterBox' dojoAttachPoint='domBox'><div class='TitleAndControls' dojoAttachPoint='domControls'><div class='FilterTitle' dojoAttachPoint='domTitleBar'></div><div dojoType='dijit.form.Button' class='RDFButton RDFMenuButton' name='type' dojoAttachPoint='menuButton'dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'></div></div><div dojoType='dijit.form.DropDownButton' dojoAttachPoint='domDropdownButton'><span class='RDText'>date description</span><div dojoType='dijit.TooltipDialog' dojoAttachPoint='domTooltipDialog'><div class='RelativeDateFilterDialog' dojoAttachPoint='domDialog'><div class='RangeButtonsBar'><div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPYear'dojoAttachPoint='buttonYear' name='year'>Years</div><div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPQuarter'dojoAttachPoint='buttonQuarter' name='quarter'>Quarters</div><div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPMonth'dojoAttachPoint='buttonMonth' name='month'>Months</div><div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPWeek'dojoAttachPoint='buttonWeek' name='week'>Weeks</div><div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPDay'dojoAttachPoint='buttonDay' name='day'>Days</div><div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPHour'dojoAttachPoint='buttonHour' name='hour'>Hours</div><div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPMinute'dojoAttachPoint='buttonMinute' name='minute'>Minutes</div></div><div class='vertSpacer topHR'></div><div class='radioLine'><div class='column1'><input class='rradio' type='radio' name='radio-${field}' value='last'dojoAttachPoint='radioLast' dojoAttachEvent='onclick:setRLast'></input><span class='rlabel' dojoAttachPoint='textLast' dojoAttachEvent='onclick:setRLast'></span></div><div class='column2'><input class='rradio' type='radio' name='radio-${field}' value='lastn'dojoAttachPoint='radioLastn' dojoAttachEvent='onclick:setRLastn'></input><span class='rlabel alignLN' dojoAttachPoint='textLastn1' dojoAttachEvent='onclick:setRLastn'></span><input class='rtext' type='text' size='2' dojoAttachPoint='inputLastn' value='3'dojoAttachEvent='onkeyup:onTypingLast'></input><span class='spinner' dojoAttachPoint='lastSpinner'><div class='spinnerElement spinnerUp' dojoAttachPoint='lastUp'dojoAttachEvent='onmouseover:overLastUp,onmouseout:outLastUp,onclick:upLast'></div><div class='spinnerElement spinnerDown' dojoAttachPoint='lastDown'dojoAttachEvent='onmouseover:overLastDown,onmouseout:outLastDown,onclick:downLast'></div></span><span class='rlabel' dojoAttachPoint='textLastn2' dojoAttachEvent='onclick:setRLastn'></span></div></div><div class='radioLine'><div class='column1'><input class='rradio' type='radio' name='radio-${field}' value='curr'dojoAttachPoint='radioCurr' dojoAttachEvent='onclick:setRCurr'></input><span class='rlabel' dojoAttachPoint='textCurr' dojoAttachEvent='onclick:setRCurr'></span></div><div class='column2'><input class='rradio' type='radio' name='radio-${field}' value='nextn'dojoAttachPoint='radioNextn' dojoAttachEvent='onclick:setRNextn'></input><span class='rlabel alignLN' dojoAttachPoint='textNextn1' dojoAttachEvent='onclick:setRNextn'></span><input class='rtext' type='text' size='2' dojoAttachPoint='inputNextn' value='3'dojoAttachEvent='onkeyup:onTypingNext'></input><span class='spinner' dojoAttachPoint='nextSpinner'><div class='spinnerElement spinnerUp' dojoAttachPoint='nextUp'dojoAttachEvent='onmouseover:overNextUp,onmouseout:outNextUp,onclick:upNext'></div><div class='spinnerElement spinnerDown' dojoAttachPoint='nextDown'dojoAttachEvent='onmouseover:overNextDown,onmouseout:outNextDown,onclick:downNext'></div></span><span class='rlabel' dojoAttachPoint='textNextn2' dojoAttachEvent='onclick:setRNextn'></span></div></div><div class='radioline'><div class='column1'><input class='rradio' type='radio' name='radio-${field}' value='next'dojoAttachPoint='radioNext' dojoAttachEvent='onclick:setRNext'></input><span class='rlabel' dojoAttachPoint='textNext' dojoAttachEvent='onclick:setRNext'></span></div><div class='column2'><input class='rradio' type='radio' name='radio-${field}' value='todate'dojoAttachPoint='radioTodate' dojoAttachEvent='onclick:setRTodate'></input><span class='rlabel' dojoAttachPoint='textTodate' dojoAttachEvent='onclick:setRTodate'></span></div></div><div class='vertSpacer bottomHR'></div><div class='preview'><span dojoAttachPoint='domPreview'></span></div></div></div></div></div></div>";this.widgetsInTemplate=true;this.session=null;this.field='';this.filterViewModel=null;this.stateId=0;this.rid=0;this.timestamp=0;this.$9=[];this.titleH=0;this.titleW=0;this.layoutSession=null;this.getContextMenuCommands=null;this.showContextMenu=null;this.zid=0;this.domText=null;this.domDropdownButton=null;this.domDialog=null;this.$a=[];this.buttonYear=null;this.buttonQuarter=null;this.buttonMonth=null;this.buttonWeek=null;this.buttonDay=null;this.buttonHour=null;this.buttonMinute=null;this.radioLast=null;this.radioCurr=null;this.radioNext=null;this.radioLastn=null;this.radioNextn=null;this.inputNextn=null;this.lastSpinner=null;this.nextSpinner=null;this.lastUp=null;this.lastDown=null;this.nextUp=null;this.nextDown=null;this.domNode=null;this.domTooltipDialog=null;this.menuButton=null;this.$7='RDFButtonR';this.$6='RDFButtonHide';this.$8=new tab.DisposableHolder;this.getSID=null;this.attributes=null;this.requestSetAttributes=null;cc.call(this)};dZ.__typeName='tab.LegacyRelativeDateQuickFilter';dZ.get_anchoredDescriptions=function(){if(ss.isNullOrUndefined(dZ.$1)){dZ.$0()}return dZ.$1};dZ.get_nonAnchoredDescriptions=function(){if(ss.isNullOrUndefined(dZ.$2)){dZ.$0()}return dZ.$2};dZ.$0=function(){dZ.$1={};dZ.$2={};var e=tab.Strings;var L=ss.Enum.getValues(fr);for(var hy=0;hy<L.length;hy++){var hz=L[hy];var hA={};var hB={};var hC=ss.Enum.getValues(fs);for(var hD=0;hD<hC.length;hD++){var hE=hC[hD];var hF=ss.formatString('RelDateAnchored_{0}_{1}',hE,hz);hA[hE]=e[hF];hF=ss.formatString('RelDate_{0}_{1}',hE,hz);hB[hE]=e[hF]}dZ.$1[hz]=hA;dZ.$2[hz]=hB}};global.tab.LegacyRelativeDateQuickFilter=dZ;var ea=function(e,L){this.$b=null;this.$9=null;this.$a=null;spiff.BaseViewModel.call(this);this.$b=e;this.$9=L;this.$9.add_propertyChanged(ss.mkdel(this,this.$2));this.$9.add_resizeZone(ss.mkdel(this,this.$3));this.$2(this.$9,new spiff.PropertyChangedEventArgs('newZoneParent'))};ea.__typeName='tab.LegendBaseViewModel';global.tab.LegendBaseViewModel=ea;var eb=function(e,L,hy,hz,hA){this.selectedItems=null;this.brushedItems=null;this.isHighlightingEnabled=false;this.hasMarkNodeSelection=false;this.isOneway=false;this.selectedItems=e.slice(0);this.brushedItems=L.slice(0);this.isHighlightingEnabled=hy;this.hasMarkNodeSelection=hz;this.isOneway=hA};eb.__typeName='tab.LegendSelectionState';global.tab.LegendSelectionState=eb;var ec=function(e){this.legendContentArea=null;this.titleArea=null;spiff.Template.call(this,e);this.titleArea=this.getElementBySelector('.tabLegendTitle')};ec.__typeName='tab.LegendTemplate';global.tab.LegendTemplate=ec;var ed=function(e){this.startIndex=0;this.endIndex=0;this.selectedCount=0;this.highlightedCount=0;this.minX=0;this.maxX=0;this.marksNeedingDraw=[];this.worldOffsets=null;this.startIndex=e;this.endIndex=-1;this.selectedCount=0;this.highlightedCount=0;this.minX=0;this.maxX=0};ed.__typeName='tab.LineAttribute';global.tab.LineAttribute=ed;var ee=function(e){this.$1=null;this.$1=[];this.$0(e)};ee.__typeName='tab.LineMarkDrawState';global.tab.LineMarkDrawState=ee;var ef=function(e,L,hy,hz){this.$1=0;this.$2=0;this.$4=0;this.$6=0;this.$5=0;this.$3=0;this.$0=null;this.$1=e;this.$2=L;this.$4=hy;this.$6=hz;this.$5=this.$1*this.$2;this.$3=Math.ceil(e/hy);this.$0={};var hA=0;var hB=hy*L;var hC=this.$5;for(var hD=0;hD<this.$3;++hD){if(hC<hB){hB=hC}var hE=new tab.IntegerRange(hA,hA+hB-1);var hF=tab.IntegerRange.pixelToItemRange(hE,L);var hG=new s(hD,false,{x:0,y:hA},hF,'item');this.$0[hD]=hG;hC-=hB;hA+=hB}};ef.__typeName='tab.ListGridModel';global.tab.ListGridModel=ef;var eg=function(e,L){hi.call(this,e,L)};eg.__typeName='tab.LocalRenderVizHitTester';global.tab.LocalRenderVizHitTester=eg;var eh=function(){};eh.__typeName='tab.LocalSearch';eh.searchQueryMatchesText=function(e,L){var hy=e.length;var hz;if(e.charCodeAt(0)===39&&e.charCodeAt(hy-1)===39){return ss.referenceEquals(e.substr(1,hy-2),L)}else if(e.charCodeAt(0)!==42&&e.charCodeAt(hy-1)===42){return L.indexOf(e.substr(0,hy-1))===0}else if(e.charCodeAt(0)===42&&e.charCodeAt(hy-1)!==42){hz=L.lastIndexOf(e.substr(1,hy-1));return hz>=0&&hz===L.length-(hy-1)}else if(e.charCodeAt(0)===42&&e.charCodeAt(hy-1)===42){return L.indexOf(e.substr(1,hy-2))>=0}else{return L.indexOf(e)>=0}};eh.findMatches=function(e,L,hy,hz){var hA=e.toLowerCase();var hB=[];var hC=L.table.tuples;if(ss.isNullOrUndefined(hz)){hz=function(hF,hG,hH){return hF}}for(var hD=0;hD<hC.length;hD++){var hE=hy(hC[hD]);if(eh.searchQueryMatchesText(hA,hE.toLowerCase())){hB.push(hz(hC[hD],hE,hD))}}return hB};global.tab.LocalSearch=eh;var ei=function(e){this.logOnViewModel=null;this.$d=null;ss.makeGenericType(spiff.BaseView$1,[ej]).call(this,e,spiff.Template.fromHtml("<div class='tabLogon'>"));this.logOnViewModel=e;var L=$('<div>');var hy=spiff.StyledTextButton.createActionButton(ss.mkdel(this,this.$b),tab.Strings.LogOnButton,'tabLogOnDialogButton',2,1);L.append(hy.get_element());this.get_element().append(L);this.disposables.add$1(hy);this.logOnViewModel.add_shown(ss.mkdel(this,this.$c));this.logOnViewModel.add_hidden(ss.mkdel(this,this.$9));this.$d=new spiff.ModalDialog(' ',this.get_element());this.$d.get_dialogElement().addClass('tabLogonDialog');this.$d.add_closed(ss.mkdel(this,function(){this.logOnViewModel.cancel()}));this.disposables.add$1(this.$d);ei.$0=ss.mkdel(this,this.$a)};ei.__typeName='tab.LogOnView';ei.fireLogOnComplete=function(){if(ss.isValue(ei.$0)){ei.$0()}};global.tab.LogOnView=ei;var ej=function(){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.call(this)};ej.__typeName='tab.LogOnViewModel';ej.logOnAndTransitionSession=function(e){var L=new ej;L.showLogOn();var hy=function(){L.dispose();tab.SaveServerCommands.transitionSessionAfterLogon(function(){tabBootstrap.ViewerBootstrap.get_instance().disableClearSessionOnBrowserUnload();e.removeHash();tab.WindowHelper.setLocationHref(window.self,e.get_absoluteUri())})};L.add_logOnCompleted(hy);var hz=function(){L.dispose()};L.add_logOnCanceled(hz);L.disposables.add$1(new tab.CallOnDispose(function(){L.remove_logOnCompleted(hy);L.remove_logOnCanceled(hz)}))};global.tab.LogOnViewModel=ej;var ek=function(){this.attributionBackground=null;this.attributionLink=null;spiff.Template.call(this,$(ek.$0));this.attributionBackground=this.getElementBySelector('.tabMapAttributionBackground');this.attributionLink=this.getElementBySelector('.tabMapAttributionLink')};ek.__typeName='tab.MapAttributionTemplate';global.tab.MapAttributionTemplate=ek;var el=function(e,L){this.mapsSearchViewModel=null;this.mapsSearchViewTemplate=null;this.$h=null;this.mapsSearchView=null;this.gotoMyLocationButton=null;this.$l=null;this.$i=false;this.$j=true;this.$k=null;this.queryDelayTimer=null;ss.makeGenericType(spiff.BaseView$1,[em]).call(this,e,L.get_template());this.mapsSearchViewModel=e;this.mapsSearchViewTemplate=L;this.$h=L.get_compositeSearchWidget();this.mapsSearchView=L.get_template().get_domRoot().find('.tabMapsSearchView');this.set_isVisible(false);var hy=this.get_compositeSearchWidget();var hz=new spiff.CompositeSearchWidgetInitialSearchTextInfo;hz.initialSearchText=tab.Strings.MapsSearchViewInitialText;hz.initialSearchTextDomClassName='tabMapsSearchViewInitialText';hy.initialSearchTextInfo=hz;this.get_compositeSearchWidget().showInitialSearchText(true);this.get_compositeSearchWidget().get_domRoot().addClass('tabMapsSearchView');this.mapsSearchView.addClass('tabMapsSearchViewTranslucent');this.get_compositeSearchWidget().get_textInputView().add_enterKeyPressed(ss.mkdel(this,this.handleEnterKeyPress));this.get_compositeSearchWidget().get_searchButton().add_click(ss.mkdel(this,this.handleSearchButtonClick));this.get_compositeSearchWidget().add_listItemClicked(ss.mkdel(this,this.handleListItemClick));this.get_compositeSearchWidget().get_textInputView().add_propertyChanged(ss.mkdel(this,this.$a));this.mapsSearchViewModel.add_receivedNewSuggestions(ss.mkdel(this,this.showNewSuggestions));this.mapsSearchViewModel.add_updateTextInputValue(ss.mkdel(this,this.updateSearchTextValue));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_compositeSearchWidget().get_textInputView().remove_enterKeyPressed(ss.mkdel(this,this.handleEnterKeyPress));this.get_compositeSearchWidget().get_searchButton().remove_click(ss.mkdel(this,this.handleSearchButtonClick));this.get_compositeSearchWidget().remove_listItemClicked(ss.mkdel(this,this.handleListItemClick));this.get_compositeSearchWidget().get_textInputView().remove_propertyChanged(ss.mkdel(this,this.$a));this.mapsSearchViewModel.remove_receivedNewSuggestions(ss.mkdel(this,this.showNewSuggestions));this.mapsSearchViewModel.remove_updateTextInputValue(ss.mkdel(this,this.updateSearchTextValue));this.$e()})));this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'focus',ss.mkdel(this,this.$b)));this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.get_compositeSearchWidget().get_textInputView().get_inputElement(),'focusout',ss.mkdel(this,this.$c)));if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){this.get_compositeSearchWidget().get_textInputView().get_inputElement().css('line-height','22px')}if(this.get_gotoMyLocationButtonEnabled()){this.gotoMyLocationButton=new cS(this.get_viewModel().get_visualID());this.gotoMyLocationButton.addClass('tabSuppressVizTooltipsAndOverlays');this.gotoMyLocationButton.addToDom(this.get_element())}};el.__typeName='tab.MapsSearchView';el.newMapsSearchViewTemplate=function(){return new k};global.tab.MapsSearchView=el;var em=function(e){this.$2=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this);this.$2=e};em.__typeName='tab.MapsSearchViewModel';global.tab.MapsSearchViewModel=em;var en=function(e,L){bb.call(this,e,L)};en.__typeName='tab.MarksRenderer';en.$h=function(e,L){var hy=(e.hasPixelGeometry?1:e.getMarkProperty('size',L));return bb.bBoxMultipolygon(e.hasPixelGeometry,e.getMarkProperty('x',L),e.getMarkProperty('y',L),hy,7,e.getMarkGeometry(e.getMarkProperty('geometry',L)))};en.$t=function(e,L,hy,hz){var hA;var hB=e.getMarkGeometry(e.getMarkProperty('geometry',hz));if(ss.isNullOrUndefined(hB)){hA={x:L,y:hy};var hC={x:e.getMarkProperty('x',hz),y:e.getMarkProperty('y',hz)};return cR.isPointInCircle(hA,{center:hC,radius:3.5})}if(!e.hasPixelGeometry){var hD=e.getMarkProperty('size',hz);if(hD!==0){var hE=e.getMarkProperty('x',hz);var hF=e.getMarkProperty('y',hz);L=(L-hE)/hD;hy=(hy-hF)/hD}}hA={x:L,y:hy};return cR.isPointInMultipolygon(hB,hA)};en.$v=function(e,L,hy){var hz=e.getMarkGeometry(e.getMarkProperty('geometry',hy));if(hz===null){return true}return cR.multipolygonIntersectsDoubleRect(hz,L)};en.$u=function(e,L,hy,hz){var hA=e.getMarkGeometry(e.getMarkProperty('geometry',hy));if(hA===null){return cR.polygonIntersectsRect(L,en.$h(e,hy))}return cR.multipolygonIntersectsPolygon(hA,L,hz)};en.$s=function(e,L,hy,hz){{}var hA=e.getMarkGeometry(e.getMarkProperty('geometry',hy));if(hA===null){return cR.circleIntersectsRect(L,en.$h(e,hy))}return cR.multipolygonIntersectsCircle(hA,L)};en.$0=function(e,L){var hy=e.getLeft(L);var hz=e.getRight(L);var hA={x:0,y:0,w:0,h:0};if(hy!==-1){var hB=tab.RectXYUtil.rectXYFromCorners$1(e.getMarkProperty('x1',L),e.getMarkProperty('y1',L),(e.getMarkProperty('x_next',hy)+e.getMarkProperty('x_prev',L))/2,(e.getMarkProperty('y_next',hy)+e.getMarkProperty('y_prev',L))/2);tab.RectXYUtil.unionInPlace(hA,hB);var hC=tab.RectXYUtil.rectXYFromCorners$1((e.getMarkProperty('x1',hy)+e.getMarkProperty('x1',L))/2,(e.getMarkProperty('y1',hy)+e.getMarkProperty('y1',L))/2,e.getMarkProperty('x_prev',L),e.getMarkProperty('y_prev',L));tab.RectXYUtil.unionInPlace(hA,hC);tab.RectXYUtil.outsetRectInPlace(hA,10,10)}if(hz!==-1){var hD=tab.RectXYUtil.rectXYFromCorners$1(e.getMarkProperty('x1',L),e.getMarkProperty('y1',L),(e.getMarkProperty('x_prev',hz)+e.getMarkProperty('x_next',L))/2,(e.getMarkProperty('y_prev',hz)+e.getMarkProperty('y_next',L))/2);tab.RectXYUtil.unionInPlace(hA,hD);var hE=tab.RectXYUtil.rectXYFromCorners$1((e.getMarkProperty('x1',hz)+e.getMarkProperty('x1',L))/2,(e.getMarkProperty('y1',hz)+e.getMarkProperty('y1',L))/2,e.getMarkProperty('x_next',L),e.getMarkProperty('y_next',L));tab.RectXYUtil.unionInPlace(hA,hE);tab.RectXYUtil.outsetRectInPlace(hA,10,10)}if(hy===-1&&hz===-1){var hF=tab.RectXYUtil.rectXYFromCorners$1(e.getMarkProperty('x1',L),e.getMarkProperty('y1',L),e.getMarkProperty('x',L),e.getMarkProperty('y',L));{var hG=20-hF.w;var hH=20-hF.h;if(hG>0||hH>0){hF=tab.RectXYUtil.outsetRect(hF,Math.max(0,Math.ceil(hG/2)),Math.max(0,Math.ceil(hH/2)))}}tab.RectXYUtil.unionInPlace(hA,hF)}{tab.RectXYUtil.encompassCircleInPlace(hA,e.getMarkProperty('x1',L),e.getMarkProperty('y1',L),25/2)}return hA};en.$2=function(e,L,hy,hz){var hA=e.getLeft(hz);var hB=e.getRight(hz);if(hA!==-1){var hC=new Array(8);hC[0]=e.getMarkProperty('x1',hz);hC[1]=e.getMarkProperty('y1',hz);hC[2]=(e.getMarkProperty('x1',hA)+e.getMarkProperty('x1',hz))/2;hC[3]=(e.getMarkProperty('y1',hA)+e.getMarkProperty('y1',hz))/2;hC[4]=(e.getMarkProperty('x_next',hA)+e.getMarkProperty('x_prev',hz))/2;hC[5]=(e.getMarkProperty('y_next',hA)+e.getMarkProperty('y_prev',hz))/2;hC[6]=e.getMarkProperty('x_prev',hz);hC[7]=e.getMarkProperty('y_prev',hz);if(cR.isPointInPoly(hC,{x:L,y:hy},0)){return true}}if(hB!==-1){var hD=new Array(8);hD[0]=e.getMarkProperty('x1',hz);hD[1]=e.getMarkProperty('y1',hz);hD[2]=(e.getMarkProperty('x1',hB)+e.getMarkProperty('x1',hz))/2;hD[3]=(e.getMarkProperty('y1',hB)+e.getMarkProperty('y1',hz))/2;hD[4]=(e.getMarkProperty('x_prev',hB)+e.getMarkProperty('x_next',hz))/2;hD[5]=(e.getMarkProperty('y_prev',hB)+e.getMarkProperty('y_next',hz))/2;hD[6]=e.getMarkProperty('x_next',hz);hD[7]=e.getMarkProperty('y_next',hz);if(cR.isPointInPoly(hD,{x:L,y:hy},0)){return true}}if(hA===-1&&hB===-1){return true}{if(cR.isPointInCircle({x:L,y:hy},{center:{x:e.getMarkProperty('x1',hz),y:e.getMarkProperty('y1',hz)},radius:5/2})){return true}}return false};en.$5=function(e,L,hy,hz){var hA=e.getLeft(hz);var hB=e.getRight(hz);if(hA!==-1){var hC=new Array(8);hC[0]=e.getMarkProperty('x1',hz);hC[1]=e.getMarkProperty('y1',hz);hC[2]=(e.getMarkProperty('x1',hA)+e.getMarkProperty('x1',hz))/2;hC[3]=(e.getMarkProperty('y1',hA)+e.getMarkProperty('y1',hz))/2;hC[4]=(e.getMarkProperty('x_next',hA)+e.getMarkProperty('x_prev',hz))/2;hC[5]=(e.getMarkProperty('y_next',hA)+e.getMarkProperty('y_prev',hz))/2;hC[6]=e.getMarkProperty('x_prev',hz);hC[7]=e.getMarkProperty('y_prev',hz);if(cR.isPointInPoly(hC,{x:L,y:hy},10)){return true}}if(hB!==-1){var hD=new Array(8);hD[0]=e.getMarkProperty('x1',hz);hD[1]=e.getMarkProperty('y1',hz);hD[2]=(e.getMarkProperty('x1',hB)+e.getMarkProperty('x1',hz))/2;hD[3]=(e.getMarkProperty('y1',hB)+e.getMarkProperty('y1',hz))/2;hD[4]=(e.getMarkProperty('x_prev',hB)+e.getMarkProperty('x_next',hz))/2;hD[5]=(e.getMarkProperty('y_prev',hB)+e.getMarkProperty('y_next',hz))/2;hD[6]=e.getMarkProperty('x_next',hz);hD[7]=e.getMarkProperty('y_next',hz);if(cR.isPointInPoly(hD,{x:L,y:hy},10)){return true}}if(hA===-1&&hB===-1){return true}{if(cR.isPointInCircle({x:L,y:hy},{center:{x:e.getMarkProperty('x1',hz),y:e.getMarkProperty('y1',hz)},radius:25/2})){return true}}return false};en.$4=function(e,L){return{w:0,h:0}};en.$3=function(e,L,hy,hz){var hA=e.getLeft(hz);var hB=e.getRight(hz);var hC=e.getMarkProperty('x1',hz);var hD=e.getMarkProperty('y1',hz);var hE=e.getMarkProperty('x_prev',hz);var hF=e.getMarkProperty('y_prev',hz);var hG=e.getMarkProperty('x_next',hz);var hH=e.getMarkProperty('y_next',hz);var hI;{var hJ=L-hC;var hK=hy-hD;var hL=hJ*hJ+hK*hK;hI=hL}if(hA!==-1){var hM=(e.getMarkProperty('x1',hA)+hC)/2;var hN=(e.getMarkProperty('y1',hA)+hD)/2;var hO=(e.getMarkProperty('x_next',hA)+hC)/2;var hP=(e.getMarkProperty('y_next',hA)+hD)/2;var hQ={x:(hC+hE)/2,y:(hD+hF)/2};var hR={x:(hM+hO)/2,y:(hN+hP)/2};var hS=cR.getSquaredDistanceToLineSegment({x:L,y:hy},hQ,hR);hI=Math.min(hI,hS)}else{var hT={x:hC,y:hD};var hU={x:hG,y:hH};var hV=cR.getSquaredDistanceToLineSegment({x:L,y:hy},hT,hU);hI=Math.min(hI,hV)}if(hB!==-1){var hW=(e.getMarkProperty('x1',hB)+hC)/2;var hX=(e.getMarkProperty('y1',hB)+hD)/2;var hY=(e.getMarkProperty('x_prev',hB)+hC)/2;var hZ=(e.getMarkProperty('y_prev',hB)+hD)/2;var ia={x:(hC+hG)/2,y:(hD+hH)/2};var ib={x:(hW+hY)/2,y:(hX+hZ)/2};var ic=cR.getSquaredDistanceToLineSegment({x:L,y:hy},ia,ib);hI=Math.min(hI,ic)}else if(hA!==-1){var id={x:hC,y:hD};var ie={x:hE,y:hF};var ig=cR.getSquaredDistanceToLineSegment({x:L,y:hy},id,ie);hI=Math.min(hI,ig)}return hI};en.$7=function(e,L,hy){{if(cR.circleIntersectsRect({center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:5/2},L)){return true}}{if(cR.circleIntersectsRect({center:{x:e.getMarkProperty('x1',hy),y:e.getMarkProperty('y1',hy)},radius:5/2},L)){return true}}return false};en.$1=function(e,L,hy,hz,hA){{}{if(cR.circleIntersectsCircle(L,{center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:5/2})){return true}}{if(cR.circleIntersectsCircle(L,{center:{x:e.getMarkProperty('x1',hy),y:e.getMarkProperty('y1',hy)},radius:5/2})){return true}}return false};en.$6=function(e,L,hy,hz){{if(cR.polygonIntersectsCircle(L,{center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:5/2})){return true}}{if(cR.polygonIntersectsCircle(L,{center:{x:e.getMarkProperty('x1',hy),y:e.getMarkProperty('y1',hy)},radius:5/2})){return true}}return false};en.$g=function(e,L){var hy={x:0,y:0,w:0,h:0};{{var hz=e.getMarkLabelProperty('x',L);var hA=e.getMarkLabelProperty('y',L);var hB=e.getMarkLabelProperty('width',L);var hC=-e.getMarkLabelProperty('height',L);hz+=0;hA+=0;if(hC<0){hA+=hC;hC=Math.abs(hC)}tab.RectXYUtil.set$1(hy,Math.floor(hz),Math.floor(hA),Math.floor(hB),Math.floor(hC))}}{}return hy};en.$x=function(e,L,hy,hz){var hA=e.getMarkProperty('size',hz)/2;var hB=e.getMarkProperty('theta',hz);var hC=e.getMarkProperty('theta1',hz);if(hB>hC){var hD=hB;hB=hC;hC=hD}var hE={x:e.getMarkProperty('x',hz),y:e.getMarkProperty('y',hz)};var hF={center:hE,radius:hA};if(hC-hB>=1){return cR.isPointInCircle({x:L,y:hy},hF)}hB=bb.toCanvasAngle(hB);hC=bb.toCanvasAngle(hC);hB=cR.normalizeAngle(hB);hC=cR.normalizeAngle(hC);return cR.isPointInWedge({x:L,y:hy},hF,hB,hC)};en.$z=function(e,L,hy){var hz=e.getMarkProperty('size',hy)/2;var hA=e.getMarkProperty('theta',hy);var hB=e.getMarkProperty('theta1',hy);if(hA>hB){var hC=hA;hA=hB;hB=hC}var hD={x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)};var hE={center:hD,radius:hz};if(hB-hA>=1){return cR.circleIntersectsRect(hE,L)}hA=bb.toCanvasAngle(hA);hB=bb.toCanvasAngle(hB);hA=cR.normalizeAngle(hA);hB=cR.normalizeAngle(hB);return cR.rectIntersectsWedge(L,{center:hD,radius:hz},hA,hB)};en.$y=function(e,L,hy){var hz=e.getMarkProperty('size',hy)/2;var hA=e.getMarkProperty('theta',hy);var hB=e.getMarkProperty('theta1',hy);if(hA>hB){var hC=hA;hA=hB;hB=hC}var hD={x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)};var hE={center:hD,radius:hz};if(hB-hA>=1){return cR.polygonIntersectsCircle(L,hE)}hA=bb.toCanvasAngle(hA);hB=bb.toCanvasAngle(hB);hA=cR.normalizeAngle(hA);hB=cR.normalizeAngle(hB);return cR.polygonIntersectsWedge(L,{center:hD,radius:hz},hA,hB)};en.$w=function(e,L,hy,hz){if(hz){{return cR.isPointInCircle({x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},L)}}var hA=e.getMarkProperty('size',hy)/2;var hB=e.getMarkProperty('theta',hy);var hC=e.getMarkProperty('theta1',hy);if(hB>hC){var hD=hB;hB=hC;hC=hD}var hE={x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)};var hF={center:hE,radius:hA};if(hC-hB>=1){return cR.circleIntersectsCircle(hF,L)}hB=bb.toCanvasAngle(hB);hC=bb.toCanvasAngle(hC);hB=cR.normalizeAngle(hB);hC=cR.normalizeAngle(hC);return cR.circleIntersectsWedge(L,{center:hE,radius:hA},hB,hC)};en.$i=function(e,L){var hy={x:0,y:0,w:0,h:0};var hz=e.getMarkProperty('size',L)/2;{tab.RectXYUtil.unionInPlace(hy,bb.boundWedge(e.getMarkProperty('x',L),e.getMarkProperty('y',L),hz,e.getMarkProperty('theta',L),e.getMarkProperty('theta1',L)))}if(e.getMarkProperty('draw_border',L)){tab.RectXYUtil.unionInPlace(hy,bb.boundWedge(e.getMarkProperty('x',L),e.getMarkProperty('y',L),hz,e.getMarkProperty('theta',L),e.getMarkProperty('theta1',L)))}return hy};en.$1D=function(e,L){var hy={x:0,y:0,w:0,h:0};if(!(e.clipCase!==0&&e.useCellClipForSelection)){if(!(e.clipCase!==0&&e.useCellClipForSelection)){var hz=e.getMarkProperty('x',L);var hA=e.getMarkProperty('y',L);var hB=e.getMarkProperty('width',L);var hC=-e.getMarkProperty('height',L);hz+=-e.getMarkProperty('width',L)/2;hA+=e.getMarkProperty('height',L)/2;if(hC<0){hA+=hC;hC=Math.abs(hC)}tab.RectXYUtil.set$1(hy,Math.floor(hz),Math.floor(hA),Math.floor(hB),Math.floor(hC))}}if(e.clipCase!==0&&e.useCellClipForSelection){if(e.clipCase!==0&&e.useCellClipForSelection){var hD=e.getMarkProperty('x',L);var hE=e.getMarkProperty('y',L);var hF=e.getMarkProperty('clip_width',L);var hG=-e.getMarkProperty('clip_height',L);hD+=-e.getMarkProperty('clip_width',L)/2;hE+=e.getMarkProperty('clip_height',L)/2;if(hG<0){hE+=hG;hG=Math.abs(hG)}tab.RectXYUtil.set$1(hy,Math.floor(hD),Math.floor(hE),Math.floor(hF),Math.floor(hG))}}return hy};en.$1F=function(e,L,hy,hz){if(!(e.clipCase!==0&&e.useCellClipForSelection)){return bb.isPointInExpandedRectHelperF(e.getMarkProperty('y',hz)+e.getMarkProperty('height',hz)/2,e.getMarkProperty('x',hz)+-e.getMarkProperty('width',hz)/2,-e.getMarkProperty('height',hz),e.getMarkProperty('width',hz),0,0,e.get_minBarHeight(),e.get_minBarWidth(),L,hy)}if(e.clipCase!==0&&e.useCellClipForSelection){return bb.isPointInExpandedRectHelperF(e.getMarkProperty('y',hz)+e.getMarkProperty('clip_height',hz)/2,e.getMarkProperty('x',hz)+-e.getMarkProperty('clip_width',hz)/2,-e.getMarkProperty('clip_height',hz),e.getMarkProperty('clip_width',hz),0,0,e.get_minBarHeight(),e.get_minBarWidth(),L,hy)}return false};en.$1I=function(e,L,hy,hz){if(!(e.clipCase!==0&&e.useCellClipForSelection)){return bb.isPointInExpandedRectHelperF(e.getMarkProperty('y',hz)+(e.getMarkProperty('height',hz)/2+10),e.getMarkProperty('x',hz)+(-e.getMarkProperty('width',hz)/2-10),-e.getMarkProperty('height',hz)-20,e.getMarkProperty('width',hz)+20,0,0,e.get_minBarHeight(),e.get_minBarWidth(),L,hy)}if(e.clipCase!==0&&e.useCellClipForSelection){return bb.isPointInExpandedRectHelperF(e.getMarkProperty('y',hz)+e.getMarkProperty('clip_height',hz)/2,e.getMarkProperty('x',hz)+-e.getMarkProperty('clip_width',hz)/2,-e.getMarkProperty('clip_height',hz),e.getMarkProperty('clip_width',hz),0,0,e.get_minBarHeight(),e.get_minBarWidth(),L,hy)}return false};en.$1H=function(e,L){var hy=null;if(!(e.clipCase!==0&&e.useCellClipForSelection)){hy={w:10,h:10}}if(e.clipCase!==0&&e.useCellClipForSelection){hy={w:e.getMarkProperty('clip_width',L)/2,h:e.getMarkProperty('clip_height',L)/2}}return hy};en.$1G=function(e,L,hy,hz){var hA=e.getMarkBounds(hz);return cR.getSquaredDistanceToNearestSide(hA,{x:L,y:hy})};en.$1K=function(e,L,hy){return true};en.$1E=function(e,L,hy,hz,hA){if(hA){{return cR.isPointInCircle({x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},L)}}return cR.circleIntersectsRect(L,hz)};en.$1J=function(e,L,hy,hz){return cR.polygonIntersectsRect(L,hz)};en.$8=function(e,L){var hy={x:0,y:0,w:0,h:0};var hz=ss.Int32.trunc(e.getMarkProperty('size',L)+0.5)/2;if(e.scaleMarksInX&&e.scaleMarksInY){var hA=e.getMarkProperty('y',L);var hB=e.getMarkProperty('y1',L);var hC=e.getMarkProperty('x',L);var hD=e.getMarkProperty('x1',L);var hE=Math.min(hA,hB);var hF=Math.max(hA,hB);var hG=Math.min(hC,hD);var hH=Math.max(hC,hD);var hI=bb.roundStartAndExtent(hE,hF-hE,e.get_minBarHeight());var hJ=bb.roundStartAndExtent(hG,hH-hG,e.get_minBarWidth());tab.RectXYUtil.unionInPlace$1(hy,hJ.item1,hI.item1,Math.floor(hJ.item2),Math.floor(hI.item2))}if(!e.scaleMarksInX&&e.scaleMarksInY){var hK=e.getMarkProperty('y',L);var hL=e.getMarkProperty('y1',L);var hM=e.getMarkProperty('x',L)-hz;var hN=e.getMarkProperty('x',L)+hz;var hO=Math.min(hK,hL);var hP=Math.max(hK,hL);var hQ=Math.min(hM,hN);var hR=Math.max(hM,hN);var hS=bb.roundStartAndExtent(hO,hP-hO,e.get_minBarHeight());var hT=bb.roundStartAndExtent(hQ,hR-hQ,e.get_minBarWidth());tab.RectXYUtil.unionInPlace$1(hy,hT.item1,hS.item1,Math.floor(hT.item2),Math.floor(hS.item2))}if(e.scaleMarksInX&&!e.scaleMarksInY){var hU=e.getMarkProperty('y',L)-hz;var hV=e.getMarkProperty('y',L)+hz;var hW=e.getMarkProperty('x',L);var hX=e.getMarkProperty('x1',L);var hY=Math.min(hU,hV);var hZ=Math.max(hU,hV);var ia=Math.min(hW,hX);var ib=Math.max(hW,hX);var ic=bb.roundStartAndExtent(hY,hZ-hY,e.get_minBarHeight());var id=bb.roundStartAndExtent(ia,ib-ia,e.get_minBarWidth());tab.RectXYUtil.unionInPlace$1(hy,id.item1,ic.item1,Math.floor(id.item2),Math.floor(ic.item2))}if(!e.scaleMarksInX&&!e.scaleMarksInY){var ie=e.getMarkProperty('y',L)-hz;var ig=e.getMarkProperty('y',L)+hz;var ih=e.getMarkProperty('x',L)-hz;var ii=e.getMarkProperty('x',L)+hz;var ij=Math.min(ie,ig);var ik=Math.max(ie,ig);var il=Math.min(ih,ii);var im=Math.max(ih,ii);var io=bb.roundStartAndExtent(ij,ik-ij,e.get_minBarHeight());var ip=bb.roundStartAndExtent(il,im-il,e.get_minBarWidth());tab.RectXYUtil.unionInPlace$1(hy,ip.item1,io.item1,Math.floor(ip.item2),Math.floor(io.item2))}return hy};en.$a=function(e,L,hy,hz){var hA=e.getMarkProperty('size',hz)/2;var hB=e.getMarkProperty('size',hz)/2;if(e.scaleMarksInX&&e.scaleMarksInY){var hC=Math.floor(Math.min(e.getMarkProperty('y',hz),e.getMarkProperty('y1',hz)));var hD=Math.ceil(Math.max(e.getMarkProperty('y',hz),e.getMarkProperty('y1',hz)));var hE=Math.floor(Math.min(e.getMarkProperty('x',hz),e.getMarkProperty('x1',hz)));var hF=Math.ceil(Math.max(e.getMarkProperty('x',hz),e.getMarkProperty('x1',hz)));var hG={x:hE,y:hC,w:hF-hE,h:hD-hC};tab.RectXYUtil.outsetRectInPlace(hG,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(hG,L,hy)){return true}}if(!e.scaleMarksInX&&e.scaleMarksInY){var hH=Math.floor(Math.min(e.getMarkProperty('y',hz),e.getMarkProperty('y1',hz)));var hI=Math.ceil(Math.max(e.getMarkProperty('y',hz),e.getMarkProperty('y1',hz)));var hJ=Math.floor(Math.min(e.getMarkProperty('x',hz)-hA,e.getMarkProperty('x',hz)+hA));var hK=Math.ceil(Math.max(e.getMarkProperty('x',hz)-hA,e.getMarkProperty('x',hz)+hA));var hL={x:hJ,y:hH,w:hK-hJ,h:hI-hH};tab.RectXYUtil.outsetRectInPlace(hL,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(hL,L,hy)){return true}}if(e.scaleMarksInX&&!e.scaleMarksInY){var hM=Math.floor(Math.min(e.getMarkProperty('y',hz)-hB,e.getMarkProperty('y',hz)+hB));var hN=Math.ceil(Math.max(e.getMarkProperty('y',hz)-hB,e.getMarkProperty('y',hz)+hB));var hO=Math.floor(Math.min(e.getMarkProperty('x',hz),e.getMarkProperty('x1',hz)));var hP=Math.ceil(Math.max(e.getMarkProperty('x',hz),e.getMarkProperty('x1',hz)));var hQ={x:hO,y:hM,w:hP-hO,h:hN-hM};tab.RectXYUtil.outsetRectInPlace(hQ,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(hQ,L,hy)){return true}}if(!e.scaleMarksInX&&!e.scaleMarksInY){var hR=Math.floor(Math.min(e.getMarkProperty('y',hz)-hB,e.getMarkProperty('y',hz)+hB));var hS=Math.ceil(Math.max(e.getMarkProperty('y',hz)-hB,e.getMarkProperty('y',hz)+hB));var hT=Math.floor(Math.min(e.getMarkProperty('x',hz)-hA,e.getMarkProperty('x',hz)+hA));var hU=Math.ceil(Math.max(e.getMarkProperty('x',hz)-hA,e.getMarkProperty('x',hz)+hA));var hV={x:hT,y:hR,w:hU-hT,h:hS-hR};tab.RectXYUtil.outsetRectInPlace(hV,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(hV,L,hy)){return true}}return false};en.$d=function(e,L,hy,hz){var hA=e.getMarkProperty('clip_width',hz)/2;var hB=e.getMarkProperty('clip_height',hz)/2;var hC=e.getMarkProperty('size',hz)/2;var hD=e.getMarkProperty('size',hz)/2;if(e.scaleMarksInX&&e.scaleMarksInY){var hE=Math.floor(Math.min(e.getMarkProperty('y',hz),e.getMarkProperty('y1',hz)));var hF=Math.ceil(Math.max(e.getMarkProperty('y',hz),e.getMarkProperty('y1',hz)));var hG=Math.floor(Math.min(e.getMarkProperty('x',hz),e.getMarkProperty('x1',hz)));var hH=Math.ceil(Math.max(e.getMarkProperty('x',hz),e.getMarkProperty('x1',hz)));var hI={x:hG,y:hE,w:hH-hG,h:hF-hE};tab.RectXYUtil.outsetRectInPlace(hI,Math.ceil(10),Math.ceil(10));if(tab.RectXYUtil.inRectPointF$1(hI,L,hy)){return true}}if(!e.scaleMarksInX&&e.scaleMarksInY&&!e.paneHasCellsX&&!e.paneHasCellsY){var hJ=Math.floor(Math.min(e.getMarkProperty('y',hz),e.getMarkProperty('y1',hz)));var hK=Math.ceil(Math.max(e.getMarkProperty('y',hz),e.getMarkProperty('y1',hz)));var hL=Math.floor(Math.min(e.getMarkProperty('x',hz)-hC,e.getMarkProperty('x',hz)+hC));var hM=Math.ceil(Math.max(e.getMarkProperty('x',hz)-hC,e.getMarkProperty('x',hz)+hC));var hN={x:hL,y:hJ,w:hM-hL,h:hK-hJ};tab.RectXYUtil.outsetRectInPlace(hN,Math.ceil(10),Math.ceil(10));if(tab.RectXYUtil.inRectPointF$1(hN,L,hy)){return true}}if(e.scaleMarksInX&&!e.scaleMarksInY&&!e.paneHasCellsX&&!e.paneHasCellsY){var hO=Math.floor(Math.min(e.getMarkProperty('y',hz)-hD,e.getMarkProperty('y',hz)+hD));var hP=Math.ceil(Math.max(e.getMarkProperty('y',hz)-hD,e.getMarkProperty('y',hz)+hD));var hQ=Math.floor(Math.min(e.getMarkProperty('x',hz),e.getMarkProperty('x1',hz)));var hR=Math.ceil(Math.max(e.getMarkProperty('x',hz),e.getMarkProperty('x1',hz)));var hS={x:hQ,y:hO,w:hR-hQ,h:hP-hO};tab.RectXYUtil.outsetRectInPlace(hS,Math.ceil(10),Math.ceil(10));if(tab.RectXYUtil.inRectPointF$1(hS,L,hy)){return true}}if(!e.scaleMarksInX&&e.scaleMarksInY&&e.paneHasCellsX&&!e.paneHasCellsY){var hT=Math.floor(Math.min(e.getMarkProperty('y',hz),e.getMarkProperty('y1',hz)));var hU=Math.ceil(Math.max(e.getMarkProperty('y',hz),e.getMarkProperty('y1',hz)));var hV=Math.floor(Math.min(e.getMarkProperty('x',hz)-hA,e.getMarkProperty('x',hz)+hA));var hW=Math.ceil(Math.max(e.getMarkProperty('x',hz)-hA,e.getMarkProperty('x',hz)+hA));var hX={x:hV,y:hT,w:hW-hV,h:hU-hT};tab.RectXYUtil.outsetRectInPlace(hX,Math.ceil(0),Math.ceil(10));if(tab.RectXYUtil.inRectPointF$1(hX,L,hy)){return true}}if(e.scaleMarksInX&&!e.scaleMarksInY&&!e.paneHasCellsX&&e.paneHasCellsY){var hY=Math.floor(Math.min(e.getMarkProperty('y',hz)-hB,e.getMarkProperty('y',hz)+hB));var hZ=Math.ceil(Math.max(e.getMarkProperty('y',hz)-hB,e.getMarkProperty('y',hz)+hB));var ia=Math.floor(Math.min(e.getMarkProperty('x',hz),e.getMarkProperty('x1',hz)));var ib=Math.ceil(Math.max(e.getMarkProperty('x',hz),e.getMarkProperty('x1',hz)));var ic={x:ia,y:hY,w:ib-ia,h:hZ-hY};tab.RectXYUtil.outsetRectInPlace(ic,Math.ceil(10),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(ic,L,hy)){return true}}if(!e.scaleMarksInX&&!e.scaleMarksInY&&!e.paneHasCellsX&&!e.paneHasCellsY){var id=Math.floor(Math.min(e.getMarkProperty('y',hz)-hD,e.getMarkProperty('y',hz)+hD));var ie=Math.ceil(Math.max(e.getMarkProperty('y',hz)-hD,e.getMarkProperty('y',hz)+hD));var ig=Math.floor(Math.min(e.getMarkProperty('x',hz)-hC,e.getMarkProperty('x',hz)+hC));var ih=Math.ceil(Math.max(e.getMarkProperty('x',hz)-hC,e.getMarkProperty('x',hz)+hC));var ii={x:ig,y:id,w:ih-ig,h:ie-id};tab.RectXYUtil.outsetRectInPlace(ii,Math.ceil(10),Math.ceil(10));if(tab.RectXYUtil.inRectPointF$1(ii,L,hy)){return true}}if(!e.scaleMarksInX&&!e.scaleMarksInY&&e.paneHasCellsX&&!e.paneHasCellsY){var ij=Math.floor(Math.min(e.getMarkProperty('y',hz)-hD,e.getMarkProperty('y',hz)+hD));var ik=Math.ceil(Math.max(e.getMarkProperty('y',hz)-hD,e.getMarkProperty('y',hz)+hD));var il=Math.floor(Math.min(e.getMarkProperty('x',hz)-hA,e.getMarkProperty('x',hz)+hA));var im=Math.ceil(Math.max(e.getMarkProperty('x',hz)-hA,e.getMarkProperty('x',hz)+hA));var io={x:il,y:ij,w:im-il,h:ik-ij};tab.RectXYUtil.outsetRectInPlace(io,Math.ceil(0),Math.ceil(10));if(tab.RectXYUtil.inRectPointF$1(io,L,hy)){return true}}if(!e.scaleMarksInX&&!e.scaleMarksInY&&!e.paneHasCellsX&&e.paneHasCellsY){var ip=Math.floor(Math.min(e.getMarkProperty('y',hz)-hB,e.getMarkProperty('y',hz)+hB));var iq=Math.ceil(Math.max(e.getMarkProperty('y',hz)-hB,e.getMarkProperty('y',hz)+hB));var ir=Math.floor(Math.min(e.getMarkProperty('x',hz)-hC,e.getMarkProperty('x',hz)+hC));var it=Math.ceil(Math.max(e.getMarkProperty('x',hz)-hC,e.getMarkProperty('x',hz)+hC));var iu={x:ir,y:ip,w:it-ir,h:iq-ip};tab.RectXYUtil.outsetRectInPlace(iu,Math.ceil(10),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(iu,L,hy)){return true}}if(!e.scaleMarksInX&&!e.scaleMarksInY&&e.paneHasCellsX&&e.paneHasCellsY){var iv=Math.floor(Math.min(e.getMarkProperty('y',hz)-hB,e.getMarkProperty('y',hz)+hB));var iw=Math.ceil(Math.max(e.getMarkProperty('y',hz)-hB,e.getMarkProperty('y',hz)+hB));var ix=Math.floor(Math.min(e.getMarkProperty('x',hz)-hA,e.getMarkProperty('x',hz)+hA));var iy=Math.ceil(Math.max(e.getMarkProperty('x',hz)-hA,e.getMarkProperty('x',hz)+hA));var iz={x:ix,y:iv,w:iy-ix,h:iw-iv};tab.RectXYUtil.outsetRectInPlace(iz,Math.ceil(0),Math.ceil(0));if(tab.RectXYUtil.inRectPointF$1(iz,L,hy)){return true}}return false};en.$c=function(e,L){var hy=null;if(e.scaleMarksInX&&e.scaleMarksInY){hy={w:10,h:10}}if(!e.scaleMarksInX&&e.scaleMarksInY&&!e.paneHasCellsX&&!e.paneHasCellsY){hy={w:5,h:10}}if(e.scaleMarksInX&&!e.scaleMarksInY&&!e.paneHasCellsX&&!e.paneHasCellsY){hy={w:10,h:5}}if(!e.scaleMarksInX&&e.scaleMarksInY&&e.paneHasCellsX&&!e.paneHasCellsY){hy={w:e.getMarkProperty('clip_width',L)/2,h:10}}if(e.scaleMarksInX&&!e.scaleMarksInY&&!e.paneHasCellsX&&e.paneHasCellsY){hy={w:10,h:e.getMarkProperty('clip_height',L)/2}}if(!e.scaleMarksInX&&!e.scaleMarksInY&&!e.paneHasCellsX&&!e.paneHasCellsY){hy={w:5,h:5}}if(!e.scaleMarksInX&&!e.scaleMarksInY&&!e.paneHasCellsX&&e.paneHasCellsY){hy={w:5,h:e.getMarkProperty('clip_height',L)}}if(!e.scaleMarksInX&&!e.scaleMarksInY&&e.paneHasCellsX&&!e.paneHasCellsY){hy={w:e.getMarkProperty('clip_width',L)/2,h:10}}if(!e.scaleMarksInX&&!e.scaleMarksInY&&e.paneHasCellsX&&e.paneHasCellsY){hy={w:e.getMarkProperty('clip_width',L)/2,h:e.getMarkProperty('clip_height',L)/2}}return hy};en.$b=function(e,L,hy,hz){var hA=e.getMarkBounds(hz);return cR.getSquaredDistanceToNearestSide(hA,{x:L,y:hy})};en.$f=function(e,L,hy){return true};en.$9=function(e,L,hy,hz,hA){if(hA&&(!e.scaleMarksInX&&!e.scaleMarksInY&&!e.paneHasCellsX&&!e.paneHasCellsY)){{return cR.isPointInCircle({x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},L)}}return cR.circleIntersectsRect(L,hz)};en.$e=function(e,L,hy,hz){return cR.polygonIntersectsRect(L,hz)};en.$k=function(e,L){var hy=e.getLeft(L);var hz=e.getRight(L);var hA={x:0,y:0,w:0,h:0};{tab.RectXYUtil.encompassCircleInPlace(hA,e.getMarkProperty('x',L),e.getMarkProperty('y',L),(e.getMarkProperty('size',L)+20)/2)}{tab.RectXYUtil.encompassCircleInPlace(hA,e.getMarkProperty('x',L),e.getMarkProperty('y',L),(e.getMarkProperty('size',L)+20)/2)}if(hy!==-1){bb.boundLineEdgeInPlace(hA,(e.getMarkProperty('x',hy)+e.getMarkProperty('x',L))/2,(e.getMarkProperty('y',hy)+e.getMarkProperty('y',L))/2,(e.getMarkProperty('size',hy)+e.getMarkProperty('size',L))/2+20,e.getMarkProperty('x',L),e.getMarkProperty('y',L),e.getMarkProperty('size',L)+20)}if(hz!==-1){bb.boundLineEdgeInPlace(hA,e.getMarkProperty('x',L),e.getMarkProperty('y',L),e.getMarkProperty('size',L)+20,(e.getMarkProperty('x',L)+e.getMarkProperty('x',hz))/2,(e.getMarkProperty('y',L)+e.getMarkProperty('y',hz))/2,(e.getMarkProperty('size',L)+e.getMarkProperty('size',hz))/2+20)}return hA};en.$m=function(e,L,hy,hz){var hA=e.getLeft(hz);var hB=e.getRight(hz);{if(cR.isPointInCircle({x:L,y:hy},{center:{x:e.getMarkProperty('x',hz),y:e.getMarkProperty('y',hz)},radius:e.getMarkProperty('size',hz)/2})){return true}}{if(cR.isPointInCircle({x:L,y:hy},{center:{x:e.getMarkProperty('x',hz),y:e.getMarkProperty('y',hz)},radius:e.getMarkProperty('size',hz)/2})){return true}}if(hA!==-1){if(bb.lineEdgeContains(L,hy,(e.getMarkProperty('x',hA)+e.getMarkProperty('x',hz))/2,(e.getMarkProperty('y',hA)+e.getMarkProperty('y',hz))/2,(e.getMarkProperty('size',hA)+e.getMarkProperty('size',hz))/2,e.getMarkProperty('x',hz),e.getMarkProperty('y',hz),e.getMarkProperty('size',hz))){return true}}if(hB!==-1){if(bb.lineEdgeContains(L,hy,e.getMarkProperty('x',hz),e.getMarkProperty('y',hz),e.getMarkProperty('size',hz),(e.getMarkProperty('x',hz)+e.getMarkProperty('x',hB))/2,(e.getMarkProperty('y',hz)+e.getMarkProperty('y',hB))/2,(e.getMarkProperty('size',hz)+e.getMarkProperty('size',hB))/2)){return true}}return false};en.$p=function(e,L,hy,hz){var hA=e.getLeft(hz);var hB=e.getRight(hz);{if(cR.isPointInCircle({x:L,y:hy},{center:{x:e.getMarkProperty('x',hz),y:e.getMarkProperty('y',hz)},radius:(e.getMarkProperty('size',hz)+20)/2})){return true}}{if(cR.isPointInCircle({x:L,y:hy},{center:{x:e.getMarkProperty('x',hz),y:e.getMarkProperty('y',hz)},radius:(e.getMarkProperty('size',hz)+20)/2})){return true}}if(hA!==-1){if(bb.lineEdgeContains(L,hy,(e.getMarkProperty('x',hA)+e.getMarkProperty('x',hz))/2,(e.getMarkProperty('y',hA)+e.getMarkProperty('y',hz))/2,(e.getMarkProperty('size',hA)+e.getMarkProperty('size',hz))/2+20,e.getMarkProperty('x',hz),e.getMarkProperty('y',hz),e.getMarkProperty('size',hz)+20)){return true}}if(hB!==-1){if(bb.lineEdgeContains(L,hy,e.getMarkProperty('x',hz),e.getMarkProperty('y',hz),e.getMarkProperty('size',hz)+20,(e.getMarkProperty('x',hz)+e.getMarkProperty('x',hB))/2,(e.getMarkProperty('y',hz)+e.getMarkProperty('y',hB))/2,(e.getMarkProperty('size',hz)+e.getMarkProperty('size',hB))/2+20)){return true}}return false};en.$o=function(e,L){return{w:0,h:0}};en.$n=function(e,L,hy,hz){var hA=e.getLeft(hz);var hB=e.getRight(hz);var hC=e.getMarkProperty('x1',hz);var hD=e.getMarkProperty('y1',hz);var hE;{var hF=L-hC;var hG=hy-hD;var hH=hF*hF+hG*hG;hE=hH}if(hA!==-1){var hI={x:(e.getMarkProperty('x',hA)+hC)/2,y:(e.getMarkProperty('y',hA)+hD)/2};var hJ={x:hC,y:hD};var hK=cR.getSquaredDistanceToLineSegment({x:L,y:hy},hI,hJ);hE=Math.min(hE,hK)}if(hB!==-1){var hL={x:hC,y:hD};var hM={x:(e.getMarkProperty('x',hB)+hC)/2,y:(e.getMarkProperty('y',hB)+hD)/2};var hN=cR.getSquaredDistanceToLineSegment({x:L,y:hy},hL,hM);hE=Math.min(hE,hN)}return hE};en.$r=function(e,L,hy){{if(cR.circleIntersectsRect({center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:e.getMarkProperty('size',hy)/2},L)){return true}}return false};en.$l=function(e,L,hy,hz,hA){if(hA){{return cR.isPointInCircle({x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},L)}}{if(cR.circleIntersectsCircle(L,{center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:e.getMarkProperty('size',hy)/2})){return true}}return false};en.$q=function(e,L,hy,hz){{if(cR.polygonIntersectsCircle(L,{center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:e.getMarkProperty('size',hy)/2})){return true}}return false};en.$1v=function(e,L){var hy=e.getMarkProperty('shape_id',L);switch(hy){case'shapeIDCircle':{var hz={x:0,y:0,w:0,h:0};{var hA=Math.round(e.getMarkProperty('x',L));var hB=Math.round(e.getMarkProperty('y',L));var hC=Math.ceil(e.getMarkProperty('size',L)*0.958333333333333/2);var hD=2*hC;tab.RectXYUtil.unionInPlace$1(hz,hA-hC,hB-hC,hD,hD)}return hz}case'shapeIDFilledCircle':{var hE={x:0,y:0,w:0,h:0};{var hF=Math.round(e.getMarkProperty('x',L));var hG=Math.round(e.getMarkProperty('y',L));var hH=Math.ceil(e.getMarkProperty('size',L)*0.979166666666667/2);var hI=2*hH;tab.RectXYUtil.unionInPlace$1(hE,hF-hH,hG-hH,hI,hI)}return hE}case'shapeIDUnscaledFilledCircle':{var hJ={x:0,y:0,w:0,h:0};{var hK=Math.round(e.getMarkProperty('x',L));var hL=Math.round(e.getMarkProperty('y',L));var hM=Math.ceil(e.getMarkProperty('size',L)/2);var hN=2*hM;tab.RectXYUtil.unionInPlace$1(hJ,hK-hM,hL-hM,hN,hN)}return hJ}case'shapeIDSquare':{var hO={x:0,y:0,w:0,h:0};{var hP=Math.round(e.getMarkProperty('x',L));var hQ=Math.round(e.getMarkProperty('y',L));var hR=Math.ceil(e.getMarkProperty('size',L)*0.895833333333333/2);var hS=2*hR;tab.RectXYUtil.unionInPlace$1(hO,hP-hR,hQ-hR,hS,hS)}return hO}case'shapeIDFilledSquare':{var hT={x:0,y:0,w:0,h:0};{var hU=Math.round(e.getMarkProperty('x',L));var hV=Math.round(e.getMarkProperty('y',L));var hW=Math.ceil(e.getMarkProperty('size',L)*0.9375/2);var hX=2*hW;tab.RectXYUtil.unionInPlace$1(hT,hU-hW,hV-hW,hX,hX)}return hT}case'shapeIDAsterisk':{var hY={x:0,y:0,w:0,h:0};{var hZ=Math.round(e.getMarkProperty('x',L));var ia=Math.round(e.getMarkProperty('y',L));var ib=Math.ceil(e.getMarkProperty('size',L)*0.958333333333333/2);var ic=2*ib;tab.RectXYUtil.unionInPlace$1(hY,hZ-ib,ia-ib,ic,ic)}return hY}case'shapeIDPlus':{var id={x:0,y:0,w:0,h:0};{var ie=Math.round(e.getMarkProperty('x',L));var ig=Math.round(e.getMarkProperty('y',L));var ih=Math.ceil(e.getMarkProperty('size',L)*0.916666666666667/2);var ii=2*ih;tab.RectXYUtil.unionInPlace$1(id,ie-ih,ig-ih,ii,ii)}return id}case'shapeIDFilledPlus':{var ij={x:0,y:0,w:0,h:0};{var ik=Math.round(e.getMarkProperty('x',L));var il=Math.round(e.getMarkProperty('y',L));var im=Math.ceil(e.getMarkProperty('size',L)*0.9375/2);var io=2*im;tab.RectXYUtil.unionInPlace$1(ij,ik-im,il-im,io,io)}return ij}case'shapeIDTimes':{var ip={x:0,y:0,w:0,h:0};{var iq=Math.round(e.getMarkProperty('x',L));var ir=Math.round(e.getMarkProperty('y',L));var it=Math.ceil(e.getMarkProperty('size',L)*0.875/2);var iu=2*it;tab.RectXYUtil.unionInPlace$1(ip,iq-it,ir-it,iu,iu)}return ip}case'shapeIDFilledTimes':{var iv={x:0,y:0,w:0,h:0};{var iw=Math.round(e.getMarkProperty('x',L));var ix=Math.round(e.getMarkProperty('y',L));var iy=Math.ceil(e.getMarkProperty('size',L)*0.9375/2);var iz=2*iy;tab.RectXYUtil.unionInPlace$1(iv,iw-iy,ix-iy,iz,iz)}return iv}case'shapeIDDiamond':{var iA={x:0,y:0,w:0,h:0};{var iB=Math.round(e.getMarkProperty('x',L));var iC=Math.round(e.getMarkProperty('y',L));var iD=Math.ceil(e.getMarkProperty('size',L)*1.04166666666667/2);var iE=2*iD;tab.RectXYUtil.unionInPlace$1(iA,iB-iD,iC-iD,iE,iE)}return iA}case'shapeIDFilledDiamond':{var iF={x:0,y:0,w:0,h:0};{var iG=Math.round(e.getMarkProperty('x',L));var iH=Math.round(e.getMarkProperty('y',L));var iI=Math.ceil(e.getMarkProperty('size',L)*1.04166666666667/2);var iJ=2*iI;tab.RectXYUtil.unionInPlace$1(iF,iG-iI,iH-iI,iJ,iJ)}return iF}case'shapeIDTriangle':{var iK={x:0,y:0,w:0,h:0};{var iL=Math.round(e.getMarkProperty('x',L));var iM=Math.round(e.getMarkProperty('y',L));var iN=Math.ceil(e.getMarkProperty('size',L)*0.895833333333333/2);var iO=2*iN;tab.RectXYUtil.unionInPlace$1(iK,iL-iN,iM-iN,iO,iO)}return iK}case'shapeIDFilledTriangle':{var iP={x:0,y:0,w:0,h:0};{var iQ=Math.round(e.getMarkProperty('x',L));var iR=Math.round(e.getMarkProperty('y',L));var iS=Math.ceil(e.getMarkProperty('size',L)*0.916666666666667/2);var iT=2*iS;tab.RectXYUtil.unionInPlace$1(iP,iQ-iS,iR-iS,iT,iT)}return iP}case'shapeIDDownTriangle':{var iU={x:0,y:0,w:0,h:0};{var iV=Math.round(e.getMarkProperty('x',L));var iW=Math.round(e.getMarkProperty('y',L));var iX=Math.ceil(e.getMarkProperty('size',L)*0.895833333333333/2);var iY=2*iX;tab.RectXYUtil.unionInPlace$1(iU,iV-iX,iW-iX,iY,iY)}return iU}case'shapeIDFilledDownTriangle':{var iZ={x:0,y:0,w:0,h:0};{var ja=Math.round(e.getMarkProperty('x',L));var jb=Math.round(e.getMarkProperty('y',L));var jc=Math.ceil(e.getMarkProperty('size',L)*0.916666666666667/2);var jd=2*jc;tab.RectXYUtil.unionInPlace$1(iZ,ja-jc,jb-jc,jd,jd)}return iZ}case'shapeIDLeftTriangle':{var je={x:0,y:0,w:0,h:0};{var jf=Math.round(e.getMarkProperty('x',L));var jg=Math.round(e.getMarkProperty('y',L));var jh=Math.ceil(e.getMarkProperty('size',L)*0.895833333333333/2);var ji=2*jh;tab.RectXYUtil.unionInPlace$1(je,jf-jh,jg-jh,ji,ji)}return je}case'shapeIDFilledLeftTriangle':{var jj={x:0,y:0,w:0,h:0};{var jk=Math.round(e.getMarkProperty('x',L));var jl=Math.round(e.getMarkProperty('y',L));var jm=Math.ceil(e.getMarkProperty('size',L)*0.916666666666667/2);var jn=2*jm;tab.RectXYUtil.unionInPlace$1(jj,jk-jm,jl-jm,jn,jn)}return jj}case'shapeIDRightTriangle':{var jo={x:0,y:0,w:0,h:0};{var jp=Math.round(e.getMarkProperty('x',L));var jq=Math.round(e.getMarkProperty('y',L));var jr=Math.ceil(e.getMarkProperty('size',L)*0.895833333333333/2);var js=2*jr;tab.RectXYUtil.unionInPlace$1(jo,jp-jr,jq-jr,js,js)}return jo}case'shapeIDFilledRightTriangle':{var jt={x:0,y:0,w:0,h:0};{var ju=Math.round(e.getMarkProperty('x',L));var jv=Math.round(e.getMarkProperty('y',L));var jw=Math.ceil(e.getMarkProperty('size',L)*0.916666666666667/2);var jx=2*jw;tab.RectXYUtil.unionInPlace$1(jt,ju-jw,jv-jw,jx,jx)}return jt}case'shapeIDFilledStar':{var jy={x:0,y:0,w:0,h:0};{var jz=Math.round(e.getMarkProperty('x',L));var jA=Math.round(e.getMarkProperty('y',L));var jB=Math.ceil(e.getMarkProperty('size',L)*1.09166666666667/2);var jC=2*jB;tab.RectXYUtil.unionInPlace$1(jy,jz-jB,jA-jB,jC,jC)}return jy}default:{if(hy>null){var jD=Math.round(e.getMarkProperty('x',L));var jE=Math.round(e.getMarkProperty('y',L));var jF=Math.ceil(e.getMarkProperty('size',L));var jG=Math.ceil(jF/2);var jH={x:jD-jG,y:jE-jG,w:jF,h:jF};return jH}break}}return{x:0,y:0,w:0,h:0}};en.$1x=function(e,L,hy,hz){var hA=e.getMarkProperty('shape_id',hz);switch(hA){case'shapeIDCircle':{{if(cR.isPointInCircle({x:L,y:hy},{center:{x:e.getMarkProperty('x',hz),y:e.getMarkProperty('y',hz)},radius:e.getMarkProperty('size',hz)*0.958333333333333/2})){return true}}return false}case'shapeIDFilledCircle':{{if(cR.isPointInCircle({x:L,y:hy},{center:{x:e.getMarkProperty('x',hz),y:e.getMarkProperty('y',hz)},radius:e.getMarkProperty('size',hz)*0.979166666666667/2})){return true}}return false}case'shapeIDUnscaledFilledCircle':{{if(cR.isPointInCircle({x:L,y:hy},{center:{x:e.getMarkProperty('x',hz),y:e.getMarkProperty('y',hz)},radius:e.getMarkProperty('size',hz)/2})){return true}}return false}case'shapeIDSquare':{{var hB=e.getMarkProperty('size',hz)*0.895833333333333/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hB,e.getMarkProperty('y',hz)-hB,e.getMarkProperty('size',hz)*0.895833333333333,e.getMarkProperty('size',hz)*0.895833333333333,L,hy)){return true}}return false}case'shapeIDFilledSquare':{{var hC=e.getMarkProperty('size',hz)*0.9375/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hC,e.getMarkProperty('y',hz)-hC,e.getMarkProperty('size',hz)*0.9375,e.getMarkProperty('size',hz)*0.9375,L,hy)){return true}}return false}case'shapeIDAsterisk':{{var hD=e.getMarkProperty('size',hz)*0.958333333333333/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hD,e.getMarkProperty('y',hz)-hD,e.getMarkProperty('size',hz)*0.958333333333333,e.getMarkProperty('size',hz)*0.958333333333333,L,hy)){return true}}return false}case'shapeIDPlus':{{var hE=e.getMarkProperty('size',hz)*0.916666666666667/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hE,e.getMarkProperty('y',hz)-hE,e.getMarkProperty('size',hz)*0.916666666666667,e.getMarkProperty('size',hz)*0.916666666666667,L,hy)){return true}}return false}case'shapeIDFilledPlus':{{var hF=e.getMarkProperty('size',hz)*0.9375/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hF,e.getMarkProperty('y',hz)-hF,e.getMarkProperty('size',hz)*0.9375,e.getMarkProperty('size',hz)*0.9375,L,hy)){return true}}return false}case'shapeIDTimes':{{var hG=e.getMarkProperty('size',hz)*0.875/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hG,e.getMarkProperty('y',hz)-hG,e.getMarkProperty('size',hz)*0.875,e.getMarkProperty('size',hz)*0.875,L,hy)){return true}}return false}case'shapeIDFilledTimes':{{var hH=e.getMarkProperty('size',hz)*0.9375/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hH,e.getMarkProperty('y',hz)-hH,e.getMarkProperty('size',hz)*0.9375,e.getMarkProperty('size',hz)*0.9375,L,hy)){return true}}return false}case'shapeIDDiamond':{{var hI=e.getMarkProperty('size',hz)*1.04166666666667/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hI,e.getMarkProperty('y',hz)-hI,e.getMarkProperty('size',hz)*1.04166666666667,e.getMarkProperty('size',hz)*1.04166666666667,L,hy)){return true}}return false}case'shapeIDFilledDiamond':{{var hJ=e.getMarkProperty('size',hz)*1.04166666666667/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hJ,e.getMarkProperty('y',hz)-hJ,e.getMarkProperty('size',hz)*1.04166666666667,e.getMarkProperty('size',hz)*1.04166666666667,L,hy)){return true}}return false}case'shapeIDTriangle':{{var hK=e.getMarkProperty('size',hz)*0.895833333333333/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hK,e.getMarkProperty('y',hz)-hK,e.getMarkProperty('size',hz)*0.895833333333333,e.getMarkProperty('size',hz)*0.895833333333333,L,hy)){return true}}return false}case'shapeIDFilledTriangle':{{var hL=e.getMarkProperty('size',hz)*0.916666666666667/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hL,e.getMarkProperty('y',hz)-hL,e.getMarkProperty('size',hz)*0.916666666666667,e.getMarkProperty('size',hz)*0.916666666666667,L,hy)){return true}}return false}case'shapeIDDownTriangle':{{var hM=e.getMarkProperty('size',hz)*0.895833333333333/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hM,e.getMarkProperty('y',hz)-hM,e.getMarkProperty('size',hz)*0.895833333333333,e.getMarkProperty('size',hz)*0.895833333333333,L,hy)){return true}}return false}case'shapeIDFilledDownTriangle':{{var hN=e.getMarkProperty('size',hz)*0.916666666666667/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hN,e.getMarkProperty('y',hz)-hN,e.getMarkProperty('size',hz)*0.916666666666667,e.getMarkProperty('size',hz)*0.916666666666667,L,hy)){return true}}return false}case'shapeIDLeftTriangle':{{var hO=e.getMarkProperty('size',hz)*0.895833333333333/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hO,e.getMarkProperty('y',hz)-hO,e.getMarkProperty('size',hz)*0.895833333333333,e.getMarkProperty('size',hz)*0.895833333333333,L,hy)){return true}}return false}case'shapeIDFilledLeftTriangle':{{var hP=e.getMarkProperty('size',hz)*0.916666666666667/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hP,e.getMarkProperty('y',hz)-hP,e.getMarkProperty('size',hz)*0.916666666666667,e.getMarkProperty('size',hz)*0.916666666666667,L,hy)){return true}}return false}case'shapeIDRightTriangle':{{var hQ=e.getMarkProperty('size',hz)*0.895833333333333/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hQ,e.getMarkProperty('y',hz)-hQ,e.getMarkProperty('size',hz)*0.895833333333333,e.getMarkProperty('size',hz)*0.895833333333333,L,hy)){return true}}return false}case'shapeIDFilledRightTriangle':{{var hR=e.getMarkProperty('size',hz)*0.916666666666667/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hR,e.getMarkProperty('y',hz)-hR,e.getMarkProperty('size',hz)*0.916666666666667,e.getMarkProperty('size',hz)*0.916666666666667,L,hy)){return true}}return false}case'shapeIDFilledStar':{{var hS=e.getMarkProperty('size',hz)*1.09166666666667/2;if(tab.DoubleRectXYUtil.inRect$1(e.getMarkProperty('x',hz)-hS,e.getMarkProperty('y',hz)-hS,e.getMarkProperty('size',hz)*1.09166666666667,e.getMarkProperty('size',hz)*1.09166666666667,L,hy)){return true}}return false}default:{break}}return true};en.$1A=function(e,L,hy,hz){var hA=e.getMarkProperty('shape_id',hz);switch(hA){case'shapeIDCircle':{return true}case'shapeIDFilledCircle':{return true}case'shapeIDUnscaledFilledCircle':{return true}case'shapeIDSquare':{return true}case'shapeIDFilledSquare':{return true}case'shapeIDAsterisk':{return true}case'shapeIDPlus':{return true}case'shapeIDFilledPlus':{return true}case'shapeIDTimes':{return true}case'shapeIDFilledTimes':{return true}case'shapeIDDiamond':{return true}case'shapeIDFilledDiamond':{return true}case'shapeIDTriangle':{return true}case'shapeIDFilledTriangle':{return true}case'shapeIDDownTriangle':{return true}case'shapeIDFilledDownTriangle':{return true}case'shapeIDLeftTriangle':{return true}case'shapeIDFilledLeftTriangle':{return true}case'shapeIDRightTriangle':{return true}case'shapeIDFilledRightTriangle':{return true}case'shapeIDFilledStar':{return true}default:{break}}return false};en.$1z=function(e,L){var hy=null;{hy={w:10,h:10}}return hy};en.$1y=function(e,L,hy,hz){var hA=e.getMarkProperty('shape_id',hz);switch(hA){case'shapeIDCircle':{var hB=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hB,{x:L,y:hy})}case'shapeIDFilledCircle':{var hC=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hC,{x:L,y:hy})}case'shapeIDUnscaledFilledCircle':{var hD=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hD,{x:L,y:hy})}case'shapeIDSquare':{var hE=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hE,{x:L,y:hy})}case'shapeIDFilledSquare':{var hF=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hF,{x:L,y:hy})}case'shapeIDAsterisk':{var hG=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hG,{x:L,y:hy})}case'shapeIDPlus':{var hH=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hH,{x:L,y:hy})}case'shapeIDFilledPlus':{var hI=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hI,{x:L,y:hy})}case'shapeIDTimes':{var hJ=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hJ,{x:L,y:hy})}case'shapeIDFilledTimes':{var hK=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hK,{x:L,y:hy})}case'shapeIDDiamond':{var hL=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hL,{x:L,y:hy})}case'shapeIDFilledDiamond':{var hM=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hM,{x:L,y:hy})}case'shapeIDTriangle':{var hN=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hN,{x:L,y:hy})}case'shapeIDFilledTriangle':{var hO=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hO,{x:L,y:hy})}case'shapeIDDownTriangle':{var hP=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hP,{x:L,y:hy})}case'shapeIDFilledDownTriangle':{var hQ=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hQ,{x:L,y:hy})}case'shapeIDLeftTriangle':{var hR=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hR,{x:L,y:hy})}case'shapeIDFilledLeftTriangle':{var hS=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hS,{x:L,y:hy})}case'shapeIDRightTriangle':{var hT=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hT,{x:L,y:hy})}case'shapeIDFilledRightTriangle':{var hU=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hU,{x:L,y:hy})}case'shapeIDFilledStar':{var hV=e.getMarkBounds(hz);return cR.getSquaredDistanceToCircumference(hV,{x:L,y:hy})}default:{break}}return cR.getSquaredDistanceToCenter(e.getMarkBounds(hz),{x:L,y:hy})};en.$1C=function(e,L,hy){var hz=e.getMarkProperty('shape_id',hy);switch(hz){case'shapeIDCircle':{return cR.circleIntersectsRect({center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:e.getMarkProperty('size',hy)*0.958333333333333/2},L)}case'shapeIDFilledCircle':{return cR.circleIntersectsRect({center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:e.getMarkProperty('size',hy)*0.979166666666667/2},L)}case'shapeIDUnscaledFilledCircle':{return cR.circleIntersectsRect({center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:e.getMarkProperty('size',hy)/2},L)}case'shapeIDSquare':{return true}case'shapeIDFilledSquare':{return true}case'shapeIDAsterisk':{return true}case'shapeIDPlus':{return true}case'shapeIDFilledPlus':{return true}case'shapeIDTimes':{return true}case'shapeIDFilledTimes':{return true}case'shapeIDDiamond':{return true}case'shapeIDFilledDiamond':{return true}case'shapeIDTriangle':{return true}case'shapeIDFilledTriangle':{return true}case'shapeIDDownTriangle':{return true}case'shapeIDFilledDownTriangle':{return true}case'shapeIDLeftTriangle':{return true}case'shapeIDFilledLeftTriangle':{return true}case'shapeIDRightTriangle':{return true}case'shapeIDFilledRightTriangle':{return true}case'shapeIDFilledStar':{return true}default:{break}}return true};en.$1w=function(e,L,hy,hz){if(hz){{return cR.isPointInCircle({x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},L)}}var hA=e.getMarkProperty('shape_id',hy);switch(hA){case'shapeIDCircle':{return cR.circleIntersectsCircle({center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:e.getMarkProperty('size',hy)*0.958333333333333/2},L)}case'shapeIDFilledCircle':{return cR.circleIntersectsCircle({center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:e.getMarkProperty('size',hy)*0.979166666666667/2},L)}case'shapeIDUnscaledFilledCircle':{return cR.circleIntersectsCircle({center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:e.getMarkProperty('size',hy)/2},L)}case'shapeIDSquare':{var hB={x:0,y:0,w:0,h:0};{var hC=Math.round(e.getMarkProperty('x',hy));var hD=Math.round(e.getMarkProperty('y',hy));var hE=Math.ceil(e.getMarkProperty('size',hy)*0.895833333333333/2);var hF=2*hE;tab.RectXYUtil.unionInPlace$1(hB,hC-hE,hD-hE,hF,hF)}return cR.circleIntersectsRect(L,hB)}case'shapeIDFilledSquare':{var hG={x:0,y:0,w:0,h:0};{var hH=Math.round(e.getMarkProperty('x',hy));var hI=Math.round(e.getMarkProperty('y',hy));var hJ=Math.ceil(e.getMarkProperty('size',hy)*0.9375/2);var hK=2*hJ;tab.RectXYUtil.unionInPlace$1(hG,hH-hJ,hI-hJ,hK,hK)}return cR.circleIntersectsRect(L,hG)}case'shapeIDAsterisk':{var hL={x:0,y:0,w:0,h:0};{var hM=Math.round(e.getMarkProperty('x',hy));var hN=Math.round(e.getMarkProperty('y',hy));var hO=Math.ceil(e.getMarkProperty('size',hy)*0.958333333333333/2);var hP=2*hO;tab.RectXYUtil.unionInPlace$1(hL,hM-hO,hN-hO,hP,hP)}return cR.circleIntersectsRect(L,hL)}case'shapeIDPlus':{var hQ={x:0,y:0,w:0,h:0};{var hR=Math.round(e.getMarkProperty('x',hy));var hS=Math.round(e.getMarkProperty('y',hy));var hT=Math.ceil(e.getMarkProperty('size',hy)*0.916666666666667/2);var hU=2*hT;tab.RectXYUtil.unionInPlace$1(hQ,hR-hT,hS-hT,hU,hU)}return cR.circleIntersectsRect(L,hQ)}case'shapeIDFilledPlus':{var hV={x:0,y:0,w:0,h:0};{var hW=Math.round(e.getMarkProperty('x',hy));var hX=Math.round(e.getMarkProperty('y',hy));var hY=Math.ceil(e.getMarkProperty('size',hy)*0.9375/2);var hZ=2*hY;tab.RectXYUtil.unionInPlace$1(hV,hW-hY,hX-hY,hZ,hZ)}return cR.circleIntersectsRect(L,hV)}case'shapeIDTimes':{var ia={x:0,y:0,w:0,h:0};{var ib=Math.round(e.getMarkProperty('x',hy));var ic=Math.round(e.getMarkProperty('y',hy));var id=Math.ceil(e.getMarkProperty('size',hy)*0.875/2);var ie=2*id;tab.RectXYUtil.unionInPlace$1(ia,ib-id,ic-id,ie,ie)}return cR.circleIntersectsRect(L,ia)}case'shapeIDFilledTimes':{var ig={x:0,y:0,w:0,h:0};{var ih=Math.round(e.getMarkProperty('x',hy));var ii=Math.round(e.getMarkProperty('y',hy));var ij=Math.ceil(e.getMarkProperty('size',hy)*0.9375/2);var ik=2*ij;tab.RectXYUtil.unionInPlace$1(ig,ih-ij,ii-ij,ik,ik)}return cR.circleIntersectsRect(L,ig)}case'shapeIDDiamond':{var il={x:0,y:0,w:0,h:0};{var im=Math.round(e.getMarkProperty('x',hy));var io=Math.round(e.getMarkProperty('y',hy));var ip=Math.ceil(e.getMarkProperty('size',hy)*1.04166666666667/2);var iq=2*ip;tab.RectXYUtil.unionInPlace$1(il,im-ip,io-ip,iq,iq)}return cR.circleIntersectsRect(L,il)}case'shapeIDFilledDiamond':{var ir={x:0,y:0,w:0,h:0};{var it=Math.round(e.getMarkProperty('x',hy));var iu=Math.round(e.getMarkProperty('y',hy));var iv=Math.ceil(e.getMarkProperty('size',hy)*1.04166666666667/2);var iw=2*iv;tab.RectXYUtil.unionInPlace$1(ir,it-iv,iu-iv,iw,iw)}return cR.circleIntersectsRect(L,ir)}case'shapeIDTriangle':{var ix={x:0,y:0,w:0,h:0};{var iy=Math.round(e.getMarkProperty('x',hy));var iz=Math.round(e.getMarkProperty('y',hy));var iA=Math.ceil(e.getMarkProperty('size',hy)*0.895833333333333/2);var iB=2*iA;tab.RectXYUtil.unionInPlace$1(ix,iy-iA,iz-iA,iB,iB)}return cR.circleIntersectsRect(L,ix)}case'shapeIDFilledTriangle':{var iC={x:0,y:0,w:0,h:0};{var iD=Math.round(e.getMarkProperty('x',hy));var iE=Math.round(e.getMarkProperty('y',hy));var iF=Math.ceil(e.getMarkProperty('size',hy)*0.916666666666667/2);var iG=2*iF;tab.RectXYUtil.unionInPlace$1(iC,iD-iF,iE-iF,iG,iG)}return cR.circleIntersectsRect(L,iC)}case'shapeIDDownTriangle':{var iH={x:0,y:0,w:0,h:0};{var iI=Math.round(e.getMarkProperty('x',hy));var iJ=Math.round(e.getMarkProperty('y',hy));var iK=Math.ceil(e.getMarkProperty('size',hy)*0.895833333333333/2);var iL=2*iK;tab.RectXYUtil.unionInPlace$1(iH,iI-iK,iJ-iK,iL,iL)}return cR.circleIntersectsRect(L,iH)}case'shapeIDFilledDownTriangle':{var iM={x:0,y:0,w:0,h:0};{var iN=Math.round(e.getMarkProperty('x',hy));var iO=Math.round(e.getMarkProperty('y',hy));var iP=Math.ceil(e.getMarkProperty('size',hy)*0.916666666666667/2);var iQ=2*iP;tab.RectXYUtil.unionInPlace$1(iM,iN-iP,iO-iP,iQ,iQ)}return cR.circleIntersectsRect(L,iM)}case'shapeIDLeftTriangle':{var iR={x:0,y:0,w:0,h:0};{var iS=Math.round(e.getMarkProperty('x',hy));var iT=Math.round(e.getMarkProperty('y',hy));var iU=Math.ceil(e.getMarkProperty('size',hy)*0.895833333333333/2);var iV=2*iU;tab.RectXYUtil.unionInPlace$1(iR,iS-iU,iT-iU,iV,iV)}return cR.circleIntersectsRect(L,iR)}case'shapeIDFilledLeftTriangle':{var iW={x:0,y:0,w:0,h:0};{var iX=Math.round(e.getMarkProperty('x',hy));var iY=Math.round(e.getMarkProperty('y',hy));var iZ=Math.ceil(e.getMarkProperty('size',hy)*0.916666666666667/2);var ja=2*iZ;tab.RectXYUtil.unionInPlace$1(iW,iX-iZ,iY-iZ,ja,ja)}return cR.circleIntersectsRect(L,iW)}case'shapeIDRightTriangle':{var jb={x:0,y:0,w:0,h:0};{var jc=Math.round(e.getMarkProperty('x',hy));var jd=Math.round(e.getMarkProperty('y',hy));var je=Math.ceil(e.getMarkProperty('size',hy)*0.895833333333333/2);var jf=2*je;tab.RectXYUtil.unionInPlace$1(jb,jc-je,jd-je,jf,jf)}return cR.circleIntersectsRect(L,jb)}case'shapeIDFilledRightTriangle':{var jg={x:0,y:0,w:0,h:0};{var jh=Math.round(e.getMarkProperty('x',hy));var ji=Math.round(e.getMarkProperty('y',hy));var jj=Math.ceil(e.getMarkProperty('size',hy)*0.916666666666667/2);var jk=2*jj;tab.RectXYUtil.unionInPlace$1(jg,jh-jj,ji-jj,jk,jk)}return cR.circleIntersectsRect(L,jg)}case'shapeIDFilledStar':{var jl={x:0,y:0,w:0,h:0};{var jm=Math.round(e.getMarkProperty('x',hy));var jn=Math.round(e.getMarkProperty('y',hy));var jo=Math.ceil(e.getMarkProperty('size',hy)*1.09166666666667/2);var jp=2*jo;tab.RectXYUtil.unionInPlace$1(jl,jm-jo,jn-jo,jp,jp)}return cR.circleIntersectsRect(L,jl)}default:{var jq=Math.round(e.getMarkProperty('x',hy));var jr=Math.round(e.getMarkProperty('y',hy));var js=Math.ceil(e.getMarkProperty('size',hy));var jt=Math.ceil(js/2);var ju={x:jq-jt,y:jr-jt,w:js,h:js};return cR.circleIntersectsRect(L,ju)}}};en.$1B=function(e,L,hy){var hz=e.getMarkProperty('shape_id',hy);switch(hz){case'shapeIDCircle':{return cR.polygonIntersectsCircle(L,{center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:e.getMarkProperty('size',hy)*0.958333333333333/2})}case'shapeIDFilledCircle':{return cR.polygonIntersectsCircle(L,{center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:e.getMarkProperty('size',hy)*0.979166666666667/2})}case'shapeIDUnscaledFilledCircle':{return cR.polygonIntersectsCircle(L,{center:{x:e.getMarkProperty('x',hy),y:e.getMarkProperty('y',hy)},radius:e.getMarkProperty('size',hy)/2})}case'shapeIDSquare':{var hA={x:0,y:0,w:0,h:0};{var hB=Math.round(e.getMarkProperty('x',hy));var hC=Math.round(e.getMarkProperty('y',hy));var hD=Math.ceil(e.getMarkProperty('size',hy)*0.895833333333333/2);var hE=2*hD;tab.RectXYUtil.unionInPlace$1(hA,hB-hD,hC-hD,hE,hE)}return cR.polygonIntersectsRect(L,hA)}case'shapeIDFilledSquare':{var hF={x:0,y:0,w:0,h:0};{var hG=Math.round(e.getMarkProperty('x',hy));var hH=Math.round(e.getMarkProperty('y',hy));var hI=Math.ceil(e.getMarkProperty('size',hy)*0.9375/2);var hJ=2*hI;tab.RectXYUtil.unionInPlace$1(hF,hG-hI,hH-hI,hJ,hJ)}return cR.polygonIntersectsRect(L,hF)}case'shapeIDAsterisk':{var hK={x:0,y:0,w:0,h:0};{var hL=Math.round(e.getMarkProperty('x',hy));var hM=Math.round(e.getMarkProperty('y',hy));var hN=Math.ceil(e.getMarkProperty('size',hy)*0.958333333333333/2);var hO=2*hN;tab.RectXYUtil.unionInPlace$1(hK,hL-hN,hM-hN,hO,hO)}return cR.polygonIntersectsRect(L,hK)}case'shapeIDPlus':{var hP={x:0,y:0,w:0,h:0};{var hQ=Math.round(e.getMarkProperty('x',hy));var hR=Math.round(e.getMarkProperty('y',hy));var hS=Math.ceil(e.getMarkProperty('size',hy)*0.916666666666667/2);var hT=2*hS;tab.RectXYUtil.unionInPlace$1(hP,hQ-hS,hR-hS,hT,hT)}return cR.polygonIntersectsRect(L,hP)}case'shapeIDFilledPlus':{var hU={x:0,y:0,w:0,h:0};{var hV=Math.round(e.getMarkProperty('x',hy));var hW=Math.round(e.getMarkProperty('y',hy));var hX=Math.ceil(e.getMarkProperty('size',hy)*0.9375/2);var hY=2*hX;tab.RectXYUtil.unionInPlace$1(hU,hV-hX,hW-hX,hY,hY)}return cR.polygonIntersectsRect(L,hU)}case'shapeIDTimes':{var hZ={x:0,y:0,w:0,h:0};{var ia=Math.round(e.getMarkProperty('x',hy));var ib=Math.round(e.getMarkProperty('y',hy));var ic=Math.ceil(e.getMarkProperty('size',hy)*0.875/2);var id=2*ic;tab.RectXYUtil.unionInPlace$1(hZ,ia-ic,ib-ic,id,id)}return cR.polygonIntersectsRect(L,hZ)}case'shapeIDFilledTimes':{var ie={x:0,y:0,w:0,h:0};{var ig=Math.round(e.getMarkProperty('x',hy));var ih=Math.round(e.getMarkProperty('y',hy));var ii=Math.ceil(e.getMarkProperty('size',hy)*0.9375/2);var ij=2*ii;tab.RectXYUtil.unionInPlace$1(ie,ig-ii,ih-ii,ij,ij)}return cR.polygonIntersectsRect(L,ie)}case'shapeIDDiamond':{var ik={x:0,y:0,w:0,h:0};{var il=Math.round(e.getMarkProperty('x',hy));var im=Math.round(e.getMarkProperty('y',hy));var io=Math.ceil(e.getMarkProperty('size',hy)*1.04166666666667/2);var ip=2*io;tab.RectXYUtil.unionInPlace$1(ik,il-io,im-io,ip,ip)}return cR.polygonIntersectsRect(L,ik)}case'shapeIDFilledDiamond':{var iq={x:0,y:0,w:0,h:0};{var ir=Math.round(e.getMarkProperty('x',hy));var it=Math.round(e.getMarkProperty('y',hy));var iu=Math.ceil(e.getMarkProperty('size',hy)*1.04166666666667/2);var iv=2*iu;tab.RectXYUtil.unionInPlace$1(iq,ir-iu,it-iu,iv,iv)}return cR.polygonIntersectsRect(L,iq)}case'shapeIDTriangle':{var iw={x:0,y:0,w:0,h:0};{var ix=Math.round(e.getMarkProperty('x',hy));var iy=Math.round(e.getMarkProperty('y',hy));var iz=Math.ceil(e.getMarkProperty('size',hy)*0.895833333333333/2);var iA=2*iz;tab.RectXYUtil.unionInPlace$1(iw,ix-iz,iy-iz,iA,iA)}return cR.polygonIntersectsRect(L,iw)}case'shapeIDFilledTriangle':{var iB={x:0,y:0,w:0,h:0};{var iC=Math.round(e.getMarkProperty('x',hy));var iD=Math.round(e.getMarkProperty('y',hy));var iE=Math.ceil(e.getMarkProperty('size',hy)*0.916666666666667/2);var iF=2*iE;tab.RectXYUtil.unionInPlace$1(iB,iC-iE,iD-iE,iF,iF)}return cR.polygonIntersectsRect(L,iB)}case'shapeIDDownTriangle':{var iG={x:0,y:0,w:0,h:0};{var iH=Math.round(e.getMarkProperty('x',hy));var iI=Math.round(e.getMarkProperty('y',hy));var iJ=Math.ceil(e.getMarkProperty('size',hy)*0.895833333333333/2);var iK=2*iJ;tab.RectXYUtil.unionInPlace$1(iG,iH-iJ,iI-iJ,iK,iK)}return cR.polygonIntersectsRect(L,iG)}case'shapeIDFilledDownTriangle':{var iL={x:0,y:0,w:0,h:0};{var iM=Math.round(e.getMarkProperty('x',hy));var iN=Math.round(e.getMarkProperty('y',hy));var iO=Math.ceil(e.getMarkProperty('size',hy)*0.916666666666667/2);var iP=2*iO;tab.RectXYUtil.unionInPlace$1(iL,iM-iO,iN-iO,iP,iP)}return cR.polygonIntersectsRect(L,iL)}case'shapeIDLeftTriangle':{var iQ={x:0,y:0,w:0,h:0};{var iR=Math.round(e.getMarkProperty('x',hy));var iS=Math.round(e.getMarkProperty('y',hy));var iT=Math.ceil(e.getMarkProperty('size',hy)*0.895833333333333/2);var iU=2*iT;tab.RectXYUtil.unionInPlace$1(iQ,iR-iT,iS-iT,iU,iU)}return cR.polygonIntersectsRect(L,iQ)}case'shapeIDFilledLeftTriangle':{var iV={x:0,y:0,w:0,h:0};{var iW=Math.round(e.getMarkProperty('x',hy));var iX=Math.round(e.getMarkProperty('y',hy));var iY=Math.ceil(e.getMarkProperty('size',hy)*0.916666666666667/2);var iZ=2*iY;tab.RectXYUtil.unionInPlace$1(iV,iW-iY,iX-iY,iZ,iZ)}return cR.polygonIntersectsRect(L,iV)}case'shapeIDRightTriangle':{var ja={x:0,y:0,w:0,h:0};{var jb=Math.round(e.getMarkProperty('x',hy));var jc=Math.round(e.getMarkProperty('y',hy));var jd=Math.ceil(e.getMarkProperty('size',hy)*0.895833333333333/2);var je=2*jd;tab.RectXYUtil.unionInPlace$1(ja,jb-jd,jc-jd,je,je)}return cR.polygonIntersectsRect(L,ja)}case'shapeIDFilledRightTriangle':{var jf={x:0,y:0,w:0,h:0};{var jg=Math.round(e.getMarkProperty('x',hy));var jh=Math.round(e.getMarkProperty('y',hy));var ji=Math.ceil(e.getMarkProperty('size',hy)*0.916666666666667/2);var jj=2*ji;tab.RectXYUtil.unionInPlace$1(jf,jg-ji,jh-ji,jj,jj)}return cR.polygonIntersectsRect(L,jf)}case'shapeIDFilledStar':{var jk={x:0,y:0,w:0,h:0};{var jl=Math.round(e.getMarkProperty('x',hy));var jm=Math.round(e.getMarkProperty('y',hy));var jn=Math.ceil(e.getMarkProperty('size',hy)*1.09166666666667/2);var jo=2*jn;tab.RectXYUtil.unionInPlace$1(jk,jl-jn,jm-jn,jo,jo)}return cR.polygonIntersectsRect(L,jk)}default:{var jp=Math.round(e.getMarkProperty('x',hy));var jq=Math.round(e.getMarkProperty('y',hy));var jr=Math.ceil(e.getMarkProperty('size',hy));var js=Math.ceil(jr/2);var jt={x:jp-js,y:jq-js,w:jr,h:jr};return cR.polygonIntersectsRect(L,jt)}}};en.$G=function(e,L,hy){var hz=L.getMarkInstanceOffsets(hy);var hA=hz.length;for(var hB=0;hB<hA;hB++){var hC=hz[hB];if(hC!==0){e.save();e.translate(hC,0)}{var hD=bb.get_multipolyLineSizeOffset();var hE=(L.hasPixelGeometry?1:L.getMarkProperty('size',hy));bb.createMultipolygonPath(e,L.hasPixelGeometry,L.getMarkProperty('x',hy),L.getMarkProperty('y',hy),hE,7,L.getMarkGeometry(L.getMarkProperty('geometry',hy)));e.set_lineWidth(1.75-hD);e.set_strokeStyle(L.getMarkProperty('selected_halo_color',hy)['colorOverrideNone']);e.stroke()}if(hC!==0){e.restore()}}};en.$H=function(e,L,hy){var hz=L.getMarkInstanceOffsets(hy);var hA=hz.length;for(var hB=0;hB<hA;hB++){var hC=hz[hB];if(hC!==0){e.save();e.translate(hC,0)}{var hD=bb.get_multipolyLineSizeOffset();var hE=(L.hasPixelGeometry?1:L.getMarkProperty('size',hy));bb.createMultipolygonPath(e,L.hasPixelGeometry,L.getMarkProperty('x',hy),L.getMarkProperty('y',hy),hE,7,L.getMarkGeometry(L.getMarkProperty('geometry',hy)));e.set_lineWidth(2.5-hD);e.set_strokeStyle(L.getMarkProperty('selected_halo_color',hy)['colorOverrideNone']);e.stroke()}if(hC!==0){e.restore()}}};en.$A=function(e,L,hy){var hz=false;if(hy-1>0&&!L.isMarkEndPrimitive(hy-1)){hz=hz||L.isMarkHighlighted(hy-1)}if(hy+1<L.get_markCount()&&!L.isMarkEndPrimitive(hy)){hz=hz||L.isMarkHighlighted(hy+1)}var hA;var hB=L.getMarkProperty('x',hy);var hC=L.getMarkProperty('y',hy);if(L.isMarkSelected(hy)){hA=L.getMarkProperty('selected_halo_color',hy)['colorOverrideOpaque'];{var hD=L.getMarkProperty('draw_border',hy);var hE=(!!hD?2:0);var hF=7+hE;bb.renderCircle(e,0+hB,0+hC,hF,hA,4)}hA=L.getMarkColors(hy)['colorOverrideOpaque'];{var hG=L.getMarkInstanceOffsets(hy);var hH=hG.length;for(var hI=0;hI<hH;hI++){var hJ=hG[hI];if(hJ!==0){e.save();e.translate(hJ,0)}{var hK=7;bb.renderFilledCircle(e,0+hB,0+hC,hK,hA)}if(hJ!==0){e.restore()}}}hB=L.getMarkProperty('x1',hy);hC=L.getMarkProperty('y1',hy);hA=L.getMarkProperty('selected_halo_color',hy)['colorOverrideOpaque'];{var hL=L.getMarkProperty('draw_border',hy);var hM=(!!hL?2:0);var hN=7+hM;bb.renderCircle(e,0+hB,0+hC,hN,hA,4)}hA=L.getMarkColors(hy)['colorOverrideOpaque'];{var hO=L.getMarkInstanceOffsets(hy);var hP=hO.length;for(var hQ=0;hQ<hP;hQ++){var hR=hO[hQ];if(hR!==0){e.save();e.translate(hR,0)}{var hS=7;bb.renderFilledCircle(e,0+hB,0+hC,hS,hA)}if(hR!==0){e.restore()}}}}else if(L.isMarkHighlighted(hy)&&!hz){hA=L.getMarkProperty('selected_multi_prim_halo_color',hy)['colorOverrideNone'];{var hT=L.getMarkInstanceOffsets(hy);var hU=hT.length;for(var hV=0;hV<hU;hV++){var hW=hT[hV];if(hW!==0){e.save();e.translate(hW,0)}{var hX=L.getMarkProperty('draw_border',hy);var hY=(!!hX?2:0);var hZ=7+hY;bb.renderCircle(e,0+hB,0+hC,hZ,hA,4)}if(hW!==0){e.restore()}}}hA=L.getMarkColors(hy)['colorOverrideNone'];{var ia=L.getMarkInstanceOffsets(hy);var ib=ia.length;for(var ic=0;ic<ib;ic++){var id=ia[ic];if(id!==0){e.save();e.translate(id,0)}{var ie=7;bb.renderFilledCircle(e,0+hB,0+hC,ie,hA)}if(id!==0){e.restore()}}}hB=L.getMarkProperty('x1',hy);hC=L.getMarkProperty('y1',hy);hA=L.getMarkProperty('selected_multi_prim_halo_color',hy)['colorOverrideNone'];{var ig=L.getMarkInstanceOffsets(hy);var ih=ig.length;for(var ii=0;ii<ih;ii++){var ij=ig[ii];if(ij!==0){e.save();e.translate(ij,0)}{var ik=L.getMarkProperty('draw_border',hy);var il=(!!ik?2:0);var im=7+il;bb.renderCircle(e,0+hB,0+hC,im,hA,4)}if(ij!==0){e.restore()}}}hA=L.getMarkColors(hy)['colorOverrideNone'];{var io=L.getMarkInstanceOffsets(hy);var ip=io.length;for(var iq=0;iq<ip;iq++){var ir=io[iq];if(ir!==0){e.save();e.translate(ir,0)}{var it=7;bb.renderFilledCircle(e,0+hB,0+hC,it,hA)}if(ir!==0){e.restore()}}}}else{hA=(L.drawBorder?L.get_borderColor():tab.SceneUtils.blackColor)['colorOverrideNone'];{var iu=L.getMarkInstanceOffsets(hy);var iv=iu.length;for(var iw=0;iw<iv;iw++){var ix=iu[iw];if(ix!==0){e.save();e.translate(ix,0)}{var iy=5;bb.renderFilledCircle(e,0+hB,0+hC,iy,hA)}if(ix!==0){e.restore()}}}hB=L.getMarkProperty('x1',hy);hC=L.getMarkProperty('y1',hy);hA=(L.drawBorder?L.get_borderColor():tab.SceneUtils.blackColor)['colorOverrideNone'];{var iz=L.getMarkInstanceOffsets(hy);var iA=iz.length;for(var iB=0;iB<iA;iB++){var iC=iz[iB];if(iC!==0){e.save();e.translate(iC,0)}{var iD=5;bb.renderFilledCircle(e,0+hB,0+hC,iD,hA)}if(iC!==0){e.restore()}}}}};en.$B=function(e,L,hy){var hz=(L.drawBorder?L.get_borderColor():tab.SceneUtils.blackColor)['colorOverrideNone'];var hA=L.getMarkProperty('x',hy);var hB=L.getMarkProperty('y',hy);{var hC=L.getMarkInstanceOffsets(hy);var hD=hC.length;for(var hE=0;hE<hD;hE++){var hF=hC[hE];if(hF!==0){e.save();e.translate(hF,0)}{var hG=7;bb.renderFilledCircle(e,0+hA,0+hB,hG,hz)}if(hF!==0){e.restore()}}}hA=L.getMarkProperty('x1',hy);hB=L.getMarkProperty('y1',hy);{var hH=L.getMarkInstanceOffsets(hy);var hI=hH.length;for(var hJ=0;hJ<hI;hJ++){var hK=hH[hJ];if(hK!==0){e.save();e.translate(hK,0)}{var hL=7;bb.renderFilledCircle(e,0+hA,0+hB,hL,hz)}if(hK!==0){e.restore()}}}};en.$I=function(e,L,hy){var hz=L.getMarkInstanceOffsets(hy);var hA=hz.length;for(var hB=0;hB<hA;hB++){var hC=hz[hB];if(hC!==0){e.save();e.translate(hC,0)}var hD=L.getMarkProperty('size',hy)/2;var hE=L.getMarkProperty('draw_border',hy);var hF=(!!hE?1:0);var hG=L.getMarkProperty('selected_halo_color',hy)['colorOverrideNone'];var hH=L.getMarkProperty('theta',hy);var hI=L.getMarkProperty('theta1',hy);var hJ=hH>hI;if(Math.abs(hH-hI)>=1){bb.renderCircle(e,L.getMarkProperty('x',hy),L.getMarkProperty('y',hy),(hD+hF)*2,hG,1)}else{bb.renderWedge(e,L.getMarkProperty('x',hy),L.getMarkProperty('y',hy),hD,hH,hI,hG,1+hF,hJ)}if(hC!==0){e.restore()}}};en.$J=function(e,L,hy){var hz=L.getMarkInstanceOffsets(hy);var hA=hz.length;for(var hB=0;hB<hA;hB++){var hC=hz[hB];if(hC!==0){e.save();e.translate(hC,0)}var hD=L.getMarkProperty('size',hy)/2;var hE=L.getMarkProperty('draw_border',hy);var hF=(!!hE?1:0);var hG=L.getMarkProperty('selected_halo_color',hy)['colorOverrideNone'];var hH=L.getMarkProperty('theta',hy);var hI=L.getMarkProperty('theta1',hy);var hJ=hH>hI;if(Math.abs(hH-hI)>=1){bb.renderCircle(e,L.getMarkProperty('x',hy),L.getMarkProperty('y',hy),(hD+hF)*2,hG,2)}else{bb.renderWedge(e,L.getMarkProperty('x',hy),L.getMarkProperty('y',hy),hD,hH,hI,hG,2+hF,hJ)}if(hC!==0){e.restore()}}};en.$1s=function(e,L,hy){if(!(L.clipCase!==0&&L.useCellClipForSelection)){{var hz=L.getMarkInstanceOffsets(hy);var hA=hz.length;for(var hB=0;hB<hA;hB++){var hC=hz[hB];if(hC!==0){e.save();e.translate(hC,0)}var hD=-L.getMarkProperty('width',hy)/2;var hE=L.getMarkProperty('height',hy)/2-1;var hF=L.getMarkProperty('x',hy)+hD;var hG=L.getMarkProperty('y',hy)+hE;var hH=L.getMarkProperty('x',hy)+L.getMarkProperty('width',hy)+hD;var hI=L.getMarkProperty('y',hy)+hE;var hJ=1;var hK=hH-hF;var hL=[hF,hG+hJ-1,hF+hK,hG+hJ-1];e.set_lineCap('square');e.set_lineWidth(hJ);e.set_strokeStyle(L.getMarkColors(hy)['colorOverrideOpaque']);bb.strokePath(e,hL,false,true);if(hC!==0){e.restore()}}}}if(L.clipCase!==0&&L.useCellClipForSelection){{var hM=L.getMarkInstanceOffsets(hy);var hN=hM.length;for(var hO=0;hO<hN;hO++){var hP=hM[hO];if(hP!==0){e.save();e.translate(hP,0)}{var hQ=Math.floor(1);var hR=L.getMarkProperty('draw_border',hy);var hS=(!!hR?1:0);var hT=((L.get_markType()==='text')?0:1);var hU=L.getMarkProperty('x',hy)-L.getMarkProperty('clip_width',hy)/2;var hV=L.getMarkProperty('x',hy)+L.getMarkProperty('clip_width',hy)/2;var hW=L.getMarkProperty('y',hy)-L.getMarkProperty('clip_height',hy)/2;var hX=L.getMarkProperty('y',hy)+L.getMarkProperty('clip_height',hy)/2;var hY=Math.min(hU,hV);var hZ=Math.min(hW,hX);var ia=Math.abs(hV-hU);var ib=Math.abs(hX-hW);var ic=bb.roundStartAndExtent(hZ,ib,L.get_minBarHeight());var id=bb.roundStartAndExtent(hY,ia,L.get_minBarWidth());hY=id.item1-hT;hZ=ic.item1-hT;ia=id.item2+hQ+hS+hT-1;ib=ic.item2+hQ+hS+hT-1;if(!!false){ia=ib=Math.min(ia,ib)}if(!L.isWrappedDomain){var ie=L.getUserPaneRectByMark(hy);if(!tab.RectXYUtil.intersectsWith$1(ie,Math.floor(hY),Math.floor(hZ),Math.floor(ia),Math.floor(ib))){return}if(ie.x>=hY){var ig=ie.x+hQ-1;ia-=ig-hY;hY=ig}if(ie.x+ie.w<=hY+ia){ia=ie.x+ie.w-hY-1}if(ie.y>=hZ){var ih=ie.y+hQ-1;ib-=ih-hZ;hZ=ih}if(ie.y+ie.h<=hZ+ib){ib=ie.y+ie.h-hZ-1}}e.set_lineJoin('miter');bb.renderBarOutline(e,hY,hZ,ia,ib,L.getMarkColors(hy)['colorOverrideNone'],hQ,L.get_minBarWidth(),L.get_minBarHeight(),false)}if(hP!==0){e.restore()}}}}};en.$1t=function(e,L,hy){if(!(L.clipCase!==0&&L.useCellClipForSelection)){{var hz=L.getMarkInstanceOffsets(hy);var hA=hz.length;for(var hB=0;hB<hA;hB++){var hC=hz[hB];if(hC!==0){e.save();e.translate(hC,0)}var hD=-L.getMarkProperty('width',hy)/2;var hE=L.getMarkProperty('height',hy)/2-1;var hF=L.getMarkProperty('x',hy)+hD;var hG=L.getMarkProperty('y',hy)+hE;var hH=L.getMarkProperty('x',hy)+L.getMarkProperty('width',hy)+hD;var hI=L.getMarkProperty('y',hy)+hE;var hJ=2;var hK=hH-hF;var hL=[hF,hG+hJ-1,hF+hK,hG+hJ-1];e.set_lineCap('square');e.set_lineWidth(hJ);e.set_strokeStyle(L.getMarkColors(hy)['colorOverrideOpaque']);bb.strokePath(e,hL,false,true);if(hC!==0){e.restore()}}}}if(L.clipCase!==0&&L.useCellClipForSelection){{var hM=L.getMarkInstanceOffsets(hy);var hN=hM.length;for(var hO=0;hO<hN;hO++){var hP=hM[hO];if(hP!==0){e.save();e.translate(hP,0)}{var hQ=Math.floor(2);var hR=L.getMarkProperty('draw_border',hy);var hS=(!!hR?1:0);var hT=((L.get_markType()==='text')?0:1);var hU=L.getMarkProperty('x',hy)-L.getMarkProperty('clip_width',hy)/2;var hV=L.getMarkProperty('x',hy)+L.getMarkProperty('clip_width',hy)/2;var hW=L.getMarkProperty('y',hy)-L.getMarkProperty('clip_height',hy)/2;var hX=L.getMarkProperty('y',hy)+L.getMarkProperty('clip_height',hy)/2;var hY=Math.min(hU,hV);var hZ=Math.min(hW,hX);var ia=Math.abs(hV-hU);var ib=Math.abs(hX-hW);var ic=bb.roundStartAndExtent(hZ,ib,L.get_minBarHeight());var id=bb.roundStartAndExtent(hY,ia,L.get_minBarWidth());hY=id.item1-hT;hZ=ic.item1-hT;ia=id.item2+hQ+hS+hT-1;ib=ic.item2+hQ+hS+hT-1;if(!!false){ia=ib=Math.min(ia,ib)}if(!L.isWrappedDomain){var ie=L.getUserPaneRectByMark(hy);if(!tab.RectXYUtil.intersectsWith$1(ie,Math.floor(hY),Math.floor(hZ),Math.floor(ia),Math.floor(ib))){return}if(ie.x>=hY){var ig=ie.x+hQ-1;ia-=ig-hY;hY=ig}if(ie.x+ie.w<=hY+ia){ia=ie.x+ie.w-hY-1}if(ie.y>=hZ){var ih=ie.y+hQ-1;ib-=ih-hZ;hZ=ih}if(ie.y+ie.h<=hZ+ib){ib=ie.y+ie.h-hZ-1}}e.set_lineJoin('miter');bb.renderBarOutline(e,hY,hZ,ia,ib,L.getMarkColors(hy)['colorOverrideNone'],hQ,L.get_minBarWidth(),L.get_minBarHeight(),false)}if(hP!==0){e.restore()}}}}};en.$C=function(e,L,hy){var hz=ss.Int32.trunc(L.getMarkProperty('size',hy)+0.5)/2;var hA=1;if(L.scaleMarksInX&&L.scaleMarksInY){{var hB=L.getMarkInstanceOffsets(hy);var hC=hB.length;for(var hD=0;hD<hC;hD++){var hE=hB[hD];if(hE!==0){e.save();e.translate(hE,0)}{var hF=Math.floor(hA);var hG=L.getMarkProperty('draw_border',hy);var hH=(!!hG?1:0);var hI=((L.get_markType()==='text')?0:1);var hJ=L.getMarkProperty('x',hy);var hK=L.getMarkProperty('x1',hy);var hL=L.getMarkProperty('y',hy);var hM=L.getMarkProperty('y1',hy);var hN=Math.min(hJ,hK);var hO=Math.min(hL,hM);var hP=Math.abs(hK-hJ);var hQ=Math.abs(hM-hL);var hR=bb.roundStartAndExtent(hO,hQ,L.get_minBarHeight());var hS=bb.roundStartAndExtent(hN,hP,L.get_minBarWidth());hN=hS.item1-hI;hO=hR.item1-hI;hP=hS.item2+hF+hH+hI-1;hQ=hR.item2+hF+hH+hI-1;if(!!false){hP=hQ=Math.min(hP,hQ)}if(!L.isWrappedDomain){var hT=L.getUserPaneRectByMark(hy);if(!tab.RectXYUtil.intersectsWith$1(hT,Math.floor(hN),Math.floor(hO),Math.floor(hP),Math.floor(hQ))){return}if(hT.x>=hN){var hU=hT.x+hF-1;hP-=hU-hN;hN=hU}if(hT.x+hT.w<=hN+hP){hP=hT.x+hT.w-hN-1}if(hT.y>=hO){var hV=hT.y+hF-1;hQ-=hV-hO;hO=hV}if(hT.y+hT.h<=hO+hQ){hQ=hT.y+hT.h-hO-1}}e.set_lineJoin('miter');bb.renderBarOutline(e,hN,hO,hP,hQ,L.getMarkProperty('selected_halo_color',hy)['colorOverrideNone'],hF,L.get_minBarWidth(),L.get_minBarHeight(),false)}if(hE!==0){e.restore()}}}}if(!L.scaleMarksInX&&L.scaleMarksInY){{var hW=L.getMarkInstanceOffsets(hy);var hX=hW.length;for(var hY=0;hY<hX;hY++){var hZ=hW[hY];if(hZ!==0){e.save();e.translate(hZ,0)}{var ia=Math.floor(hA);var ib=L.getMarkProperty('draw_border',hy);var ic=(!!ib?1:0);var id=((L.get_markType()==='text')?0:1);var ie=L.getMarkProperty('x',hy)-hz;var ig=L.getMarkProperty('x',hy)+hz;var ih=L.getMarkProperty('y',hy);var ii=L.getMarkProperty('y1',hy);var ij=Math.min(ie,ig);var ik=Math.min(ih,ii);var il=Math.abs(ig-ie);var im=Math.abs(ii-ih);var io=bb.roundStartAndExtent(ik,im,L.get_minBarHeight());var ip=bb.roundStartAndExtent(ij,il,L.get_minBarWidth());ij=ip.item1-id;ik=io.item1-id;il=ip.item2+ia+ic+id-1;im=io.item2+ia+ic+id-1;if(!!false){il=im=Math.min(il,im)}if(!L.isWrappedDomain){var iq=L.getUserPaneRectByMark(hy);if(!tab.RectXYUtil.intersectsWith$1(iq,Math.floor(ij),Math.floor(ik),Math.floor(il),Math.floor(im))){return}if(iq.x>=ij){var ir=iq.x+ia-1;il-=ir-ij;ij=ir}if(iq.x+iq.w<=ij+il){il=iq.x+iq.w-ij-1}if(iq.y>=ik){var it=iq.y+ia-1;im-=it-ik;ik=it}if(iq.y+iq.h<=ik+im){im=iq.y+iq.h-ik-1}}e.set_lineJoin('miter');bb.renderBarOutline(e,ij,ik,il,im,L.getMarkProperty('selected_halo_color',hy)['colorOverrideNone'],ia,L.get_minBarWidth(),L.get_minBarHeight(),false)}if(hZ!==0){e.restore()}}}}if(L.scaleMarksInX&&!L.scaleMarksInY){{var iu=L.getMarkInstanceOffsets(hy);var iv=iu.length;for(var iw=0;iw<iv;iw++){var ix=iu[iw];if(ix!==0){e.save();e.translate(ix,0)}{var iy=Math.floor(hA);var iz=L.getMarkProperty('draw_border',hy);var iA=(!!iz?1:0);var iB=((L.get_markType()==='text')?0:1);var iC=L.getMarkProperty('x',hy);var iD=L.getMarkProperty('x1',hy);var iE=L.getMarkProperty('y',hy)-hz;var iF=L.getMarkProperty('y',hy)+hz;var iG=Math.min(iC,iD);var iH=Math.min(iE,iF);var iI=Math.abs(iD-iC);var iJ=Math.abs(iF-iE);var iK=bb.roundStartAndExtent(iH,iJ,L.get_minBarHeight());var iL=bb.roundStartAndExtent(iG,iI,L.get_minBarWidth());iG=iL.item1-iB;iH=iK.item1-iB;iI=iL.item2+iy+iA+iB-1;iJ=iK.item2+iy+iA+iB-1;if(!!false){iI=iJ=Math.min(iI,iJ)}if(!L.isWrappedDomain){var iM=L.getUserPaneRectByMark(hy);if(!tab.RectXYUtil.intersectsWith$1(iM,Math.floor(iG),Math.floor(iH),Math.floor(iI),Math.floor(iJ))){return}if(iM.x>=iG){var iN=iM.x+iy-1;iI-=iN-iG;iG=iN}if(iM.x+iM.w<=iG+iI){iI=iM.x+iM.w-iG-1}if(iM.y>=iH){var iO=iM.y+iy-1;iJ-=iO-iH;iH=iO}if(iM.y+iM.h<=iH+iJ){iJ=iM.y+iM.h-iH-1}}e.set_lineJoin('miter');bb.renderBarOutline(e,iG,iH,iI,iJ,L.getMarkProperty('selected_halo_color',hy)['colorOverrideNone'],iy,L.get_minBarWidth(),L.get_minBarHeight(),false)}if(ix!==0){e.restore()}}}}if(!L.scaleMarksInX&&!L.scaleMarksInY){{var iP=L.getMarkInstanceOffsets(hy);var iQ=iP.length;for(var iR=0;iR<iQ;iR++){var iS=iP[iR];if(iS!==0){e.save();e.translate(iS,0)}{var iT=Math.floor(hA);var iU=L.getMarkProperty('draw_border',hy);var iV=(!!iU?1:0);var iW=((L.get_markType()==='text')?0:1);var iX=L.getMarkProperty('x',hy)-hz;var iY=L.getMarkProperty('x',hy)+hz;var iZ=L.getMarkProperty('y',hy)-hz;var ja=L.getMarkProperty('y',hy)+hz;var jb=Math.min(iX,iY);var jc=Math.min(iZ,ja);var jd=Math.abs(iY-iX);var je=Math.abs(ja-iZ);var jf=bb.roundStartAndExtent(jc,je,L.get_minBarHeight());var jg=bb.roundStartAndExtent(jb,jd,L.get_minBarWidth());jb=jg.item1-iW;jc=jf.item1-iW;jd=jg.item2+iT+iV+iW-1;je=jf.item2+iT+iV+iW-1;if(!!true){jd=je=Math.min(jd,je)}if(!L.isWrappedDomain){var jh=L.getUserPaneRectByMark(hy);if(!tab.RectXYUtil.intersectsWith$1(jh,Math.floor(jb),Math.floor(jc),Math.floor(jd),Math.floor(je))){return}if(jh.x>=jb){var ji=jh.x+iT-1;jd-=ji-jb;jb=ji}if(jh.x+jh.w<=jb+jd){jd=jh.x+jh.w-jb-1}if(jh.y>=jc){var jj=jh.y+iT-1;je-=jj-jc;jc=jj}if(jh.y+jh.h<=jc+je){je=jh.y+jh.h-jc-1}}e.set_lineJoin('miter');bb.renderBarOutline(e,jb,jc,jd,je,L.getMarkProperty('selected_halo_color',hy)['colorOverrideNone'],iT,L.get_minBarWidth(),L.get_minBarHeight(),false)}if(iS!==0){e.restore()}}}}};en.$D=function(e,L,hy){var hz=ss.Int32.trunc(L.getMarkProperty('size',hy)+0.5)/2;var hA=2;if(L.scaleMarksInX&&L.scaleMarksInY){{var hB=L.getMarkInstanceOffsets(hy);var hC=hB.length;for(var hD=0;hD<hC;hD++){var hE=hB[hD];if(hE!==0){e.save();e.translate(hE,0)}{var hF=Math.floor(hA);var hG=L.getMarkProperty('draw_border',hy);var hH=(!!hG?1:0);var hI=((L.get_markType()==='text')?0:1);var hJ=L.getMarkProperty('x',hy);var hK=L.getMarkProperty('x1',hy);var hL=L.getMarkProperty('y',hy);var hM=L.getMarkProperty('y1',hy);var hN=Math.min(hJ,hK);var hO=Math.min(hL,hM);var hP=Math.abs(hK-hJ);var hQ=Math.abs(hM-hL);var hR=bb.roundStartAndExtent(hO,hQ,L.get_minBarHeight());var hS=bb.roundStartAndExtent(hN,hP,L.get_minBarWidth());hN=hS.item1-hI;hO=hR.item1-hI;hP=hS.item2+hF+hH+hI-1;hQ=hR.item2+hF+hH+hI-1;if(!!false){hP=hQ=Math.min(hP,hQ)}if(!L.isWrappedDomain){var hT=L.getUserPaneRectByMark(hy);if(!tab.RectXYUtil.intersectsWith$1(hT,Math.floor(hN),Math.floor(hO),Math.floor(hP),Math.floor(hQ))){return}if(hT.x>=hN){var hU=hT.x+hF-1;hP-=hU-hN;hN=hU}if(hT.x+hT.w<=hN+hP){hP=hT.x+hT.w-hN-1}if(hT.y>=hO){var hV=hT.y+hF-1;hQ-=hV-hO;hO=hV}if(hT.y+hT.h<=hO+hQ){hQ=hT.y+hT.h-hO-1}}e.set_lineJoin('miter');bb.renderBarOutline(e,hN,hO,hP,hQ,L.getMarkProperty('selected_halo_color',hy)['colorOverrideNone'],hF,L.get_minBarWidth(),L.get_minBarHeight(),false)}if(hE!==0){e.restore()}}}}if(!L.scaleMarksInX&&L.scaleMarksInY){{var hW=L.getMarkInstanceOffsets(hy);var hX=hW.length;for(var hY=0;hY<hX;hY++){var hZ=hW[hY];if(hZ!==0){e.save();e.translate(hZ,0)}{var ia=Math.floor(hA);var ib=L.getMarkProperty('draw_border',hy);var ic=(!!ib?1:0);var id=((L.get_markType()==='text')?0:1);var ie=L.getMarkProperty('x',hy)-hz;var ig=L.getMarkProperty('x',hy)+hz;var ih=L.getMarkProperty('y',hy);var ii=L.getMarkProperty('y1',hy);var ij=Math.min(ie,ig);var ik=Math.min(ih,ii);var il=Math.abs(ig-ie);var im=Math.abs(ii-ih);var io=bb.roundStartAndExtent(ik,im,L.get_minBarHeight());var ip=bb.roundStartAndExtent(ij,il,L.get_minBarWidth());ij=ip.item1-id;ik=io.item1-id;il=ip.item2+ia+ic+id-1;im=io.item2+ia+ic+id-1;if(!!false){il=im=Math.min(il,im)}if(!L.isWrappedDomain){var iq=L.getUserPaneRectByMark(hy);if(!tab.RectXYUtil.intersectsWith$1(iq,Math.floor(ij),Math.floor(ik),Math.floor(il),Math.floor(im))){return}if(iq.x>=ij){var ir=iq.x+ia-1;il-=ir-ij;ij=ir}if(iq.x+iq.w<=ij+il){il=iq.x+iq.w-ij-1}if(iq.y>=ik){var it=iq.y+ia-1;im-=it-ik;ik=it}if(iq.y+iq.h<=ik+im){im=iq.y+iq.h-ik-1}}e.set_lineJoin('miter');bb.renderBarOutline(e,ij,ik,il,im,L.getMarkProperty('selected_halo_color',hy)['colorOverrideNone'],ia,L.get_minBarWidth(),L.get_minBarHeight(),false)}if(hZ!==0){e.restore()}}}}if(L.scaleMarksInX&&!L.scaleMarksInY){{var iu=L.getMarkInstanceOffsets(hy);var iv=iu.length;for(var iw=0;iw<iv;iw++){var ix=iu[iw];if(ix!==0){e.save();e.translate(ix,0)}{var iy=Math.floor(hA);var iz=L.getMarkProperty('draw_border',hy);var iA=(!!iz?1:0);var iB=((L.get_markType()==='text')?0:1);var iC=L.getMarkProperty('x',hy);var iD=L.getMarkProperty('x1',hy);var iE=L.getMarkProperty('y',hy)-hz;var iF=L.getMarkProperty('y',hy)+hz;var iG=Math.min(iC,iD);var iH=Math.min(iE,iF);var iI=Math.abs(iD-iC);var iJ=Math.abs(iF-iE);var iK=bb.roundStartAndExtent(iH,iJ,L.get_minBarHeight());var iL=bb.roundStartAndExtent(iG,iI,L.get_minBarWidth());iG=iL.item1-iB;iH=iK.item1-iB;iI=iL.item2+iy+iA+iB-1;iJ=iK.item2+iy+iA+iB-1;if(!!false){iI=iJ=Math.min(iI,iJ)}if(!L.isWrappedDomain){var iM=L.getUserPaneRectByMark(hy);if(!tab.RectXYUtil.intersectsWith$1(iM,Math.floor(iG),Math.floor(iH),Math.floor(iI),Math.floor(iJ))){return}if(iM.x>=iG){var iN=iM.x+iy-1;iI-=iN-iG;iG=iN}if(iM.x+iM.w<=iG+iI){iI=iM.x+iM.w-iG-1}if(iM.y>=iH){var iO=iM.y+iy-1;iJ-=iO-iH;iH=iO}if(iM.y+iM.h<=iH+iJ){iJ=iM.y+iM.h-iH-1}}e.set_lineJoin('miter');bb.renderBarOutline(e,iG,iH,iI,iJ,L.getMarkProperty('selected_halo_color',hy)['colorOverrideNone'],iy,L.get_minBarWidth(),L.get_minBarHeight(),false)}if(ix!==0){e.restore()}}}}if(!L.scaleMarksInX&&!L.scaleMarksInY){{var iP=L.getMarkInstanceOffsets(hy);var iQ=iP.length;for(var iR=0;iR<iQ;iR++){var iS=iP[iR];if(iS!==0){e.save();e.translate(iS,0)}{var iT=Math.floor(hA);var iU=L.getMarkProperty('draw_border',hy);var iV=(!!iU?1:0);var iW=((L.get_markType()==='text')?0:1);var iX=L.getMarkProperty('x',hy)-hz;var iY=L.getMarkProperty('x',hy)+hz;var iZ=L.getMarkProperty('y',hy)-hz;var ja=L.getMarkProperty('y',hy)+hz;var jb=Math.min(iX,iY);var jc=Math.min(iZ,ja);var jd=Math.abs(iY-iX);var je=Math.abs(ja-iZ);var jf=bb.roundStartAndExtent(jc,je,L.get_minBarHeight());var jg=bb.roundStartAndExtent(jb,jd,L.get_minBarWidth());jb=jg.item1-iW;jc=jf.item1-iW;jd=jg.item2+iT+iV+iW-1;je=jf.item2+iT+iV+iW-1;if(!!true){jd=je=Math.min(jd,je)}if(!L.isWrappedDomain){var jh=L.getUserPaneRectByMark(hy);if(!tab.RectXYUtil.intersectsWith$1(jh,Math.floor(jb),Math.floor(jc),Math.floor(jd),Math.floor(je))){return}if(jh.x>=jb){var ji=jh.x+iT-1;jd-=ji-jb;jb=ji}if(jh.x+jh.w<=jb+jd){jd=jh.x+jh.w-jb-1}if(jh.y>=jc){var jj=jh.y+iT-1;je-=jj-jc;jc=jj}if(jh.y+jh.h<=jc+je){je=jh.y+jh.h-jc-1}}e.set_lineJoin('miter');bb.renderBarOutline(e,jb,jc,jd,je,L.getMarkProperty('selected_halo_color',hy)['colorOverrideNone'],iT,L.get_minBarWidth(),L.get_minBarHeight(),false)}if(iS!==0){e.restore()}}}}};en.$E=function(e,L,hy){var hz=false;if(hy-1>0&&!L.isMarkEndPrimitive(hy-1)){hz=hz||L.isMarkHighlighted(hy-1)}if(hy+1<L.get_markCount()&&!L.isMarkEndPrimitive(hy)){hz=hz||L.isMarkHighlighted(hy+1)}var hA;var hB=L.getMarkProperty('x',hy);var hC=L.getMarkProperty('y',hy);if(L.isMarkSelected(hy)){hA=L.getMarkProperty('selected_halo_color',hy)['colorOverrideOpaque'];{var hD=L.getMarkProperty('draw_border',hy);var hE=(!!hD?2:0);var hF=L.getMarkProperty('size',hy)+4+4+hE;bb.renderCircle(e,0+hB,0+hC,hF,hA,4)}hA=L.getMarkColors(hy)['colorOverrideOpaque'];{var hG=L.getMarkInstanceOffsets(hy);var hH=hG.length;for(var hI=0;hI<hH;hI++){var hJ=hG[hI];if(hJ!==0){e.save();e.translate(hJ,0)}{var hK=L.getMarkProperty('size',hy)+4+4;bb.renderFilledCircle(e,0+hB,0+hC,hK,hA)}if(hJ!==0){e.restore()}}}}else if(L.isMarkHighlighted(hy)&&!hz){hA=L.getMarkProperty('selected_multi_prim_halo_color',hy)['colorOverrideNone'];{var hL=L.getMarkInstanceOffsets(hy);var hM=hL.length;for(var hN=0;hN<hM;hN++){var hO=hL[hN];if(hO!==0){e.save();e.translate(hO,0)}{var hP=L.getMarkProperty('draw_border',hy);var hQ=(!!hP?2:0);var hR=L.getMarkProperty('size',hy)+4+4+hQ;bb.renderCircle(e,0+hB,0+hC,hR,hA,4)}if(hO!==0){e.restore()}}}hA=L.getMarkColors(hy)['colorOverrideNone'];{var hS=L.getMarkInstanceOffsets(hy);var hT=hS.length;for(var hU=0;hU<hT;hU++){var hV=hS[hU];if(hV!==0){e.save();e.translate(hV,0)}{var hW=L.getMarkProperty('size',hy)+4+4;bb.renderFilledCircle(e,0+hB,0+hC,hW,hA)}if(hV!==0){e.restore()}}}}else{hA=L.getMarkColors(hy)['colorOverrideNone'];{var hX=L.getMarkInstanceOffsets(hy);var hY=hX.length;for(var hZ=0;hZ<hY;hZ++){var ia=hX[hZ];if(ia!==0){e.save();e.translate(ia,0)}{var ib=L.getMarkProperty('size',hy)+4;bb.renderFilledCircle(e,0+hB,0+hC,ib,hA)}if(ia!==0){e.restore()}}}}};en.$F=function(e,L,hy){var hz=L.getMarkColors(hy)['colorOverrideNone'];var hA=L.getMarkProperty('x',hy);var hB=L.getMarkProperty('y',hy);{var hC=L.getMarkInstanceOffsets(hy);var hD=hC.length;for(var hE=0;hE<hD;hE++){var hF=hC[hE];if(hF!==0){e.save();e.translate(hF,0)}{var hG=L.getMarkProperty('size',hy)+8;bb.renderFilledCircle(e,0+hA,0+hB,hG,hz)}if(hF!==0){e.restore()}}}};en.$1u=function(e,L){var hy=false;switch(e){case'shapeIDCircle':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDFilledCircle':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'border':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDUnscaledFilledCircle':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'border':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDSquare':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDFilledSquare':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'border':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDAsterisk':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDPlus':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDFilledPlus':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDTimes':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDFilledTimes':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDDiamond':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDFilledDiamond':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDTriangle':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDFilledTriangle':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDDownTriangle':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDFilledDownTriangle':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDLeftTriangle':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDFilledLeftTriangle':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDRightTriangle':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDFilledRightTriangle':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}case'shapeIDFilledStar':{switch(L){case'normalUnder':case'normalOn':case'selectedUnder':case'hoverOverlay':case'pressedOverlay':{hy=true;break}default:{break}}break}default:{hy=true;break}}return hy};en.$j=function(e,L,hy){var hz=0;switch(e){case'shapeIDCircle':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+6);break}case'pressedOverlay':{hz=Math.ceil(hy+8);break}default:{break}}break}case'shapeIDFilledCircle':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'border':{hz=Math.ceil(hy+2);break}case'hoverOverlay':{hz=Math.ceil(hy+2);break}case'pressedOverlay':{hz=Math.ceil(hy+6);break}default:{break}}break}case'shapeIDUnscaledFilledCircle':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'border':{hz=Math.ceil(hy+2);break}case'hoverOverlay':{hz=Math.ceil(hy+4);break}case'pressedOverlay':{hz=Math.ceil(hy+6);break}default:{break}}break}case'shapeIDSquare':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+4);break}case'pressedOverlay':{hz=Math.ceil(hy+6);break}default:{break}}break}case'shapeIDFilledSquare':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'border':{hz=Math.ceil(hy+2);break}case'hoverOverlay':{hz=Math.ceil(hy+2);break}case'pressedOverlay':{hz=Math.ceil(hy+4);break}default:{break}}break}case'shapeIDAsterisk':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+6);break}case'pressedOverlay':{hz=Math.ceil(hy+8);break}default:{break}}break}case'shapeIDPlus':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+4);break}case'pressedOverlay':{hz=Math.ceil(hy+6);break}default:{break}}break}case'shapeIDFilledPlus':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+3);break}case'pressedOverlay':{hz=Math.ceil(hy+5);break}default:{break}}break}case'shapeIDTimes':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+4);break}case'pressedOverlay':{hz=Math.ceil(hy+6);break}default:{break}}break}case'shapeIDFilledTimes':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+4);break}case'pressedOverlay':{hz=Math.ceil(hy+6);break}default:{break}}break}case'shapeIDDiamond':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+6);break}case'pressedOverlay':{hz=Math.ceil(hy+8);break}default:{break}}break}case'shapeIDFilledDiamond':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+5);break}case'pressedOverlay':{hz=Math.ceil(hy+7);break}default:{break}}break}case'shapeIDTriangle':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+6);break}case'pressedOverlay':{hz=Math.ceil(hy+8);break}default:{break}}break}case'shapeIDFilledTriangle':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+2);break}case'pressedOverlay':{hz=Math.ceil(hy+4);break}default:{break}}break}case'shapeIDDownTriangle':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+4);break}case'pressedOverlay':{hz=Math.ceil(hy+4);break}default:{break}}break}case'shapeIDFilledDownTriangle':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+2);break}case'pressedOverlay':{hz=Math.ceil(hy+4);break}default:{break}}break}case'shapeIDLeftTriangle':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+4);break}case'pressedOverlay':{hz=Math.ceil(hy+4);break}default:{break}}break}case'shapeIDFilledLeftTriangle':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+2);break}case'pressedOverlay':{hz=Math.ceil(hy+4);break}default:{break}}break}case'shapeIDRightTriangle':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+4);break}case'pressedOverlay':{hz=Math.ceil(hy+6);break}default:{break}}break}case'shapeIDFilledRightTriangle':{switch(L){case'normalUnder':{hz=Math.ceil(hy+4);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+4);break}case'hoverOverlay':{hz=Math.ceil(hy+2);break}case'pressedOverlay':{hz=Math.ceil(hy+4);break}default:{break}}break}case'shapeIDFilledStar':{switch(L){case'normalUnder':{hz=Math.ceil(hy+6);break}case'normalOn':{hz=Math.ceil(hy+2);break}case'selectedUnder':{hz=Math.ceil(hy+6);break}case'hoverOverlay':{hz=Math.ceil(hy+10);break}case'pressedOverlay':{hz=Math.ceil(hy+14);break}default:{break}}break}default:{break}}return hz};en.$K=function(e,L,hy){var hz=L.getMarkProperty('shape_id',hy);var hA=L.getMarkProperty('x',hy);var hB=L.getMarkProperty('y',hy);if(L.shouldStampThisShapeMark(hy)){hA=hA+0.5<<0;hB=hB+0.5<<0}switch(hz){case'shapeIDCircle':{en.$N(e,L,hA,hB,hy);break}case'shapeIDFilledCircle':{en.$T(e,L,hA,hB,hy);break}case'shapeIDUnscaledFilledCircle':{en.$1p(e,L,hA,hB,hy);break}case'shapeIDSquare':{en.$1j(e,L,hA,hB,hy);break}case'shapeIDFilledSquare':{en.$15(e,L,hA,hB,hy);break}case'shapeIDAsterisk':{en.$L(e,L,hA,hB,hy);break}case'shapeIDPlus':{en.$1f(e,L,hA,hB,hy);break}case'shapeIDFilledPlus':{en.$11(e,L,hA,hB,hy);break}case'shapeIDTimes':{en.$1l(e,L,hA,hB,hy);break}case'shapeIDFilledTimes':{en.$19(e,L,hA,hB,hy);break}case'shapeIDDiamond':{en.$P(e,L,hA,hB,hy);break}case'shapeIDFilledDiamond':{en.$V(e,L,hA,hB,hy);break}case'shapeIDTriangle':{en.$1n(e,L,hA,hB,hy);break}case'shapeIDFilledTriangle':{en.$1b(e,L,hA,hB,hy);break}case'shapeIDDownTriangle':{en.$R(e,L,hA,hB,hy);break}case'shapeIDFilledDownTriangle':{en.$X(e,L,hA,hB,hy);break}case'shapeIDLeftTriangle':{en.$1d(e,L,hA,hB,hy);break}case'shapeIDFilledLeftTriangle':{en.$Z(e,L,hA,hB,hy);break}case'shapeIDRightTriangle':{en.$1h(e,L,hA,hB,hy);break}case'shapeIDFilledRightTriangle':{en.$13(e,L,hA,hB,hy);break}case'shapeIDFilledStar':{en.$17(e,L,hA,hB,hy);break}default:{if(ss.isValue(tab.ApplicationModel.get_instance().get_shapeManager().getImageElement(hz))){var hC=L.getMarkInstanceOffsets(hy);var hD=hC.length;for(var hE=0;hE<hD;hE++){var hF=hC[hE];if(hF!==0){e.save();e.translate(hF,0)}bb.renderCustomShape(e,L,hy,'hoverOverlay','colorOverrideNone');if(hF!==0){e.restore()}}}else{en.$N(e,L,hA,hB,hy)}break}}};en.$1r=function(e,L,hy){var hz=L.getMarkIndexFromTupleID(hy);var hA=L.getMarkProperty('shape_id',hz);var hB=L.getMarkProperty('x',hz);var hC=L.getMarkProperty('y',hz);if(L.shouldStampThisShapeMark(hz)){hB=hB+0.5<<0;hC=hC+0.5<<0}switch(hA){case'shapeIDCircle':{en.$O(e,L,hB,hC,hz);break}case'shapeIDFilledCircle':{en.$U(e,L,hB,hC,hz);break}case'shapeIDUnscaledFilledCircle':{en.$1q(e,L,hB,hC,hz);break}case'shapeIDSquare':{en.$1k(e,L,hB,hC,hz);break}case'shapeIDFilledSquare':{en.$16(e,L,hB,hC,hz);break}case'shapeIDAsterisk':{en.$M(e,L,hB,hC,hz);break}case'shapeIDPlus':{en.$1g(e,L,hB,hC,hz);break}case'shapeIDFilledPlus':{en.$12(e,L,hB,hC,hz);break}case'shapeIDTimes':{en.$1m(e,L,hB,hC,hz);break}case'shapeIDFilledTimes':{en.$1a(e,L,hB,hC,hz);break}case'shapeIDDiamond':{en.$Q(e,L,hB,hC,hz);break}case'shapeIDFilledDiamond':{en.$W(e,L,hB,hC,hz);break}case'shapeIDTriangle':{en.$1o(e,L,hB,hC,hz);break}case'shapeIDFilledTriangle':{en.$1c(e,L,hB,hC,hz);break}case'shapeIDDownTriangle':{en.$S(e,L,hB,hC,hz);break}case'shapeIDFilledDownTriangle':{en.$Y(e,L,hB,hC,hz);break}case'shapeIDLeftTriangle':{en.$1e(e,L,hB,hC,hz);break}case'shapeIDFilledLeftTriangle':{en.$10(e,L,hB,hC,hz);break}case'shapeIDRightTriangle':{en.$1i(e,L,hB,hC,hz);break}case'shapeIDFilledRightTriangle':{en.$14(e,L,hB,hC,hz);break}case'shapeIDFilledStar':{en.$18(e,L,hB,hC,hz);break}default:{if(ss.isValue(tab.ApplicationModel.get_instance().get_shapeManager().getImageElement(hA))){var hD=L.getMarkInstanceOffsets(hz);var hE=hD.length;for(var hF=0;hF<hE;hF++){var hG=hD[hF];if(hG!==0){e.save();e.translate(hG,0)}bb.renderCustomShape(e,L,hz,'pressedOverlay','colorOverrideNone');if(hG!==0){e.restore()}}}else{en.$O(e,L,hB,hC,hz)}break}}};en.$N=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=L.getMarkProperty('draw_border',hA);var hJ=(!!hI?2:0);var hK=L.getMarkProperty('size',hA)*0.958333333333333+2+hJ;bb.renderCircle(e,0+hC,0+hD,hK,hB,1)}if(hH!==0){e.restore()}}}};en.$O=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=L.getMarkProperty('draw_border',hA);var hJ=(!!hI?2:0);var hK=L.getMarkProperty('size',hA)*0.958333333333333+3+hJ;bb.renderCircle(e,0+hC,0+hD,hK,hB,2)}if(hH!==0){e.restore()}}}};en.$T=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=L.getMarkProperty('draw_border',hA);var hJ=(!!hI?2:0);var hK=L.getMarkProperty('size',hA)*0.979166666666667+hJ;bb.renderCircle(e,0+hC,0+hD,hK,hB,1)}if(hH!==0){e.restore()}}}};en.$U=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=L.getMarkProperty('draw_border',hA);var hJ=(!!hI?2:0);var hK=L.getMarkProperty('size',hA)*0.979166666666667+1+hJ;bb.renderCircle(e,0+hC,0+hD,hK,hB,2)}if(hH!==0){e.restore()}}}};en.$1p=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=L.getMarkProperty('draw_border',hA);var hJ=(!!hI?2:0);var hK=L.getMarkProperty('size',hA)+hJ;bb.renderCircle(e,0+hC,0+hD,hK,hB,1)}if(hH!==0){e.restore()}}}};en.$1q=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=L.getMarkProperty('draw_border',hA);var hJ=(!!hI?2:0);var hK=L.getMarkProperty('size',hA)+1+hJ;bb.renderCircle(e,0+hC,0+hD,hK,hB,2)}if(hH!==0){e.restore()}}}};en.$1j=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=L.getMarkProperty('size',hA)*0.895833333333333+3;bb.renderRectangle(e,hC+0,hD+0,hI,hI,hB,1)}if(hH!==0){e.restore()}}}};en.$1k=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=L.getMarkProperty('size',hA)*0.895833333333333+4;bb.renderRectangle(e,hC+0,hD+0,hI,hI,hB,2)}if(hH!==0){e.restore()}}}};en.$15=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=L.getMarkProperty('size',hA)*0.9375+1;bb.renderRectangle(e,hC+0,hD+0,hI,hI,hB,1)}if(hH!==0){e.restore()}}}};en.$16=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=L.getMarkProperty('size',hA)*0.9375+2;bb.renderRectangle(e,hC+0,hD+0,hI,hI,hB,2)}if(hH!==0){e.restore()}}}};en.$L=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(36);var hJ=(L.getMarkProperty('size',hA)*0.958333333333333+2)/2;var hK=0.899999976158142*hJ;var hL=(L.getMarkProperty('size',hA)*0.958333333333333+6)/4;var hM=2.5;var hN=1.5;hI[0]=-hM+hC;hI[1]=0+hD;hI[2]=-hK+hC;hI[3]=hL-hM+hD;hI[4]=hN-hK+hC;hI[5]=hL+hD;hI[6]=-hN+hC;hI[7]=hM+hD;hI[8]=-hN+hC;hI[9]=hJ+hD;hI[10]=hN+hC;hI[11]=hJ+hD;hI[12]=hN+hC;hI[13]=hM+hD;hI[14]=hK-hN+hC;hI[15]=hL+hD;hI[16]=hK+hC;hI[17]=hL-hM+hD;hI[18]=hM+hC;hI[19]=0+hD;hI[20]=hK+hC;hI[21]=hM-hL+hD;hI[22]=hK-hN+hC;hI[23]=-hL+hD;hI[24]=hN+hC;hI[25]=-hM+hD;hI[26]=hN+hC;hI[27]=-hJ+hD;hI[28]=-hN+hC;hI[29]=-hJ+hD;hI[30]=-hN+hC;hI[31]=-hM+hD;hI[32]=hN-hK+hC;hI[33]=-hL+hD;hI[34]=-hK+hC;hI[35]=hM-hL+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$M=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(36);var hJ=(L.getMarkProperty('size',hA)*0.958333333333333+4)/2;var hK=0.899999976158142*hJ;var hL=(L.getMarkProperty('size',hA)*0.958333333333333+8)/4;var hM=3;var hN=2;hI[0]=-hM+hC;hI[1]=0+hD;hI[2]=-hK+hC;hI[3]=hL-hM+hD;hI[4]=hN-hK+hC;hI[5]=hL+hD;hI[6]=-hN+hC;hI[7]=hM+hD;hI[8]=-hN+hC;hI[9]=hJ+hD;hI[10]=hN+hC;hI[11]=hJ+hD;hI[12]=hN+hC;hI[13]=hM+hD;hI[14]=hK-hN+hC;hI[15]=hL+hD;hI[16]=hK+hC;hI[17]=hL-hM+hD;hI[18]=hM+hC;hI[19]=0+hD;hI[20]=hK+hC;hI[21]=hM-hL+hD;hI[22]=hK-hN+hC;hI[23]=-hL+hD;hI[24]=hN+hC;hI[25]=-hM+hD;hI[26]=hN+hC;hI[27]=-hJ+hD;hI[28]=-hN+hC;hI[29]=-hJ+hD;hI[30]=-hN+hC;hI[31]=-hM+hD;hI[32]=hN-hK+hC;hI[33]=-hL+hD;hI[34]=-hK+hC;hI[35]=hM-hL+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1f=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(24);var hJ=(L.getMarkProperty('size',hA)*0.916666666666667+2)/2;var hK=1.5;hI[0]=-hK+hC;hI[1]=-hJ+hD;hI[2]=-hK+hC;hI[3]=-hK+hD;hI[4]=-hJ+hC;hI[5]=-hK+hD;hI[6]=-hJ+hC;hI[7]=hK+hD;hI[8]=-hK+hC;hI[9]=hK+hD;hI[10]=-hK+hC;hI[11]=hJ+hD;hI[12]=hK+hC;hI[13]=hJ+hD;hI[14]=hK+hC;hI[15]=hK+hD;hI[16]=hJ+hC;hI[17]=hK+hD;hI[18]=hJ+hC;hI[19]=-hK+hD;hI[20]=hK+hC;hI[21]=-hK+hD;hI[22]=hK+hC;hI[23]=-hJ+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1g=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(24);var hJ=(L.getMarkProperty('size',hA)*0.916666666666667+3)/2;var hK=2;hI[0]=-hK+hC;hI[1]=-hJ+hD;hI[2]=-hK+hC;hI[3]=-hK+hD;hI[4]=-hJ+hC;hI[5]=-hK+hD;hI[6]=-hJ+hC;hI[7]=hK+hD;hI[8]=-hK+hC;hI[9]=hK+hD;hI[10]=-hK+hC;hI[11]=hJ+hD;hI[12]=hK+hC;hI[13]=hJ+hD;hI[14]=hK+hC;hI[15]=hK+hD;hI[16]=hJ+hC;hI[17]=hK+hD;hI[18]=hJ+hC;hI[19]=-hK+hD;hI[20]=hK+hC;hI[21]=-hK+hD;hI[22]=hK+hC;hI[23]=-hJ+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$11=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(24);var hJ=L.getMarkProperty('size',hA)*0.9375/2;var hK=hJ/3;hI[0]=-hK+hC;hI[1]=-hJ+hD;hI[2]=-hK+hC;hI[3]=-hK+hD;hI[4]=-hJ+hC;hI[5]=-hK+hD;hI[6]=-hJ+hC;hI[7]=hK+hD;hI[8]=-hK+hC;hI[9]=hK+hD;hI[10]=-hK+hC;hI[11]=hJ+hD;hI[12]=hK+hC;hI[13]=hJ+hD;hI[14]=hK+hC;hI[15]=hK+hD;hI[16]=hJ+hC;hI[17]=hK+hD;hI[18]=hJ+hC;hI[19]=-hK+hD;hI[20]=hK+hC;hI[21]=-hK+hD;hI[22]=hK+hC;hI[23]=-hJ+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$12=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(24);var hJ=(L.getMarkProperty('size',hA)*0.9375+1)/2;var hK=(L.getMarkProperty('size',hA)*0.9375+3)/6;hI[0]=-hK+hC;hI[1]=-hJ+hD;hI[2]=-hK+hC;hI[3]=-hK+hD;hI[4]=-hJ+hC;hI[5]=-hK+hD;hI[6]=-hJ+hC;hI[7]=hK+hD;hI[8]=-hK+hC;hI[9]=hK+hD;hI[10]=-hK+hC;hI[11]=hJ+hD;hI[12]=hK+hC;hI[13]=hJ+hD;hI[14]=hK+hC;hI[15]=hK+hD;hI[16]=hJ+hC;hI[17]=hK+hD;hI[18]=hJ+hC;hI[19]=-hK+hD;hI[20]=hK+hC;hI[21]=-hK+hD;hI[22]=hK+hC;hI[23]=-hJ+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1l=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(24);var hJ=(L.getMarkProperty('size',hA)*0.875+4)/2;var hK=2;hI[0]=-hJ+hK+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=-hJ+hK+hD;hI[4]=-hK+hC;hI[5]=0+hD;hI[6]=-hJ+hC;hI[7]=hJ-hK+hD;hI[8]=-hJ+hK+hC;hI[9]=hJ+hD;hI[10]=0+hC;hI[11]=hK+hD;hI[12]=hJ-hK+hC;hI[13]=hJ+hD;hI[14]=hJ+hC;hI[15]=hJ-hK+hD;hI[16]=hK+hC;hI[17]=0+hD;hI[18]=hJ+hC;hI[19]=-hJ+hK+hD;hI[20]=hJ-hK+hC;hI[21]=-hJ+hD;hI[22]=0+hC;hI[23]=-hK+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1m=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(24);var hJ=(L.getMarkProperty('size',hA)*0.875+4)/2;var hK=3;hI[0]=-hJ+hK+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=-hJ+hK+hD;hI[4]=-hK+hC;hI[5]=0+hD;hI[6]=-hJ+hC;hI[7]=hJ-hK+hD;hI[8]=-hJ+hK+hC;hI[9]=hJ+hD;hI[10]=0+hC;hI[11]=hK+hD;hI[12]=hJ-hK+hC;hI[13]=hJ+hD;hI[14]=hJ+hC;hI[15]=hJ-hK+hD;hI[16]=hK+hC;hI[17]=0+hD;hI[18]=hJ+hC;hI[19]=-hJ+hK+hD;hI[20]=hJ-hK+hC;hI[21]=-hJ+hD;hI[22]=0+hC;hI[23]=-hK+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$19=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(24);var hJ=L.getMarkProperty('size',hA)*0.9375/2;var hK=L.getMarkProperty('size',hA)*0.9375/4;hI[0]=-hK+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=-hK+hD;hI[4]=-hK+hC;hI[5]=0+hD;hI[6]=-hJ+hC;hI[7]=hK+hD;hI[8]=-hK+hC;hI[9]=hJ+hD;hI[10]=0+hC;hI[11]=hK+hD;hI[12]=hK+hC;hI[13]=hJ+hD;hI[14]=hJ+hC;hI[15]=hK+hD;hI[16]=hK+hC;hI[17]=0+hD;hI[18]=hJ+hC;hI[19]=-hK+hD;hI[20]=hK+hC;hI[21]=-hJ+hD;hI[22]=0+hC;hI[23]=-hK+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1a=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(24);var hJ=L.getMarkProperty('size',hA)*0.9375/2;var hK=L.getMarkProperty('size',hA)*0.9375/4;hI[0]=-hK+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=-hK+hD;hI[4]=-hK+hC;hI[5]=0+hD;hI[6]=-hJ+hC;hI[7]=hK+hD;hI[8]=-hK+hC;hI[9]=hJ+hD;hI[10]=0+hC;hI[11]=hK+hD;hI[12]=hK+hC;hI[13]=hJ+hD;hI[14]=hJ+hC;hI[15]=hK+hD;hI[16]=hK+hC;hI[17]=0+hD;hI[18]=hJ+hC;hI[19]=-hK+hD;hI[20]=hK+hC;hI[21]=-hJ+hD;hI[22]=0+hC;hI[23]=-hK+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$P=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(8);var hJ=(L.getMarkProperty('size',hA)*1.04166666666667+3)/2;hI[0]=0+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=0+hD;hI[4]=0+hC;hI[5]=hJ+hD;hI[6]=hJ+hC;hI[7]=0+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$Q=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(8);var hJ=(L.getMarkProperty('size',hA)*1.04166666666667+4)/2;hI[0]=0+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=0+hD;hI[4]=0+hC;hI[5]=hJ+hD;hI[6]=hJ+hC;hI[7]=0+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$V=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(8);var hJ=L.getMarkProperty('size',hA)*1.04166666666667/2;hI[0]=0+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=0+hD;hI[4]=0+hC;hI[5]=hJ+hD;hI[6]=hJ+hC;hI[7]=0+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$W=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(8);var hJ=(L.getMarkProperty('size',hA)*1.04166666666667+2)/2;hI[0]=0+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=0+hD;hI[4]=0+hC;hI[5]=hJ+hD;hI[6]=hJ+hC;hI[7]=0+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1n=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=(L.getMarkProperty('size',hA)*0.895833333333333+3)/2;var hK=(L.getMarkProperty('size',hA)*0.895833333333333+6)/2;hI[0]=0+hC;hI[1]=-hK+hD;hI[2]=-hJ+hC;hI[3]=hJ+hD;hI[4]=hJ+hC;hI[5]=hJ+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1o=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=(L.getMarkProperty('size',hA)*0.895833333333333+4)/2;var hK=(L.getMarkProperty('size',hA)*0.895833333333333+8)/2;hI[0]=0+hC;hI[1]=-hK+hD;hI[2]=-hJ+hC;hI[3]=hJ+hD;hI[4]=hJ+hC;hI[5]=hJ+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1b=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=L.getMarkProperty('size',hA)*0.916666666666667/2;hI[0]=0+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=hJ+hD;hI[4]=hJ+hC;hI[5]=hJ+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1c=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=(L.getMarkProperty('size',hA)*0.916666666666667+1)/2;hI[0]=0+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=hJ+hD;hI[4]=hJ+hC;hI[5]=hJ+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$R=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=(L.getMarkProperty('size',hA)*0.895833333333333+2.5)/2;var hK=(L.getMarkProperty('size',hA)*0.895833333333333+6)/2;hI[0]=0+hC;hI[1]=hK+hD;hI[2]=-hJ+hC;hI[3]=-hJ+hD;hI[4]=hJ+hC;hI[5]=-hJ+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$S=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=(L.getMarkProperty('size',hA)*0.895833333333333+4)/2;var hK=(L.getMarkProperty('size',hA)*0.895833333333333+8)/2;hI[0]=0+hC;hI[1]=hK+hD;hI[2]=-hJ+hC;hI[3]=-hJ+hD;hI[4]=hJ+hC;hI[5]=-hJ+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$X=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=L.getMarkProperty('size',hA)*0.916666666666667/2;hI[0]=0+hC;hI[1]=hJ+hD;hI[2]=-hJ+hC;hI[3]=-hJ+hD;hI[4]=hJ+hC;hI[5]=-hJ+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$Y=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=(L.getMarkProperty('size',hA)*0.916666666666667+1)/2;hI[0]=0+hC;hI[1]=hJ+hD;hI[2]=-hJ+hC;hI[3]=-hJ+hD;hI[4]=hJ+hC;hI[5]=-hJ+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1d=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=(L.getMarkProperty('size',hA)*0.895833333333333+3)/2;var hK=(L.getMarkProperty('size',hA)*0.895833333333333+6)/2;hI[0]=-hK+hC;hI[1]=0+hD;hI[2]=hJ+hC;hI[3]=-hJ+hD;hI[4]=hJ+hC;hI[5]=hJ+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1e=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=(L.getMarkProperty('size',hA)*0.895833333333333+4)/2;var hK=(L.getMarkProperty('size',hA)*0.895833333333333+8)/2;hI[0]=-hK+hC;hI[1]=0+hD;hI[2]=hJ+hC;hI[3]=-hJ+hD;hI[4]=hJ+hC;hI[5]=hJ+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$Z=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=L.getMarkProperty('size',hA)*0.916666666666667/2;hI[0]=-hJ+hC;hI[1]=0+hD;hI[2]=hJ+hC;hI[3]=-hJ+hD;hI[4]=hJ+hC;hI[5]=hJ+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$10=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=(L.getMarkProperty('size',hA)*0.916666666666667+1)/2;hI[0]=-hJ+hC;hI[1]=0+hD;hI[2]=hJ+hC;hI[3]=-hJ+hD;hI[4]=hJ+hC;hI[5]=hJ+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1h=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=(L.getMarkProperty('size',hA)*0.895833333333333+3)/2;var hK=(L.getMarkProperty('size',hA)*0.895833333333333+6)/2;hI[0]=-hJ+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=hJ+hD;hI[4]=hK+hC;hI[5]=0+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$1i=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=(L.getMarkProperty('size',hA)*0.895833333333333+4)/2;var hK=(L.getMarkProperty('size',hA)*0.895833333333333+8)/2;hI[0]=-hJ+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=hJ+hD;hI[4]=hK+hC;hI[5]=0+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$13=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=L.getMarkProperty('size',hA)*0.916666666666667/2;hI[0]=-hJ+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=hJ+hD;hI[4]=hJ+hC;hI[5]=0+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$14=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(6);var hJ=(L.getMarkProperty('size',hA)*0.916666666666667+1)/2;hI[0]=-hJ+hC;hI[1]=-hJ+hD;hI[2]=-hJ+hC;hI[3]=hJ+hD;hI[4]=hJ+hC;hI[5]=0+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$17=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(20);var hJ=L.getMarkProperty('size',hA)*1.09166666666667+2;var hK=hJ*0.3877;var hL=hJ/2;hI[0]=0+hC;hI[1]=-hL+hJ*0.0246+hD;hI[2]=-hL+hJ*0.3817+hC;hI[3]=-hL+hK+hD;hI[4]=-hL+hC;hI[5]=-hL+hK+hD;hI[6]=-hL+hJ*0.3088+hC;hI[7]=-hL+hJ*0.612+hD;hI[8]=-hL+hJ*0.1909+hC;hI[9]=-hL+hJ*0.9751+hD;hI[10]=0+hC;hI[11]=-hL+hJ*0.7507+hD;hI[12]=-hL+hJ*0.8085+hC;hI[13]=-hL+hJ*0.9751+hD;hI[14]=-hL+hJ*0.6905+hC;hI[15]=-hL+hJ*0.612+hD;hI[16]=hL+hC;hI[17]=-hL+hK+hD;hI[18]=-hL+hJ*0.6176+hC;hI[19]=-hL+hK+hD;e.set_lineWidth(1);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};en.$18=function(e,L,hy,hz,hA){var hB=L.getMarkProperty('selected_halo_color',hA)['colorOverrideNone'];var hC=hy;var hD=hz;{var hE=L.getMarkInstanceOffsets(hA);var hF=hE.length;for(var hG=0;hG<hF;hG++){var hH=hE[hG];if(hH!==0){e.save();e.translate(hH,0)}{var hI=new Array(20);var hJ=L.getMarkProperty('size',hA)*1.09166666666667+4;var hK=hJ*0.3877;var hL=hJ/2;hI[0]=0+hC;hI[1]=-hL+hJ*0.0246+hD;hI[2]=-hL+hJ*0.3817+hC;hI[3]=-hL+hK+hD;hI[4]=-hL+hC;hI[5]=-hL+hK+hD;hI[6]=-hL+hJ*0.3088+hC;hI[7]=-hL+hJ*0.612+hD;hI[8]=-hL+hJ*0.1909+hC;hI[9]=-hL+hJ*0.9751+hD;hI[10]=0+hC;hI[11]=-hL+hJ*0.7507+hD;hI[12]=-hL+hJ*0.8085+hC;hI[13]=-hL+hJ*0.9751+hD;hI[14]=-hL+hJ*0.6905+hC;hI[15]=-hL+hJ*0.612+hD;hI[16]=hL+hC;hI[17]=-hL+hK+hD;hI[18]=-hL+hJ*0.6176+hC;hI[19]=-hL+hK+hD;e.set_lineWidth(2);e.set_strokeStyle(hB);e.set_lineJoin('miter');bb.strokePath(e,hI,true,true)}if(hH!==0){e.restore()}}}};global.tab.MarksRenderer=en;var eo=function(){};eo.__typeName='tab.Metrics';eo.get_scrollW=function(){return eo.$0()};eo.get_minScrollWidth=function(){if(dojo.isSafari||tab.BrowserSupport.get_isMac()){return 60}return eo.get_scrollW()*2};eo.get_scrollH=function(){return eo.$0()};eo.get_minScrollHeight=function(){if(dojo.isSafari||tab.BrowserSupport.get_isMac()){return 60}return eo.get_scrollH()*2};eo.$0=function(){return tab.MiscUtil.lazyInitStaticField(eo,'_scrollBarSize',function(){return tabBootstrap.LayoutMetrics.getScrollbarSize()})};global.tab.Metrics=eo;var ep=function(){this.$5=false;this.$5=true;$(document).bind('keydown.ModifierKeyState keyup.ModifierKeyState mouseover.ModifierKeyState',ss.mkdel(this,this.$3));$(window).bind('focus.ModifierKeyState',ss.mkdel(this,function(){this.$1()}));$(window).bind('blur.ModifierKeyState',ss.mkdel(this,function(){this.$0()}));this.$2()};ep.__typeName='tab.ModifierKeyState';global.tab.ModifierKeyState=ep;var eq=function(){};eq.__typeName='tab.ModuleManager';eq.load=function(e){return function(){eq.$0();var L=eq.$1(e);if(ss.keyExists(eq.$2,L)){return eq.$2[L]}var hy=$.Deferred();eq.$2[L]=hy;var hz='tab.'+L+'Factory';if(eq.$5){var hA=ss.load('vql'+L.toLowerCase());var hB=ss.createInstance(ss.getType(hz,hA));hy.resolve(hB)}else{window.setTimeout(function(){var hC=ss.createInstance(ss.getType(hz,ss.getTypeAssembly(hw)));hy.resolve(hC)},20)}return hy}};eq.register=function(e){return function(L){eq.$3[ss.getTypeFullName(e)]=L}};eq.$0=function(){if(eq.$4){return}eq.$4=true};eq.$1=function(e){var L=eq.$3[ss.getTypeFullName(e)];if(ss.isNullOrUndefined(L)){throw new ss.Exception('Unknown module: '+ss.getTypeFullName(e))}return L};global.tab.ModuleManager=eq;var er=function(){};er.__typeName='tab.NodeType';global.tab.NodeType=er;var es=function(){};es.__typeName='tab.NotificationCommandRedirectHandler';es.$0=function(e){var L=$.Deferred();var hy=e['QgJ'.toString()];bz.showNotification(ss.htmlEncode(hy.dYE.toString()),function(){L.resolve()});return L.promise()};global.tab.NotificationCommandRedirectHandler=es;var et=function(e){this.notificationViewModel=null;this.messageDom=null;this.closeDom=null;this.$b=false;this.visible=false;this.adjustMargin=true;ss.makeGenericType(spiff.BaseView$1,[eu]).call(this,e,spiff.Template.fromHtml("<div class='tabNotification'>"));this.notificationViewModel=e;this.messageDom=$('<div>').addClass('tabNotificationMessage').appendTo(this.get_element());this.updateContent();this.closeDom=spiff.ClickHandler.targetAndClick($('<div>').addClass('tabNotificationClose').html('×'),ss.mkdel(this,this.$9)).get_target();this.closeDom.appendTo(this.get_element());this.notificationViewModel.add_shown(ss.mkdel(this,this.shown));this.notificationViewModel.add_hidden(ss.mkdel(this,this.hidden))};et.__typeName='tab.NotificationView';global.tab.NotificationView=et;var eu=function(){this.$6=null;this.$7=false;this.$4=5000;this.$3=0;this.$5=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this)};eu.__typeName='tab.NotificationViewModel';eu.$0=function(e,L){var hy=new eu;hy.set_message(e);if(ss.isValue(L)){hy.set_autoHideTimeout(L)}return hy};eu.showGeoLocationNotification=function(e,L,hy){var hz=eu.$0(e,L);hz.set_displayPosition(hy);spiff.ObjectRegistry.newView(cQ).call(null,[hz]);spiff.GlobalTouchWatcher.add_firstTouch(ss.mkdel(hz,hz.$2));hz.disposables.add$1(new tab.CallOnDispose(function(){spiff.GlobalTouchWatcher.remove_firstTouch(ss.mkdel(hz,hz.$2))}));hz.disposeOnHide();hz.show()};eu.showNotification=function(e,L){var hy=eu.$0(e,L);spiff.ObjectRegistry.newView(et).call(null,[hy]);hy.disposeOnHide();hy.show()};global.tab.NotificationViewModel=eu;var ev=function(){this.$2=75;this.$3=null;this.$4=tsConfig.is_mobile;dijit.MenuItem.call(this)};ev.__typeName='tab.OnClickOverride';global.tab.OnClickOverride=ev;var ew=function(e,L){this.$8=null;this.$7=null;spiff.Widget.call(this,$("<img class='tab-overlayImage'/>"));this.$8=$(e);this.get_element().bind('load',ss.mkdel(this,function(){this.$6()}));this.get_element().attr('src',L)};ew.__typeName='tab.OverlayImage';global.tab.OverlayImage=ew;var ex=function(e,L){this.$8=null;this.$7=0;spiff.Widget.call(this,$('<div class="tab-overlay-panel"></div>'));if(ss.isValue(e)){this.$8=e;this.get_element().css('position','absolute')}else{this.get_element().css('position','fixed')}this.$7=(L?0.5:0.00999999977648258)};ex.__typeName='tab.OverlayPanel';global.tab.OverlayPanel=ex;var ey=function(){spiff.Template.call(this,$("<div class='tab-page'></div>"))};ey.__typeName='tab.PageTemplate';global.tab.PageTemplate=ey;var ez=function(e){this.pageViewModel=null;this.$9=null;ss.makeGenericType(spiff.BaseView$1,[eA]).call(this,e,new ey);this.pageViewModel=e;this.pageViewModel.add_newPage(ss.mkdel(this,this.handleNewPage));this.pageViewModel.add_resized(ss.mkdel(this,this.updateSize));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.pageViewModel.remove_newPage(ss.mkdel(this,this.handleNewPage))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.pageViewModel.remove_resized(ss.mkdel(this,this.updateSize))})))};ez.__typeName='tab.PageView';global.tab.PageView=ez;var eA=function(e){this.$2=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$2=e;this.$2.add_newPage(ss.mkdel(this,this.handleNewPage));this.$2.get_zoneModel().add_resizeZone(ss.mkdel(this,this.handleParentZoneResized));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$2.remove_newPage(ss.mkdel(this,this.handleNewPage))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$2.get_zoneModel().remove_resizeZone(ss.mkdel(this,this.handleParentZoneResized))})))};eA.__typeName='tab.PageViewModel';global.tab.PageViewModel=eA;var eB=function(){this.hasPixelGeometry=false;this.worldWidth=0;this.sceneInfo=null;this.columns=null;this.constantColumnNamesSet={};this.paneColumnIndex=0;this.paneRowIndex=0;this.domainExtents=null;this.paneRectXY=null;this.mapExtentsRect=null;this.markTypeValue=null;this.$t=0;this.numMarks=0;this.paneMarks=null;this.fogBlendFactorValue=0;this.foggedBackgroundColorValue=null;this.pdMarksKey=null;this.tupleToIndexMap={};this.labelColumnsDict=null;this.textRunColumnsDict=null;this.textStyleColumnsDict=null;this.$m=null;this.$r=null;this.$q=null;this.$s=null;this.$o=null;this.$u=null;this.shouldForceOpaqueColors=false;this.$v=false;this.shapeMarkStampingDecision=null;this.$n=null;this.$p=null;this.pdiKeyStr=null;this.truncateLabelToCell=false;this.drawBorder=false;this.isWrappedDomain=false;this.clipCase=0;this.$l=null;this.userPaneCount=0;this.hasUserPanes=false;this.scaleMarksInX=false;this.scaleMarksInY=false;this.useCellClipForSelection=false;this.paneHasCellsX=false;this.paneHasCellsY=false;this.$1$1=false};eB.__typeName='tab.PaneDrawInfo';eB.buildColorTable=function(e,L,hy,hz){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(L)||!ss.keyExists(L,'color_idx')){return null}var hA=1;if(ss.keyExists(L,'alpha')&&L['alpha'].length===1){hA=L['alpha'][0]}var hB=[];var hC={};var hD=L['color_idx'];var hE=hD.length;for(var hF=0;hF<hE;hF++){var hG=hD[hF];if(ss.keyExists(hC,hG)){hD[hF]=hC[hG]}else{var hH=tab.ColorModel.fromArgbInt(e.DiR[hG]);hH=new tab.ColorModel(hH.get_r(),hH.get_g(),hH.get_b(),hA);hB.push(fx.createColorCollection(hH,hy,hz));hD[hF]=hB.length-1;hC[hG]=hD[hF]}}return hB};eB.buildOpaqueColorTable=function(e){if(ss.isNullOrUndefined(e)){return null}var L=[];for(var hy=0,hz=e.length;hy<hz;hy++){L[hy]=fx.createOpaqueColorCollection(e[hy])}return L};eB.domainToPixelX=function(e,L,hy){return fv.domainToPixel(e,L.x,hy.x,hy.w/L.w)};eB.domainToPixelY=function(e,L,hy){return fv.domainToPixel(e,L.y,hy.y,hy.h/L.h)};eB.domainToPixelWidth=function(e,L,hy){return e/L.w*hy.w};eB.domainToPixelHeight=function(e,L,hy){return e/L.h*hy.h};eB.$1=function(e,L){var hy=new ss.StringBuilder;if(ss.keyExists(e,'font_style')&&parseInt(e['font_style'].uBu[L].toString())===1){hy.append('italic ')}if(ss.keyExists(e,'font_weight')&&parseInt(e['font_weight'].uBu[L].toString())===1){hy.append('bold ')}var hz=parseInt(e['font_size'].uBu[L].toString());hz=Math.max(6,hz);var hA=e['font'].uBu[L];hy.append(hz+"pt '"+hA+"'");return hy.toString()};eB.$2=function(e){var L=0;if(e===1){}else if(e===2){L=-Math.PI*0.5}else if(e===3){L=Math.PI*0.5}else{}return L};eB.$0=function(e,L,hy){if(ss.keyExists(L,e)){var hz=L[e];for(var hA=0;hA<hz.length;++hA){hz[hA]=hy(hz[hA])}L[e]=hz}};eB.createDataArray=function(e,L,hy){return e.uBu.slice(L,L+hy)};eB.isSupportedStampShape=function(e){if(!ss.keyExists(fx.reverseShapeMapping,e)){return false}var L=true;switch(e){case'shapeIDFilledSquare':case'shapeIDSquare':{L=false;break}default:{break}}return L};global.tab.PaneDrawInfo=eB;var eC=function(){};eC.__typeName='tab.PaneDrawInfoFactory';eC.create=function(e,L,hy,hz,hA,hB,hC){var hD=null;if(tab.FeatureFlags.isEnabled('RuntimeWeb')){hD=new cb.$ctor1(e,L,hy,hz,hA,hB,hC)}else{hD=new fa.$ctor1(e,L,hy,hz,hA,hB,hC)}return hD};global.tab.PaneDrawInfoFactory=eC;var eD=function(e,L){this.$m=null;this.$n=null;bb.call(this,e,L);this.$m=new ch(e,L)};eD.__typeName='tab.PaneTable2DRenderer';eD.$1=function(e,L,hy,hz){var hA;switch(e){case'shape':{hA=en.$1v(hy,L);break}case'bar':case'square':{hA=en.$8(hy,L);break}case'pie':{hA=en.$i(hy,L);break}case'text':{hA=en.$1D(hy,L);break}case'label':{hA=en.$g(hy,L);break}case'line':{hA=en.$k(hy,L);break}case'area':{hA=en.$0(hy,L);break}case'multipolygon':{hA=en.$h(hy,L);break}default:{{var hB=hy.getMarkProperty('x',L);var hC=hy.getMarkProperty('y',L);var hD=hy.getMarkProperty('size',L);var hE=Math.ceil(hD);hA={x:Math.floor(hB-hD/2+0.5),y:Math.floor(hC-hD/2+0.5),w:hE,h:hE}}break}}if(hy.hasUserPanes){tab.RectXYUtil.intersectInPlace(hA,hz)}return hA};eD.getMarkBoundingBox=function(e,L,hy){return eD.$1(L.get_markType(),e,L,hy)};eD.renderHoverOverlay=function(e,L,hy){if(ss.isNullOrUndefined(hy)||ss.isNullOrUndefined(L)){return}{var hz=tabBootstrap.MetricsController.createContext('RenderHoverOverlay',32,null);try{var hA=L.getMarkIndexFromTupleID(e);switch(L.get_markType()){case'area':{en.$A(hy,L,hA);break}case'bar':case'square':{en.$C(hy,L,hA);break}case'line':{en.$E(hy,L,hA);break}case'multipolygon':{en.$G(hy,L,hA);break}case'pie':{en.$I(hy,L,hA);break}case'shape':{en.$K(hy,L,hA);break}case'text':{en.$1s(hy,L,hA);break}}}finally{if(ss.isValue(hz)){hz.dispose()}}}};eD.renderPressedOverlay=function(e,L,hy){if(ss.isNullOrUndefined(hy)||ss.isNullOrUndefined(L)){return}{var hz=tabBootstrap.MetricsController.createContext('RenderPressedOverlay',32,null);try{var hA=L.getMarkIndexFromTupleID(e);switch(L.get_markType()){case'area':{en.$B(hy,L,hA);break}case'bar':case'square':{en.$D(hy,L,hA);break}case'line':{en.$F(hy,L,hA);break}case'multipolygon':{en.$H(hy,L,hA);break}case'pie':{en.$J(hy,L,hA);break}case'shape':{en.$1r(hy,L,e);break}case'text':{en.$1t(hy,L,hA);break}}}finally{if(ss.isValue(hz)){hz.dispose()}}}};eD.$2=function(e,L,hy){e[0]=L.x;e[1]=L.y;e[2]=hy.x;e[3]=hy.y};eD.$0=function(e,L,hy,hz){var hA=hy==='uEs'||hy==='bUP'||hy==='bsq'||hy==='jpw';if(L==='selected'&&hA){if(tab.ColorModel.isFullyTransparent(e)){return'rgba(0,0,0,1)'}return e.toString()}if(L==='hover'&&hA){var hB=77;var hC=new tab.ColorModel(255,255,255,0.449999988079071);var hD=new tab.ColorModel(0,0,0,0.449999988079071);var hE=(tab.ColorModel.isDark(e,hB)?hC:hD);return((e.get_a()<1)?hE.toString():tab.ColorModel.alphaBlend(hE,e).toString())}if(L==='normal'&&ss.isValue(hz)){return fx.fogColorTransform(e,hz.item2,hz.item1).toString()}return e.toString()};global.tab.PaneTable2DRenderer=eD;var eE=function(e,L,hy){ss.makeGenericType(hf,[eI]).call(this,e,L,hy);this.renderer=new eD(this.canvasElt,this.context);var hz=_.keys(e.get_vizRegionMap());for(var hA=0;hA<hz.length;hA++){var hB=hz[hA];if(!ss.contains(eI.blackListVisualParts,hB)){e.get_vizRegionMap()[hB].add_propertyChanged(ss.mkdel(this,this.onViewModelPropertyChanged))}}};eE.__typeName='tab.PaneTableCanvasView';global.tab.PaneTableCanvasView=eE;var eF=function(e,L,hy){this.$Q=null;this.$K=[];this.$J=new l('hover');this.$N=new l('press');this.$H=false;this.$O=null;this.$I=false;this.$F=[];this.$M=null;this.$G=null;this.$L='normal';this.$P=false;ss.makeGenericType(hf,[eI]).call(this,e,L,'transparent');this.renderer=new eD(this.canvasElt,this.context);this.$Q=hy;var hz=$(this.canvasElt);hz.css('position','absolute');hz.css('left','0px');hz.css('top','0px')};eF.__typeName='tab.PaneTableOverlayView';eF.$0=function(e,L){var hy=new tab.UintSet;if(ss.isValue(e)){hy.addAll(e)}if(ss.isValue(L)){for(var hz=0;hz<L.length;hz++){var hA=L[hz];if(hy.contains(hA)){hy.remove(hA)}else{hy.add(hA)}}}return hy.get_values()};global.tab.PaneTableOverlayView=eF;var eG=function(e){this.enclosingDiv=null;this.yLabel=null;this.leftAxis=null;this.rightAxis=null;this.xLabel=null;this.bottomAxis=null;this.topAxis=null;this.view=null;this.title=null;this.caption=null;this.tlSpacer=null;this.trSpacer=null;this.blSpacer=null;this.brSpacer=null;spiff.Template.call(this,e);var L=ss.mkdel(this,this.getElementBySelector);this.enclosingDiv=L('.tab-clip');this.yLabel=L('.tab-tvYLabel');this.leftAxis=L('.tab-tvLeftAxis');this.rightAxis=L('.tab-tvRightAxis');this.xLabel=L('.tab-tvXLabel');this.bottomAxis=L('.tab-tvBottomAxis');this.topAxis=L('.tab-tvTopAxis');this.view=L('.tab-tvView');this.title=L('.tab-tvTitle');this.caption=L('.tab-tvCaption');this.tlSpacer=L('.tab-tvTLSpacer');this.trSpacer=L('.tab-tvTRSpacer');this.blSpacer=L('.tab-tvBLSpacer');this.brSpacer=L('.tab-tvBRSpacer');L('.tvViewportBorders').append($(eG.$0))};eG.__typeName='tab.PaneTableTemplate';global.tab.PaneTableTemplate=eG;var eH=function(e,L){this.regions={};this.dom=null;this.zoomToolbar=null;this.ftv=null;this.isPointerToolLocked=false;this.isMap=false;this.geometry=null;this.visibleGeometry=null;this.mapsSearchView=null;this.$C=[];this.$L=0;this.$G=-1;this.$F=-1;this.$M=0;this.$O=null;this.$P=null;this.$J={x:0,y:0};this.$I=0;this.isAnimationOccurring=false;this.vizHitTester=null;this.vizTooltip=null;this.$H=[];this.$u=null;this.$N=null;this.$x=null;this.$y=false;this.$D=null;this.$A=0;this.$E=null;this.$B=null;this.$K={w:0,h:0};this.$w=null;this.$v=null;this.$z=false;ss.makeGenericType(spiff.BaseView$1,[eI]).call(this,e,L);this.dom=L;this.get_paneTableVM().get_viewController().setTiledViewer(this);this.$L=(new Date).getTime();this.get_dom().view.attr('id','view'+tab.ModelUtils.findContentDashboard().getViewId(this.get_sheetid()));this.get_dom().get_domRoot().attr('tb-test-id',tableau.format.escapeHTML(this.get_paneTableVM().get_visualId().AVP));var hy=e.get_visualModel();this.$t(hy);this.$n(hy);this.isMap=hy.get_isMap();this.get_paneTableVM().add_newPaneTable(ss.mkdel(this,this.handleNewVisual));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_paneTableVM().remove_newPaneTable(ss.mkdel(this,this.handleNewVisual))})))};eH.__typeName='tab.PaneTableView';eH.addVizDragApprover=function(e){eH.removeVizDragApprover(e);eH.$3.push(e)};eH.removeVizDragApprover=function(e){ss.remove(eH.$3,e)};eH.addVizDragHandler=function(e){eH.removeVizDragHandler(e);eH.$4.push(e)};eH.addAsyncVizDragHandler=function(e){eH.removeAsyncVizDragHandler(e);eH.$2.push(e)};eH.removeVizDragHandler=function(e){ss.remove(eH.$4,e)};eH.removeAsyncVizDragHandler=function(e){ss.remove(eH.$2,e)};eH.guessTooltipTargetTypeFromRegion=function(e){switch(e){case'bottomaxis':case'topaxis':case'leftaxis':case'rightaxis':case'xheader':case'yheader':{return'header'}case'color':{return'legenditem'}default:{return'unspecified'}}};global.tab.PaneTableView=eH;var eI=function(e,L){this.$s={};this.$i=null;this.$r=null;this.$p=null;this.$n=null;this.$l=null;this.$q=null;this.$k=null;this.$m=false;this.$o=null;this.$j=null;this.$h=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$r=e;this.$p=L;this.$k=[];this.$n=new fy;if(ss.isValue(this.$r)){if(ss.isValue(this.$r.get_selectionsModel().get_tupleSelection())){this.$r.get_selectionsModel().add_newSelections(ss.mkdel(this,this.$b))}this.$r.get_impliedSelectionModel().add_newSelection(ss.mkdel(this,this.$b));if(ss.isValue(this.$r.get_brushingsModel().get_tupleSelection())){this.$r.get_brushingsModel().add_newSelections(ss.mkdel(this,this.$3))}if(ss.isValue(this.$r.get_sceneModel())){this.$r.get_sceneModel().add_newSceneModel(ss.mkdel(this,this.$a));this.$a();this.$m=false}if(ss.isValue(this.$r.get_labelsModel())){this.$r.get_labelsModel().add_newSceneModel(ss.mkdel(this,this.$a))}this.$r.add_newHiddenTuples(ss.mkdel(this,this.$7));this.$r.add_newFilteredTuples(ss.mkdel(this,this.$6));this.$r.add_brushingFromActionChanged(ss.mkdel(this,this.$4));this.$r.add_colorDictionaryChanged(ss.mkdel(this,this.$5));this.$r.add_newVisual(ss.mkdel(this,this.$c));this.$r.add_newVisual(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){e.remove_newVisual(ss.mkdel(this,this.$9))})));this.$i=new fE(ss.mkdel(this,function(){this.notifyPropertyChanged('images')}))}this.$f()};eI.__typeName='tab.PaneTableViewModel';eI.updateSceneInfoFromVisualModel=function(e,L){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(L)){return}var hy=L.pm.Ucd;var hz=L.pm.X$;var hA=(ss.isValue(L.get_selectionsModel().get_tupleSelection())?L.get_selectionsModel():null);var hB=(ss.isValue(L.get_impliedSelectionModel())?L.get_impliedSelectionModel():null);var hC=(ss.isValue(L.get_brushingsModel().get_tupleSelection())?L.get_brushingsModel():null);var hD=L.get_hiddenTuples();var hE=L.get_filteredTuples();e.$k(hz,hA,hB,hC,hy,hD,hE);if(ss.isValue(L.get_labelsModel())&&ss.isValue(L.get_labelsModel().get_presModel())){e.$j(L.get_labelsModel().get_presModel())}e.$i(L.get_isBrushedFromAction())};global.tab.PaneTableViewModel=eI;var eJ=function(e){var L=function(hy){this.$a=null;this.$9=null;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[e]).call(this,hy,new h);this.$a=this.get_template();var hz=ss.safeCast(hy,dz);this.$a.$2.text(hz.get_title());this.$9=spiff.ObjectRegistry.newView$1(ss.makeGenericType(spiff.IView$1,[spiff.IViewModel])).call(null,hz.get_contentViewType(),[hz.get_contentViewModel()]);if(!ss.isNullOrEmptyString(hz.get_additionalContentViewClass())){this.$9.get_rootElement().addClass(hz.get_additionalContentViewClass())}this.$9.addToDom(this.$a.$1)};ss.registerGenericClassInstance(L,eJ,[e],{get_paneContents:function(){return[this.get_viewModel()]},get_activePaneTitle:function(){return this.$3$1},set_activePaneTitle:function(hy){this.$3$1=hy},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);var hy=ss.safeCast(this.$9,spiff.IAppendableView);if(ss.isValue(hy)){hy.onAddedToDom()}},dispose:function(){this.$9.dispose();ss.makeGenericType(spiff.BaseView$1,[e]).prototype.dispose.call(this)}},function(){return ss.makeGenericType(spiff.BaseView$1,[e])},function(){return[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[e]),dA]});spiff.ObjectRegistry.registerType(L,L).call(null);return L};eJ.__typeName='tab.PaneView$1';ss.initGenericClass(eJ,a,1);global.tab.PaneView$1=eJ;var eK=function(e){this.$f=true;this.domBox=null;this.domControls=null;this.format=new Object;this.getSID=null;this.session=null;this.$8='';this.$7={};this.stateId=0;this.$e=null;this.$d=null;this.domTitleBar=null;this.domContent=null;this.$9=null;this.$a=0;this.$c=0;this.$b=null;this.backgroundColor=null;Object.call(this);this.session=e.session;this.$8=e.field;this.$a=e.titleH;this.$c=e.titleW;this.$b=e.titleHTML;this.format=e.format;this.backgroundColor=e.backgroundColor;this.$7=e.attributes;this.$e=e.viewModel};eK.__typeName='tab.ParameterControl';global.tab.ParameterControl=eK;var eL=function(){spiff.Template.call(this,$("<div class='tab-parameter'></div>"))};eL.__typeName='tab.ParameterControlTemplate';global.tab.ParameterControlTemplate=eL;var eM=function(e){this.$b=null;this.$a=null;ss.makeGenericType(spiff.BaseView$1,[eN]).call(this,e,new eL);this.$b=e;this.$b.add_newParameterControl(ss.mkdel(this,this.handleNewParameterControl));this.$b.add_resized(ss.mkdel(this,this.updateSize));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$b.remove_newParameterControl(ss.mkdel(this,this.handleNewParameterControl))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$b.remove_resized(ss.mkdel(this,this.updateSize))})));if(this.$b.get_hasBorder()){this.get_template().get_domRoot().addClass('tabBordered')}};eM.__typeName='tab.ParameterControlView';global.tab.ParameterControlView=eM;var eN=function(e){this.$4=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$4=e;this.$4.add_newParameterCtrl(ss.mkdel(this,this.$2));this.$4.get_zoneModel().add_resizeZone(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$4.remove_newParameterCtrl(ss.mkdel(this,this.$2))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$4.get_zoneModel().remove_resizeZone(ss.mkdel(this,this.$3))})))};eN.__typeName='tab.ParameterControlViewModel';global.tab.ParameterControlViewModel=eN;var eO=function(e,L,hy,hz,hA){this.disposables=null;this.parameterViewModel=null;this.parent=null;this.field=null;this.newValInFlight=null;this.div=null;this.attributes=null;Object.call(this);this.disposables=new tab.DisposableHolder;this.parent=e;this.div=L;this.field=hy;this.attributes=hz;this.parameterViewModel=hA;this.newValInFlight=null};eO.__typeName='tab.ParamUIBase';global.tab.ParamUIBase=eO;var eP=function(e,L,hy,hz,hA){this.$2=null;this.$1=null;eO.call(this,e,L,hy,hz,hA);this.$2=new spiff.ComboBoxViewModel;this.$2.set_menuTheme(1);this.$2.set_menuStyleClass(this.parent.domNode.id+'_menu');this.$2.add_selectedItemChanged(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$2.remove_selectedItemChanged(ss.mkdel(this,this.$0))})));var hB=this.get_legacyModel().domain;var hC=hB.length;for(var hD=0;hD<hC;hD++){var hE=new spiff.ComboBoxItem(null,hB[hD],hD,'');this.$2.addItem(hE);if(ss.referenceEquals(this.get_legacyModel().alias,hB[hD])){this.$2.set_selectedItem(hE)}}this.$1=spiff.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$2]);var hF=new cM(this.parent.get_model().mCc,this.parent.get_backgroundColor(),this.parent.get_model().$tN);hn.applyFormattingByClassName(this.$2.get_menuStyleClass(),hF);this.$1.addToDom($(this.div));this.disposables.add$1(this.$2);this.disposables.add$1(this.$1)};eP.__typeName='tab.ParamUICompact';global.tab.ParamUICompact=eP;var eQ=function(e,L,hy,hz,hA){eO.call(this,e,L,hy,hz,hA)};eQ.__typeName='tab.ParamUIList';global.tab.ParamUIList=eQ;var eR=function(e,L,hy,hz,hA){this.slider=null;eO.call(this,e,L,hy,hz,hA)};eR.__typeName='tab.ParamUISlider';global.tab.ParamUISlider=eR;var eS=function(e,L,hy,hz,hA){this.widget=null;eO.call(this,e,L,hy,hz,hA)};eS.__typeName='tab.ParamUITypeIn';global.tab.ParamUITypeIn=eS;var eT=function(e,L,hy,hz,hA){eS.call(this,e,L,hy,hz,hA)};eT.__typeName='tab.ParamUITypeInDateField';global.tab.ParamUITypeInDateField=eT;var eU=function(e,L,hy){this.widget=null;Z.call(this,e,L,hy)};eU.__typeName='tab.Pattern';global.tab.Pattern=eU;var eV=function(e,L,hy,hz){this.domainActualSize=0;this.$6=false;this.$5=false;this.$8=null;this.$a=false;this.$9=false;this.$7=null;this.$4=null;this.parent=null;this.$1$1=null;this.$1$2=null;this.parent=e;this.domainActualSize=L;this.$6=hy;this.$5=hz;this.resetPendingChanges()};eV.__typeName='tab.PendingChangesManager';global.tab.PendingChangesManager=eV;var eW=function(e,L){this.$k=null;this.$l=null;this.$j=null;this.$m=false;this.$p='';this.$i=null;this.$n=null;this.$o=null;fF.call(this,e,(fF.get_isUsingVml()?"<div><div class='selectionShape'><v:polyline class='vpolyline'></v:polyline></div>":"<div><svg class='selectionShape'><path class='tvdrag_svg_marquee'></path></svg></div>"),'tvdrag_svg_div');this.$k=[];this.$l=[];this.$j={};this.$m=L||false;this.$n=null;this.$o=null};eW.__typeName='tab.PolyShapeSelector';eW.$0=function(e,L,hy){return e>=L&&L>=hy||e<=L&&L<=hy};global.tab.PolyShapeSelector=eW;var eX=function(){this.$0=null;this.$1=0;fG.call(this);this.$0=[];this.$1=0};eX.__typeName='tab.PolyShapeState';global.tab.PolyShapeState=eX;var eY=function(e){ss.makeGenericType(spiff.BaseView$1,[eZ]).call(this,e,spiff.Template.fromHtml('<div />'))};eY.__typeName='tab.PresModelBrowserView';global.tab.PresModelBrowserView=eY;var eZ=function(e){this.data=null;spiff.BaseViewModel.call(this);if(eZ.$1(e)){if($.isArray(e)){this.data=eZ.$2(e)}else{this.data=eZ.$3(e)}}else{this.data=e.toString()}};eZ.__typeName='tab.PresModelBrowserViewModel';eZ.$1=function(e){return typeof(e)==='object'};eZ.$2=function(e){var L=[];for(var hy=0;hy<e.length;++hy){L.push(eZ.$4(hy.toString(),e[hy]))}return L};eZ.$3=function(e){var L=[];var hy=new ss.ObjectEnumerator(e);try{while(hy.moveNext()){var hz=hy.current();L.push(eZ.$4(hz.key,hz.value))}}finally{hy.dispose()}return L};eZ.$0=function(e){return'<strong>'+e+':</strong> '};eZ.$4=function(e,L){if(eZ.$1(L)){if($.isArray(L)){return ss.mkdict(['data',eZ.$0(e),'children',eZ.$2(L)])}else{return ss.mkdict(['data',eZ.$0(e),'children',eZ.$3(L)])}}else if(ss.endsWithString(e,'Json')&&(ss.startsWithString(L,'{')||ss.startsWithString(L,'['))){var hy=null;try{hy=tab.JsonUtil.parseJson(L)}catch(hz){}if(ss.isValue(hy)){return eZ.$4(e,hy)}}return eZ.$0(e)+L};global.tab.PresModelBrowserViewModel=eZ;var fa=function(){eB.call(this)};fa.__typeName='tab.PresModelPaneDrawInfo';fa.$ctor1=function(e,L,hy,hz,hA,hB,hC){eB.call(this);this.set_skipClipping(false);this.pdiKeyStr=hC;this.columns={};this.sceneInfo=L;this.paneMarks=hz;this.shouldForceOpaqueColors=false;this.pdMarksKey=e;this.paneColumnIndex=hy._WI;this.paneRowIndex=hy.ASo;this.paneRectXY=tab.RecordCast.rectPresModelAsRectXY(hy.PeS);this.domainExtents=fa.getDomainExtents(hy);this.markTypeValue=hA.tx;this.numMarks=fa.getNumPaneItems(this.paneMarks);this.set_paneFlags(hA.LTd['pane_flags']);this.populateColumns(hA);this.hasPixelGeometry=this.scaleMarksInX&&this.scaleMarksInY;var hD=tab.ColorModel.fromArgbInt(hA.LTd['background_color']);this.fogBlendFactorValue=fx.getFogBlendFactor(hD);this.foggedBackgroundColorValue=fx.applyFogToBackgroundColor(hD,this.fogBlendFactorValue);this.convertMapData(this.columns);this.processColors(hB);this.drawBorder=ss.keyExists(this.columns,'draw_border')&&this.columns['draw_border'][0];var hE=[-1];this.columns['label_index']=hE;if(this.markTypeValue==='line'||this.markTypeValue==='area'){this.prepareLeftRight()}if(this.markTypeValue==='line'){this.ensureLinePixelAlignment()}this.parseTextInfo(hA,false);if(ss.isValue(this.paneRectXY)&&ss.isValue(this.paneRectXY.w)&&ss.isValue(this.domainExtents)&&ss.isValue(this.domainExtents.w)&&this.domainExtents.w!==0){this.worldWidth=this.paneRectXY.w/this.domainExtents.w}this.clipCase=this.calcCellClip();this.mapExtentsRect=fa.buildMapExtentsRect(hz,this.domainExtents,this.paneRectXY);this.setupBoundingBoxes();this.setupCustomShapePositions();if(this.markTypeValue==='shape'){if(tab.FeatureFlags.isEnabled('FastRendering')){this.setupShapeMarkStampingMap()}else{this.shapeMarkStampingDecision=null}}this.buildTupleLookup();this.setUserPaneInfo(L.$r)};fa.buildMapExtentsRect=function(e,L,hy){var hz=e.DGi;if(ss.isNullOrUndefined(hz)||hz.POJ===0||hz.suk===0){return null}return{x:ss.Int32.trunc(eB.domainToPixelX(hz.BPK,L,hy)),y:ss.Int32.trunc(eB.domainToPixelY(hz.KEc,L,hy)),w:ss.Int32.trunc(eB.domainToPixelWidth(hz.POJ,L,hy)),h:ss.Int32.trunc(eB.domainToPixelHeight(hz.suk,L,hy))}};fa.getNumPaneItems=function(e){return e.sDT-e.QNi};fa.getDomainExtents=function(e){if(ss.isValue(e.MdI)){for(var L=0;L<e.MdI.length;L++){var hy=e.MdI[L];var hz=hy.SgS;if(ss.isValue(hz)&&ss.isValue(hz.NQL)){return tab.RecordCast.doubleRectPresModelAsDoubleRectXY(hz.NQL)}}}return null};fa.$0=function(e){var L={};var hy=[e.LTd,e.DTe,e.HDS];for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];var hB=hA;if(ss.isValue(hB)){var hC=_.keys(hB);for(var hD=0;hD<hC.length;hD++){var hE=hC[hD];L[hE]=[hB[hE]]}}}return L};global.tab.PresModelPaneDrawInfo=fa;var fb=function(){};fb.__typeName='tab.QfButtonUtil';fb.enableResetButton=function(e){if(ss.isNullOrUndefined(e)){return}dojo.removeClass(e.iconNode,'wcIconFiltered');dojo.removeClass(e.iconNode,'wcIconNonfiltered');dojo.addClass(e.iconNode,'wcIconFiltered');e.attr('label','Click to show all values');e.setDisabled(false);var L=$(e.domNode.firstChild.firstChild);$(L.get(0)).removeAttr('style')};fb.disableResetButton=function(e){if(ss.isNullOrUndefined(e)){return}dojo.removeClass(e.iconNode,'wcIconFiltered');dojo.addClass(e.iconNode,'wcIconNonfiltered');e.attr('label','Showing all values');e.setDisabled(true);dojo.removeClass(e.domNode,'dijitButtonHover');dojo.removeClass(e.domNode,'dijitHover');var L=$(e.domNode.firstChild.firstChild);$(L.get(0)).css('background','transparent')};global.tab.QfButtonUtil=fb;var fc=function(){this.panel=null;this.ramp=null;this.centerMark=null;this.minLabel=null;this.maxLabel=null;ec.call(this,$("\n            <div class='tabLegendPanel' style='position: relative; overflow: hidden'>\n                <div class='tabLegendTitle' style='position: absolute'></div>\n                <canvas class='tabLegendRamp' style='position: absolute'></canvas>\n                <div class='tabLegendCenterMark' style='position: absolute'></div>\n                <div class='tabLegendMinLabel' style='position: absolute'></div>\n                <div class='tabLegendMaxLabel' style='position: absolute'></div>\n            </div>"));this.panel=this.get_domRoot();this.ramp=this.getElementBySelector('.tabLegendRamp');this.centerMark=this.getElementBySelector('.tabLegendCenterMark');this.minLabel=this.getElementBySelector('.tabLegendMinLabel');this.maxLabel=this.getElementBySelector('.tabLegendMaxLabel')};fc.__typeName='tab.QuantitativeColorLegendTemplate';global.tab.QuantitativeColorLegendTemplate=fc;var fd=function(e){ss.makeGenericType(Y,[fe]).call(this,e,new fc)};fd.__typeName='tab.QuantitativeColorLegendView';fd.setDomNodeStyleSize=function(e,L,hy){e.css('width',L+'px');e.css('height',hy+'px')};global.tab.QuantitativeColorLegendView=fd;var fe=function(e,L,hy){this.$d=null;ea.call(this,L,hy);this.$d=e;this.$d.add_legendChanged(ss.mkdel(this,this.$c))};fe.__typeName='tab.QuantitativeColorLegendViewModel';global.tab.QuantitativeColorLegendViewModel=fe;var ff=function(){spiff.Template.call(this,$("<div class='tab-quick-filter'></div>"))};ff.__typeName='tab.QuickFilterDisplayTemplate';global.tab.QuickFilterDisplayTemplate=ff;var fg=function(){};fg.__typeName='tab.QuickFilterViewFactory';fg.getQuickFilterView=function(e){var L=null;switch(e.get_filterType()){case'Categorical':{L=spiff.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[bn,bl,Object])).call(null,[e]);break}}return L};global.tab.QuickFilterViewFactory=fg;var fh=function(e){this.displayModel=null;spiff.BaseViewModel.call(this);this.displayModel=e;this.displayModel.add_filterUpdated(ss.mkdel(this,this.handleFilterUpdate))};fh.__typeName='tab.QuickFilterViewModel';global.tab.QuickFilterViewModel=fh;var fi=function(){};fi.__typeName='tab.QuickFilterViewModelFactory';fi.getQuickFilterTypeViewModel=function(e){var L=null;switch(e.get_quickFilterType()){case'categorical':{L=new bn(e);break}default:{break}}return L};global.tab.QuickFilterViewModelFactory=fi;var fj=function(e,L,hy){this.$3=null;this.contentNode=null;Z.call(this,e,L,hy);this.set_itemFormatter(ss.mkdel(cF.filterItem,cF.filterItem.formatRadiolistFilterItemHtml))};fj.__typeName='tab.Radiolist';global.tab.Radiolist=fj;var fk=function(e,L,hy){br.call(this,e,L,hy);this.tileHtml='<div class="tile tab-ctrl-formatted-text" style="top: {0}px; position: absolute; width: 100%;">'};fk.__typeName='tab.RadiolistContentFormatter';global.tab.RadiolistContentFormatter=fk;var fl=function(e){this.$0=null;this.$0=e};fl.__typeName='tab.RectangleGeom';global.tab.RectangleGeom=fl;var fm=function(){this.$d=null;this.$e=null;fF.call(this,{x:0,y:0,w:0,h:0},'<div></div>','tvdrag');this.$d={x:0,y:0,w:0,h:0};this.$e={x:0,y:0,w:0,h:0}};fm.__typeName='tab.RectShapeSelector';global.tab.RectShapeSelector=fm;var fn=function(){this.$0=null;this.$1=null;fG.call(this);this.$0={x:0,y:0,w:0,h:0};this.$1={x:0,y:0,w:0,h:0}};fn.__typeName='tab.RectShapeState';global.tab.RectShapeState=fn;var fo=function(e){this.$i=null;this.$j=null;ss.makeGenericType(spiff.BaseView$1,[fp]).call(this,e,new i);this.$c()};fo.__typeName='tab.ReferenceLineConstantValueEditorView';global.tab.ReferenceLineConstantValueEditorView=fo;var fp=function(){this.$2=null;spiff.BaseViewModel.call(this)};fp.__typeName='tab.ReferenceLineConstantValueEditorViewModel';fp.add_showReferenceLineConstantValueEditor=function(e){fp.$2$1=ss.delegateCombine(fp.$2$1,e)};fp.remove_showReferenceLineConstantValueEditor=function(e){fp.$2$1=ss.delegateRemove(fp.$2$1,e)};fp.constantLinePillDropped=function(e){if(ss.isValue(e)){var L=new fp;L.$2=e;fp.$2$1(L)}};global.tab.ReferenceLineConstantValueEditorViewModel=fp;var fq=function(){};fq.__typeName='tab.ReferenceLineConstantValueQuickEditCommandRedirectHandler';fq.$0=function(e){var L=$.Deferred();if(ss.isValue(e)){var hy=e['jal1'];fp.constantLinePillDropped(hy);L.resolve()}return L.promise()};global.tab.ReferenceLineConstantValueQuickEditCommandRedirectHandler=fq;var fr=function(){};fr.__typeName='tab.RelativeDateFilterPeriodType';global.tab.RelativeDateFilterPeriodType=fr;var fs=function(){};fs.__typeName='tab.RelativeDateFilterRangeType';global.tab.RelativeDateFilterRangeType=fs;var ft=function(e){this.$2=null;spiff.BaseViewModel.call(this);this.$2=e};ft.__typeName='tab.RelativeDateFilterViewModel';global.tab.RelativeDateFilterViewModel=ft;var fu=function(e){this.templateString="<div class='RelativeDatePickFilter'><div dojoAttachPoint='domBox' class='RelativeDatePickFilterBox'><div class='TitleAndControls' dojoAttachPoint='domControls'><div class='FilterTitle' dojoAttachPoint='domTitleBar'></div><div dojoType='dijit.form.Button' class='RDFButton RDFMenuButton' name='type' dojoAttachPoint='menuButton'dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'></div><div class='PicklistContentDiv tab-ctrl-formatted-coloronly' dojoAttachPoint='domPicker'></div></div></div></div>";this.widgetsInTemplate=true;this.session=null;this.field='';this.stateId=0;this.rid=0;this.timestamp=0;this.currentRange=null;this.$3=0;this.$4=0;this.layoutSession=null;this.zid=0;this.filterViewModel=null;this.currentAbbrev=null;this.showContextMenu=null;this.disposables=null;this.getContextMenuCommands=null;this.periodType=null;this.rangeType=null;this.rangeN=0;this.domPicker=null;this.getSID=null;this.$2=null;this.menuButton=null;dY.call(this)};fu.__typeName='tab.RelativeDatePickFilter';global.tab.RelativeDatePickFilter=fu;var fv=function(){};fv.__typeName='tab.RenderUtil';fv.calculatePixelRatio=function(e){var L=1;if(ss.isValue(tsConfig.highDpi)&&tsConfig.highDpi){if(ss.isValue(tsConfig.pixelRatio)){L=tsConfig.pixelRatio}else if(ss.isValue(e)&&!e){L=tab.BrowserSupport.get_devicePixelRatio()}else{L=tab.BrowserSupport.get_devicePixelRatio()/tab.BrowserSupport.get_backingStoragePixelRatio()}}return L};fv.domainToPixel=function(e,L,hy,hz){return(e-L)*hz+hy};fv.manualFadeAnimation=function(e,L,hy,hz,hA,hB){var hC=L;var hD=hy;var hE=ss.Int32.div(hA,1000)*hz;var hF=(hy-L)/hE;var hG=ss.Int32.div(1000,hz);var hH=null;hH=function(){if(hC>hD){e.css('filter','alpha(opacity='+hD+')');e.css('opacity',(hD/100).toString());return}e.css('filter','alpha(opacity='+hC+')');e.css('opacity',(hC/100).toString());hC+=hF;if(ss.isValue(hB)){hG+=hG}window.setTimeout(hH,hG)};window.setTimeout(hH,hG)};global.tab.RenderUtil=fv;var fw=function(){};fw.__typeName='tab.ResolveSelectAction';fw.fromNormalizedEvent=function(e,L,hy){var hz=e.getSelectAction();if(ss.isValue(L)&&L&&hz==='toggle'){hz='range'}else if(!!!L&&!!hy&&hz==='range'){hz='simple'}return hz};global.tab.ResolveSelectAction=fw;var fx=function(){};fx.__typeName='tab.SceneDataUtil';fx.isPaneFlagSet=function(e,L){return(e&fx.$1[L])!==0};fx.isMarkFlagSet=function(e,L){return(e&fx.$0[L])!==0};fx.isCustomShape=function(e){return!ss.keyExists(fx.shapeMapping,e.toString())};fx.getFogBlendFactor=function(e){var L=0.185000002384186;var hy=0.275000005960464;var hz=75;var hA=e.get_r()<=hz&&e.get_g()<=hz&&e.get_b()<=hz;return(hA?hy:L)};fx.fogColorTransform=function(e,L,hy){var hz=ss.Int32.trunc(L.get_r()+e.get_r()*hy);var hA=ss.Int32.trunc(L.get_g()+e.get_g()*hy);var hB=ss.Int32.trunc(L.get_b()+e.get_b()*hy);return new tab.ColorModel(hz,hA,hB,e.get_a())};fx.applyFogToBackgroundColor=function(e,L){var hy=245;if(e.get_r()>=hy&&e.get_g()>=hy&&e.get_b()>=hy){e=new tab.ColorModel(hy,hy,hy,e.get_a())}var hz=ss.Int32.trunc((1-L)*e.get_r());var hA=ss.Int32.trunc((1-L)*e.get_g());var hB=ss.Int32.trunc((1-L)*e.get_b());return new tab.ColorModel(hz,hA,hB,e.get_a())};fx.createColorCollection=function(e,L,hy){var hz={};hz['colorOverrideOpaque']=e.toRgb();hz['colorOverrideNone']=e.toRgba();hz['colorOverrideFog']=fx.fogColorTransform(e,L,hy).toRgba();return hz};fx.createOpaqueColorCollection=function(e){var L={};var hy;hy=tab.ColorModel.fromColorCode(e['colorOverrideNone']);L['colorOverrideNone']=hy.toRgb();hy=tab.ColorModel.fromColorCode(e['colorOverrideFog']);L['colorOverrideFog']=hy.toRgb();hy=tab.ColorModel.fromColorCode(e['colorOverrideOpaque']);L['colorOverrideOpaque']=hy.toRgb();return L};fx.applyFoggingToColor=function(e,L){var hy=fx.getFogBlendFactor(L);var hz=fx.applyFogToBackgroundColor(L,hy);return fx.fogColorTransform(e,hz,hy)};global.tab.SceneDataUtil=fx;var fy=function(){this.$x={};this.$E={};this.$C={};this.$B={};this.$w={};this.$F=null;this.$t=null;this.$u=[];this.$A=false;this.$z=null;this.$G=null;this.$y={};this.$v={};this.$D={};this.$r=null};fy.__typeName='tab.SceneInfo';fy.getPaneMarksKey=function(e){var L=e.Zpj;return e.fDN+'_'+L['_WI'.toString()]+'_'+L['ASo'.toString()]+'_'+e.hJq};fy.extractCustomShapes=function(e){var L=[];if(!ss.isValue(e)||!ss.isValue(e.ObZ)){return L}var hy=Object.keys(e.ObZ);for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];var hB=e.ObZ[hA];var hC=hB.GKA;if(ss.keyExists(hC,'shape_id'.toString())){var hD=hC['shape_id'.toString()];var hE=hD.uBu;for(var hF=0;hF<hE.length;hF++){var hG=hE[hF];if(fx.isCustomShape(hG)){L.push(hG)}}}if(ss.isValue(hB.LTd)&&ss.keyExists(hB.LTd,'shape_id'.toString())){var hH=hB.LTd['shape_id'.toString()];if(fx.isCustomShape(hH)){L.push(hH)}}}return L};fy.$0=function(e,L,hy){var hz=e.get_paneRect().x;var hA=e.get_paneRect().y;var hB=ss.getEnumerator(Object.keys(L));try{while(hB.moveNext()){var hC=hB.current();var hD=L[hC];hD.x=hD.x+hz;hD.y=hD.y+hA;hy[hC]=hD}}finally{hB.dispose()}};global.tab.SceneInfo=fy;var fz=function(){fz.$1.call(this,null,null)};fz.__typeName='tab.SceneUserPaneInfo';fz.$1=function(e,L){this.$3=null;this.$4=null;this.$1=false;this.$2=false;this.$0=0;this.$5=0;this.$3=e;this.$4=L;this.$1=ss.isValue(e)&&e.length>0;this.$2=ss.isValue(L)&&L.length>0;this.$0=(this.$1?(e.length-1):1);this.$5=(this.$2?(L.length-1):1)};fz.$0=function(e){fz.$1.call(this,e.uaB,e.gwy)};global.tab.SceneUserPaneInfo=fz;var fA=function(e){this.$0=null;ss.EventArgs.call(this);this.$0=e};fA.__typeName='tab.ScrolledEventArgs';global.tab.ScrolledEventArgs=fA;var fB=function(e,L){this.templateString="<div class='Search'><div class='SearchBox tab-ctrl-formatted-border tab-ctrl-formatted-darker-border-hover' dojoAttachPoint='domQuerySection'><textarea rows='1' class='QueryBox' spellcheck='false'dojoAttachPoint='domQueryBox'dojoAttachEvent='onkeydown:onQueryBoxKeyDown,onpaste:onQueryBoxPaste'></textarea><span class='wcSearchX' title='${XBUTTON_CLOSE_TOOLTIP}'dojoAttachPoint='domXButton'dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span><img class='searchBusyImg' title='${CANCEL_SEARCH_TOOLTIP}' src='${busy_gif_url}'dojoAttachPoint='domSearchBusyImg'dojoAttachEvent='onclick:onSearchBusyImgClick'></img><span class='wcIconSearch' title='${SEARCH_TOOLTIP}'dojoAttachPoint='domSearchButton'dojoAttachEvent='onclick:onSearchButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span><span class='wcIconSearchAdd' title='${ADD_ITEM_CTRL_ENTER}'dojoAttachPoint='domSearchAddButton'dojoAttachEvent='onclick:onSearchAddButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span></div><div class='SearchResults' dojoAttachPoint='domResults' dojoAttachEvent='onclick:onListItemClick'></div></div>";this.domQuerySection=null;this.domQueryBox=null;this.domSearchAddButton=null;this.domSearchButton=null;this.domSearchBusyImg=null;this.domResults=null;this.$8=null;this.applyDelay=500;this.$9=100;this._bSearching=false;this._queryBoxPasteTimeout=null;this._searchTimer=null;this._isFilterSearchable=false;this._initializedSearchResults=false;this._domResultsPBExtents=null;this._lastRemoteSearch=null;fC.call(this);this.$8=new bo(this)};fB.__typeName='tab.SearchWidget';global.tab.SearchWidget=fB;var fC=function(){this.isContainer=false;this.domXButton=null;this.CANCEL_SEARCH_TOOLTIP=tab.Strings.QuickFilterSearchCancel;this.SEARCH_TOOLTIP=tab.Strings.QuickFilterSearchTooltip;this.ADD_ITEM_CTRL_ENTER=tab.Strings.QuickFilterSearchAddItemCtrlEnter;this.ADD_ITEM_ENTER=tab.Strings.QuickFilterSearchAddItemEnter;this.XBUTTON_CLOSE_TOOLTIP=tab.Strings.QuickFilterSearchCloseTooltip;this.XBUTTON_CLEAR_TOOLTIP=tab.Strings.QuickFilterSearchClearTooltip;this.NO_MATCHES=tab.Strings.QuickFilterSearchNoMatches;this.isVisible=false;this.qf=null;this.oResults=null;this.resultCount=-1;this.searchDelay=400;this.busy_gif_url=null;this._isTypeInList=false;Object.call(this)};fC.__typeName='tab.SearchWidgetBase';global.tab.SearchWidgetBase=fC;var fD=function(e,L){hi.call(this,e,L)};fD.__typeName='tab.ServerRenderVizHitTester';global.tab.ServerRenderVizHitTester=fD;var fE=function(e){this.$3=new tab.UintSet;this.$2=null;this.$2=e;tab.ApplicationModel.get_instance().get_shapeManager().add_shapeLoaded(ss.mkdel(this,this.onShapeLoaded))};fE.__typeName='tab.ShapeDependencyManager';global.tab.ShapeDependencyManager=fE;var fF=function(e,L,hy){this.$b=null;this.$a=null;this.$7=null;this.$4=null;this.$5=null;this.$9=null;this.$8={x:0,y:0};this.$6={x:0,y:0};this.$3={x:0,y:0,w:0,h:0};this.$c={x:0,y:0};this.$2={x:0,y:0};fF.$0=tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9;this.$b=(ss.isNullOrUndefined(e)?'0':e.w.toString());this.$a=(ss.isNullOrUndefined(e)?'0':e.h.toString());this.$7=L;this.$4=hy};fF.__typeName='tab.ShapeSelectorBase';fF.get_isUsingVml=function(){return fF.$0};global.tab.ShapeSelectorBase=fF;var fG=function(){};fG.__typeName='tab.ShapeStateBase';global.tab.ShapeStateBase=fG;var fH=function(){};fH.__typeName='tab.ShapeUtil';fH.generateSelectedUnderCustomShape=function(e,L,hy,hz,hA){var hB=fH.colorTransformImage(e,L,hz,hA);var hC=document.createElement('canvas');var hD=hy*2;hC.width=Math.ceil(hz+hD);hC.height=Math.ceil(hA+hD);var hE=hC.getContext('2d');hE.drawImage(hB,0,0,hz,hA);hE.drawImage(hB,hy,0,hz,hA);hE.drawImage(hB,hD,0,hz,hA);hE.drawImage(hB,hD,hy,hz,hA);hE.drawImage(hB,hD,hD,hz,hA);hE.drawImage(hB,hy,hD,hz,hA);hE.drawImage(hB,0,hD,hz,hA);hE.drawImage(hB,0,hy,hz,hA);return hC};fH.generateOverlayForShape=function(e,L,hy,hz,hA){var hB=fH.generateSelectedUnderCustomShape(e,L,hy,hz,hA);var hC=hB.getContext('2d');hC.globalCompositeOperation='destination-out';hC.drawImage(e,hy,hy,hz,hA);return hB};fH.colorTransformImage=function(e,L,hy,hz){var hA=fH.generateCanvasAndPrescaleAsNeeded(e,hy,hz);var hB=hA.getContext('2d');var hC=hB.getImageData(0,0,hA.width,hA.height);for(var hD=0;hD<hC.data.length;hD+=4){if(hC.data[hD+3]>0){hC.data[hD]=L.get_r();hC.data[hD+1]=L.get_g();hC.data[hD+2]=L.get_b()}}hB.putImageData(hC,0,0);return hA};fH.applyFoggingToImage=function(e,L,hy,hz,hA){var hB=fH.generateCanvasAndPrescaleAsNeeded(e,hz,hA);var hC=hB.getContext('2d');var hD=hC.getImageData(0,0,hB.width,hB.height);for(var hE=0;hE<hD.data.length;hE+=4){if(hD.data[hE+3]>0){hD.data[hE]=Math.round(L.get_r()+hD.data[hE]*hy);hD.data[hE+1]=Math.round(L.get_g()+hD.data[hE+1]*hy);hD.data[hE+2]=Math.round(L.get_b()+hD.data[hE+2]*hy)}}hC.putImageData(hD,0,0);return hB};fH.generateCanvasAndPrescaleAsNeeded=function(e,L,hy){var hz=document.createElement('canvas');if(!ss.isValue(e)){return hz}if(e.width>L*2&&e.height>hy*2){hz.width=Math.max(ss.Int32.div(e.naturalWidth,2),1);hz.height=Math.max(ss.Int32.div(e.naturalHeight,2),1)}else{hz.width=e.naturalWidth;hz.height=e.naturalHeight}var hA=hz.getContext('2d');hA.drawImage(e,0,0,hz.width,hz.height);return hz};global.tab.ShapeUtil=fH;var fI=function(){this.shareArea=null;this.shareStateArea=null;this.shareCurrentView=null;this.shareOriginalView=null;this.shareLinkSection=null;this.shareLinkTitle=null;this.shareLinkInput=null;this.shareLinkButtons=null;this.shareEmbedTitle=null;this.shareEmbedInput=null;spiff.Template.call(this,$("\n            <div class='tab-shareView tab-toolbarFlyout'>\n            </div>"));this.shareArea=this.get_domRoot()};fI.__typeName='tab.ShareTemplate';global.tab.ShareTemplate=fI;var fJ=function(e){this.$f=(tsConfig.is_mobile?390:300);this.$h=null;this.$g=false;ss.makeGenericType(spiff.BaseView$1,[fK]).call(this,e,new fI);this.$h=e;this.$h.saveSharedView();this.$9();this.$g=Math.min(tabBootstrap.ViewerBootstrap.get_instance().getWebClientDashboardContainerSize(tsConfig.current_sheet_type).w,window.innerWidth)<=this.$f};fJ.__typeName='tab.ShareView';global.tab.ShareView=fJ;var fK=function(){this.$7=true;spiff.BaseViewModel.call(this);this.$7=!this.$6();this.saveSharedView()};fK.__typeName='tab.ShareViewModel';fK.$1=function(){return tsConfig.facebookRedirectURI||fK.$2};fK.$0=function(e,L,hy,hz){var hA=L!==hy;var hB=e;var hC=':'+hz+'='+(L?'yes':'no');var hD=new RegExp(':'+hz+'=[^&]+');if(!!hB.match(hD)){if(hA){hB=hB.replace(hD,hC)}else{hB=hB.replace(hD,'');hB=hB.replace(new RegExp('&&'),'&');hB=hB.replace(new RegExp('\\?&'),'?');hB=hB.replace(new RegExp('&$'),'');hB=hB.replace(new RegExp('\\?$'),'')}}else if(hA){if(!!hB.match(new RegExp('[?]'))){hB=hB+'&'+hC}else{hB=hB+'?'+hC}}return hB};global.tab.ShareViewModel=fK;var fL=function(e){this.button=null;this.icon=null;this.label=null;this.pdfDialog=null;spiff.Template.call(this,e);this.button=this.getElementBySelector('.tab-pdfdlg-thumbnail-button');this.icon=this.getElementBySelector('.tab-pdfdlg-button-icon');this.label=this.getElementBySelector('.tab-pdfdlg-note');this.initEventHandlers()};fL.__typeName='tab.SheetThumbnailTemplate';global.tab.SheetThumbnailTemplate=fL;var fM=function(){this.shownX=0;this.shownY=0;this.origX=0;this.origY=0;this.position=null;this.viewport=null;ss.EventArgs.call(this)};fM.__typeName='tab.ShownEventArgs';fM.areShownArgsSame=function(e,L){if(ss.isNullOrUndefined(e)&&ss.isNullOrUndefined(L)){return true}if(ss.isNullOrUndefined(e)&&ss.isValue(L)||ss.isValue(e)&&ss.isNullOrUndefined(L)){return false}var hy;hy=e.origX===L.origX;hy=hy&&e.origY===L.origY;hy=hy&&e.shownX===L.shownX;hy=hy&&e.shownY===L.shownY;hy=hy&&e.position===L.position;hy=hy&&tab.RectUtil.isEqual(e.viewport.get_dimensions(),L.viewport.get_dimensions());return hy};global.tab.ShownEventArgs=fM;var fN=function(e,L,hy){X.call(this,e,L,hy);this.set_itemFormatter(ss.mkdel(cF.filterItem,cF.filterItem.formatDropdownListFilterItemHtml))};fN.__typeName='tab.SimpleDropdown';global.tab.SimpleDropdown=fN;var fO=function(){this.$1=null;this.$0(fO.fontFaces)};fO.__typeName='tab.SimpleFontListProvider';fO.$ctor1=function(e){this.$1=null;this.$0(e)};fO.$ctor2=function(e){this.$1=null;this.$1=ss.arrayFromEnumerable(e)};fO.$0=function(e){var L=[];var hy=ss.getEnumerator(e);try{while(hy.moveNext()){var hz=hy.current();var hA=hz.get_fonts();for(var hB=0;hB<hA.length;hB++){var hC=hA[hB];L.push(hC)}}}finally{hy.dispose()}return Array.prototype.slice.call(L)};global.tab.SimpleFontListProvider=fO;var fP=function(e,L,hy){this.$0=null;this.$2=null;this.$1=null;this.tileHtml='<div class="tile tab-ctrl-formatted-text" style="top: {0}px; left: 0; right: 0; position: absolute; width: 100%;">';this.$0=e;this.$2=L;this.$1=hy};fP.__typeName='tab.SimpleListContentFormatter';global.tab.SimpleListContentFormatter=fP;var fQ=function(e,L,hy){this.$m=null;ss.makeGenericType(hf,[hc]).call(this,e,L,'opaque');this.renderer=new ch(this.canvasElt,this.context);this.$m=hy};fQ.__typeName='tab.SimpleRegionCanvasView';global.tab.SimpleRegionCanvasView=fQ;var fR=function(e,L,hy,hz,hA,hB,hC,hD,hE){this.$j=null;this.styleid=0;this.$y=null;this.$C=-1;this.$e=['show-readout','hide-readout'];this.$f=['show-slider','hide-slider'];this.$d=['show-step-btns','hide-buttons'];this.$g=['show-ticks','hide-ticks'];this.div=null;this.$h=null;this.currentlySelected=0;this.numValues=0;this.$z=null;this.$A=null;this.slider=null;this.readout=null;this.$q=false;this.$B=null;this.$l=null;this.$E=null;this.$s=null;this.$v=null;this.$r=false;this.$o=null;this.$F=null;this.$w=false;this.$n=null;this.$p=false;this.$k=null;this.$t=null;this.$i=null;this.$x=false;this.$u=false;this.$m=null;this.$D=null;this.div=e;this.$h=L;this.$p=hy;this.$k=hz;this.$o=hA;this.$n=hB;this.$t=hC;this.$m=hD;this.$x=hE;dojo.addClass(this.div,'tableauWidgetUiSlider');this.$j=new tab.DisposableHolder;this.currentlySelected=-1};fR.__typeName='tab.Slider';global.tab.Slider=fR;var fS=function(e,L,hy){this.$3=null;this.$4=null;Z.call(this,e,L,hy)};fS.__typeName='tab.SliderCatmode';global.tab.SliderCatmode=fS;var fT=function(e,L){this.templateString="<div class='SmallSearch'><div class='SmallSearchBox' dojoAttachPoint='domSearchBox'><div class='Autocompleter' dojoAttachPoint='domAutocompleter'></div><div class='wcSearchX dijitInlineTable' title='${XBUTTON_CLOSE_TOOLTIP}'dojoAttachPoint='domXButton'dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></div></div></div>";this.domSearchBox=null;this.domAutocompleter=null;this.autocompleter=null;fC.call(this)};fT.__typeName='tab.SmallSearchWidget';global.tab.SmallSearchWidget=fT;var fU=function(e){this.$6=750;this.$a=null;this.$7=null;this.$8=null;this.$9=null;this.$5=new tab.DisposableHolder;this.$1$1=null;tab.Param.verifyValue(e,'tooltip');this.$a=e;var L=tab.FeatureParamsLookup.getInt(11);if(ss.isValue(L)){this.$6=ss.coalesce(L,0)}};fU.__typeName='tab.SmoothTooltipBehavior';global.tab.SmoothTooltipBehavior=fU;var fV=function(){};fV.__typeName='tab.Social';fV.twitterPopup=function(e,L){var hy=$('#twitter_creator');var hz=(ss.isValue(hy)?hy.attr('content'):null);if(!ss.isNullOrEmptyString(hz)){hz=' '+hz}L+=hz;var hA={};hA['url']=e;hA['via']='tableaupublic';hA['text']=L;hA['related']='tableau';var hB='https://twitter.com/share?'+dojo.objectToQuery(hA);var hC=null;var hD='scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=680,height=350';window.open(hB,hC,hD)};fV.facebookPopup=function(e,L,hy,hz,hA,hB){var hC={};hC['app_id']=e;hC['link']=L;hC['picture']=hy;hC['name']=hz;hC['description']=hA;if(!!hB&&hB.length>0){hC['redirect_uri']=hB}var hD='http://www.facebook.com/dialog/feed?'+dojo.objectToQuery(hC);var hE=null;var hF='scrollbars=yes,resizable=yes,toolbar=no,location=no,width=1000,height=565';var hG=window.open(hD,hE,hF);if(typeof(hG['focus'])==='function'){hG.focus()}};fV.mailTo=function(e,L){var hy=ss.mkdict(['body',e]);if(!!L){hy['subject']=L}var hz='mailto:?'+dojo.objectToQuery(hy);if(tsConfig.is_mobile&&!tsConfig.is_mobile_app&&tab.BrowserSupport.get_isSafari()){window.location.href=hz}else{window.open(hz)}};global.tab.Social=fV;var fW=function(e){this.decrementButton=null;this.incrementButton=null;this.valueText=null;spiff.Template.call(this,$(e))};fW.__typeName='tab.StepperControlTemplate';global.tab.StepperControlTemplate=fW;var fX=function(e,L){this.$c=null;this.$d=null;this.dom=null;ss.makeGenericType(spiff.BaseView$1,[fY]).call(this,e,L);this.dom=L;this.set_stepperViewModel(e);this.dom.valueText.addClass(this.get_stepperViewModel().textClass);this.dom.valueText.val(e.get_value().toString());this.dom.valueText.keydown(tableau.util.preventNonNumericInput);this.dom.valueText.keyup(ss.mkdel(this,this.$a)).blur(ss.mkdel(this,function(hy){this.commitStepValueText()}));this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.dom.incrementButton,ss.mkdel(this,function(hy){this.$9(this.get_stepperViewModel().get_step())})));this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.dom.decrementButton,ss.mkdel(this,function(hy){this.$9(-this.get_stepperViewModel().get_step())})));this.$c=_.debounce(ss.mkdel(this,function(hy){this.$d.set_value(hy);this.dom.valueText.val(this.get_stepperViewModel().get_value().toString())}),1000);this.$b();this.dom.incrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isIncrementEnabled());this.dom.decrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isDecrementEnabled())};fX.__typeName='tab.StepperControlView';global.tab.StepperControlView=fX;var fY=function(e,L,hy,hz){this.$7=0;this.$6=0;this.$8=0;this.$2=0;this.$9=0;this.$4=false;this.textClass=null;this.$5=false;this.$3=false;spiff.BaseViewModel.call(this);this.$7=e;this.$6=L;this.$8=hy;this.$9=hz;this.$2=hz;this.$4=true;this.$5=this.$9<this.$6;this.$3=this.$9>this.$7};fY.__typeName='tab.StepperControlViewModel';global.tab.StepperControlViewModel=fY;var fZ=function(e,L){this.$o=null;this.$l=null;this.$n=null;this.$k=null;this.$m=null;this.menuTheme=0;ss.makeGenericType(spiff.BaseView$1,[ga]).call(this,e,new gb);this.menuTheme=L;this.$o=e;this.$9();this.$o.add_schedulesChanged(ss.mkdel(this,this.handleSchedulesUpdated))};fZ.__typeName='tab.SubscribeView';global.tab.SubscribeView=fZ;var ga=function(){this.$3=[];this.$2$1=null;this.$2$2=null;this.$2$3=false;this.$2$4=null;spiff.BaseViewModel.call(this);if(!tsConfig.is_guest){tab.StartupUtils.callAfterBootstrap(ss.mkdel(this,function(){tab.WorkgroupServerCommands.getSchedules(ss.mkdel(this,function(e){this.$3=e.filter(function(L){return L.get_action()===tab.Schedule.subscription});if(!ss.staticEquals(this.$2$1,null)){this.$2$1()}}))}))}this.set_email(tsConfig.current_user_email)};ga.__typeName='tab.SubscribeViewModel';global.tab.SubscribeViewModel=ga;var gb=function(){this.subscribeViewArea=null;this.subscribeThisView=null;this.subscribeAllViews=null;this.subscribeScheduleDropdown=null;this.subscribeEmail=null;this.subscribeSubject=null;this.subscribeButton=null;spiff.Template.call(this,$("\n            <div class='tab-subscribeView tab-toolbarFlyout'>\n                <div class='tab-subscribeToggleSection'>\n                    <span class='tab-subscribeThisView tab-subscribeToggle'/><span class='tab-subscribeAllViews tab-subscribeToggle'/>\n                </div>\n                <div class='tab-subscribeSchedule'/>\n                <div class='tab-subscribeEmail'/>\n                <div class='tab-subscribeSubject'/>\n                <div class='tab-subscribeSubmit'/>\n            </div>"));this.subscribeViewArea=this.get_domRoot();this.subscribeThisView=this.getElementBySelector('.tab-subscribeThisView');this.subscribeAllViews=this.getElementBySelector('.tab-subscribeAllViews');this.subscribeScheduleDropdown=this.getElementBySelector('.tab-subscribeSchedule');this.subscribeEmail=this.getElementBySelector('.tab-subscribeEmail');this.subscribeSubject=this.getElementBySelector('.tab-subscribeSubject');this.subscribeButton=this.getElementBySelector('.tab-subscribeSubmit')};gb.__typeName='tab.SubscribeViewTemplate';global.tab.SubscribeViewTemplate=gb;var gc=function(e,L){this.baseClass='tableauTabbedNavigation';this.templateString="<div style='width:${innerWidth};' class='tabbedNavigationOuterWrapper'><div id='container' dojoType='dijit.layout.LayoutContainer' style='width:100%; height:100%;' dojoAttachPoint='_innerWrapper'><button dojoType='dijit.form.Button' class='tabsMenuBtn' layoutAlign='left' id='menuBtn' dojoAttachPoint='_menuBtn' style='display:none;'></button><button dojoType='dijit.form.Button' class='tabsLeftBtn' layoutAlign='left' dojoAttachPoint='_leftBtn' style='display:none;'></button><button dojoType='dijit.form.Button' class='tabsRightBtn' layoutAlign='right' dojoAttachPoint='_rightBtn' style='display:none;'></button><div dojoType='dijit.layout.LayoutContainer' layoutAlign='client' dojoAttachPoint='_containerNode'><div class='dijitTabContainerTop-tabs' dojoAttachPoint='_scrollNode'></div></div></div></div>";this.widgetsInTemplate=true;this.innerWidth='100%';this.currentTabIndex=0;this.$i=null;this.$f=null;this.$h=null;this.$g=null;this.currentTab=null;this._scrollNode=null;this._leftBtn=null;this._rightBtn=null;this._menuBtn=null;this._containerNode=null;this._innerWrapper=null;this.$j=null;this._anim=null;this._buttons=null;Object.call(this);this.$i=[];this.$f=[];this.$h=[];this.$i=tsConfig.visible_sheets||this.$i;var hy=this._indexOf(this.$i,tsConfig.current_sheet_name);this.currentTabIndex=(!!hy?hy:this.currentTabIndex);this.innerWidth=e['innerWidth']||this.innerWidth};gc.__typeName='tab.TabbedNavigation';global.tab.TabbedNavigation=gc;var gd=function(e){this.$c=null;this.$b=null;this.$a=null;this.$d=null;ss.makeGenericType(spiff.BaseView$1,[ge]).call(this,e,new j);this.$c=new spiff.TabControl(this.get_template());this.$9()};gd.__typeName='tab.TabbedPaneView';global.tab.TabbedPaneView=gd;var ge=function(e){this.$2=null;spiff.BaseViewModel.call(this);this.$2=e};ge.__typeName='tab.TabbedPaneViewModel';global.tab.TabbedPaneViewModel=ge;var gf=function(e,L,hy){this.tabLabelElement=null;this.tabContentElement=null;this.tabIndex=0;ss.EventArgs.call(this);this.tabLabelElement=e;this.tabContentElement=L;this.tabIndex=hy};gf.__typeName='tab.TabEventArgs';global.tab.TabEventArgs=gf;var gg=function(e){this.$7=null;this.$d=null;this.$e=null;this.$n=null;this.$g=null;this.$l=0;this.$i=null;this.$m=null;this.$j=false;this.$8=null;this.$9=null;this.$a=null;this.$b=null;this.$k=false;this.$f=0;this.$h=0;this.$c=null;this.$7=e;this.$d=new Array;this.$e=cK.instance();this.$n=new tab.TransformationMatrix;this.reset();this.clearDirtyRect()};gg.__typeName='tab.TabRenderContext2D';gg.$0=function(e){var L=e.split(' ');for(var hy=0;hy<L.length;hy++){var hz=L[hy];var hA=parseFloat(hz);if(isFinite(hA)){return hA}}return 8};global.tab.TabRenderContext2D=gg;var gh=function(){this.$d=[];this.$c=[];this.$a=null;this.$9=null;this.$b=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.Widget.call(this,$("<div class='tab-tabView'><ul class='tab-tabLabels'></ul><div class='tab-tabContent'></div></div>"));this.get_element().delegate('.tab-tabLabel',this.createNamespacedEventName('click'),ss.mkdel(this,this.$7));this.$a=$("<div class='tab-tabViewLoading'>&nbsp;</div>");this.$9=spiff.HoverAddClassBehavior.attach(this,'hover','.tab-tabLabel')};gh.__typeName='tab.TabView';global.tab.TabView=gh;var gi=function(){this.textRegionBoundaryElem=null;this.contentElem=null;spiff.Template.call(this,$("<div class='tab-textRegion'><div class='tab-textRegion-boundary'><div class='tab-textRegion-content selectable-text'></div></div></div>"));var e=ss.mkdel(this,this.getElementBySelector);this.textRegionBoundaryElem=e('.tab-textRegion-boundary');this.contentElem=e('.tab-textRegion-content')};gi.__typeName='tab.TextRegionTemplate';global.tab.TextRegionTemplate=gi;var gj=function(e){ss.makeGenericType(spiff.BaseView$1,[gk]).call(this,e,new gi);this.$i().add_newTextRegion(ss.mkdel(this,this.handleNewTextRegion));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$i().remove_newTextRegion(ss.mkdel(this,this.handleNewTextRegion))})))};gj.__typeName='tab.TextRegionView';global.tab.TextRegionView=gj;var gk=function(e){this.$3=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$3=e;this.$3.add_newText(ss.mkdel(this,this.handleNewTextRegion));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_newText(ss.mkdel(this,this.handleNewTextRegion))})))};gk.__typeName='tab.TextRegionViewModel';global.tab.TextRegionViewModel=gk;var gl=function(){this.container=null;spiff.Template.call(this,$("<div class='tvimagesContainer'></div>"));this.container=this.getElementBySelector('.tvimagesContainer')};gl.__typeName='tab.TiledImageTemplate';global.tab.TiledImageTemplate=gl;var gm=function(e){ss.makeGenericType(spiff.BaseView$1,[gn]).call(this,e,new gl)};gm.__typeName='tab.TiledImageView';global.tab.TiledImageView=gm;var gn=function(){spiff.BaseViewModel.call(this)};gn.__typeName='tab.TiledImageViewModel';global.tab.TiledImageViewModel=gn;var go=function(e,L,hy,hz,hA,hB){this.$d=null;this.backgroundMap=new dK;this.disposables=new tab.DisposableHolder;this.$k=null;this.allowPanZoom=null;this.connectNode=null;this.domPanZoomRect=null;this.domDragImage=null;this.domDragMask=null;this.currentToolbarToolMode=null;this.lockedToolbarToolMode=null;this.regionContent=null;this.scroller=null;this.isScrolling=false;this.wasScrolling=false;this.waitingOnPanZoomServerResponse=null;this.paneTableViewModel=null;this.viewportBorder=null;this.backgroundDiv=null;this.resetIsWaitingOnTransition=false;this.resetIsWaitingOnData=false;this.$f=null;this.$i=null;this.$h=null;this.$c=null;this.$j=null;this.$g=null;this.$9=null;this.$e=null;this.$b=false;this.$a=false;this.$8=null;this.$1$1=null;this.$1$2=null;this.$f=e;this.connectNode=$(L);this.viewportBorder=this.connectNode.parent().find('.tvViewportBorders');this.backgroundDiv=this.connectNode.find('.tvBackgroundContainer');this.$d=this.connectNode.find('.tvimagesContainer');this.$k=hy;this.allowPanZoom=hz;this.domPanZoomRect=new fm;this.$h=new fm;this.$i=hA;this.paneTableViewModel=hB;this.waitingOnPanZoomServerResponse='waitingOnServer';if(this.$f==='viz'){this.set_currentModifierKeyToolMode('no-tools');this.makeDomDrag()}this.lockedToolbarToolMode=this.paneTableViewModel.get_visualModel().get_defaultMapTool()};go.__typeName='tab.TiledViewerRegion';go.getCanvasElement=function(e){return e.find('canvas').get(0)};global.tab.TiledViewerRegion=go;var gp=function(e,L,hy,hz,hA,hB){this.$5=null;this.$7=null;this.$6=null;this.$9=null;this.$8=100;this.$5=e;this.$7=L;this.$6=hz;this.$9=hy;if(this.$6.isValid(hA)){this.$4(0,hA)}this.$5.add_contentFetched(ss.mkdel(this,this.$1));if(hB){this.$3()}else{this.$9.add_scrolled(ss.mkdel(this,this.$2))}};gp.__typeName='tab.TiledWidget';global.tab.TiledWidget=gp;var gq=function(){};gq.__typeName='tab.TiledWidgetFactory';gq.createChecklist=function(e,L,hy,hz,hA){var hB=new br(e,hz,e.get_modeContents().get_itemFormatter());return gq.createListTiledWidget(e,L,hy,hB,hA)};gq.createRadiolist=function(e,L,hy,hz,hA){var hB=new fk(e,hz,e.get_modeContents().get_itemFormatter());return gq.createListTiledWidget(e,L,hy,hB,hA)};gq.createSimpleList=function(e,L,hy,hz,hA){var hB=new fP(e,hz,e.get_modeContents().get_itemFormatter());return gq.createListTiledWidget(e,L,hy,hB,hA)};gq.createListTiledWidget=function(e,L,hy,hz,hA){var hB=((e.get_oFilter().isTiled&&tsConfig.filterTileSize>0)?tsConfig.filterTileSize:e.get_oFilter().table.actual_size);dojo.style(hy,'position','relative');var hC=e.get_oFilter().table.actual_size*hA;var hD=(!!hB?Math.ceil(e.get_oFilter().table.actual_size/hB):0);var hE=new cG(hy,hC,hD);var hF=dojo.marginBox(hy);var hG=new ef(e.get_oFilter().table.actual_size,hA,hB,hF.h);var hH=new cz(e.get_session(),e.get_field(),e.get_domain());var hI=L.slice(0,hB);var hJ=new gp(hH,hG,hE,hz,hI,false);return hJ};global.tab.TiledWidgetFactory=gq;var gr=function(e,L,hy,hz,hA){this.$8=null;this.$9=null;this.$b=null;this.$g=null;this.$d=null;this.$e=null;this.$k=0;this.$l=0;this.$i=null;this.$7=null;this.$j=0;this.$c=null;this.$n=null;this.$m=0;this.$f=0;this.$h=false;this.$a=false;this.$1$1=null;this.$c=hz;this.$8=e;this.$g=L;this.$n=hy;this.$h=hA;this.$b={x:0,y:0,w:0,h:0,r:''};this.$i={w:0,h:0};this.$9=new cl;this.$9.add_imageLoaded(ss.mkdel(this,this.$3));this.$9.add_imageTimedOut(ss.mkdel(this,this.$4));this.$9.add_complete(ss.mkdel(this,this.$5));this.$e=[];this.$d=$('.tvimagesContainer',this.$8);this.$a=true};gr.__typeName='tab.TiledWindow';gr.$0=function(e,L){var hy=fv.calculatePixelRatio(false);if(tab.DoubleUtil.isGreaterThanAndNotApproximatelyEqual(hy,1)){var hz=$(e);hz.css('width',L.w.toString()+'px');hz.css('height',L.h.toString()+'px')}};global.tab.TiledWindow=gr;var gs=function(){};gs.__typeName='tab.ToggleSwitch';gs.createToggleControl=function(e,L,hy){var hz=$(ss.formatString("<label class='tabToggleSwitchLabel'>\n            <input type='checkbox' />\n            <span class='tabSwitch'>\n                <span class='tabSwitchOn'>{0}</span>\n                <span class='tabSwitchOff'>{1}</span>\n                <span class='tabSwitchBlock'></span>\n            </span>\n        </label>",tab.Strings.AuthOnLabel,tab.Strings.AuthOffLabel));var hA=hz.find('.tabSwitch');hz.addClass(L);var hB=hz.find('input');if(hy){hB.prop('checked',true);hA.css('left','0')}spiff.ClickHandler.targetAndPress(hz,function(hC){var hD=hB.prop('checked');hA.css('left',(hD?'-50px':'0'));hB.prop('checked',!hD);e(!hD)});return hz};global.tab.ToggleSwitch=gs;var gt=function(){this.$2$1=null;this.$2$2=null;spiff.Template.call(this,$("<div class='tabToolbarButton'><span class='tabToolbarButtonImg' /><span class='tabToolbarButtonText' /></div>"));this.set_image(this.getElementBySelector('.tabToolbarButtonImg'));this.set_text(this.getElementBySelector('.tabToolbarButtonText'))};gt.__typeName='tab.ToolbarButtonTemplate';global.tab.ToolbarButtonTemplate=gt;var gu=function(e){this.$f=null;this.$e=null;ss.makeGenericType(spiff.BaseView$1,[gv]).call(this,e,new gt);this.$f=e;this.$f.add_flyoverShown(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_flyoverShown(ss.mkdel(this,this.$b))})));this.$f.add_flyoverHidden(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_flyoverHidden(ss.mkdel(this,this.$a))})));this.$c();this.$d()};gu.__typeName='tab.ToolbarButtonView';gu.create=function(e){return new gu(e)};global.tab.ToolbarButtonView=gu;var gv=function(e,L,hy){this.action=null;this.popupContent=null;this.$c=null;this.$d=null;this.$6=null;this.$7=null;this.$8=null;this.$5=false;this.$a=false;this.$9=false;this.popupViewModel=null;this.$b=new spiff.UberPopupShowOptions(2,1,1,gA.get_toolbarIsBottom(),false,null,true,null,0);this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$c=e;this.$6=L;this.action=hy;this.$5=!ss.staticEquals(hy,null)};gv.__typeName='tab.ToolbarButtonViewModel';gv.shouldShowButton=function(e,L){switch(e.get_iconRes()){case'share':{return tsConfig.showShareOptions}case'edit':{return tsConfig.allow_authoring&&!tsConfig.previewMode&&!tsConfig.isPublic&&!tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard()&&!tsConfig.is_mobile_app&&!L.get_useSmallScreenToolbar()}case'customviews':{return tsConfig.allow_custom_views&&!L.get_forceHideCustomViewsButton()&&!L.get_useSmallScreenToolbar()}case'subscribe':{return tsConfig.allow_subscriptions&&tsConfig.workbook_allow_subscriptions&&!tsConfig.is_guest}case'download':{return!tsConfig.previewMode}default:{return true}}};gv.createSeparator=function(){var e=new gv('-',null,null);e.$a=true;return e};gv.createFromCommandItem=function(e,L,hy){var hz=tab.CommandItemWrapper.create(e);tab.Param.verifyValue(e,'commandItem');var hA=new gv(hz.get_name(),L+hz.get_iconRes(),null);hA.$5=ss.isNullOrUndefined(hz.get_enabled())||hz.get_enabled();hA.popupContent=gv.$0(e,hy,hA);hA.$8=hz.get_iconRes();if(hA.$8==='edit'){hA.action=function(){tab.ToolbarServerCommands.launchEditing()}}else{var hB=tab.CommandSerializer.deserialize(hz.get_command());if(ss.isValue(hB)){hA.action=function(){hA.set_isActive(true);tab.ServerCommands.executeServerCommand(hB,'immediately',function(){hA.set_isActive(false)},function(){hA.set_isActive(false)})}}}return hA};gv.$0=function(e,L,hy){var hz=tab.CommandItemWrapper.create(e);tab.Param.verifyValue(e,'commandItem');switch(hz.get_iconRes()){case'download':{var hA=new co(L);hA.add_downloadInitiated(ss.mkdel(hy,hy.$3));hy.disposables.add$1(new tab.CallOnDispose(function(){hA.remove_downloadInitiated(ss.mkdel(hy,hy.$3))}));return hA}case'share':{return new fK}case'customviews':{var hB=L.get_customViewsViewModel();hB.hideView=ss.delegateCombine(hB.hideView,ss.mkdel(hy,hy.$3));hy.disposables.add$1(new tab.CallOnDispose(function(){var hD=L.get_customViewsViewModel();hD.hideView=ss.delegateRemove(hD.hideView,ss.mkdel(hy,hy.$3))}));return L.get_customViewsViewModel()}case'subscribe':{var hC=new ga;hC.add_subscribeSuccess(ss.mkdel(hy,hy.$3));hy.disposables.add$1(new tab.CallOnDispose(function(){hC.remove_subscribeSuccess(ss.mkdel(hy,hy.$3))}));return hC}default:{return null}}};global.tab.ToolbarButtonViewModel=gv;var gw=function(e,L,hy){this.$e=null;gv.call(this,e,L,null);tab.Param.verifyValue(hy,'menuBuilder');this.$e=hy;this.set_enabled(this.createMenu().get_menuItems().some(function(hz){return hz.get_enabled()}))};gw.__typeName='tab.ToolbarDropdownButtonViewModel';global.tab.ToolbarDropdownButtonViewModel=gw;var gx=function(){this.toolbar=null;this.vizItems=null;this.publicItems=null;this.publicLogo=null;this.publicBelowLogo=null;this.nonVizItems=null;spiff.Template.call(this,$("\n            <div class='tab-toolbar tab-fill'>\n                <div class='tab-vizItems tab-fill-left' />\n                <div class='tab-publicItems'>\n                    <a class='tab-publicLogoLink' target='_blank' />\n                    <div class='tab-belowPublicLogo' />\n                </div>\n                <div class='tab-nonVizItems tab-fill-right' />\n            <div/>"));this.toolbar=this.get_domRoot();this.vizItems=this.getElementBySelector('.tab-vizItems');this.publicItems=this.getElementBySelector('.tab-publicItems');this.publicLogo=this.getElementBySelector('.tab-publicLogoLink');this.publicBelowLogo=this.getElementBySelector('.tab-belowPublicLogo');this.nonVizItems=this.getElementBySelector('.tab-nonVizItems')};gx.__typeName='tab.ToolbarTemplate';global.tab.ToolbarTemplate=gx;var gy=function(e,L,hy,hz){this.$e=null;gv.call(this,e,L,hy);this.$e=hz};gy.__typeName='tab.ToolbarToggleButtonViewModel';gy.createFromCommandItems=function(e,L,hy){var hz;var hA;var hB=tab.CommandItemWrapper.create(e);var hC=tab.CommandItemWrapper.create(L);if(!ss.isValue(hB.get_enabled())||hB.get_enabled()){hz=hB;hA=hC}else if(!ss.isValue(hC.get_enabled())||hC.get_enabled()){hz=hC;hA=hB}else{return null}var hD=gv.createFromCommandItem(hz.get_item(),hy);var hE=new gy(hD.get_text(),hD.get_iconClass(),hD.get_buttonAction(),hA.get_name());hE.disposables.add$1(hD);hE.set_enabled(ss.isValue(hA)&&!hA.get_enabled());if(hE.get_enabled()){return hE}return null};global.tab.ToolbarToggleButtonViewModel=gy;var gz=function(e){this.$v=null;this.$u=false;this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseView$1,[gA]).call(this,e,new gx);this.$v=e;this.$v.add_newToolbar(ss.mkdel(this,this.$m));this.$v.add_viewCountLoaded(ss.mkdel(this,this.$n));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$v.remove_newToolbar(ss.mkdel(this,this.$m))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$v.remove_viewCountLoaded(ss.mkdel(this,this.$n))})));if(tsConfig.allow_custom_views){var L=ss.mkdel(this,function(){this.updateCustomViewsButton()});this.$q().add_dirtyChanged(L);this.$q().add_customViewListChanged(L);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$q().remove_dirtyChanged(L);this.$q().remove_customViewListChanged(L)})))}var hy=_.throttle(ss.mkdel(this,this.$f),250);this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',function(hz){hy()}))};gz.__typeName='tab.ToolbarView';global.tab.ToolbarView=gz;var gA=function(e){this.$c=null;this.$e=[];this.$b=[];this.$9=new bH;this.$a=false;this.$d=0;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$c=e;if(!tsConfig.allow_custom_view_save){this.$a=true;this.$9.add_customViewListChanged(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$9.remove_customViewListChanged(ss.mkdel(this,this.$7))})))}if(ss.isValue(this.$c.get_vizCommandItems())){this.$6()}this.$c.add_newToolbar(ss.mkdel(this,this.$6));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$c.remove_newToolbar(ss.mkdel(this,this.$6))})));if(tsConfig.isPublic){tab.StartupUtils.callAfterBootstrap(ss.mkdel(this,function(){tab.CommandController.get().get_legacySession().performPostLoadOperations(tsConfig.current_sheet_name,ss.mkdel(this,this.$8))}))}};gA.__typeName='tab.ToolbarViewModel';gA.get_toolbarIsBottom=function(){return(tsConfig.isPublic||tsConfig.embedded)&&!tsConfig.forceToolbarTop};global.tab.ToolbarViewModel=gA;var gB=function(e){this.tupleId=null;this.interactedTupleId=null;this.$d=null;this.$h=[];this.$f=false;this.$k=null;this.$j=false;this.$n=16;this.$e=16;this.$g=null;this.$c=null;this.$m=false;this.$l=false;this.$i=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.Widget.call(this,(e||gB.$0()).get_domRoot());this.$d=e||gB.$0();this.$j=tsConfig.is_mobile;if(!tsConfig.is_mobile){$(window).bind(this.createNamespacedEventName('resize'),ss.mkdel(this,function(){this.$c=null}))}};gB.__typeName='tab.Tooltip';gB.$0=function(){return gB.$3||(gB.$3=new gI)};global.tab.Tooltip=gB;var gC=function(e,L){gD.call(this,'sticky',e,L);var hy=this.get_currentBehavior();hy.attach()};gC.__typeName='tab.TooltipBaseLegacyMode';global.tab.TooltipBaseLegacyMode=gC;var gD=function(e,L,hy){this.disposables=new tab.DisposableHolder;this.$i=null;this.$j=null;this.$f=null;this.tooltipBehaviors=null;this.$d=null;this.$e=null;this.visualId=null;this.readyForHover=true;this.$g=0;this.$h=false;this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$d=L;this.visualId=hy;this.$i=new gB;this.$i.add_closed(ss.mkdel(this,this.$5));this.get_tooltip().add_prePosition(ss.mkdel(this,this.$0));this.get_tooltip().add_showed(ss.mkdel(this,this.$0));this.$i.get_body().bind('mouseleave.basemode',ss.mkdel(this,this.$7));this.$j=new gR(this.$i,this.get_ubertipShouldEnforceButtonOrdering());this.$j.add_actionExecuted(ss.mkdel(this,this.$8));this.$j.add_commandExecuted(ss.mkdel(this,this.$9));this.$j.add_ubertipMenuToggled(ss.mkdel(this,this.$b));this.$j.add_ubertipMenuClosed(ss.mkdel(this,this.$a));this.$f=e;this.$e=e;this.tooltipBehaviors={};this.buildBehaviorsDictionary();var hz=tab.ActionUtils.getApplicableActions(this.visualId.AVP,'on-hover');var hA=tab.ActionUtils.getApplicableActions(this.visualId.AVP,'explicitly');this.$g=hz.length+hA.length;if(tsConfig.is_mobile){hg.add_mobileVizReduceTransform(ss.mkdel(this,this.$6));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){hg.remove_mobileVizReduceTransform(ss.mkdel(this,this.$6))})))}};gD.__typeName='tab.TooltipBaseMode';global.tab.TooltipBaseMode=gD;var gE=function(){};gE.__typeName='tab.TooltipBehaviorType';global.tab.TooltipBehaviorType=gE;var gF=function(e){this.$0=null;this.$0=e};gF.__typeName='tab.TooltipContextProvider';global.tab.TooltipContextProvider=gF;var gG=function(e,L){gD.call(this,'disabled',e,L)};gG.__typeName='tab.TooltipDisabledMode';global.tab.TooltipDisabledMode=gG;var gH=function(e,L,hy){this.$s=null;this.$t=null;this.$r=null;this.$q=false;gD.call(this,'smooth',e,L);var hz=this.get_currentBehavior();hz.attach();hz.add_onMouseStop(ss.mkdel(this,this.$p));this.$r=hy;this.$s=gH.$0();this.$t=gH.$1();this.$k();this.get_tooltip().add_prePosition(ss.mkdel(this,this.prepareForPositioning));this.get_tooltip().add_positioned(ss.mkdel(this,this.handleUbertipButtons));this.get_tooltip().add_showed(ss.mkdel(this,this.handleUbertipButtons))};gH.__typeName='tab.TooltipResponsiveMode';gH.$0=function(){gH.$2++;return'mousemove.TooltipResponsiveMode'+gH.$2};gH.$1=function(){gH.$2++;return'mouseout.TooltipResponsiveMode'+gH.$2};global.tab.TooltipResponsiveMode=gH;var gI=function(){spiff.Template.call(this,$("\n<div class='tab-tooltip'>\n  <div class='tab-tooltipContainer'>\n    <div class='tab-tooltipContent' waiRole='alert'></div>\n  </div>\n  <div class='tab-tooltipConnector'></div>\n</div>"))};gI.__typeName='tab.TooltipTemplate';global.tab.TooltipTemplate=gI;var gJ=function(){};gJ.__typeName='tab.TooltipTrigger';global.tab.TooltipTrigger=gJ;var gK=function(e){this.model=null;this.anchor=null;this.prev_anchor=null;this.anchorIsStart=false;this.$3$1=null;dijit.Tree.call(this)};gK.__typeName='tab.Tree';global.tab.Tree=gK;var gL=function(e){this.isChecked=false;this.$1=null;this.tree=null;this.item=null;dijit._TreeNode.call(this)};gL.__typeName='tab.TreeNode';global.tab.TreeNode=gL;var gM=function(e,L,hy,hz){this.root=null;this.session=null;this.field=null;this.levels=0;this.isSingleSelect=false;this.session=e;this.field=L;this.levels=hy;this.isSingleSelect=hz;this.root=new Object;this.root.schema=null;this.root.tuple={d:null,s:false,t:null};this.root.label='$ROOT$';this.root.level=-1;this.root.children=null};gM.__typeName='tab.TreeSupport';global.tab.TreeSupport=gM;var gN=function(e,L,hy){this.queryBox=null;this.div=null;this.outerDiv=null;this.querySpan=null;this.$o=null;this.$s=null;this.goButton=null;this.$j=null;this.$i=null;this.$t=false;this.$q=null;this.$n=null;this.$l=false;this.$k=null;this.$u=false;this.$x=null;this.$r=false;this.$v=0;this.$p=null;this.$m=null;this.$w=null;this.div=e;this.$p=L;this.$x=hy;dojo.addClass(this.div,'tableauWidgetUiTypeIn');this.$o=new tab.DisposableHolder};gN.__typeName='tab.TypeIn';global.tab.TypeIn=gN;var gO=function(e,L,hy){this.isContainer=true;this.$6=null;Z.call(this,e,L,hy)};gO.__typeName='tab.TypeInCatmode';global.tab.TypeInCatmode=gO;var gP=function(e,L,hy,hz){this.$D=null;this.$C=null;this.$F=null;this.$E=null;this.$I=null;this.$H=null;this.$G=null;gN.call(this,e,L,hy);this.$D=hz;if(ss.isNullOrUndefined(this.$D)){this.$D=function(hA){return new cd(hA)}}};gP.__typeName='tab.TypeInDateField';global.tab.TypeInDateField=gP;var gQ=function(){this.templateString="<div class='TypeInFilter'><div class='TIFItemsList tab-ctrl-formatted-text' dojoAttachPoint='domItemsList'dojoAttachEvent='onclick:_onItemsListClick,onmouseover:_onItemsListMouseOver,onmouseout:_onItemsListMouseOut,onkeydown:_onItemsKeyDown'><div class='wcIconSearchRemove' dojoAttachPoint='domXButton'dojoAttachEvent='onclick:_onXButtonClick,onmouseover:_onXButtonMouseOver,onmouseout:_onXButtonMouseOut'></div></div><div class='TIFButtonDiv' dojoAttachPoint='domClearListButtonDiv'><button class='TIFButton'dojoAttachEvent='onclick:_onClearListButtonClick'>Clear List</button></div></div>";this.isContainer=false;this.parentFilter=null;this.tuples=null;this.itemName='';this.role=null;this.domItemsList=null;this.domXButton=null;this.domClearListButtonDiv=null;this.$0=null;Object.call(this)};gQ.__typeName='tab.TypeInFilterContents';global.tab.TypeInFilterContents=gQ;var gR=function(e,L){this.$K=null;this.$E=new tab.DisposableHolder;this.$H=null;this.$I=null;this.$F=false;this.$G=false;this.$D=null;this.$J=-1;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.Widget.call(this,$("\n<div class='tab-ubertip'>\n  <div class='tab-ubertipContent'>\n    <div class='tab-ubertipTooltip'></div>\n    <div class='tab-ubertipActions'></div>\n  </div>\n  <div class='tab-ubertipCommandArea'>\n    <div class='tab-ubertipSelected'></div>\n    <div class='tab-ubertipCommands'></div>\n    <div class='tab-clear'></div>\n  </div>\n</div>"));this.$K=e;this.$K.add_showed(ss.mkdel(this,this.handleTooltipShowed));this.$K.add_positioned(ss.mkdel(this,this.handleTooltipShowing));this.$F=L};gR.__typeName='tab.Ubertip';gR.$1=function(e){var L='';if(ss.isNullOrEmptyString(e.imageRes)){L='Command'+e.commandType}else if(ss.endsWithString(e.imageRes.toString(),'png')){L=tab.TabResources.getResourceName(e.imageRes)}else{L=tab.TabResources.lookupFullResourceAlias(e.imageRes)}return L};gR.$0=function(e){var L=spiff.LabelButton.newNativeButton();if(tsConfig.is_mobile){var hy=gR.$1(e);L.set_label(tab.Strings.getString(ss.formatString('Ubertip{0}Mobile',hy)))}else{L.set_label(e.name);L.set_hoverTooltipText(e.description)}L.set_disabled(true);var hz=new ss.StringBuilder('tab-command');hz.append(gR.$1(e));L.get_element().addClass(hz.toString());L.get_element().css('visibility','hidden');return L};global.tab.Ubertip=gR;var gS=function(){ev.call(this)};gS.__typeName='tab.UICheckedMenuItem';global.tab.UICheckedMenuItem=gS;var gT=function(){ev.call(this)};gT.__typeName='tab.UIMenuItem';global.tab.UIMenuItem=gT;var gU=function(){this.$0=null;this.$0={}};gU.__typeName='tab.UnionFontFamilyProviderBuilder';global.tab.UnionFontFamilyProviderBuilder=gU;var gV=function(){};gV.__typeName='tab.URIUtil';gV.absolutizeURI=function(e){if(ss.isValue(e)){e=e.trim()}if(ss.isNullOrEmptyString(e)){return e}var L=new RegExp('^([a-zA-Z0-9]+):(?!\\d+(/|$))');var hy=e.match(L);if(ss.isValue(hy)&&hy[1]!=='http'&&hy[1]!=='https'){return e}var hz='http://';var hA=new RegExp('^https:|^/?/?[a-zA-Z0-9.-]+:443(/|$)');if(hA.test(e)){hz='https://'}var hB=new RegExp('^(https?:)?/?/?');e=e.replace(hB,hz);return e};global.tab.URIUtil=gV;var gW=function(e,L){this.$h=null;this.$c=false;this.$d=false;this.$i=0;this.$e=null;this.$f=null;this.$b=null;this.$g=null;this.$j=null;this.$h=e;this.$c=e.$1;this.$d=e.$2;var hy=e.$5*e.$0;this.$e=new Array(hy+1);this.$j=new Array(hy);this.$b=(this.$c?new Array(hy):null);this.$g=(this.$d?new Array(hy):null);this.$f=new Array(L.get_markCount());this.$i=this.$2(L)};gW.__typeName='tab.UserPaneInfo';global.tab.UserPaneInfo=gW;var gX=function(){this.$1=null;this.$2=null;spiff.Template.call(this,$("\n<div class='tabDataConnPromptVarList'>\n    <div class='tabDataConnPromptAddVarCtrl'>\n        <div class='tabDataConnPromptAddVarCtrlBtnArea'/>\n        <div class='tabDataConnPromptAddVarCtrlVarSelector'/>\n    </div>\n</div>"));this.$1=this.getElementBySelector('.tabDataConnPromptAddVarCtrlBtnArea');this.$2=this.getElementBySelector('.tabDataConnPromptAddVarCtrlVarSelector')};gX.__typeName='tab.VariableListViewTemplate';global.tab.VariableListViewTemplate=gX;var gY=function(){dG.call(this,"<div class='tabCatLegendScrollButtonHolder'><span class='tabCatLegendScrollPrev'/><br><span class='tabCatLegendScrollNext'/></div>")};gY.__typeName='tab.VerticalIteratorButtonTemplate';global.tab.VerticalIteratorButtonTemplate=gY;var gZ=function(e,L){this.controller=null;this.sheetName='';this.viewSession=null;this.active=false;this.imageCacheVersion=0;this.viewModified=false;this.viewWidget=null;this.$3=new tab.DisposableHolder;this.sheetName=e;this.viewSession=L;this.$1()};gZ.__typeName='tab.ViewController';global.tab.ViewController=gZ;var ha=function(e){this.$e=null;this.$f=null;this.$e=e};ha.__typeName='tab.ViewingToolbarCommands';global.tab.ViewingToolbarCommands=ha;var hb=function(e){this.isConst=false;this.vals=null;this.$0=false;this.constVal=null;this.vals=e;this.$0=ss.isValue(this.vals)&&this.vals.length>0;this.isConst=!this.$0||this.vals.length===1;if(this.isConst){this.constVal=(this.$0?this.vals[0]:null)}};hb.__typeName='tab.VisualColumnIterator';global.tab.VisualColumnIterator=hb;var hc=function(e,L,hy,hz,hA){this.$6=null;this.$a=null;this.$8=null;this.$9=null;this.$3=null;this.$5=null;this.$4=null;this.$7=null;spiff.BaseViewModel.call(this);this.$6=e;this.$a=L;this.$8=hy;this.$6.add_newVisualList(ss.mkdel(this,this.handleModelChange));if(ss.isValue(hz)){this.$9=hz.get_nodeSelection();this.$9.add_newSelection(ss.mkdel(this,this.$2))}if(ss.isValue(hA)){this.$3=hA.get_nodeSelection();this.$3.add_newSelection(ss.mkdel(this,this.$2))}if(ss.isValue(hz)||ss.isValue(hA)){this.$2()}};hc.__typeName='tab.VisualListViewModel';global.tab.VisualListViewModel=hc;var hd=function(){};hd.__typeName='tab.VisualPartsHitTest';hd.hitTestRefLines=function(e,L,hy){var hz=new da.$ctor1(0,0,0);var hA=[];for(var hB=0;hB<e.length;hB++){var hC=e[hB];var hD=hd.hitTestRefLine(hC.tOA,L,hy);if(hD.get_hitType()!==0){if(hy){hz=da.tieBreak(hD,hz)}else{hA.push(hD)}}}if(hy){if(hz.get_hitType()===0){return[]}return[hz]}return hA};hd.hitTestRefLine=function(e,L,hy){var hz=new da.$ctor1(0,0,0);var hA=hd.$0(e,'refpart-text');hz=hd.$1(hA,4,L,hy,hz);if(hz.get_hitType()===3){return hz}var hB=hd.$0(e,'refpart-geom');hz=hd.$1(hB,3,L,hy,hz);return hz};hd.hitTestTrendLines=function(e,L,hy){var hz=new da.$ctor1(0,0,0);var hA=[];for(var hB=e.length-1;hB>=0;hB--){var hC=hd.$3(e[hB],L,hy);if(hC.get_hitType()===3){if(hy){return[hC]}else{hA.push(hC)}}if(hy&&hC.get_hitType()===2&&hz.get_hitType()===0){hz=hC}}if(hy){if(hz.get_hitType()===0){return[]}return[hz]}return hA};hd.$1=function(e,L,hy,hz,hA){for(var hB=e.length-1;hB>=0;hB--){var hC=e[hB];var hD=hd.$2(hC.tOA,L,hy,hz,hC.YLs);if(hD.get_hitType()===3){return hD}if(hD.get_hitType()===2&&hA.get_hitType()===0){hA=hD}}return hA};hd.$2=function(e,L,hy,hz,hA){var hB=tab.RectXYUtil.dialate(hy,hd.visualPartNearHitTestExpansionPixels);var hC=1;var hD=new da.$ctor1(hA,L,0);for(var hE=0;hE<e.length;hE++){var hF=e[hE];switch(hF.VzB){case'Osj':{var hG=hF;if(ss.isValue(hG.Cwi)){hC=hG.Cwi}break}case'uEs':case'jpw':{var hH=hF;var hI=ss.isValue(hH.GN_)&&!hH.GN_;var hJ={x:hH.WzG[0],y:hH.WzG[1]};var hK={x:hH.WzG[2],y:hH.WzG[3]};var hL=tab.RectXYUtil.rectXYFromCorners(hJ,hK);if(hF.VzB==='uEs'){if(hC<3){hL=tab.RectXYUtil.dialate(hL,1)}}var hM=hz&&tab.RectXYUtil.intersectsWith(hB,hL);var hN=(!hz||hM)&&tab.RectXYUtil.intersectsWith(hy,hL);if(hN){hD=new da.$ctor1(hA,L,3);if(hI){hD.doNotRenderOverlay()}return hD}if(hM){hD=new da.$ctor1(hA,L,2);if(hI){hD.doNotRenderOverlay()}}break}default:{break}}}return hD};hd.$3=function(e,L,hy){var hz=new da.$ctor1(0,0,0);if(hy){var hA=tab.RectXYUtil.dialate(L,hd.visualPartNearHitTestExpansionPixels);var hB=hd.$4(e,hA);if(ss.isValue(hB)){hz=new da.$ctor1(ss.unbox(hB),2,2)}}if(hz.get_hitType()===2||!hy){var hC=hd.$4(e,L);if(ss.isValue(hC)){hz=new da.$ctor1(ss.unbox(hC),2,3)}}return hz};hd.$4=function(e,L){var hy=new Array;hy.push(e);while(hy.length>0){var hz=hy.pop();var hA=tab.RectXYUtil.intersectsWith(hz.get_boundingBox(),L);if(hA){if(hz.get_nodeType()===4||hz.get_nodeType()===0){var hB=hz.get_children();hB.forEach(function(hC){hy.push(hC)})}else if(hz.get_nodeType()===5){return hz.get_objectId()}}}return null};hd.$0=function(e,L){var hy=[];for(var hz=0;hz<e.length;hz++){var hA=e[hz];if(hA.VzB==='$OC'&&L==='refpart-clip-rect'){hy.push(hA)}else if(hA.VzB==='rOX'){var hB=hA;var hC=_.find(hB.tOA,function(hD){return hD.VzB==='ADd'});if(L==='refpart-text'&&ss.isValue(hC)){hy.push(hA)}else if(L==='refpart-geom'&&ss.isNullOrUndefined(hC)){hy.push(hA)}}}return hy};global.tab.VisualPartsHitTest=hd;var he=function(){};he.__typeName='tab.VisualPartTargetState';global.tab.VisualPartTargetState=he;var hf=function(e){var L=function(hy,hz,hA){this.renderer=null;this.completeDocSize={w:0,h:0};this.containers=null;this.$l=null;this.$4$1=null;ss.makeGenericType(be,[e]).call(this,hy,hA);this.$l=hz;this.containers=$('.tvimagesContainer',this.$l);this.add_sizeChange(ss.mkdel(this,this.$j))};ss.registerGenericClassInstance(L,hf,[e],{add_loadComplete:function(hy){this.$4$1=ss.delegateCombine(this.$4$1,hy)},remove_loadComplete:function(hy){this.$4$1=ss.delegateRemove(this.$4$1,hy)},get_docSize:function(){return this.completeDocSize},destroy:function(){this.dispose()},dispose:function(){this.remove_sizeChange(ss.mkdel(this,this.$j));this.renderer=null;ss.makeGenericType(be,[e]).prototype.dispose.call(this)},refreshImages:function(hy){},reset:function(hy,hz){if(ss.isNullOrUndefined(hy)){return}var hA={w:hy.w,h:hy.h};var hB=ss.isValue(this.completeDocSize)&&!tab.SizeUtil.equals(hA,this.completeDocSize);this.completeDocSize=hA;this.containers.width(hy.w);this.containers.height(hy.h);if(hB){this.$k()}},copyContent:function(hy){hy.drawImage1(this.canvasElt,0,0)},redraw:function(){if(!this.get_needsRedraw()||ss.isNullOrUndefined(this.renderer)){return}this.renderer.reset();this.context.save();this.context.setClip(this.$i());bd.scaleCanvasDrawing(this.context,this.get_pixelRatio());this.renderer.set_renderOffset(this.scrollOffset);this.performRender();this.context.restore();this.postRenderFinalPass();this.clearDirty();this.raiseLoadComplete()},redrawFinished:function(){},raiseLoadComplete:function(){if(ss.isValue(this.$4$1)){this.$4$1(this,ss.EventArgs.Empty)}},onViewModelPropertyChanged:function(hy,hz){this.invalidate(false)},performRender:null,postRenderFinalPass:null,$i:function(){var hy=this.get_pixelRatio();var hz=this.get_dirtyRect();var hA=hz.x*hy;var hB=hz.y*hy;var hC=(hz.x+hz.w)*hy;var hD=(hz.y+hz.h)*hy;var hE=Math.floor(hA);var hF=Math.floor(hB);return{x:hE,y:hF,w:Math.ceil(hC)-hE,h:Math.ceil(hD)-hF}},$j:function(){this.$k()},$k:function(){var hy=this.get_effectiveViewSize();var hz={x:Math.min(this.completeDocSize.w-hy.w,this.scrollOffset.x),y:Math.min(this.completeDocSize.h-hy.h,this.scrollOffset.y)};hz.x=Math.max(0,hz.x);hz.y=Math.max(0,hz.y);this.set_scrollPos(hz)}},function(){return ss.makeGenericType(be,[e])},function(){return[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[e]),spiff.IScrollable,dB]});return L};hf.__typeName='tab.VisualRegionCanvasView$1';ss.initGenericClass(hf,a,1);global.tab.VisualRegionCanvasView$1=hf;var hg=function(){};hg.__typeName='tab.VizEvent';hg.add_mobileVizExpandTransform=function(e){hg.$1$1=ss.delegateCombine(hg.$1$1,e)};hg.remove_mobileVizExpandTransform=function(e){hg.$1$1=ss.delegateRemove(hg.$1$1,e)};hg.add_mobileVizReduceTransform=function(e){hg.$1$2=ss.delegateCombine(hg.$1$2,e)};hg.remove_mobileVizReduceTransform=function(e){hg.$1$2=ss.delegateRemove(hg.$1$2,e)};hg.notifyMobileVizExpandTransform=function(){if(ss.isValue(hg.$1$1)){hg.$1$1()}};hg.notifyMobileVizReduceTransform=function(){if(ss.isValue(hg.$1$2)){hg.$1$2()}};global.tab.VizEvent=hg;var hh=function(e,L,hy,hz,hA,hB,hC,hD){this.$1$1=0;this.$1$2=null;this.$1$3=0;this.$1$4=0;this.$1$5=0;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.$1$9=null;this.set_instanceId(++hh.$0);this.set_sheetId(e);this.set_paneId(L);this.set_paneColumnIndex(hy);this.set_paneRowIndex(hz);this.set_regionPart(hA);this.set_regionCoordinates(hB);this.set_pageCoordinates(hC);this.set_result(hD)};hh.__typeName='tab.VizHitInfo';global.tab.VizHitInfo=hh;var hi=function(e,L){this.$0=null;this.$1=null;this.paneTable=null;this.region=null;this.lastEvent=null;this.$1$1=null;tab.Param.verifyValue(e,'paneTable');tab.Param.verifyValue(L,'region');this.paneTable=e;this.region=L;this.$1=new tab.Debouncer(ss.mkdel(this,function(){var hy=this.region.toLocalCoordsEvent(this.lastEvent);var hz=tab.PointUtil.add(hy,tab.RecordCast.dojoCoordsAsPoint(this.region.getLocalOffset()));this.hitTest(hy,hz,L.get_sheetid())}),250)};hi.__typeName='tab.VizHitTester';global.tab.VizHitTester=hi;var hj=function(e){this.$1=null;this.$1=[];hj.$0(e.toSimpleFontList());this.$0(e)};hj.__typeName='tab.WebFilteredFontListProvider';hj.get_testDiv=function(){return hj.$4};hj.get_supportedFonts=function(){return hj.$3};hj.$0=function(e){var L='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';var hy='12pt';if(hj.$1===0&&hj.$2===0){var hz=$('<div></div>').css('visibility','hidden').css('font-size',hy).css('font-family','Arial').text(L);hj.get_testDiv().append(hz);hj.$2=hz.width();hj.$1=hz.height();hz.remove()}var hA=$('<div></div>');var hB={};var hC=ss.getEnumerator(e);try{while(hC.moveNext()){var hD=hC.current();if(ss.keyExists(hj.get_supportedFonts(),hD)){continue}var hE=ss.formatString('"{0}", "Arial"',hD);var hF=$('<div></div>').css('visibility','hidden').css('font-size',hy).css('font-family',hE).text(L);cL.cleanUpFontFamilyStyles(hF);hA.append(hF);hB[hD]=hF}}finally{hC.dispose()}if(ss.getKeyCount(hB)===0){return}hj.get_testDiv().append(hA);var hG=new ss.ObjectEnumerator(hB);try{while(hG.moveNext()){var hH=hG.current();var hI=hj.$2!==hH.value.width()||hj.$1!==hH.value.height()||ss.compareStrings(hH.key,'Arial',true)===0;hj.get_supportedFonts()[hH.key]=hI}}finally{hG.dispose()}hA.remove()};global.tab.WebFilteredFontListProvider=hj;var hk=function(){this.content=null;spiff.Template.call(this,$("<div class='tab-web'></div>"))};hk.__typeName='tab.WebZoneTemplate';global.tab.WebZoneTemplate=hk;var hl=function(e,L){this.$g=null;this.$f=null;this.$e=null;this.$d=null;ss.makeGenericType(spiff.BaseView$1,[hm]).call(this,e,new hk);this.$g=e;this.$f=L;this.$g.add_newWebZone(ss.mkdel(this,this.handleNewWebZone));this.$f.add_propertyChanged(ss.mkdel(this,this.$b));this.$f.add_resizeZone(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$g.remove_newWebZone(ss.mkdel(this,this.handleNewWebZone));this.$f.remove_propertyChanged(ss.mkdel(this,this.$b));this.$f.remove_resizeZone(ss.mkdel(this,this.$a))})))};hl.__typeName='tab.WebZoneView';global.tab.WebZoneView=hl;var hm=function(e){this.$3=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$3=e;this.$3.add_newWebZone(ss.mkdel(this,this.handleNewWebZone));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_newWebZone(ss.mkdel(this,this.handleNewWebZone))})))};hm.__typeName='tab.WebZoneViewModel';global.tab.WebZoneViewModel=hm;var hn=function(){};hn.__typeName='tab.WidgetStyle';hn.applyFormatting=function(e,L,hy,hz){hn.$0(e.id,L,hy,hz,hn.$2)};hn.applyFormattingByClassName=function(e,L){hn.$0(e,L.get_textStyleModel(),L.get_backgroundColor(),L.get_lineHeight(),hn.$1)};hn.$0=function(e,L,hy,hz,hA){var hB=cL.makeFormatStyleDict(L);if(ss.isValue(hz)){hB['line-height']=hz+'px'}if(ss.isNullOrUndefined(hB['font-style'])){hB['font-style']='normal'}if(ss.isNullOrUndefined(hB['font-weight'])){hB['font-weight']='normal'}if(ss.isNullOrUndefined(hB['text-decoration'])){hB['text-decoration']='none'}tab.StyleUtil.appendCSSRule(hA(e,'tab-ctrl-formatted-text'),hB);hB['font-size']=null;hB['line-height']=null;tab.StyleUtil.appendCSSRule(hA(e,'tab-ctrl-formatted-fixedsize'),hB);if(ss.isValue(L.YhU)){var hC={color:L.YhU};tab.StyleUtil.appendCSSRule(hA(e,'tab-ctrl-formatted-coloronly'),hC)}var hD={};if(ss.isValue(L.YhU)){hD['border-color']=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode(L.YhU),0.7843137383461).toString();tab.StyleUtil.appendCSSRule(hA(e,'tab-ctrl-formatted-darker-border-hover:hover'),hD);hD['border-color']=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode(L.YhU),0.411764711141586).toString();tab.StyleUtil.appendCSSRule(hA(e,'tab-ctrl-formatted-border'),hD);tab.StyleUtil.appendCSSRule(hA(e,'tab-ctrl-formatted-border-hover:hover'),hD)}if(ss.isValue(hy)){var hE=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode(hy),0.549019634723663);var hF=tab.ColorModel.alphaCompositeSolidDest(hE,new tab.ColorModel(255,255,255,1));hD['background-color']=hF.toRgb()}tab.StyleUtil.appendCSSRule(hA(e,'tab-ctrl-formatted-widget'),hD);hD['border-color']=null;tab.StyleUtil.appendCSSRule(hA(e,'tab-ctrl-formatted-widget:hover'),hD)};hn.$2=function(e,L){return'[id="'+e+'"].'+L+','+'[id="'+e+'"] .'+L};hn.$1=function(e,L){return'.'+e+'.'+L+','+'.'+e+' .'+L};global.tab.WidgetStyle=hn;var ho=function(){};ho.__typeName='tab.WidgetUtil';ho.newMenuItemsFromCommands=function(e,L,hy,hz){if(ss.isNullOrUndefined(L)){return}var hA=tab.CommandsPresModelWrapper.create(L);if(!ss.isValue(hA.get_commandItems())){return}var hB=true;var hC=hA.get_commandItems();for(var hD=0;hD<hC.length;hD++){var hE=hC[hD];var hF=null;var hG=tab.CommandItemWrapper.create(hE);var hH=true;if(ss.isValue(hG.get_command())&&ss.isValue(hz)){var hI={};hI.command=tab.CommandSerializer.deserialize(hG.get_command());tab.UbertipSerializer.setCommandType(hI);hH=hz.test(hI)}if(!hH||ss.isValue(hG.get_isVisible())&&!hG.get_isVisible()){continue}switch(hG.get_commandsType()){case'item':{hF=spiff.MenuItem.newItem(hy(hE),hG.get_name());hF.set_description(hG.get_description());break}case'separator':{if(!hB){hF=spiff.MenuItem.newDivider()}break}case'subcommands':{var hJ=[];ho.newMenuItemsFromCommands(hJ,hG.get_commands(),hy,hz);if(hJ.length>0){hF=spiff.MenuItem.newItem(null,hG.get_name(),0,new spiff.Menu(hJ))}break}}if(ss.isValue(hF)){hF.set_enabled(!ss.isValue(hG.get_enabled())||hG.get_enabled());if(hG.get_isRadioOn()){hF.set_checkState(2)}else if(hG.get_isChecked()){hF.set_checkState(1)}e.push(hF);hB=hF.get_isDivider()}}if(e.length>0&&e[e.length-1].get_isDivider()){ss.removeAt(e,e.length-1)}};ho.createDropdownMenuCommands=function(e){var L=tab.CommandSerializer.deserialize(tab.CommandItemWrapper.create(e).get_command());var hy=function(){tab.ServerCommands.executeServerCommand(L,'immediately',tab.CommandUtils.createCommandRedirectSuccessHandler(),null)};return hy};ho.commandMenuItemClicked=function(e){if(ss.referenceEquals(ss.getInstanceType(e.get_data()),Function)){e.get_data()()}else{var L=e.get_data();tab.ServerCommands.executeServerCommand(L,'immediately')}};ho.menuViewModelFromCommands=function(e,L,hy){tab.Param.verifyValue(e,'commands');var hz=tab.CommandsPresModelWrapper.create(e);if(tab.MiscUtil.isNullOrEmpty(hz.get_commandItems())){if(ss.isValue(hy)){hy()}return null}var hA=[];ho.newMenuItemsFromCommands(hA,e,function(hD){var hE=tab.CommandItemWrapper.create(hD);var hF=tab.CommandSerializer.deserialize(hE.get_command());var hG=function(){tab.ServerCommands.executeServerCommand(hF,'immediately',tab.CommandUtils.createCommandRedirectSuccessHandler(null),null)};return hG});var hB=new spiff.Menu(hA);var hC=spiff.MenuViewModel.createForMenu(hB,L);if(ss.isValue(hy)){hC.add_hidden(hy)}return hC};global.tab.WidgetUtil=ho;var hp=function(){this.dashboardContainer=null;spiff.Template.call(this,$("<div class='tab-workbook'><div class='dashboardSpacer'/></div>"));this.dashboardContainer=this.getElementBySelector(hq.dashboardContainerSelector)};hp.__typeName='tab.WorkbookTemplate';global.tab.WorkbookTemplate=hp;var hq=function(e){this.$c=null;this.$e=null;this.$d=null;ss.makeGenericType(spiff.BaseView$1,[hr]).call(this,e,new hp);this.$c=e;this.$c.add_newDashboard(ss.mkdel(this,this.$9));this.$c.add_newDataConnectionPrompt(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$c.remove_newDashboard(ss.mkdel(this,this.$9));this.$c.remove_newDataConnectionPrompt(ss.mkdel(this,this.$a))})))};hq.__typeName='tab.WorkbookView';hq.findDashboardContainer=function(){return $(hq.dashboardContainerSelector)};global.tab.WorkbookView=hq;var hr=function(e){this.$7=null;this.$6=null;this.$5=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$7=e;this.$7.addNewDashboardHandler(ss.mkdel(this,this.$2));this.$7.add_newDataConnectionPrompt(ss.mkdel(this,this.$3));this.$7.add_dataConnectionPromptDismissed(ss.mkdel(this,this.$4));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$7.remove_newDataConnectionPrompt(ss.mkdel(this,this.$3));this.$7.remove_dataConnectionPromptDismissed(ss.mkdel(this,this.$4))})))};hr.__typeName='tab.WorkbookViewModel';global.tab.WorkbookViewModel=hr;var hs=function(e,L){this.$1=0;this.$0=null;ss.EventArgs.call(this);this.$1=e;this.$0=L};hs.__typeName='tab.WorkerDoneEventArgs';global.tab.WorkerDoneEventArgs=hs;var ht=function(e){this.$0=0;ss.EventArgs.call(this);this.$0=e};ht.__typeName='tab.WorkerTimeoutEventArgs';global.tab.WorkerTimeoutEventArgs=ht;var hu=function(){spiff.Template.call(this,$("<div class='tab-zone'></div>"))};hu.__typeName='tab.ZoneTemplate';global.tab.ZoneTemplate=hu;var hv=function(e){this.$q=null;this.$o=null;this.$p=0;this.$n='';ss.makeGenericType(spiff.BaseView$1,[hw]).call(this,e,new hu);this.$m().add_updateZone(ss.mkdel(this,this.$d));this.$m().add_resizeZone(ss.mkdel(this,this.$c));this.$m().add_newZoneContent(ss.mkdel(this,this.$b));this.$m().add_validStateChanged(ss.mkdel(this,this.$g));if(tsConfig.is_authoring){this.disposables.add$1(new spiff.HoverBehavior(this,null,ss.mkdel(this,this.$e),ss.mkdel(this,this.$f)))}this.$p=0};hv.__typeName='tab.ZoneView';hv.viewRect=function(e){var L=0;if(ss.isValue(e.rPC)&&e.rPC.ysh!=='bs-none'&&ss.isValue(e.rPC.s$V)){L=e.rPC.s$V}var hy={x:0,y:0,w:e.rec-2*L,h:e.EUR-2*L};return tab.RectXYUtil.toRect(hy)};global.tab.ZoneView=hv;var hw=function(e){this.$g=null;this.$f=null;this.$e=null;this.$d=false;this.$b=false;this.$c=false;this.$a=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.call(this);this.$d=true;this.$g=e;this.$g.add_updateZone(ss.mkdel(this,this.$5));this.$g.add_resizeZone(ss.mkdel(this,this.$4));this.$g.add_newZoneContent(ss.mkdel(this,this.$2));this.$g.add_removeZoneContent(ss.mkdel(this,this.$3));this.$8();this.$9();if(ss.isValue(e)&&ss.isValue(e.get_model())){this.$2(e.get_model())}};hw.__typeName='tab.ZoneViewModel';hw.calculateZoneZIndex=function(e){return 10+e.get_relativeZoneZIndex()};global.tab.ZoneViewModel=hw;var hx=function(){};hx.__typeName='tab.ZoomComputer';hx.resolveDesiredZoom=function(e,L){var hy=ss.coalesce(e.nUd,1);var hz=Math.floor(L*hy)/hy;hz+=Math.log(ss.coalesce(e.ub_,1))/Math.LN2;var hA=Math.ceil(L*hy)/hy;hA+=Math.log(ss.coalesce(e.DIs,1))/Math.LN2;return((L+0.05<hA)?Math.min(hz,L):Math.max(hA,L))};hx.resolveDesiredScale=function(e,L){var hy=Math.log(L)/Math.LN2;var hz=hx.resolveDesiredZoom(e,e.Vot+hy);var hA=hz-e.Vot;var hB=Math.pow(2,hA);return hB};hx.incrementZoom=function(e,L){var hy=e+L;return hy};hx.combineTileZoomAndStretch=function(e,L){return e+Math.log(L)/Math.LN2};global.tab.ZoomComputer=hx;ss.initClass(b,a,{});ss.initClass(c,a,{});ss.initClass(d,a,{$6:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},$7:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},$0:function(e){this.$3=new Date;this.$4=e.pageX;this.$5=e.pageY},$1:function(e){this.$2(e)},$2:function(e){var L=new Date-this.$3;var hy=Math.abs(e.pageX-this.$4);var hz=Math.abs(e.pageY-this.$5);if(L<=600&&hy<=10&&hz<=10&&ss.isValue(this.$1$1)){this.$1$1(e)}}});ss.initClass(f,a,{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(e){this.$2=window.setTimeout(ss.mkdel(this,this.$0),800);return this},acceptDrop:function(e){var L=$.Deferred();L.resolve(false);return L},getDropCursor:function(e){return spiff.CustomCursor.noOp},getDropTarget:function(e){return this},dragExit:function(e){window.clearTimeout(this.$2)},$0:function(){this.$3.set_activeItem(this.$1)}},null,[spiff.IDropTarget]);ss.initClass(g,a,{$2:function(){return this.$b},$1:function(){return this.$a},$5:function(){return this.$e},$9:function(){return this.$i},$4:function(){return this.$d},$7:function(){return this.$g},$8:function(){return this.$h},$3:function(){return this.$c},$6:function(){return this.$f}},spiff.Template,[ss.IDisposable]);ss.initClass(h,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(i,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(j,a,{get_root:function(){return this.get_domRoot()},get_tabs:function(){return this.$2},get_contentArea:function(){return this.$1},createTabLabel:function(e){return new spiff.Template($("<span class='tabTabLabel'/>").text(e))}},spiff.Template,[ss.IDisposable,spiff.ITabControlTemplate]);ss.initInterface(dv,a,{get_template:null,get_compositeSearchWidget:null});ss.initClass(k,a,{get_template:function(){return this},get_compositeSearchWidget:function(){return this.$1},dispose:function(){spiff.Template.prototype.dispose.call(this);this.$1.dispose()}},spiff.Template,[ss.IDisposable,dv]);ss.initClass(l,a,{$7:function(){return this.$c},$4:function(){return this.$9},$5:function(){if(!this.$4()){}return this.$a},$6:function(){return(this.$9?this.$b:null)},$3:function(e,L,hy){this.$a=e;this.$8=L;this.$9=true;this.$b=hy},$0:function(){this.$9=false;this.$b=null},$2:function(e,L){return this.$1(e,L)&&this.$9},$1:function(e,L){return this.$a===e&&this.$8===L}});ss.initClass(bb,a,{get_renderOffset:function(){return this.$6},set_renderOffset:function(e){this.$6=e;this.get_currentContext().translate(-this.$6.x,-this.$6.y)},get_currentCanvas:function(){return(this.$5?this.$2:this.$0)},get_currentContext:function(){return(this.$5?this.$3:this.$1)},get_visibleRect:function(){var e=bb.$4(this.get_currentCanvas(),this.get_currentCanvas().width);var L=bb.$3(this.get_currentCanvas(),this.get_currentCanvas().height);return{x:this.$6.x,y:this.$6.y,w:e,h:L}},clear:function(){var e=this.get_visibleRect();this.get_currentContext().clearRect(e.x,e.y,e.w,e.h)},reset:function(){this.$5=false;this.$3=null;this.$2=null;this.get_currentContext().reset();this.$6={x:0,y:0};this.clearPrevTextRunInfo()},setRenderOffsetNoTranslate:function(e){this.$6=e},isRectVisible:function(e){return tab.RectXYUtil.intersectsWith(e,this.get_visibleRect())},beginOffScreenRender:function(){if(this.$5){return}if(ss.isNullOrUndefined(this.$2)){this.$2=document.createElement('canvas');var e={w:this.$0.width,h:this.$0.height};var L={w:bb.$4(this.$0,0),h:bb.$3(this.$0,0)};bd.densifyCanvasUsingSize(this.$2,e,L)}if(ss.isNullOrUndefined(this.$3)){this.$3=bb.getRenderContext(this.$2,'transparent')}else{this.$3.reset()}var hy=this.$0.width/bb.$4(this.$0,this.$0.width);if(hy!==1){bd.scaleCanvasDrawing(this.$3,hy)}this.$3.setTransform(this.$1.get_transformation());this.$5=true;this.clear()},endOffScreenRender:function(e){if(!this.$5){return}this.$5=false;this.$1.save();this.$1.set_alpha(e);this.$1.resetTransform();this.$1.drawImage1(this.$2,0,0);this.$1.restore()},renderFilledRectangle:function(e,L,hy,hz,hA){var hB=hy/2;var hC=hz/2;var hD=this.get_currentContext();hD.set_shapeFillStyle(hA);hD.fillRect(e-hB,L-hC,hy,hz)},renderFilledWedge:function(e,L,hy,hz,hA,hB,hC){var hD=bb.toCanvasAngle(hz);var hE=bb.toCanvasAngle(hA);if(Math.abs(hE-hD)<bb.angleEpsilon){return}if(ss.isNullOrUndefined(hC)){hC=false}var hF=this.get_currentContext();hF.beginPath();hF.moveTo(e,L);hD=bb.$6(hD);hE=bb.$6(hE);hF.arc(e,L,hy,hD,hE,hC);hF.closePath();hF.set_shapeFillStyle(hB);hF.fill()},renderLine:function(e,L,hy,hz){var hA=this.get_currentContext();hA.set_linePattern('solid');hA.set_lineWidth(L);hA.set_strokeStyle(hy);bb.strokePath(hA,e,false,hz)},renderLineLoop:function(e,L,hy){var hz=this.get_currentContext();hz.set_linePattern('solid');hz.set_lineWidth(L);hz.set_strokeStyle(hy);bb.strokePath(hz,e,true,false)},renderLineEdge:function(e,L,hy,hz,hA,hB,hC,hD){var hE=this.get_currentContext();hE.set_linePattern('solid');hE.set_lineWidth(hD);hE.set_strokeStyle(hC);var hF=Math.atan2(hz-hy,L-e);var hG=Math.cos(hF);var hH=Math.sin(hF);hA/=2;hB/=2;var hI=hA*hH;var hJ=hB*hH;var hK=hA*hG;var hL=hB*hG;hE.beginPath();hE.moveTo(e+hI,hy-hK);hE.lineTo(L+hJ,hz-hL);hE.lineTo(L-hJ,hz+hL);hE.lineTo(e-hI,hy+hK);hE.closePath();hE.stroke()},renderFilledLineEdge:function(e,L,hy,hz,hA,hB,hC,hD){var hE;var hF=this.get_currentContext();if(ss.referenceEquals(hC,hD)){hE=hC}else{var hG=hF.createLinearGradient(e,hy,L,hz);hG.addColorStop(0,hC);hG.addColorStop(1,hD);hE=hG}if(hA===hB){hF.set_lineWidth(hA);hF.set_linePattern('solid');hF.set_strokeStyle(hE);hF.beginPath();hF.moveTo(e,hy);hF.lineTo(L,hz);hF.closePath();hF.stroke()}else{var hH=Math.atan2(hz-hy,L-e);var hI=Math.cos(hH);var hJ=Math.sin(hH);hA/=2;hB/=2;var hK=hA*hJ;var hL=hB*hJ;var hM=hA*hI;var hN=hB*hI;hF.beginPath();hF.moveTo(e+hK,hy-hM);hF.lineTo(L+hL,hz-hN);hF.lineTo(L-hL,hz+hN);hF.lineTo(e-hK,hy+hM);hF.closePath();hF.set_shapeFillStyle(hE);hF.fill()}},renderPolygon:function(e,L,hy){var hz=this.get_currentContext();hz.set_lineWidth(L);hz.set_strokeStyle(hy);bb.strokePath(hz,e,true,true)},renderFilledPolygon:function(e,L){var hy=this.get_currentContext();hy.set_shapeFillStyle(L);bb.fillPath(hy,e,true)},setupContextForTextRendering:function(e){var L='black';if(ss.isValue(e.get_textStyleColumns())&&ss.keyExists(e.get_textStyleColumns(),'text_style_color')){L=e.$9(0,-1,'colorOverrideNone')}this.get_currentContext().set_shapeFillStyle(L);var hy=this.createStyleSettersAndSetDominantStyle(e.get_textStyleColumns());return hy},createStyleSettersAndSetDominantStyle:function(e){if(ss.isNullOrUndefined(e)){return function(hG){}}var L=[];var hy=_.keys(e);for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];var hB=e[hA];var hC=true;var hD=hB[0];for(var hE=1;hE<hB.length&&hC;++hE){if(!ss.referenceEquals(hD,hB[hE])){hC=false}}if(hC){this.setTextStyleProprty(hA,hD)}else{L.push(hA)}}ss.remove(L,'text_style_color');var hF=ss.mkdel(this,function(hG){for(var hH=0;hH<L.length;hH++){var hI=L[hH];var hJ=e[hI];this.setTextStyleProprty(hI,hJ[hG])}});return hF},setTextStyleProprty:function(e,L){switch(e){case'font':{this.get_currentContext().set_font(L);break}case'text_orientation':{this.get_currentContext().set_textAngle(L);break}case'text_alignment':{this.get_currentContext().set_textAlign(L);break}case'alpha':case'text_style_color':{break}case'text_decoration':{this.get_currentContext().set_shouldUnderlineText(!!L);break}default:{break}}},renderText:function(e,L,hy,hz,hA,hB){if(hB&&ss.isValue(this.$4)&&this.$4.$0(L,hy)){var hC=this.$4.$1(L,hy);L=hC.x;hy=hC.y}else{this.clearPrevTextRunInfo()}if(ss.isValue(hA)){this.get_currentContext().set_textFillStyle(hA)}if(hz>0){if(!hB){e=ss.trimEndString(e)}this.get_currentContext().fillText2(e,L,hy,hz)}else{this.get_currentContext().fillText1(e,L,hy)}if(hB){var hD=this.get_currentContext().measureText(e).width;var hE=this.get_currentContext().get_textAlign()==='end';var hF=this.get_currentContext().get_textAngle();var hG;if(hF>1){hG='down'}else if(hF<-1){hG='up'}else{hG='horizontal'}this.$4=new x(L,hy,hD,hE,hG)}else{this.clearPrevTextRunInfo()}},clearPrevTextRunInfo:function(){this.$4=null},strokeCurrentPath:function(e,L){var hy=this.get_currentContext();hy.set_lineWidth(e);hy.set_strokeStyle(L);hy.stroke()},fillCurrentPath:function(e){var L=this.get_currentContext();L.set_shapeFillStyle(e);L.fill()},clipRect:function(e,L,hy,hz,hA){var hB=100000;switch(e){case 0:{return}case 1:{hy=-100000;hA=200000;break}case 2:{L=-100000;hz=200000;break}}var hC=bb.roundStartAndExtent(hy,hA,0);var hD=bb.roundStartAndExtent(L,hz,0);this.get_currentContext().setClip({x:ss.Int32.trunc(hD.item1),y:ss.Int32.trunc(hC.item1),w:ss.Int32.trunc(hD.item2),h:ss.Int32.trunc(hC.item2)})}});ss.initClass(en,a,{$n:function(e,L,hy){var hz=e.get_hasSelection();var hA=e.get_hasBrushing();var hB='colorOverrideNone';var hC=e.$d(L);var hD=hC.firstMark;var hE=hC.lastMark;var hF=e.getUserPaneRectByIndex(L);this.get_currentContext().save();switch(hy){case'normalUnderPass':{if(e.get_hasBackground()&&e.get_hasHalos()){if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}{for(var hG=hD;hG<=hE;hG++){if(!e.markNeedsDraw(hG)){continue}if(e.getMarkState(hG)!=='markStateNormal'){continue}var hH=e.getMarkInstanceOffsets(hG);var hI=hH.length;for(var hJ=0;hJ<hI;hJ++){var hK=hH[hJ];if(hK!==0){this.get_currentContext().save();this.get_currentContext().translate(hK,0)}this.$c(e,hG,'normalUnder',hB);if(hK!==0){this.get_currentContext().restore()}}}}if(hz||hA){hB='colorOverrideNone';{for(var hL=hD;hL<=hE;hL++){if(!e.markNeedsDraw(hL)){continue}if(e.getMarkState(hL)!=='markStateHighlighted'){continue}var hM=e.getMarkInstanceOffsets(hL);var hN=hM.length;for(var hO=0;hO<hN;hO++){var hP=hM[hO];if(hP!==0){this.get_currentContext().save();this.get_currentContext().translate(hP,0)}this.$c(e,hL,'normalUnder',hB);if(hP!==0){this.get_currentContext().restore()}}}}}}break}case'normalOnPass':{if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}{for(var hQ=hD;hQ<=hE;hQ++){if(!e.markNeedsDraw(hQ)){continue}if(e.getMarkState(hQ)!=='markStateNormal'){continue}var hR=e.getMarkInstanceOffsets(hQ);var hS=hR.length;for(var hT=0;hT<hS;hT++){var hU=hR[hT];if(hU!==0){this.get_currentContext().save();this.get_currentContext().translate(hU,0)}this.$c(e,hQ,'normalOn',hB);if(hU!==0){this.get_currentContext().restore()}}}}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(hz||hA){hB='colorOverrideNone';{for(var hV=hD;hV<=hE;hV++){if(!e.markNeedsDraw(hV)){continue}if(e.getMarkState(hV)!=='markStateHighlighted'){continue}var hW=e.getMarkInstanceOffsets(hV);var hX=hW.length;for(var hY=0;hY<hX;hY++){var hZ=hW[hY];if(hZ!==0){this.get_currentContext().save();this.get_currentContext().translate(hZ,0)}this.$c(e,hV,'normalOn',hB);if(hZ!==0){this.get_currentContext().restore()}}}}}break}case'selectedUnderPass':{if(hz||hA){hB='colorOverrideOpaque';{for(var ia=hD;ia<=hE;ia++){if(!e.markNeedsDraw(ia)){continue}if(e.getMarkState(ia)!=='markStateSelected'){continue}var ib=e.getMarkInstanceOffsets(ia);var ic=ib.length;for(var id=0;id<ic;id++){var ie=ib[id];if(ie!==0){this.get_currentContext().save();this.get_currentContext().translate(ie,0)}this.$c(e,ia,'selectedUnder',hB);if(ie!==0){this.get_currentContext().restore()}}}}}break}case'selectedOnPass':{if(hz||hA){hB='colorOverrideOpaque';{for(var ig=hD;ig<=hE;ig++){if(!e.markNeedsDraw(ig)){continue}if(e.getMarkState(ig)!=='markStateSelected'){continue}var ih=e.getMarkInstanceOffsets(ig);var ii=ih.length;for(var ij=0;ij<ii;ij++){var ik=ih[ij];if(ik!==0){this.get_currentContext().save();this.get_currentContext().translate(ik,0)}this.$c(e,ig,'normalOn',hB);if(ik!==0){this.get_currentContext().restore()}}}}}break}}this.get_currentContext().restore()},$c:function(e,L,hy,hz){if(e.clipCase!==0){this.get_currentContext().save();this.clipRect(e.clipCase,e.getMarkProperty('cell_x',L),e.getMarkProperty('cell_y',L),e.getMarkProperty('clip_width',L),e.getMarkProperty('clip_height',L))}switch(hy){case'normalUnder':case'selectedUnder':case'normalOn':{var hA=(e.hasPixelGeometry?1:e.getMarkProperty('size',L));bb.createMultipolygonPath(this.get_currentContext(),e.hasPixelGeometry,e.getMarkProperty('x',L),e.getMarkProperty('y',L),hA,7,e.getMarkGeometry(e.getMarkProperty('geometry',L)));break}default:{break}}var hB=((hy!=='normalOn')?0:bb.get_multipolyLineSizeOffset());switch(hy){case'normalUnder':{{this.strokeCurrentPath(2-hB,e.getMarkProperty('halo_color',L)[hz])}break}case'selectedUnder':{{this.strokeCurrentPath(2-hB,e.getMarkProperty('selected_halo_color',L)[hz])}break}case'normalOn':{{this.fillCurrentPath(e.getMarkColors(L)[hz])}if(e.getMarkProperty('draw_border',L)){this.strokeCurrentPath(1-hB,e.getMarkProperty('border_color',L)[hz])}break}default:{break}}if(e.clipCase!==0){this.get_currentContext().restore()}},$j:function(e,L,hy){var hz=e.get_hasSelection();var hA=e.get_hasBrushing();var hB='colorOverrideNone';var hC=e.$d(L);var hD=hC.firstMark;var hE=hC.lastMark;var hF=e.getUserPaneRectByIndex(L);var hG=e.get_lineDrawState();this.get_currentContext().save();switch(hy){case'normalUnderPass':{break}case'normalOnPass':{if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}var hH=hG.get_lineAttributes();for(var hI=0;hI<hH.length;hI++){var hJ=hH[hI];if(hJ.get_lineState()!=='lineStateNormal'){continue}var hK=hJ.worldOffsets;var hL=hK.length;for(var hM=0;hM<hL;hM++){var hN=hK[hM];if(hN!==0){this.get_currentContext().save();this.get_currentContext().translate(hN,0)}{for(var hO=0;hO<hJ.marksNeedingDraw.length;hO++){var hP=hJ.marksNeedingDraw[hO];this.$8(e,hP,'edgeOn',hB,hJ.startIndex)}}if(hN!==0){this.get_currentContext().restore()}}}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(hz||hA){hB='colorOverrideNone';var hQ=hG.get_lineAttributes();for(var hR=0;hR<hQ.length;hR++){var hS=hQ[hR];if(hS.get_lineState()!=='lineStateHighlighted'){continue}var hT=hS.worldOffsets;var hU=hT.length;for(var hV=0;hV<hU;hV++){var hW=hT[hV];if(hW!==0){this.get_currentContext().save();this.get_currentContext().translate(hW,0)}{for(var hX=0;hX<hS.marksNeedingDraw.length;hX++){var hY=hS.marksNeedingDraw[hX];this.$8(e,hY,'edgeOn',hB,hS.startIndex)}}if(hW!==0){this.get_currentContext().restore()}}}var hZ=hG.get_lineAttributes();for(var ia=0;ia<hZ.length;ia++){var ib=hZ[ia];if(ib.get_lineState()!=='lineStateHighlighted'){continue}var ic=ib.worldOffsets;var id=ic.length;for(var ie=0;ie<id;ie++){var ig=ic[ie];if(ig!==0){this.get_currentContext().save();this.get_currentContext().translate(ig,0)}if(!ib.get_allHighlighted()){{for(var ih=0;ih<ib.marksNeedingDraw.length;ih++){var ii=ib.marksNeedingDraw[ih];if(e.getMarkState(ii)==='markStateHighlighted'){this.$8(e,ii,'highlightedUnder1',hB,ib.startIndex);this.$8(e,ii,'highlightedUnder',hB,ib.startIndex)}}}{for(var ij=0;ij<ib.marksNeedingDraw.length;ij++){var ik=ib.marksNeedingDraw[ij];if(e.getMarkState(ik)==='markStateHighlighted'){this.$8(e,ik,'highlightedOn1',hB,ib.startIndex);this.$8(e,ik,'highlightedOn',hB,ib.startIndex)}}}}if(ig!==0){this.get_currentContext().restore()}}}}break}case'selectedUnderPass':{break}case'selectedOnPass':{if(hz||hA){hB='colorOverrideOpaque';var il=hG.get_lineAttributes();for(var im=0;im<il.length;im++){var io=il[im];if(io.get_lineState()!=='lineStateSelected'){continue}var ip=io.worldOffsets;var iq=ip.length;for(var ir=0;ir<iq;ir++){var it=ip[ir];if(it!==0){this.get_currentContext().save();this.get_currentContext().translate(it,0)}{for(var iu=0;iu<io.marksNeedingDraw.length;iu++){var iv=io.marksNeedingDraw[iu];this.$8(e,iv,'edgeOn',hB,io.startIndex)}}if(it!==0){this.get_currentContext().restore()}}}var iw=hG.get_lineAttributes();for(var ix=0;ix<iw.length;ix++){var iy=iw[ix];if(iy.get_lineState()!=='lineStateSelected'){continue}var iz=iy.worldOffsets;var iA=iz.length;for(var iB=0;iB<iA;iB++){var iC=iz[iB];if(iC!==0){this.get_currentContext().save();this.get_currentContext().translate(iC,0)}if(!iy.get_allHighlighted()){{for(var iD=0;iD<iy.marksNeedingDraw.length;iD++){var iE=iy.marksNeedingDraw[iD];if(e.getMarkState(iE)==='markStateHighlighted'){this.$8(e,iE,'highlightedUnder1',hB,iy.startIndex);this.$8(e,iE,'highlightedUnder',hB,iy.startIndex)}}}{for(var iF=0;iF<iy.marksNeedingDraw.length;iF++){var iG=iy.marksNeedingDraw[iF];if(e.getMarkState(iG)==='markStateHighlighted'){this.$8(e,iG,'highlightedOn1',hB,iy.startIndex);this.$8(e,iG,'highlightedOn',hB,iy.startIndex)}}}}if(iC!==0){this.get_currentContext().restore()}}}var iH=hG.get_lineAttributes();for(var iI=0;iI<iH.length;iI++){var iJ=iH[iI];if(iJ.get_lineState()!=='lineStateSelected'){continue}var iK=iJ.worldOffsets;var iL=iK.length;for(var iM=0;iM<iL;iM++){var iN=iK[iM];if(iN!==0){this.get_currentContext().save();this.get_currentContext().translate(iN,0)}{for(var iO=0;iO<iJ.marksNeedingDraw.length;iO++){var iP=iJ.marksNeedingDraw[iO];if(e.getMarkState(iP)==='markStateSelected'){this.$8(e,iP,'selectedUnder1',hB,iJ.startIndex);this.$8(e,iP,'selectedUnder',hB,iJ.startIndex)}}}{for(var iQ=0;iQ<iJ.marksNeedingDraw.length;iQ++){var iR=iJ.marksNeedingDraw[iQ];if(e.getMarkState(iR)==='markStateSelected'){this.$8(e,iR,'selectedOn1',hB,iJ.startIndex);this.$8(e,iR,'selectedOn',hB,iJ.startIndex)}}}if(iN!==0){this.get_currentContext().restore()}}}}break}}this.get_currentContext().restore()},$8:function(e,L,hy,hz,hA){var hB=e.getLeft(L);var hC=e.getRight(L);var hD=e.clipCase;if(hD!==0){this.get_currentContext().save();this.clipRect(hD,e.getMarkProperty('cell_x',L),e.getMarkProperty('cell_y',L),e.getMarkProperty('clip_width',L),e.getMarkProperty('clip_height',L))}var hE=e.drawBorder;switch(hy){case'edgeOn':{if(e.getRight(L)!==-1){var hF=[Math.round(e.getMarkProperty('x1',L)),e.getMarkProperty('y1',L),Math.round(e.getMarkProperty('x1',hC)),e.getMarkProperty('y1',hC),Math.round(e.getMarkProperty('x_prev',hC)),e.getMarkProperty('y_prev',hC),Math.round(e.getMarkProperty('x_next',L)),e.getMarkProperty('y_next',L)];this.get_currentContext().set_lineJoin('miter');this.renderFilledPolygon(hF,e.getMarkColors(hA)[hz])}if(hE&&e.getRight(L)!==-1){var hG=[e.getMarkProperty('x1',L),e.getMarkProperty('y1',L),e.getMarkProperty('x1',hC),e.getMarkProperty('y1',hC)];this.renderLine(hG,1,e.getMarkProperty('border_color',L)[hz],true)}if(hE&&e.getRight(L)!==-1){var hH=[e.getMarkProperty('x_next',L),e.getMarkProperty('y_next',L),e.getMarkProperty('x_prev',hC),e.getMarkProperty('y_prev',hC)];this.renderLine(hH,1,e.getMarkProperty('border_color',L)[hz],true)}if(hE&&(e.getLeft(L)!==-1&&e.getRight(L)!==-1)){var hI=[e.getMarkProperty('x_prev',L),e.getMarkProperty('y_prev',L),e.getMarkProperty('x_next',L),e.getMarkProperty('y_next',L)];this.renderLine(hI,1,e.getMarkProperty('border_color',L)[hz],true)}if(hE&&e.getLeft(L)===-1){var hJ=[e.getMarkProperty('x1',L),e.getMarkProperty('y1',L),e.getMarkProperty('x_next',L),e.getMarkProperty('y_next',L)];this.renderLine(hJ,1,e.getMarkProperty('border_color',L)[hz],true)}if(hE&&e.getRight(L)===-1){var hK=[e.getMarkProperty('x1',L),e.getMarkProperty('y1',L),e.getMarkProperty('x_prev',L),e.getMarkProperty('y_prev',L)];this.renderLine(hK,1,e.getMarkProperty('border_color',L)[hz],true)}if(!hE&&e.getRight(L)!==-1){var hL=[e.getMarkProperty('x1',L),e.getMarkProperty('y1',L),e.getMarkProperty('x1',hC),e.getMarkProperty('y1',hC)];this.renderLine(hL,1,e.getMarkColors(hA)[hz],true)}if(!hE&&e.getRight(L)!==-1){var hM=[e.getMarkProperty('x_next',L),e.getMarkProperty('y_next',L),e.getMarkProperty('x_prev',hC),e.getMarkProperty('y_prev',hC)];this.renderLine(hM,1,e.getMarkColors(hA)[hz],true)}if(!hE&&(e.getLeft(L)!==-1&&e.getRight(L)!==-1)){var hN=[e.getMarkProperty('x_prev',L),e.getMarkProperty('y_prev',L),e.getMarkProperty('x_next',L),e.getMarkProperty('y_next',L)];this.renderLine(hN,1,e.getMarkColors(hA)[hz],true)}if(!hE&&e.getLeft(L)===-1){var hO=[e.getMarkProperty('x1',L),e.getMarkProperty('y1',L),e.getMarkProperty('x_next',L),e.getMarkProperty('y_next',L)];this.renderLine(hO,1,e.getMarkColors(hA)[hz],true)}if(!hE&&e.getRight(L)===-1){var hP=[e.getMarkProperty('x1',L),e.getMarkProperty('y1',L),e.getMarkProperty('x_prev',L),e.getMarkProperty('y_prev',L)];this.renderLine(hP,1,e.getMarkColors(hA)[hz],true)}break}case'selectedOn':{{bb.renderFilledCircle(this.get_currentContext(),0+e.getMarkProperty('x1',L),0+e.getMarkProperty('y1',L),5,e.getMarkColors(L)[hz])}break}case'selectedUnder':{{bb.renderCircle(this.get_currentContext(),0+e.getMarkProperty('x1',L),0+e.getMarkProperty('y1',L),5,e.getMarkProperty('selected_halo_color',L)[hz],4)}break}case'selectedOn1':{{bb.renderFilledCircle(this.get_currentContext(),0+e.getMarkProperty('x',L),0+e.getMarkProperty('y',L),5,e.getMarkColors(L)[hz])}break}case'selectedUnder1':{{bb.renderCircle(this.get_currentContext(),0+e.getMarkProperty('x',L),0+e.getMarkProperty('y',L),5,e.getMarkProperty('selected_halo_color',L)[hz],4)}break}case'highlightedOn':{{bb.renderFilledCircle(this.get_currentContext(),0+e.getMarkProperty('x1',L),0+e.getMarkProperty('y1',L),5,e.getMarkColors(L)[hz])}break}case'highlightedUnder':{{bb.renderCircle(this.get_currentContext(),0+e.getMarkProperty('x1',L),0+e.getMarkProperty('y1',L),5,e.getMarkProperty('selected_multi_prim_halo_color',L)[hz],4)}break}case'highlightedOn1':{{bb.renderFilledCircle(this.get_currentContext(),0+e.getMarkProperty('x',L),0+e.getMarkProperty('y',L),5,e.getMarkColors(L)[hz])}break}case'highlightedUnder1':{{bb.renderCircle(this.get_currentContext(),0+e.getMarkProperty('x',L),0+e.getMarkProperty('y',L),5,e.getMarkProperty('selected_multi_prim_halo_color',L)[hz],4)}break}default:{break}}if(hD!==0){this.get_currentContext().restore()}},$m:function(e,L,hy){var hz=e.get_hasSelection();var hA=e.get_hasBrushing();var hB='colorOverrideNone';var hC=e.$d(L);var hD=hC.firstMark;var hE=hC.lastMark;var hF=e.getUserPaneRectByIndex(L);this.get_currentContext().save();var hG=this.setupContextForTextRendering(e);switch(hy){case'normalUnderPass':{if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}{var hH=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var hI=hD;hI<=hE;hI++){if(!e.markHasLabel(hI)||!e.markLabelNeedsDraw(hI,hH)){continue}if(e.getMarkLabelState(hI)!=='markStateNormal'){continue}if(e.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,e.getMarkProperty('cell_x',hI),e.getMarkProperty('cell_y',hI),e.getMarkProperty('clip_width',hI),e.getMarkProperty('clip_height',hI))}var hJ=e.getMarkInstanceOffsets(hI);var hK=hJ.length;for(var hL=0;hL<hK;hL++){var hM=hJ[hL];if(hM!==0){this.get_currentContext().save();this.get_currentContext().translate(hM,0)}this.$b(e,hI,'normalUnder',hB);if(hM!==0){this.get_currentContext().restore()}}if(e.get_clipLabelToCell()){this.get_currentContext().restore()}}}hB='colorOverrideNone';{var hN=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var hO=hD;hO<=hE;hO++){if(!e.markHasLabel(hO)||!e.markLabelNeedsDraw(hO,hN)){continue}if(e.getMarkLabelState(hO)!=='markStateHighlighted'){continue}if(e.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,e.getMarkProperty('cell_x',hO),e.getMarkProperty('cell_y',hO),e.getMarkProperty('clip_width',hO),e.getMarkProperty('clip_height',hO))}var hP=e.getMarkInstanceOffsets(hO);var hQ=hP.length;for(var hR=0;hR<hQ;hR++){var hS=hP[hR];if(hS!==0){this.get_currentContext().save();this.get_currentContext().translate(hS,0)}this.$b(e,hO,'normalUnder',hB);if(hS!==0){this.get_currentContext().restore()}}if(e.get_clipLabelToCell()){this.get_currentContext().restore()}}}hB='colorOverrideNone';{var hT=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var hU=hD;hU<=hE;hU++){if(!e.markHasLabel(hU)||!e.markLabelNeedsDraw(hU,hT)){continue}if(e.getMarkLabelState(hU)!=='markStateSelected'){continue}if(e.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,e.getMarkProperty('cell_x',hU),e.getMarkProperty('cell_y',hU),e.getMarkProperty('clip_width',hU),e.getMarkProperty('clip_height',hU))}var hV=e.getMarkInstanceOffsets(hU);var hW=hV.length;for(var hX=0;hX<hW;hX++){var hY=hV[hX];if(hY!==0){this.get_currentContext().save();this.get_currentContext().translate(hY,0)}this.$b(e,hU,'normalUnder',hB);if(hY!==0){this.get_currentContext().restore()}}if(e.get_clipLabelToCell()){this.get_currentContext().restore()}}}break}case'normalOnPass':{if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}{var hZ=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var ia=hD;ia<=hE;ia++){if(!e.markHasLabel(ia)||!e.markLabelNeedsDraw(ia,hZ)){continue}if(e.getMarkLabelState(ia)!=='markStateNormal'){continue}if(e.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,e.getMarkProperty('cell_x',ia),e.getMarkProperty('cell_y',ia),e.getMarkProperty('clip_width',ia),e.getMarkProperty('clip_height',ia))}var ib=e.getMarkInstanceOffsets(ia);var ic=ib.length;for(var id=0;id<ic;id++){var ie=ib[id];if(ie!==0){this.get_currentContext().save();this.get_currentContext().translate(ie,0)}var ig=this.get_currentContext().get_textAlign()==='end';var ih=e.getMarkLabelProperty('text_run_offset',ia);var ii=e.getMarkLabelProperty('text_run_count',ia);var ij=ii>1;for(var ik=0;ik<ii;ik++){var il=ik+ih;if(ig){il=ih+ii-ik-1}this.$i(e,ia,'normalOn',hB,il,ij,hG)}this.clearPrevTextRunInfo();if(ie!==0){this.get_currentContext().restore()}}if(e.get_clipLabelToCell()){this.get_currentContext().restore()}}}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(hz||hA){hB='colorOverrideNone';{var im=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var io=hD;io<=hE;io++){if(!e.markHasLabel(io)||!e.markLabelNeedsDraw(io,im)){continue}if(e.getMarkLabelState(io)!=='markStateHighlighted'){continue}if(e.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,e.getMarkProperty('cell_x',io),e.getMarkProperty('cell_y',io),e.getMarkProperty('clip_width',io),e.getMarkProperty('clip_height',io))}var ip=e.getMarkInstanceOffsets(io);var iq=ip.length;for(var ir=0;ir<iq;ir++){var it=ip[ir];if(it!==0){this.get_currentContext().save();this.get_currentContext().translate(it,0)}var iu=this.get_currentContext().get_textAlign()==='end';var iv=e.getMarkLabelProperty('text_run_offset',io);var iw=e.getMarkLabelProperty('text_run_count',io);var ix=iw>1;for(var iy=0;iy<iw;iy++){var iz=iy+iv;if(iu){iz=iv+iw-iy-1}this.$i(e,io,'highlightedOn',hB,iz,ix,hG)}this.clearPrevTextRunInfo();if(it!==0){this.get_currentContext().restore()}}if(e.get_clipLabelToCell()){this.get_currentContext().restore()}}}}break}case'selectedUnderPass':{if(hz||hA){hB='colorOverrideOpaque';{var iA=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var iB=hD;iB<=hE;iB++){if(!e.markHasLabel(iB)||!e.markLabelNeedsDraw(iB,iA)){continue}if(e.getMarkLabelState(iB)!=='markStateSelected'){continue}if(e.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,e.getMarkProperty('cell_x',iB),e.getMarkProperty('cell_y',iB),e.getMarkProperty('clip_width',iB),e.getMarkProperty('clip_height',iB))}var iC=e.getMarkInstanceOffsets(iB);var iD=iC.length;for(var iE=0;iE<iD;iE++){var iF=iC[iE];if(iF!==0){this.get_currentContext().save();this.get_currentContext().translate(iF,0)}this.$b(e,iB,'selectedUnder',hB);if(iF!==0){this.get_currentContext().restore()}}if(e.get_clipLabelToCell()){this.get_currentContext().restore()}}}}break}case'selectedOnPass':{if(hz||hA){hB='colorOverrideOpaque';{var iG=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var iH=hD;iH<=hE;iH++){if(!e.markHasLabel(iH)||!e.markLabelNeedsDraw(iH,iG)){continue}if(e.getMarkLabelState(iH)!=='markStateSelected'){continue}if(e.get_clipLabelToCell()){this.get_currentContext().save();this.clipRect(3,e.getMarkProperty('cell_x',iH),e.getMarkProperty('cell_y',iH),e.getMarkProperty('clip_width',iH),e.getMarkProperty('clip_height',iH))}var iI=e.getMarkInstanceOffsets(iH);var iJ=iI.length;for(var iK=0;iK<iJ;iK++){var iL=iI[iK];if(iL!==0){this.get_currentContext().save();this.get_currentContext().translate(iL,0)}var iM=this.get_currentContext().get_textAlign()==='end';var iN=e.getMarkLabelProperty('text_run_offset',iH);var iO=e.getMarkLabelProperty('text_run_count',iH);var iP=iO>1;for(var iQ=0;iQ<iO;iQ++){var iR=iQ+iN;if(iM){iR=iN+iO-iQ-1}this.$i(e,iH,'normalOn',hB,iR,iP,hG)}this.clearPrevTextRunInfo();if(iL!==0){this.get_currentContext().restore()}}if(e.get_clipLabelToCell()){this.get_currentContext().restore()}}}}break}}this.get_currentContext().restore()},$b:function(e,L,hy,hz){if(e.clipCase!==0){this.get_currentContext().save();this.clipRect(e.clipCase,e.getMarkProperty('cell_x',L),e.getMarkProperty('cell_y',L),e.getMarkProperty('clip_width',L),e.getMarkProperty('clip_height',L))}switch(hy){case'normalUnder':{{if(e.get_hasBackground()&&e.get_hasHalos()){var hA=e.getMarkLabelProperty('x',L);var hB=e.getMarkLabelProperty('y',L);var hC=e.getMarkLabelProperty('width',L);var hD=-e.getMarkLabelProperty('height',L);if(hD<0){hB+=hD;hD=Math.abs(hD)}var hE=0;var hF=0;var hG;if(e.isMarkImpliedSelected(L)){hG=e.getMarkProperty('selected_halo_color',L)['colorOverrideOpaque']}else{hG=e.getMarkLabelProperty('halo_color',L)[hz]}bb.renderFilledBar(this.get_currentContext(),hA+hE,hB+hF,hC,hD,hG,0,0,false)}}{if(e.isMarkDebug(L)){var hH=e.getMarkLabelProperty('x',L);var hI=e.getMarkLabelProperty('y',L);var hJ=e.getMarkLabelProperty('width',L);var hK=-e.getMarkLabelProperty('height',L);if(hK<0){hI+=hK;hK=Math.abs(hK)}var hL=0;var hM=0;var hN;if(e.isMarkImpliedSelected(L)){hN=e.getMarkProperty('selected_halo_color',L)['colorOverrideOpaque']}else{hN=e.getMarkProperty('halo_color',L)[hz]}bb.renderFilledBar(this.get_currentContext(),hH+hL,hI+hM,hJ,hK,hN,0,0,false)}}break}case'normalOn':{break}case'highlightedUnder':{{if(e.get_hasBackground()&&e.get_hasHalos()){var hO=e.getMarkLabelProperty('x',L);var hP=e.getMarkLabelProperty('y',L);var hQ=e.getMarkLabelProperty('width',L);var hR=-e.getMarkLabelProperty('height',L);if(hR<0){hP+=hR;hR=Math.abs(hR)}var hS=0;var hT=0;var hU;if(e.isMarkImpliedSelected(L)){hU=e.getMarkProperty('selected_halo_color',L)['colorOverrideOpaque']}else{hU=e.getMarkLabelProperty('halo_color',L)[hz]}bb.renderFilledBar(this.get_currentContext(),hO+hS,hP+hT,hQ,hR,hU,0,0,false)}}{if(e.isMarkDebug(L)){var hV=e.getMarkLabelProperty('x',L);var hW=e.getMarkLabelProperty('y',L);var hX=e.getMarkLabelProperty('width',L);var hY=-e.getMarkLabelProperty('height',L);if(hY<0){hW+=hY;hY=Math.abs(hY)}var hZ=0;var ia=0;var ib;if(e.isMarkImpliedSelected(L)){ib=e.getMarkProperty('selected_halo_color',L)['colorOverrideOpaque']}else{ib=e.getMarkProperty('halo_color',L)[hz]}bb.renderFilledBar(this.get_currentContext(),hV+hZ,hW+ia,hX,hY,ib,0,0,false)}}break}case'highlightedOn':{break}case'selectedUnder':{break}default:{break}}if(e.clipCase!==0){this.get_currentContext().restore()}},$i:function(e,L,hy,hz,hA,hB,hC){if(e.clipCase!==0){this.get_currentContext().save();this.clipRect(e.clipCase,e.getMarkProperty('cell_x',L),e.getMarkProperty('cell_y',L),e.getMarkProperty('clip_width',L),e.getMarkProperty('clip_height',L))}switch(hy){case'normalUnder':{break}case'normalOn':{var hD=e.getTextRunProperty('text_style_id',hA);hC(hD);var hE=e.$9(hD,L,hz);var hF=e.getTextRunProperty('text_run',hA);var hG=e.getMarkLabelProperty('x',L)+e.getTextRunProperty('text_run_x',hA);var hH=e.getMarkLabelProperty('y',L)+e.getTextRunProperty('text_run_y',hA);var hI=(this.get_currentContext().get_isTextAngleHorizontal()?e.getMarkLabelProperty('width',L):e.getMarkLabelProperty('height',L));this.renderText(hF,hG,hH,hI,hE,hB);break}case'highlightedUnder':{break}case'highlightedOn':{var hJ=e.getTextRunProperty('text_style_id',hA);hC(hJ);var hK=e.$9(hJ,L,hz);var hL=e.getTextRunProperty('text_run',hA);var hM=e.getMarkLabelProperty('x',L)+e.getTextRunProperty('text_run_x',hA);var hN=e.getMarkLabelProperty('y',L)+e.getTextRunProperty('text_run_y',hA);var hO=(this.get_currentContext().get_isTextAngleHorizontal()?e.getMarkLabelProperty('width',L):e.getMarkLabelProperty('height',L));this.renderText(hL,hM,hN,hO,hK,hB);break}case'selectedUnder':{break}default:{break}}if(e.clipCase!==0){this.get_currentContext().restore()}},$o:function(e,L,hy){var hz=e.get_hasSelection();var hA=e.get_hasBrushing();var hB='colorOverrideNone';var hC=e.$d(L);var hD=hC.firstMark;var hE=hC.lastMark;var hF=e.getUserPaneRectByIndex(L);var hG=e.get_lineDrawState();this.get_currentContext().save();switch(hy){case'normalUnderPass':{if(e.get_hasBackground()&&e.get_hasHalos()){if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}var hH=hG.get_lineAttributes();for(var hI=0;hI<hH.length;hI++){var hJ=hH[hI];var hK=hJ.worldOffsets;var hL=hK.length;for(var hM=0;hM<hL;hM++){var hN=hK[hM];if(hN!==0){this.get_currentContext().save();this.get_currentContext().translate(hN,0)}{for(var hO=0;hO<hJ.marksNeedingDraw.length;hO++){var hP=hJ.marksNeedingDraw[hO];this.$d(e,hP,'normalUnder',hB)}}if(hN!==0){this.get_currentContext().restore()}}}}break}case'normalOnPass':{if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}var hQ=hG.get_lineAttributes();for(var hR=0;hR<hQ.length;hR++){var hS=hQ[hR];if(hS.get_lineState()!=='lineStateNormal'){continue}var hT=hS.worldOffsets;var hU=hT.length;for(var hV=0;hV<hU;hV++){var hW=hT[hV];if(hW!==0){this.get_currentContext().save();this.get_currentContext().translate(hW,0)}{for(var hX=0;hX<hS.marksNeedingDraw.length;hX++){var hY=hS.marksNeedingDraw[hX];this.$d(e,hY,'normalOn',hB)}}if(hW!==0){this.get_currentContext().restore()}}}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(hz||hA){var hZ=hG.get_lineAttributes();for(var ia=0;ia<hZ.length;ia++){var ib=hZ[ia];if(ib.get_lineState()!=='lineStateHighlighted'){continue}var ic=ib.worldOffsets;var id=ic.length;for(var ie=0;ie<id;ie++){var ig=ic[ie];if(ig!==0){this.get_currentContext().save();this.get_currentContext().translate(ig,0)}hB='colorOverrideFog';{for(var ih=0;ih<ib.marksNeedingDraw.length;ih++){var ii=ib.marksNeedingDraw[ih];if(e.getMarkState(ii)!=='markStateNormal'){continue}this.$d(e,ii,'normalOn',hB)}}hB='colorOverrideNone';{for(var ij=0;ij<ib.marksNeedingDraw.length;ij++){var ik=ib.marksNeedingDraw[ij];if(e.getMarkState(ik)!=='markStateHighlighted'){continue}this.$d(e,ik,'highlightedOn',hB)}}if(ig!==0){this.get_currentContext().restore()}}}}break}case'selectedUnderPass':{break}case'selectedOnPass':{if(hz||hA){var il=hG.get_lineAttributes();for(var im=0;im<il.length;im++){var io=il[im];if(io.get_lineState()!=='lineStateSelected'){continue}var ip=io.worldOffsets;var iq=ip.length;for(var ir=0;ir<iq;ir++){var it=ip[ir];if(it!==0){this.get_currentContext().save();this.get_currentContext().translate(it,0)}hB='colorOverrideFog';{for(var iu=0;iu<io.marksNeedingDraw.length;iu++){var iv=io.marksNeedingDraw[iu];if(e.getMarkState(iv)!=='markStateNormal'){continue}this.$d(e,iv,'normalOn',hB)}}hB='colorOverrideNone';{for(var iw=0;iw<io.marksNeedingDraw.length;iw++){var ix=io.marksNeedingDraw[iw];if(e.getMarkState(ix)!=='markStateHighlighted'){continue}this.$d(e,ix,'highlightedOn',hB)}}hB='colorOverrideOpaque';{for(var iy=0;iy<io.marksNeedingDraw.length;iy++){var iz=io.marksNeedingDraw[iy];if(e.getMarkState(iz)!=='markStateSelected'){continue}this.$d(e,iz,'selectedUnder',hB)}}{for(var iA=0;iA<io.marksNeedingDraw.length;iA++){var iB=io.marksNeedingDraw[iA];if(e.getMarkState(iB)!=='markStateSelected'){continue}this.$d(e,iB,'selectedOn',hB)}}if(it!==0){this.get_currentContext().restore()}}}}break}}this.get_currentContext().restore()},$d:function(e,L,hy,hz){if(e.clipCase!==0){this.get_currentContext().save();this.clipRect(e.clipCase,e.getMarkProperty('cell_x',L),e.getMarkProperty('cell_y',L),e.getMarkProperty('clip_width',L),e.getMarkProperty('clip_height',L))}switch(hy){case'normalUnder':{var hA=e.getMarkProperty('size',L)/2;{var hB=e.getMarkProperty('theta',L);var hC=e.getMarkProperty('theta1',L);var hD=hB>hC;var hE=e.getMarkProperty('halo_color',L)[hz];var hF=false;if(Math.abs(hB-hC)>=1){bb.renderCircle(this.get_currentContext(),e.getMarkProperty('x',L),e.getMarkProperty('y',L),hA*2,hE,4)}else{bb.renderWedge(this.get_currentContext(),e.getMarkProperty('x',L),e.getMarkProperty('y',L),hA,hB,hC,hE,4,hD,hF)}}break}case'normalOn':{var hG=e.getMarkProperty('size',L)/2;{var hH=e.getMarkProperty('theta',L);var hI=e.getMarkProperty('theta1',L);if(hH>hI){var hJ=hH;hH=hI;hI=hJ}var hK=e.getMarkProperty('x',L);var hL=e.getMarkProperty('y',L);var hM=e.getMarkColors(L)[hz];if(e.getMarkProperty('alpha',L)>=1){var hN=bb.toCanvasAngle(hH);var hO=bb.toCanvasAngle(hI);if(Math.abs(hO-hN)>=bb.angleEpsilon){this.get_currentContext().beginPath();this.get_currentContext().set_lineCap('butt');this.get_currentContext().set_lineWidth(1.5);this.get_currentContext().set_strokeStyle(hM);this.get_currentContext().moveTo(hK,hL);this.get_currentContext().lineTo(hK+Math.cos(hN)*hG,hL+Math.sin(hN)*hG);this.get_currentContext().stroke()}}if(Math.abs(hH-hI)>=1){bb.renderFilledCircle(this.get_currentContext(),hK,hL,hG*2,hM)}else{this.renderFilledWedge(hK,hL,hG,hH,hI,hM)}}if(e.getMarkProperty('draw_border',L)){var hP=e.getMarkProperty('theta',L);var hQ=e.getMarkProperty('theta1',L);var hR=hP>hQ;var hS=e.getMarkProperty('border_color',L)[hz];var hT=true;if(Math.abs(hP-hQ)>=1){bb.renderCircle(this.get_currentContext(),e.getMarkProperty('x',L),e.getMarkProperty('y',L),hG*2,hS,1)}else{bb.renderWedge(this.get_currentContext(),e.getMarkProperty('x',L),e.getMarkProperty('y',L),hG,hP,hQ,hS,1,hR,hT)}}break}case'highlightedUnder':{var hU=e.getMarkProperty('size',L)/2;{var hV=e.getMarkProperty('theta',L);var hW=e.getMarkProperty('theta1',L);var hX=hV>hW;var hY=e.getMarkProperty('halo_color',L)[hz];var hZ=false;if(Math.abs(hV-hW)>=1){bb.renderCircle(this.get_currentContext(),e.getMarkProperty('x',L),e.getMarkProperty('y',L),hU*2,hY,4)}else{bb.renderWedge(this.get_currentContext(),e.getMarkProperty('x',L),e.getMarkProperty('y',L),hU,hV,hW,hY,4,hX,hZ)}}break}case'highlightedOn':{var ia=e.getMarkProperty('size',L)/2;{var ib=e.getMarkProperty('theta',L);var ic=e.getMarkProperty('theta1',L);if(ib>ic){var id=ib;ib=ic;ic=id}var ie=e.getMarkProperty('x',L);var ig=e.getMarkProperty('y',L);var ih=e.getMarkColors(L)[hz];if(e.getMarkProperty('alpha',L)>=1){var ii=bb.toCanvasAngle(ib);var ij=bb.toCanvasAngle(ic);if(Math.abs(ij-ii)>=bb.angleEpsilon){this.get_currentContext().beginPath();this.get_currentContext().set_lineCap('butt');this.get_currentContext().set_lineWidth(1.5);this.get_currentContext().set_strokeStyle(ih);this.get_currentContext().moveTo(ie,ig);this.get_currentContext().lineTo(ie+Math.cos(ii)*ia,ig+Math.sin(ii)*ia);this.get_currentContext().stroke()}}if(Math.abs(ib-ic)>=1){bb.renderFilledCircle(this.get_currentContext(),ie,ig,ia*2,ih)}else{this.renderFilledWedge(ie,ig,ia,ib,ic,ih)}}if(e.getMarkProperty('draw_border',L)){var ik=e.getMarkProperty('theta',L);var il=e.getMarkProperty('theta1',L);var im=ik>il;var io=e.getMarkProperty('border_color',L)[hz];var ip=true;if(Math.abs(ik-il)>=1){bb.renderCircle(this.get_currentContext(),e.getMarkProperty('x',L),e.getMarkProperty('y',L),ia*2,io,1)}else{bb.renderWedge(this.get_currentContext(),e.getMarkProperty('x',L),e.getMarkProperty('y',L),ia,ik,il,io,1,im,ip)}}break}case'selectedUnder':{var iq=e.getMarkProperty('size',L)/2;{var ir=e.getMarkProperty('theta',L);var it=e.getMarkProperty('theta1',L);var iu=ir>it;var iv=e.getMarkProperty('selected_halo_color',L)[hz];var iw=false;if(Math.abs(ir-it)>=1){bb.renderCircle(this.get_currentContext(),e.getMarkProperty('x',L),e.getMarkProperty('y',L),iq*2,iv,4)}else{bb.renderWedge(this.get_currentContext(),e.getMarkProperty('x',L),e.getMarkProperty('y',L),iq,ir,it,iv,4,iu,iw)}}break}case'selectedOn':{var ix=e.getMarkProperty('size',L)/2;{var iy=e.getMarkProperty('theta',L);var iz=e.getMarkProperty('theta1',L);if(iy>iz){var iA=iy;iy=iz;iz=iA}var iB=e.getMarkProperty('x',L);var iC=e.getMarkProperty('y',L);var iD=e.getMarkColors(L)[hz];if(e.getMarkProperty('alpha',L)>=1){var iE=bb.toCanvasAngle(iy);var iF=bb.toCanvasAngle(iz);if(Math.abs(iF-iE)>=bb.angleEpsilon){this.get_currentContext().beginPath();this.get_currentContext().set_lineCap('butt');this.get_currentContext().set_lineWidth(1.5);this.get_currentContext().set_strokeStyle(iD);this.get_currentContext().moveTo(iB,iC);this.get_currentContext().lineTo(iB+Math.cos(iE)*ix,iC+Math.sin(iE)*ix);this.get_currentContext().stroke()}}if(Math.abs(iy-iz)>=1){bb.renderFilledCircle(this.get_currentContext(),iB,iC,ix*2,iD)}else{this.renderFilledWedge(iB,iC,ix,iy,iz,iD)}}if(e.getMarkProperty('draw_border',L)){var iG=e.getMarkProperty('theta',L);var iH=e.getMarkProperty('theta1',L);var iI=iG>iH;var iJ=e.getMarkProperty('border_color',L)[hz];var iK=true;if(Math.abs(iG-iH)>=1){bb.renderCircle(this.get_currentContext(),e.getMarkProperty('x',L),e.getMarkProperty('y',L),ix*2,iJ,1)}else{bb.renderWedge(this.get_currentContext(),e.getMarkProperty('x',L),e.getMarkProperty('y',L),ix,iG,iH,iJ,1,iI,iK)}}break}default:{break}}if(e.clipCase!==0){this.get_currentContext().restore()}},$O:function(e,L,hy){var hz=e.get_hasSelection();var hA=e.get_hasBrushing();var hB='colorOverrideNone';var hC=e.$d(L);var hD=hC.firstMark;var hE=hC.lastMark;var hF=e.getUserPaneRectByIndex(L);this.get_currentContext().save();var hG=this.setupContextForTextRendering(e);switch(hy){case'normalUnderPass':{if(e.get_hasBackground()&&e.get_hasHalos()){if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}{for(var hH=hD;hH<=hE;hH++){if(!e.markNeedsDraw(hH)){continue}if(e.getMarkState(hH)!=='markStateNormal'){continue}var hI=e.getMarkInstanceOffsets(hH);var hJ=hI.length;for(var hK=0;hK<hJ;hK++){var hL=hI[hK];if(hL!==0){this.get_currentContext().save();this.get_currentContext().translate(hL,0)}this.$h(e,hH,'normalUnder',hB);if(hL!==0){this.get_currentContext().restore()}}}}{for(var hM=hD;hM<=hE;hM++){if(!e.markNeedsDraw(hM)){continue}if(e.getMarkState(hM)!=='markStateHighlighted'){continue}var hN=e.getMarkInstanceOffsets(hM);var hO=hN.length;for(var hP=0;hP<hO;hP++){var hQ=hN[hP];if(hQ!==0){this.get_currentContext().save();this.get_currentContext().translate(hQ,0)}this.$h(e,hM,'normalUnder',hB);if(hQ!==0){this.get_currentContext().restore()}}}}}break}case'normalOnPass':{if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}{for(var hR=hD;hR<=hE;hR++){if(!e.markNeedsDraw(hR)){continue}if(e.getMarkState(hR)!=='markStateNormal'){continue}var hS=e.getMarkInstanceOffsets(hR);var hT=hS.length;for(var hU=0;hU<hT;hU++){var hV=hS[hU];if(hV!==0){this.get_currentContext().save();this.get_currentContext().translate(hV,0)}var hW=this.get_currentContext().get_textAlign()==='end';var hX=e.getMarkProperty('text_run_offset',hR);var hY=e.getMarkProperty('text_run_count',hR);var hZ=hY>1;for(var ia=0;ia<hY;ia++){var ib=ia+hX;if(hW){ib=hX+hY-ia-1}this.$i(e,hR,'normalOn',hB,ib,hZ,hG)}this.clearPrevTextRunInfo();if(hV!==0){this.get_currentContext().restore()}}}}break}case'highlightedUnderPass':{if(hz||hA){if(!(e.get_hasBackground()&&e.get_hasHalos())){hB='colorOverrideNone';{for(var ic=hD;ic<=hE;ic++){if(!e.markNeedsDraw(ic)){continue}if(e.getMarkState(ic)!=='markStateHighlighted'){continue}var id=e.getMarkInstanceOffsets(ic);var ie=id.length;for(var ig=0;ig<ie;ig++){var ih=id[ig];if(ih!==0){this.get_currentContext().save();this.get_currentContext().translate(ih,0)}this.$h(e,ic,'highlightedUnder',hB);if(ih!==0){this.get_currentContext().restore()}}}}}}break}case'highlightedOnPass':{if(hz||hA){hB='colorOverrideNone';{for(var ii=hD;ii<=hE;ii++){if(!e.markNeedsDraw(ii)){continue}if(e.getMarkState(ii)!=='markStateHighlighted'){continue}var ij=e.getMarkInstanceOffsets(ii);var ik=ij.length;for(var il=0;il<ik;il++){var im=ij[il];if(im!==0){this.get_currentContext().save();this.get_currentContext().translate(im,0)}var io=this.get_currentContext().get_textAlign()==='end';var ip=e.getMarkProperty('text_run_offset',ii);var iq=e.getMarkProperty('text_run_count',ii);var ir=iq>1;for(var it=0;it<iq;it++){var iu=it+ip;if(io){iu=ip+iq-it-1}this.$i(e,ii,'normalOn',hB,iu,ir,hG)}this.clearPrevTextRunInfo();if(im!==0){this.get_currentContext().restore()}}}}}break}case'selectedUnderPass':{if(hz||hA){hB='colorOverrideOpaque';{for(var iv=hD;iv<=hE;iv++){if(!e.markNeedsDraw(iv)){continue}if(e.getMarkState(iv)!=='markStateSelected'){continue}var iw=e.getMarkInstanceOffsets(iv);var ix=iw.length;for(var iy=0;iy<ix;iy++){var iz=iw[iy];if(iz!==0){this.get_currentContext().save();this.get_currentContext().translate(iz,0)}this.$h(e,iv,'selectedUnder',hB);if(iz!==0){this.get_currentContext().restore()}}}}}break}case'selectedOnPass':{if(hz||hA){hB='colorOverrideOpaque';{for(var iA=hD;iA<=hE;iA++){if(!e.markNeedsDraw(iA)){continue}if(e.getMarkState(iA)!=='markStateSelected'){continue}var iB=e.getMarkInstanceOffsets(iA);var iC=iB.length;for(var iD=0;iD<iC;iD++){var iE=iB[iD];if(iE!==0){this.get_currentContext().save();this.get_currentContext().translate(iE,0)}var iF=this.get_currentContext().get_textAlign()==='end';var iG=e.getMarkProperty('text_run_offset',iA);var iH=e.getMarkProperty('text_run_count',iA);var iI=iH>1;for(var iJ=0;iJ<iH;iJ++){var iK=iJ+iG;if(iF){iK=iG+iH-iJ-1}this.$i(e,iA,'normalOn',hB,iK,iI,hG)}this.clearPrevTextRunInfo();if(iE!==0){this.get_currentContext().restore()}}}}}break}}this.get_currentContext().restore()},$h:function(e,L,hy,hz){if(e.clipCase!==0){this.get_currentContext().save();this.clipRect(e.clipCase,e.getMarkProperty('cell_x',L),e.getMarkProperty('cell_y',L),e.getMarkProperty('clip_width',L),e.getMarkProperty('clip_height',L))}switch(hy){case'normalUnder':{{if(!(e.clipCase!==0&&e.useCellClipForSelection)){var hA=e.getMarkProperty('x',L);var hB=e.getMarkProperty('y',L);var hC=e.getMarkProperty('width',L);var hD=-e.getMarkProperty('height',L);if(hD<0){hB+=hD;hD=Math.abs(hD)}var hE=-e.getMarkProperty('width',L)/2;var hF=e.getMarkProperty('height',L)/2;var hG;if(e.isMarkImpliedSelected(L)){hG=e.getMarkProperty('selected_halo_color',L)['colorOverrideOpaque']}else{hG=e.getMarkProperty('halo_color',L)[hz]}bb.renderFilledBar(this.get_currentContext(),hA+hE,hB+hF,hC,hD,hG,0,0,false)}}{if(e.clipCase!==0&&e.useCellClipForSelection){var hH=e.getMarkProperty('x',L);var hI=e.getMarkProperty('y',L);var hJ=e.getMarkProperty('clip_width',L);var hK=-e.getMarkProperty('clip_height',L);if(hK<0){hI+=hK;hK=Math.abs(hK)}var hL=-e.getMarkProperty('clip_width',L)/2;var hM=e.getMarkProperty('clip_height',L)/2;var hN;if(e.isMarkImpliedSelected(L)){hN=e.getMarkProperty('selected_halo_color',L)['colorOverrideOpaque']}else{hN=e.getMarkProperty('halo_color',L)[hz]}bb.renderFilledBar(this.get_currentContext(),hH+hL,hI+hM,hJ,hK,hN,0,0,false)}}break}case'normalOn':{break}case'highlightedUnder':{{if(e.get_hasHaloHighlightColor()&&!(e.clipCase!==0&&e.useCellClipForSelection)){var hO=e.getMarkProperty('x',L);var hP=e.getMarkProperty('y',L);var hQ=e.getMarkProperty('width',L);var hR=-e.getMarkProperty('height',L);if(hR<0){hP+=hR;hR=Math.abs(hR)}var hS=-e.getMarkProperty('width',L)/2;var hT=e.getMarkProperty('height',L)/2;var hU;if(e.isMarkImpliedSelected(L)){hU=e.getMarkProperty('selected_halo_color',L)['colorOverrideOpaque']}else{hU=e.getMarkProperty('highlighted_halo_color',L)[hz]}bb.renderFilledBar(this.get_currentContext(),hO+hS,hP+hT,hQ,hR,hU,0,0,false)}}{if(e.get_hasHaloHighlightColor()&&(e.clipCase!==0&&e.useCellClipForSelection)){var hV=e.getMarkProperty('x',L);var hW=e.getMarkProperty('y',L);var hX=e.getMarkProperty('clip_width',L);var hY=-e.getMarkProperty('clip_height',L);if(hY<0){hW+=hY;hY=Math.abs(hY)}var hZ=-e.getMarkProperty('clip_width',L)/2;var ia=e.getMarkProperty('clip_height',L)/2;var ib;if(e.isMarkImpliedSelected(L)){ib=e.getMarkProperty('selected_halo_color',L)['colorOverrideOpaque']}else{ib=e.getMarkProperty('highlighted_halo_color',L)[hz]}bb.renderFilledBar(this.get_currentContext(),hV+hZ,hW+ia,hX,hY,ib,0,0,false)}}break}case'selectedUnder':{{if(!(e.clipCase!==0&&e.useCellClipForSelection)){var ic=e.getMarkProperty('x',L);var id=e.getMarkProperty('y',L);var ie=e.getMarkProperty('width',L);var ig=-e.getMarkProperty('height',L);if(ig<0){id+=ig;ig=Math.abs(ig)}var ih=-e.getMarkProperty('width',L)/2;var ii=e.getMarkProperty('height',L)/2;var ij;if(e.isMarkImpliedSelected(L)){ij=e.getMarkProperty('selected_halo_color',L)['colorOverrideOpaque']}else{ij=e.getMarkProperty('selected_halo_color',L)[hz]}bb.renderFilledBar(this.get_currentContext(),ic+ih,id+ii,ie,ig,ij,0,0,false)}}{if(e.clipCase!==0&&e.useCellClipForSelection){var ik=e.getMarkProperty('x',L);var il=e.getMarkProperty('y',L);var im=e.getMarkProperty('clip_width',L);var io=-e.getMarkProperty('clip_height',L);if(io<0){il+=io;io=Math.abs(io)}var ip=-e.getMarkProperty('clip_width',L)/2;var iq=e.getMarkProperty('clip_height',L)/2;var ir;if(e.isMarkImpliedSelected(L)){ir=e.getMarkProperty('selected_halo_color',L)['colorOverrideOpaque']}else{ir=e.getMarkProperty('selected_halo_color',L)[hz]}bb.renderFilledBar(this.get_currentContext(),ik+ip,il+iq,im,io,ir,0,0,false)}}break}default:{break}}if(e.clipCase!==0){this.get_currentContext().restore()}},$k:function(e,L,hy){var hz=e.get_hasSelection();var hA=e.get_hasBrushing();var hB='colorOverrideNone';var hC=e.$d(L);var hD=hC.firstMark;var hE=hC.lastMark;var hF=e.getUserPaneRectByIndex(L);this.get_currentContext().save();this.get_currentContext().set_lineJoin('miter');switch(hy){case'normalUnderPass':{if(e.get_hasBackground()&&e.get_hasHalos()){if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}{for(var hG=hD;hG<=hE;hG++){if(!e.markNeedsDraw(hG)){continue}if(e.getMarkState(hG)!=='markStateNormal'){continue}var hH=e.getMarkInstanceOffsets(hG);var hI=hH.length;for(var hJ=0;hJ<hI;hJ++){var hK=hH[hJ];if(hK!==0){this.get_currentContext().save();this.get_currentContext().translate(hK,0)}this.$9(e,hF,hG,'normalUnder',hB);if(hK!==0){this.get_currentContext().restore()}}}}hB='colorOverrideNone';{for(var hL=hD;hL<=hE;hL++){if(!e.markNeedsDraw(hL)){continue}if(e.getMarkState(hL)!=='markStateHighlighted'){continue}var hM=e.getMarkInstanceOffsets(hL);var hN=hM.length;for(var hO=0;hO<hN;hO++){var hP=hM[hO];if(hP!==0){this.get_currentContext().save();this.get_currentContext().translate(hP,0)}this.$9(e,hF,hL,'normalUnder',hB);if(hP!==0){this.get_currentContext().restore()}}}}}break}case'normalOnPass':{if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}{for(var hQ=hD;hQ<=hE;hQ++){if(!e.markNeedsDraw(hQ)){continue}if(e.getMarkState(hQ)!=='markStateNormal'){continue}var hR=e.getMarkInstanceOffsets(hQ);var hS=hR.length;for(var hT=0;hT<hS;hT++){var hU=hR[hT];if(hU!==0){this.get_currentContext().save();this.get_currentContext().translate(hU,0)}this.$9(e,hF,hQ,'normalOn',hB);if(hU!==0){this.get_currentContext().restore()}}}}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(hz||hA){hB='colorOverrideNone';{for(var hV=hD;hV<=hE;hV++){if(!e.markNeedsDraw(hV)){continue}if(e.getMarkState(hV)!=='markStateHighlighted'){continue}var hW=e.getMarkInstanceOffsets(hV);var hX=hW.length;for(var hY=0;hY<hX;hY++){var hZ=hW[hY];if(hZ!==0){this.get_currentContext().save();this.get_currentContext().translate(hZ,0)}this.$9(e,hF,hV,'highlightedOn',hB);if(hZ!==0){this.get_currentContext().restore()}}}}}break}case'selectedUnderPass':{if(hz||hA){hB='colorOverrideOpaque';{for(var ia=hD;ia<=hE;ia++){if(!e.markNeedsDraw(ia)){continue}if(e.getMarkState(ia)!=='markStateSelected'){continue}var ib=e.getMarkInstanceOffsets(ia);var ic=ib.length;for(var id=0;id<ic;id++){var ie=ib[id];if(ie!==0){this.get_currentContext().save();this.get_currentContext().translate(ie,0)}this.$9(e,hF,ia,'selectedUnder',hB);if(ie!==0){this.get_currentContext().restore()}}}}}break}case'selectedOnPass':{if(hz||hA){hB='colorOverrideOpaque';if(e.clipCase!==3){this.get_currentContext().save();this.get_currentContext().setClip(e.getInsetPaneClipRect(L,2))}{for(var ig=hD;ig<=hE;ig++){if(!e.markNeedsDraw(ig)){continue}if(e.getMarkState(ig)!=='markStateSelected'){continue}var ih=e.getMarkInstanceOffsets(ig);var ii=ih.length;for(var ij=0;ij<ii;ij++){var ik=ih[ij];if(ik!==0){this.get_currentContext().save();this.get_currentContext().translate(ik,0)}this.$9(e,hF,ig,'selectedOn',hB);if(ik!==0){this.get_currentContext().restore()}}}}if(e.clipCase!==3){this.get_currentContext().restore()}}break}}this.get_currentContext().restore()},$9:function(e,L,hy,hz,hA){if(e.clipCase!==0){this.get_currentContext().save();this.clipRect(e.clipCase,e.getMarkProperty('cell_x',hy),e.getMarkProperty('cell_y',hy),e.getMarkProperty('clip_width',hy),e.getMarkProperty('clip_height',hy))}switch(hz){case'normalUnder':{var hB=ss.Int32.trunc(e.getMarkProperty('size',hy)+0.5)/2;{var hC=e.getMarkProperty('x',hy);var hD=e.getMarkProperty('x1',hy);var hE=e.getMarkProperty('y',hy);var hF=e.getMarkProperty('y1',hy);var hG=Math.min(hC,hD);var hH=Math.min(hE,hF);var hI=Math.abs(hD-hC)+0;var hJ=Math.abs(hF-hE)+0;if(e.scaleMarksInX&&e.scaleMarksInY){{bb.renderBarOutline(this.get_currentContext(),hG,hH,hI,hJ,e.getMarkProperty('halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var hK=e.getMarkProperty('x',hy)-hB;var hL=e.getMarkProperty('x',hy)+hB;var hM=e.getMarkProperty('y',hy);var hN=e.getMarkProperty('y1',hy);var hO=Math.min(hK,hL);var hP=Math.min(hM,hN);var hQ=Math.abs(hL-hK)+0;var hR=Math.abs(hN-hM)+0;if(!e.scaleMarksInX&&e.scaleMarksInY){{bb.renderBarOutline(this.get_currentContext(),hO,hP,hQ,hR,e.getMarkProperty('halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var hS=e.getMarkProperty('x',hy);var hT=e.getMarkProperty('x1',hy);var hU=e.getMarkProperty('y',hy)-hB;var hV=e.getMarkProperty('y',hy)+hB;var hW=Math.min(hS,hT);var hX=Math.min(hU,hV);var hY=Math.abs(hT-hS)+0;var hZ=Math.abs(hV-hU)+0;if(e.scaleMarksInX&&!e.scaleMarksInY){{bb.renderBarOutline(this.get_currentContext(),hW,hX,hY,hZ,e.getMarkProperty('halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var ia=e.getMarkProperty('x',hy)-hB;var ib=e.getMarkProperty('x',hy)+hB;var ic=e.getMarkProperty('y',hy)-hB;var id=e.getMarkProperty('y',hy)+hB;var ie=Math.min(ia,ib);var ig=Math.min(ic,id);var ih=Math.abs(ib-ia)+0;var ii=Math.abs(id-ic)+0;if(!e.scaleMarksInX&&!e.scaleMarksInY){{bb.renderBarOutline(this.get_currentContext(),ie,ig,ih,ii,e.getMarkProperty('halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),true)}}}break}case'normalOn':{var ij=ss.Int32.trunc(e.getMarkProperty('size',hy)+0.5)/2;{var ik=e.getMarkProperty('x',hy);var il=e.getMarkProperty('x1',hy);var im=e.getMarkProperty('y',hy);var io=e.getMarkProperty('y1',hy);var ip=Math.min(ik,il);var iq=Math.min(im,io);var ir=Math.abs(il-ik)+0;var it=Math.abs(io-im)+0;if(e.scaleMarksInX&&e.scaleMarksInY){{var iu=0;bb.renderFilledBar(this.get_currentContext(),ip-iu,iq-iu,ir+2*iu,it+2*iu,e.getMarkColors(hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var iv=e.getMarkProperty('x',hy);var iw=e.getMarkProperty('x1',hy);var ix=e.getMarkProperty('y',hy);var iy=e.getMarkProperty('y1',hy);var iz=Math.min(iv,iw);var iA=Math.min(ix,iy);var iB=Math.abs(iw-iv)+0;var iC=Math.abs(iy-ix)+0;if(e.scaleMarksInX&&e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),iz,iA,iB,iC,e.getMarkProperty('border_color',hy)[hA],1,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var iD=e.getMarkProperty('x',hy)-ij;var iE=e.getMarkProperty('x',hy)+ij;var iF=e.getMarkProperty('y',hy);var iG=e.getMarkProperty('y1',hy);var iH=Math.min(iD,iE);var iI=Math.min(iF,iG);var iJ=Math.abs(iE-iD)+0;var iK=Math.abs(iG-iF)+0;if(!e.scaleMarksInX&&e.scaleMarksInY){{var iL=0;bb.renderFilledBar(this.get_currentContext(),iH-iL,iI-iL,iJ+2*iL,iK+2*iL,e.getMarkColors(hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var iM=e.getMarkProperty('x',hy)-ij;var iN=e.getMarkProperty('x',hy)+ij;var iO=e.getMarkProperty('y',hy);var iP=e.getMarkProperty('y1',hy);var iQ=Math.min(iM,iN);var iR=Math.min(iO,iP);var iS=Math.abs(iN-iM)+0;var iT=Math.abs(iP-iO)+0;if(!e.scaleMarksInX&&e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),iQ,iR,iS,iT,e.getMarkProperty('border_color',hy)[hA],1,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var iU=e.getMarkProperty('x',hy);var iV=e.getMarkProperty('x1',hy);var iW=e.getMarkProperty('y',hy)-ij;var iX=e.getMarkProperty('y',hy)+ij;var iY=Math.min(iU,iV);var iZ=Math.min(iW,iX);var ja=Math.abs(iV-iU)+0;var jb=Math.abs(iX-iW)+0;if(e.scaleMarksInX&&!e.scaleMarksInY){{var jc=0;bb.renderFilledBar(this.get_currentContext(),iY-jc,iZ-jc,ja+2*jc,jb+2*jc,e.getMarkColors(hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var jd=e.getMarkProperty('x',hy);var je=e.getMarkProperty('x1',hy);var jf=e.getMarkProperty('y',hy)-ij;var jg=e.getMarkProperty('y',hy)+ij;var jh=Math.min(jd,je);var ji=Math.min(jf,jg);var jj=Math.abs(je-jd)+0;var jk=Math.abs(jg-jf)+0;if(e.scaleMarksInX&&!e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),jh,ji,jj,jk,e.getMarkProperty('border_color',hy)[hA],1,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var jl=e.getMarkProperty('x',hy)-ij;var jm=e.getMarkProperty('x',hy)+ij;var jn=e.getMarkProperty('y',hy)-ij;var jo=e.getMarkProperty('y',hy)+ij;var jp=Math.min(jl,jm);var jq=Math.min(jn,jo);var jr=Math.abs(jm-jl)+0;var js=Math.abs(jo-jn)+0;if(!e.scaleMarksInX&&!e.scaleMarksInY){{var jt=0;bb.renderFilledBar(this.get_currentContext(),jp-jt,jq-jt,jr+2*jt,js+2*jt,e.getMarkColors(hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),true)}}}{var ju=e.getMarkProperty('x',hy)-ij;var jv=e.getMarkProperty('x',hy)+ij;var jw=e.getMarkProperty('y',hy)-ij;var jx=e.getMarkProperty('y',hy)+ij;var jy=Math.min(ju,jv);var jz=Math.min(jw,jx);var jA=Math.abs(jv-ju)+0;var jB=Math.abs(jx-jw)+0;if(!e.scaleMarksInX&&!e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),jy,jz,jA,jB,e.getMarkProperty('border_color',hy)[hA],1,e.get_minBarWidth(),e.get_minBarHeight(),true)}}}break}case'highlightedUnder':{var jC=ss.Int32.trunc(e.getMarkProperty('size',hy)+0.5)/2;{var jD=e.getMarkProperty('x',hy);var jE=e.getMarkProperty('x1',hy);var jF=e.getMarkProperty('y',hy);var jG=e.getMarkProperty('y1',hy);var jH=Math.min(jD,jE);var jI=Math.min(jF,jG);var jJ=Math.abs(jE-jD)+0;var jK=Math.abs(jG-jF)+0;if(e.scaleMarksInX&&e.scaleMarksInY){{bb.renderBarOutline(this.get_currentContext(),jH,jI,jJ,jK,e.getMarkProperty('halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var jL=e.getMarkProperty('x',hy)-jC;var jM=e.getMarkProperty('x',hy)+jC;var jN=e.getMarkProperty('y',hy);var jO=e.getMarkProperty('y1',hy);var jP=Math.min(jL,jM);var jQ=Math.min(jN,jO);var jR=Math.abs(jM-jL)+0;var jS=Math.abs(jO-jN)+0;if(!e.scaleMarksInX&&e.scaleMarksInY){{bb.renderBarOutline(this.get_currentContext(),jP,jQ,jR,jS,e.getMarkProperty('halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var jT=e.getMarkProperty('x',hy);var jU=e.getMarkProperty('x1',hy);var jV=e.getMarkProperty('y',hy)-jC;var jW=e.getMarkProperty('y',hy)+jC;var jX=Math.min(jT,jU);var jY=Math.min(jV,jW);var jZ=Math.abs(jU-jT)+0;var ka=Math.abs(jW-jV)+0;if(e.scaleMarksInX&&!e.scaleMarksInY){{bb.renderBarOutline(this.get_currentContext(),jX,jY,jZ,ka,e.getMarkProperty('halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var kb=e.getMarkProperty('x',hy)-jC;var kc=e.getMarkProperty('x',hy)+jC;var kd=e.getMarkProperty('y',hy)-jC;var ke=e.getMarkProperty('y',hy)+jC;var kf=Math.min(kb,kc);var kg=Math.min(kd,ke);var kh=Math.abs(kc-kb)+0;var ki=Math.abs(ke-kd)+0;if(!e.scaleMarksInX&&!e.scaleMarksInY){{bb.renderBarOutline(this.get_currentContext(),kf,kg,kh,ki,e.getMarkProperty('halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),true)}}}break}case'highlightedOn':{var kj=ss.Int32.trunc(e.getMarkProperty('size',hy)+0.5)/2;{var kk=e.getMarkProperty('x',hy);var kl=e.getMarkProperty('x1',hy);var km=e.getMarkProperty('y',hy);var kn=e.getMarkProperty('y1',hy);var ko=Math.min(kk,kl);var kp=Math.min(km,kn);var kq=Math.abs(kl-kk)+0;var kr=Math.abs(kn-km)+0;if(e.scaleMarksInX&&e.scaleMarksInY){{var ks=0;bb.renderFilledBar(this.get_currentContext(),ko-ks,kp-ks,kq+2*ks,kr+2*ks,e.getMarkColors(hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var kt=e.getMarkProperty('x',hy);var ku=e.getMarkProperty('x1',hy);var kv=e.getMarkProperty('y',hy);var kw=e.getMarkProperty('y1',hy);var kx=Math.min(kt,ku);var ky=Math.min(kv,kw);var kz=Math.abs(ku-kt)+0;var kA=Math.abs(kw-kv)+0;if(e.scaleMarksInX&&e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),kx,ky,kz,kA,e.getMarkProperty('border_color',hy)[hA],1,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var kB=e.getMarkProperty('x',hy)-kj;var kC=e.getMarkProperty('x',hy)+kj;var kD=e.getMarkProperty('y',hy);var kE=e.getMarkProperty('y1',hy);var kF=Math.min(kB,kC);var kG=Math.min(kD,kE);var kH=Math.abs(kC-kB)+0;var kI=Math.abs(kE-kD)+0;if(!e.scaleMarksInX&&e.scaleMarksInY){{var kJ=0;bb.renderFilledBar(this.get_currentContext(),kF-kJ,kG-kJ,kH+2*kJ,kI+2*kJ,e.getMarkColors(hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var kK=e.getMarkProperty('x',hy)-kj;var kL=e.getMarkProperty('x',hy)+kj;var kM=e.getMarkProperty('y',hy);var kN=e.getMarkProperty('y1',hy);var kO=Math.min(kK,kL);var kP=Math.min(kM,kN);var kQ=Math.abs(kL-kK)+0;var kR=Math.abs(kN-kM)+0;if(!e.scaleMarksInX&&e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),kO,kP,kQ,kR,e.getMarkProperty('border_color',hy)[hA],1,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var kS=e.getMarkProperty('x',hy);var kT=e.getMarkProperty('x1',hy);var kU=e.getMarkProperty('y',hy)-kj;var kV=e.getMarkProperty('y',hy)+kj;var kW=Math.min(kS,kT);var kX=Math.min(kU,kV);var kY=Math.abs(kT-kS)+0;var kZ=Math.abs(kV-kU)+0;if(e.scaleMarksInX&&!e.scaleMarksInY){{var la=0;bb.renderFilledBar(this.get_currentContext(),kW-la,kX-la,kY+2*la,kZ+2*la,e.getMarkColors(hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var lb=e.getMarkProperty('x',hy);var lc=e.getMarkProperty('x1',hy);var ld=e.getMarkProperty('y',hy)-kj;var le=e.getMarkProperty('y',hy)+kj;var lf=Math.min(lb,lc);var lg=Math.min(ld,le);var lh=Math.abs(lc-lb)+0;var li=Math.abs(le-ld)+0;if(e.scaleMarksInX&&!e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),lf,lg,lh,li,e.getMarkProperty('border_color',hy)[hA],1,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var lj=e.getMarkProperty('x',hy)-kj;var lk=e.getMarkProperty('x',hy)+kj;var ll=e.getMarkProperty('y',hy)-kj;var lm=e.getMarkProperty('y',hy)+kj;var ln=Math.min(lj,lk);var lo=Math.min(ll,lm);var lp=Math.abs(lk-lj)+0;var lq=Math.abs(lm-ll)+0;if(!e.scaleMarksInX&&!e.scaleMarksInY){{var lr=0;bb.renderFilledBar(this.get_currentContext(),ln-lr,lo-lr,lp+2*lr,lq+2*lr,e.getMarkColors(hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),true)}}}{var ls=e.getMarkProperty('x',hy)-kj;var lt=e.getMarkProperty('x',hy)+kj;var lu=e.getMarkProperty('y',hy)-kj;var lv=e.getMarkProperty('y',hy)+kj;var lw=Math.min(ls,lt);var lx=Math.min(lu,lv);var ly=Math.abs(lt-ls)+0;var lz=Math.abs(lv-lu)+0;if(!e.scaleMarksInX&&!e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),lw,lx,ly,lz,e.getMarkProperty('border_color',hy)[hA],1,e.get_minBarWidth(),e.get_minBarHeight(),true)}}}break}case'selectedUnder':{var lA=ss.Int32.trunc(e.getMarkProperty('size',hy)+0.5)/2;var lB=1;{var lC=e.getMarkProperty('x',hy);var lD=e.getMarkProperty('x1',hy);var lE=e.getMarkProperty('y',hy);var lF=e.getMarkProperty('y1',hy);var lG=Math.min(lC,lD);var lH=Math.min(lE,lF);var lI=Math.abs(lD-lC)+0;var lJ=Math.abs(lF-lE)+0;if(e.scaleMarksInX&&e.scaleMarksInY&&!this.$7(L,lG,lH,lI,lJ)){{bb.renderBarOutline(this.get_currentContext(),lG,lH,lI,lJ,e.getMarkProperty('selected_halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var lK=e.getMarkProperty('x',hy);var lL=e.getMarkProperty('x1',hy);var lM=e.getMarkProperty('y',hy);var lN=e.getMarkProperty('y1',hy);var lO=Math.min(lK,lL);var lP=Math.min(lM,lN);var lQ=Math.abs(lL-lK)+0;var lR=Math.abs(lN-lM)+0;if(e.scaleMarksInX&&e.scaleMarksInY&&this.$7(L,lO,lP,lQ,lR)){{var lS=2;bb.renderFilledBar(this.get_currentContext(),lO-lS,lP-lS,lQ+2*lS,lR+2*lS,e.getMarkProperty('selected_halo_color',hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var lT=e.getMarkProperty('x',hy);var lU=e.getMarkProperty('x1',hy);var lV=e.getMarkProperty('y',hy);var lW=e.getMarkProperty('y1',hy);var lX=Math.min(lT,lU);var lY=Math.min(lV,lW);var lZ=Math.abs(lU-lT)+lB;var ma=Math.abs(lW-lV)+lB;if(e.scaleMarksInX&&e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),lX,lY,lZ,ma,e.getMarkProperty('selected_halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var mb=e.getMarkProperty('x',hy)-lA;var mc=e.getMarkProperty('x',hy)+lA;var md=e.getMarkProperty('y',hy);var me=e.getMarkProperty('y1',hy);var mf=Math.min(mb,mc);var mg=Math.min(md,me);var mh=Math.abs(mc-mb)+0;var mi=Math.abs(me-md)+0;if(!e.scaleMarksInX&&e.scaleMarksInY&&!this.$7(L,mf,mg,mh,mi)){{bb.renderBarOutline(this.get_currentContext(),mf,mg,mh,mi,e.getMarkProperty('selected_halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var mj=e.getMarkProperty('x',hy)-lA;var mk=e.getMarkProperty('x',hy)+lA;var ml=e.getMarkProperty('y',hy);var mm=e.getMarkProperty('y1',hy);var mn=Math.min(mj,mk);var mo=Math.min(ml,mm);var mp=Math.abs(mk-mj)+0;var mq=Math.abs(mm-ml)+0;if(!e.scaleMarksInX&&e.scaleMarksInY&&this.$7(L,mn,mo,mp,mq)){{var mr=2;bb.renderFilledBar(this.get_currentContext(),mn-mr,mo-mr,mp+2*mr,mq+2*mr,e.getMarkProperty('selected_halo_color',hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var ms=e.getMarkProperty('x',hy)-lA;var mt=e.getMarkProperty('x',hy)+lA;var mu=e.getMarkProperty('y',hy);var mv=e.getMarkProperty('y1',hy);var mw=Math.min(ms,mt);var mx=Math.min(mu,mv);var my=Math.abs(mt-ms)+lB;var mz=Math.abs(mv-mu)+lB;if(!e.scaleMarksInX&&e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),mw,mx,my,mz,e.getMarkProperty('selected_halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var mA=e.getMarkProperty('x',hy);var mB=e.getMarkProperty('x1',hy);var mC=e.getMarkProperty('y',hy)-lA;var mD=e.getMarkProperty('y',hy)+lA;var mE=Math.min(mA,mB);var mF=Math.min(mC,mD);var mG=Math.abs(mB-mA)+0;var mH=Math.abs(mD-mC)+0;if(e.scaleMarksInX&&!e.scaleMarksInY&&!this.$7(L,mE,mF,mG,mH)){{bb.renderBarOutline(this.get_currentContext(),mE,mF,mG,mH,e.getMarkProperty('selected_halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var mI=e.getMarkProperty('x',hy);var mJ=e.getMarkProperty('x1',hy);var mK=e.getMarkProperty('y',hy)-lA;var mL=e.getMarkProperty('y',hy)+lA;var mM=Math.min(mI,mJ);var mN=Math.min(mK,mL);var mO=Math.abs(mJ-mI)+0;var mP=Math.abs(mL-mK)+0;if(e.scaleMarksInX&&!e.scaleMarksInY&&this.$7(L,mM,mN,mO,mP)){{var mQ=2;bb.renderFilledBar(this.get_currentContext(),mM-mQ,mN-mQ,mO+2*mQ,mP+2*mQ,e.getMarkProperty('selected_halo_color',hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var mR=e.getMarkProperty('x',hy);var mS=e.getMarkProperty('x1',hy);var mT=e.getMarkProperty('y',hy)-lA;var mU=e.getMarkProperty('y',hy)+lA;var mV=Math.min(mR,mS);var mW=Math.min(mT,mU);var mX=Math.abs(mS-mR)+lB;var mY=Math.abs(mU-mT)+lB;if(e.scaleMarksInX&&!e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),mV,mW,mX,mY,e.getMarkProperty('selected_halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var mZ=e.getMarkProperty('x',hy)-lA;var na=e.getMarkProperty('x',hy)+lA;var nb=e.getMarkProperty('y',hy)-lA;var nc=e.getMarkProperty('y',hy)+lA;var nd=Math.min(mZ,na);var ne=Math.min(nb,nc);var nf=Math.abs(na-mZ)+0;var ng=Math.abs(nc-nb)+0;if(!e.scaleMarksInX&&!e.scaleMarksInY&&!this.$7(L,nd,ne,nf,ng)){{bb.renderBarOutline(this.get_currentContext(),nd,ne,nf,ng,e.getMarkProperty('selected_halo_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),true)}}}{var nh=e.getMarkProperty('x',hy)-lA;var ni=e.getMarkProperty('x',hy)+lA;var nj=e.getMarkProperty('y',hy)-lA;var nk=e.getMarkProperty('y',hy)+lA;var nl=Math.min(nh,ni);var nm=Math.min(nj,nk);var nn=Math.abs(ni-nh)+0;var no=Math.abs(nk-nj)+0;if(!e.scaleMarksInX&&!e.scaleMarksInY&&this.$7(L,nl,nm,nn,no)){{var np=2;bb.renderFilledBar(this.get_currentContext(),nl-np,nm-np,nn+2*np,no+2*np,e.getMarkProperty('selected_halo_color',hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),true)}}}{var nq=e.getMarkProperty('x',hy)-lA;var nr=e.getMarkProperty('x',hy)+lA;var ns=e.getMarkProperty('y',hy)-lA;var nt=e.getMarkProperty('y',hy)+lA;var nu=Math.min(nq,nr);var nv=Math.min(ns,nt);var nw=Math.abs(nr-nq)+lB;var nx=Math.abs(nt-ns)+lB;if(!e.scaleMarksInX&&!e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),nu,nv,nw,nx,e.getMarkProperty('border_color',hy)[hA],4,e.get_minBarWidth(),e.get_minBarHeight(),true)}}}break}case'selectedOn':{var ny=ss.Int32.trunc(e.getMarkProperty('size',hy)+0.5)/2;{var nz=e.getMarkProperty('x',hy);var nA=e.getMarkProperty('x1',hy);var nB=e.getMarkProperty('y',hy);var nC=e.getMarkProperty('y1',hy);var nD=Math.min(nz,nA);var nE=Math.min(nB,nC);var nF=Math.abs(nA-nz)+0;var nG=Math.abs(nC-nB)+0;if(e.scaleMarksInX&&e.scaleMarksInY){{var nH=0;bb.renderFilledBar(this.get_currentContext(),nD-nH,nE-nH,nF+2*nH,nG+2*nH,e.getMarkColors(hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var nI=e.getMarkProperty('x',hy);var nJ=e.getMarkProperty('x1',hy);var nK=e.getMarkProperty('y',hy);var nL=e.getMarkProperty('y1',hy);var nM=Math.min(nI,nJ);var nN=Math.min(nK,nL);var nO=Math.abs(nJ-nI)+0;var nP=Math.abs(nL-nK)+0;if(e.scaleMarksInX&&e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),nM,nN,nO,nP,e.getMarkProperty('border_color',hy)[hA],1,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var nQ=e.getMarkProperty('x',hy)-ny;var nR=e.getMarkProperty('x',hy)+ny;var nS=e.getMarkProperty('y',hy);var nT=e.getMarkProperty('y1',hy);var nU=Math.min(nQ,nR);var nV=Math.min(nS,nT);var nW=Math.abs(nR-nQ)+0;var nX=Math.abs(nT-nS)+0;if(!e.scaleMarksInX&&e.scaleMarksInY){{var nY=0;bb.renderFilledBar(this.get_currentContext(),nU-nY,nV-nY,nW+2*nY,nX+2*nY,e.getMarkColors(hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var nZ=e.getMarkProperty('x',hy)-ny;var oa=e.getMarkProperty('x',hy)+ny;var ob=e.getMarkProperty('y',hy);var oc=e.getMarkProperty('y1',hy);var od=Math.min(nZ,oa);var oe=Math.min(ob,oc);var of=Math.abs(oa-nZ)+0;var og=Math.abs(oc-ob)+0;if(!e.scaleMarksInX&&e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),od,oe,of,og,e.getMarkProperty('border_color',hy)[hA],1,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var oh=e.getMarkProperty('x',hy);var oi=e.getMarkProperty('x1',hy);var oj=e.getMarkProperty('y',hy)-ny;var ok=e.getMarkProperty('y',hy)+ny;var ol=Math.min(oh,oi);var om=Math.min(oj,ok);var on=Math.abs(oi-oh)+0;var oo=Math.abs(ok-oj)+0;if(e.scaleMarksInX&&!e.scaleMarksInY){{var op=0;bb.renderFilledBar(this.get_currentContext(),ol-op,om-op,on+2*op,oo+2*op,e.getMarkColors(hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var oq=e.getMarkProperty('x',hy);var or=e.getMarkProperty('x1',hy);var os=e.getMarkProperty('y',hy)-ny;var ot=e.getMarkProperty('y',hy)+ny;var ou=Math.min(oq,or);var ov=Math.min(os,ot);var ow=Math.abs(or-oq)+0;var ox=Math.abs(ot-os)+0;if(e.scaleMarksInX&&!e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),ou,ov,ow,ox,e.getMarkProperty('border_color',hy)[hA],1,e.get_minBarWidth(),e.get_minBarHeight(),false)}}}{var oy=e.getMarkProperty('x',hy)-ny;var oz=e.getMarkProperty('x',hy)+ny;var oA=e.getMarkProperty('y',hy)-ny;var oB=e.getMarkProperty('y',hy)+ny;var oC=Math.min(oy,oz);var oD=Math.min(oA,oB);var oE=Math.abs(oz-oy)+0;var oF=Math.abs(oB-oA)+0;if(!e.scaleMarksInX&&!e.scaleMarksInY){{var oG=0;bb.renderFilledBar(this.get_currentContext(),oC-oG,oD-oG,oE+2*oG,oF+2*oG,e.getMarkColors(hy)[hA],e.get_minBarWidth(),e.get_minBarHeight(),true)}}}{var oH=e.getMarkProperty('x',hy)-ny;var oI=e.getMarkProperty('x',hy)+ny;var oJ=e.getMarkProperty('y',hy)-ny;var oK=e.getMarkProperty('y',hy)+ny;var oL=Math.min(oH,oI);var oM=Math.min(oJ,oK);var oN=Math.abs(oI-oH)+0;var oO=Math.abs(oK-oJ)+0;if(!e.scaleMarksInX&&!e.scaleMarksInY&&e.drawBorder){{bb.renderBarOutline(this.get_currentContext(),oL,oM,oN,oO,e.getMarkProperty('border_color',hy)[hA],1,e.get_minBarWidth(),e.get_minBarHeight(),true)}}}break}default:{break}}if(e.clipCase!==0){this.get_currentContext().restore()}},$l:function(e,L,hy){var hz=e.get_hasSelection();var hA=e.get_hasBrushing();var hB='colorOverrideNone';var hC=e.$d(L);var hD=hC.firstMark;var hE=hC.lastMark;var hF=e.getUserPaneRectByIndex(L);var hG=e.get_lineDrawState();this.get_currentContext().save();switch(hy){case'normalUnderPass':{if(e.get_hasBackground()&&e.get_hasHalos()){if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}var hH=hG.get_lineAttributes();for(var hI=0;hI<hH.length;hI++){var hJ=hH[hI];if(hJ.get_lineState()!=='lineStateNormal'){continue}var hK=hJ.worldOffsets;var hL=hK.length;for(var hM=0;hM<hL;hM++){var hN=hK[hM];if(hN!==0){this.get_currentContext().save();this.get_currentContext().translate(hN,0)}{for(var hO=0;hO<hJ.marksNeedingDraw.length;hO++){var hP=hJ.marksNeedingDraw[hO];if(e.getLeft(hP)!==-1||e.getRight(hP)!==-1){this.$a(e,hP,'normalUnder',hB)}}}{for(var hQ=0;hQ<hJ.marksNeedingDraw.length;hQ++){var hR=hJ.marksNeedingDraw[hQ];this.$a(e,hR,'edgeUnder',hB);if(e.getLeft(hR)===-1&&e.getRight(hR)===-1||e.shouldShowMarker(hR)){this.$a(e,hR,'blobUnder',hB)}}}if(hN!==0){this.get_currentContext().restore()}}}var hS=hG.get_lineAttributes();for(var hT=0;hT<hS.length;hT++){var hU=hS[hT];if(hU.get_lineState()!=='lineStateHighlighted'){continue}var hV=hU.worldOffsets;var hW=hV.length;for(var hX=0;hX<hW;hX++){var hY=hV[hX];if(hY!==0){this.get_currentContext().save();this.get_currentContext().translate(hY,0)}{for(var hZ=0;hZ<hU.marksNeedingDraw.length;hZ++){var ia=hU.marksNeedingDraw[hZ];if(e.getLeft(ia)!==-1||e.getRight(ia)!==-1){this.$a(e,ia,'normalUnder',hB)}}}{for(var ib=0;ib<hU.marksNeedingDraw.length;ib++){var ic=hU.marksNeedingDraw[ib];this.$a(e,ic,'edgeUnder',hB);if(e.getLeft(ic)===-1&&e.getRight(ic)===-1||e.shouldShowMarker(ic)){this.$a(e,ic,'blobUnder',hB)}}}if(hY!==0){this.get_currentContext().restore()}}}}break}case'normalOnPass':{if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}var id=hG.get_lineAttributes();for(var ie=0;ie<id.length;ie++){var ig=id[ie];if(ig.get_lineState()!=='lineStateNormal'){continue}var ih=ig.worldOffsets;var ii=ih.length;for(var ij=0;ij<ii;ij++){var ik=ih[ij];if(ik!==0){this.get_currentContext().save();this.get_currentContext().translate(ik,0)}var il=true;if(e.get_hasGlobalTransparency()){if(e.get_markType()==='line'){il=ig.endIndex-ig.startIndex>1}if(il){this.beginOffScreenRender();e.set_forceOpaqueColors(true)}}{for(var im=0;im<ig.marksNeedingDraw.length;im++){var io=ig.marksNeedingDraw[im];if(e.getLeft(io)!==-1||e.getRight(io)!==-1){this.$a(e,io,'normalOn',hB)}else{this.$a(e,io,'blobOn',hB)}}}{for(var ip=0;ip<ig.marksNeedingDraw.length;ip++){var iq=ig.marksNeedingDraw[ip];this.$a(e,iq,'edgeOn',hB)}}if(e.get_hasGlobalTransparency()){if(il){e.set_forceOpaqueColors(false);this.endOffScreenRender(e.get_globalAlpha())}}{for(var ir=0;ir<ig.marksNeedingDraw.length;ir++){var it=ig.marksNeedingDraw[ir];if(e.shouldShowMarker(it)){this.$a(e,it,'blobOn',hB)}}}if(ik!==0){this.get_currentContext().restore()}}}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(hz||hA){hB='colorOverrideNone';var iu=hG.get_lineAttributes();for(var iv=0;iv<iu.length;iv++){var iw=iu[iv];if(iw.get_lineState()!=='lineStateHighlighted'){continue}var ix=iw.worldOffsets;var iy=ix.length;for(var iz=0;iz<iy;iz++){var iA=ix[iz];if(iA!==0){this.get_currentContext().save();this.get_currentContext().translate(iA,0)}var iB=true;if(e.get_hasGlobalTransparency()){if(e.get_markType()==='line'){iB=iw.endIndex-iw.startIndex>1}if(iB){this.beginOffScreenRender();e.set_forceOpaqueColors(true)}}{for(var iC=0;iC<iw.marksNeedingDraw.length;iC++){var iD=iw.marksNeedingDraw[iC];if(!(e.getMarkState(iD)==='markStateHighlighted')){hB='colorOverrideFog'}if(!(e.getMarkState(iD)==='markStateHighlighted'&&!iw.get_allHighlighted())){if(e.getLeft(iD)!==-1||e.getRight(iD)!==-1){this.$a(e,iD,'normalOn',hB)}else{this.$a(e,iD,'blobOn',hB)}}hB='colorOverrideNone'}}{for(var iE=0;iE<iw.marksNeedingDraw.length;iE++){var iF=iw.marksNeedingDraw[iE];if(e.getMarkState(iF)!=='markStateHighlighted'||e.getRight(iF)!==-1&&e.getMarkState(e.getRight(iF))!=='markStateHighlighted'){hB='colorOverrideFog'}this.$a(e,iF,'edgeOn',hB);hB='colorOverrideNone'}}if(e.get_hasGlobalTransparency()){if(iB){e.set_forceOpaqueColors(false);this.endOffScreenRender(e.get_globalAlpha())}}{for(var iG=0;iG<iw.marksNeedingDraw.length;iG++){var iH=iw.marksNeedingDraw[iG];if(!(e.getMarkState(iH)==='markStateHighlighted')){hB='colorOverrideFog'}if(!(e.getMarkState(iH)==='markStateHighlighted'&&!iw.get_allHighlighted())){if(e.shouldShowMarker(iH)){this.$a(e,iH,'blobOn',hB)}}hB='colorOverrideNone'}}{for(var iI=0;iI<iw.marksNeedingDraw.length;iI++){var iJ=iw.marksNeedingDraw[iI];if(e.getMarkState(iJ)==='markStateHighlighted'&&!iw.get_allHighlighted()){this.$a(e,iJ,'highlightedUnder',hB)}}}{for(var iK=0;iK<iw.marksNeedingDraw.length;iK++){var iL=iw.marksNeedingDraw[iK];if(e.getMarkState(iL)==='markStateHighlighted'&&!iw.get_allHighlighted()){this.$a(e,iL,'highlightedOn',hB)}}}if(iA!==0){this.get_currentContext().restore()}}}}break}case'selectedUnderPass':{if(hz||hA){hB='colorOverrideNone';var iM=hG.get_lineAttributes();for(var iN=0;iN<iM.length;iN++){var iO=iM[iN];if(iO.get_lineState()!=='lineStateSelected'){continue}var iP=iO.worldOffsets;var iQ=iP.length;for(var iR=0;iR<iQ;iR++){var iS=iP[iR];if(iS!==0){this.get_currentContext().save();this.get_currentContext().translate(iS,0)}{for(var iT=0;iT<iO.marksNeedingDraw.length;iT++){var iU=iO.marksNeedingDraw[iT];this.$a(e,iU,'selectedUnder1',hB);this.$a(e,iU,'selectedEdgeUnder',hB)}}if(iS!==0){this.get_currentContext().restore()}}}}break}case'selectedOnPass':{if(hz||hA){hB='colorOverrideOpaque';var iV=hG.get_lineAttributes();for(var iW=0;iW<iV.length;iW++){var iX=iV[iW];if(iX.get_lineState()!=='lineStateSelected'){continue}var iY=iX.worldOffsets;var iZ=iY.length;for(var ja=0;ja<iZ;ja++){var jb=iY[ja];if(jb!==0){this.get_currentContext().save();this.get_currentContext().translate(jb,0)}{for(var jc=0;jc<iX.marksNeedingDraw.length;jc++){var jd=iX.marksNeedingDraw[jc];if(e.getLeft(jd)!==-1||e.getRight(jd)!==-1){this.$a(e,jd,'normalOn',hB)}else{this.$a(e,jd,'blobOn',hB)}}}{for(var je=0;je<iX.marksNeedingDraw.length;je++){var jf=iX.marksNeedingDraw[je];this.$a(e,jf,'edgeOn',hB)}}{for(var jg=0;jg<iX.marksNeedingDraw.length;jg++){var jh=iX.marksNeedingDraw[jg];if(e.shouldShowMarker(jh)){this.$a(e,jh,'blobOn',hB)}}}if(!iX.get_allHighlighted()){{for(var ji=0;ji<iX.marksNeedingDraw.length;ji++){var jj=iX.marksNeedingDraw[ji];if(e.getMarkState(jj)==='markStateHighlighted'){this.$a(e,jj,'highlightedUnder',hB)}}}{for(var jk=0;jk<iX.marksNeedingDraw.length;jk++){var jl=iX.marksNeedingDraw[jk];if(e.getMarkState(jl)==='markStateHighlighted'){this.$a(e,jl,'highlightedOn',hB)}}}}{for(var jm=0;jm<iX.marksNeedingDraw.length;jm++){var jn=iX.marksNeedingDraw[jm];if(e.getMarkState(jn)==='markStateSelected'){this.$a(e,jn,'selectedUnder',hB)}}}{for(var jo=0;jo<iX.marksNeedingDraw.length;jo++){var jp=iX.marksNeedingDraw[jo];if(e.getMarkState(jp)==='markStateSelected'){this.$a(e,jp,'highlightedOn',hB)}}}if(jb!==0){this.get_currentContext().restore()}}}}break}}this.get_currentContext().restore()},$a:function(e,L,hy,hz){var hA=e.getLeft(L);var hB=e.getRight(L);switch(hy){case'normalUnder':{{bb.renderCircle(this.get_currentContext(),0+e.getMarkProperty('x',L),0+e.getMarkProperty('y',L),e.getMarkProperty('size',L),e.getMarkProperty('halo_color',L)[hz],4)}break}case'normalOn':{{bb.renderFilledCircle(this.get_currentContext(),0+e.getMarkProperty('x',L),0+e.getMarkProperty('y',L),e.getMarkProperty('size',L),e.getMarkColors(L)[hz])}break}case'blobUnder':{{bb.renderCircle(this.get_currentContext(),0+e.getMarkProperty('x',L),0+e.getMarkProperty('y',L),e.getMarkProperty('size',L)+3,e.getMarkProperty('halo_color',L)[hz],4)}break}case'blobOn':{{bb.renderFilledCircle(this.get_currentContext(),0+e.getMarkProperty('x',L),0+e.getMarkProperty('y',L),e.getMarkProperty('size',L)+3,e.getMarkColors(L)[hz])}break}case'highlightedUnder':{{bb.renderCircle(this.get_currentContext(),0+e.getMarkProperty('x',L),0+e.getMarkProperty('y',L),e.getMarkProperty('size',L)+4,e.getMarkProperty('selected_multi_prim_halo_color',L)[hz],4)}break}case'highlightedOn':{{bb.renderFilledCircle(this.get_currentContext(),0+e.getMarkProperty('x',L),0+e.getMarkProperty('y',L),e.getMarkProperty('size',L)+4,e.getMarkColors(L)[hz])}break}case'selectedUnder':{{bb.renderCircle(this.get_currentContext(),0+e.getMarkProperty('x',L),0+e.getMarkProperty('y',L),e.getMarkProperty('size',L)+4,e.getMarkProperty('selected_halo_color',L)[hz],4)}break}case'selectedUnder1':{{bb.renderCircle(this.get_currentContext(),0+e.getMarkProperty('x',L),0+e.getMarkProperty('y',L),e.getMarkProperty('size',L),e.getMarkProperty('selected_multi_prim_halo_color',L)[hz],4)}break}case'edgeUnder':{if(e.getRight(L)!==-1){this.renderLineEdge(e.getMarkProperty('x',L),e.getMarkProperty('x',hB),e.getMarkProperty('y',L),e.getMarkProperty('y',hB),e.getMarkProperty('size',L),e.getMarkProperty('size',hB),e.getMarkProperty('halo_color',L)[hz],4)}break}case'selectedEdgeUnder':{if(e.getRight(L)!==-1){this.renderLineEdge(e.getMarkProperty('x',L),e.getMarkProperty('x',hB),e.getMarkProperty('y',L),e.getMarkProperty('y',hB),e.getMarkProperty('size',L),e.getMarkProperty('size',hB),e.getMarkProperty('selected_multi_prim_halo_color',L)[hz],4)}break}case'edgeOn':{if(e.getRight(L)!==-1){if(e.isLineSegmentVisible(L,hB)){var hC=hz;if(e.isLineSegmentFiltered(L,hB)){hz='colorOverrideFog'}this.renderFilledLineEdge(e.getMarkProperty('x',L),e.getMarkProperty('x',hB),e.getMarkProperty('y',L),e.getMarkProperty('y',hB),e.getMarkProperty('size',L),e.getMarkProperty('size',hB),e.getMarkColors(L)[hz],e.getMarkColors(hB)[hz])}}break}default:{break}}if(e.clipCase!==0){this.get_currentContext().restore()}},$M:function(e,L,hy){var hz=e.get_hasSelection();var hA=e.get_hasBrushing();var hB='colorOverrideNone';var hC=e.$d(L);var hD=hC.firstMark;var hE=hC.lastMark;var hF=e.getUserPaneRectByIndex(L);switch(hy){case'normalUnderPass':{if(e.get_hasBackground()&&e.get_hasHalos()){if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}{for(var hG=hD;hG<=hE;hG++){if(!e.markNeedsDraw(hG)){continue}if(e.getMarkState(hG)!=='markStateNormal'){continue}var hH=e.getMarkInstanceOffsets(hG);var hI=hH.length;for(var hJ=0;hJ<hI;hJ++){var hK=hH[hJ];if(hK!==0){this.get_currentContext().save();this.get_currentContext().translate(hK,0)}this.$g(e,hG,'normalUnder',hB);if(hK!==0){this.get_currentContext().restore()}}}}if(hz||hA){hB='colorOverrideNone';{for(var hL=hD;hL<=hE;hL++){if(!e.markNeedsDraw(hL)){continue}if(e.getMarkState(hL)!=='markStateHighlighted'){continue}var hM=e.getMarkInstanceOffsets(hL);var hN=hM.length;for(var hO=0;hO<hN;hO++){var hP=hM[hO];if(hP!==0){this.get_currentContext().save();this.get_currentContext().translate(hP,0)}this.$g(e,hL,'normalUnder',hB);if(hP!==0){this.get_currentContext().restore()}}}}}}break}case'normalOnPass':{if(hz||hA){hB='colorOverrideFog'}else{hB='colorOverrideNone'}{for(var hQ=hD;hQ<=hE;hQ++){if(!e.markNeedsDraw(hQ)){continue}if(e.getMarkState(hQ)!=='markStateNormal'){continue}var hR=e.getMarkInstanceOffsets(hQ);var hS=hR.length;for(var hT=0;hT<hS;hT++){var hU=hR[hT];if(hU!==0){this.get_currentContext().save();this.get_currentContext().translate(hU,0)}this.$g(e,hQ,'normalOn',hB);if(e.drawBorder){this.$g(e,hQ,'border',hB)}if(hU!==0){this.get_currentContext().restore()}}}}break}case'highlightedUnderPass':{break}case'highlightedOnPass':{if(hz||hA){hB='colorOverrideNone';{for(var hV=hD;hV<=hE;hV++){if(!e.markNeedsDraw(hV)){continue}if(e.getMarkState(hV)!=='markStateHighlighted'){continue}var hW=e.getMarkInstanceOffsets(hV);var hX=hW.length;for(var hY=0;hY<hX;hY++){var hZ=hW[hY];if(hZ!==0){this.get_currentContext().save();this.get_currentContext().translate(hZ,0)}this.$g(e,hV,'normalOn',hB);if(e.drawBorder){this.$g(e,hV,'border',hB)}if(hZ!==0){this.get_currentContext().restore()}}}}}break}case'selectedUnderPass':{if(hz||hA){hB='colorOverrideOpaque';{for(var ia=hD;ia<=hE;ia++){if(!e.markNeedsDraw(ia)){continue}if(e.getMarkState(ia)!=='markStateSelected'){continue}var ib=e.getMarkInstanceOffsets(ia);var ic=ib.length;for(var id=0;id<ic;id++){var ie=ib[id];if(ie!==0){this.get_currentContext().save();this.get_currentContext().translate(ie,0)}this.$g(e,ia,'selectedUnder',hB);if(ie!==0){this.get_currentContext().restore()}}}}}break}case'selectedOnPass':{if(hz||hA){hB='colorOverrideOpaque';{for(var ig=hD;ig<=hE;ig++){if(!e.markNeedsDraw(ig)){continue}if(e.getMarkState(ig)!=='markStateSelected'){continue}var ih=e.getMarkInstanceOffsets(ig);var ii=ih.length;for(var ij=0;ij<ii;ij++){var ik=ih[ij];if(ik!==0){this.get_currentContext().save();this.get_currentContext().translate(ik,0)}this.$g(e,ig,'normalOn',hB);if(e.drawBorder){this.$g(e,ig,'border',hB)}if(ik!==0){this.get_currentContext().restore()}}}}}break}}},$g:function(e,L,hy,hz){var hA=e.getMarkProperty('shape_id',L);if(!en.$1u(hA,hy)){return}var hB=e.getMarkProperty('x',L);var hC=e.getMarkProperty('y',L);var hD=e.shouldStampThisShapeMark(L);if(!hD){this.$N(e,hB,hC,L,hy,hz,false);return}if(!tab.FeatureFlags.isEnabled('FastRendering')){return}var hE=e.getMarkProperty('size',L);var hF=bb.getShapeColorForLayer(e,L,hy,hz);var hG=en.$j(hA,hy,hE)+2;var hH=hG/2;var hI=hC-hH;var hJ=hB-hH;var hK=this.get_currentContext();var hL=function(){var hN=document.createElement('canvas');hN.width=hG;hN.height=hG;var hO=new gg(hN.getContext('2d'));if(tab.FeatureParamsLookup.getBool(38)){hO.set_shapeFillStyle('rgba(255, 0, 0, 0.12)');hO.fillRect(0,0,hG,hG)}var hP=new en(hN,hO);hP.$N(e,hH,hH,L,hy,hz,true);return hN};var hM=tab.ApplicationModel.get_instance().get_shapeManager().getCachedStampCanvas(hA,hy,hz,hF,hE,hL);if(ss.isValue(hM)){hK.drawImage3(hM,hJ+0.5<<0,hI+0.5<<0,hG,hG)}else{this.$N(e,hB,hC,L,hy,hz,false)}},$N:function(e,L,hy,hz,hA,hB,hC){var hD=e.clipCase!==0&&!hC;if(hD){this.get_currentContext().save();this.clipRect(e.clipCase,e.getMarkProperty('cell_x',hz),e.getMarkProperty('cell_y',hz),e.getMarkProperty('clip_width',hz),e.getMarkProperty('clip_height',hz))}var hE=e.getMarkProperty('shape_id',hz);switch(hE){case'shapeIDCircle':{this.$s(e,L,hy,hz,hA,hB);break}case'shapeIDFilledCircle':{this.$v(e,L,hy,hz,hA,hB);break}case'shapeIDUnscaledFilledCircle':{this.$L(e,L,hy,hz,hA,hB);break}case'shapeIDSquare':{this.$I(e,L,hy,hz,hA,hB);break}case'shapeIDFilledSquare':{this.$B(e,L,hy,hz,hA,hB);break}case'shapeIDAsterisk':{this.$r(e,L,hy,hz,hA,hB);break}case'shapeIDPlus':{this.$G(e,L,hy,hz,hA,hB);break}case'shapeIDFilledPlus':{this.$z(e,L,hy,hz,hA,hB);break}case'shapeIDTimes':{this.$J(e,L,hy,hz,hA,hB);break}case'shapeIDFilledTimes':{this.$D(e,L,hy,hz,hA,hB);break}case'shapeIDDiamond':{this.$t(e,L,hy,hz,hA,hB);break}case'shapeIDFilledDiamond':{this.$w(e,L,hy,hz,hA,hB);break}case'shapeIDTriangle':{this.$K(e,L,hy,hz,hA,hB);break}case'shapeIDFilledTriangle':{this.$E(e,L,hy,hz,hA,hB);break}case'shapeIDDownTriangle':{this.$u(e,L,hy,hz,hA,hB);break}case'shapeIDFilledDownTriangle':{this.$x(e,L,hy,hz,hA,hB);break}case'shapeIDLeftTriangle':{this.$F(e,L,hy,hz,hA,hB);break}case'shapeIDFilledLeftTriangle':{this.$y(e,L,hy,hz,hA,hB);break}case'shapeIDRightTriangle':{this.$H(e,L,hy,hz,hA,hB);break}case'shapeIDFilledRightTriangle':{this.$A(e,L,hy,hz,hA,hB);break}case'shapeIDFilledStar':{this.$C(e,L,hy,hz,hA,hB);break}default:{bb.renderCustomShape(this.get_currentContext(),e,hz,hA,hB);break}}if(hD){this.get_currentContext().restore()}},$s:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{{bb.renderCircle(this.get_currentContext(),0+L,0+hy,e.getMarkProperty('size',hz)*0.958333333333333,e.getMarkProperty('halo_color',hz)[hB],4)}break}case'normalOn':{{bb.renderCircle(this.get_currentContext(),0+L,0+hy,e.getMarkProperty('size',hz)*0.958333333333333,e.getMarkColors(hz)[hB],2)}break}case'selectedUnder':{{bb.renderCircle(this.get_currentContext(),0+L,0+hy,e.getMarkProperty('size',hz)*0.958333333333333,e.getMarkProperty('selected_halo_color',hz)[hB],4)}break}default:{break}}},$v:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{{bb.renderCircle(this.get_currentContext(),0+L,0+hy,e.getMarkProperty('size',hz)*0.979166666666667,e.getMarkProperty('halo_color',hz)[hB],4)}break}case'normalOn':{{bb.renderFilledCircle(this.get_currentContext(),0+L,0+hy,e.getMarkProperty('size',hz)*0.979166666666667,e.getMarkColors(hz)[hB])}break}case'selectedUnder':{{bb.renderCircle(this.get_currentContext(),0+L,0+hy,e.getMarkProperty('size',hz)*0.979166666666667,e.getMarkProperty('selected_halo_color',hz)[hB],4)}break}case'border':{{bb.renderCircle(this.get_currentContext(),0+L,0+hy,e.getMarkProperty('size',hz)*0.979166666666667,e.getMarkProperty('border_color',hz)[hB],1)}break}default:{break}}},$L:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{{bb.renderCircle(this.get_currentContext(),0+L,0+hy,e.getMarkProperty('size',hz),e.getMarkProperty('halo_color',hz)[hB],4)}break}case'normalOn':{{bb.renderFilledCircle(this.get_currentContext(),0+L,0+hy,e.getMarkProperty('size',hz),e.getMarkColors(hz)[hB])}break}case'selectedUnder':{{bb.renderCircle(this.get_currentContext(),0+L,0+hy,e.getMarkProperty('size',hz),e.getMarkProperty('selected_halo_color',hz)[hB],4)}break}case'border':{{bb.renderCircle(this.get_currentContext(),0+L,0+hy,e.getMarkProperty('size',hz),e.getMarkProperty('border_color',hz)[hB],1)}break}default:{break}}},$I:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{{bb.renderRectangle(this.get_currentContext(),L+0,hy+0,e.getMarkProperty('size',hz)*0.895833333333333,e.getMarkProperty('size',hz)*0.895833333333333,e.getMarkProperty('halo_color',hz)[hB],4)}break}case'normalOn':{{bb.renderRectangle(this.get_currentContext(),L+0,hy+0,e.getMarkProperty('size',hz)*0.895833333333333,e.getMarkProperty('size',hz)*0.895833333333333,e.getMarkColors(hz)[hB],2)}break}case'selectedUnder':{{bb.renderRectangle(this.get_currentContext(),L+0,hy+0,e.getMarkProperty('size',hz)*0.895833333333333,e.getMarkProperty('size',hz)*0.895833333333333,e.getMarkProperty('selected_halo_color',hz)[hB],4)}break}default:{break}}},$B:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{{bb.renderRectangle(this.get_currentContext(),L+0,hy+0,e.getMarkProperty('size',hz)*0.9375,e.getMarkProperty('size',hz)*0.9375,e.getMarkProperty('halo_color',hz)[hB],4)}break}case'normalOn':{{this.renderFilledRectangle(L+0,hy+0,e.getMarkProperty('size',hz)*0.9375,e.getMarkProperty('size',hz)*0.9375,e.getMarkColors(hz)[hB])}break}case'selectedUnder':{{bb.renderRectangle(this.get_currentContext(),L+0,hy+0,e.getMarkProperty('size',hz)*0.9375,e.getMarkProperty('size',hz)*0.9375,e.getMarkProperty('selected_halo_color',hz)[hB],4)}break}case'border':{{bb.renderRectangle(this.get_currentContext(),L+0,hy+0,e.getMarkProperty('size',hz)*0.9375,e.getMarkProperty('size',hz)*0.9375,e.getMarkProperty('border_color',hz)[hB],1)}break}default:{break}}},$r:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.958333333333333/2;var hD=0.899999976158142*hC;var hE=e.getMarkProperty('size',hz)*0.958333333333333/4;{{this.get_currentContext().set_lineCap('square');var hF=L;var hG=hy;var hH=new Array(4);hH[0]=hF+0;hH[1]=hG+-hC;hH[2]=hF+0;hH[3]=hG+hC;this.renderLine(hH,4,e.getMarkProperty('halo_color',hz)[hB],true)}}{{this.get_currentContext().set_lineCap('square');var hI=L;var hJ=hy;var hK=new Array(4);hK[0]=hI+-hD;hK[1]=hJ+-hE;hK[2]=hI+hD;hK[3]=hJ+hE;this.renderLine(hK,4,e.getMarkProperty('halo_color',hz)[hB],true)}}{{this.get_currentContext().set_lineCap('square');var hL=L;var hM=hy;var hN=new Array(4);hN[0]=hL+hD;hN[1]=hM+-hE;hN[2]=hL+-hD;hN[3]=hM+hE;this.renderLine(hN,4,e.getMarkProperty('halo_color',hz)[hB],true)}}break}case'normalOn':{var hO=e.getMarkProperty('size',hz)*0.958333333333333/2;var hP=0.899999976158142*hO;var hQ=e.getMarkProperty('size',hz)*0.958333333333333/4;{{this.get_currentContext().set_lineCap('square');var hR=L;var hS=hy;var hT=new Array(4);hT[0]=hR+0;hT[1]=hS+-hO;hT[2]=hR+0;hT[3]=hS+hO;this.renderLine(hT,2,e.getMarkColors(hz)[hB],true)}}{{this.get_currentContext().set_lineCap('square');var hU=L;var hV=hy;var hW=new Array(4);hW[0]=hU+-hP;hW[1]=hV+-hQ;hW[2]=hU+hP;hW[3]=hV+hQ;this.renderLine(hW,2,e.getMarkColors(hz)[hB],true)}}{{this.get_currentContext().set_lineCap('square');var hX=L;var hY=hy;var hZ=new Array(4);hZ[0]=hX+hP;hZ[1]=hY+-hQ;hZ[2]=hX+-hP;hZ[3]=hY+hQ;this.renderLine(hZ,2,e.getMarkColors(hz)[hB],true)}}break}case'selectedUnder':{var ia=e.getMarkProperty('size',hz)*0.958333333333333/2;var ib=0.899999976158142*ia;var ic=e.getMarkProperty('size',hz)*0.958333333333333/4;{{this.get_currentContext().set_lineCap('square');var id=L;var ie=hy;var ig=new Array(4);ig[0]=id+0;ig[1]=ie+-ia;ig[2]=id+0;ig[3]=ie+ia;this.renderLine(ig,4,e.getMarkProperty('selected_halo_color',hz)[hB],true)}}{{this.get_currentContext().set_lineCap('square');var ih=L;var ii=hy;var ij=new Array(4);ij[0]=ih+-ib;ij[1]=ii+-ic;ij[2]=ih+ib;ij[3]=ii+ic;this.renderLine(ij,4,e.getMarkProperty('selected_halo_color',hz)[hB],true)}}{{this.get_currentContext().set_lineCap('square');var ik=L;var il=hy;var im=new Array(4);im[0]=ik+ib;im[1]=il+-ic;im[2]=ik+-ib;im[3]=il+ic;this.renderLine(im,4,e.getMarkProperty('selected_halo_color',hz)[hB],true)}}break}default:{break}}},$G:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.916666666666667/2;{{this.get_currentContext().set_lineCap('square');var hD=L;var hE=hy;var hF=new Array(4);hF[0]=hD+0;hF[1]=hE+-hC;hF[2]=hD+0;hF[3]=hE+hC;this.renderLine(hF,4,e.getMarkProperty('halo_color',hz)[hB],true)}}{{this.get_currentContext().set_lineCap('square');var hG=L;var hH=hy;var hI=new Array(4);hI[0]=hG+-hC;hI[1]=hH+0;hI[2]=hG+hC;hI[3]=hH+0;this.renderLine(hI,4,e.getMarkProperty('halo_color',hz)[hB],true)}}break}case'normalOn':{var hJ=e.getMarkProperty('size',hz)*0.916666666666667/2;{{this.get_currentContext().set_lineCap('square');var hK=L;var hL=hy;var hM=new Array(4);hM[0]=hK+0;hM[1]=hL+-hJ;hM[2]=hK+0;hM[3]=hL+hJ;this.renderLine(hM,2,e.getMarkColors(hz)[hB],true)}}{{this.get_currentContext().set_lineCap('square');var hN=L;var hO=hy;var hP=new Array(4);hP[0]=hN+-hJ;hP[1]=hO+0;hP[2]=hN+hJ;hP[3]=hO+0;this.renderLine(hP,2,e.getMarkColors(hz)[hB],true)}}break}case'selectedUnder':{var hQ=e.getMarkProperty('size',hz)*0.916666666666667/2;{{this.get_currentContext().set_lineCap('square');var hR=L;var hS=hy;var hT=new Array(4);hT[0]=hR+0;hT[1]=hS+-hQ;hT[2]=hR+0;hT[3]=hS+hQ;this.renderLine(hT,4,e.getMarkProperty('selected_halo_color',hz)[hB],true)}}{{this.get_currentContext().set_lineCap('square');var hU=L;var hV=hy;var hW=new Array(4);hW[0]=hU+-hQ;hW[1]=hV+0;hW[2]=hU+hQ;hW[3]=hV+0;this.renderLine(hW,4,e.getMarkProperty('selected_halo_color',hz)[hB],true)}}break}default:{break}}},$z:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.9375/2;var hD=hC/3;{{var hE=L;var hF=hy;var hG=new Array(24);hG[0]=hE+-hD;hG[1]=hF+-hC;hG[2]=hE+-hD;hG[3]=hF+-hD;hG[4]=hE+-hC;hG[5]=hF+-hD;hG[6]=hE+-hC;hG[7]=hF+hD;hG[8]=hE+-hD;hG[9]=hF+hD;hG[10]=hE+-hD;hG[11]=hF+hC;hG[12]=hE+hD;hG[13]=hF+hC;hG[14]=hE+hD;hG[15]=hF+hD;hG[16]=hE+hC;hG[17]=hF+hD;hG[18]=hE+hC;hG[19]=hF+-hD;hG[20]=hE+hD;hG[21]=hF+-hD;hG[22]=hE+hD;hG[23]=hF+-hC;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hG,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hH=e.getMarkProperty('size',hz)*0.9375/2;var hI=hH/3;{{var hJ=L;var hK=hy;var hL=new Array(24);hL[0]=hJ+-hI;hL[1]=hK+-hH;hL[2]=hJ+-hI;hL[3]=hK+-hI;hL[4]=hJ+-hH;hL[5]=hK+-hI;hL[6]=hJ+-hH;hL[7]=hK+hI;hL[8]=hJ+-hI;hL[9]=hK+hI;hL[10]=hJ+-hI;hL[11]=hK+hH;hL[12]=hJ+hI;hL[13]=hK+hH;hL[14]=hJ+hI;hL[15]=hK+hI;hL[16]=hJ+hH;hL[17]=hK+hI;hL[18]=hJ+hH;hL[19]=hK+-hI;hL[20]=hJ+hI;hL[21]=hK+-hI;hL[22]=hJ+hI;hL[23]=hK+-hH;this.renderFilledPolygon(hL,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hM=e.getMarkProperty('size',hz)*0.9375/2;var hN=hM/3;{{var hO=L;var hP=hy;var hQ=new Array(24);hQ[0]=hO+-hN;hQ[1]=hP+-hM;hQ[2]=hO+-hN;hQ[3]=hP+-hN;hQ[4]=hO+-hM;hQ[5]=hP+-hN;hQ[6]=hO+-hM;hQ[7]=hP+hN;hQ[8]=hO+-hN;hQ[9]=hP+hN;hQ[10]=hO+-hN;hQ[11]=hP+hM;hQ[12]=hO+hN;hQ[13]=hP+hM;hQ[14]=hO+hN;hQ[15]=hP+hN;hQ[16]=hO+hM;hQ[17]=hP+hN;hQ[18]=hO+hM;hQ[19]=hP+-hN;hQ[20]=hO+hN;hQ[21]=hP+-hN;hQ[22]=hO+hN;hQ[23]=hP+-hM;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hQ,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$J:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.875/2;{{this.get_currentContext().set_lineCap('square');var hD=L;var hE=hy;var hF=new Array(4);hF[0]=hD+-hC;hF[1]=hE+-hC;hF[2]=hD+hC;hF[3]=hE+hC;this.renderLine(hF,4,e.getMarkProperty('halo_color',hz)[hB],true)}}{{this.get_currentContext().set_lineCap('square');var hG=L;var hH=hy;var hI=new Array(4);hI[0]=hG+-hC;hI[1]=hH+hC;hI[2]=hG+hC;hI[3]=hH+-hC;this.renderLine(hI,4,e.getMarkProperty('halo_color',hz)[hB],true)}}break}case'normalOn':{var hJ=e.getMarkProperty('size',hz)*0.875/2;{{this.get_currentContext().set_lineCap('square');var hK=L;var hL=hy;var hM=new Array(4);hM[0]=hK+-hJ;hM[1]=hL+-hJ;hM[2]=hK+hJ;hM[3]=hL+hJ;this.renderLine(hM,2,e.getMarkColors(hz)[hB],true)}}{{this.get_currentContext().set_lineCap('square');var hN=L;var hO=hy;var hP=new Array(4);hP[0]=hN+-hJ;hP[1]=hO+hJ;hP[2]=hN+hJ;hP[3]=hO+-hJ;this.renderLine(hP,2,e.getMarkColors(hz)[hB],true)}}break}case'selectedUnder':{var hQ=e.getMarkProperty('size',hz)*0.875/2;{{this.get_currentContext().set_lineCap('square');var hR=L;var hS=hy;var hT=new Array(4);hT[0]=hR+-hQ;hT[1]=hS+-hQ;hT[2]=hR+hQ;hT[3]=hS+hQ;this.renderLine(hT,4,e.getMarkProperty('selected_halo_color',hz)[hB],true)}}{{this.get_currentContext().set_lineCap('square');var hU=L;var hV=hy;var hW=new Array(4);hW[0]=hU+-hQ;hW[1]=hV+hQ;hW[2]=hU+hQ;hW[3]=hV+-hQ;this.renderLine(hW,4,e.getMarkProperty('selected_halo_color',hz)[hB],true)}}break}default:{break}}},$D:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.9375/2;var hD=e.getMarkProperty('size',hz)*0.9375/4;{{var hE=L;var hF=hy;var hG=new Array(24);hG[0]=hE+-hD;hG[1]=hF+-hC;hG[2]=hE+-hC;hG[3]=hF+-hD;hG[4]=hE+-hD;hG[5]=hF+0;hG[6]=hE+-hC;hG[7]=hF+hD;hG[8]=hE+-hD;hG[9]=hF+hC;hG[10]=hE+0;hG[11]=hF+hD;hG[12]=hE+hD;hG[13]=hF+hC;hG[14]=hE+hC;hG[15]=hF+hD;hG[16]=hE+hD;hG[17]=hF+0;hG[18]=hE+hC;hG[19]=hF+-hD;hG[20]=hE+hD;hG[21]=hF+-hC;hG[22]=hE+0;hG[23]=hF+-hD;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hG,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hH=e.getMarkProperty('size',hz)*0.9375/2;var hI=e.getMarkProperty('size',hz)*0.9375/4;{{var hJ=L;var hK=hy;var hL=new Array(24);hL[0]=hJ+-hI;hL[1]=hK+-hH;hL[2]=hJ+-hH;hL[3]=hK+-hI;hL[4]=hJ+-hI;hL[5]=hK+0;hL[6]=hJ+-hH;hL[7]=hK+hI;hL[8]=hJ+-hI;hL[9]=hK+hH;hL[10]=hJ+0;hL[11]=hK+hI;hL[12]=hJ+hI;hL[13]=hK+hH;hL[14]=hJ+hH;hL[15]=hK+hI;hL[16]=hJ+hI;hL[17]=hK+0;hL[18]=hJ+hH;hL[19]=hK+-hI;hL[20]=hJ+hI;hL[21]=hK+-hH;hL[22]=hJ+0;hL[23]=hK+-hI;this.renderFilledPolygon(hL,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hM=e.getMarkProperty('size',hz)*0.9375/2;var hN=e.getMarkProperty('size',hz)*0.9375/4;{{var hO=L;var hP=hy;var hQ=new Array(24);hQ[0]=hO+-hN;hQ[1]=hP+-hM;hQ[2]=hO+-hM;hQ[3]=hP+-hN;hQ[4]=hO+-hN;hQ[5]=hP+0;hQ[6]=hO+-hM;hQ[7]=hP+hN;hQ[8]=hO+-hN;hQ[9]=hP+hM;hQ[10]=hO+0;hQ[11]=hP+hN;hQ[12]=hO+hN;hQ[13]=hP+hM;hQ[14]=hO+hM;hQ[15]=hP+hN;hQ[16]=hO+hN;hQ[17]=hP+0;hQ[18]=hO+hM;hQ[19]=hP+-hN;hQ[20]=hO+hN;hQ[21]=hP+-hM;hQ[22]=hO+0;hQ[23]=hP+-hN;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hQ,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$t:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*1.04166666666667/2;{{var hD=L;var hE=hy;var hF=new Array(8);hF[0]=hD+0;hF[1]=hE+-hC;hF[2]=hD+-hC;hF[3]=hE+0;hF[4]=hD+0;hF[5]=hE+hC;hF[6]=hD+hC;hF[7]=hE+0;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hF,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hG=e.getMarkProperty('size',hz)*1.04166666666667/2;{{var hH=L;var hI=hy;var hJ=new Array(8);hJ[0]=hH+0;hJ[1]=hI+-hG;hJ[2]=hH+-hG;hJ[3]=hI+0;hJ[4]=hH+0;hJ[5]=hI+hG;hJ[6]=hH+hG;hJ[7]=hI+0;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hJ,2,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hK=e.getMarkProperty('size',hz)*1.04166666666667/2;{{var hL=L;var hM=hy;var hN=new Array(8);hN[0]=hL+0;hN[1]=hM+-hK;hN[2]=hL+-hK;hN[3]=hM+0;hN[4]=hL+0;hN[5]=hM+hK;hN[6]=hL+hK;hN[7]=hM+0;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hN,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$w:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*1.04166666666667/2;{{var hD=L;var hE=hy;var hF=new Array(8);hF[0]=hD+0;hF[1]=hE+-hC;hF[2]=hD+-hC;hF[3]=hE+0;hF[4]=hD+0;hF[5]=hE+hC;hF[6]=hD+hC;hF[7]=hE+0;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hF,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hG=e.getMarkProperty('size',hz)*1.04166666666667/2;{{var hH=L;var hI=hy;var hJ=new Array(8);hJ[0]=hH+0;hJ[1]=hI+-hG;hJ[2]=hH+-hG;hJ[3]=hI+0;hJ[4]=hH+0;hJ[5]=hI+hG;hJ[6]=hH+hG;hJ[7]=hI+0;this.renderFilledPolygon(hJ,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hK=e.getMarkProperty('size',hz)*1.04166666666667/2;{{var hL=L;var hM=hy;var hN=new Array(8);hN[0]=hL+0;hN[1]=hM+-hK;hN[2]=hL+-hK;hN[3]=hM+0;hN[4]=hL+0;hN[5]=hM+hK;hN[6]=hL+hK;hN[7]=hM+0;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hN,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$K:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.895833333333333/2;{{var hD=L;var hE=hy;var hF=new Array(6);hF[0]=hD+0;hF[1]=hE+-hC;hF[2]=hD+-hC;hF[3]=hE+hC;hF[4]=hD+hC;hF[5]=hE+hC;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hF,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hG=e.getMarkProperty('size',hz)*0.895833333333333/2;{{var hH=L;var hI=hy;var hJ=new Array(6);hJ[0]=hH+0;hJ[1]=hI+-hG;hJ[2]=hH+-hG;hJ[3]=hI+hG;hJ[4]=hH+hG;hJ[5]=hI+hG;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hJ,2,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hK=e.getMarkProperty('size',hz)*0.895833333333333/2;{{var hL=L;var hM=hy;var hN=new Array(6);hN[0]=hL+0;hN[1]=hM+-hK;hN[2]=hL+-hK;hN[3]=hM+hK;hN[4]=hL+hK;hN[5]=hM+hK;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hN,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$E:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.916666666666667/2;{{var hD=L;var hE=hy;var hF=new Array(6);hF[0]=hD+0;hF[1]=hE+-hC;hF[2]=hD+-hC;hF[3]=hE+hC;hF[4]=hD+hC;hF[5]=hE+hC;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hF,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hG=e.getMarkProperty('size',hz)*0.916666666666667/2;{{var hH=L;var hI=hy;var hJ=new Array(6);hJ[0]=hH+0;hJ[1]=hI+-hG;hJ[2]=hH+-hG;hJ[3]=hI+hG;hJ[4]=hH+hG;hJ[5]=hI+hG;this.renderFilledPolygon(hJ,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hK=e.getMarkProperty('size',hz)*0.916666666666667/2;{{var hL=L;var hM=hy;var hN=new Array(6);hN[0]=hL+0;hN[1]=hM+-hK;hN[2]=hL+-hK;hN[3]=hM+hK;hN[4]=hL+hK;hN[5]=hM+hK;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hN,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$u:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.895833333333333/2;{{var hD=L;var hE=hy;var hF=new Array(6);hF[0]=hD+0;hF[1]=hE+hC;hF[2]=hD+-hC;hF[3]=hE+-hC;hF[4]=hD+hC;hF[5]=hE+-hC;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hF,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hG=e.getMarkProperty('size',hz)*0.895833333333333/2;{{var hH=L;var hI=hy;var hJ=new Array(6);hJ[0]=hH+0;hJ[1]=hI+hG;hJ[2]=hH+-hG;hJ[3]=hI+-hG;hJ[4]=hH+hG;hJ[5]=hI+-hG;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hJ,2,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hK=e.getMarkProperty('size',hz)*0.895833333333333/2;{{var hL=L;var hM=hy;var hN=new Array(6);hN[0]=hL+0;hN[1]=hM+hK;hN[2]=hL+-hK;hN[3]=hM+-hK;hN[4]=hL+hK;hN[5]=hM+-hK;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hN,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$x:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.916666666666667/2;{{var hD=L;var hE=hy;var hF=new Array(6);hF[0]=hD+0;hF[1]=hE+hC;hF[2]=hD+-hC;hF[3]=hE+-hC;hF[4]=hD+hC;hF[5]=hE+-hC;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hF,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hG=e.getMarkProperty('size',hz)*0.916666666666667/2;{{var hH=L;var hI=hy;var hJ=new Array(6);hJ[0]=hH+0;hJ[1]=hI+hG;hJ[2]=hH+-hG;hJ[3]=hI+-hG;hJ[4]=hH+hG;hJ[5]=hI+-hG;this.renderFilledPolygon(hJ,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hK=e.getMarkProperty('size',hz)*0.916666666666667/2;{{var hL=L;var hM=hy;var hN=new Array(6);hN[0]=hL+0;hN[1]=hM+e.getMarkProperty('size',hz)*0.916666666666667/2;hN[2]=hL+-hK;hN[3]=hM+-hK;hN[4]=hL+hK;hN[5]=hM+-hK;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hN,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$F:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.895833333333333/2;{{var hD=L;var hE=hy;var hF=new Array(6);hF[0]=hD+-hC;hF[1]=hE+0;hF[2]=hD+hC;hF[3]=hE+-hC;hF[4]=hD+hC;hF[5]=hE+hC;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hF,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hG=e.getMarkProperty('size',hz)*0.895833333333333/2;{{var hH=L;var hI=hy;var hJ=new Array(6);hJ[0]=hH+-hG;hJ[1]=hI+0;hJ[2]=hH+hG;hJ[3]=hI+-hG;hJ[4]=hH+hG;hJ[5]=hI+hG;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hJ,2,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hK=e.getMarkProperty('size',hz)*0.895833333333333/2;{{var hL=L;var hM=hy;var hN=new Array(6);hN[0]=hL+-hK;hN[1]=hM+0;hN[2]=hL+hK;hN[3]=hM+-hK;hN[4]=hL+hK;hN[5]=hM+hK;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hN,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$y:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.916666666666667/2;{{var hD=L;var hE=hy;var hF=new Array(6);hF[0]=hD+-hC;hF[1]=hE+0;hF[2]=hD+hC;hF[3]=hE+-hC;hF[4]=hD+hC;hF[5]=hE+hC;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hF,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hG=e.getMarkProperty('size',hz)*0.916666666666667/2;{{var hH=L;var hI=hy;var hJ=new Array(6);hJ[0]=hH+-hG;hJ[1]=hI+0;hJ[2]=hH+hG;hJ[3]=hI+-hG;hJ[4]=hH+hG;hJ[5]=hI+hG;this.renderFilledPolygon(hJ,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hK=e.getMarkProperty('size',hz)*0.916666666666667/2;{{var hL=L;var hM=hy;var hN=new Array(6);hN[0]=hL+-hK;hN[1]=hM+0;hN[2]=hL+hK;hN[3]=hM+-hK;hN[4]=hL+hK;hN[5]=hM+hK;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hN,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$H:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.895833333333333/2;{{var hD=L;var hE=hy;var hF=new Array(6);hF[0]=hD+-hC;hF[1]=hE+-hC;hF[2]=hD+-hC;hF[3]=hE+hC;hF[4]=hD+hC;hF[5]=hE+0;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hF,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hG=e.getMarkProperty('size',hz)*0.895833333333333/2;{{var hH=L;var hI=hy;var hJ=new Array(6);hJ[0]=hH+-hG;hJ[1]=hI+-hG;hJ[2]=hH+-hG;hJ[3]=hI+hG;hJ[4]=hH+hG;hJ[5]=hI+0;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hJ,2,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hK=e.getMarkProperty('size',hz)*0.895833333333333/2;{{var hL=L;var hM=hy;var hN=new Array(6);hN[0]=hL+-hK;hN[1]=hM+-hK;hN[2]=hL+-hK;hN[3]=hM+hK;hN[4]=hL+hK;hN[5]=hM+0;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hN,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$A:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*0.916666666666667/2;{{var hD=L;var hE=hy;var hF=new Array(6);hF[0]=hD+-hC;hF[1]=hE+-hC;hF[2]=hD+-hC;hF[3]=hE+hC;hF[4]=hD+hC;hF[5]=hE+0;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hF,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hG=e.getMarkProperty('size',hz)*0.916666666666667/2;{{var hH=L;var hI=hy;var hJ=new Array(6);hJ[0]=hH+-hG;hJ[1]=hI+-hG;hJ[2]=hH+-hG;hJ[3]=hI+hG;hJ[4]=hH+hG;hJ[5]=hI+0;this.renderFilledPolygon(hJ,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hK=e.getMarkProperty('size',hz)*0.916666666666667/2;{{var hL=L;var hM=hy;var hN=new Array(6);hN[0]=hL+-hK;hN[1]=hM+-hK;hN[2]=hL+-hK;hN[3]=hM+hK;hN[4]=hL+hK;hN[5]=hM+0;this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hN,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$C:function(e,L,hy,hz,hA,hB){switch(hA){case'normalUnder':{var hC=e.getMarkProperty('size',hz)*1.09166666666667;var hD=hC/2;var hE=hC*0.3877;{{var hF=L;var hG=hy;var hH=new Array(20);hH[0]=hF+0;hH[1]=hG+(-hD+hC*0.0246);hH[2]=hF+(-hD+hC*0.3817);hH[3]=hG+(-hD+hE);hH[4]=hF+-hD;hH[5]=hG+(-hD+hE);hH[6]=hF+(-hD+hC*0.3088);hH[7]=hG+(-hD+hC*0.612);hH[8]=hF+(-hD+hC*0.1909);hH[9]=hG+(-hD+hC*0.9751);hH[10]=hF+0;hH[11]=hG+(-hD+hC*0.7507);hH[12]=hF+(-hD+hC*0.8085);hH[13]=hG+(-hD+hC*0.9751);hH[14]=hF+(-hD+hC*0.6905);hH[15]=hG+(-hD+hC*0.612);hH[16]=hF+hD;hH[17]=hG+(-hD+hE);hH[18]=hF+(-hD+hC*0.6176);hH[19]=hG+(-hD+hE);this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hH,4,e.getMarkProperty('halo_color',hz)[hB])}}break}case'normalOn':{var hI=e.getMarkProperty('size',hz)*1.09166666666667;var hJ=hI/2;var hK=hI*0.3877;{{var hL=L;var hM=hy;var hN=new Array(20);hN[0]=hL+0;hN[1]=hM+(-hJ+hI*0.0246);hN[2]=hL+(-hJ+hI*0.3817);hN[3]=hM+(-hJ+hK);hN[4]=hL+-hJ;hN[5]=hM+(-hJ+hK);hN[6]=hL+(-hJ+hI*0.3088);hN[7]=hM+(-hJ+hI*0.612);hN[8]=hL+(-hJ+hI*0.1909);hN[9]=hM+(-hJ+hI*0.9751);hN[10]=hL+0;hN[11]=hM+(-hJ+hI*0.7507);hN[12]=hL+(-hJ+hI*0.8085);hN[13]=hM+(-hJ+hI*0.9751);hN[14]=hL+(-hJ+hI*0.6905);hN[15]=hM+(-hJ+hI*0.612);hN[16]=hL+hJ;hN[17]=hM+(-hJ+hK);hN[18]=hL+(-hJ+hI*0.6176);hN[19]=hM+(-hJ+hK);this.renderFilledPolygon(hN,e.getMarkColors(hz)[hB])}}break}case'selectedUnder':{var hO=e.getMarkProperty('size',hz)*1.09166666666667;var hP=hO/2;var hQ=hO*0.3877;{{var hR=L;var hS=hy;var hT=new Array(20);hT[0]=hR+0;hT[1]=hS+(-hP+hO*0.0246);hT[2]=hR+(-hP+hO*0.3817);hT[3]=hS+(-hP+hQ);hT[4]=hR+-hP;hT[5]=hS+(-hP+hQ);hT[6]=hR+(-hP+hO*0.3088);hT[7]=hS+(-hP+hO*0.612);hT[8]=hR+(-hP+hO*0.1909);hT[9]=hS+(-hP+hO*0.9751);hT[10]=hR+0;hT[11]=hS+(-hP+hO*0.7507);hT[12]=hR+(-hP+hO*0.8085);hT[13]=hS+(-hP+hO*0.9751);hT[14]=hR+(-hP+hO*0.6905);hT[15]=hS+(-hP+hO*0.612);hT[16]=hR+hP;hT[17]=hS+(-hP+hQ);hT[18]=hR+(-hP+hO*0.6176);hT[19]=hS+(-hP+hQ);this.get_currentContext().set_lineJoin('miter');this.renderPolygon(hT,4,e.getMarkProperty('selected_halo_color',hz)[hB])}}break}default:{break}}},$e:function(e,L,hy,hz,hA,hB){switch(hy){case'normalUnder':{var hC=hA.CPZ;if(e.isTupleVisible(hA.nSc[L])){if((L===0||!e.isTupleVisible(hA.nSc[L-1]))&&(L+1>=hA._cx.length||!e.isTupleVisible(hA.nSc[L+1]))){var hD=ss.Int32.div(hA.Rdg[L],2)+2.5;if(hA.UvQ){var hE=e.thisDomainToPixelY(hA._cx[L]);var hF=e.thisDomainToPixelY(hA.mQE[L]);var hG=e.thisDomainToPixelX(hA.mju[L]);{var hH=[hG-hD,hE,hG-hD,hF,hG+hD,hF,hG+hD,hE];this.renderFilledPolygon(hH,e.getOneColorAlpha(hC,hz,hB))}}else{var hI=e.thisDomainToPixelX(hA._cx[L]);var hJ=e.thisDomainToPixelX(hA.mQE[L]);var hK=e.thisDomainToPixelY(hA.mju[L]);{var hL=[hI,hK-hD,hJ,hK-hD,hJ,hK+hD,hI,hK+hD];this.renderFilledPolygon(hL,e.getOneColorAlpha(hC,hz,hB))}}}else if(L+1<hA.nSc.length&&e.isTupleVisible(hA.nSc[L+1])){if(hA.UvQ){var hM=e.thisDomainToPixelY(hA._cx[L]);var hN=e.thisDomainToPixelY(hA.mQE[L]);var hO=e.thisDomainToPixelY(hA._cx[L+1]);var hP=e.thisDomainToPixelY(hA.mQE[L+1]);var hQ=e.thisDomainToPixelX(hA.mju[L]);var hR=e.thisDomainToPixelX(hA.mju[L+1]);{var hS=[hQ,hN,hR,hP,hR,hO,hQ,hM];this.renderFilledPolygon(hS,e.getOneColorAlpha(hC,hz,hB))}}else{var hT=e.thisDomainToPixelX(hA._cx[L]);var hU=e.thisDomainToPixelX(hA.mQE[L]);var hV=e.thisDomainToPixelX(hA._cx[L+1]);var hW=e.thisDomainToPixelX(hA.mQE[L+1]);var hX=e.thisDomainToPixelY(hA.mju[L]);var hY=e.thisDomainToPixelY(hA.mju[L+1]);{var hZ=[hU,hX,hW,hY,hV,hY,hT,hX];this.renderFilledPolygon(hZ,e.getOneColorAlpha(hC,hz,hB))}}}}break}}},$p:function(e,L,hy,hz){var hA='colorOverrideNone';var hB=255;var hC=hy;var hD=0;var hE=1;var hF=2;var hG=hD;for(var hH=0;hH<hC.CJr.length;hH++){var hI=hC.CJr[hH];if(e.isTupleSelected(hI)){hG=hF;break}if(hG!==hE&&e.isTupleHighlighted(hI)){hG=hE}}if(hG!==hF){for(var hJ=0;hJ<hC.nSc.length;hJ++){var hK=hC.nSc[hJ];if(e.isTupleSelected(hK)){hG=hF;break}if(hG!==hE&&e.isTupleHighlighted(hK)){hG=hE}}}switch(L){case'normalUnderPass':{if(hG===hD&&hz==='background'){if(e.get_hasSelection()||e.get_hasBrushing()){hA='colorOverrideFog'}else{hA='colorOverrideNone'}var hL=hC.nSc.length;for(var hM=0;hM<hL;hM++){this.$e(e,hM,'normalUnder',hA,hC,hB)}}break}case'highlightedUnderPass':{if(hG===hE&&hz==='background'){var hN=hC.nSc.length;for(var hO=0;hO<hN;hO++){if(e.isTupleHighlighted(hC.nSc[hO])&&((hO===0||!e.isTupleVisible(hC.nSc[hO-1]))&&(hO+1>=hC._cx.length||!e.isTupleVisible(hC.nSc[hO+1]))||hO+1<hC.nSc.length&&e.isTupleVisible(hC.nSc[hO+1])&&e.isTupleHighlighted(hC.nSc[hO+1]))){hA='colorOverrideNone'}else{hA='colorOverrideFog'}this.$e(e,hO,'normalUnder',hA,hC,hB)}}break}case'selectedUnderPass':{if(hG===hF&&hz==='background'){hA='colorOverrideReplaceAlpha';hB=76.5;var hP=hC.nSc.length;for(var hQ=0;hQ<hP;hQ++){this.$e(e,hQ,'normalUnder',hA,hC,hB)}}break}}},$f:function(e,L,hy,hz,hA,hB){switch(hy){case'border':{if(e.isTupleVisible(hA.nSc[L])){var hC=ss.Int32.div(hA.Rdg[L]-1,2);if(hA.UvQ){var hD=ss.Int32.trunc(e.thisDomainToPixelX(hA.mju[L]));var hE=ss.Int32.trunc(e.thisDomainToPixelY(hA._cx[L]));var hF=ss.Int32.trunc(e.thisDomainToPixelY(hA.mQE[L]));var hG=hE-0.5;var hH=hF+1.5;var hI=hD-0.5-hC;var hJ=hD+1.5+hC;var hK=hE+1.5;var hL=hF-0.5;var hM=hD-0.5;var hN=hD+1.5;{var hO=[hI,hG,hJ,hG,hJ,hK,hN,hK,hN,hL,hJ,hL,hJ,hH,hI,hH,hI,hL,hM,hL,hM,hK,hI,hK];this.renderLineLoop(hO,1,e.getOneColorAlpha(hA.CPZ,hz,hB))}}else{var hP=ss.Int32.trunc(e.thisDomainToPixelY(hA.mju[L]));var hQ=ss.Int32.trunc(e.thisDomainToPixelX(hA.mQE[L]));var hR=ss.Int32.trunc(e.thisDomainToPixelX(hA._cx[L]));var hS=hP-0.5-hC;var hT=hP+1.5+hC;var hU=hQ-0.5;var hV=hR+1.5;var hW=hP-0.5;var hX=hP+1.5;var hY=hQ+1.5;var hZ=hR-0.5;{var ia=[hU,hS,hY,hS,hY,hW,hZ,hW,hZ,hS,hV,hS,hV,hT,hZ,hT,hZ,hX,hY,hX,hY,hT,hU,hT];this.renderLineLoop(ia,1,e.getOneColorAlpha(hA.CPZ,hz,hB))}}}break}case'normalUnder':{if(e.isTupleVisible(hA.nSc[L])){var ib=ss.Int32.div(hA.Rdg[L]-1,2);var ic=hA.NbC[L];if(hA.UvQ){var id=ss.Int32.trunc(e.thisDomainToPixelX(hA.mju[L]));var ie=ss.Int32.trunc(e.thisDomainToPixelY(hA._cx[L]));var ig=ss.Int32.trunc(e.thisDomainToPixelY(hA.mQE[L]));{var ih=[id-ib,ie+0.5,id+ib+1,ie+0.5];this.renderLine(ih,1,e.getOneColorAlpha(ic,hz,hB),false)}{var ii=[id-ib,ig+0.5,id+ib+1,ig+0.5];this.renderLine(ii,1,e.getOneColorAlpha(ic,hz,hB),false)}{var ij=[id+0.5,ie+1,id+0.5,ig];this.renderLine(ij,1,e.getOneColorAlpha(ic,hz,hB),false)}}else{var ik=ss.Int32.trunc(e.thisDomainToPixelY(hA.mju[L]));var il=ss.Int32.trunc(e.thisDomainToPixelX(hA.mQE[L]));var im=ss.Int32.trunc(e.thisDomainToPixelX(hA._cx[L]));{var io=[il+0.5,ik-ib,il+0.5,ik+ib+1];this.renderLine(io,1,e.getOneColorAlpha(ic,hz,hB),false)}{var ip=[im+0.5,ik-ib,im+0.5,ik+ib+1];this.renderLine(ip,1,e.getOneColorAlpha(ic,hz,hB),false)}{var iq=[il+1,ik+0.5,im,ik+0.5];this.renderLine(iq,1,e.getOneColorAlpha(ic,hz,hB),false)}}}break}}},$q:function(e,L,hy,hz){var hA='colorOverrideNone';var hB=255;var hC=hy;switch(L){case'normalUnderPass':{if(!hC.Brn&&hz==='background'){if(e.get_hasSelection()||e.get_hasBrushing()){hA='colorOverrideFog'}else{hA='colorOverrideNone'}var hD=hC.nSc.length;for(var hE=0;hE<hD;hE++){if(!e.isTupleHighlighted(hC.nSc[hE])&&!e.isTupleSelected(hC.nSc[hE])){this.$f(e,hE,'border',hA,hC,hB);this.$f(e,hE,'normalUnder',hA,hC,hB)}}}break}case'normalOnPass':{if(hC.Brn&&hz==='underLabel'){if(e.get_hasSelection()||e.get_hasBrushing()){hA='colorOverrideFog'}else{hA='colorOverrideNone'}var hF=hC.nSc.length;for(var hG=0;hG<hF;hG++){if(!e.isTupleHighlighted(hC.nSc[hG])&&!e.isTupleSelected(hC.nSc[hG])){this.$f(e,hG,'border',hA,hC,hB);this.$f(e,hG,'normalUnder',hA,hC,hB)}}}break}case'selectedUnderPass':{if(!hC.Brn&&hz==='background'){var hH=hC.nSc.length;for(var hI=0;hI<hH;hI++){if(e.isTupleSelected(hC.nSc[hI])){hA='colorOverrideReplaceAlpha';hB=63.75;this.$f(e,hI,'border',hA,hC,hB);hA='colorOverrideReplaceAlpha';hB=hC.sVE/255*255;this.$f(e,hI,'normalUnder',hA,hC,hB)}}}break}case'selectedOnPass':{if(hC.Brn&&hz==='underLabel'){var hJ=hC.nSc.length;for(var hK=0;hK<hJ;hK++){if(e.isTupleSelected(hC.nSc[hK])){hA='colorOverrideReplaceAlpha';hB=63.75;this.$f(e,hK,'border',hA,hC,hB);hA='colorOverrideReplaceAlpha';hB=hC.sVE/255*255;this.$f(e,hK,'normalUnder',hA,hC,hB)}}}break}case'highlightedUnderPass':{if(!hC.Brn&&hz==='background'){hA='colorOverrideNone';var hL=hC.nSc.length;for(var hM=0;hM<hL;hM++){if(e.isTupleHighlighted(hC.nSc[hM])){this.$f(e,hM,'border',hA,hC,hB);this.$f(e,hM,'normalUnder',hA,hC,hB)}}}break}case'highlightedOnPass':{if(hC.Brn&&hz==='underLabel'){hA='colorOverrideNone';var hN=hC.nSc.length;for(var hO=0;hO<hN;hO++){if(e.isTupleHighlighted(hC.nSc[hO])){this.$f(e,hO,'border',hA,hC,hB);this.$f(e,hO,'normalUnder',hA,hC,hB)}}}break}}},$7:function(e,L,hy,hz,hA){var hB=1;var hC=2*hB;return!tab.RectXYUtil.completelyContains$1(e,ss.Int32.trunc(L)-hB,ss.Int32.trunc(hy)-hB,ss.Int32.trunc(hz)+hC,ss.Int32.trunc(hA)+hC)}},bb);ss.initClass(m,a,{get_currentContext:function(){if(ss.isValue(this.$S)){return this.$S}return bb.prototype.get_currentContext.call(this)},$Q:function(e){var L={};L.uBu=new Array(e);return L},$P:function(e){return ss.isValue(this.$U[e.toString()])},$R:function(e,L,hy){this.$S=e;var hz=(hy?'colorOverrideFog':'colorOverrideOpaque');this.$g(this.$T,this.$U[L.toString()],'normalOn',hz)}},en);ss.initClass(n,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(o,a,{});ss.initClass(p,a,{$c:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},$d:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},$e:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},$f:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},$7:function(){return!this.$8},$1:function(){this.$0()},$6:function(e){if(ss.isNullOrUndefined(e)){this.$4();return}if(this.$b!==-1){window.clearTimeout(this.$b);this.$b=-1}this.$a=e;this.$8=false;this.$0();var L=true;var hy=e.get_imageNode();var hz=$(hy);if(ss.isNullOrUndefined(hy)){var hA=document.createElement('img');e.set_imageNode(hA);hy=hA;hz=$(hy)}else{L=hz.width()!==e.get_bounds().w||hz.height()!==e.get_bounds().h}if(L){$(hy).css(ss.mkdict(['left',e.get_bounds().l+'px','top',e.get_bounds().t+'px']))}hz.bind('load',ss.mkdel(this,this.$2));hz.bind('error',ss.mkdel(this,this.$2));hz.bind('abort',ss.mkdel(this,this.$2));this.$b=window.setTimeout(ss.mkdel(this,function(){this.$3()}),600000);var hB=hz.attr('src');if(!tab.BrowserSupport.get_imageLoadIsSynchronous()){hz.attr('src',e.get_src())}else{window.setTimeout(function(){hz.attr('src',e.get_src())},0)}if(ss.referenceEquals(e.get_src(),hB)&&!tab.BrowserSupport.get_raisesEventOnImageReassignment()){window.setTimeout(ss.mkdel(this,function(){this.$2(null)}),0)}},$0:function(){if(ss.isValue(this.$a)&&ss.isValue(this.$a.get_imageNode())){var e=$(this.$a.get_imageNode());if(ss.isValue(e)){e.unbind('load',ss.mkdel(this,this.$2));e.unbind('error',ss.mkdel(this,this.$2));e.unbind('abort',ss.mkdel(this,this.$2))}}},$2:function(e){window.clearTimeout(this.$b);this.$b=-1;if(this.$8){return}this.$8=true;this.$4()},$3:function(){this.$8=true;this.$b=-1;this.$0();this.$5()},$4:function(){if(ss.isValue(this.$1$1)){this.$1$1(this,new hs(this.$9,this.$a))}},$5:function(){if(ss.isValue(this.$1$2)){this.$1$2(this,new ht(this.$9))}}});ss.initClass(q,a,{$4:function(){return this.$8.get(0)},$5:function(){return this.$8.width()},$3:function(e){var L=ss.mkdict(['backgroundColor',e]);this.$6.css(L);this.$7.css(L);this.$8.css(L)},$1:function(e,L){var hy=ss.mkdict(['width',e+'px']);if(L){this.$6.addClass('leaflet-zoom-anim').addClass('leaflet-zoom-animated');this.$7.addClass('leaflet-zoom-anim').addClass('leaflet-zoom-animated')}this.$6.css(hy);this.$7.css(hy)},$2:function(){this.$6.removeClass('leaflet-zoom-anim').removeClass('leaflet-zoom-animated');this.$7.removeClass('leaflet-zoom-anim').removeClass('leaflet-zoom-animated')}},spiff.Template,[ss.IDisposable]);ss.initClass(r,a,{$0:function(){this.$4.animate(this.$2,this.$3)},$1:function(e){this.$4.stop(e)}});ss.initClass(s,a,{$5:function(){return this.$a},$0:function(){return this.$6},$1:function(e){this.$6=e},$2:function(){return this.$7},$3:function(){return this.$8},$4:function(){return this.$9}});ss.initClass(t,a,{$3:function(){return this.$6},$4:function(e){this.$6=e},$1:function(){return this.$5},$2:function(e){this.$5=e},$0:function(e,L){if(!ss.isValue(this.$6)){return false}return ss.referenceEquals(this.$6.getAttribute('src'),e)&&this.$5===L}});ss.initClass(u,a,{});ss.initClass(v,a,{});ss.initClass(w,a,{});ss.initClass(x,a,{$0:function(e,L){var hy;if(this.$3==='horizontal'){hy=Math.round(this.$6)===Math.round(L)}else{hy=Math.round(this.$5)===Math.round(e)}return hy},$1:function(e,L){var hy=this.$4;var hz=e;var hA=L;switch(this.$3){case'horizontal':{if(this.$2){hy=-hy}hz=this.$5+hy;break}case'up':{if(!this.$2){hy=-hy}hA=this.$6+hy;break}case'down':{if(this.$2){hy=-hy}hA=this.$6+hy;break}default:{break}}return{x:hz,y:hA}}});ss.initClass(y,a,{$1:function(){return this.$5},$0:function(){return this.$4}});ss.initClass(z,a,{$0:function(e){e.set_alpha(this.$1);e.set_lineJoin(this.$4);e.set_lineCap(this.$3);e.set_linePattern(this.$5);e.set_strokeStyle(this.$8);e.set_lineWidth(this.$6);e.set_textAngle(this.$a);e.set_font(this.$2);e.set_shapeFillStyle(this.$7);e.set_textFillStyle(this.$b);e.set_textAlign(this.$9)}});ss.initClass(A,a,{$0:function(e){e.set_linePattern(this.$1);e.set_textAngle(this.$5);e.set_shapeFillStyle(this.$2);e.set_textFillStyle(this.$6);e.set_shouldAntialias(this.$3);e.set_shouldUnderlineText(this.$4);e.set_transformation(this.$7)}});ss.initClass(B,a,{});ss.initClass(C,a,{get_title:function(){return this.$3},set_title:function(e){this.$3=e},get_iconClass:function(){return this.$1},set_iconClass:function(e){this.$1=e},get_iconClassTwo:function(){return this.$2},set_iconClassTwo:function(e){this.$2=e},get_content:function(){return this.$0},set_content:function(e){this.$0=e}});ss.initClass(D,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(E,a,{get_allItems:function(){return this.getElementsBySelector('.tabAccordionItem')}},spiff.Template,[ss.IDisposable]);ss.initClass(F,a,{dispose:function(){this.removeViews();ss.makeGenericType(spiff.BaseView$1,[G]).prototype.dispose.call(this)},onViewModelPropertyChanged:function(e,L){ss.makeGenericType(spiff.BaseView$1,[G]).prototype.onViewModelPropertyChanged.call(this,e,L);switch(L.get_propertyName()){case'AllItems':{this.update();break}case'ActiveItem':{this.$9(this.$g.get_activeItem());break}}},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$c()},$c:function(){if(!this.get_addedToDom()){return}this.$e.forEach(function(e){var L=ss.safeCast(e,spiff.Widget);if(ss.isValue(L)){L.onAddedToDom()}})},removeViews:function(){for(var e=0;e<this.$e.length;e++){var L=this.$e[e];L.dispose()}ss.clear(this.$e);this.$f.itemsContainer.children().remove();this.$b()},$b:function(){this.$d.forEach(function(e){e.dispose()});ss.clear(this.$d)},update:function(){this.removeViews();var e=this.$g.get_items();for(var L=0;L<e.length;L++){var hy=e[L];var hz=D.createDefault();this.$d.push(spiff.TableauClickHandler.targetAndClick(hz.header[0],this.$a(hy)));hz.get_domRoot().data('tabAccordionItem',hy);hz.title.text(hy.get_title());hz.title.attr('title',hy.get_title());if(ss.isValue(hy.get_iconClass())){hz.icon.addClass(hy.get_iconClass())}if(ss.isValue(hy.get_iconClassTwo())){hz.iconTwo.addClass(hy.get_iconClassTwo())}hz.content.hide();var hA=spiff.ObjectRegistry.newView$1(ss.makeGenericType(spiff.IView$1,[spiff.IViewModel])).call(null,hy.get_content().get_viewType(),[hy.get_content().get_viewModel()]);this.$e.push(hA);hz.content.append(hA.get_rootElement());this.$f.itemsContainer.append(hz.get_domRoot());spiff.DragDropManager.attachDropTarget(hz.header,this.$g.createItemDropTarget(hy))}if(ss.isValue(this.$g.get_activeItem())){this.$9(this.$g.get_activeItem())}this.$c()},$a:function(e){return ss.mkdel(this,function(){this.$g.set_activeItem(e)})},$9:function(e){var L=this.$f.get_domRoot().find('.tabAccordionActive').length>0;var hy=this.$f.get_allItems().get();for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];var hB=$(hA);var hC=new D(hB);var hD=ss.referenceEquals(hB.data('tabAccordionItem'),e);hC.get_domRoot().toggleClass('tabAccordionActive',hD);hC.get_domRoot().toggleClass('tabAccordionNotActive',!hD);if(hD){if(L){hC.content.slideDown('fast')}else{hC.content.show()}}else if(hC.content.is(':visible')){if(L){hC.content.slideUp('fast')}else{hC.content.hide()}}}}},ss.makeGenericType(spiff.BaseView$1,[G]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[G])]);ss.initClass(G,a,{get_allowDragOverExpand:function(){return this.$3},set_allowDragOverExpand:function(e){this.$3=e},get_items:function(){return this.$4},get_activeItem:function(){return this.$2},set_activeItem:function(e){if(ss.referenceEquals(this.$2,e)){return}if(ss.isValue(this.$2)&&ss.isValue(this.$2.get_content())){this.$2.get_content().set_active(false)}this.$2=e;if(ss.isValue(this.$2)&&ss.isValue(this.$2.get_content())){this.$2.get_content().set_active(true)}this.notifyPropertyChanged('ActiveItem')},updateItems:function(e){ss.clear(this.$4);ss.arrayAddRange(this.$4,e);if(!ss.contains(this.$4,this.$2)){this.set_activeItem(null)}this.notifyPropertyChanged('AllItems')},createItemDropTarget:function(e){if(this.get_allowDragOverExpand()){return new f(e,this)}return null}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(H,a,{},ss.EventArgs);ss.initClass(I,a,{});ss.initClass(J,a,{dispose:function(){this.$J.dispose();if(ss.isValue(this.$M)){this.$M.dispose();this.$M=null}},updateClients:function(e,L){if(!ss.referenceEquals(this.$H,e)){var hy=this.$H;this.$H=e;if(tsConfig.allow_custom_views){var hz=(ss.isValue(hy)?hy.get_customViewsViewModel():null);if(ss.isValue(hz)){hz.remove_dirtyChanged(ss.mkdel(this,this.onCustomViewUpdated));hz.remove_customViewListChanged(ss.mkdel(this,this.onCustomViewListLoaded));hz.remove_customViewDestroyed(ss.mkdel(this,this.onCustomViewDestroyed));hz.remove_defaultCustomViewChanged(ss.mkdel(this,this.onCustomViewSetDefault))}var hA=(ss.isValue(e)?e.get_customViewsViewModel():null);if(ss.isValue(hA)){hA.add_dirtyChanged(ss.mkdel(this,this.onCustomViewUpdated));hA.add_customViewListChanged(ss.mkdel(this,this.onCustomViewListLoaded));hA.add_customViewDestroyed(ss.mkdel(this,this.onCustomViewDestroyed));hA.add_defaultCustomViewChanged(ss.mkdel(this,this.onCustomViewSetDefault))}}this.$I=false}if(!ss.referenceEquals(this.$L,L)){if(ss.isValue(this.$M)){this.$M.dispose()}this.$L=L;this.$M=new K(L,this.$G)}_.defer(ss.mkdel(this,function(){if(ss.isValue(this.$N)){for(var hC=0;hC<this.$N.length;hC++){var hD=this.$N[hC];if(ss.isValue(hD)){dojo.unsubscribe(hD)}}}var hE=this.$H.get_viewControllers();this.$N=[];var hF=0;hE.forEach(ss.mkdel(this,function(hG){var hH=this.$N;var hI=hG.get_viewSession();hH[hF]=hI.registerEventListener(tab.InvalidationInfo).call(hI,'selectionChanged',ss.mkdel(this,function(hJ){this.onSelectionChanged(hG.get_sheetName(),hJ)}));hF++}))}));if(!this.$K){var hB=tab.ApplicationModel.get_instance().get_workbook();if(ss.isValue(hB)){hB.addNewDashboardHandler(ss.mkdel(this,this.onNewDashboard));this.$K=true}}else{this.onNewDashboard(null)}},handleEvent:function(e){var L=e.data;if(ss.isNullOrUndefined(L)||typeof(L)!=='string'){return}var hy=L;var hz=tab._ApiCommand.parse(hy);if(ss.isNullOrUndefined(hz.get_rawName())){return}switch(hz.get_name()){case'api.GetClientInfoCommand':{this.$t(hz);break}case'api.GetCurrentUrlCommand':{this.$v(hz);break}case'api.ClearFilterCommand':{this.$7(hz);break}case'api.ApplyCategoricalFilterCommand':{this.$3(hz);break}case'api.ApplyRangeFilterCommand':{this.$5(hz);break}case'api.ApplyRelativeDateFilterCommand':{this.$6(hz);break}case'api.ApplyHierarchicalFilterCommand':{this.$4(hz);break}case'api.RefreshDataCommand':{this.$n(hz);break}case'api.RevertAllCommand':{this.$p(hz);break}case'api.SwitchActiveSheetCommand':{this.$A(hz);break}case'api.UpdateActiveSheetCommand':{this.$B(hz);break}case'api.SelectMarksCommand':{this.$r(hz);break}case'api.FetchSelectedMarksCommand':{this.$c(hz);break}case'api.FetchParametersCommand':{this.$b(hz);break}case'api.SetParameterValueCommand':{this.$w(hz);break}case'api.InvokeCommandCommand':{this.$h(hz);break}case'api.SetSheetSizeCommand':{this.$x(hz);break}case'api.ShowHideToolbarCommand':{this.$z(hz);break}case'api.GetFiltersListCommand':{this.$f(hz);break}case'api.GetOneFilterInfoCommand':{this.$g(hz);break}case'api.GetDataSourceCommand':{this.$d(hz);break}case'api.GetDataSourcesCommand':{this.$e(hz);break}case'api.FetchCustomViewsCommand':{this.$a(hz);break}case'api.ShowCustomViewCommand':{this.$y(hz);break}case'api.UpdateCustomViewCommand':{this.$C(hz);break}case'api.MakeCurrentCustomViewDefaultCommand':{this.$i(hz);break}case'api.RemoveCustomViewCommand':{this.$o(hz);break}case'api.SaveNewCustomViewCommand':{this.$q(hz);break}case'api.ActivateStoryPoint':{this.$M.activateStoryPoint(hz);break}case'api.ActivatePreviousStoryPoint':{this.$M.activatePreviousStoryPoint(hz);break}case'api.ActivateNextStoryPoint':{this.$M.activateNextStoryPoint(hz);break}case'api.RevertStoryPoint':{this.$M.revertStoryPoint(hz);break}}},handleNewLayout:function(e){var L=e['oldSheetName'];this.$G.sendCrossDomainEventNotification('api.TabSwitchEvent',L,e.DDA)},onSelectionChanged:function(e,L){if(ss.isNullOrUndefined(L)||ss.isNullOrUndefined(L.cmdResult)||ss.isNullOrUndefined(L.cmdResult.$iY)){return}var hy=L.cmdResult.$iY.split(':');if(ss.referenceEquals(hy[0],'tabdoc'.toString())){var hz=hy[1];if(ss.startsWithString(hy[1],'select')){this.$G.sendCrossDomainEventNotification('api.MarksSelectionChangedEvent',e,null)}else if(hz==='reset-filter'||hz==='clear-existing-filter'||hz==='range-filter'||hz==='categorical-filter'||hz==='categorical-filter-by-index'||hz==='hierarchical-filter'||hz==='relative-date-filter'){if(ss.isNullOrUndefined(L.primarySheet)){return}var hA=L.cmdResult.nCR;var hB=hA['HBp'];if(ss.isNullOrUndefined(hA['cVZ'])&&ss.isNullOrUndefined(hA['oIc'])&&ss.isValue(hB)){var hC=null;var hD=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),L.primarySheet);if(ss.isValue(hD)){var hE=_.find(hD.get_filters(),function(hG){return ss.referenceEquals(hG.get_globalFieldName(),hB)});if(ss.isValue(hE)){hC=hE.get_filterPresModel().fieldCaption}}var hF=[hB,ss.coalesce(hC,hB)];this.$G.sendCrossDomainEventNotification('api.FilterChangedEvent',L.primarySheet,J.toJsonHelper(hF))}}}else if(ss.referenceEquals(hy[0],'tabsrv'.toString())&&ss.startsWithString(hy[1],'select')){this.$G.sendCrossDomainEventNotification('api.MarksSelectionChangedEvent',e,null)}},onClientFullyLoaded:function(){tab.StartupUtils.remove_clientFullyLoaded(ss.mkdel(this,this.onClientFullyLoaded));this.$G.sendCrossDomainEventNotification('api.VizInteractiveEvent',null,tsConfig.clientNumber)},onCommandComplete:function(){this.$G.sendCrossDomainEventNotification('api.VizInteractiveEvent',null,tsConfig.clientNumber)},onNewDashboard:function(e){e=tab.ModelUtils.findContentDashboard();this.$J.dispose();if(ss.isNullOrUndefined(e)){return}var L=e.get_zoneModels();_.each(L,ss.mkdel(this,function(hy,hz){if(hy.get_zoneType()==='paramctrl'){var hA=hy.get_model();if(ss.isNullOrUndefined(hA)){return}hA.add_newParameterCtrl(ss.mkdel(this,this.onParameterChange));this.$J.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){hA.remove_newParameterCtrl(ss.mkdel(this,this.onParameterChange))})))}}))},onParameterChange:function(e){var L=e.OLk;this.$G.sendCrossDomainEventNotification('api.ParameterChangedEvent',null,L)},onCustomViewDestroyed:function(e,L){this.$G.sendCrossDomainEventNotification('api.CustomViewRemovedEvent',null,JSON.stringify(this.$8()))},onCustomViewUpdated:function(e,L){this.$G.sendCrossDomainEventNotification('api.CustomViewUpdatedEvent',null,JSON.stringify(this.$8()))},onCustomViewSetDefault:function(e,L){this.$G.sendCrossDomainEventNotification('api.CustomViewSetDefaultEvent',null,JSON.stringify(this.$8()))},onCustomViewListLoaded:function(e,L){this.$G.sendCrossDomainEventNotification('api.CustomViewsListLoadedEvent',null,JSON.stringify(this.$8()));this.$I=true},$b:function(e){var L=new Object;L.commandName='get-parameter-models'.toString();L.commandNamespace='tabdoc'.toString();this.$u(e,L,v.$8)},$w:function(e){var L=J.fromJsonHelper(e.get_parameters());var hy=new Object;hy.commandName='set-parameter-value'.toString();hy.commandNamespace='tabdoc'.toString();hy.commandParams={};hy.commandParams['OLk']=L['api.setParameterName'];hy.commandParams['vau']=L['api.setParameterValue'];this.$u(e,hy,v.$6)},$f:function(e){var L=function(hz,hA){hA['TWA']=hz['api.ignoreDomain']};var hy=this.$l(e,'get-filter-info',L);this.$u(e,hy,u.$a)},$g:function(e){var L=function(hz,hA){if(ss.isValue(hz['api.fieldCaption'])){hA['OLk']=hz['api.fieldCaption']}else{hA['HBp']=hz['api.fieldName']}if(ss.isValue(hz['api.filterHierarchicalLevels'])){hA['Kyu']=hz['api.filterHierarchicalLevels']}hA['TWA']=hz['api.ignoreDomain']};var hy=this.$l(e,'get-filter-info',L);this.$u(e,hy,u.$e)},$c:function(e){var L=function(hz,hA){};var hy=this.$k(e,'get-selection',L);this.$u(e,hy,ss.mkdel(this,this.$m))},$m:function(e){var L=e;var hy=L.vZU;var hz=L.zFl;var hA=new tab.DataDictionaryModel(null);hA.update(hy);var hB=new tab.VizDataModel(null);hB.update(hz);var hC=new Object;var hD=[];hC.marks=hD;if(ss.isNullOrUndefined(hA)||hA.get_isEmpty()){return hC}hB.forEachTupleId(function(hE){var hF=new Object;hF.tupleId=hE;var hG=[];hF.pairs=hG;hD.push(hF);hB.forEachVizDataField(function(hH,hI){var hJ=hH.get_fieldCaption();var hK=new Object;hK.fieldName=hH.get_fieldCaption();hK.formattedValue=tab.VizDataLookup.lookupAlias(hE,hH,hA,false);hK.valueDataType=c.$0(hH.get_dataType());var hL=null;if(!tab.VizDataLookup.isSpecial(hE,hH,hA)&&hH.get_hasDataValues()&&hH.isTupleIdValid(hE)){hL=tab.VizDataLookup.lookupRawDataValue(hE,hH,hA)}var hM=B.serializeDataValue(hL,hH.get_dataType());hK.value=hM;hG.push(hK);return true});return true});return hC},$4:function(e){var L=ss.mkdel(this,function(hz,hA){hA['oLX']=hz['api.fieldCaption'];if(ss.isValue(hz['api.filterReset'])&&hz['api.filterReset']){hA['Txq']='filter-clear'.toString()}else{if(ss.isValue(hz['api.exclude'])){hA['QGP']=hz['api.exclude']}var hB=this.$D(hz['api.filterUpdateType'].toString());hA['Txq']=hB;if(ss.isValue(hz['api.filterHierarchicalValues'])){hA['CCe']=hz['api.filterHierarchicalValues']}if(ss.isValue(hz['api.filterHierarchicalLevels'])){hA['JzB']=hz['api.filterHierarchicalLevels']}if(ss.isNullOrUndefined(hz['api.filterHierarchicalValues'])&&ss.isNullOrUndefined(hz['api.filterHierarchicalLevels'])){hA['JzB']='[]'}}});var hy=this.$k(e,'hierarchical-filter',L);this.$u(e,hy,u.$9)},$5:function(e){var L=function(hz,hA){hA['oLX']=hz['api.fieldCaption'];if(ss.isValue(hz['api.filterReset'])&&hz['api.filterReset']){hA['Txq']='filter-clear'.toString()}else{if(ss.isValue(hz['api.filterRangeMax'])){hA['JPx']=hz['api.filterRangeMax']}if(ss.isValue(hz['api.filterRangeMin'])){hA['fMN']=hz['api.filterRangeMin']}if(ss.isValue(hz['api.filterRangeNullOption'])){if(hz['api.filterRangeNullOption']==='NULL_VALUES'){hA['$mT']='include-null'.toString()}else if(hz['api.filterRangeNullOption']==='NON_NULL_VALUES'){hA['$mT']='include-non-null'.toString()}else{hA['$mT']='include-all'.toString()}}}};var hy=this.$k(e,'range-filter',L);this.$u(e,hy,u.$9)},$6:function(e){var L=function(hz,hA){hA['oLX']=hz['api.fieldCaption'];if(ss.isValue(hz['api.filterReset'])&&hz['api.filterReset']){hA['Txq']='filter-clear'.toString()}else{if(ss.isValue(hz['api.filterDateArchorValue'])){hA['wNn']=hz['api.filterDateArchorValue']}hA['JAO']=hz['api.filterPeriodType'].toLowerCase();hA['woa']=hz['api.filterDateRangeType'].toLowerCase();if(ss.isValue(hz['api.filterDateRange'])){hA['lZR']=hz['api.filterDateRange']}}};var hy=this.$k(e,'relative-date-filter',L);this.$u(e,hy,u.$9)},$D:function(e){if(e.toLowerCase()==='replace'){return'filter-replace'.toString()}else if(e.toLowerCase()==='all'){return'filter-all'.toString()}else if(e.toLowerCase()==='add'){return'filter-add'.toString()}else if(e.toLowerCase()==='remove'){return'filter-remove'.toString()}else{return'filter-replace'.toString()}},$F:function(e){if(e.toLowerCase()==='replace'){return'select-replace'.toString()}else if(e.toLowerCase()==='add'){return'select-add'.toString()}else if(e.toLowerCase()==='remove'){return'select-remove'.toString()}return'select-replace'.toString()},$E:function(e){if(e.toLowerCase()==='nullvalues'){return'include-null'.toString()}else if(e.toLowerCase()==='nonnullvalues'){return'include-non-null'.toString()}else if(e.toLowerCase()==='allvalues'){return'include-all'.toString()}return'include-all'.toString()},$7:function(e){var L=J.fromJsonHelper(e.get_parameters());var hy=J.$1();var hz=L['api.fieldCaption'];var hA=ss.keyExists(hy,hz);var hB;if(hA){if(hy[hz]==='RD'){var hC=o.$0('api.localfailed','Clearing a relative date filter is not supported when an associated quick filter is on the Worksheet. Please call applyRelativeDateFilter instead.');this.$G.sendCrossDomainResponse(e,hC);return}hB='reset-filter'}else{hB='clear-existing-filter'}var hD=function(hF,hG){hG['oLX']=hz};var hE=this.$k(e,hB,hD);this.$u(e,hE,u.$9)},$3:function(e){var L=ss.mkdel(this,function(hz,hA){hA['oLX']=hz['api.fieldCaption'];if(ss.isValue(hz['api.filterReset'])&&hz['api.filterReset']){hA['Txq']='filter-clear'.toString()}else{if(ss.isValue(hz['api.exclude'])){hA['QGP']=hz['api.exclude'].toString()}var hB=this.$D(hz['api.filterUpdateType'].toString());hA['Txq']=hB;if(ss.isValue(hz['api.filterCategoricalValues'])){hA['CCe']=J.toJsonHelper(hz['api.filterCategoricalValues'])}else{hA['CCe']='[""]'}}});var hy=this.$k(e,'categorical-filter',L);this.$u(e,hy,u.$9)},$0:function(e,L){var hy=new ss.StringBuilder;hy.append('[');for(var hz=0;hz<e.length;hz++){if(hz>0){hy.append(',')}hy.append('{');hy.append('"'+'oLX'.toString()+'":');hy.append('"'+e[hz]+'"');hy.append(',');hy.append('"'+'Zqk'.toString()+'":');hy.append(L[hz]);hy.append('}')}hy.append(']');return hy.toString()},$2:function(e){var L=new ss.StringBuilder;L.append('{');L.append('"'+'coe'.toString()+'":');L.append('"tuples"');L.append(',');L.append('"'+'kyj'.toString()+'":');L.append(e);L.append('}');return L.toString()},$1:function(e,L){var hy=new ss.StringBuilder;hy.append('[');for(var hz=0;hz<e.length;hz++){if(hz>0){hy.append(',')}hy.append('{');hy.append('"'+'oLX'+'":');hy.append('"'+e[hz]+'"');hy.append(',');var hA=J.fromJsonHelper(L[hz]);var hB=J.fromJsonHelper(hA[0]);if(ss.isValue(hB['max'])){hy.append('"'+'QG$'+'":');hy.append('"'+hB['max'].toString()+'"')}if(ss.isValue(hB['min'])){if(ss.isValue(hB['max'])){hy.append(',')}hy.append('"'+'Cp$'.toString()+'":');hy.append('"'+hB['min'].toString()+'"')}if(ss.isValue(hB['nullOption'])){var hC=this.$E(hB['nullOption'].toString());hy.append(',');hy.append('"'+'$mT'.toString()+'":');hy.append('"'+hC+'"')}hy.append('}')}hy.append(']');return hy.toString()},$r:function(e){var L=ss.mkdel(this,function(hz,hA){if(tab.MiscUtil.isNullOrEmpty(hz)){hA['NNg']='select-replace'.toString()}else{hA['NNg']=this.$F(hz['api.filterUpdateType'].toString());if(ss.isValue(hz['api.categoricalFieldCaption'])&&ss.isValue(hz['api.categoricalMarkValues'])){var hB=J.fromJsonHelper(hz['api.categoricalFieldCaption']);var hC=J.fromJsonHelper(hz['api.categoricalMarkValues']);var hD=this.$0(hB,hC);hA['NVJ']=hD}if(ss.isValue(hz['api.hierarchicalFieldCaption'])&&ss.isValue(hz['api.hierarchicalMarkValues'])){var hE=J.fromJsonHelper(hz['api.hierarchicalFieldCaption']);var hF=J.fromJsonHelper(hz['api.hierarchicalMarkValues']);var hG=this.$0(hE,hF);hA['oWK']=hG}if(ss.isValue(hz['api.rangeFieldCaption'])&&ss.isValue(hz['api.rangeMarkValues'])){var hH=J.fromJsonHelper(hz['api.rangeFieldCaption']);var hI=J.fromJsonHelper(hz['api.rangeMarkValues']);var hJ=this.$1(hH,hI);hA['Ukl']=hJ}if(ss.isValue(hz['api.tupleIds'])){var hK=new ss.StringBuilder;hK.append('{');hK.append('"'+'coe'+'":');hK.append('"tuples"');hK.append(',');hK.append('"'+'kyj'+'":');hK.append(hz['api.tupleIds']);hK.append('}');hA['Gvh']=hK.toString()}}});var hy=this.$k(e,'select-by-value',L);this.$u(e,hy,J.$2)},$8:function(){var e=this.$H.get_customViewsViewModel();var L=e.get_currentCustomView();var hy=null;if(ss.isValue(L)){hy=B.serializeCustomView(e.get_currentCustomView(),e.buildUrl(e.get_currentCustomView(),true))}var hz=[];var hA=this.$H.get_customViewsViewModel().get_myCustomViews();var hB=ss.getEnumerator(hA);try{while(hB.moveNext()){var hC=hB.current();var hD=e.buildUrl(hC,true);var hE=B.serializeCustomView(hC,hD);hz.push(hE)}}finally{hB.dispose()}var hF=this.$H.get_customViewsViewModel().get_otherCustomViews();var hG=ss.getEnumerator(hF);try{while(hG.moveNext()){var hH=hG.current();var hI=e.buildUrl(hH,true);var hJ=B.serializeCustomView(hH,hI);hz.push(hJ)}}finally{hG.dispose()}return I.newCustomViewsInfo(this.$I,e.get_defaultCustomViewId(),hy,hz)},$a:function(e){this.$H.get_customViewsViewModel().updateCustomizedViews(ss.mkdel(this,function(L,hy){var hz=o.$0('api.success',this.$8());this.$G.sendCrossDomainResponse(e,hz)}),ss.mkdel(this,function(L){var hy=o.$0('api.remotefailed',L);this.$G.sendCrossDomainResponse(e,hy)}))},$y:function(e){var L=J.fromJsonHelper(e.get_parameters());var hy=null;if(ss.isValue(L['api.customViewParam'])){var hz=L['api.customViewParam'];hy=B.convertToCustomizedView(hz)}this.$H.get_customViewsViewModel().select(hy)},$o:function(e){var L=J.fromJsonHelper(e.get_parameters());var hy=L['api.customViewParam'];var hz=B.convertToCustomizedView(hy);this.$H.get_customViewsViewModel().destroy(hz,ss.mkdel(this,function(){var hA=o.$0('api.success',this.$8());this.$G.sendCrossDomainResponse(e,hA)}),ss.mkdel(this,function(hA){var hB=o.$0('api.remotefailed',hA);this.$G.sendCrossDomainResponse(e,hB)}))},$C:function(e){var L=J.fromJsonHelper(e.get_parameters());var hy=L['api.customViewParam'];var hz=B.convertToCustomizedView(hy);this.$H.get_customViewsViewModel().update(hz,ss.mkdel(this,function(hA){var hB=o.$0('api.success',this.$8());this.$G.sendCrossDomainResponse(e,hB)}),ss.mkdel(this,function(hA){var hB=o.$0('api.remotefailed',hA);this.$G.sendCrossDomainResponse(e,hB)}))},$i:function(e){this.$H.get_customViewsViewModel().makeCurrentDefault(ss.mkdel(this,function(L){var hy=o.$0('api.success',this.$8());this.$G.sendCrossDomainResponse(e,hy)}),ss.mkdel(this,function(L){var hy=o.$0('api.remotefailed',L);this.$G.sendCrossDomainResponse(e,hy)}))},$q:function(e){var L=J.fromJsonHelper(e.get_parameters());var hy=L['api.customViewName'];this.$H.get_customViewsViewModel().save(hy,ss.mkdel(this,function(hz){var hA=this.$8();hA.newView=B.serializeCustomView(hz,this.$H.get_customViewsViewModel().buildUrl(hz,false));var hB=o.$0('api.success',hA);this.$G.sendCrossDomainResponse(e,hB)}),ss.mkdel(this,function(hz){var hA=o.$0('api.remotefailed',hz);this.$G.sendCrossDomainResponse(e,hA)}))},$d:function(e){var L=J.fromJsonHelper(e.get_parameters());var hy=L['api.dataSourceName'];var hz=L['api.worksheetName'];var hA=new Object;hA.commandName='get-schema'.toString();hA.commandNamespace='tabdoc'.toString();hA.commandParams={};var hB=function(hC){var hD=hC;var hE=b.$0(hD,hz,hy);return hE.dataSources[0]};this.$u(e,hA,hB)},$e:function(e){var L=J.fromJsonHelper(e.get_parameters());var hy=L['api.worksheetName'];var hz=new Object;hz.commandName='get-schema'.toString();hz.commandNamespace='tabdoc'.toString();var hA=function(hB){var hC=hB;var hD=b.$0(hC,hy,null);return hD};this.$u(e,hz,hA)},$h:function(e){var L=J.fromJsonHelper(e.get_parameters());var hy=L['api.invokeCommandName'];if(hy==='showExportImageDialog'){this.$H.get_toolbarCommands().exportImage()}else if(hy==='showExportDataDialog'){var hz=null;if(ss.isValue('api.invokeCommandParam')){hz=L['api.invokeCommandParam']}this.$H.get_toolbarCommands().exportData(hz)}else if(hy==='showExportCrosstabDialog'){var hA=null;if(ss.isValue('api.invokeCommandParam')){hA=L['api.invokeCommandParam']}this.$H.get_toolbarCommands().exportCrosstab(hA)}else if(hy==='showExportPDFDialog'){this.$H.get_toolbarCommands().exportPdf()}else if(hy==='pauseAutomaticUpdates'){this.$H.get_toolbarCommands().$4();this.$s(e)}else if(hy==='resumeAutomaticUpdates'){this.$H.get_toolbarCommands().$6();this.$s(e)}else if(hy==='toggleAutomaticUpdates'){this.$H.get_toolbarCommands().$d();this.$s(e)}else if(hy==='showShareDialog'){this.$H.get_toolbarCommands().$c()}else if(hy==='showDownloadWorkbookDialog'){var hB=this.$H.get_applicationPresModel().res.mmK;this.$H.get_toolbarCommands().$1(hB.nhM.VrA)}else if(hy==='selectedMarksKeepOnly'){this.$H.get_toolbarCommands().$b()}else if(hy==='selectedMarksExclude'){this.$H.get_toolbarCommands().$a()}},$s:function(e){var L=I.newAutoUpdateState(this.$H.get_toolbarCommands().$2());var hy=o.$0('api.success',L);this.$G.sendCrossDomainResponse(e,hy)},$x:function(e){var L=J.fromJsonHelper(e.get_parameters());var hy=new Object;hy.commandName='set-sheet-size'.toString();hy.commandNamespace='tabdoc'.toString();hy.commandParams={};hy.commandParams['Gge']=L['api.setSheetSizeName'];hy.commandParams['EVq']=L['api.minWidth'];hy.commandParams['pAn']=L['api.minHeight'];hy.commandParams['PiK']=L['api.maxWidth'];hy.commandParams['McJ']=L['api.maxHeight'];this.$u(e,hy,null)},$n:function(e){this.$H.get_toolbarCommands().$5();var L=o.$0('api.success','');this.$G.sendCrossDomainResponse(e,L)},$p:function(e){tab.WorksheetServerCommands.revert();var L=o.$0('api.success','');this.$G.sendCrossDomainResponse(e,L)},$z:function(e){var L=J.fromJsonHelper(e.get_parameters());var hy=L['api.showHideToolbarValue'];this.$H.set_toolbarDisplayed(hy);this.$H.doResize()},$A:function(e){var L=J.fromJsonHelper(e.get_parameters());var hy=new Object;hy.oldRepositoryUrl=L['api.oldRepositoryUrl'];hy.repositoryUrl=L['api.switchToRepositoryUrl'];hy.sheetName=L['api.switchToSheetName'];hy.oldSheetName=tsConfig.current_sheet_name;hy.noUndo=true;hy.successCallback=ss.mkdel(this,function(hz){var hA=o.$0('api.success','');this.$G.sendCrossDomainResponse(e,hA)});hy.errorCallback=ss.mkdel(this,function(hz){var hA=o.$0('api.remotefailed',hz);this.$G.sendCrossDomainResponse(e,hA)});dojo.publish('onTabSelect'.toString(),[hy])},$B:function(e){this.$H.doResize()},$t:function(e){if(tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapFailed()){return}if(!tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){return}var L=B.serializeClientInfo(this.$H,this.$L);var hy=o.$0('api.success',L);this.$G.sendCrossDomainResponse(e,hy)},$v:function(e){var L=tab.VizUriModel.createForViewingSheet(tsConfig.repositoryUrl).get_absoluteUri();var hy=o.$0('api.success',L);this.$G.sendCrossDomainResponse(e,hy)},$k:function(e,L,hy){return this.$j(e,tab.CommandUtils.newDocCommand(L),hy)},$l:function(e,L,hy){return this.$j(e,tab.CommandUtils.newSrvCommand(L),hy)},$j:function(e,L,hy){var hz=J.fromJsonHelper(e.get_parameters());var hA=this.$9(hz);L.commandParams=hA;hy(hz,hA);return L},$9:function(e){var L={};if(ss.isValue(e['api.visualId'])){L['J_M']=J.toJsonHelper(e['api.visualId'])}else{L['AVP']=e['api.worksheetName'];if(ss.isValue(e['api.dashboardName'])){L['XwZ']=e['api.dashboardName']}}return L},$u:function(e,L,hy){L.noExceptionDialog=true;tab.ApiClientCommands.doApiCommand(L,ss.mkdel(this,function(hz){var hA=hz;if(ss.isValue(hy)){hA=hy(hz)}var hB=o.$0('api.success',hA);this.$G.sendCrossDomainResponse(e,hB)}),ss.mkdel(this,function(hz){var hA=o.$0('api.remotefailed',hz);this.$G.sendCrossDomainResponse(e,hA)}))}},null,[ss.IDisposable]);ss.initClass(K,a,{dispose:function(){this.$8.dispose();this.$9=true},activateStoryPoint:function(e){this.$6(e,ss.mkdel(this,this.$2))},activatePreviousStoryPoint:function(e){this.$6(e,ss.mkdel(this,function(L){return this.$1(L,function(hy){return hy.clickPrevious()})}))},activateNextStoryPoint:function(e){this.$6(e,ss.mkdel(this,function(L){return this.$1(L,function(hy){return hy.clickNext()})}))},revertStoryPoint:function(e){this.$6(e,ss.mkdel(this,this.$5))},$5:function(e){return this.$3(e,'api.RevertStoryPoint',function(L){return L.revertStoryPoint()})},$2:function(e){return this.$3(e,'api.ActivateStoryPoint',function(L){return L.clickStoryPoint()})},$3:function(e,L,hy){K.$0(e,L);var hz=tab.JsonUtil.parseJson(e.get_parameters());var hA=hz['api.storyPointIndex'];if(!ss.isValue(hA)||isNaN(ss.unbox(hA))){throw new ss.Exception('Missing index parameter.')}var hB=this.$0();if(ss.Nullable$1.lt(hA,0)||ss.Nullable$1.ge(hA,ss.count(hB.get_captions()))){throw new ss.Exception('The index is out of bounds.')}var hC=$.Deferred();var hD=ss.getItem(hB.get_captions(),ss.unbox(hA));hy(hD).then(ss.mkdel(this,function(hE){var hF=B.serializeStoryPoint(hE,this.$7);hC.resolve(hF)}),function(hE){hC.reject(hE)});return hC.promise()},$1:function(e,L){K.$0(e,['api.ActivateNextStoryPoint','api.ActivatePreviousStoryPoint']);var hy=this.$0();var hz=$.Deferred();L(hy).then(ss.mkdel(this,function(hA){var hB=ss.getItem(hy.get_captions(),hA);var hC=B.serializeStoryPoint(hB,this.$7);hz.resolve(hC)}),function(hA){hz.reject(hA)});return hz.promise()},$4:function(){var e=B.serializeStory(this.$7);var L=J.toJsonHelper(e);this.$a.sendCrossDomainEventNotification('api.StorytellingStateChangedEvent',null,L)},$0:function(){var e=this.$7.get_flipboardNavigatorViewModel();if(ss.isNullOrUndefined(e)){throw new ss.Exception('The active sheet is not a story.')}return e},$6:function(L,hy){try{hy(L).then(ss.mkdel(this,function(e){var hz=o.$0('api.success',e);this.$a.sendCrossDomainResponse(L,hz)}),ss.mkdel(this,function(e){var hz=o.$0('api.remotefailed',e);this.$a.sendCrossDomainResponse(L,hz)}))}catch(hz){var e=ss.Exception.wrap(hz);var errorResult1=o.$0('api.localfailed',e.get_message());this.$a.sendCrossDomainResponse(L,errorResult1)}}},null,[ss.IDisposable]);ss.initClass(M,a,{add_clientChanged:function(e){this.$1$3=ss.delegateCombine(this.$1$3,e)},remove_clientChanged:function(e){this.$1$3=ss.delegateRemove(this.$1$3,e)},get_tabbedNavigation:function(){return this.$l},get_client:function(){return this.$h},initTabbedNavigation:function(){if(!tab.ApplicationModel.get_instance().get_showTabs()){return}var e=$('.tabbedNavigation');if(e.length>0){if(ss.isValue(this.$l)){this.$l.destroy()}this.$l=new tableau.base.widget.TabbedNavigation({},e[0]);this.$l.startup()}},dispose:function(){if(!ss.isValue(M.$2)){return}if(ss.isValue(this.$g)){this.$g.dispose();this.$g=null}this.$1();for(var e=0;e<this.$k.length;e++){var L=this.$k[e];dojo.unsubscribe(L)}ss.clear(this.$k);this.$a();this.$i.dispose();if(ss.isValue(this.$l)){this.$l.destroy();this.$l=null}spiff.GlobalTouchWatcher.dispose();tab.ApplicationModel.get_instance().get_workbook().remove_dashboardDeleted(ss.mkdel(this,this.$f));M.$2=null},$f:function(e){this.$1()},$1:function(){if(ss.isNullOrUndefined(this.$h)){return}this.$h.destroyRecursive();this.$h=null;this.$j=null},$2:function(e){tab.SheetClientCommands.switchSheets(e,tsConfig.embedded)},$a:function(){if(!M.get_isHostedInApiContext()){return}if(ss.isValue(this.$g)){var e=window.removeEventListener;if(ss.isValue(e)){e('message',ss.mkdel(this,this.$3),true)}else{var L=ss.mkdel(this,this.$3);window.self.detachEvent('onmessage',L)}this.$g=null}},$7:function(e,L){if(!M.get_isHostedInApiContext()){return}this.$g=new J(e,L,tabBootstrap.ViewerBootstrap.get_instance().apiResponder);var hy=window.addEventListener;if(ss.isValue(hy)){hy('message',ss.mkdel(this,this.$3),true)}else{var hz=ss.mkdel(this,this.$3);window.self.attachEvent('onmessage',hz)}},$0:function(){if(!M.get_isHostedInApiContext()){return}if('addEventListener'in window.self){window.addEventListener('unload',ss.mkdel(this,this.$9),true)}else{window.self.attachEvent('onunload',ss.mkdel(this,this.$9))}},$9:function(e){this.$a()},$4:function(){this.$d();this.$6();tab.StartupUtils.remove_clientFullyLoaded(ss.mkdel(this,this.$4))},$6:function(){tabBootstrap.MetricsController.initSessionInfo();tab.MetricsLogger.get_instance().attach()},$3:function(e){if(typeof(ss.getType('ss'))==='undefined'){return}if(ss.isValue(this.$g)){this.$g.handleEvent(e)}},$5:function(e){this.$e(e);var L=tab.CommandController.get().get_legacySession();this.$1();tab.ApplicationModel.get_instance().get_shapeManager().clearShapeStampCache();tabBootstrap.MetricsController.initSessionInfo();var hy=M.$0(true,L);this.$h=hy;this.$j=hy;this.$h.startup();if(ss.isValue(this.$1$3)){this.$1$3()}this.$d();if(tabBootstrap.Utility.get_embedMode()==='embeddedInWg'||tabBootstrap.Utility.get_embedMode()==='notEmbedded'){this.$b(e)}},$d:function(){if(ss.isValue(this.$g)){this.$g.updateClients(this.$h,this.$j)}},$b:function(e){if(tsConfig.is_authoring){this.$c(e.YnR,e.DDA)}else{this.replaceWindowLocationForTabChangeWhileViewing(e.YnR)}},$c:function(e,L){if(this.$8(e)){var hy=tab.VizUriModel.createForAuthoringPublishedSheet(e);hy.replaceState()}else{var hz=tab.VizUriModel.createForCurrentWindowLocation();if(hz.get_isAuthorNewWorkbookUri()){}else if(tab.MiscUtil.isNullOrEmpty(e)){var hA=tab.VizUriModel.createForAuthoringUnpublishedSheet(tsConfig.origin_repository_url,L);hA.replaceState()}}},replaceWindowLocationForTabChangeWhileViewing:function(e){if(this.$8(e)){var L=tab.VizUriModel.createForViewingSheet(e);L.replaceState()}else{}},$8:function(e){if(tab.MiscUtil.isNullOrEmpty(e)||ss.startsWithString(e,'ds:')){return false}return true},$e:function(e){tsConfig.current_sheet_name=e.DDA;tsConfig.current_sheet_type=e.xD;tsConfig.current_view_id=e.$oY;if(e.ko_===true){tsConfig.current_custom_view_id=e.s_w}else{tsConfig.current_custom_view_id=null}tsConfig.layoutid=e.JAR;tsConfig.embeddedTitle=e.EGq;tsConfig.blogURI=e.eeK;tsConfig.requestURI=e.EtP;tsConfig.downloadURI=e.VrA;tsConfig.staticImage=e.ZWJ;tsConfig.guid=e.OVc;var L=e.YnR;tsConfig.repositoryUrl=(this.$8(L)?L:'')}},null,[ss.IDisposable]);ss.initClass(N,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(O,a,{get_dom:function(){return this.get_template()},get_dashboardNode:function(){return this.$d.get_dashboardNode()},get_containerNode:function(){return this.$d.get_containerNode()},get_toolbarContainer:function(){return this.get_dom().toolbarContainer},$b:function(){return this.get_viewModel()},onAddedToDom:function(){if(!this.get_addedToDom()){this.$a();this.$9()}spiff.Widget.prototype.onAddedToDom.call(this)},resizeToolbar:function(){this.$c.forceResizeToolbar()},$a:function(){this.$d=spiff.ObjectRegistry.newView(hq).call(null,[this.$b().get_workbookViewModel()]);this.$d.addToDom(this.get_dom().domNode)},$9:function(){var e=tabBootstrap.MetricsController.createContext('TBRADD'.toString(),64,null);try{this.$c=spiff.ObjectRegistry.newView(gz).call(null,[this.$b().get_toolbarViewModel()]);this.$c.addToDom(this.get_toolbarContainer());this.get_toolbarContainer().height(tabBootstrap.ViewerBootstrap.get_instance().get_vizToolbarHeight())}finally{if(ss.isValue(e)){e.dispose()}}}},ss.makeGenericType(spiff.BaseView$1,[Q]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[Q])]);ss.initInterface(dg,a,{get_domNode:null,get_isDashboard:null,get_vizSize:null,get_session:null,get_viewControllers:null,get_applicationPresModel:null,get_toolbarContainer:null,get_requestURI:null,get_toolbarDisplayed:null,set_toolbarDisplayed:null,get_vFilterList:null,get_toolbarCommands:null,get_customViewsViewModel:null,destroyRecursive:null,startup:null,doResize:null});ss.initInterface(de,a,{get_flipboardNavigatorViewModel:null,get_containedSheetName:null,get_containedSheetType:null,get_containedSheetZoneId:null,get_containedDashboardZones:null,get_hasContainedSheet:null});ss.initClass(P,a,{get_flipboardNavigatorViewModel:function(){if(ss.isValue(this.$A)&&ss.isValue(this.$A.get_dashboardViewModel())){return this.$A.get_dashboardViewModel().get_flipboardNavigatorViewModel()}return null},get_hasContainedSheet:function(){return ss.isValue(this.get_containedSheetZoneId())},get_containedSheetName:function(){var e=this.$v();if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_dashboardViewModel())||ss.isNullOrUndefined(e.get_dashboardViewModel().get_dashboardModel())){return null}return e.get_dashboardViewModel().get_dashboardModel().get_sheetName()},get_containedSheetZoneId:function(){var e=this.$v();if(ss.isNullOrUndefined(e)||e.get_flipboardModel()===null){return null}return e.get_flipboardModel().get_zoneId()},get_containedSheetType:function(){var e=this.$v();if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_flipboardModel())||ss.isNullOrUndefined(e.get_flipboardModel().get_storyPointModel())){return'worksheet'}return(e.get_flipboardModel().get_storyPointModel().get_isBackingSheetDashboard()?'dashboard':'worksheet')},get_containedDashboardZones:function(){var e=this.$v();if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_dashboardViewModel())||ss.isNullOrUndefined(e.get_dashboardViewModel().get_dashboardModel())||ss.isNullOrUndefined(e.get_dashboardViewModel().get_dashboardModel().pm)){return null}return e.get_dashboardViewModel().get_dashboardModel().pm.HCq},get_autoUpdate:function(){return tab.ApplicationModel.get_instance().get_autoUpdate()},set_autoUpdate:function(e){tab.ApplicationModel.get_instance().set_autoUpdate(e)},get_isDashboard:function(){return this.$t().get_isDashboard()},$x:function(){return tabBootstrap.ViewerBootstrap.get_instance().get_shouldShowTabs()},get_vizSize:function(){return tab.ApplicationModel.get_instance().get_workbook().get_outerDashboardSize()},get_session:function(){return this.session},get_vFilterList:function(){return null},get_applicationPresModel:function(){return tab.ApplicationModel.get_instance().get_appPresModel()},get_requestURI:function(){return tsConfig.requestURI},get_viewControllers:function(){var e=this.$s();if(ss.isValue(e)){return e.get_viewControllers()}return[]},get_toolbarDisplayed:function(){return tabBootstrap.ViewerBootstrap.get_instance().toolbarDisplayed},set_toolbarDisplayed:function(e){tabBootstrap.ViewerBootstrap.get_instance().toolbarDisplayed=e;if(ss.isValue(this.get_toolbarContainer())){this.get_toolbarContainer().toggle(e)}},get_invalid:function(){return tab.ApplicationModel.get_instance().get_invalid()},set_invalid:function(e){tab.ApplicationModel.get_instance().set_invalid(e)},get_skipInit:function(){return this.skipInit},get_toolbarCommands:function(){return this.$H},get_customViewsViewModel:function(){if(ss.isValue(this.get_toolbarViewModel())){return this.get_toolbarViewModel().get_customViewsViewModel()}else{return null}},get_toolbarViewModel:function(){if(ss.isValue(this.$A)){return this.$A.get_toolbarViewModel()}else{return null}},$w:function(){return tab.Logger.getLoggerWithName(ss.getTypeName(P)+tsConfig.layoutid)},$v:function(){if(ss.isValue(this.$A)&&ss.isValue(this.$A.get_dashboardViewModel())){return this.$A.get_dashboardViewModel().get_flipboardViewModel()}return null},$t:function(){if(ss.isValue(this.$A)){return this.$A.get_dashboardViewModel()}return null},$s:function(){if(ss.isValue(this.$A)){return this.$A.get_contentDashboardViewModel()}return null},get_domNode:function(){return this.$z.get_dom().domNode},$u:function(){return this.$z.get_dom().vizPlaceholder},get_toolbarContainer:function(){return this.$z.get_toolbarContainer()},startup:function(){this.$A=new Q(tab.ApplicationModel.get_instance());this.$z=spiff.ObjectRegistry.newView(O).call(null,[this.$A]);this.$A.add_applicationUpdate(ss.mkdel(this,this.$i));this._connections.push(new tab.CallOnDispose(ss.mkdel(this,function(){this.$A.remove_applicationUpdate(ss.mkdel(this,this.$i))})));this.$o();this.resize(false)},destroyRecursive:function(){this.destroy()},destroy:function(){if(ss.isValue(this.$F)){window.clearTimeout(ss.unbox(this.$F));this.$F=null}this.$H.dispose();this.$H=null;for(var e=0;e<this._connections.length;e++){var L=this._connections[e];L.dispose()}ss.clear(this._connections);for(var hy=0;hy<this._subscriptions.length;hy++){var hz=this._subscriptions[hy];dojo.unsubscribe(hz)}ss.clear(this._subscriptions);if(ss.isValue(this.$A)){this.$A.dispose();this.$A=null}$('body').unbind(this.createNamespacedEventName('mouseenter')).unbind(this.createNamespacedEventName('mouseleave'));this.$z.dispose();this.$y=null;this.$z=null;this.dispose()},doResize:function(){if(!tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){this.$G++}this.$m(!this.$B)},$9:function(){return this.makeExportPdfDialog(this.get_session())},makeExportPdfDialog:null,createTapToInteractTransition:function(e,L){},createTapToInteractTouchHandler:function(e){},makeAuthorByline:function(){return new T(tsConfig.workbook_repo_url)},resize:function(e){if(!e&&ss.isValue(this.$E)){var L=tabBootstrap.ViewerBootstrap.get_instance().getWebClientDashboardContainerSize(tsConfig.current_sheet_type);if(L.w===this.$E.w&&L.h===this.$E.h){this.$D=false;return}if(this.$D){this.$E=L;this.$D=false;return}this.$D=true}else{this.$D=false}this.doResize()},$b:function(){tab.CommandController.get().resetInvalidationHandlers();tab.CommandController.get().add_onUrlActionsResponse(tab.ActionUtils.launchActionUrls);this._connections.push(new tab.CallOnDispose(function(){tab.CommandController.get().remove_onUrlActionsResponse(tab.ActionUtils.launchActionUrls)}));tab.CommandController.get().add_onInvalidation(ss.mkdel(this,this.$h));this._connections.push(new tab.CallOnDispose(ss.mkdel(this,function(){tab.CommandController.get().remove_onInvalidation(ss.mkdel(this,this.$h))})));tab.CommandController.get().add_onPrimaryBootstrapSuccess(ss.mkdel(this,this.$f));this._connections.push(new tab.CallOnDispose(ss.mkdel(this,function(){tab.CommandController.get().remove_onPrimaryBootstrapSuccess(ss.mkdel(this,this.$f))})))},$j:function(e){if(tsConfig.is_authoring&&tsConfig.current_sheet_type!=='worksheet'){if(tab.FeatureFlags.isEnabled('DashWebAuthSP2')){if(ss.referenceEquals(e.target,this.get_domNode().get(0))||ss.referenceEquals(e.target,this.$z.get_dashboardNode().get(0))||ss.referenceEquals(e.target,this.$z.get_containerNode().get(0))||ss.referenceEquals(e.target,hq.findDashboardContainer().get(0))){tab.SelectionClientCommands.clearActiveZone()}}return}if(ss.isValue(e.target)){if(ss.referenceEquals(e.target,this.get_domNode().get(0))||ss.referenceEquals(e.target,this.$z.get_dashboardNode().get(0))||$(e.target).hasClass('wcLayoutContainer')){var L=tab.ModelUtils.findActiveOrDefaultVisual();if(ss.isValue(L)){tab.SelectionClientCommands.clearAllSelections(L.get_visualId())}this.$6();e.preventDefault()}}},$o:function(){$('html').attr('lang',tsConfig.language);$('body').addClass((tab.BrowserSupport.get_isWindows()?'os-windows':''));$('#centeringContainer').append(this.get_domNode());var e=new d;this.get_domNode().bind(this.createNamespacedEventName('contextmenu'),ss.mkdel(this,this.$g)).bind(this.createNamespacedEventName('mousedown'),ss.mkdel(e,e.$0)).bind(this.createNamespacedEventName('mouseup'),ss.mkdel(e,e.$1));this._connections.push(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_domNode().unbind(this.createNamespacedEventName('contextmenu')).unbind(this.createNamespacedEventName('mousedown')).unbind(this.createNamespacedEventName('mouseup'))})));e.$6(ss.mkdel(this,this.$j));this._connections.push(new tab.CallOnDispose(ss.mkdel(this,function(){e.$7(ss.mkdel(this,this.$j))})));this.$z.onAddedToDom();this.session.get_waitHandler().unlock();this.get_toolbarContainer().toggle(this.get_toolbarDisplayed());this.$r();tab.BaseSession.linkTarget=tsConfig.linktarget;this._subscriptions.push(dojo.subscribe('onDoLaunchAuthoring',ss.mkdel(this,this.$7)));this.$b()},$k:function(){if(tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){}},$7:function(e){tab.ToolbarServerCommands.launchEditing()},$a:function(){if(!ss.isNullOrEmptyString(tsConfig.primaryContentUrl)){return tsConfig.primaryContentUrl}if(ss.referenceEquals(window.self,window.top)){return null}var e=tableau.util.parseUri(document.referrer);if(!ss.isValue(e)||ss.isValue(e['hostname'])&&ss.referenceEquals(e['hostname'],window.location.hostname)){return null}return document.referrer},$i:function(){if(ss.isNullOrUndefined(this.$t())){return}var e=this.$s();if(ss.isValue(e)&&ss.getKeyCount(e.viewControllersBySheet)===1){this.$p(e.get_viewControllers()[0],null)}this.$r();if(!this.get_skipInit()&&!this.$C){this.session.get_waitHandler().onNextHide(ss.mkdel(this,this.$8));this.$n()}this.$C=true;this.resize(false)},$r:function(){},$n:function(){if(tsConfig.showLytebox){$('#primaryContent').attr('src',this.$a())}},$6:function(){if(this.get_viewControllers().length<=1){return}this.$p(null,null)},$p:function(e,L){var hy=ss.mkdict(['data',L,'oldActive',null,'newActive',null]);var hz=null;var hA=null;if(ss.isValue(this.$y)){hz=this.$y;hy['oldActive']=hz.get_viewWidget()}if(ss.isValue(e)){hA=e;hy['newActive']=hA.get_viewWidget()}if(ss.referenceEquals(hA,hz)){return}this.$y=hA;if(this.get_autoUpdate()||!this.get_invalid()){this.session.fireEvent('activeViewChanged',hy)}},$g:function(e){var L=$(e.target);if(L.filter('input[type=text]').length===0&&L.filter('textarea').length===0){e.preventDefault();e.stopPropagation()}},$f:function(){M.get_instance().initTabbedNavigation();this.$E=tabBootstrap.ViewerBootstrap.get_instance().getWebClientDashboardContainerSize(tsConfig.current_sheet_type);if(this.$G>1){this.$q(P.getClientBounds())}},$h:function(e){var L=e.layoutStatus;if(ss.isValue(e.primarySheet)){var hy=this.$s().viewControllersBySheet['v_'+e.primarySheet];if(ss.isValue(hy)){this.$p(hy,e)}}this.set_invalid((ss.isNullOrUndefined(L.Ijt)?false:L.Ijt));if(ss.isValue(L.XRl)&&L.XRl.length>0){var hz=[];for(var hA=0;hA<L.XRl.length;hA++){var hB=L.XRl[hA];if(!ss.contains(hz,hB.Gge)&&hB.iaP.length>0){hz.push(hB.Gge)}}var hC=this.get_viewControllers();for(var hD=0;hD<hz.length;hD++){var hE={$:hz[hD]};var hF=_.find(hC,ss.mkdel({viewName:hE},function(hG){return ss.referenceEquals(hG.get_sheetName(),this.viewName.$)}));if(ss.isValue(hF)){hF.get_viewSession().fireSelectionChanged(e)}}}},$m:function(e){var L=(e?0:1000);if(ss.isValue(this.$F)){window.clearTimeout(ss.unbox(this.$F));this.$F=null}this.$F=window.setTimeout(ss.mkdel(this,this.$l),L)},$l:function(){if(!this.session.get_waitHandler().isBusy()&&(!this.$B||ss.isValue(tsConfig.layoutid))&&ss.isValue(this.$A)){this.$c();return}if(ss.isValue(this.$F)){window.clearTimeout(ss.unbox(this.$F));this.$F=null}this.$F=window.setTimeout(ss.mkdel(this,this.$l),100)},$c:function(){this.$E=tabBootstrap.ViewerBootstrap.get_instance().getWebClientDashboardContainerSize(tsConfig.current_sheet_type);var e=P.getClientBounds();tab.DomUtil.setContentBox(this.$u().get(0),e);this.$q(e);tab.CommandController.get().refreshLayout();this.$d(e);var L=M.get_instance().get_tabbedNavigation();if(tsConfig.is_mobile_app&&this.$x()&&ss.isValue(L)){L.domNode.style.width=e.w+'px';if(tab.BrowserSupport.get_isIos()&&tab.BrowserSupport.get_iosVersion()<9){L.domNode.style.maxWidth=$('body').width()+'px'}var hy=tab.ApplicationModel.get_instance().get_workbook().get_outerDashboardSize();if(ss.isValue(hy)){L.resize$1(hy)}}this.$B=true},$d:function(e){var L=tabBootstrap.MetricsController.createContext('TBRLAY'.toString(),64,null);try{if(!tab.ApplicationModel.get_instance().get_showToolbar()){this.get_toolbarContainer().css('visibility','hidden')}else if(tsConfig.toolbarContainerVis){if(gA.get_toolbarIsBottom()){this.get_domNode().after(this.get_toolbarContainer())}this.get_toolbarContainer().css('visibility','visible');if(tsConfig.is_mobile_app){this.get_toolbarContainer().css('width',e.w+'px');if(tab.BrowserSupport.get_isIos()&&tab.BrowserSupport.get_iosVersion()<9){this.get_toolbarContainer().css('max-width',$('body').width())}}else if(gA.get_toolbarIsBottom()||!this.$x()){this.get_toolbarContainer().css('max-width',e.w+'px')}this.$z.resizeToolbar()}}finally{if(ss.isValue(L)){L.dispose()}}},$q:function(e){if(!tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()||this.skipInit&&!this.$B){return}var L={};L.rec=e.w;L.EUR=e.h;var hy=L;tab.SheetClientCommands.setPortSize(hy)},$e:function(){var e={};e['t']=tabBootstrap.MetricsController.getTiming();e['d']='APPINT'.toString();var L=new tabBootstrap.MetricsEvent('gen',2,e);tabBootstrap.MetricsController.logEvent(L);tab.BrowserSupport.doPostMessageWithContext('tableau.responsive')},$8:function(){var e=(tab.ProgressiveLoader.get_progressiveLoadEnabled()?150:450);this.$e();var L=$('#staticImage');var hy=$('#loadingGlassPane');var hz=$('#loadingSpinner');var hA=$('#tapToInteract');this.createTapToInteractTouchHandler(hA);if(tsConfig.animateTransition){hz.fadeOut(e,ss.thisFix(function(hB){$(hB).hide()}));L.fadeOut(e,ss.thisFix(function(hB){$(hB).hide()}));hy.fadeOut(e,ss.thisFix(function(hB){$(hB).css('cursor','default');$(hB).hide()}));if(hy.size()>0){this.createTapToInteractTransition(tsConfig.animateTransition,e)}}else{hz.css('display','none');L.css('display','none');hy.css('display','none');this.createTapToInteractTransition(tsConfig.animateTransition,0)}}},spiff.Widget,[spiff.IAppendableView,ss.IDisposable,dg,de]);ss.initClass(Q,a,{add_applicationUpdate:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_applicationUpdate:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_dashboardViewModel:function(){return this.$5.get_dashboardViewModel()},get_contentDashboardViewModel:function(){return this.$5.get_contentDashboardViewModel()},get_workbookViewModel:function(){return this.$5},get_toolbarViewModel:function(){return this.$4},dispose:function(){if(ss.isValue(this.$4)){this.$4.dispose()}this.$2();this.$3.remove_newWorkbook(ss.mkdel(this,this.handleNewWorkbook));spiff.BaseViewModel.prototype.dispose.call(this)},handleNewWorkbook:function(e){this.$2();this.$5=new hr(e)},$2:function(){if(ss.isValue(this.$5)){this.$5.dispose();this.$5=null}},handleApplicationUpdate:function(){this.raiseActionEvent(this.$2$1)}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(R,a,{$c:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},$d:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},$a:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},$b:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},dismiss:function(){this.get_element().remove()},$8:function(){this.$9.label.text(tab.Strings.AreYouSureText);var e=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$6),tab.Strings.AreYouSureCancel,null,2,null);this.disposables.add$1(e);this.$9.cancelButton.append(e.get_element());var L=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$7),tab.Strings.AreYouSureDelete,null,1,null);this.disposables.add$1(L);this.$9.confirmButton.append(L.get_element())},$6:function(){this.dismiss();if(ss.isValue(this.$2$2)){this.$2$2()}},$7:function(){this.dismiss();if(ss.isValue(this.$2$1)){this.$2$1()}}},spiff.Widget,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(S,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(T,a,{get_element:function(){return this.authorBylineElement},displayAuthorByline:function(e){var L=ss.Int32.div(e-this.authorBylineElement.width(),2)+'px';this.authorBylineElement.css('left',L);var hy=this.$0();var hz=ss.formatString('<a target="_blank" href="{0}">{1}</a>',tableau.format.escapeHTML(hy),tableau.format.escapeHTML(tab.Strings.AuthorBylineText));this.authorBylineText.html(hz)},dispose:function(){if(ss.isValue(this.authorBylineElement)){this.authorBylineElement.remove()}},$0:function(){var e=window.location;return ss.formatString('{0}//{1}/profile/app/rdr/repo?workbook={2}',e.protocol,e.hostname,this.$1)}},null,[ss.IDisposable]);ss.initClass(W,a,{get_retryWithMessageViewName:function(){return ss.formatString('/{0}/dataSourceGenericErrorView.html',tsConfig.language)},getRetryConentLoadedHandler:function(e){var L=ss.mkdel(this,function(){var hy=document.getElementById('ds-retrybtn');hy.onclick=ss.mkdel(this,function(hz){if(ss.isValue(this.onProceed)){this.cleanup(null,e);this.onProceed()}})});return L},onAuthDialogMessage:function(e,L){if(ss.isNullOrUndefined(e)){return}var hy=e;var hz=hy.data.toString();if(ss.isNullOrEmptyString(hz)||!ss.equalsT(hz,'tableau.authCompleted')){return}if(!ss.equalsT(tab.BrowserSupport.getOrigin(document.location),hy.origin)){return}this.cleanup(null,L);if(ss.isValue(this.onProceed)){this.onProceed()}},show:null,cleanup:null});ss.initClass(V,a,{cleanup:function(e,L){var hy=document.getElementById('auth-overlay');if(!ss.isNullOrUndefined(hy)){hy.parentElement.removeChild(hy)}if(ss.isValue(L)){dojo.unsubscribe(L.onTabSelectHandle);tab.WindowHelper.removeListener(window.self,'message',L.eventHandler);if(ss.isValue(L.zoneBecameValidHandler)){dojo.unsubscribe(L.zoneBecameValidHandler)}}},createOverlay:null},W);ss.initClass(U,a,{show:function(){this.createOverlay(null);var e=new cs;var L=ss.mkdel(this,function(hA){this.cleanup(null,e)});e.zoneBecameValidHandler=L;dojo.subscribe('ZoneBecameValid',L);var hy=ss.mkdel(this,function(hA){this.onAuthDialogMessage(hA,e)});e.eventHandler=hy;var hz=dojo.subscribe('onTabSelect',ss.mkdel(this,function(hA){this.cleanup(hA,e)}));e.onTabSelectHandle=hz;tab.WindowHelper.addListener(window.self,'message',hy)},createOverlay:function(e){var L=$('.dashboardSpacer');var hy=$("<div id='auth-overlay'></div>");var hz=document.createElement('iframe');hz.setAttribute('src',this.$0);hz.setAttribute('tb-test-id','dse-frame');hy.append(hz);L.append(hy)}},V);ss.initClass(Z,a,{get_lineHeight:function(){return this.parent.get_presModel().$tN},get_width:function(){return this.$2},set_width:function(e){this.$2=e},get_itemFormatter:function(){return this.$1},set_itemFormatter:function(e){this.$1=e},get_scrollNode:function(){return null},instantiate:function(e,L,hy){},shouldNotReinstantiate:function(){return false},updateContent:function(e){},resetContent:function(e,L,hy){},setUpForPendingChanges:function(){if(this.parent.shouldDeferChanges()){this.pendingManager=this.parent.makePendingChangesManager();this.pendingManager.add_onPendingChanges(ss.mkdel(this,this.enableApplyButton));this.pendingManager.add_onNoPendingChanges(ss.mkdel(this,this.disableApplyButton));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.pendingManager.remove_onPendingChanges(ss.mkdel(this,this.enableApplyButton));this.pendingManager.remove_onNoPendingChanges(ss.mkdel(this,this.disableApplyButton))})));this.$0()}},$0:function(){this.apply=spiff.LabelButton.newNativeButton();this.apply.set_label(tab.Strings.QuickFilterApply);var e=ss.mkdel(this,function(){this.resetPendingVisuals(false);this.parent.applyPendingChangesByChangelist()});this.apply.add_click(e);this.disposables.add$1(this.apply);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.apply.remove_click(e)})));this.cancel=spiff.LabelButton.newNativeButton();this.cancel.set_label(tab.Strings.QuickFilterCancel);var L=ss.mkdel(this,function(){this.resetPendingVisuals(true);this.parent.cancelPendingChangesByChangelist()});this.cancel.add_click(L);this.disposables.add$1(this.cancel);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.cancel.remove_click(L)})));this.disableApplyButton()},appendApplyButton:function(e){if(this.parent.shouldDeferChanges()){e.addClass('CFApplyButtonContainer');e.append(this.cancel.get_element());e.append(this.apply.get_element())}},layoutApplyButton:function(e){if(ss.isValue(e)){var L=e.width();var hy=parseInt(this.apply.get_element().css('margin-right'));var hz=Math.floor(L/2-hy);var hA='max-width';if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<=8&&hz<this.apply.get_element().width()){hA='width'}this.apply.get_element().css(hA,hz+'px');this.cancel.get_element().css(hA,hz+'px')}},enableApplyButton:function(){this.apply.set_disabled(false);this.cancel.set_disabled(false)},disableApplyButton:function(){this.apply.set_disabled(true);this.cancel.set_disabled(true)},resetPendingVisuals:function(e){},applyChanges:function(){},layout:function(e,L){dojo.marginBox(this.div,e)},fetchChildNodeByIndex:function(e){if(ss.isNullOrUndefined(e)||e<0){return null}if(cF.filterItem.isAllItem(this.div.firstChild)){e+=1}return this.div.childNodes[e]},fetchAllItem:function(){return this.div.childNodes[0]},shouldUseAllItem:function(){return this.attributes['show-all']!=='false'},countIfAll:function(e){var L=((this.parent.get_mode()==='checklist')?1:0);for(var hy=0;hy<e.length;hy++){if(e[hy].s){L+=1}}return L===e.length},getSummaryText:function(){return(this.hasSummaryText()?this.parent.get_oFilter().summary:'')},formatTuple:function(e){return tableau.format.formatTupleDisplayName(e,true,this.parent.get_oFilter().role)},formatFacet:function(e){return tableau.format.formatTupleDisplayFacet(e,true,this.parent.get_oFilter().role)},onSmallSearchUI:function(e,L){},hasSummaryText:function(){var e=this.parent.get_mode()==='slider';var L=this.parent.get_mode()==='dropdown'||this.parent.get_mode()==='checkdropdown';var hy=this.parent.get_oFilter().summary;var hz=!ss.referenceEquals(hy,tab.Strings.QuickFilterAll);return ss.isValue(hy)&&(e||L&&hz)},applyChangesByChangelist:function(e,L){var hy=ss.coalesce(this.attributes['values'],'');var hz=[];var hA=[];var hB=[];if(L==='checklist'||L==='checkdropdown'||L==='typeinlist'){var hC=e.compileForChecklist(hy);var hD;for(var hE=0;hE<hC.select.length;hE++){hD=hC.select[hE];hz.push(hD)}for(var hF=0;hF<hC.deselect.length;hF++){hD=hC.deselect[hF];hA.push(hD)}tab.FilterClientCommands.modifyCategoricalFilterValuesByIndex(this.parent.get_session().get_visualId(),this.parent.get_field(),Array.prototype.slice.call(hz),Array.prototype.slice.call(hA))}else if(L==='radiolist'){var hG=e.compileForRadiolist(hy);hB.push(hG.index);tab.FilterClientCommands.setCategoricalFilterValuesByIndex(this.parent.get_session().get_visualId(),this.parent.get_field(),'filter-replace',Array.prototype.slice.call(hB))}},destroy:null,dispose:function(){this.disposables.dispose()}},Object,[ss.IDisposable]);ss.initClass(X,a,{get_scrollNode:function(){var e=null;if(ss.isValue(this.menuNode)){e=this.menuNode.children('.CFInnerContainer').get(0)}return e},instantiate:function(e,L,hy){this.fillListElement=ss.mkdel(this,function(hz){this.createListElement(hz,e,L,hy)});this.dropdown=$('<span>').addClass('tabComboBox').addClass('tab-ctrl-formatted-widget').addClass('tab-ctrl-formatted-darker-border-hover').addClass('tabComboStdTheme').addClass('tabComboBoxNoIcon').addClass('tiledContent').bind('click',ss.mkdel(this,this.onDropdownClicked));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.dropdown.remove()})));this.dropdownLabelContainer=$('<div>').addClass('tabComboBoxNameContainer').addClass('tab-ctrl-formatted-fixedsize').appendTo(this.dropdown);$('<span>').addClass('tabComboBoxName').text(this.getLabelText(e)).appendTo(this.dropdownLabelContainer);$("<div class='tabComboBoxButtonHolder'><span class='tabComboBoxButton'/></div>").appendTo(this.dropdown);this.div.appendChild(this.dropdown.get(0));if(ss.isValue(this.menuNode)){this.menuNode.children('.tiledContent').remove();this.fillMenu(this.menuNode)}this.$6(e.length)},updateContent:function(e){if(ss.isValue(this.menuNode)){if(tab.BrowserSupport.get_isIE()){this.menuNode.css({'box-shadow':'none'})}var L=((e.length>0)?e.join(''):this.searchBox.get_noMatchHtml());var hy=this.menuNode.children('.tiledContent');if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null}hy.html(L);if(this.$c){var hz=this.dropdown.offset();this.menuNode.css({top:hz.top-this.menuNode.outerHeight()+'px'})}if(tab.BrowserSupport.get_isIE()){this.menuNode.css({'box-shadow':'2px 2px 2px #adadad'})}}},resetContent:function(e,L,hy){this.fillListElement=ss.mkdel(this,function(hA){this.createListElement(hA,e,L,hy)});if(ss.isValue(this.menuNode)){this.$a(this.menuNode);var hz=this.$4();this.menuNode.css({top:hz.y+'px',left:hz.x+'px'})}this.dropdownLabelContainer.children().text(this.getLabelText(e));if(ss.isValue(this.searchBox)&&this.searchBox.isShowingResults()){return}if(ss.isValue(this.menuNode)){ba.getViewport(ss.mkdel(this,function(hA){if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null}if(ss.isValue(this.menuNode)){this.menuNode.children().remove();this.$3(hA,this.menuNode)}}))}this.$6(e.length)},$6:function(e){var L=(this.shouldUseAllItem()?1:0);if(e+L<=5){this.searchBox.hideUI()}else{this.searchBox.showUI$1()}},shouldNotReinstantiate:function(){return false},layout:function(e,L){this.inherited(arguments);if(ss.isValue(this.tiledWidget)){this.tiledWidget.updateViewport(e.w,e.h)}},destroy:function(){this.dispose();this.hideMenu();if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy()}this.tiledWidget=null},fetchAllItem:function(){if(!this.shouldUseAllItem()){return null}else{return this.menuNode.children('.CFInnerContainer').children('.FIItem').get(0)}},fetchChildNodeByIndex:function(e){if(ss.isValue(this.tiledWidget)){return this.tiledWidget.getElement(e)}else{return null}},createListElement:null,getLabelText:function(e){var L=cF.isAllOrAllChecked(this.parent);this.currentlySelected=-1;this.multimode=false;var hy=e.length;if(hy===0){if(!L){}return tab.Strings.QuickFilterAll}for(var hz=0;hz<hy;hz++){if(e[hz].s&&!L){if(this.currentlySelected>-1){this.multimode=true;break}this.currentlySelected=hz}}if(L&&hy>1){return tab.Strings.QuickFilterAll}else if(this.multimode){return tab.Strings.QuickFilterMultipleValues}else if(this.currentlySelected===-1&&this.hasSummaryText()){return this.getSummaryText()}else{var hA=((this.currentlySelected>-1)?this.currentlySelected:0);return tableau.format.formatTupleDisplayName(ss.coalesce(e[hA],''),true,this.parent.get_oFilter().role)}},onDropdownClicked:function(e){ba.getViewport(ss.mkdel(this,this.$8))},$8:function(e){if(this.$5()){return}var L=document.body;this.removeGlass();this.glass=new spiff.Glass;this.glass.add_click(ss.mkdel(this,this.hideMenu));this.glass.set_zIndex(899);this.glass.show();var hy=this.$4();this.menuNode=$('<div>').attr('id',this.parent.id+'_menu').addClass('CFOuterContainer').addClass('tabMenuComboDropdownTheme').addClass('tab-ctrl-formatted-widget').css({position:'absolute',top:hy.y+'px',left:hy.x+'px','max-height':30*this.get_lineHeight()+'px','z-index':'900',visibility:'hidden'}).appendTo(L);if(!this.$b){hn.applyFormatting(this.menuNode.get(0),this.parent.get_presModel().mCc,this.parent.get_backgroundColor(),this.get_lineHeight());this.$b=true}this.searchBox.startupNoAppend();this.$a(this.menuNode);this.$3(e,this.menuNode);dojo.toggleClass(this.menuNode.get(0),'QFDropdownMenuAbove',this.$c)},removeGlass:function(){if(ss.isValue(this.glass)){this.glass.remove_click(ss.mkdel(this,this.hideMenu));this.glass.dispose();this.glass=null}},hideMenu:function(){this.searchBox.clearSearch(false,false);this.removeGlass();if(ss.isValue(this.menuNode)){this.menuNode.remove();this.menuNode=null}},$5:function(){return ss.isValue(this.menuNode)||ss.isValue(this.glass)},$4:function(){var e=this.dropdown.offset();var L=this.dropdown.outerHeight();return{x:tab.DoubleUtil.roundToInt(e.left),y:tab.DoubleUtil.roundToInt(e.top)+L-1}},$3:function(e,L){if(ss.isNullOrUndefined(L)){return}this.fillMenu(L);this.$c=this.$7(e,L);if(this.$c){$(this.searchBox.domNode).appendTo(L)}else{$(this.searchBox.domNode).insertBefore(L.children().first())}this.$9(e,L);if(this.searchBox.get_isVisible()){this.searchBox.showUI$1()}},$9:function(e,L){var hy=this.dropdown.offset();var hz=this.dropdown.outerWidth();var hA=document.body;var hB=L.find('.tile').eq(0);var hC=hB.css('right');var hD=(ss.isValue(hB[0])?hB[0].style.width:'');hB.css({right:'auto',width:''});var hE=hB.width()+20;hB.css({right:hC});hB.css({width:hD});hE=Math.max(hE,hz);var hF=$(hA).width();hE=Math.min(hE,hF);L.width(hE);var hG=L.offset();var hH=tab.DoubleUtil.roundToInt(hG.left);var hI=hH+L.outerWidth();var hJ=$(hA).find('.dashboardSpacer');var hK=hJ.offset();var hL=tab.DoubleUtil.roundToInt(hK.left)+hJ.width();var hM=hI-hL;if(hM>0){var hN=hH-hM;hN=Math.max(hN,0);L.css({left:hN+'px'})}var hO=30*this.get_lineHeight();var hP=3*this.get_lineHeight();var hQ=e.getVisibleRoom(tab.PointUtil.fromPosition(hy),0);var hR=(this.$c?hQ.roomAbove:(hQ.roomBelow-2))-20;hR=hR-parseInt(L.css('border-bottom-width'));hR=Math.min(hR,hO);hR=Math.max(hR,hP);L.css({'max-height':hR+'px'});if(this.$c){if(hQ.roomAbove>hR-1){L.css({top:hy.top-L.outerHeight()+'px'})}else{L.css({top:hy.top-hQ.roomAbove+'px'})}}var hS=((ss.isValue(this.searchBox)&&this.searchBox.get_isVisible())?dojo.marginBox(this.searchBox.domNode).h:0);var hT=0;var hU=L.children('.CFInnerContainer');if(this.parent.shouldDeferChanges()&&ss.isValue(this.apply)&&!this.menuNode.hasClass('CFDropdownNoItems')){hT=dojo.marginBox(this.apply.get_element().get(0)).h;this.layoutApplyButton(hU)}if(ss.isValue(hU)){hU.css({'max-height':L.get(0).clientHeight-hS-hT+'px'});this.tiledWidget.updateViewport(hU.height(),0)}L.css({visibility:'visible'})},$7:function(e,L){var hy=this.dropdown.offset();var hz=30*this.get_lineHeight();var hA=e.getVisibleRoom(tab.PointUtil.fromPosition(hy),0);var hB=Math.min(L.outerHeight(),hz)>hA.roomBelow&&hA.roomAbove>hA.roomBelow;return hB},fillMenu:function(e){if(ss.isNullOrUndefined(e)){return}var L=$('<div>').addClass('CFInnerContainer').addClass('tab-ctrl-formatted-text');e.append(L);this.fillListElement(L.get(0))},$a:function(e){if(this.parent.get_oFilter().all||this.parent.get_oFilter().allNotChecked){e.addClass('CFAll')}else{e.removeClass('CFAll')}if(this.parent.get_oFilter().exclude){e.addClass('CFExclusive')}else{e.removeClass('CFExclusive')}}},Z,[ss.IDisposable]);ss.initClass(ba,a,{get_dimensions:function(){return this.$0},translatePositionToViewport:function(e){var L={x:e.x,y:e.y};ba.$0(L);L.y-=this.$0.t;L.x-=this.$0.l;return L},getVisibleRoom:function(e,L){var hy=this.translatePositionToViewport(e);var hz=function(hE){return Math.max(0,hE-L)};var hA=hz(Math.min(this.get_dimensions().w-hy.x,$(window).width()+$(window).scrollLeft()-e.x));var hB=hz(Math.min(hy.x,e.x));var hC=hz(Math.min(hy.y,e.y));var hD=hz(Math.min(this.get_dimensions().h-hy.y,$(window).height()+$(window).scrollTop()-e.y));return{roomAbove:hC,roomBelow:hD,roomLeft:hB,roomRight:hA}},getDocumentViewport:function(e){var L=this.getVisibleRoom(e,0);return{l:e.x-L.roomLeft,t:e.y-L.roomAbove,w:L.roomLeft+L.roomRight,h:L.roomAbove+L.roomBelow}}},null,[tab.IBrowserViewport]);ss.initClass(bc,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(bd,a,{});ss.initClass(bf,a,{get_legendItems:function(){return this.$1}},spiff.Template,[ss.IDisposable]);ss.initClass(bg,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(ec,a,{get_contentArea:function(){return this.legendContentArea}},spiff.Template,[ss.IDisposable]);ss.initClass(bh,a,{},ec,[ss.IDisposable]);ss.initClass(bi,a,{get_docSize:function(){var e=this.get_catLegendViewModel().get_categoricalLegendPM().vNc.vYY;return{w:e.rec,h:e.EUR}},get_catLegendViewModel:function(){return this.get_viewModel()},get_catLegendTemplate:function(){return this.get_template()},get_scrollOffset:function(){var e=this.get_catLegendTemplate().columnsHolder.scrollLeft();var L=this.get_catLegendTemplate().columnsHolder.scrollTop();return{x:e,y:L}},set_scrollOffset:function(e){this.get_catLegendTemplate().columnsHolder.scrollLeft(e.x);this.get_catLegendTemplate().columnsHolder.scrollTop(e.y)},onAddedToDom:function(){ss.makeGenericType(Y,[bj]).prototype.onAddedToDom.call(this);this.drawLegend()},onViewModelPropertyChanged:function(e,L){switch(L.get_propertyName()){case'isActiveZone':case'isReadyZone':{break}case'Items':{if(this.get_catLegendViewModel().get_categoricalLegendPM().vNc.IAN===this.$l.length){this.$g();this.$k()}break}case'ParentZoneSizeChanged':{var hy=this.get_catLegendViewModel().$4();if(hy.w===this.get_catLegendTemplate().panel.width()&&hy.h===this.get_catLegendTemplate().panel.height()){}else{this.resetLegend()}break}case'CustomShapesLoaded':{if(this.get_catLegendViewModel().get_legendTypeEnum()==='shape'){if(ss.isValue(this.$n)){tab.WindowHelper.cancelAnimationFrame(ss.unbox(this.$n))}this.$n=tab.WindowHelper.requestAnimationFrame(ss.mkdel(this,function(){this.$n=null;this.$g()}))}break}case null:{this.resetLegend();break}default:{this.resetLegend();break}}},getLegendItemFromEvent:function(e){var L=$(e.target);if(L.hasClass('tabLegendItemLabelHolder')||L.hasClass('tabLegendItem')){return null}return L.parents('.tabLegendItem').andSelf().first().data('tabLegendItem')},resetLegend:function(){this.drawLegend()},getViewportPosition:function(e){var L=e.get_gestureInfo();var hy={x:L.pageX,y:L.pageY};return hy},getDocumentPosition:function(e){var L={x:e.x,y:e.y};var hy=tab.DomUtil.getDojoCoordsJQ(this.get_catLegendTemplate().columnsHolder);L.x+=this.get_catLegendTemplate().columnsHolder.scrollLeft()+this.bodyOffset.x-hy.x;L.y+=this.get_catLegendTemplate().columnsHolder.scrollTop()+this.bodyOffset.y-hy.y;return L},performSelectOnItem:function(e,L,hy,hz){if(this.get_catLegendViewModel().get_legendTypeEnum()!=='map'){this.get_catLegendViewModel().selectItem(e,L);this.get_legendTooltip().singleSelectCoordinates(hy,{x:hz.x,y:hz.y},this.get_legendViewModel().get_regionType(),'legenditem')}},performHoverOnItem:function(e,L){if(this.get_catLegendViewModel().get_legendTypeEnum()!=='map'){this.get_legendTooltip().hoverOverCoordinates(e,{x:L.x,y:L.y},'legenditem',this.get_legendViewModel().get_regionType())}},setContentSize:function(e,L){bi.setDomNodeStyleSize(this.get_catLegendTemplate().columnsHolder,L,e)},onLegendHighlighterTapped:function(){this.get_catLegendViewModel().toggleHighlighting()},setHighlightButtonVisibility:function(e){e=e&&this.get_catLegendViewModel().$m();if(e){this.get_catLegendTemplate().legendHighlighter.show()}else{this.get_catLegendTemplate().legendHighlighter.hide()}},drawLegend:function(){var e=this.get_catLegendViewModel().get_categoricalLegendPM();var L=e.vNc;for(var hy=0;hy<this.$l.length;hy++){var hz=this.$l[hy];hz.get_domRoot().remove()}ss.clear(this.$l);var hA=this.get_catLegendViewModel().$4().w;var hB=this.get_catLegendViewModel().$4().h;bi.setDomNodeStyleSize(this.get_catLegendTemplate().panel,hA,hB);var hC='tableau_base_legend_'+this.get_catLegendViewModel().get_regionType().toString()+(this.get_catLegendViewModel().$m()?'_q_':'_')+encodeURIComponent(this.get_catLegendViewModel().$7());this.get_catLegendTemplate().panel.get(0).id=hC;bi.$0(this.get_catLegendTemplate().titleArea,true);this.viewportWidth=hA;this.viewportHeight=hB;this.bodyOffset={x:0,y:0};this.drawTitle();var hD=this.get_catLegendViewModel().$5();if(this.get_catLegendViewModel().get_titleInline()){var hE=this.get_catLegendViewModel().get_categoricalLegendPM().vNc.bjh;this.get_baseLegendTemplate().titleArea.css('height',hE+'px');this.get_baseLegendTemplate().titleArea.css('line-height',hE+'px');this.viewportWidth-=hD.w;this.bodyOffset.x+=hD.w}else{this.viewportHeight-=hD.h;this.bodyOffset.y+=hD.h}this.setContentSize(this.viewportHeight,this.viewportWidth);var hF=e.xxA;if(ss.isNullOrUndefined(hF)){hF={};hF.thj=0;hF.RAC=0}this.set_scrollOffset(tab.PointUtil.fromPresModel(hF));var hG=L.EfC.rec;var hH=L.EfC.EUR;var hI=L.RbA.rec;var hJ=L.RbA.EUR;var hK=Math.ceil((hG-hI)/2);var hL=Math.ceil((hH-hJ)/2);var hM={w:hG,h:hH};var hN=null;var hO=false;if(this.get_catLegendViewModel().legendType==='color'||this.get_catLegendViewModel().legendType==='map'){hN={l:hK,t:hL,w:hI,h:hJ};hO=ss.isValue(this.get_catLegendViewModel().$h().jBs)}var hP=this.$j(L);for(var hQ=0;hQ<L.IAN;++hQ){var hR=new bf(L.OSr,hP,L.bjh,hM,hN,hO);this.$l.push(hR);hR.column.width(hP);this.get_catLegendTemplate().columnHolder.append(hR.get_domRoot())}this.$k();this.$g()},$k:function(){this.get_catLegendTemplate().legendHighlighter.toggleClass('tabHighlightEnabled',this.get_catLegendViewModel().$j());this.get_catLegendTemplate().legendHighlighter.toggleClass('tabHighlightDisabled',!this.get_catLegendViewModel().$j())},$g:function(){var e=this.get_catLegendViewModel().get_categoricalLegendPM();var L=e.vNc;var hy=this.get_catLegendViewModel().get_numLegendItems();var hz=0;for(var hA=0;hA<L.IAN&&hz<hy;++hA){var hB=this.$l[hA];for(var hC=0;hC<L.OSr&&hz<hy&&hC<hB.get_legendItems().length;++hC){var hD=hB.get_legendItems()[hC];var hE=this.$e(hz,hD);if(ss.isValue(hE)){this.$f(hE,e,hD);hD.get_domRoot().data('tabLegendItem',hE)}++hz}}},$e:function(e,L){var hy=null;switch(this.get_catLegendViewModel().legendType){case'color':case'map':{hy=this.$d(e,L);break}case'size':{hy=this.$i(e,L);break}case'shape':{hy=this.$h(e,L);break}default:{break}}return hy},$d:function(e,L){var hy=this.get_catLegendViewModel().$h();var hz=hy.DKF[e];var hA=this.get_catLegendViewModel().$o();var hB=tab.ColorModel.fromColorCode(hz.YhU);hB=tab.ColorModel.alphaComposite(hB,hA);var hC=this.get_catLegendViewModel().isLegendItemGrayed(hz);if(hC){hB=fx.applyFoggingToColor(hB,hA)}var hD=hB.toString();L.itemSwatch.css('background-color',hD);L.itemSwatch.get(0).id=hD;if(ss.isValue(hy.jBs)){L.itemSwatch.css('border-style','solid');var hE=tab.ColorModel.fromColorCode(hy.jBs);if(hC){hE=fx.applyFoggingToColor(hE,hA)}L.itemSwatch.css('border-color',hE.toString())}return hz},$h:function(e,L){var hy=this.get_catLegendViewModel().$l();var hz=hy.x_f[e];var hA=hy.vNc.EfC.rec;var hB=hy.vNc.EfC.EUR;var hC=L.renderContext;hC.clearRect(0,0,hA,hB);if(ss.isNullOrUndefined(this.$m)||!this.$m.$P(hz.Yi)){this.$m=new m(L,hA/2,hB/2,hy.vNc.RbA.rec,hy.vNc.RbA.EUR,this.get_catLegendViewModel().$o())}this.$m.$R(hC,hz.Yi,this.get_catLegendViewModel().isLegendItemGrayed(hz));L.itemSwatch.get(0).id=hz.Yi.toString();return hz},$i:function(e,L){var hy=this.get_catLegendViewModel().$n();var hz=hy.nJz[e];var hA=hy.vNc.EfC.rec;var hB=hy.vNc.EfC.EUR;var hC=hy.vNc.RbA.EUR;var hD=Math.ceil((hB-hC)/2);var hE=L.renderContext;hE.save();var hF=bi.$6;var hG=bi.$4;if(this.get_catLegendViewModel().isLegendItemGrayed(hz)){var hH=this.get_catLegendViewModel().$o();hF=fx.applyFoggingToColor(hF,hH);hG=fx.applyFoggingToColor(hG,hH)}hE.set_shapeFillStyle(hF.toString());hE.set_strokeStyle(hG.toString());hE.set_lineWidth(2);var hI=hA/2;var hJ=hB/2;var hK=hz.dIK/2;hE.clearRect(0,0,hA,hB);hE.setClip({x:0,y:1,w:hA,h:hB-2});switch(hy.WnZ){case'shape':case'circle':case'pie':{hE.beginPath();hE.arc(hI,hJ,hK,0,Math.PI*2,false);hE.closePath();hE.fill();hE.beginPath();hE.arc(hI,hJ,hK,0,Math.PI*2,false);hE.closePath();hE.stroke();break}case'line':case'gantt':case'bar':{hE.fillRect(hI-hK,hD,hz.dIK,hC);break}case'square':{var hL=hI-hK;var hM=hJ-hK;hE.fillRect(hL,hM,hz.dIK,hz.dIK);hE.strokeRect(hL,hM,hz.dIK,hz.dIK);break}case'text':{var hN=hy.mYd;if(typeof(hN)==='undefined'){hN=hy.mCc}ch.setTextProperties(hE,hN,hz.dIK);hE.set_textAlign('center');hE.fillText1(tab.Strings.SizeLegendTextMarkSwatch,hI,hJ);break}default:{break}}hE.restore();L.itemSwatch.get(0).id=hy.WnZ.toString()+'_'+hz.dIK.toString();return hz},$j:function(e){if(e.ICz==='grid'&&e.vYY.rec<e.Fvw){return e.vYY.rec}else{return e.Fvw}},$f:function(e,L,hy){var hz=L.mCc;var hA=null;var hB='';if(this.get_catLegendViewModel().isSelected(e)){hz=L._PQ;hB=L.kLF}else if(this.get_catLegendViewModel().isLegendItemGrayed(e)){var hC=this.get_catLegendViewModel().$o();hA=fx.applyFoggingToColor(tab.ColorModel.fromColorCode(hz.YhU),hC).toString()}var hD=L.vNc.MsN.RAC;var hE=L.vNc.MsN.thj;var hF='left';var hG=this.$j(L.vNc);var hH=hG-hE;if(hz.weu==='h-align-right'||L.vNc.ZTg){hF='right';hy.itemLabelHolder.css('overflow','inherit');var hI=Math.max(hG-hE-L.vNc.sWs,0);hy.itemLabelHolder.css('right',hI+'px');hH=hG-hI}else{hy.itemLabelHolder.css('left',hE+'px')}hy.itemLabelHolder.css('top',hD+'px');hy.itemLabelHolder.css('width',hH+'px');hy.itemLabelHolder.css('bottom','0px');hy.itemLabelHolder.css('text-align',hF);hy.itemLabel.css('background-color',hB);hy.itemLabel.css(cL.makeFormatStyleDict(hz,hA));hy.itemLabel.text(e.gjO)}},ss.makeGenericType(Y,[bj]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[bj])]);ss.initClass(ea,a,{$4:function(){var e=null;if(ss.isValue(this.$9)){e={w:this.$9.get_width(),h:this.$9.get_height()}}return e},$5:function(){var e=null;if(ss.isValue(this.$9)){e=this.$9.get_titleSize();e.h=Math.max(0,e.h-2*this.get_borderWidth());e.w=Math.max(0,e.w-2*this.get_borderWidth())}else{e={w:0,h:0}}return e},$7:function(){return this.$b},$8:function(){return this.$9.get_zoneId()},$6:function(){return(ss.isValue(this.get_visualModel())?this.$a.get_visualId():null)},get_visualModel:function(){if(ss.isNullOrUndefined(this.$a)){this.$a=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.$b)}return this.$a},get_parentZoneVM:function(){return this.$9},get_hasTitle:function(){return this.get_titleWidth()!==0||this.get_titleHeight()!==0},get_borderWidth:null,get_regionType:null,get_titleHtml:null,get_titleInline:null,get_titleHeight:null,get_titleWidth:null,dispose:function(){if(ss.isValue(this.$9)){this.$9.remove_propertyChanged(ss.mkdel(this,this.$2));this.$9.remove_resizeZone(ss.mkdel(this,this.$3))}spiff.BaseViewModel.prototype.dispose.call(this)},$2:function(e,L){this.notifyPropertyChanged(L.get_propertyName())},$3:function(){this.notifyPropertyChanged('ParentZoneSizeChanged')}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(bj,a,{get_catLegendModel:function(){return this.$q},get_legendTypeEnum:function(){switch(this.legendType){case'color':{return'color'}case'shape':{return'shape'}case'size':{return'size'}case'map':{return'map'}}return'color'},get_categoricalLegendPM:function(){return this.$q.get_catLegendPresModel()},get_numLegendItems:function(){var e=this.get_catLegendModel().get_items();return(ss.isNullOrUndefined(e)?0:e.length)},get_titleInline:function(){var e=this.$5();if(this.get_categoricalLegendPM().vNc.HNR===false&&e.h===0&&e.w>0){return true}else{return this.get_categoricalLegendPM().vNc.HNR}},get_titleHtml:function(){return this.get_categoricalLegendPM().XjF},$k:function(){return this.get_catLegendModel().get_legendNames()},$o:function(){return this.$u||new tab.ColorModel(255,255,255,1)},$g:function(){var e=this.get_categoricalLegendPM().rPC;return(ss.isValue(e.eBu)?tab.ColorModel.fromColorCode(e.eBu):bj.$1)},$h:function(){return this.$q.get_catLegendPresModel()},$l:function(){return this.$q.get_catLegendPresModel()},$n:function(){return this.$q.get_catLegendPresModel()},get_regionType:function(){var e='color';switch(this.legendType){case'color':{e='color';break}case'size':{e='size';break}case'shape':{e='shape';break}case'map':{e='map';break}default:{break}}return e},get_borderWidth:function(){var e=this.get_categoricalLegendPM().rPC.s$V;if(this.get_categoricalLegendPM().rPC.ysh==='bs-none'){e=0}return e},get_titleHeight:function(){return this.get_categoricalLegendPM().vNc.jZr},get_titleWidth:function(){return this.get_categoricalLegendPM().vNc.nkG1},$j:function(){return this.get_catLegendModel().get_isHighlightEnabled()},$m:function(){return this.get_catLegendModel().get_isHighlightAllowed()},$i:function(){return this.get_visualModel().get_selectionsModel().get_brushVizForNodeSelection()||!this.get_visualModel().get_selectionsModel().get_tupleSelection().get_isEmpty()},dispose:function(){ea.prototype.dispose.call(this);this.$q.remove_legendChanged(ss.mkdel(this,this.$e));this.$q.remove_legendNameChanged(ss.mkdel(this,this.$d));this.$t.remove_newSelection(ss.mkdel(this,this.$f));this.$p.remove_newSelection(ss.mkdel(this,this.$f));this.get_visualModel().get_selectionsModel().remove_newSelections(ss.mkdel(this,this.$f));if(ss.isValue(this.$r)){this.$r.dispose()}},isLegendItemGrayed:function(e){if(this.$j()){if(this.isSelected(e)||this.isBrushed(e)){return false}var L=this.get_visualModel();if(ss.isNullOrUndefined(L)){return false}var hy=ss.isValue(this.$p)&&!this.$p.get_isEmpty();return bj.legendShouldBeGrayed(this.get_catLegendModel().get_isOneWay(),this.$i(),this.hasSelection(),hy)}return false},hasSelection:function(){return!this.$t.get_isEmpty()},isSelected:function(e){return this.$t.isLegendItemSelected(e)},isBrushed:function(e){return this.$p.isLegendItemSelected(e)},toggleHighlighting:function(){tab.SelectionClientCommands.toggleLegendHighlight(this.$8(),this.$6(),this.get_regionType(),this.$k(),null)},selectItem:function(e,L){var hy=[];hy.push(e);tab.SelectionClientCommands.selectLegendItemsLocal(this.$8(),L,hy,this.$6(),this.get_catLegendModel(),this.get_legendTypeEnum())},selectNone:function(e){var L=[];tab.SelectionClientCommands.selectLegendItemsLocal(this.$8(),e,L,this.$6(),this.get_catLegendModel(),this.get_legendTypeEnum())},getLegendItem:function(e){var L=this.get_catLegendModel().get_items();if(ss.isNullOrUndefined(L)||e<0||e>=L.length){return null}return L[e]},$d:function(){this.$t.remove_newSelection(ss.mkdel(this,this.$f));this.$t=this.get_visualModel().get_selectionsModel().getLegendSelection(this.get_legendTypeEnum(),this.$k());this.$t.add_newSelection(ss.mkdel(this,this.$f));this.$p.remove_newSelection(ss.mkdel(this,this.$f));this.$p=this.get_visualModel().get_brushingsModel().getLegendSelection(this.get_legendTypeEnum(),this.$k());this.$p.add_newSelection(ss.mkdel(this,this.$f))},$e:function(){if(this.legendType==='shape'){var e=new tab.UintSet;var L=this.$l();for(var hy=0;hy<L.x_f.length;hy++){var hz=L.x_f[hy];if(fx.isCustomShape(hz.Yi)){e.add(hz.Yi)}}if(ss.isNullOrUndefined(this.$r)){this.$r=new fE(ss.mkdel(this,function(){this.notifyPropertyChanged('CustomShapesLoaded')}))}this.$r.initialize(e.get_values())}this.$s=this.$c();this.notifyPropertyChanged(null)},$f:function(){var e=this.$c();var L=!this.$s.isSelectionStateTheSame(e);if(L){this.notifyPropertyChanged('Items');this.$s=e}},$c:function(){return new eb(this.$t.get_ids(),this.$p.get_ids(),this.$j(),this.$i(),this.get_catLegendModel().get_isOneWay())}},ea,[ss.IDisposable,spiff.IViewModel]);ss.initClass(bk,a,{});ss.initClass(bl,a,{$o:function(){return _.map(this.props.items,function(e){return e.label})},$n:function(){return{fontFamily:this.props.itemsFontName,fontSize:this.props.itemsFontSize,color:this.props.itemsTextColor,height:this.props.itemsHeight.toString()+'px',lineHeight:this.props.itemsHeight.toString()+'px'}},$m:function(){return{height:this.props.itemsHeight.toString()+'px',lineHeight:this.props.itemsHeight.toString()+'px'}},$1:function(e){var L=new bk;L.displaySearchArea=(ss.isValue(this.state)?this.state.displaySearchArea:false);L.displayTitleBarButtons=(ss.isValue(this.state)?this.state.displayTitleBarButtons:false);L.selection=((!e.isExclusive&&e.initialAllOptionSelected)?spiff.GroupSelectionExtensions.toGroupSelection(bm).call(null,e.items,true):spiff.GroupSelectionExtensions.toGroupSelection$2(bm).call(null,e.items,function(hy){return hy.isSelected}));return L},$3:function(){var e='tab-NewQF-CategoricalQuickFilter';if(this.props.itemsFontWeight==='font-weight-bold'){e+=' tab-bold'}if(this.props.itemsFontStyle==='font-style-italic'){e+=' tab-italic'}if(this.props.itemsTextDecoration==='text-decoration-underline'){e+=' tab-underline'}var L=tab.ColorModel.fromColorCode(this.props.backgroundColor);if(tab.ColorModel.isDark(L,127)){e+=' tab-darkBackground'}return e},componentWillReceiveProps:function(e){this.setState(this.$1(e));this.$p=this.$2(e)},render:function(){var e={};e.tap=ss.mkdel(this,function(L){if(tsConfig.is_mobile){this.$k(true)}});return spiff.EventForwarder.div(e,{onMouseEnter:ss.mkdel(this,function(L){if(!tsConfig.is_mobile){this.$k(true)}}),onMouseLeave:ss.mkdel(this,function(L){if(!tsConfig.is_mobile){this.$k(false)}}),className:this.$3(),ref:'CategoricalQFComponent'},[this.$h(),(this.state.displaySearchArea?ss.mkdel(this,function(){return this.$e()})():null),this.$b()])},$h:function(){return React.DOM.div({className:'tab-TitleAndControls',style:{height:this.props.titleHeight.toString()}},React.DOM.div({className:'tab-Title',dangerouslySetInnerHTML:{__html:this.props.titleHtml},style:{height:this.props.titleHeight.toString(),right:(this.state.displayTitleBarButtons?ss.formatString('{0}px',16*this.$p):'0')}}),this.$i())},$e:function(){var e=this.$q;this.$q=false;return React.DOM.div({className:'tab-Search',style:{top:this.props.titleHeight.toString()}},React.createElement(spiff.SearchFieldComponent,{setFocus:e,closeText:tab.Strings.QuickFilterSearchCloseTooltip,clearText:tab.Strings.QuickFilterSearchClearTooltip,onClose:ss.mkdel(this,function(){this.$j(false)})},[]))},$b:function(){var e;switch(this.props.mode){case'radio-list':{e=this.$g();break}case'check-list':{e=this.$d();break}case'dropdown':{e=this.$f();break}case'check-dropdown':{e=this.$c();break}default:{e=null;break}}return React.DOM.div({className:'tab-Filter',style:{top:(this.props.titleHeight+(this.state.displaySearchArea?23:0)).toString()}},e)},$i:function(){return React.DOM.div({className:'tab-QFControls',style:{display:(this.state.displayTitleBarButtons?'block':'none'),top:(tab.BrowserSupport.get_isChrome()?'-2px':'-1px')}},(this.props.showContextMenu?ss.mkdel(this,function(){var e=new Object;e.onTap=ss.mkdel(this,function(L){this.$6()});e.customClassName='tab-NewQFTitleBarBtn';e.iconClassName='tab-NewQFTitleBarDropdownBtnIcon';return React.createElement(spiff.IconButtonComponent,e)})():null),(this.props.showMoreLess?ss.mkdel(this,function(){var e=new Object;e.onTap=ss.mkdel(this,function(L){this.$5()});e.customClassName='tab-NewQFTitleBarBtn';e.iconClassName='tab-NewQFTitleBarDomainAllIcon';e.title=tab.Strings.QuickFilterDomainShowFewerValues;return React.createElement(spiff.IconButtonComponent,e)})():null),(this.props.showSearch?ss.mkdel(this,function(){var e=new Object;e.onTap=ss.mkdel(this,function(L){this.$8()});e.customClassName='tab-NewQFTitleBarBtn';e.iconClassName='tab-NewQFTitleBarSearchBtnIcon';e.title=tab.Strings.QuickFilterSearch;return React.createElement(spiff.IconButtonComponent,e)})():null),(this.props.showReset?ss.mkdel(this,function(){var e=new Object;e.onTap=ss.mkdel(this,function(L){this.$7()});e.customClassName='tab-NewQFTitleBarBtn';e.iconClassName='tab-NewQFTitleBarFilteredBtnIcon';e.title='Click to show all values';return React.createElement(spiff.IconButtonComponent,e)})():null))},$l:function(e){var L=new bk;L.selection=e;L.displaySearchArea=this.state.displaySearchArea;L.displayTitleBarButtons=this.state.displayTitleBarButtons;this.setState(L)},$j:function(e){if(e!==this.state.displaySearchArea){if(e){this.$q=true}var L=new bk;L.displaySearchArea=e;L.selection=this.state.selection;L.displayTitleBarButtons=this.state.displayTitleBarButtons;this.setState(L)}},$k:function(e){if(e!==this.state.displayTitleBarButtons){var L=new bk;L.displaySearchArea=this.state.displaySearchArea;L.selection=this.state.selection;L.displayTitleBarButtons=e;this.setState(L);if(tsConfig.is_mobile){if(e){spiff.GlobalTouchWatcher.add_firstTouch(ss.mkdel(this,this.$a))}else{spiff.GlobalTouchWatcher.remove_firstTouch(ss.mkdel(this,this.$a))}}}},$a:function(e,L){if(tsConfig.is_mobile){var hy=ReactDOM.findDOMNode(this.refs['CategoricalQFComponent']);if(!tab.DomUtil.isEqualOrAncestorOf(hy,e.target)){this.$k(false)}}},$6:function(){},$5:function(){},$8:function(){this.$j(!this.state.displaySearchArea)},$7:function(){},$g:function(){if(this.props.isExclusive){return React.createElement(cu,this.$0())}return React.createElement(spiff.SingleSelectButtonGroupComponent,this.$0())},$d:function(){if(this.props.isExclusive){return React.createElement(ct,this.$0())}return React.createElement(spiff.MultiSelectButtonGroupComponent,this.$0())},$f:function(){var e=this.$4(false);var L=this.props.isExclusive&&!ss.referenceEquals(e,tab.Strings.QuickFilterAll);var hy=new Object;hy.selectionText=e;hy.isSelectionTextMarkedAsExcluded=L;hy.resetSelector=true;return React.createElement(spiff.DropdownComponent,hy,[this.$g()])},$c:function(){var e=this.$4(true);var L=this.props.isExclusive&&!ss.referenceEquals(e,tab.Strings.QuickFilterAll);var hy=new Object;hy.selectionText=e;hy.isSelectionTextMarkedAsExcluded=L;hy.resetSelector=false;return React.createElement(spiff.DropdownComponent,hy,[this.$d()])},$0:function(){var e=Math.max(0,Math.floor((this.props.itemsHeight-10)/2))+'px';var L=new Object;L.borders=this.props.mode==='check-list'||this.props.mode==='radio-list';L.allOption=this.props.allOption;L.allLabel=tab.Strings.QuickFilterAll;L.labels=this.$o();L.buttonStyle=this.$m();L.labelStyle=this.$n();L.selection=this.state.selection;L.isSelectionExclusive=this.props.isExclusive;L.onSelectionChanged=ss.mkdel(this,this.$9);L.showApplyAndCancelButtons=this.props.showApplyAndCancelButtons;L.applyButtonLabel=tab.Strings.QuickFilterApply;L.cancelButtonLabel=tab.Strings.QuickFilterCancel;L.selectionMarkStyle={marginTop:e,marginBottom:e,height:10+'px',width:10+'px'};return L},$4:function(e){var L=this.state.selection.get_selectedCount();if(L===0){return(this.props.isExclusive?tab.Strings.QuickFilterAll:tab.Strings.QuickFilterNone)}else if(L===this.props.items.length){return(this.props.isExclusive?tab.Strings.QuickFilterNone:tab.Strings.QuickFilterAll)}else if(L===1){return this.state.selection.mapSelected(String).call(this.state.selection,ss.mkdel(this,function(hy){return this.props.items[hy].label}),true)[0]}else if(e){return tab.Strings.QuickFilterMultipleValues}else{return tab.Strings.QuickFilterNone}},$9:function(e){this.$l(e);if(this.props.isExclusive&&(this.props.mode==='check-list'||this.props.mode==='check-dropdown')){tab.FilterClientCommands.setCategoricalFilterValues(this.props.visualId,this.props.fieldName,'filter-replace',e.mapSelected(String).call(e,ss.mkdel(this,function(L){return this.props.items[L].label}),true),'categorical-filter-infer-all-when-everything-selected')}else{tab.FilterClientCommands.setCategoricalFilterValues(this.props.visualId,this.props.fieldName,(e.get_allSelected()?'filter-all':'filter-replace'),e.mapSelected(String).call(e,ss.mkdel(this,function(L){return this.props.items[L].label}),false),'categorical-filter-infer-all-when-everything-selected')}},$2:function(e){return(e.showContextMenu?1:0)+(e.showSearch?1:0)+(e.showReset?1:0)+(e.showMoreLess?1:0)}},React.Component);ss.initClass(bm,a,{});ss.initClass(fh,a,{get_filterType:null,handleFilterUpdate:null},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(bn,a,{add_propsUpdated:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_propsUpdated:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},get_props:function(){var e=tab.CommandsPresModelWrapper.create(this.displayModel.get_quickFilterCommands());var L=new Object;L.allOption=this.categoricalQuickFilterModel.get_isAllButtonVisible();L.initialAllOptionSelected=this.categoricalQuickFilterModel.get_isAllButtonSelected();L.titleHtml=this.displayModel.get_titleHtml();L.titleHeight=this.displayModel.get_titleHeight();L.itemsHeight=this.displayModel.get_itemsHeight();L.items=this.get_listItems();L.itemsFontName=this.displayModel.get_itemsFontName();L.itemsFontSize=this.displayModel.get_itemsFontSize();L.itemsTextColor=this.displayModel.get_itemsTextColor();L.backgroundColor=this.displayModel.get_backgroundColor();L.itemsFontWeight=this.displayModel.get_itemsFontWeight();L.itemsFontStyle=this.displayModel.get_itemsFontStyle();L.itemsTextDecoration=this.displayModel.get_itemsTextDecoration();L.mode=this.categoricalQuickFilterModel.get_mode();L.isExclusive=this.categoricalQuickFilterModel.get_isSelectionExclusive();L.visualId=this.displayModel.get_visualId();L.fieldName=this.displayModel.get_fieldName();L.showApplyAndCancelButtons=this.categoricalQuickFilterModel.get_showApplyAndCancelButtons();L.showMoreLess=this.categoricalQuickFilterModel.get_showMoreLessButton()&&tsConfig.current_sheet_type!=='story';L.showReset=this.categoricalQuickFilterModel.get_showResetButton();L.showSearch=this.categoricalQuickFilterModel.get_showSearchButton();L.showContextMenu=ss.isValue(e)&&e.get_commandItems().length!==0&&tsConfig.current_sheet_type!=='story';return L},get_filterType:function(){return'Categorical'},get_listItems:function(){return this.categoricalQuickFilterModel.get_categoricalFilter().get_items().map(function(e){var L=new bm;L.isSelected=e.NPh;L.label=e.pHt;return L})},handleFilterUpdate:function(){this.raiseActionEvent(this.$3$1)}},fh,[ss.IDisposable,spiff.IViewModel,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(bo,a,{get_selectedIndexes:function(){return this._selectedIndexes},clearRangeAnchor:function(){var e=this.$2.fetchChildNodeByIndex(this._anchorIndex);if(!!e){var L=cF.filterItem.getCssNode(e);if(!!L){dojo.removeClass(e,'anchorSelection')}}this._anchorIndex=this._lastRangeSelectionIndex=-1},clearRangeAnchorAndSelection:function(){this.clearRangeAnchor();this._clearSelection()},refreshRangeAnchorAndSelection:function(){if(this._anchorIndex>=0){var e=this.$2.fetchChildNodeByIndex(this._anchorIndex);if(!!e){var L=cF.filterItem.getCssNode(e);if(!!L){dojo.addClass(L,'anchorSelection')}}else{this._anchorIndex=-1}}for(var hy=this._selectedIndexes.length-1;hy>=0;--hy){var hz=this._selectedIndexes[hy];var hA=this.$2.fetchChildNodeByIndex(hz);if(!!hA){this._selectItem(hz)}else{this._selectedIndexes.splice(hy,1)}}},onListItemClick:function(e){var L=cF.filterItem.getNodeFromEvent(e);if(!!!L){return}var hy=tableau.util.isNodeMatch(e.target,'input',ss.mkdict(['type','checkbox']));hy=hy||tableau.util.isNodeMatch(e.target,'input',ss.mkdict(['type','radio']));if(hy){cF.filterItem.syncCssToCheckState(L);this.$2.handleItemClick(L)}var hz=cF.filterItem.getIndex(L);if(ss.isNullOrUndefined(hz)||hz<0){return}if(cF.filterItem.isTypeInListItem(L)){this.$0(e,hz)}else{if(!!!this.changelist){this.changelist=new tab.Changelist}if(hy){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&!this.$2.shouldDeferChanges()){var hA=[];var hB=this.$2.get_filterTable();if(!!hB&&hB.actual_size===hB.tuples.length){var hC=hB.tuples;var hD=this._getCheckedIndexes(hC,L,this.changelist);for(var hE=0,hF=hD.length;hE<hF;hE++){var hG=hD[hE];var hH=hC[hG].d||hC[hG].t[0].v;hA.push(hH)}var hI=this.$2.get_quickFilter();var hJ=new tab.LegacyCategoricalQuickFilterData(hI.get_oFilter().targetSheets,hI.get_field(),hI.get_oFilter().exclude,hA);tab.FilterClientCommands.updateCategoricalFilter(hJ)}}this.$1(L,e,hz);if(this.$2.shouldDeferChanges()){this.$2.applyChangesByChangelist(this.changelist);this.changelist.reset()}else{this.notifyChange(this.getDoChangeFunc())}}this._updateRangeAnchor(hz)}},$1:function(e,L,hy){var hz=new tab.RawChange;var hA=cF.filterItem.isChecked(e);if(cF.filterItem.isTiled(e)){if(L.shiftKey===true){this._updateCheckboxRangeFromAnchorByIndex(hy);var hB=((this._anchorIndex>-1)?this._anchorIndex:hy);hz.setRange(new tab.IntegerRange(hB,hy),hA);this.changelist.addChange(hz)}else{hz.setSingle(hy,hA);this.changelist.addChange(hz)}}else if(L.shiftKey===true&&this._anchorIndex>-1){this._updateCheckboxRangeFromAnchor(hy)}else{hz.setSingle(hy,hA);this.changelist.addChange(hz)}},$0:function(e,L){if(e.shiftKey&&this._anchorIndex>=0){this._selectRangeFromAnchor(L)}else if((tab.BrowserSupport.get_isMac()?e.metaKey:e.ctrlKey)){this._toggleItemSelection(L);this._updateRangeAnchor(L)}else{this._clearSelection();this._updateRangeAnchor(L);this._selectItem(L)}},getDoChangeFunc:function(){var e=ss.mkdel(this,function(){this.$2.applyChangesByChangelist(this.changelist);this.changelist.reset()});return e},notifyChange:function(e){if(!!this._applyTimer){window.clearTimeout(ss.unbox(this._applyTimer));this._applyTimer=null}this.$2.updateStateIfNeeded();this._applyTimer=window.setTimeout(e,this.$2.get_applyDelay())},_getCheckedIndexes:function(e,L,hy){var hz=[];var hA=this.$2.get_quickFilter();var hB=hA.get_mode()==='checklist'||hA.get_mode()==='checkdropdown';var hC=hB||hA.get_mode()==='radiolist'||hA.get_mode()==='dropdown';var hD=null;if(hB){hD=hy.compileForChecklist(null)}for(var hE=0,hF=e.length;hE<hF;hE++){var hG=this.$2.fetchChildNodeByIndex(hE);if(!!hG){if(cF.filterItem.isChecked(hG)){hz.push(hE)}}else if(hC){var hH=e[hE].s;if(cF.filterItem.getIndex(L)===hE){if(cF.filterItem.isChecked(L)){hz.push(hE)}}else if(hB){if(ss.contains(hD.select,hE)){hz.push(hE)}else if(!ss.contains(hD.deselect,hE)&&hH){hz.push(hE)}}}}return hz},forEachSelected:function(e){if(ss.isNullOrUndefined(e)||typeof(e)!=='function'){return}for(var L=0,hy=this._selectedIndexes.length;L<hy;L++){var hz=this._selectedIndexes[L];var hA=this.$2.fetchChildNodeByIndex(hz);e(hz,hA)}},_selectRangeFromAnchor:function(e){var L;var hy;var hz=this._anchorIndex;var hA;var hB;var hC=((this._lastRangeSelectionIndex>=0)?this._lastRangeSelectionIndex:hz);var hD=Math.min(hz,e);var hE=Math.max(hz,e);for(L=e;L<=Math.min(hz,hC);L++){this._selectItem(L)}for(hA=hC;hA<hD;hA++){this._deselectItem(hA)}for(hy=Math.max(hz,hC);hy<=e;hy++){this._selectItem(hy)}for(hB=hE+1;hB<=hC;hB++){this._deselectItem(hB)}this._lastRangeSelectionIndex=e},_toggleItemSelection:function(e){var L=this.$2.fetchChildNodeByIndex(e);if(cF.filterItem.isSelected(L)){this._deselectItem(e)}else{this._selectItem(e)}},_selectItem:function(e){var L=this.$2.fetchChildNodeByIndex(e);var hy;cF.filterItem.setSelected(L,true);hy=tableau.util.binarySearch(ss.Int32).call(null,e,this._selectedIndexes);if(!hy.found){this._selectedIndexes.splice(hy.index,0,e)}},_deselectItem:function(e){var L=this.$2.fetchChildNodeByIndex(e);var hy;cF.filterItem.setSelected(L,false);hy=tableau.util.binarySearch(ss.Int32).call(null,e,this._selectedIndexes);if(hy.found){this._selectedIndexes.splice(hy.index,1)}},_clearSelection:function(){for(var e=this._selectedIndexes.length-1;e>=0;--e){this._deselectItem(this._selectedIndexes[e])}this._selectedIndexes=[]},_updateCheckboxRangeFromAnchor:function(e){var L=Math.min(this._anchorIndex,e);var hy=Math.max(this._anchorIndex,e);var hz=this.$2.fetchChildNodeByIndex(L);var hA=this.$2.fetchChildNodeByIndex(hy);var hB=cF.filterItem.isChecked(this.$2.fetchChildNodeByIndex(e));var hC;while(!!hz&&!ss.referenceEquals(hz,hA)){cF.filterItem.setChecked(hz,hB);hC=new tab.RawChange;hC.setSingle(cF.filterItem.getIndex(hz),hB);this.changelist.addChange(hC);hz=hz.nextSibling}cF.filterItem.setChecked(hA,hB);hC=new tab.RawChange;hC.setSingle(cF.filterItem.getIndex(hA),hB);this.changelist.addChange(hC)},_updateCheckboxRangeFromAnchorByIndex:function(e){var L=Math.min(this._anchorIndex,e);var hy=Math.max(this._anchorIndex,e);var hz=cF.filterItem.isChecked(this.$2.fetchChildNodeByIndex(e));var hA;var hB;for(hA=L;hA<=hy;++hA){hB=this.$2.fetchChildNodeByIndex(hA);if(!!hB){this.$2.handleClickIfPending(hB);cF.filterItem.setChecked(hB,hz)}}},_updateRangeAnchor:function(e){if(this.$2.isSingleSelect()){return}if(this._anchorIndex===e&&e>=0){return}var L;if(this._anchorIndex>=0){L=this.$2.fetchChildNodeByIndex(this._anchorIndex);if(!!L){dojo.removeClass(cF.filterItem.getCssNode(L),'anchorSelection')}}this._anchorIndex=e;L=this.$2.fetchChildNodeByIndex(e);if(!!L){dojo.addClass(cF.filterItem.getCssNode(L),'anchorSelection')}else{this._anchorIndex=-1}this._lastRangeSelectionIndex=-1}});ss.initClass(bp,a,{instantiate:function(e,L,hy){this.setUpForPendingChanges();this.inherited(arguments)},fillMenu:function(e){this.inherited(arguments);var L=$('<div>');this.appendApplyButton(L);if(L.children().length>0){e.append(L);L.css('height',this.apply.get_element().outerHeight(true)+'px')}},createListElement:function(e,L,hy,hz){if(this.shouldUseAllItem()&&L.length>0){bq.addAllItem($(e),this.parent,hy,hz,bq.shouldCheckAllItem(this.parent.get_oFilter(),this.pendingManager),ss.mkdel(cF.filterItem,cF.filterItem.formatChecklistFilterItemHtml))}{if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy()}this.tiledWidget=gq.createChecklist(this.parent,L,e,hy,this.get_lineHeight())}{var hA=spiff.EventUtil.bindWithDispose($(e),'click',ss.mkdel(this.parent,this.parent.onListItemClick));this.disposables.add$1(hA);var hB=spiff.EventUtil.bindWithDispose($(e),'touchend',ss.mkdel(this.parent,this.parent.onListItemClick));this.disposables.add$1(hB)}dojo.toggleClass(e.parentNode,'CFDropdownNoItems',L.length===0);if(L.length===0){$(e).text(tab.Strings.QuickFilterNoItems)}},resetPendingVisuals:function(e){var L;if(ss.isValue(this.searchBox)&&this.searchBox.isShowingResults()){L=this.menuNode.children('.tiledContent')}else{L=this.menuNode.find('.tile')}if(ss.isNullOrUndefined(L)){return}var hy=L.children().get();for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];if(cF.filterItem.isPending(hA)){cF.filterItem.togglePendingState(hA);if(e){cF.filterItem.setChecked(hA,!cF.filterItem.isChecked(hA))}}}}},X,[ss.IDisposable]);ss.initClass(bq,a,{get_scrollNode:function(){return this.checkListContainer},instantiate:function(e,L,hy){this.setUpForPendingChanges();this.div.innerHTML='';this.$3=this.parent.get_searchWidget();this.$3.setStyle(2);var hz=$(this.div);this.$3.startupAndAppendTo(hz);this.$3.hideUI();var hA=$('<div>').addClass('CFInnerContainer').addClass('tab-ctrl-formatted-text');dojo.addClass(this.div,'CFOuterContainer');hz.append(hA);this.checkListContainer=hA.get(0);this.createChecklist(this.checkListContainer,e,L,hy);hz.children('.FIItem').focus();{var hB=spiff.EventUtil.bindWithDispose($(this.div),'click',ss.mkdel(this.parent,this.parent.onListItemClick));this.disposables.add$1(hB)}this.appendApplyButton($(this.div))},resetContent:function(e,L,hy){var hz=$(this.checkListContainer);hz.empty();if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null}this.createChecklist(this.checkListContainer,e,L,hy);this.appendApplyButton($(this.div))},updateContent:function(e){var L=((e.length>0)?e.join(''):this.$3.get_noMatchHtml());var hy=$(this.checkListContainer);if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null}hy.html(L)},shouldNotReinstantiate:function(){return ss.isValue(this.$3)&&this.$3.isShowingResults()},layout:function(e,L){this.inherited(arguments);if(ss.isValue(this.tiledWidget)){this.tiledWidget.updateViewport(e.w,e.h)}var hy=((ss.isValue(this.$3)&&this.$3.get_isVisible())?dojo.marginBox(this.$3.domNode).h:0);var hz=0;if(this.parent.shouldDeferChanges()){hz=dojo.marginBox(this.apply.get_element().get(0)).h;this.layoutApplyButton($(this.checkListContainer))}if(ss.isValue(this.checkListContainer)){dojo.style(this.checkListContainer,'height',this.div.clientHeight-hy-hz+'px')}},destroy:function(){this.dispose();if(ss.isValue(this.$3)){this.$3.destroy()}if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy()}this.tiledWidget=null},fetchChildNodeByIndex:function(e){if(ss.isValue(this.tiledWidget)){return this.tiledWidget.getElement(e)}else{return null}},createChecklist:function(e,L,hy,hz){if(this.shouldUseAllItem()&&L.length>0){bq.addAllItem($(e),this.parent,hy,hz,bq.shouldCheckAllItem(this.parent.get_oFilter(),this.pendingManager),ss.mkdel(cF.filterItem,cF.filterItem.formatChecklistFilterItemHtml))}{if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy()}this.tiledWidget=gq.createChecklist(this.parent,L,e,hy,this.get_lineHeight())}},fetchAllItem:function(){if(ss.isValue(this.checkListContainer)){return this.checkListContainer.firstChild}else{return null}},resetPendingVisuals:function(e){var L;if(ss.isValue(this.$3)&&this.$3.isShowingResults()){L=$(this.checkListContainer)}else{L=$(this.checkListContainer).find('.tile')}if(ss.isNullOrUndefined(L)){return}var hy=L.children().get();for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];if(cF.filterItem.isPending(hA)){cF.filterItem.togglePendingState(hA);if(e){cF.filterItem.setChecked(hA,!cF.filterItem.isChecked(hA))}}}}},Z,[ss.IDisposable]);ss.initInterface(di,a,{destroy:null,format:null,isValid:null});ss.initClass(fP,a,{destroy:function(){},format:function(e,L,hy){var hz='';var hA=ss.safeCast(e,Array);if(ss.isNullOrUndefined(L)){return hz}if(ss.isNullOrUndefined(hy)){return hz}if(!this.isValid(hA)){return hz}hz+=ss.formatString(this.tileHtml,L.y.toString());for(var hB=0,hC=hy.get_from();hB<hA.length;++hB,++hC){hz+=this.$1(this.$0,hA[hB],this.$2,hC)}hz+='</div>';return hz},isValid:function(e){return true}},null,[di]);ss.initClass(br,a,{isValid:function(e){var L=ss.safeCast(e,Array);return ss.isValue(L)&&L.length!==0}},fP,[di]);ss.initClass(fF,a,{get_dom:function(){return this.$5},get_pi:function(){return this.$9},set_pi:function(e){this.$9=e},get_dragStart:function(){return this.$6},get_connectNodePos:function(){return this.$3},get_totalScrollOffset:function(){return this.$c},get_drawOffsets:function(){return((tab.ApplicationModel.get_instance().get_isLocalRenderMode()||tsConfig.is_mobile)?{x:0,y:0}:this.get_totalScrollOffset())},get_autoScrollOffset:function(){return this.$2},get_tooltipAnchor:function(){return{x:this.$8.x+this.$c.x,y:this.$8.y+this.$c.y}},get_hitTestingBox:null,isSingleSelect:null,setSingleSelectPoint:function(e){this.$8={x:e.x,y:e.y}},dragStarted:function(e,L,hy){this.$6={x:e,y:L};this.$3=hy;this.$2={x:0,y:0}},recordScrollingOffsets:function(e){this.$c={x:e.x,y:e.y}},updateAndRenderShape:function(e){this.constrainShape(e);this.updateSpecificShape(this.$8);this.renderShape()},constrainShape:function(e){this.$8={x:e.pageX-this.$3.x,y:e.pageY-this.$3.y};if(ss.isInstanceOfType(this,bs)){return}this.$8.y=Math.max(0,Math.min(this.$8.y,this.$3.h));this.$8.x=Math.max(0,Math.min(this.$8.x,this.$3.w))},shapeScrolled:function(e,L){this.get_dragStart().x-=e;this.get_dragStart().y-=L;this.$c.x+=e;this.$c.y+=L;this.$2.x+=e;this.$2.y+=L;this.updateSpecificShape(this.$8);this.renderShape()},updateSpecificShape:null,renderShape:null,createDomAndAppend:function(e){this.$5=$(this.$7);this.$5.addClass(this.$4);this.$5.css('display','none');this.$5.find('svg').attr('width',this.$b).attr('height',this.$a);e.append(this.$5)},show:null,hide:null,hitTest:function(e,L,hy){var hz=L||this.isSingleSelect();return(hz?this.$0(e,hy):this.$1(e,hy))},$0:function(e,L){var hy={x:this.$8.x,y:this.$8.y,w:1,h:1};var hz=e.hitTestBoundingBoxes(hy,true,L);return e.hitTestSingle(hy,L,hz)},$1:function(e,L){var hy=e.hitTestBoundingBoxes(this.get_hitTestingBox(),false,L);var hz=[];var hA=this.get_hitTestingBox();for(var hB=hy.length-1;hB>=0;hB--){var hC=hy[hB];var hD=hC.get_objectId();if(hD<0){continue}var hE=cW.findPaneNode(hC);if(ss.isNullOrUndefined(hE)){continue}var hF=L.getPaneDrawInfoFromKey(hE.get_paneKey());var hG=cZ.getTransformInfo(hF,hC);var hH=tab.RectXYUtil.intersect(hA,hE.get_boundingBox());var hI=this.shapeAreaHit(hH,hF,hC,hG);if(hI){hz.push(new da.$ctor1(hF.getMarkProperty('tuple_id',hD),5,1))}}return hz},shapeAreaHit:null,sendSelectionCommand:null,updateLastState:function(e){if(this.isStateObjectTypeCorrect(e)){e.updateLastState()}},getStateDiff:function(e){if(this.isStateObjectTypeCorrect(e)){this.saveCurrentState(e);return e.getStateDiff()}var L=new Array(1);L[0]=this.get_hitTestingBox();return L},retrieveStateObject:null,saveCurrentState:null,isStateObjectTypeCorrect:null});ss.initClass(bs,a,{get_hitTestingBox:function(){return tab.RectXYUtil.nonemptyify(this.$f(true))},isSingleSelect:function(){return this.$i.radius<1},$f:function(e){return tab.CircleUtil.boundingBox((e?this.$j:this.$i))},updateSpecificShape:function(e){var L=this.get_dragStart().x-this.get_connectNodePos().x;var hy=this.get_dragStart().y-this.get_connectNodePos().y;var hz=Math.sqrt(Math.pow(L-e.x,2)+Math.pow(hy-e.y,2));this.$i={center:{x:L+this.get_drawOffsets().x,y:hy+this.get_drawOffsets().y},radius:hz};this.$j={center:{x:L+this.get_totalScrollOffset().x,y:hy+this.get_totalScrollOffset().y},radius:hz};if(this.$g()){this.$h()}},$g:function(){return ss.isValue(this.$k)&&ss.isValue(this.$k.get_radialSelectionDistanceInfoPresModel())&&this.$k.get_shouldShowDistance()},$h:function(){var e={x:this.$i.center.x+this.$i.radius,y:this.$i.center.y};var L=this.$d(e);if(L>0){this.displayDistance(L)}},$d:function(e){var L=this.$k.get_latLongRect();if(ss.isNullOrUndefined(L)||this.$k.get_mapWidth()<=0||this.$k.get_mapHeight()<=0){return 0}var hy={x:this.$i.center.x%this.$k.get_mapWidth(),y:this.$i.center.y%this.$k.get_mapHeight()};var hz={x:hy.x+(e.x-this.$i.center.x),y:hy.y};var hA=(L.FVU-L.Qao)/this.$k.get_mapHeight();var hB=L.FVU-hA*hy.y;var hC={item1:L.kVX,item2:hB};var hD={item1:L.eMT,item2:hB};var hE=cR.haversineDistance(hC,hD,this.$k.get_earthRadius());var hF=hE/this.$k.get_mapWidth();return Math.abs(hz.x-hy.x)*hF},displayDistance:function(e){var L=this.get_dom().find('.tabDistanceReadout');L.text(this.$e(e));var hy={x:ss.round(this.$i.center.x+this.$i.radius+this.$k.get_readoutOffsetPixels()),y:ss.round(this.$i.center.y)-ss.Int32.div(L.height(),2)};L.css('left',hy.x+'px');L.css('top',hy.y+'px')},$e:function(e){var L=this.$k.get_smallUnitDisplay();if(e>=this.$k.get_unitTransition()){e/=this.$k.get_smallToLargeUnitDivisor();L=this.$k.get_largeUnitDisplay()}var hy=tab.DoubleUtil.sigFigs(e,this.$k.get_sigFigs());var hz=0;if(hy!==0){var hA=Math.floor(Math.log(Math.abs(hy))/Math.log(10))+1;hz=Math.max(0,this.$k.get_sigFigs()-hA)}var hB=hy.toFixed(hz);if(','===this.$k.get_decimalMark()&&hB.indexOf('.')!==-1){hB=ss.replaceAllString(hB,'.',this.$k.get_decimalMark())}return ss.formatString('{0}  {1}',hB,L)},formatReadoutTestHook:function(e){return this.$e(e)},computeRadialDistanceTestHook:function(e){return this.$d(e)},renderShape:function(){var e=this.get_dom().find('.circle_crosshair');var L=this.get_dom().find('.circle_radius');if(fF.get_isUsingVml()){var hy=Math.round(this.$i.center.x);var hz=Math.round(this.$i.center.y);var hA=Math.round(this.$i.radius);var hB=hA*2;var hC=1;this.get_dom().find('.voval').css('width',hB+'px').css('height',hB+'px').css('left',hy-hA+'px').css('top',hz-hA+'px');e.eq(0).css('width',7+'px').css('height',hC+'px').css('left',hy-4+1+'px').css('top',hz+'px');e.eq(1).css('width',hC+'px').css('height',7+'px').css('left',hy+'px').css('top',hz-4+1+'px');L.css('width',hA+'px').css('height',hC+'px').css('left',hy+'px').css('top',hz+'px')}else{this.get_dom().find('svg circle').attr('cx',this.$i.center.x.toString()).attr('cy',this.$i.center.y.toString()).attr('r',this.$i.radius.toString());e.eq(0).attr('x1',(this.$i.center.x-4).toString()).attr('x2',(this.$i.center.x+4).toString()).attr('y1',this.$i.center.y.toString()).attr('y2',this.$i.center.y.toString());e.eq(1).attr('x1',this.$i.center.x.toString()).attr('x2',this.$i.center.x.toString()).attr('y1',(this.$i.center.y-4).toString()).attr('y2',(this.$i.center.y+4).toString());L.attr('x1',this.$i.center.x.toString()).attr('x2',(this.$i.center.x+this.$i.radius).toString()).attr('y1',this.$i.center.y.toString()).attr('y2',this.$i.center.y.toString())}},show:function(){var e=this.get_dom().find('.tabDistanceReadout');var L=this.get_dom().find('.circle_radius');if(this.$g()){e.css('font-size',this.$k.get_fontSizePixels());e.css('color',this.$k.get_fontColor());e.show();L.show()}else{e.hide();L.hide()}this.get_dom().show()},hide:function(){this.get_dom().hide()},shapeAreaHit:function(e,L,hy,hz){var hA=this.$g();return cZ.circleAreaHit(L,hy.get_boundingBox(),this.$j,hy.get_objectId(),hz,L.get_markType(),hA)},sendSelectionCommand:function(e,L,hy,hz){var hA=this.$g();tab.SelectionClientCommands.selectCircleRegionAndDoUbertip(e,this.get_hitTestingBox(),this.$j,L,hy,hz,hA)},retrieveStateObject:function(e){return(this.isStateObjectTypeCorrect(e)?e:new bt)},saveCurrentState:function(e){if(this.isStateObjectTypeCorrect(e)){var L=e;L.saveCurrentState(this.$j)}},isStateObjectTypeCorrect:function(e){if(ss.isValue(e)){if(ss.referenceEquals(ss.getInstanceType(e),bt)){return true}}return false}},fF);ss.initClass(fG,a,{updateLastState:null,getStateDiff:null});ss.initClass(bt,a,{saveCurrentState:function(e){this.$0=tab.CircleUtil.clone(e)},updateLastState:function(){this.$1=this.$0},getStateDiff:function(){if(!tab.CircleUtil.isEmpty(this.$1)){return tab.CircleUtil.getChangedRects(this.$0,this.$1)}var e=new Array(1);e[0]=tab.CircleUtil.boundingBox(this.$0);return e}},fG);ss.initEnum(bu,a,{clipNone:0,clipX:1,clipY:2,clipXY:3});ss.initClass(bv,a,{},ss.EventArgs);ss.initClass(bw,a,{init:function(e,L){if(!tab.MiscUtil.isNullOrEmpty(e)){this.domConditionText.innerHTML=e;this.domCondition.title=e}else{dojo.style(this.domCondition,'display','none')}if(!tab.MiscUtil.isNullOrEmpty(L)){this.domLimitText.innerHTML=L;this.domLimit.title=L}else{dojo.style(this.domLimit,'display','none')}if(!tab.MiscUtil.isNullOrEmpty(e)&&!tab.MiscUtil.isNullOrEmpty(L)){dojo.style(this.domLimit,'borderTop','solid 1px #FAFAFA')}},postCreate:function(){this.$0()},$0:function(){this.domConditionTitle.innerHTML=tableau.format.escapeHTML(tab.Strings.QuickFilterConditionalsCondition);this.domLimitTitle.innerHTML=tableau.format.escapeHTML(tab.Strings.QuickFilterConditionalsLimit)}},Object);ss.initClass(bx,a,{});ss.initClass(by,a,{dispose:function(){this.confirmViewModel.remove_shown(ss.mkdel(this,this.$d));this.confirmViewModel.remove_hidden(ss.mkdel(this,this.$c));this.$g.remove_closed(ss.mkdel(this,this.$b));this.$g.dispose();this.$g=null;ss.makeGenericType(spiff.BaseView$1,[bz]).prototype.dispose.call(this)},buildDom:function(){this.get_element().append($('<div>').addClass('tabConfirmationMessage').html(this.confirmViewModel.get_messageHtml()));var e=$('<div>').addClass('tabConfirmationButtons');this.get_element().append(e);if(this.confirmViewModel.get_showDenyButton()){this.$f=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$a),this.confirmViewModel.get_denyText(),'tabConfirmationDenyButton',2,1);this.disposables.add$1(this.$f);e.append(this.$f.get_element())}if(this.confirmViewModel.get_showConfirmButton()){this.$e=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$9),this.confirmViewModel.get_confirmText(),'tabConfirmationConfirmButton',0,2);this.disposables.add$1(this.$e);e.append(this.$e.get_element())}this.$g=new spiff.ModalDialog(this.confirmViewModel.get_titleText(),this.get_element());this.$g.add_closed(ss.mkdel(this,this.$b))},$b:function(e,L){this.confirmViewModel.cancel()},$9:function(){this.confirmViewModel.confirm()},$a:function(){this.confirmViewModel.deny()},$c:function(e){if(ss.isNullOrUndefined(this.$g)){return}this.$g.close(null)},$d:function(){if(ss.isNullOrUndefined(this.$g)){return}this.$g.show()}},ss.makeGenericType(spiff.BaseView$1,[bz]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[bz])]);ss.initClass(bz,a,{add_shown:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_shown:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_hidden:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_hidden:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_messageHtml:function(){return this.$5},set_messageHtml:function(e){this.$5=e},get_visible:function(){return this.$a},get_confirmText:function(){return this.$3},set_confirmText:function(e){this.$3=e},get_denyText:function(){return this.$4},set_denyText:function(e){this.$4=e},get_titleText:function(){return this.$8},set_titleText:function(e){this.$8=e},get_showConfirmButton:function(){return this.$6},set_showConfirmButton:function(e){this.$6=e},get_showDenyButton:function(){return this.$7},set_showDenyButton:function(e){this.$7=e},dispose:function(){this.$9=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.prototype.dispose.call(this)},show:function(){if(this.$a){return}if(ss.isNullOrUndefined(this.$9)){this.$9=spiff.ObjectRegistry.newView(by).call(null,[this])}this.$a=true;this.raiseActionEvent(this.$2$1)},disposeOnHide:function(){var e=ss.mkdel(this,function(){this.dispose()});this.add_hidden(e);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_hidden(e)})))},confirm:function(){this.$2('confirm')},deny:function(){this.$2('deny')},cancel:function(){this.$2('cancel')},$2:function(e){if(this.$a===false){return}this.$a=false;if(ss.isValue(this.$2$2)){this.$2$2(e)}}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(bA,a,{addFont:function(e){if(!_.any(this.get_fonts(),function(L){return ss.compareStrings(L,e,true)===0})){this.get_fonts().push(e);this.set_fonts(_.sortBy(this.get_fonts(),function(L){return L.toLowerCase()}))}}},tab.FontFamily);ss.initClass(bB,a,{get_data:function(){return this.$0},get_tileIndex:function(){return this.$2},get_itemRange:function(){return this.$1}},ss.EventArgs);ss.initClass(bC,a,{applyChanges:function(e){this.viewModel.set_sliderCurrentValue(e)},dispose:function(){ss.makeGenericType(spiff.BaseView$1,[bD]).prototype.dispose.call(this);this.viewModel=null}},ss.makeGenericType(spiff.BaseView$1,[bD]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[bD])]);ss.initClass(bD,a,{add_intermediateChange:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_intermediateChange:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_sliderValueChange:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_sliderValueChange:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_sliderClassName:function(){return this.$8},set_sliderClassName:function(e){this.$8=e},get_pixelWidth:function(){return this.$5},set_pixelWidth:function(e){this.$5=e},get_ruleTickCount:function(){return this.$7},set_ruleTickCount:function(e){this.$7=e},get_currentFraction:function(){return this.$3},set_currentFraction:function(e){var L=Math.ceil(Math.log(1000)/Math.LN10);var hy=this.$3.toFixed(L);var hz=e.toFixed(L);if(!ss.referenceEquals(hy,hz)){this.$3=e;this.$2$2(this.$3)}},get_sliderIntermediateValue:function(){return this.$4*1000},get_sliderCurrentValue:function(){return this.get_currentFraction()*1000},set_sliderCurrentValue:function(e){this.set_currentFraction(e/1000)},get_sliderMinimumValue:function(){return 0},get_sliderMaximumValue:function(){return 1000},get_rangeModel:function(){return this.$6},applyIntermediateChange:function(e){this.$4=e/1000;if(ss.isValue(this.$2$1)){this.$2$1(this.$4)}},$2:function(e){this.set_currentFraction(e)}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(bE,a,{get_showTitle:function(){return ss.isValue(this.lTitle)&&this.lTitle.length!==0},startup:function(){this.containerNode=this.domNode;this.titleSize={w:0,h:0};this.inherited(arguments);this.innerWrapper.startup();this.buttonsContainer.startup();this.refreshLayout();if(this.show_toggle){var e=document.createElement('label');e.innerHTML=tableau.format.escapeHTML(tab.Strings.CurrentPagePanelShowHistory);dojo.attr(e,'for',this._showHistoryCb.id);dojo.place(e,this._checkboxPane.domNode);if('attr'in this._showHistoryCb&&this.pageViewModel.get_isHistoryToggleInteractionDisabled()){this._showHistoryCb.attr('disabled',true)}}this._rightBtn.setAttribute('_scroll',false);this._leftBtn.setAttribute('_scroll',false);this._slider.setAttribute('_scroll',false)},layout:function(e){var L=0;var hy=0;var hz=0;if(ss.isNullOrUndefined(this.titleSize)||ss.isValue(this.lTitle)&&this.titleSize.w===0){return}var hA=dojo.marginBox(this.containerNode);var hB=hA.w-this.DOM_OFFSET;var hC=0;if(this.get_showTitle()){if(this.titleSize.w<hA.w){if(hA.h<this.getWidgetOffset()){this.cpOrientation='horizontal'}else{this.cpOrientation='vertical'}hB-=this.titleSize.w;L=this.titleSize.w}else{if(hA.h-this.titleSize.h<this.getWidgetOffset()){this.cpOrientation='horizontal'}else{this.cpOrientation='vertical'}hy=ss.Int32.div(this.titleSize.h,2)}}if(this.cpOrientation==='horizontal'){if(this.show_toggle){hB-=this.TOGGLE_WIDTH_OFFSET}hC=(this.show_dropdown?this.BUTTONS_HEIGHT:this.SLIDER_HEIGHT)}else{hC=(this.show_slider?this.SLIDER_HEIGHT:0);hC+=(this.show_dropdown?this.BUTTONS_HEIGHT:0);hz=(this.show_toggle?ss.Int32.div(this.TOGGLE_HEIGHT,2):0)}this.innerWrapper.isHorizontal=this.cpOrientation==='horizontal';dojo.marginBox(this.innerWrapper.domNode,ss.mkdict(['w',hB,'h',hC]));this.innerWrapper.resize();var hD=dojo.marginBox(this.sliderPane.domNode);if(ss.isValue(this._horizontalRule)&&hD.w>0){dojo.marginBox(this._horizontalRule.domNode,ss.mkdict(['w',hD.w]));if(this.pages.length*2>hD.w){dojo.style(this._horizontalRule.domNode,'display','none')}else{dojo.style(this._horizontalRule.domNode,'display','')}}var hE=Math.min(ss.Int32.div(hA.h-hC,2)-hy-hz,6);var hF=hE+2*hy;dojo.style(this.innerWrapper.domNode,ss.mkdict(['top',Math.max(hF,0)+'px','position','absolute','left',L+ss.Int32.div(this.DOM_OFFSET,2)+'px']));if(this.cpOrientation==='vertical'){dojo.style(this.buttonsContainer.domNode,ss.mkdict(['height',this.ONLY_BUTTONS+'px','position','relative','top','','left','','padding','0 0 2px 0']));this.buttonsContainer.resize();dojo.style(this.sliderPane.domNode,ss.mkdict(['height',this.SLIDER_HEIGHT+'px','position','relative','top','','left','']));dojo.style(this._checkboxPane.domNode,ss.mkdict(['width',Math.max(hA.w-1,0)+'px','top',Math.max(hF,0)+hC+hE+'px','position','absolute','left',L+'px']))}else{dojo.marginBox(this.sliderPane.domNode,ss.mkdict(['w',hD.w-this.WIDGET_SPACE]));if(ss.isValue(this._horizontalRule)){dojo.marginBox(this._horizontalRule.domNode,ss.mkdict(['w',hD.w-this.WIDGET_SPACE-this.RULE_OFFSET]))}var hG=dojo.marginBox(this._dropdown.domNode);dojo.marginBox(this._dropdown.domNode,ss.mkdict(['w',hG.w-this.WIDGET_SPACE]));dojo.marginBox(this._rightBtn.domNode,ss.mkdict(['l',hG.l+hG.w-this.WIDGET_SPACE]));dojo.style(this.buttonsContainer.domNode,ss.mkdict(['height',this.ONLY_BUTTONS+'px','position','','top','','left','','padding','0 0 2px 0']));this.buttonsContainer.resize();dojo.style(this.sliderPane.domNode,ss.mkdict(['height',this.SLIDER_HEIGHT+'px','position','','top','','left',ss.Int32.div(hB+this.DOM_OFFSET,2)+'px']));dojo.style(this._checkboxPane.domNode,ss.mkdict(['top',Math.max(hF,0)+'px','position','absolute','left',L+hB+ss.Int32.div(this.DOM_OFFSET,2)+'px']))}var hH=dojo.style(this._dropdown.domNode,'width')-24;dojo.marginBox(this._dropdown.containerNode,ss.mkdict(['w',hH]))},getWidgetOffset:function(){var e=(this.show_dropdown?this.BUTTONS_HEIGHT:0);e+=(this.show_slider?this.SLIDER_HEIGHT:0);e+=(this.show_toggle?this.TOGGLE_HEIGHT:0);return e},postMixInProperties:function(){this.display_dropdown=(this.show_dropdown?'block':'none');this.display_slider=(this.show_slider?'block':'none');this.display_toggle=(this.show_toggle?'block':'none');var e=this.pages.length;this.maximum=e-1;this.discrete_values=e;this.show_ruler=(this.show_slider?'block':'none');this.ruler_count=e;this.popupClass=((e>this.SCROLL_PAGES)?'cpPopupEx':'cpPopup');this.cpOrientation=((this.cpHeight<this.getWidgetOffset())?'horizontal':'vertical')},postCreate:function(){this.inherited(arguments);this.timestamp=(new Date).getTime();if(!this.show_dropdown){this.innerWrapper.removeChild(this.buttonsContainer)}if(!this.show_slider){this.innerWrapper.removeChild(this.sliderPane)}if(this.show_toggle&&'attr'in this._showHistoryCb){this._showHistoryCb.attr('checked',this.enable)}},$3:function(e,L){this.$1();this.requestTimeout=window.setTimeout(ss.mkdel(this,function(){this.$2(e,L)}),500)},$1:function(){if(ss.isValue(this.requestTimeout)){window.clearTimeout(ss.unbox(this.requestTimeout));this.requestTimeout=null}},$0:function(){if(ss.isValue(this.rebuildLayoutTimeout)){window.clearTimeout(ss.unbox(this.rebuildLayoutTimeout));this.rebuildLayoutTimeout=null}},$2:function(e,L){this.$1();if(this.isDashboard){tab.PageServerCommands.syncedChangePage(this.pageViewModel.get_visualId(),this.zid,e)}else{tab.PageServerCommands.changePage(e,this.pageViewModel.get_visualId())}},destroy:function(e){dojo.forEach(this._subscriptions,dojo.unsubscribe);this.$1();this.$0();this.inherited(arguments)},updateProperties:function(e){this.sheetid=e.sheetid;this.zid=e.zid;this.enable=e.enable;this.show_slider=e.show_slider;this.show_toggle=e.show_toggle;this.show_dropdown=e.show_dropdown;this.current_page=e.current_page;this.pages=e.pages;this.session=e.session;this.lTitle=e.lTitle;this.titleHtml=e.titleHtml;this.zoneTitleHeight=e.zoneTitleHeight;this.zoneTitleWidth=e.zoneTitleWidth;this.isDashboard=e.isDashboard;this.pageViewModel=e.pageViewModel},setTitle:function(){this._titlePane.innerHTML=this.titleHtml;this.setTitleSize()},setTitleSize:function(){var e=dojo.marginBox(this._titlePane);if(this.zoneTitleWidth===0){e.w=dojo.marginBox(this.containerNode).w}else{e.w=this.zoneTitleWidth;dojo.marginBox(this._titlePane,e)}if(this.zoneTitleHeight===0&&this.get_showTitle()){e.h=dojo.marginBox(this.containerNode).h}else{e.h=this.zoneTitleHeight}this.titleSize=e;dojo.style(this._titlePane,ss.mkdict(['height',this.titleSize.h+'px']));this.layout(null);tableau.util.setupTitleEllipsis($(this._titlePane))},refreshLayout:function(){this.refreshed=false;var e=false;var L=ss.mkdel(this,function(){this.refreshed=true;this.refreshWidget(this.current_page)});if(this.show_dropdown){var hy=this.pages.length;var hz=false;if(hy!==this._dropdown.options.length){hz=true}else{for(var hA=0;hA<hy;hA++){var hB=this._dropdown.options[hA]['label'];if(!ss.referenceEquals(this.pages[hA],hB)){hz=true;break}}}if(hz){this.$0();e=true;this._dropdown.options=[];this.rebuildLayoutTimeout=window.setTimeout(ss.mkdel(this,function(){var hD=[];for(var hE=0,hF=this.pages.length;hE<hF;hE++){hD.push(ss.mkdict(['label',this.pages[hE],'value',hE.toString(10),'selected',hE===this.current_page]))}this._dropdown.addOption(hD);this._dropdown.startup();L()}),1);this._dropdown.popupExtraClass=((this.pages.length>this.SCROLL_PAGES)?'cpPopupEx':'cpPopup')}else{this._dropdown.setValue(this.current_page)}}if(this.show_slider){if(ss.isValue(this._horizontalRule)){this._horizontalRule.destroy(false);this._horizontalRule=null}this._slider.maximum=this.pages.length-1;this._slider.discreteValues=this.pages.length;dijit.setWaiState(this._slider.focusNode,'valuemax',this.pages.length);if(this.pages.length<1200){var hC=ss.mkdict(['style','width:100%; height:3px; margin-left:4px; margin-right:4px;','count',this.pages.length]);this._horizontalRule=new dijit.form.HorizontalRule(hC,this._horizontalRuleNode);this._horizontalRule.placeAt(this.sliderPane.domNode,2);this._horizontalRule.startup()}this._slider.startup()}this._showHistoryCb.attr('value',this.enable);this.setTitle();if(!e){L()}},refreshWidget:function(e){if(this.show_dropdown&&ss.isValue(this._dropdown)){this._dropdown.setValue(this.current_page);this._rightBtn.setAttribute('disabled',this.current_page===this.pages.length-1);this._rightBtn.attr('iconClass','dijitIcon cpRightArrow'+((this.current_page===this.pages.length-1)?'Grey':'Black'));this._leftBtn.setAttribute('disabled',this.current_page===0);this._leftBtn.attr('iconClass','dijitIcon cpLeftArrow'+((this.current_page===0)?'Grey':'Black'))}if(this.show_slider&&ss.isValue(this._slider)){this._slider.setValue(this.current_page)}},prevPage:function(e){if(this.current_page===0){return}this.$3(this.current_page-1,this.current_page);this.refreshWidget(this.current_page-1)},nextPage:function(e){if(this.current_page===this.pages.length-1){return}this.$3(this.current_page+1,this.current_page);this.refreshWidget(this.current_page+1)},onCheckboxChange:function(){if(!this.refreshed){return}this.enable=!this.enable;tab.PageServerCommands.toggleTrails(this.pageViewModel.get_visualId())},onSelection:function(e,L){var hy=parseInt(e.toString());hy=(isNaN(hy)?0:hy);if(hy===this.current_page||!this._started||!this.refreshed){return}this.$2(hy,this.current_page);this.refreshWidget(hy)},onSliderChange:function(e){var L=parseInt(e);if(L===this.current_page||!this.refreshed){return}this.$3(L,this.current_page);this.refreshWidget(L)}},Object);ss.initClass(bF,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(bG,a,{get_dom:function(){return this.get_template()},get_myViewsScrollPosition:function(){return this.get_dom().myViewsListWrapper.scrollTop()},dispose:function(){this.get_viewModel().exitManageMode();this.get_viewModel().remove_customViewListChanged(ss.mkdel(this,this.$P));ss.makeGenericType(spiff.BaseView$1,[bH]).prototype.dispose.call(this)},$a:function(){this.$k();this.$f();this.$g();this.$e()},$k:function(){var e=this.get_dom().saveViewArea.height();this.get_dom().saveViewArea.empty();if(this.get_viewModel().get_mode()===bH.modeSelect){if(tsConfig.allow_custom_view_save){this.$14=this.$q();this.disposables.add$1(this.$14);this.get_dom().saveViewArea.append(this.$14.get_element());this.$15=this.$r();this.disposables.add$1(this.$15);var L=$('<span/>').addClass('tab-cv-viewNameInputWrapper').append(this.$15.get_inputElement());this.get_dom().saveViewArea.append(L);this.$U();if(tsConfig.allow_custom_view_default){this.$X=this.$o(tab.Strings.ToolbarCustomViewsMakeItMyDefault,this.get_viewModel().$h());this.disposables.add$1(this.$X);this.get_dom().saveViewArea.append(this.$X.get_element())}if(tsConfig.allow_custom_view_share){this.$12=this.$o(tab.Strings.ToolbarCustomViewsShareItWithOthers,this.get_viewModel().$i());this.disposables.add$1(this.$12);this.get_dom().saveViewArea.append(this.$12.get_element())}}else{this.get_dom().saveViewArea.append(this.$j(tab.Strings.ToolbarCustomViewsSaveAreaFillerTextSelect))}}else{this.get_dom().saveViewArea.append(this.$j(tab.Strings.ToolbarCustomViewsSaveAreaFillerTextManage))}if(e!==0){this.get_dom().saveViewArea.height(Math.max(e,this.get_dom().saveViewArea.height()))}},$f:function(){this.get_dom().myViewsTitle.text(tab.Strings.ToolbarCustomViewsMyViews);this.get_dom().myViewsListArea.empty();if(ss.count(this.get_viewModel().get_myCustomViews())>0){var e=ss.getEnumerator(this.get_viewModel().get_myCustomViews());try{while(e.moveNext()){var L=e.current();var hy=this.$9(L,false);this.$10[ss.unbox(L.id)]=hy;this.$V(L);this.get_dom().myViewsListArea.append(hy)}}finally{e.dispose()}}else{this.$R(this.get_dom().myViewsListArea)}},$g:function(){this.get_dom().otherViewsTitle.text(tab.Strings.ToolbarCustomViewsOtherViews);this.get_dom().otherViewsListArea.empty();var e=this.$9(null,true);this.$11=e;this.$V(null);this.get_dom().otherViewsListArea.append(e);var L=ss.getEnumerator(this.get_viewModel().get_otherCustomViews());try{while(L.moveNext()){var hy=L.current();var hz=this.$9(hy,true);this.$10[ss.unbox(hy.id)]=hz;this.$V(hy);this.get_dom().otherViewsListArea.append(hz)}}finally{L.dispose()}},$e:function(){if(!tsConfig.allow_custom_view_default&&!tsConfig.allow_custom_view_save){this.get_dom().manageModeControlArea.hide();return}this.$Y=this.$b();this.disposables.add$1(this.$Y);this.get_dom().manageModeControlArea.append(this.$Y.get_element());this.$Z=this.$c();this.disposables.add$1(this.$Z);this.get_dom().manageModeControlArea.append(this.$Z.get_element());this.$T();this.get_viewModel().add_modeChanged(ss.mkdel(this,this.$J))},$r:function(){var e=spiff.TextInputView.newTextInputView(this.get_viewModel().$k(),tab.Strings.ToolbarCustomViewsViewNamePlaceholder,null);e.get_inputElement().attr('maxlength',bH.maxCustomViewNameLength.toString());e.add_propertyChanged(ss.mkdel(this,this.$H));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$15.remove_propertyChanged(ss.mkdel(this,this.$H))})));e.add_enterKeyPressed(ss.mkdel(this,this.$D));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$15.remove_enterKeyPressed(ss.mkdel(this,this.$D))})));return e},$q:function(){return spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$N),tab.Strings.ToolbarCustomViewsSave,null,0,null)},$o:function(e,L){var hy=spiff.LabelToggleButton.newNativeCheckbox(e,false);hy.set_selected(L);this.disposables.add$1(hy);return hy},$R:function(e){var L=$('<div/>').addClass('tab-cv-emptyList').text(tab.Strings.ToolbarCustomViewsEmptyPlaceholder);e.append(L)},$j:function(e){return $('<div/>').addClass('tab-customViews-saveAreaTitle').text(e)},$9:function(e,L){var hy=$('<div/>').addClass('tab-cv-viewListItem');if(L){var hz=this.$h(e);hy.addClass('tab-cv-viewListItem-showOwner').append(hz)}else if(tsConfig.allow_custom_view_save){var hA=this.$m(e);hy.append(hA)}var hB=this.$d(e);hy.append(hB);hy.click(ss.mkdel(this,function(hC){this.$I(e)}));return hy},$d:function(e){var L=this.$u(e);var hy=$('<div/>').addClass('tab-cv-viewListItem-leftSide');var hz=this.$l(e);var hA=$('<span/>').addClass('tab-cv-viewListItem-viewName').text(L).attr('title',L);hy.append(hz);hy.append(' ');hy.append(hA);return hy},$l:function(e){var L=this.get_viewModel().isDefault(e);var hy=new spiff.IconButton;if(tsConfig.allow_custom_view_default){hy.addClass('tab-customViews-viewListItem-setDefaultButton');hy.onClick(ss.mkdel(this,function(hB){this.$O(e)}));var hz;var hA;if(L){hz='tab-icons-customView-toggled';hA=tab.Strings.ToolbarCustomViewsSetDefaultButtonTooltipWhenCurrent}else{hz='tab-icons-customView';hA=tab.Strings.ToolbarCustomViewsSetDefaultButtonTooltip}hy.set_disabled(L);hy.setIcon(hz);hy.set_hoverTooltipText(hA)}return hy.get_element()},$h:function(e){var L=this.$v(e);var hy=$('<span/>').addClass('tab-cv-viewListItem-ownerName').text(L).attr('title',L);return hy},$m:function(e){var L=$('<div/>').addClass('tab-customViews-viewListItem-actionButtonWrapper');var hy=new spiff.IconButton;hy.addClass('tab-customViews-viewListItem-renameButton');hy.set_hoverTooltipText(tab.Strings.ToolbarCustomViewsRenameButtonTooltip);hy.setIcon('tab-icons-edit');hy.onClick(ss.mkdel(this,function(hB){this.$L(e)}));L.append(hy.get_element());var hz=new spiff.IconButton;hz.addClass('tab-customViews-viewListItem-deleteButton');hz.set_hoverTooltipText(tab.Strings.ToolbarCustomViewsDeleteButtonTooltip);hz.setIcon('tab-icons-delete');hz.onClick(ss.mkdel(this,function(hB){this.$A(e)}));L.append(hz.get_element());if(tsConfig.allow_custom_view_share){var hA=new spiff.IconButton;hA.addClass('tab-customViews-viewListItem-toggleHideButton');if(e.isPublic){hA.set_hoverTooltipText(tab.Strings.ToolbarCustomViewsHideViewButtonTooltipWhenPublic);hA.setIcon('tab-icons-view-public')}else{hA.set_hoverTooltipText(tab.Strings.ToolbarCustomViewsHideViewButtonTooltipWhenPrivate);hA.setIcon('tab-icons-view-private')}if(this.get_viewModel().get_mode()===bH.modeSelect){hA.set_disabled(true)}hA.onClick(ss.mkdel(this,function(hB){this.$K(e)}));L.append(hA.get_element())}return L},$i:function(e,L){var hy=$('<div/>').addClass('tab-customViews-rename-container');hy.click(ss.mkdel(this,this.$M));var hz=$('<div/>').addClass('tab-cv-viewListItem');var hA=$('<div/>').addClass('tab-customViews-viewListItem-actionButtonWrapper');var hB=new spiff.IconButton;hB.set_hoverTooltipText(tab.Strings.ToolbarCustomViewsRenameUIClearButtonTooltip);var hC=hB;hC.setIcon('tab-icons-canceledit');hC.onClick(ss.mkdel(this,function(hF){this.$z(L)}));hA.append(hC.get_element());hz.append(hA);hz.append(this.$p(e));hy.append(hz);this.get_dom().get_domRoot().append(hy);var hD=tab.DomUtil.getElementOffset(L,false);var hE=tab.DomUtil.getElementOffset(hz,false);hz.css({left:hD.left-hE.left+'px',top:hD.top-hE.top-this.get_myViewsScrollPosition()+'px',width:L.width()+'px'});if(!tsConfig.is_mobile){this.$13.get_inputElement().focus();tab.DomUtil.selectAllInputText(this.$13.get_inputElement())}else{this.$13.get_inputElement().focus()}},$p:function(e){var L=$('<div/>').addClass('tab-customViews-rename-inputWrapper');this.$13=spiff.TextInputView.newTextInputView(e,tab.Strings.ToolbarCustomViewsRenameUIPlaceholderText,null);this.$13.get_inputElement().attr('maxlength',bH.maxCustomViewNameLength.toString());this.$13.get_inputElement().addClass('tab-customView-rename-textInput');this.$13.add_enterKeyPressed(ss.mkdel(this,this.$C));this.$13.add_escapeKeyPressed(ss.mkdel(this,this.$F));L.append(this.$13.get_inputElement());return L},$s:function(e){if(this.$w()){this.$t(this.$x())}this.$W=e;var L=this.$x();L.children().hide();this.$i(e.name,L)},$t:function(e){if(!this.$w()){return}this.get_dom().get_domRoot().children('.tab-customViews-rename-container').remove();e.children().show();this.$W=null;this.$13.remove_enterKeyPressed(ss.mkdel(this,this.$C));this.$13.remove_escapeKeyPressed(ss.mkdel(this,this.$F));this.$13.dispose();this.$13=null},$b:function(){var e=spiff.StyledTextButton.createUnificationIconTextButton(ss.mkdel(this,this.$E),tab.Strings.ToolbarCustomViewsEnterManageButtonText,'tab-customViews-enterManageModeButton');return e},$c:function(){return spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$G),tab.Strings.ToolbarCustomViewsExitManageButtonText,'tab-customViews-exitManageModeButton',0,null)},$U:function(){var e=!this.get_viewModel().shouldSaveButtonBeEnabled(this.$15);if(ss.isValue(this.$14)&&this.$14.get_disabled()!==e){var L=(e?tab.Strings.ToolbarCustomViewsSaveButtonDisabledTitle:'');this.$14.get_element().prop('title',L);this.$14.set_disabled(e)}},updateViewListsState:function(){if(ss.count(this.get_viewModel().get_myCustomViews())===0&&ss.count(this.get_viewModel().get_otherCustomViews())===0&&this.get_viewModel().get_mode()===bH.modeManage){this.get_viewModel().exitManageMode()}else{this.$k();this.$f();this.$g()}},$V:function(e){var L;if(this.get_viewModel().isOriginalView(e)){L=this.$11}else{L=this.$y(e)}if(this.get_viewModel().isDefault(e)){L.addClass('tab-cv-viewListItem-defaultView')}if(this.get_viewModel().isCurrentCustomView(e)){L.addClass('tab-cv-viewListItem-currentView')}if(ss.isValue(e)&&e.isPublic){L.addClass('tab-cv-viewListItem-publicView')}var hy=this.$u(e);L.children('.tab-cv-viewListItem-viewName').text(hy).attr('title',hy)},$T:function(){if(this.get_viewModel().get_mode()===bH.modeSelect){this.$Z.get_element().css('display','none');this.$Y.get_element().css('display','');if(this.get_viewModel().get_hasCustomViews()){this.$Y.set_disabled(false);this.$Y.set_hoverTooltipText(null)}else{this.$Y.set_disabled(true);this.$Y.set_hoverTooltipText(tab.Strings.ManageCustomViewsDisabledExplanation)}}else if(this.get_viewModel().get_mode()===bH.modeManage){this.$Y.get_element().css('display','none');this.$Z.get_element().css('display','');this.$Z.set_disabled(false)}},$P:function(e,L){this.updateViewListsState()},$N:function(){this.$S()},$S:function(){var e=this.get_viewModel().cleanCustomViewName(this.$15.get_text());if(!this.get_viewModel().isValidCustomViewName(e)){return}var L=this.get_viewModel().getMyCustomViewByName(e);if(ss.isNullOrUndefined(L)){L=new Object}L.name=e;L.isPublic=this.$n(this.$12);this.get_viewModel().save$1(L,null,null,this.$n(this.$X));this.$15.get_inputElement().blur()},$H:function(e,L){if(ss.equalsT(L.get_propertyName(),'text')){this.$U()}},$D:function(){if(!this.$14.get_disabled()){this.$N()}},$I:function(e){if(this.get_viewModel().get_mode()===bH.modeSelect){this.get_viewModel().select(e);this.updateViewListsState()}},$O:function(e){this.get_viewModel().setDefault(e,ss.mkdel(this,function(L){this.updateViewListsState()}),function(L){eu.showNotification(tab.Strings.ToolbarCustomViewsErrorSettingDefault)})},$A:function(e){var L=R.create(null,ss.mkdel(this,function(){this.$B(e)}));this.get_dom().customViewsArea.append(L.get_element())},$B:function(e){this.get_viewModel().destroyCustomView(e,ss.mkdel(this,this.updateViewListsState),ss.mkdel(this,function(L){eu.showNotification(tab.Strings.ToolbarCustomViewsErrorDeleting);this.updateViewListsState()}))},$z:function(e){this.$t(e)},$L:function(e){this.$s(e)},$C:function(){this.$Q()},$F:function(){this.$t(this.$x())},$M:function(e){var L=$(e.target);var hy=L.hasClass('tab-customView-rename-textInput');if(!hy){this.$Q()}},$Q:function(){var e=this.get_viewModel().cleanCustomViewName(this.$13.get_text());if(!this.get_viewModel().isValidCustomViewName(e)){eu.showNotification(tab.Strings.ToolbarCustomViewsErrorInvalidName);return}var L=this.$x();if(ss.equalsT(e,this.$W.name)){this.$t(L);return}this.get_viewModel().updateCustomizedViewName(this.$W,e,ss.mkdel(this,function(hy){this.$t(L);this.updateViewListsState()}),ss.mkdel(this,function(hy){eu.showNotification(tab.Strings.ToolbarCustomViewsErrorRenaming);this.$t(L);this.updateViewListsState()}))},$K:function(e){if(!ss.isValue(e)||this.get_viewModel().get_mode()!==bH.modeManage){return}this.get_viewModel().updateCustomizedViewPublicState(e,!e.isPublic,ss.mkdel(this,function(L){this.updateViewListsState()}),ss.mkdel(this,function(L){eu.showNotification(tab.Strings.ToolbarCustomViewsErrorChangingPublicPrivateState);this.updateViewListsState()}))},$E:function(){this.get_viewModel().startManage()},$G:function(){this.get_viewModel().exitManageMode()},$J:function(e,L){var hy=this.get_viewModel().get_mode();if(hy===bH.modeManage){this.get_dom().customViewsArea.toggleClass('tab-customViews-inManageMode',true)}else if(hy===bH.modeSelect){this.get_dom().customViewsArea.toggleClass('tab-customViews-inManageMode',false)}this.$k();this.updateViewListsState();this.$T()},$w:function(){return ss.isValue(this.$W)},$y:function(e){if(ss.isNullOrUndefined(e)){return this.$11}else{return this.$10[ss.unbox(e.id)]}},$x:function(){return this.$y(this.$W)},$n:function(e){if(ss.isValue(e)){return e.get_selected()}else{return false}},$u:function(e){var L;if(this.get_viewModel().isOriginalView(e)){L=tab.Strings.ToolbarCustomViewsOriginalView}else{L=e.name}if(this.get_viewModel().isDefault(e)){var hy=tab.Strings.ToolbarCustomViewsDefault.toLocaleLowerCase();L+=' '+hy}return L},$v:function(e){var L;if(this.get_viewModel().isOriginalView(e)){L=tsConfig.workbook_owner_friendly_name}else{L=e.owner.friendlyName}return L}},ss.makeGenericType(spiff.BaseView$1,[bH]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[bH])]);ss.initClass(bH,a,{add_modeChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_modeChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_customViewListChanged:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_customViewListChanged:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_defaultCustomViewChanged:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_defaultCustomViewChanged:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_customViewDestroyed:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_customViewDestroyed:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_dirtyChanged:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_dirtyChanged:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},get_mode:function(){return this.$p},get_myCustomViews:function(){return this.$q},get_otherCustomViews:function(){return this.$r},get_currentCustomView:function(){return this.$l},get_defaultCustomViewId:function(){return this.$n},get_currentCustomViewName:function(){return this.$m},get_hasCustomViews:function(){return this.$q.length>0||this.$r.length>0},get_dirty:function(){return tab.ApplicationModel.get_instance().get_workbook().get_isCurrentDashboardModified()},get_viewType:function(){return bG},get_viewModel:function(){return this},$j:function(){return!this.isOriginalView(this.get_currentCustomView())&&this.belongsToCurrentUser(this.get_currentCustomView())},$k:function(){return(this.$j()?this.get_currentCustomView().name:'')},$h:function(){return this.$j()&&this.isDefault(this.get_currentCustomView())},$i:function(){return this.$j()&&this.get_currentCustomView().isPublic},isDefault:function(e){if(tsConfig.allow_custom_view_default){if(this.isOriginalView(e)){return ss.isNullOrUndefined(this.$n)}else{return ss.isValue(this.$n)&&ss.unbox(this.$n)===ss.unbox(e.id)}}else{return false}},isOriginalView:function(e){return ss.isNullOrUndefined(e)},belongsToCurrentUser:function(e){return ss.isValue(e.owner)&&e.owner.id===tsConfig.current_user_id},isCurrentCustomView:function(e){if(this.isOriginalView(e)){return this.isCurrentCustomViewTheOriginalView()}else{return ss.isValue(tsConfig.current_custom_view_id)&&ss.unbox(tsConfig.current_custom_view_id)===ss.unbox(e.id)}},isCurrentCustomViewTheOriginalView:function(){return ss.isValue(tsConfig.current_custom_view_id)===false},shouldSaveButtonBeEnabled:function(e){return this.isValidCustomViewName(this.cleanCustomViewName(e.get_text()))},isValidCustomViewName:function(e){var L=this.cleanCustomViewName(e);return L.length>0&&L.length<=bH.maxCustomViewNameLength},cleanCustomViewName:function(e){return e.trim().substr(0,bH.maxCustomViewNameLength)},$4:function(){if(ss.isValue(this.hideView)){this.hideView()}},save:function(e,L,hy){var hz=this.getMyCustomViewByName(e);if(ss.isNullOrUndefined(hz)){hz=new Object;hz.name=e}this.save$1(hz,L,hy,false)},save$1:function(e,L,hy,hz){this.$s.saveCustomizedView(e,ss.mkdel(this,function(hA){var hB=ss.mkdel(this,function(hC){this.$c(hC);if(ss.isValue(L)){L(hC)}});if(hz){this.setDefault(hA,hB,function(hC){hB(hA)})}else{hB(hA)}}),ss.mkdel(this,function(hA){this.$b(hA);if(ss.isValue(hy)){hy(hA)}}))},getMyCustomViewByName:function(e){var L=null;for(var hy=0;hy<this.$q.length;hy++){var hz=this.$q[hy];if(ss.equalsT(hz.name,e)){L=hz}}return L},select:function(e){if(this.isOriginalView(e)){this.$s.navigateToOriginalView();tsConfig.current_custom_view_id=null}else{this.$s.navigateToCustomizedView(e);tsConfig.current_custom_view_id=e.id}},destroy:function(e,L,hy){this.destroyCustomView(e,L,hy)},update:function(e,L,hy){this.$g(e,null,L,hy)},buildUrl:function(e,L){return tab.CustomizedViewSession.buildUrl(e,L)},makeCurrentDefault:function(e,L){this.setDefault(this.$l,e,L)},setDefault:function(e,L,hy){this.$s.setDefaultCustomizedView(e,ss.mkdel(this,function(hz){this.$e(hz);if(ss.isValue(L)){L(hz)}}),ss.mkdel(this,function(hz){this.$d(hz);if(ss.isValue(hy)){hy(hz)}}))},startManage:function(){if(this.$p===bH.modeSelect&&this.get_hasCustomViews()){this.$f(bH.modeManage)}},exitManageMode:function(){this.$f(bH.modeSelect)},updateCustomizedViews:function(e,L){this.$5(e,L)},destroyCustomView:function(e,L,hy){this.$o=true;this.$s.destroyCustomizedView(e,ss.mkdel(this,function(){ss.remove(this.get_myCustomViews(),e);if(ss.referenceEquals(e.id,this.$n)){this.$n=null}if(ss.referenceEquals(e.id,tsConfig.current_custom_view_id)){this.$l=null;this.$s.updateTsConfig(null,true)}this.$5(null,null);if(ss.isValue(L)){L()}}),ss.mkdel(this,function(hz){this.$5(null,null);if(ss.isValue(hy)){hy(hz)}}))},updateCustomizedViewPublicState:function(e,L,hy,hz){if(!ss.isValue(e)||L===e.isPublic){return}var hA=new Object;hA.id=e.id;hA.isPublic=L;hA.name=e.name;hA.owner=e.owner;hA.startViewId=e.startViewId;hA.urlId=e.urlId;this.$g(hA,e,hy,hz)},updateCustomizedViewName:function(e,L,hy,hz){if(ss.equalsT(e.name,L)){return}var hA=new Object;hA.id=e.id;hA.isPublic=e.isPublic;hA.name=L;hA.owner=e.owner;hA.startViewId=e.startViewId;hA.urlId=e.urlId;this.$g(hA,e,hy,hz)},$g:function(e,L,hy,hz){this.$s.updateCustomizedView(e,ss.mkdel(this,function(hA){if(ss.isValue(L)){var hB=ss.indexOf(this.$q,L);if(hB>=0){ss.removeAt(this.$q,hB);ss.insert(this.$q,hB,e)}if(ss.isValue(L)&&ss.referenceEquals(e.id,L.id)&&ss.referenceEquals(e.id,tsConfig.current_custom_view_id)){this.$l=e}}this.$5(null,null);if(ss.isValue(hy)){hy(hA)}}),ss.mkdel(this,function(hA){this.$5(null,null);if(ss.isValue(hz)){hz(hA)}}))},$f:function(e){this.$p=e;this.$a()},$5:function(e,L){this.$s.getCustomizedViews(ss.mkdel(this,function(hy,hz){this.$3(hy,hz);if(ss.isValue(e)){e(hy,hz)}}),ss.mkdel(this,function(hy){this.$2(hy);if(ss.isValue(L)){L(hy)}}))},$c:function(e){var L=tabBootstrap.Utility.get_embedMode()==='embeddedNotInWg'&&!tsConfig.reloadOnCustomViewSave;if(L||ss.isValue(this.$l)&&ss.unbox(this.$l.id)===ss.unbox(e.id)){this.$4();if(L){var hy;if(ss.isValue(e.owner)&&e.owner.id===tsConfig.current_user_id){for(hy=0;hy<this.$q.length;hy++){if(ss.referenceEquals(this.$q[hy].name,e.name)){this.$q[hy]=e;break}}if(hy>=this.$q.length){this.$q.push(e);this.$q.sort(bH.$0)}}else{for(hy=0;hy<this.$r.length;hy++){if(ss.referenceEquals(this.$r[hy].name,e.name)){this.$r[hy]=e;break}}if(hy>=this.$r.length){this.$r.push(e);this.$r.sort(bH.$0)}}}this.$l=e}else{this.$s.navigateToCustomizedView(e)}this.$9()},$b:function(e){},$e:function(e){this.$n=(ss.isValue(e)?e.id:null);this.$8()},$d:function(e){},$3:function(e,L){ss.clear(this.$q);ss.clear(this.$r);this.$l=null;this.$m=tab.Strings.ToolbarCustomViewsOriginalView;for(var hy=0;hy<e.length;hy++){var hz=e[hy];if(this.belongsToCurrentUser(hz)){this.$q.push(hz)}else{this.$r.push(hz)}if(this.isCurrentCustomView(hz)){this.$l=hz;this.$m=hz.name}}this.$q.sort(bH.$0);this.$r.sort(bH.$0);this.$n=L;this.$7()},$2:function(e){this.$m=null},$a:function(){if(ss.isValue(this.$2$1)){this.$2$1(this,ss.EventArgs.Empty)}},$7:function(){if(ss.isValue(this.$2$2)){this.$2$2(this,ss.EventArgs.Empty)}if(this.$o){this.$6();this.$o=false}},$8:function(){if(ss.isValue(this.$2$3)){this.$2$3(this,ss.EventArgs.Empty)}},$6:function(){if(ss.isValue(this.$2$4)){this.$2$4(this,ss.EventArgs.Empty)}},$9:function(){this.raiseEvent(this.$2$5)},disposeViewModel:function(){for(var e=0;e<this.$t.length;e++){var L=this.$t[e];dojo.unsubscribe(L)}ss.clear(this.$t);this.dispose()},updateUberPopupViewModel:function(e){}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel,spiff.IUberPopupContent]);ss.initClass(bI,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(bJ,a,{$e:function(){return this.get_template()},get_dashboardNode:function(){return this.$e().dashboardNode},get_containerNode:function(){return this.$e().get_domRoot()},$a:function(){if(ss.isValue(this.$f.get_formats())){this.$e().dashboardNode.css(this.$f.get_formats());var e=this.$f.get_formats()['color'];if(ss.isNullOrUndefined(e)||e==='#000000'){this.$e().dashboardNode.addClass('lightBackground')}else{this.$e().dashboardNode.addClass('darkBackground')}if(tsConfig.current_sheet_type==='dashboard'&&tsConfig.is_authoring){var L={top:this.$f.gutterSize+'px',left:this.$f.gutterSize+'px'};this.$e().dashboardNode.css(L)}}},$c:function(){this.$e().dashboardNode.height(this.$f.get_size().EUR).width(this.$f.get_size().rec);if(tsConfig.current_sheet_type==='dashboard'&&tsConfig.is_authoring){$('.tab-gutter').height(this.$f.get_size().EUR+2*this.$f.gutterSize).width(this.$f.get_size().rec+2*this.$f.gutterSize)}},$b:function(e){var L=spiff.ObjectRegistry.newView(hv).call(null,[e]);L.addToDom(this.$e().dashboardNode)},onAddedToDom:function(){if(!this.get_addedToDom()){this.$c();this.$a();var e=ss.getEnumerator(Object.keys(this.$f.get_zoneViewModels()));try{while(e.moveNext()){var L=e.current();this.$b(this.$f.get_zoneViewModels()[L])}}finally{e.dispose()}this.$e().get_domRoot().parent().scroll(ss.mkdel(this,this.$9))}spiff.Widget.prototype.onAddedToDom.call(this)},$9:function(e){var L=this.get_viewModel().get_viewControllers();for(var hy=0;hy<L.length;hy++){var hz=L[hy];hz.get_viewWidget().handlePageScroll()}},$d:function(){if(this.$f.get_renderMode()==='render-mode-client'){var e=this.$e().dashboardNode.find('img');var L=e.length;for(var hy=0;hy<L;hy++){var hz=e[hy];if(ss.isNullOrUndefined(hz)||hz.naturalHeight===0||hz.naturalWidth===0){continue}var hA=document.createElement('canvas');hA.width=hz.naturalWidth;hA.height=hz.naturalHeight;var hB=hA.getContext('2d');hB.drawImage(hz,0,0);try{var hC=hA.toDataURL('image/png',new Object);hz.src=hC}catch(hL){}}}var hD=this.$e().dashboardNode.clone(false,false);hD.addClass('facadedom');bJ.uniquefyClonedFilterRadioElements(hD);if(this.$f.get_renderMode()==='render-mode-server'){var hE=this.$e().dashboardNode.find('canvas');var hF=hD.find('canvas');var hG=hE.length;for(var hH=0;hH<hG;hH++){var hI=hE[hH];var hJ=hF[hH];if(!ss.isValue(hJ)){continue}var hK=hJ.getContext('2d');if(ss.isValue(hI)&&hI.width>0&&hI.height>0&&ss.isValue(hK)){hK.drawImage(hI,0,0)}}}this.$e().dashboardNode.parent().append(hD)}},ss.makeGenericType(spiff.BaseView$1,[bK]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[bK])]);ss.initClass(bK,a,{add_newZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_vizRebuildStart:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_vizRebuildStart:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_sizeChanged:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_sizeChanged:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_portSizeChanged:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_portSizeChanged:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},add_formatsChanged:function(e){this.$2$5=ss.delegateCombine(this.$2$5,e)},remove_formatsChanged:function(e){this.$2$5=ss.delegateRemove(this.$2$5,e)},get_viewControllers:function(){return this.$o},get_dashboardModel:function(){return this.$m},get_legacyMenus:function(){return this.$m.get_legacyMenus()},get_zoneViewModels:function(){return this.$p},get_formats:function(){return this.$m.get_formats()},get_backgroundColor:function(){var e='#FFFFFF';if(ss.isValue(this.get_formats())&&ss.keyExists(this.get_formats(),'backgroundColor')){e=this.get_formats()['backgroundColor']}return e},get_renderMode:function(){return this.$m.get_renderMode()},get_size:function(){return this.$n||this.$m.get_dashboardSize()},set_size:function(e){this.$n=e;this.raiseActionEvent(this.$2$3)},get_isDashboard:function(){return this.$m.get_isDashboard()},get_flipboardNavigatorViewModel:function(){return this.$5('flipboard-nav')},get_flipboardViewModel:function(){return this.$5('flipboard')},$l:function(){return tab.CommandController.get().get_legacySession()},dispose:function(){var e=ss.getEnumerator(Object.keys(this.$p));try{while(e.moveNext()){var L=e.current();this.$p[L].dispose()}}finally{e.dispose()}ss.clearKeys(this.$p);for(var hy=0;hy<this.$o.length;hy++){var hz=this.$o[hy];hz.get_viewSession().remove_sheetDataChanged(ss.mkdel(this,this.$k));hz.dispose()}ss.clear(this.$o);ss.clearKeys(this.viewControllersBySheet);this.$m.get_zonesModel().remove_newZone(ss.mkdel(this,this.$8));this.$m.remove_newDashboard(ss.mkdel(this,this.$7));this.$m.remove_activeZoneChanged(ss.mkdel(this,this.$6));this.$m.remove_readyZoneChanged(ss.mkdel(this,this.$9));spiff.BaseViewModel.prototype.dispose.call(this)},$8:function(e){if(ss.keyExists(this.$p,e.get_zoneId())){this.$c(e.get_zoneId())}var L=this.$4(e);if(L.get_zoneType()==='viz'){if(ss.isValue(L.get_zoneContentViewModel())){this.$b(L)}else{var hy=null;hy=ss.mkdel(this,function(){L.remove_newZoneContent(hy);this.$b(L)});L.add_newZoneContent(hy)}}L.set_isActiveZone(L.get_zoneId()===this.$m.get_activeZoneID());this.$i(L)},$b:function(e){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_zoneContentViewModel())){return}var L=this.$3(e.get_associatedSheet());L.get_viewSession().add_sheetDataChanged(ss.mkdel(this,this.$k));e.get_zoneContentViewModel().set_viewController(L)},$4:function(e){var L=new hw(e);this.$p[e.get_zoneId()]=L;return L},$5:function(e){var L=new ss.ObjectEnumerator(this.$p);try{while(L.moveNext()){var hy=L.current();if(hy.value.get_zoneType()===e){return hy.value.get_zoneContentViewModel()}}}finally{L.dispose()}return null},$i:function(e){if(ss.isValue(this.$2$1)){this.$2$1(e)}},$7:function(){this.$j(ss.mkdel(this,function(e){return!this.$m.hasZone(e.get_zoneId())||!this.$m.isValidSheet(e.get_model())}))},$g:function(){this.raiseActionEvent(this.$2$3)},$f:function(){this.raiseActionEvent(this.$2$4)},$e:function(){this.raiseActionEvent(this.$2$5)},$a:function(){if(!ss.referenceEquals(this.get_dashboardModel(),tab.ModelUtils.findContentDashboard())){return}this.raiseActionEvent(this.$2$2);this.$j(function(e){return e.get_zoneType()==='viz'})},$j:function(e){var L=[];var hy=_.keys(this.$p);for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];var hB=this.$p[hA];if(e(hB)){L.push(hA)}}this.$d(L);this.$2()},$d:function(e){for(var L=0;L<e.length;L++){var hy=e[L];this.$c(hy)}},$c:function(e){var L=this.$p[e];if(ss.isValue(L)){if(L.get_zoneType()==='viz'){var hy=this.viewControllersBySheet['v_'+L.get_associatedSheet()];if(ss.isValue(hy)){delete this.viewControllersBySheet['v_'+L.get_associatedSheet()];ss.remove(this.$o,hy);hy.dispose()}}L.dispose();delete this.$p[e]}},$2:function(){var e=this.$m.get_zoneModels();for(var L=0;L<e.length;L++){var hy=e[L];if(!ss.keyExists(this.$p,hy.get_zoneId())&&this.$m.isValidSheet(hy)){this.$8(hy)}}},$h:function(e){dojo.publish('close-menus');if(this.get_dashboardModel().get_autoUpdate()){tab.CommandController.get().refreshLayout()}else{this.get_dashboardModel().set_invalid(true)}},$k:function(){dojo.publish('close-menus');if(this.get_dashboardModel().get_autoUpdate()){tab.CommandController.get().refreshLayout()}else{this.get_dashboardModel().set_invalid(true)}},$6:function(){if(tsConfig.isPublic){return}if(!tab.ModelUtils.getSheetInfoPresModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name).WeS){return}var e=this.$m.get_activeZoneID();var L=ss.getEnumerator(Object.keys(this.$p));try{while(L.moveNext()){var hy=L.current();var hz=this.$p[hy];hz.set_isActiveZone(hz.get_zoneId()===e)}}finally{L.dispose()}},$9:function(){if(!tab.ModelUtils.getSheetInfoPresModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name).WeS){return}var e=this.$m.get_readyZoneID();var L=ss.getEnumerator(Object.keys(this.$p));try{while(L.moveNext()){var hy=L.current();var hz=this.$p[hy];hz.set_isReadyZone(hz.get_zoneId()===e)}}finally{L.dispose()}},$3:function(e){var L=new gZ(e,this.get_dashboardModel().getViewSession(e));this.viewControllersBySheet['v_'+e]=L;this.$o.push(L);return L}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(bL,a,{get_variableListArea:function(){return this.$5},get_variableListInstruction:function(){return this.$9},get_variableListHeaderName:function(){return this.$7},get_variableListHeaderValue:function(){return this.$8},get_variableListContainer:function(){return this.$6},get_buttonArea:function(){return this.$1},get_editArea:function(){return this.$2},get_editTitle:function(){return this.$4},get_editInstruction:function(){return this.$3}},spiff.Template,[ss.IDisposable]);ss.initClass(bM,a,{get_dialog:function(){return this.$g},$f:function(){return this.get_template()},get_variableListView:function(){return this.$j},dispose:function(){if(ss.isValue(this.$g)){this.$g.dispose()}if(ss.isValue(this.$h)){this.$h.dispose()}if(ss.isValue(this.get_variableListView())){this.get_variableListView().dispose()}if(ss.isValue(this.$i)){this.$i.dispose()}ss.makeGenericType(spiff.BaseView$1,[bN]).prototype.dispose.call(this)},$a:function(){this.$f().get_variableListInstruction().text(this.get_viewModel().get_variableListInstruction());this.$f().get_variableListHeaderName().text(this.get_viewModel().get_variableListNameLabel());this.$f().get_variableListHeaderValue().text(this.get_viewModel().get_variableListValueLabel());this.get_variableListView().initDom(this.$f().get_variableListContainer());this.$f().get_editTitle().text(this.get_viewModel().get_editSectionTitle());this.$f().get_editInstruction().text(this.get_viewModel().get_editSectionInstruction());this.$e()},$b:function(){this.$f().get_editInstruction().hide();this.$i=spiff.ObjectRegistry.newView(bP).call(null,[this.get_viewModel().get_variableInEdit()]);this.$i.addToDom(this.$f().get_editArea())},$c:function(){this.$f().get_editInstruction().show()},$e:function(){this.$g.set_titleUnescaped(this.get_viewModel().get_promptTitle());this.$h.set_disabled(this.get_viewModel().get_isRequiredVariableMissing());if(!this.$g.get_isShown()){this.$g.show()}},$d:function(){this.$h=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$9),tab.Strings.DialogButtonOK,'tabDataConnPromptOkButton',0,1);this.$f().get_buttonArea().append(this.$h.get_element());this.$g=new spiff.ModalDialog(this.get_viewModel().get_promptTitle(),this.get_rootElement());this.$g.get_dialogElement().addClass('tabDataConnectionPromptDialog');this.$g.set_closeButtonVisible(false);this.$g.show();this.$a()},$9:function(){this.get_viewModel().applyConnectionVariables();this.$g.close(null)}},ss.makeGenericType(spiff.BaseView$1,[bN]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[bN])]);ss.initClass(bN,a,{get_promptTitle:function(){return this.$4.get_promptTitle()},get_variableListInstruction:function(){return this.$4.get_variableListInstruction()},get_variableListNameLabel:function(){return this.$4.get_variableListNameLabel()},get_variableListValueLabel:function(){return this.$4.get_variableListValueLabel()},get_editSectionTitle:function(){return this.$4.get_editSectionTitle()},get_editSectionInstruction:function(){return this.$4.get_editSectionInstruction()},get_editSectionFromLabel:function(){return this.$4.get_editSectionFromLabel()},get_editSectionToLabel:function(){return this.$4.get_editSectionToLabel()},get_variableListViewModel:function(){return this.$6},get_variableInEdit:function(){return this.$5},get_isRequiredVariableMissing:function(){return _.any(this.$6.get_connectionVariables(),function(e){return e.get_isRequired()&&e.get_values().length===0})},dispose:function(){if(ss.isValue(this.$6)){this.$6.dispose()}if(ss.isValue(this.$5)){this.$5.dispose()}spiff.BaseViewModel.prototype.dispose.call(this)},applyConnectionVariables:function(){tab.DataConnectionCommands.acceptConnectionVariables(this.$4.get_datasourceName());this.get_variableListViewModel().set_selectedVariable(null)},$2:function(e){this.$4=e;this.$6.update(this.$4);this.raiseActionEvent(this.$6.contentChanged);this.raiseActionEvent(this.contentChanged)},$3:function(e){if(ss.isNullOrUndefined(e)){this.$5=tab.MiscUtil.dispose$1(this.$5);this.raiseActionEvent(this.variableInEditDeleted);return}if(ss.isNullOrUndefined(this.$5)){this.$5=new bQ(e.get_variableModel(),e.get_valueModel(),this.$4.get_datasourceName(),this.get_editSectionFromLabel(),this.get_editSectionToLabel());this.raiseActionEvent(this.variableFirstEdited)}this.get_variableInEdit().update(e.get_variableModel(),e.get_valueModel())}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(bO,a,{get_variableModel:function(){return this.$4},get_valueModel:function(){return this.$3},get_variableListId:function(){return this.$2$1},set_variableListId:function(e){this.$2$1=e},get_variableListViewModel:function(){return this.$2$2},set_variableListViewModel:function(e){this.$2$2=e},get_isDefaultValue:function(){return this.$2}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(bP,a,{$i:function(){return this.get_template()},dispose:function(){this.$k.dispose();this.$j.dispose();this.$l.dispose();ss.makeGenericType(spiff.BaseView$1,[bQ]).prototype.dispose.call(this)},$9:function(){var e=spiff.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$k]);e.addToDom(this.$i().$5());var L=spiff.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$j]);L.addToDom(this.$i().$3());var hy=spiff.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$l]);hy.addToDom(this.$i().$6())},$f:function(){this.$i().$2().text(this.get_viewModel().get_variableDisplayName());this.$i().$2().prop('title',this.get_viewModel().get_variableDisplayName());this.$i().$1().text(this.get_viewModel().get_variableDescription());this.$i().$1().prop('title',this.get_viewModel().get_variableDescription());this.$g();if(this.get_viewModel().get_selectableValues().length===0){this.$i().$3().hide();this.$i().$6().hide();this.$i().$9().val(this.get_viewModel().get_firstValue());this.$i().$9().show()}else{this.$i().$9().css({display:'none'});this.$h(this.$j,this.get_viewModel().get_firstValueIndex());this.$i().$3().show();if(this.get_viewModel().get_operation().pp==='range-inclusive'){this.$h(this.$l,this.get_viewModel().get_secondValueIndex());this.$i().$6().show();this.$i().$4().text(this.get_viewModel().get_fromLabel());this.$i().$7().text(this.get_viewModel().get_toLabel());this.$i().$8().addClass('range')}else{this.$i().$6().hide();this.$i().$4().text('');this.$i().$7().text('');this.$i().$8().removeClass('range')}}},$g:function(){var e=[];var L=null;var hy=this.get_viewModel().get_selectableOperations();for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];var hB=new spiff.ComboBoxItem(null,hA.RvO,hA,null);e.push(hB);if(hA.pp===this.get_viewModel().get_operation().pp){L=hB}}this.$k.setItemsWithInitialSelection(e,L)},$h:function(e,L){var hy=[];var hz=null;for(var hA=0;hA<this.get_viewModel().get_selectableValues().length;hA++){var hB=new spiff.ComboBoxItem(null,this.get_viewModel().get_selectableValues()[hA],hA,null);hy.push(hB);if(hA===L){hz=hB}}e.setItemsWithInitialSelection(hy,hz)},$b:function(e){if(ss.isNullOrUndefined(e)){return}this.get_viewModel().editOperation(e.get_data())},$a:function(e){if(ss.isNullOrUndefined(e)){return}this.get_viewModel().editValueSelection(e.get_data(),null)},$c:function(e){if(ss.isNullOrUndefined(e)){return}this.get_viewModel().editValueSelection(null,e.get_data())},$d:function(){var e=this.$i().$9().val();this.get_viewModel().editValueInput(e.trim())},$e:function(e){if(e.which===13){this.$d()}}},ss.makeGenericType(spiff.BaseView$1,[bQ]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[bQ])]);ss.initClass(bQ,a,{add_contentUpdated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_contentUpdated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_fromLabel:function(){return this.$2$2},set_fromLabel:function(e){this.$2$2=e},get_toLabel:function(){return this.$2$3},set_toLabel:function(e){this.$2$3=e},get_variableDisplayName:function(){return this.$4.get_displayName()},get_variableDescription:function(){return this.$4.get_description()},get_valueIndex:function(){return this.$3.get_valueIndex()},get_operation:function(){return((this.$4.get_values().length>0)?this.$3.get_operation():this.$4.get_defaultValue().get_operation())},get_firstValue:function(){return((this.$4.get_values().length>0)?this.$3.get_firstValue():this.$4.get_defaultValue().get_firstValue())},get_firstValueIndex:function(){return((this.$4.get_values().length>0)?this.$3.get_firstValueIndex():this.$4.get_defaultValue().get_firstValueIndex())},get_secondValue:function(){return((this.$4.get_values().length>0)?this.$3.get_secondValue():this.$4.get_defaultValue().get_secondValue())},get_secondValueIndex:function(){return((this.$4.get_values().length>0)?this.$3.get_secondValueIndex():this.$4.get_defaultValue().get_secondValueIndex())},get_selectableOperations:function(){return this.$4.get_selectableOperations()},get_selectableValues:function(){return this.$4.get_selectableValues()},update:function(e,L){this.$4=e;this.$3=L;this.raiseActionEvent(this.$2$1)},editOperation:function(e){var L=this.$3.get_firstValueIndex();var hy=this.$3.get_secondValueIndex();tab.DataConnectionCommands.editVariableByIndex(this.$2,this.$4.get_guid(),this.$3.get_valueIndex(),e,L,hy)},editValueSelection:function(e,L){var hy=e;if(ss.isNullOrUndefined(hy)){hy=this.$3.get_firstValueIndex()}var hz=hy;var hA=L;if(ss.isNullOrUndefined(hA)){hA=this.$3.get_secondValueIndex()}var hB=hA;tab.DataConnectionCommands.editVariableByIndex(this.$2,this.$4.get_guid(),this.$3.get_valueIndex(),this.$3.get_operation(),hz,hB)},editValueInput:function(e){tab.DataConnectionCommands.editVariableByInput(this.$2,this.$4.get_guid(),this.$3.get_valueIndex(),this.$3.get_operation(),e)}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(bR,a,{get_variableName:function(){return this.$2},get_variableValue:function(){return this.$3},get_deleteVarBtnArea:function(){return this.$1}},spiff.Template,[ss.IDisposable]);ss.initClass(bS,a,{get_dom:function(){return this.get_template()},initDom:function(){this.get_dom().get_variableName().text(this.get_viewModel().get_variableModel().get_displayName());this.get_dom().get_variableName().prop('title',this.get_viewModel().get_variableModel().get_displayName());if(this.get_viewModel().get_isDefaultValue()&&this.get_viewModel().get_variableModel().get_isRequired()){this.get_dom().get_variableValue().text(this.get_viewModel().get_variableListViewModel().get_requiredVariableMessage());this.get_dom().get_variableValue().addClass('required')}else{this.get_dom().get_variableValue().text(this.get_viewModel().get_valueModel().get_displayValue());this.get_dom().get_variableValue().prop('title',this.get_viewModel().get_valueModel().get_displayValue())}var e=new spiff.IconButton;e.addClass('tabDataConnPromptDeleteVarBtn');e.setIcon('tabVarListItemDeleteIcon');e.set_hoverTooltipText(this.get_viewModel().get_variableListViewModel().get_deleteVariableTooltip());var L=ss.mkdel(this,function(){this.get_viewModel().get_variableListViewModel().deleteVariable(this.get_viewModel())});e.add_click(L);this.disposables.add$1(new tab.CallOnDispose(function(){e.remove_click(L);e.dispose()}));e.addToDom(this.get_dom().get_deleteVarBtnArea())}},ss.makeGenericType(spiff.BaseView$1,[bO]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[bO])]);ss.initClass(bT,a,{$e:function(){return this.get_template()},dispose:function(){if(ss.isValue(this.$j)){this.$j.dispose()}if(ss.isValue(this.$f)){this.$f.dispose()}if(ss.isValue(this.$i)){this.$i.remove_selectedItemChanged(ss.mkdel(this,this.$a));this.$i.dispose()}if(ss.isValue(this.$h)){this.$h.dispose()}if(ss.isValue(this.$g)){this.$g.dispose()}ss.makeGenericType(spiff.BaseView$1,[bU]).prototype.dispose.call(this)},initDom:function(e){this.$j=spiff.ListView.createListView(this.get_viewModel().get_listViewModel(),this);this.$e().get_domRoot().prepend(this.$j.get_domRoot());this.$c();this.$h=new spiff.ScrollableViewModel.$ctor1(false);this.$h.set_content(this.$e().get_domRoot()[0]);this.$h.set_scrollY(true);this.$g=spiff.ScrollableView.createScrollableView(this.$h);this.$g.addToDom(e);this.$j.useScrollableView(this.$g);this.$h.triggerRefresh()},$c:function(){this.$f=tab.MiscUtil.dispose$1(this.$f);if(ss.isValue(this.$i)){this.$i.remove_selectedItemChanged(ss.mkdel(this,this.$a));this.$i.dispose()}if(this.get_viewModel().get_multiValueVariables().length>0){this.$f=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,function(){this.$b(true)}),this.get_viewModel().get_addVariableLabel(),'tabDataConnPromptAddVarBtn',2,2);this.$f.set_hoverTooltipText(this.get_viewModel().get_addVariableTooltip());this.$f.addToDom(this.$e().get_addVariableCtrlBtnArea());this.$9();this.$e().get_addVariableCtrlBtnArea().show()}},$9:function(){this.$i=new spiff.ComboBoxViewModel;this.$i.add_selectedItemChanged(ss.mkdel(this,this.$a));var e=[];var L=this.get_viewModel().get_multiValueVariables();for(var hy=0;hy<L.length;hy++){var hz=L[hy];e.push(new spiff.ComboBoxItem(null,hz.get_displayName(),hz.get_guid(),null))}this.$i.setItems(e);var hA=spiff.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$i]);hA.addToDom(this.$e().get_addVariableCtrlVarSelector());this.$e().get_addVariableCtrlVarSelector().hide()},$a:function(e){if(ss.isNullOrUndefined(e)){return}this.get_viewModel().addVariable(e.get_data());this.$b(false)},$b:function(e){if(e){this.$e().get_addVariableCtrlBtnArea().hide();this.$e().get_addVariableCtrlVarSelector().show();this.$i.set_selectedItem(null);this.get_viewModel().get_listViewModel().clearSelection()}else{this.$e().get_addVariableCtrlBtnArea().show();this.$e().get_addVariableCtrlVarSelector().hide()}},$d:function(){this.$h.triggerRefresh();this.$c();if(ss.isValue(this.get_viewModel().get_selectedVariable())){this.onSelectedVariableChanged(this.get_viewModel().get_selectedVariable())}},onSelectedVariableChanged:function(e){this.$b(false)},createListItemContent:function(e){var L=e.get_data();var hy=spiff.ObjectRegistry.newView(bS).call(null,[L]);return hy.get_dom().get_domRoot()}},ss.makeGenericType(spiff.BaseView$1,[bU]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[bU]),spiff.IListItemContentCreator]);ss.initClass(bU,a,{get_addVariableLabel:function(){return this.$5.get_addVariableLabel()},get_addVariableTooltip:function(){return this.$5.get_addVariableTooltip()},get_deleteVariableTooltip:function(){return this.$5.get_deleteVariableTooltip()},get_requiredVariableMessage:function(){return this.$5.get_requiredVariableMessage()},get_datasourceName:function(){return this.$5.get_datasourceName()},get_connectionVariables:function(){return this.$6},get_multiValueVariables:function(){return _.filter(this.get_connectionVariables(),function(e){return e.get_supportMultiValue()})},get_selectedVariable:function(){return this.$8},set_selectedVariable:function(e){if(ss.referenceEquals(this.$8,e)){return}this.$8=e;if(ss.isNullOrUndefined(this.$8)){this.get_listViewModel().clearSelection()}else{this.get_listViewModel().selectItemById(this.$8.get_variableListId())}if(!ss.staticEquals(this.selectedVariableChanged,null)){this.selectedVariableChanged(this.$8)}},get_listViewModel:function(){return this.$7},$4:function(){var e=(ss.isNullOrUndefined(this.get_selectedVariable())?null:this.get_selectedVariable().get_variableListId());var L=[];var hy=this.get_connectionVariables();for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];if(hA.get_values().length===0){var hB=hA.get_defaultValue();hB.set_variableListId(hA.get_guid()+'-0');hB.set_variableListViewModel(this);var hC=ss.referenceEquals(hB.get_variableListId(),e);L.push(spiff.ListItemViewModel.newListItem(hA.get_guid(),hB,hC));continue}var hD=hA.get_values();for(var hE=0;hE<hD.length;hE++){var hF=hD[hE];var hG=hA.get_guid()+'-'+hF.get_valueModel().get_valueIndex();hF.set_variableListId(hG);hF.set_variableListViewModel(this);var hH=ss.referenceEquals(hF.get_variableListId(),e);L.push(spiff.ListItemViewModel.newListItem(hG,hF,hH))}}return L},dispose:function(){if(ss.isValue(this.$7)){this.$7.remove_selectionChanged(ss.mkdel(this,this.$3));var e=this.$7.get_originalCollection();for(var L=0;L<e.length;L++){var hy=e[L];hy.dispose()}this.$7.dispose()}if(ss.isValue(this.$8)){this.$8.dispose()}_.each(this.$6,function(hz){hz.dispose()});spiff.BaseViewModel.prototype.dispose.call(this)},update:function(e){this.$5=e;_.each(this.$6,function(hy){hy.dispose()});this.$6=_.map(this.$5.get_connectionVariables(),function(hy){return new bV(hy)});_.each(this.$7.get_originalCollection(),function(hy){hy.dispose()});this.$7.update(this.$4());var L=this.get_listViewModel().get_firstSelectedItem();this.set_selectedVariable((ss.isValue(L)?L.get_data():null))},$2:function(e,L){var hy=_.find(this.get_connectionVariables(),function(hz){return ss.referenceEquals(hz.get_guid(),e)});return hy.get_values()[L]},$3:function(){var e=this.get_listViewModel().get_firstSelectedItem();if(ss.isNullOrUndefined(e)){return}this.set_selectedVariable(e.get_data())},addVariable:function(e){var L=tab.DataConnectionCommands.addVariable(this.get_datasourceName(),e);L.done(ss.mkdel(this,function(hy){var hz=this.$2(e,hy);if(ss.isValue(hz)){this.set_selectedVariable(hz)}if(!ss.staticEquals(this.variableAdded,null)){this.variableAdded(hz)}}))},deleteVariable:function(e){tab.DataConnectionCommands.deleteVariable(this.get_datasourceName(),e.get_variableModel().get_guid(),e.get_valueModel().get_valueIndex(),ss.mkdel(this,function(){if(ss.isNullOrUndefined(this.get_selectedVariable())){return}if(ss.referenceEquals(this.get_selectedVariable().get_variableListId(),e.get_variableListId())){this.set_selectedVariable(null)}}))}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(bV,a,{get_displayName:function(){return this.$2.get_displayName()},get_description:function(){return this.$2.get_description()},get_guid:function(){return this.$2.get_guid()},get_supportMultiValue:function(){return this.$2.get_supportMultiValue()},get_isRequired:function(){return this.$2.get_isRequired()},get_defaultValue:function(){return this.$3},get_values:function(){return this.$4},get_selectableOperations:function(){return this.$2.get_selectableOperations()},get_selectableValues:function(){return this.$2.get_selectableValues()},dispose:function(){_.each(this.$4,function(e){e.dispose()});this.$3.dispose();spiff.BaseViewModel.prototype.dispose.call(this)}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(bW,a,{get_compositeSearchWidget:function(){return this.$g},handleSelectChanged:function(e,L){},$9:function(e,L){this.$e();var hy=ss.referenceEquals(this.$i,this.get_compositeSearchWidget().get_textInputView().get_text());this.$i=null;if(hy){return}if(this.get_compositeSearchWidget().get_textInputView().get_text().trim().length>0){this.$f()}else{this.handleTextInputCleared()}},$f:function(){this.queryDelayTimer=window.setTimeout(ss.mkdel(this,this.$d),200)},$e:function(){if(ss.isValue(this.queryDelayTimer)){window.clearTimeout(this.queryDelayTimer)}this.queryDelayTimer=null},$d:function(){if(this.get_compositeSearchWidget().get_isShowingInitialSearchText()){this.populateAndDisplayList(this.dataHighlighterViewModel.get_fullDomainItemSet(),1)}else{this.dataHighlighterViewModel.sendSearchQuery(this.get_compositeSearchWidget().get_textInputView().get_text())}this.$e()},handleNewSearchQueryResults:function(e,L){if(!ss.referenceEquals(e,this.$g.get_textInputView().get_text())||ss.isNullOrUndefined(L)){return}this.lastSatisfiedSearchTerm=e;this.lastSatisfiedSearchResults=L;this.populateAndDisplayList(L,2)},populateAndDisplayList:function(e,L){this.$k=tab.MiscUtil.dispose(this.$k);this.$k=[];this.currentSearchResultIDs=[];for(var hy=0;hy<e.NGM.length;hy++){var hz=e.NGM[hy];this.$k.push(spiff.ListItemViewModel.newListItem(hz.YLs.toString(),hz,false));if(L===2){this.currentSearchResultIDs.push(hz.YLs)}}this.get_compositeSearchWidget().showListInsideUberPopup(this.$k,this,this.dataHighlighterViewjQueryObject,'tabDataHighlighterViewSearchResultList');this.currentListPopulationMode=L},addImplEventHandlerToListItem:null,addEventHandlerToListItem:function(e,L){var hy={};hy.tap=ss.mkdel(this,function(){this.handleListItemClicked(L)});var hz=hy;this.disposables.add$1(new spiff.TableauEventHandler.$ctor1(e.get(0),hz));this.addImplEventHandlerToListItem(e,L)},createListItemContent:function(e){var L=$("<div class='tab-list-item-label'/>");var hy=e.get_data();L.append(hy.gjO);L.attr('title',hy.gjO);this.addEventHandlerToListItem(L,hy);return L},handleListItemClicked:function(e){this.$g.showInitialSearchText(false);this.$i=e.gjO;this.get_compositeSearchWidget().get_textInputView().set_text(e.gjO);this.removeList();this.get_viewModel().highlightItems([e.YLs]);this.get_compositeSearchWidget().get_textInputView().get_inputElement().focus();tab.DomUtil.setSelectionRangeOnInput(this.$g.get_textInputView().get_inputElement().get(0),this.$g.get_textInputView().get_text().length,this.$g.get_textInputView().get_text().length)},removeList:function(){this.currentListPopulationMode=0;this.get_compositeSearchWidget().removeList()},handleTitleChanged:function(){this.setTitleFromModel()},setTitleFromModel:function(){if(ss.isValue(this.dataHighlighterViewModel.get_zoneTitleHtml())){this.zoneTitleRegionJQueryObject.html(this.dataHighlighterViewModel.get_zoneTitleHtml());tableau.util.setupTitleEllipsis(this.zoneTitleRegionJQueryObject);tableau.util.setupTitleTooltip(this.zoneTitleRegionJQueryObject)}},handleInitialSearchTextStateChange:function(e){this.get_compositeSearchWidget().get_searchButton().get_element().css('visibility',(e?'visible':'hidden'));this.get_compositeSearchWidget().get_clearButton().get_element().css('visibility',(e?'hidden':'visible'));if(e){this.get_compositeSearchWidget().get_textInputView().get_inputElement().focus()}},handleTextInputElementClicked:function(){var e=this.get_compositeSearchWidget().get_textInputView().get_text().trim().length===0;if(this.get_compositeSearchWidget().get_isShowingInitialSearchText()||e){this.populateAndDisplayList(this.dataHighlighterViewModel.get_fullDomainItemSet(),1)}},handleTextInputCleared:function(){this.removeList();this.dataHighlighterViewModel.clearHighlighting();this.get_compositeSearchWidget().showInitialSearchText(true)},$a:function(e){this.$j=true},$b:function(e){this.$j=false},$c:function(e){if(!this.$j||this.get_compositeSearchWidget().get_isShowingInitialSearchText()){return}this.$j=false;var L=this.get_compositeSearchWidget().get_textInputView().get_inputElement().prop('selectionStart');var hy=this.get_compositeSearchWidget().get_textInputView().get_inputElement().prop('selectionEnd');var hz=ss.isValue(L)&&ss.isValue(hy)&&!ss.referenceEquals(L,hy);if(!hz){tab.DomUtil.selectAllInputText(this.get_compositeSearchWidget().get_textInputView().get_inputElement())}if(ss.referenceEquals(this.lastSatisfiedSearchTerm,this.get_compositeSearchWidget().get_textInputView().get_text())){this.populateAndDisplayList(this.lastSatisfiedSearchResults,2)}}},ss.makeGenericType(spiff.BaseView$1,[bY]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[bY]),spiff.IListItemContentCreator]);ss.initEnum(bX,a,{none:0,fullDomain:1,searchResults:2});ss.initClass(bY,a,{add_receivedSearchQueryResults:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_receivedSearchQueryResults:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_titleChanged:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_titleChanged:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_zoneTitleHtml:function(){if(ss.isValue(this.$6)){return this.$6.xBc}else{return''}},get_searchPlaceholderString:function(){return this.$3.get_searchPlaceholderString()},get_fullDomainItemSet:function(){return this.$3.get_fullDomainItemSet()},sendSearchQuery:function(e){if(!ss.staticEquals(this.$2$1,null)){var L=new tab.HighlightItemsByPatternMatchCmd;L.c['HBp']=this.$3.get_fieldName();L.c['vau']=e;L.c['J_M']=this.$5;L.set_uiBlocking('none');L.invoke$1().done(ss.mkdel(this,function(hy){this.$2$1(e,hy.$c['DBQ'])}))}},highlightItems:function(e){var L=new tab.HighlightItemsCmd;L.c['HBp']=this.$3.get_fieldName();L.c['kyj']=e;L.c['J_M']=this.$5;L.set_uiBlocking('none');L.invoke$1()},clearHighlighting:function(){var e=new tab.ClearHighlightingCmd;e.c['HBp']=this.$3.get_fieldName();e.c['J_M']=this.$5;e.set_uiBlocking('none');e.invoke$1()},$2:function(){var e=this.$4.get_model();var L=ss.isValue(e.pm)&&ss.isValue(e.pm.KDk);if(L){var hy=e.pm.KDk;if(!ss.equals(hy,this.$6)){this.$6=hy;if(!ss.staticEquals(this.$2$2,null)){this.$2$2()}}}}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(bZ,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(ca,a,{show:function(){var e=new cs;var L=ss.mkdel(this,function(hy){this.onAuthDialogMessage(hy,e)});e.eventHandler=L;tab.WindowHelper.addListener(window.self,'message',L);this.$0.add_closed(ss.mkdel(this,function(hy,hz){this.cleanup(null,e)}));this.$0.show()},cleanup:function(e,L){tab.WindowHelper.removeListener(window.self,'message',L.eventHandler);this.$0.close(null)},dispose:function(){this.$0.dispose()}},W,[ss.IDisposable]);ss.initClass(eB,a,{get_hasLabels:function(){return ss.isValue(this.labelColumnsDict)},get_hasSelection:function(){return this.sceneInfo.$q()},get_hasBrushing:function(){return this.sceneInfo.$p()},get_markCount:function(){return this.numMarks},get_markType:function(){return this.markTypeValue},get_lineDrawState:function(){if(this.$p===null){this.$p=new ee(this)}return this.$p},get_hasBackground:function(){return ss.keyExists(this.columns,'pane_has_background')&&this.columns['pane_has_background'][0]},get_hasHalos:function(){return ss.keyExists(this.columns,'has_halos')&&this.columns['has_halos'][0]},get_fogBlendFactor:function(){return this.fogBlendFactorValue},get_foggedBackgroundColor:function(){return this.foggedBackgroundColorValue},get_forceOpaqueColors:function(){return this.shouldForceOpaqueColors},set_forceOpaqueColors:function(e){this.shouldForceOpaqueColors=e},get_hasHaloHighlightColor:function(){return ss.keyExists(this.columns,'highlighted_halo_color')&&ss.isValue(this.columns['highlighted_halo_color'])},get_hasFoldedAxis:function(){return ss.keyExists(this.columns,'has_folded_axis')&&this.columns['has_folded_axis'][0]},get_borderColor:function(){return(ss.keyExists(this.columns,'border_color')?this.columns['border_color'][0]:null)},get_minBarWidth:function(){return(ss.keyExists(this.columns,'min_bar_width')?this.columns['min_bar_width'][0]:0)},get_minBarHeight:function(){return(ss.keyExists(this.columns,'min_bar_height')?this.columns['min_bar_height'][0]:0)},get_textStyleColumns:function(){return this.textStyleColumnsDict},get_paneColumn:function(){return this.paneColumnIndex},get_paneRow:function(){return this.paneRowIndex},get_paneRect:function(){return this.paneRectXY},get_mapExtents:function(){return this.mapExtentsRect},get_mapExtentOrPaneRect:function(){return this.mapExtentsRect||this.paneRectXY},get_clipLabelToCell:function(){return this.truncateLabelToCell},get_paneDescriptorKey:function(){return this.paneMarks.fDN},get_hasGlobalTransparency:function(){return this.get_globalAlpha()<1},get_globalAlpha:function(){if(ss.keyExists(this.columns,'alpha')&&this.columns['alpha'].length===1){return this.columns['alpha'][0]}else{return 1}},get_pdiKey:function(){return this.pdiKeyStr},get_paneFlags:function(){return this.$t},set_paneFlags:function(e){this.$t=e;this.$e()},get_skipClipping:function(){return this.$1$1},set_skipClipping:function(e){this.$1$1=e},getTextRunProperty:function(e,L){if(!ss.isValue(this.textRunColumnsDict)||!ss.isValue(this.textRunColumnsDict[e])){return null}return this.textRunColumnsDict[e][L]},markHasLabel:function(e){return this.$h(e)!==-1},getOneColorAlpha:function(e,L,hy){this.$n=this.$n||{};if(!ss.keyExists(this.$n,e)){var hz=tab.ColorModel.fromArgbInt(e);this.$n[e]=fx.createColorCollection(hz,this.foggedBackgroundColorValue,this.fogBlendFactorValue)}var hA=this.$n[e];if(L==='colorOverrideReplaceAlpha'){var hB=tab.ColorModel.fromArgbInt(e);return tab.ColorModel.fromColorModelPlusAlpha(hB,hy/255).toRgba()}return hA[L]},getMarkColors:function(e){var L;var hy='color';if(this.shouldForceOpaqueColors&&this.$5('opaque_color').get_isValid()){hy='opaque_color'}L=this.$6(hy,e);if(this.isMarkFiltered(e)){var hz={};hz['colorOverrideFog']=L['colorOverrideFog'];hz['colorOverrideNone']=L['colorOverrideFog'];hz['colorOverrideOpaque']=L['colorOverrideFog'];L=hz}return L},getMarkProperty:function(e,L){return this.$6(e,L)},getMarkGeometry:function(e){return this.sceneInfo.$7(this.pdMarksKey,e)},isMarkPropertyConstant:function(e){return ss.keyExists(this.constantColumnNamesSet,e)},computeDirtyMarks:function(e){this.$m={};var L=tab.RectXYUtil.completelyContains(e,this.paneRectXY);var hy=this.$5('tuple_id');for(var hz=0;hz<this.numMarks;hz++){var hA=(hy.isConst?hy.constVal:hy.vals[hz]);if(!this.isTupleVisible(hA)){continue}if(L){this.$m[hz]=true;continue}if(this.markTypeValue==='line'||this.markTypeValue==='area'){this.$m[hz]=true}else{var hB=this.$a(hA);var hC=this.getMarkInstanceOffsets(hz);if(tab.RectXYUtil.intersectsWithAny$1(e,hB,hC)){this.$m[hz]=true}}}},clearDirtyMarks:function(){this.$m=null},markNeedsDraw:function(e){return ss.isValue(this.$m)&&ss.keyExists(this.$m,e)},markLabelNeedsDraw:function(e,L){if(this.getMarkState(e)==='markStateInvisible'){return false}var hy=this.getMarkLabelBounds(e);var hz=this.getMarkInstanceOffsets(e);return tab.RectXYUtil.intersectsWithAny$1(L,hy,hz)},refreshMarkState:function(){var e=this.columns['tuple_id'];this.$r=this.sceneInfo.computeTupleStates(e);this.$s={};for(var L=0;L<this.numMarks;L++){if(this.$3(L)){this.$s[L]=true}}if(this.$f()){this.$p=new ee(this)}},getMarkState:function(e){if(ss.isValue(this.$r)&&this.$r.length>e){return this.$r[e]}return this.$2(e)},getMarkLabelState:function(e){if(this.$f()){var L=this.get_lineDrawState().get_lineAttributes();for(var hy=0;hy<L.length;hy++){var hz=L[hy];if(hz.startIndex<=e&&e<=hz.endIndex){switch(hz.get_lineState()){case'lineStateHighlighted':{return(this.$g(e)?'markStateHighlighted':this.getMarkState(e))}case'lineStateSelected':{if(this.markTypeValue==='pie'&&!this.$g(e)){return this.getMarkState(e)}return'markStateSelected'}case'lineStateNormal':{return'markStateNormal'}}return'markStateNormal'}}}return this.getMarkState(e)},getMarkLabelProperty:function(e,L){if(this.markTypeValue==='text'){return this.getMarkProperty(e,L)}var hy=this.$h(L);if(hy===-1){return null}if(!ss.isValue(this.labelColumnsDict)||!ss.isValue(this.labelColumnsDict[e])){return null}var hz=this.labelColumnsDict[e];if(hz.length===1){return hz[0]}if(hy<hz.length){return hz[hy]}return null},getLeft:function(e){return this.$o[e]},getRight:function(e){return this.$u[e]},getAllMarkBounds:function(){var e=new Array(this.numMarks);var L=this.$5('tuple_id');var hy=this.$5('label_index');for(var hz=0;hz<this.numMarks;hz++){var hA=(L.isConst?L.constVal:L.vals[hz]);var hB=this.sceneInfo.getMarkBoundingBox(hA);var hC=(((hy.isConst?hy.constVal:hy.vals[hz])===-1)?null:this.sceneInfo.$6(hA));e[hz]={item1:hB,item2:hC}}return e},getMarkBounds:function(e){return this.$a(this.$8(e))},getMarkIndexFromTupleID:function(e){return this.tupleToIndexMap[e]},containsTuple:function(e){return ss.isValue(this.tupleToIndexMap[e])},getMarkLabelBounds:function(e){return this.sceneInfo.$6(this.$8(e))},getInsetPaneClipRect:function(e,L){var hy=2*L;var hz=this.getUserPaneRectByIndex(e);return{x:hz.x+L,y:hz.y+L,w:hz.w-hy,h:hz.h-hy}},getUserPaneRectByMark:function(e){if(this.hasUserPanes){return this.$l.$8(e)}else{return{x:0,y:0,w:this.paneRectXY.w,h:this.paneRectXY.h}}},getUserPaneRectByIndex:function(e){if(this.hasUserPanes){return this.$l.$7(e)}else{return{x:0,y:0,w:this.paneRectXY.w,h:this.paneRectXY.h}}},getUserPaneRectByTupleID:function(e){if(this.hasUserPanes){return this.$l.$8(this.getMarkIndexFromTupleID(e))}else{return{x:0,y:0,w:this.paneRectXY.w,h:this.paneRectXY.h}}},$c:function(e){if(!this.hasUserPanes){return this.get_markCount()}else{return this.$l.$5(e)}},$d:function(e){if(!this.hasUserPanes){return{firstMark:0,lastMark:this.get_markCount()-1}}else{return this.$l.$6(e)}},$b:function(e){if(!this.hasUserPanes){return 0}else{return this.$l.$4(e)}},$j:function(e){if(!this.hasUserPanes){var L=this.getUserPaneRectByIndex(0);var hy=this.get_markCount();for(var hz=0;hz<hy;++hz){e(hz,L)}}else{this.$l.$9(e)}},$k:function(e,L){if(!this.hasUserPanes){var hy=this.getUserPaneRectByIndex(0);for(var hz=0;hz<e.length;hz++){var hA=e[hz];L(hA,hy)}}else{this.$l.$a(e,L)}},getMarkInstanceOffsets:function(e){if(!this.isWrappedDomain||ss.isNullOrUndefined(this.$q)){return eB.$d}return this.$q[e]},getWorldInstanceOffsets:function(e,L){if(!this.isWrappedDomain){return eB.$d}var hy=Math.ceil((this.paneRectXY.x-L)/this.worldWidth);var hz=Math.floor((this.paneRectXY.x+this.paneRectXY.w-e)/this.worldWidth);var hA=hz-hy+1;var hB=new Array(hA);var hC=hy*this.worldWidth;for(var hD=0;hD<hA;hD++,hC+=this.worldWidth){hB[hD]=hC}return hB},getWorldOffsetBounds:function(e){var L=[];var hy=this.getWorldInstanceOffsets(e.x,e.x+e.w);var hz=hy.length;for(var hA=0;hA<hz;hA++){var hB=hy[hA];if(hB!==0){var hC=tab.RectXYUtil.offsetRectXY(e,ss.Int32.trunc(hB)|0,0);L.push(hC)}else{L.push(e)}}return L},isTupleSelected:function(e){return e!==0&&this.sceneInfo.$e(e)},isMarkSelected:function(e){var L=this.$8(e);return this.isTupleSelected(L)},isMarkImpliedSelected:function(e){var L=this.$8(e);return L!==0&&this.sceneInfo.$d(L)},isTupleHighlighted:function(e){return e!==0&&this.sceneInfo.$b(e)},isMarkHighlighted:function(e){var L=this.$8(e);return this.isTupleHighlighted(L)},isTupleVisible:function(e){return e!==0&&this.sceneInfo.$f(e)},isMarkFiltered:function(e){var L=this.$8(e);return L!==0&&this.sceneInfo.$c(L)},isLineSegmentVisible:function(e,L){return this.getMarkState(e)!=='markStateInvisible'&&this.getMarkState(L)!=='markStateInvisible'},isLineSegmentFiltered:function(e,L){return this.isMarkFiltered(e)||this.isMarkFiltered(L)},shouldStampThisShapeMark:function(e){if(this.$v){return true}if(ss.isNullOrUndefined(this.shapeMarkStampingDecision)){return false}if(e>=this.numMarks){return false}return this.shapeMarkStampingDecision[e]},isMarkEndPrimitive:function(e){var L=this.$7(e);return fx.isMarkFlagSet(L,'endprimitive')},isMarkDebug:function(e){var L=this.$7(e);return fx.isMarkFlagSet(L,'debug')},shouldShowMarker:function(e){if(ss.isNullOrUndefined(this.$s)){return this.$3(e)}return ss.keyExists(this.$s,e)},$9:function(e,L,hy){var hz;if(L>=0&&!this.isMarkPropertyConstant('color')&&this.markTypeValue==='text'){hz=this.getMarkColors(L)}else{hz=this.get_textStyleColumns()['text_style_color'][e]}if(L!==-1&&this.isMarkFiltered(L)){hy='colorOverrideFog'}return hz[hy]},thisDomainToPixelX:function(e){return eB.domainToPixelX(e,this.domainExtents,this.paneRectXY)},thisDomainToPixelY:function(e){return eB.domainToPixelY(e,this.domainExtents,this.paneRectXY)},$f:function(){return this.markTypeValue==='line'||this.markTypeValue==='area'||this.markTypeValue==='pie'},$g:function(e){return this.getMarkLabelProperty('label_one_per_group',e)},$3:function(e){var L=this.$7(e);return fx.isMarkFlagSet(L,'marked')||fx.isMarkFlagSet(L,'markediflabel')&&this.markHasLabel(e)&&!this.$g(e)},setUserPaneInfo:function(e){if(ss.isNullOrUndefined(e)){return}if(this.get_markType()==='text'){return}this.$l=new gW(e,this);this.userPaneCount=this.$l.$i;this.hasUserPanes=true},processColors:function(e){var L=this.$i();if(ss.isNullOrUndefined(e)||!ss.keyExists(this.columns,'color_idx')){if(L){this.$0(this.columns)}return}var hy=eB.buildColorTable(e,this.columns,this.foggedBackgroundColorValue,this.fogBlendFactorValue);var hz=null;if(L){hz=eB.buildOpaqueColorTable(hy)}var hA=this.$5('color_idx');var hB=(hA.get_isConstant()?1:this.numMarks);var hC=new Array(hB);this.columns['color']=hC;var hD=null;if(L){hD=new Array(hB);this.columns['opaque_color']=hD}for(var hE=0;hE<hB;hE++){var hF=(hA.isConst?hA.constVal:hA.vals[hE]);hC[hE]=hy[hF];if(L){hD[hE]=hz[hF]}}delete this.columns['color_idx'];if(ss.keyExists(this.constantColumnNamesSet,'color_idx')){delete this.constantColumnNamesSet['color_idx'];this.constantColumnNamesSet['color']=''}},$0:function(e){if(ss.keyExists(e,'color')){var L=e['color'];var hy=new Array(L.length);for(var hz=0;hz<L.length;++hz){hy[hz]=fx.createOpaqueColorCollection(L[hz])}e['opaque_color']=hy}},$6:function(e,L){var hy=this.columns[e];if(hy.length===1){L=0}return hy[L]},$5:function(e){return new hb(this.columns[e])},buildTupleLookup:function(){ss.clearKeys(this.tupleToIndexMap);var e=this.$5('tuple_id');var L=e.get_size();for(var hy=0;hy<L;hy++){this.tupleToIndexMap[(e.isConst?e.constVal:e.vals[hy])]=hy}},$7:function(e){return this.getMarkProperty('mark_flags',e)},$8:function(e){var L=this.$6('tuple_id',e);return ss.coalesce(L,0)},$a:function(e){return this.sceneInfo.getMarkBoundingBox(e)},$i:function(){return this.markTypeValue==='line'&&this.get_hasGlobalTransparency()},convertMapData:function(e){var L=ss.keyExists(e,'alpha')&&e['alpha'].length===1;var hy=1;if(L){hy=e['alpha'][0]/255}for(var hz=0;hz<eB.$3.length;hz++){var hA=eB.$3[hz];var hB={$:L&&(hA==='color'||hA==='text_style_color')};eB.$0(hA,e,ss.mkdel({useAlpha:hB,$this:this},function(hT){var hU=tab.ColorModel.fromArgbInt(hT);if(this.useAlpha.$){hU=new tab.ColorModel(hU.get_r(),hU.get_g(),hU.get_b(),hy)}return fx.createColorCollection(hU,this.$this.foggedBackgroundColorValue,this.$this.fogBlendFactorValue)}))}eB.$0('shape_id',e,function(hT){return fx.shapeMapping[hT]||hT});eB.$0('alpha',e,function(hT){return hT/255});if(ss.isValue(this.paneRectXY)&&ss.isValue(this.domainExtents)&&this.domainExtents.w!==0&&this.domainExtents.h!==0){var hC=_.keys(eB.$c);for(var hD=0;hD<hC.length;hD++){var hE=hC[hD];var hF={$:1};var hG={$:0};var hH=hE+'_int';if(ss.contains(eB.$6,hE)){var hI=100*Math.max(1,this.paneRectXY.w);hF.$=this.domainExtents.w/hI;hG.$=this.domainExtents.x}else if(ss.contains(eB.$7,hE)){var hJ=100*Math.max(1,this.paneRectXY.h);hF.$=this.domainExtents.h/hJ;hG.$=this.domainExtents.y}else{hF.$=(eB.$c[hE].y-eB.$c[hE].x)/32767;hG.$=eB.$c[hE].x}eB.$0(hH,e,ss.mkdel({scale:hF,offset:hG},function(hT){return(ss.isValue(hT)?(hT*this.scale.$+this.offset.$):null)}));if(ss.keyExists(e,hH)){e[hE]=e[hH];delete e[hH]}}var hK={x:0,y:0,w:this.paneRectXY.w,h:this.paneRectXY.h};for(var hL=0;hL<eB.$6.length;hL++){var hM=eB.$6[hL];eB.$0(hM,e,ss.mkdel(this,function(hT){return eB.domainToPixelX(hT,this.domainExtents,hK)}))}for(var hN=0;hN<eB.$5.length;hN++){var hO=eB.$5[hN];eB.$0(hO,e,ss.mkdel(this,function(hT){return eB.domainToPixelWidth(hT,this.domainExtents,this.paneRectXY)}))}for(var hP=0;hP<eB.$7.length;hP++){var hQ=eB.$7[hP];eB.$0(hQ,e,ss.mkdel(this,function(hT){return eB.domainToPixelY(hT,this.domainExtents,hK)}))}for(var hR=0;hR<eB.$4.length;hR++){var hS=eB.$4[hR];eB.$0(hS,e,ss.mkdel(this,function(hT){return eB.domainToPixelHeight(hT,this.domainExtents,this.paneRectXY)}))}}},$4:function(e,L){var hy={};if(ss.keyExists(e,'font')){var hz=e['font'];var hA=hz.uBu.length;var hB=new Array(hA);for(var hC=0;hC<hA;++hC){hB[hC]=eB.$1(e,hC)}hy['font']=hB;var hD=_.keys(e);for(var hE=0;hE<hD.length;hE++){var hF=hD[hE];if(!ss.contains(eB.$8,hF)){var hG=e[hF];var hH=new Array(hG.uBu.length);for(var hI=0;hI<hH.length;hI++){hH[hI]=hG.uBu[hI]}hy[hF]=hH}}if(L){var hJ=this.getMarkProperty('alpha',0);if(ss.isValue(hJ)){hy['alpha']=[hJ*255]}}this.convertMapData(hy);eB.$0('text_orientation',hy,function(hK){return eB.$2(hK)});eB.$0('text_alignment',hy,function(hK){var hL='start';var hM=hK;if(hM===2){hL='end'}return hL})}return hy},prepareLeftRight:function(){this.$o=new Array(this.numMarks);for(var e=0;e<this.numMarks;++e){this.$o[e]=-1}this.$u=new Array(this.numMarks);for(var L=0;L<this.numMarks;++L){this.$u[L]=-1}var hy=0;var hz=this.$5('mark_flags');for(var hA=0;hA<this.numMarks;hA++){var hB=(hz.isConst?hz.constVal:hz.vals[hA]);if(!fx.isMarkFlagSet(hB,'end')){this.$u[hA]=hA+1;this.$o[hA+1]=hA}if(fx.isMarkFlagSet(hB,'closedprimitive')){this.$u[hA]=hy;this.$o[hy]=hA}if(fx.isMarkFlagSet(hB,'endprimitive')){hy=hA+1}}},setupBoundingBoxes:function(){var e=this.$5('tuple_id');var L={};var hy=new Array(this.numMarks);this.$j(ss.mkdel(this,function(hH,hI){var hJ=eD.getMarkBoundingBox(hH,this,hI);L[(e.isConst?e.constVal:e.vals[hH])]=hJ;hy[hH]=hJ}));if(this.markTypeValue==='pie'){var hz={};var hA=new ee(this);var hB=hA.get_lineAttributes();for(var hC=0;hC<hB.length;hC++){var hD=hB[hC];var hE=L[(e.isConst?e.constVal:e.vals[hD.startIndex])];for(var hF=hD.startIndex+1;hF<=hD.endIndex;++hF){hE=tab.RectXYUtil.union(hE,L[(e.isConst?e.constVal:e.vals[hF])])}for(var hG=hD.startIndex;hG<=hD.endIndex;++hG){hz[(e.isConst?e.constVal:e.vals[hG])]=hE}}this.sceneInfo.$0(this,hz)}this.$1(hy);this.sceneInfo.$2(this,L)},setupCustomShapePositions:function(){if(this.markTypeValue==='shape'&&this.sceneInfo.get_customShapes().length>0){var e=[];var L=[];var hy=this.$5('shape_id');var hz=this.$5('x');var hA=this.$5('y');var hB=this.$5('size');for(var hC=0;hC<this.numMarks;++hC){if(fx.isCustomShape((hy.isConst?hy.constVal:hy.vals[hC]))){var hD=(hB.isConst?hB.constVal:hB.vals[hC])/2;e[hC]=Math.round((hz.isConst?hz.constVal:hz.vals[hC])-(hD+1));L[hC]=Math.round((hA.isConst?hA.constVal:hA.vals[hC])-(hD+1))}}if(e.length>0){this.columns['left']=e;this.columns['top']=L}}},setupShapeMarkStampingMap:function(){if(this.numMarks<eB.shapeMarkStampingRatio){return}if(tab.BrowserSupport.get_isIE()){this.shapeMarkStampingDecision=null;if(!this.sceneInfo.get_isSingleUserPane()){return}if(this.clipCase!==0){return}this.set_skipClipping(true)}var e=this.isMarkPropertyConstant('color');var L=this.isMarkPropertyConstant('size');var hy=this.isMarkPropertyConstant('shape_id');if(hy){var hz=this.getMarkProperty('shape_id',0);if(!eB.isSupportedStampShape(hz)){return}if(e&&L){this.$v=true;return}}var hA=this.$5('size');var hB=this.$5('shape_id');var hC={};var hD=new Array(this.numMarks);for(var hE=0;hE<this.numMarks;hE++){hD[hE]=false;var hF=[];if(!L){hF.push((hA.isConst?hA.constVal:hA.vals[hE]))}if(!hy){var hG=(hB.isConst?hB.constVal:hB.vals[hE]);if(!eB.isSupportedStampShape(hG)){continue}hF.push(hG)}if(!e){var hH=this.getMarkColors(hE);hF.push(hH['colorOverrideNone'])}var hI=hF.toString();if(!ss.keyExists(hC,hI)){hC[hI]=[]}hC[hI].push(hE)}var hJ=false;var hK=0;var hL=_.keys(hC);for(var hM=0;hM<hL.length;hM++){var hN=hL[hM];var hO=hC[hN];if(hO.length>=eB.shapeMarkStampingRatio){for(var hP=0;hP<hO.length;hP++){var hQ=hO[hP];hD[hQ]=true;hK++}hJ=true}}if(hK===this.numMarks){this.$v=true;this.shapeMarkStampingDecision=null}else if(hJ){this.shapeMarkStampingDecision=hD}else{this.shapeMarkStampingDecision=null}},calcCellClip:function(){var e=0;var L=fx.isPaneFlagSet(this.get_paneFlags(),'clip-to-cell-x');var hy=fx.isPaneFlagSet(this.get_paneFlags(),'clip-to-cell-y');if(L&&hy){e=3}else if(L){e=1}else if(hy){e=2}return e},parseTextInfo:function(e,L){if(ss.isValue(e.MbY)){this.textRunColumnsDict={};var hy=_.keys(e.MbY);for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];var hB=e.MbY[hA];var hC=new Array(hB.uBu.length);for(var hD=0;hD<hC.length;hD++){hC[hD]=hB.uBu[hD]}this.textRunColumnsDict[hA]=hC}this.convertMapData(this.textRunColumnsDict)}if(ss.isValue(e.Smu)){this.textStyleColumnsDict=this.$4(e.Smu,!L)}},$1:function(e){if(!this.isWrappedDomain){return}var L=e.length;this.$q=new Array(L);for(var hy=0;hy<L;hy++){var hz=e[hy];this.$q[hy]=this.getWorldInstanceOffsets(hz.x+this.paneRectXY.x,hz.x+hz.w+this.paneRectXY.x)}},$h:function(e){return this.$6('label_index',e)},ensureLinePixelAlignment:function(){var e=this.$5('size');var L=this.$5('x');var hy=this.$5('y');var hz=this.numMarks;for(var hA=0;hA<hz;hA++){var hB=this.getRight(hA);if(hB!==-1){var hC=(e.isConst?e.constVal:e.vals[hA]);var hD=(e.isConst?e.constVal:e.vals[hB]);if(tab.DoubleUtil.isApproximatelyEqual(hC,hD)&&Math.round(hC)%2===1){var hE=(L.isConst?L.constVal:L.vals[hA]);var hF=(hy.isConst?hy.constVal:hy.vals[hA]);var hG={x:hE,y:hF};var hH=(L.isConst?L.constVal:L.vals[hB]);var hI=(hy.isConst?hy.constVal:hy.vals[hB]);var hJ={x:hH,y:hI};bb.modifyLineEndpoints(hG,hJ,hC);L.setValue(hA,hG.x);hy.setValue(hA,hG.y);if(this.getRight(hB)===-1){L.setValue(hB,hJ.x);hy.setValue(hB,hJ.y)}}}}},$e:function(){this.scaleMarksInX=fx.isPaneFlagSet(this.$t,'enable-scale-x');this.scaleMarksInY=fx.isPaneFlagSet(this.$t,'enable-scale-y');this.useCellClipForSelection=fx.isPaneFlagSet(this.$t,'clip-to-cell-for-selection');this.paneHasCellsX=fx.isPaneFlagSet(this.$t,'has-cells-x');this.paneHasCellsY=fx.isPaneFlagSet(this.$t,'has-cells-y')},$2:function(e){var L=[];L.push(this.$8(e));var hy=this.sceneInfo.computeTupleStates(L);return hy[0]}});ss.initClass(fa,a,{populateColumns:function(e){var L=fa.$0(e);var hy=_.keys(L);for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];this.columns[hA]=L[hA];this.constantColumnNamesSet[hA]=''}this.isWrappedDomain=ss.keyExists(L,'wrap_domain')&&L['wrap_domain'][0];var hB=_.keys(e.GKA);for(var hC=0;hC<hB.length;hC++){var hD=hB[hC];this.columns[hD]=eB.createDataArray(e.GKA[hD],this.paneMarks.QNi,this.numMarks)}},addLabelInfo:function(e,L){this.labelColumnsDict=fa.$0(e);var hy=fa.getNumPaneItems(L);var hz=ss.getEnumerator(Object.keys(e.GKA));try{while(hz.moveNext()){var hA=hz.current();this.labelColumnsDict[hA]=eB.createDataArray(e.GKA[hA],L.QNi,hy)}}finally{hz.dispose()}this.convertMapData(this.labelColumnsDict);var hB=[];if(ss.isValue(this.labelColumnsDict['tuple_id'])){var hC=new Array(this.numMarks);for(var hD=0;hD<this.numMarks;hD++){hC[hD]=-1}this.columns['label_index']=hC;var hE=this.labelColumnsDict['tuple_id'];for(var hF=0;hF<hE.length;hF++){var hG=this.tupleToIndexMap[hE[hF]];if(ss.isValue(hG)){hC[hG]=hF}hB.push(hG)}}var hH=this.$5('tuple_id');var hI={};this.$k(hB,ss.mkdel(this,function(hK,hL){var hM=eD.$1('label',hK,this,hL);hI[(hH.isConst?hH.constVal:hH.vals[hK])]=hM}));this.sceneInfo.$1(this,hI);var hJ=(ss.keyExists(this.labelColumnsDict,'pane_flags')?this.labelColumnsDict['pane_flags'][0]:0);this.truncateLabelToCell=fx.isPaneFlagSet(hJ,'clip-to-cell-x');this.parseTextInfo(e,true)}},eB);fa.$ctor1.prototype=fa.prototype;ss.initClass(cb,a,{get_dataStore:function(){return this.$x},$w:function(){var e=this.$x['Panes'];var L={};L.fDN=this.paneMarks.fDN;var hy=e[0];var hz=hy['DrawPanes'];var hA=null;for(var hB=0;hB<hz.length;hB++){var hC=hz[hB];var hD=hC;if(ss.keyExists(hD,'StartIndex')){hA=hD}}L.QNi=hA['StartIndex'];L.sDT=hA['EndIndex'];var hE=hA['PageIndexes'];L.cPa=new Array(hE.length);for(var hF=0;hF<hE.length;++hF){L.cPa[hF]=hE[hF]}L.wyR=cb.$7(hA['PixelExtents']);L.NQL=cb.$1(hA['DomainExtents']);L.Ssk={};L.DGi=cb.$1(hA['MapDomainExtents']);if(ss.keyExists(hA,'DomainOrigin')){var hG=hA['DomainOrigin'];L.Ssk.Ig_=hG['X'];L.Ssk.jPH=hG['Y']}else{L.Ssk.Ig_=0;L.Ssk.jPH=0}return L}},fa);cb.$ctor1.prototype=cb.prototype;ss.initClass(dY,a,{updateFilterProperties:function(e){this.titleHTML=e.titleHTML;this.format=e.format;this.backgroundColor=e.backgroundColor},hideEmptyTitlebar:function(){return ss.isNullOrEmptyString(tableau.format.formatColumnDisplayName(this.oFilter,false))},updateTitleBar:function(){this.domTitleBar.innerHTML=this.titleHTML;cL.cleanUpFontFamilyStyles($(this.domTitleBar))},resetTitleSize:function(){if(ss.isValue(this.domTitleBar)){$(this.domTitleBar).css({height:'auto',width:'auto'})}}},Object);ss.initClass(cc,a,{setRangeType:function(e,L){var hy,hz;var hA;switch(e){case'curr':{hy=0;hz=0;hA=true;break}case'todate':{hy=0;hz=0;hA=false;break}case'last':{hy=-1;hz=-1;hA=true;break}case'next':{hy=1;hz=1;hA=true;break}case'lastn':{hy=1-L;hz=0;hA=true;break}case'nextn':{hy=0;hz=L-1;hA=true;break}default:{return}}this.firstPeriod=hy;this.lastPeriod=hz;this.isFutureIncluded=hA},getRangeType:function(){var e=this.isFutureIncluded;var L=this.firstPeriod;var hy=this.lastPeriod;var hz;if(L===0&&hy===0&&e){hz='curr'}else if(L===0&&hy===0&&!e){hz='todate'}else if(L===-1&&hy===-1&&e){hz='last'}else if(L===1&&hy===1&&e){hz='next'}else if(L<0&&hy===0&&e){hz='lastn'}else if(L===0&&hy>0&&e){hz='nextn'}else if(L>0&&hy>0&&!e){hz='invalid'}else if(L>hy){hz='invalid'}else if(L===hy){hz='other'}else{hz='othern'}return hz},adjustLastDate:function(e){var L=null;switch(this.periodType){case'year':case'quarter':case'month':case'week':case'day':{L=new Date(e.getFullYear(),e.getMonth(),e.getDate());L=new Date(L.getTime()-tab.DateUtil.oneSecond);break}case'hour':case'minute':case'second':{L=new Date(e.getTime()-tab.DateUtil.oneSecond);break}}return L},getPeriods:function(){return this.lastPeriod-this.firstPeriod+1},roundToPeriod:function(e,L,hy){var hz=e.getMonth();var hA=e.getFullYear();switch(this.periodType){case'year':{if(hz<L){hA-=1}return new Date(hA,L,1,12)}case'quarter':{var hB;if(hz>=L){hB=Math.floor((hz-L)/3);hz=L+hB*3}else{hB=Math.floor((hz+12-L)/3);var hC=(L+hB*3)%12;if(hC===0){hC=12}if(hC>hz){--hA}hz=hC}return new Date(hA,hz,1,12)}case'month':{return new Date(hA,hz,1,12)}case'week':{var hD=(7+(1+e.getDay())-hy)%7;var hE=new Date(hA,hz,e.getDate(),12);return new Date(hE.getTime()-hD*tab.DateUtil.oneDay)}case'day':{return new Date(hA,hz,e.getDate(),12)}case'hour':{return new Date(hA,hz,e.getDate(),e.getHours())}case'minute':{return new Date(hA,hz,e.getDate(),e.getHours(),e.getMinutes())}case'second':{return new Date(hA,hz,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())}}return null},getEffectiveAnchor:function(){return(ss.staticEquals(this.anchorDateTime,null)?new Date:this.anchorDateTime)},getAnchorPeriod:function(e){return this.roundToPeriod(e,this.fy,this.startOfWeek)},evaluateFirstDate:function(e){return tab.DateUtil.adjustDateByPeriod(e,this.periodType,this.firstPeriod)},evaluateLastDate:function(e,L){var hy=tab.DateUtil.adjustDateByPeriod(L,this.periodType,this.lastPeriod+1);var hz=this.adjustLastDate(hy);if(!this.isFutureIncluded){hz=new Date(Math.min(e.getTime(),hz.getTime()))}return hz},setPYear:function(){this.setPeriod('year')},setPQuarter:function(){this.setPeriod('quarter')},setPMonth:function(){this.setPeriod('month')},setPWeek:function(){this.setPeriod('week')},setPDay:function(){this.setPeriod('day')},setPHour:function(){this.setPeriod('hour')},setPMinute:function(){this.setPeriod('minute')},setPSecond:function(){this.setPeriod('second')},setRange:function(e,L){L=L||0;if(e!==this.rangeType){if(ss.isValue(this._applyTimer)){window.clearTimeout(ss.unbox(this._applyTimer));this._applyTimer=null}this.rangeType=e;this.setRangeType(e,L);this._applyTimer=window.setTimeout(ss.mkdel(this,this.applyChanges),this.UPDATE_DELAY)}this.setRangeUI(e,L);this.setPreviewUI()},applyChanges:null,setRangeUI:null,setPeriod:function(e){if(ss.isValue(this._applyTimer)){window.clearTimeout(ss.unbox(this._applyTimer));this._applyTimer=null}this.setPeriodUI(e);if(e!==this.periodType){if(this.oFilter.noTime&&e==='day'){dojo.style(this.radioTodate,'display','none');dojo.style(this.textTodate,'display','none')}else{dojo.style(this.radioTodate,'display','');dojo.style(this.textTodate,'display','')}this.periodType=e;this.setPreviewUI();this._applyTimer=window.setTimeout(ss.mkdel(this,this.applyChanges),this.UPDATE_DELAY*2)}},onTyping:function(e){if(ss.isValue(this._applyTimer)){window.clearTimeout(ss.unbox(this._applyTimer));this._applyTimer=null}e.value=e.value.replace(new RegExp('/[^0-9]/g'),'');if(e.value.length>0&&parseInt(e.value)!==this.oFilter.rangeN){this.rangeN=parseInt(e.value);this.rangeType=(ss.referenceEquals(e,this.inputLastn)?'lastn':'nextn');this.setRangeType(this.rangeType,this.rangeN);this._applyTimer=window.setTimeout(ss.mkdel(this,this.applyChanges),this.UPDATE_DELAY)}this.setPreviewUI()},updateRangeButtons:null,setPeriodUI:function(e){var L;var hy;var hz;this.updateRangeButtons(e);if(ss.staticEquals(this.anchorDateTime,null)){hz=dZ.get_nonAnchoredDescriptions()[e]}else{hz=dZ.get_anchoredDescriptions()[e]}this.textLast.innerHTML=hz['last'];this.textCurr.innerHTML=hz['curr'];this.textNext.innerHTML=hz['next'];var hA=hz['lastn'].split('%');this.textLastn1.innerHTML=hA[0];this.textLastn2.innerHTML=hA[1];var hB=hz['nextn'].split('%');this.textNextn1.innerHTML=hB[0];this.textNextn2.innerHTML=hB[1];this.textTodate.innerHTML=hz['todate'];L=dojo.style(this.textLastn1,'width');hy=dojo.style(this.textNextn1,'width');if(L>hy){dojo.style(this.textNextn1,'width',L+'px')}else if(L<hy){dojo.style(this.textLastn1,'width',hy+'px')}},$0:function(){var e=null;if(ss.isValue(this.oFilter)&&ss.isValue(this.oFilter.default_format)){e=this.oFilter.default_format}return((ss.isValue(e)&&e.length===3)?e[0]:'*M/d/yyyy')},$1:function(){var e=null;if(ss.isValue(this.oFilter)&&ss.isValue(this.oFilter.default_format)){e=this.oFilter.default_format}return((ss.isValue(e)&&e.length===3)?e[1].substr(1):'hh:nn:ss ampm')},$2:function(){var e=null;if(ss.isValue(this.oFilter)&&ss.isValue(this.oFilter.default_format)){e=this.oFilter.default_format}return((ss.isValue(e)&&e.length===3)?e[2]:'en_US')},setPreviewUI:function(){this.domPreview.innerHTML=this.getPreviewMessage()},getPreviewMessage:function(){var e=this.getEffectiveAnchor();var L=this.$0();var hy=this.$2();var hz=this.$1();var hA;var hB=this.getAnchorPeriod(e);var hC=this.evaluateFirstDate(hB);var hD=L+' '+hz;var hE=this.evaluateLastDate(e,hB);if(this.isRangeValid(hC,hE)){var hF=new Date(Date.UTC(hC.getFullYear(),hC.getMonth(),hC.getDate(),hC.getHours(),hC.getMinutes(),hC.getSeconds()));var hG=new Date(Date.UTC(hE.getFullYear(),hE.getMonth(),hE.getDate(),hE.getHours(),hE.getMinutes(),hE.getSeconds()));var hH=tableau.format.formatCustomJSDateTime(hF,L,0,null,hy,null,null,null);var hI=tableau.format.formatCustomJSDateTime(hG,L,0,null,hy,null,null,null);if(this.periodType==='hour'||this.periodType==='minute'||this.periodType==='second'||this.periodType==='day'&&!this.isFutureIncluded){var hJ=hD;var hK=(ss.referenceEquals(hH,hI)?hz:hD);hH=tableau.format.formatCustomJSDateTime(hF,hJ,0,null,hy,null,null,null);hI=tableau.format.formatCustomJSDateTime(hG,hK,0,null,hy,null,null,null)}hA=tab.Strings.RelDateFilterPreview(hH,hI)}else{hA='Invalid relative date';if(ss.isValue(this._applyTimer)){window.clearTimeout(ss.unbox(this._applyTimer));this._applyTimer=null}}return hA},isRangeValid:function(e,L){var hy=true;if(isNaN(e.getTime())||isNaN(L.getTime())){hy=false}else if(this.firstPeriod>this.lastPeriod||this.firstPeriod>0&&!this.isFutureIncluded){hy=false}else if(!!!e||!!!L){hy=false}else if(e<this.lowestAllowedDate||L>this.highestAllowedDate){hy=false}return hy}},dY);ss.initClass(cd,a,{setDateRange:function(e,L){this.$u=cd.$2(e);this.$s=cd.$2(L);this.$v=cd.$4(this.$u);this.$t=cd.$4(this.$s)},show:function(e,L){if(ss.isValue(e)){this.$p=cd.$4(cd.$2(e));this.$B=cd.$2(L||e)}this.$l();return this.get_element().show().width(this.get_element().width())},hide:function(){this.$F=false;this.get_element().height('auto');return this.get_element().hide()},positionCalendarByElement:function(e){ba.getViewport(ss.mkdel(this,function(L){var hy=e.offset();var hz=this.get_element().outerWidth();var hA=this.getMaxHeight();var hB=e.outerHeight();hy=this.$8(L,hB,hy,hz,hA);this.get_element().offset(hy)}))},$8:function(e,L,hy,hz,hA){var hB=tab.DoubleUtil.roundToInt(hy.left);var hC=tab.DoubleUtil.roundToInt(hy.top);var hD=e.getDocumentViewport({x:hB,y:hC});var hE=hD.l+hD.w;var hF=hD.t+hD.h;if(hC+L-1+hA<=hF){hC+=L-1;hB=cd.$1(hB,hz,hD.l,hE)}else if(hC-(hA-1)>hD.t){this.useMaxHeight();hC-=hA-1;hB=cd.$1(hB,hz,hD.l,hE)}else if(hB-(hz-1)>hD.l){hB-=hz-1;hC=cd.$1(hC,hA,hD.t,hF)}else{var hG=hB;hB=hD.l;hB=cd.$1(hB,hz,hD.l,hG);hC=cd.$1(hC,hA,hD.t,hF)}return{left:hB,top:hC}},getMaxHeight:function(){var e=this.get_element().find('.tab-datepicker-month-table tbody tr');return this.get_element().outerHeight()+Math.round(e.outerHeight()*(6-e.length))},useMaxHeight:function(){if(!this.$F){this.$F=true;this.$l();this.get_element().height(this.get_element().height())}},$d:function(){var e=$('<div>').addClass('tab-datepicker-header');this.$x=$('<span>').addClass('tab-datepicker-header-text').appendTo(e);this.$A=$('<span>').addClass('tab-datepicker-header-button').addClass('tab-datepicker-prev-month-button').appendTo(e).click(ss.mkdel(this,this.$j));this.$z=$('<span>').addClass('tab-datepicker-header-button').addClass('tab-datepicker-next-month-button').appendTo(e).click(ss.mkdel(this,this.$i));return e},$c:function(){var e=$('<div>').addClass('tab-datepicker-footer');$('<span>').addClass('tab-datepicker-today-label').html(ss.formatString(this.$D,"<span class='tab-datepicker-today-date'></span>")).appendTo(e);this.$E=$('.tab-datepicker-today-date',e).click(ss.mkdel(this,this.$6));return e},$e:function(){this.$w=$('<table>').addClass('tab-datepicker-month-table');this.$w.on('click','.tab-datepicker-day-cell',ss.mkdel(this,this.$7));return this.$w},$7:function(e){var L=$(e.target);if(!L.hasClass('tab-disabled')){this.$h(L)}},$h:function(e){this.$w.find('.tab-datepicker-day-cell-selected').removeClass('tab-datepicker-day-cell-selected');e.addClass('tab-datepicker-day-cell-selected');var L=e.data();this.$B=new Date(L['year'],L['month'],L['dayOfMonth']);var hy=new Date(Date.UTC(L['year'],L['month'],L['dayOfMonth']));this.$k(hy)},$k:function(e){this.get_element().trigger('dateSelected',[e])},$j:function(e){if(this.$g()){if(this.$p.getMonth()===0){if(this.$p.getFullYear()>1){this.$p.setMonth(11);this.$p.setFullYear(this.$p.getFullYear()-1)}}else{this.$p.setMonth(this.$p.getMonth()-1)}this.$l()}},$i:function(e){if(this.$f()){if(this.$p.getMonth()===11){this.$p.setMonth(0);this.$p.setFullYear(this.$p.getFullYear()+1)}else{this.$p.setMonth(this.$p.getMonth()+1)}this.$l()}},$g:function(){return ss.isNullOrUndefined(this.$v)||this.$p>this.$v},$f:function(){return ss.isNullOrUndefined(this.$t)||this.$p<this.$t},$6:function(e){var L=cd.$3(new Date);if(!this.$9(L)){this.$k(L)}},$l:function(){this.$n();this.$o();this.$m();this.get_element().prop('unselectable','on');this.get_element().find('*').prop('unselectable','on');this.get_element().trigger('calendarUpdated')},$n:function(){this.$x.text(this.$y(cd.$3(this.$p)));this.$A.toggleClass('tab-disabled',!this.$g());this.$z.toggleClass('tab-disabled',!this.$f())},$m:function(){this.$E.text(this.$r(cd.$3(new Date)));this.$E.toggleClass('tab-disabled',this.$a(cd.$4(new Date)))},$b:function(e){return $('<td>').addClass('tab-datepicker-day-cell').text(e.getDate().toString()).data(ss.mkdict(['year',e.getFullYear(),'month',e.getMonth(),'dayOfMonth',e.getDate()])).toggleClass('tab-datepicker-day-cell-today',cd.$5(e,new Date)).toggleClass('tab-datepicker-day-cell-selected',!!this.$B&&cd.$5(e,this.$B)).toggleClass('tab-datepicker-day-cell-othermonth',e.getMonth()!==this.$p.getMonth()).toggleClass('tab-disabled',this.$9(e))},$9:function(e){return ss.isValue(this.$u)&&e<this.$u||ss.isValue(this.$s)&&e>this.$s},$a:function(e){return ss.isValue(this.$v)&&e<this.$v||ss.isValue(this.$t)&&e>this.$t},$o:function(){var e=(new Date(this.$p.getFullYear(),this.$p.getMonth(),1)).getDay();var L;var hy,hz;var hA,hB,hC;this.$w.html('');hA=$('<thead>').appendTo(this.$w);hC=$('<tr>').appendTo(hA);L=this.$q;do{$('<th>').addClass('tab-datepicker-header-cell').text(this.$C[L]).appendTo(hC);L=cd.$0(L,1)}while(L!==this.$q);hB=$('<tbody>').appendTo(this.$w);hC=$('<tr>').appendTo(hB);hy=new Date(this.$p.getFullYear(),this.$p.getMonth(),1);hy.setDate(hy.getDate()-cd.$0(e,-this.$q));hz=new Date(this.$p.getFullYear(),this.$p.getMonth()+1,1);hz.setDate(hz.getDate()+cd.$0(this.$q,-hz.getDay()));while(!cd.$5(hy,hz)){this.$b(hy).appendTo(hC);hy.setDate(hy.getDate()+1);if(hy.getDay()===this.$q&&!cd.$5(hy,hz)){hC=$('<tr>').appendTo(hB)}}if(this.$F){var hD=hB.find('tr');if(hD.length<6){var hE=hD.height();for(var hF=hD.length;hF<6;++hF){$("<tr><td class='tab-datepicker-day-cell'></td></tr>").height(hE).insertAfter(hD.last())}}}}},spiff.Widget,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(ce,a,{});ss.initClass(cf,a,{layout:function(e){var L=tabBootstrap.ViewerBootstrap.get_instance().getViewport();var hy=this.node.style;var hz=this.domNode.style;hz.top=0+'px';hz.left=0+'px';hy.width=L.w+'px';hy.height=L.h+'px';var hA=tabBootstrap.ViewerBootstrap.get_instance().getViewport();if(L.w!==hA.w){hy.width=hA.w+'px'}if(L.h!==hA.h){hy.height=hA.h+'px'}}},dijit.DialogUnderlay);ss.initInterface(dJ,a,{attach:null,detach:null,disposeTooltip:null,shownTooltipIsStatic:null,isHoverAllowed:null,shouldShowCommandButtons:null,handleUbertipMenuToggle:null,handleUbertipMenuClose:null,hoverOverObject:null,hoverOverWhitespace:null,multiSelectComplete:null,singleSelectComplete:null,onPanningOrDragging:null,onScroll:null,mouseDown:null});ss.initClass(cg,a,{attach:function(){},detach:function(){},dispose:function(){},disposeTooltip:function(){},shownTooltipIsStatic:function(){return true},isHoverAllowed:function(e){return true},shouldShowCommandButtons:function(){return true},handleUbertipMenuToggle:function(e){},handleUbertipMenuClose:function(){},hoverOverObject:function(e,L,hy,hz){},hoverOverWhitespace:function(e){},multiSelectComplete:function(e){},singleSelectComplete:function(e){},onPanningOrDragging:function(){},onScroll:function(){},mouseDown:function(e,L){}},null,[dJ,ss.IDisposable]);ss.initClass(ch,a,{renderVisualListHelper:function(e,L){var hy=e.get_visualListPM().tOA;this.renderDrawItems(hy,e,L,null)},renderDrawItems:function(e,L,hy,hz){var hA=this.get_currentContext();var hB=hA.get_numberSavedStates();var hC=4;for(var hD=0;hD<e.length;++hD){var hE=e[hD];if(true&&hD<hC&&hE.VzB==='jp$'){}else if(hE.VzB==='rOX'){var hF=hE;this.$7(L,hF,hy,hz)}else{this.$a(hA,hE,hy,null,hz,false)}}while(hA.get_numberSavedStates()>hB){hA.restore()}},renderVisualList:function(e,L){if(ss.isValue(e.get_defaultBackgroundColor())){this.get_currentContext().set_shapeFillStyle(e.get_defaultBackgroundColor());this.get_currentContext().fillRect(this.get_visibleRect().x,this.get_visibleRect().y,this.get_visibleRect().w,this.get_visibleRect().h)}this.renderVisualListHelper(e,L)},renderDrawItemList:function(e){this.renderDrawItems(e,null,null,null)},$9:function(e){var L=e.get_visualListPM().oqX;var hy=e.get_visualListPM().tOA;for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];if(hA.VzB==='Osj'||hA.VzB==='nuS'){this.renderDrawItemDefaultOptions(this.get_currentContext(),hA)}else if(hA.VzB==='uEs'){var hB=this.get_currentCanvas().width;var hC=this.get_currentCanvas().height;var hD=hA;var hE=hD.WzG;if(ss.contains(ch.$d,L)){if(Math.abs(hE[3]-hE[1])>=hC){var hF={};hF.VzB=hA.VzB;hF.WzG=[0,0,0,hC];this.renderDrawItemDefaultOptions(this.get_currentContext(),hF);hF.WzG[0]+=hB-1;hF.WzG[2]+=hB-1;this.renderDrawItemDefaultOptions(this.get_currentContext(),hF);return}}else if(ss.contains(ch.$e,L)){if(Math.abs(hE[2]-hE[0])>=this.get_currentCanvas().width){var hG={};hG.VzB=hA.VzB;hG.WzG=[0,0,hB,0];this.renderDrawItemDefaultOptions(this.get_currentContext(),hG);hG.WzG[1]+=hC-1;hG.WzG[3]+=hC-1;this.renderDrawItemDefaultOptions(this.get_currentContext(),hG);return}}}}},renderDrawItemDefaultOptions:function(e,L){this.$a(e,L,null,null,null,false)},$a:function(e,L,hy,hz,hA,hB){if(!ss.isValue(e)||!ss.isValue(L)){return}switch(L.VzB){case'Osj':{{var hC=L;e.set_lineJoin((ss.isValue(hC.ObK)?bb.toCanvasLineJoin(hC.ObK):gg.defaultLineJoin));var hD='butt';var hE=hC.vWy||gg.defaultLinePattern;if(hE!=='dashed'&&hE!=='dotted'){hD=(ss.isValue(hC.pXS)?bb.toCanvasLineCap(hC.pXS):gg.defaultLineCap)}e.set_lineCap(hD);e.set_linePattern(hE);e.set_strokeStyle(tab.ColorModel.convertColorForCanvas(hC.YhU)||'rgb(0,0,0)');e.set_lineWidth(hC.Cwi||1)}break}case'nuS':{{var hF=L;e.set_shapeFillStyle(tab.ColorModel.convertColorForCanvas(hF.YhU))}break}case'uXb':{{var hG=L;var hH=hG.WAe;var hI=hG.Dwb;var hJ=e.createLinearGradient(hH.thj,hH.RAC,hI.thj,hI.RAC);hJ.addColorStop(0,tab.ColorModel.convertColorForCanvas(hG.xJf));hJ.addColorStop(1,tab.ColorModel.convertColorForCanvas(hG.$pO));e.set_shapeFillStyle(hJ)}break}case'bsq':{{var hK=L;if(hK.WzG.length!==4){return}var hL=ci.rectXYFromDrawRect(hK.WzG);e.strokeRect(hL.x,hL.y,hL.w,hL.h)}break}case'jpw':{{var hM=L;if(hM.WzG.length!==4){return}var hN=ci.rectXYFromDrawRect(hM.WzG);e.fillRect(hN.x,hN.y,hN.w,hN.h)}break}case'MkS':{{ch.$1(e,L,false)}break}case'NLY':{{ch.$1(e,L,true)}break}case'uEs':{{var hO=L;var hP=hO.WzG;bb.strokePath(e,hP,false,true)}break}case'Bhw':{{var hQ=L;bb.strokePath(e,hQ.WzG,true,true)}break}case'Qdw':{{var hR=L;bb.fillPath(e,hR.WzG,true)}break}case'__v':{{ch.$2(e,L,true)}break}case'bUP':{{ch.$2(e,L,false)}break}case'$OC':{{var hS=L;if(hS.WzG.length===4){if(true&&hS.WzG[2]-hS.WzG[0]===2){break}e.setClip({x:hS.WzG[0],y:hS.WzG[1],w:hS.WzG[2]-hS.WzG[0],h:hS.WzG[3]-hS.WzG[1]})}}break}case'ADd':{{var hT=L;if(hT.WzG.length!==2){return}var hU=hT.WzG[0];var hV=hT.WzG[1];var hW=-1;if(ss.isValue(hz)&&hz.w!==0&&hz.h!==0){var hX;var hY;if(e.get_isTextAngleHorizontal()){hX=((hz.x>hU)?hU:(hU-hz.x));hY=hz.w}else{hX=((hz.y>hV)?hV:(hV-hz.y));hY=hz.h}hW=Math.max(hX,hY-hX)}this.renderText(hT.gjO,hU,hV,hW,null,hB)}break}case'MqA':{{ch.$0(e,L)}break}case'jp$':{{var hZ=L;if(ss.isValue(hZ.JZN)&&hZ.JZN.length===2){e.translate(hZ.JZN[0],hZ.JZN[1])}if(ss.isValue(hZ.wo_)&&hZ.wo_.length===2){e.scale(hZ.wo_[0],hZ.wo_[1])}if(ss.isValue(hZ.SNh)){e.rotate(hZ.SNh*Math.PI/180)}}break}case'nfx':{{var ia=new z(e);e.restore();ia.$0(e)}break}case'mpa':{{e.save()}break}case'eTm':{{var ib=L;e.set_shouldAntialias(ib.chK)}break}case'jNr':{{var ic=L;if(ss.isValue(hy)&&ss.keyExists(hy,ic.jW$)){var id=hy[ic.jW$];if(ss.isValue(id)&&id.complete){e.save();if(ss.isValue(hA)){e.setClip(hA)}e.set_alpha(ic.TwJ);e.drawImage4(id,ic.Pkb[0],ic.Pkb[1],ic.Pkb[2]-ic.Pkb[0],ic.Pkb[3]-ic.Pkb[1]);e.restore()}}else{}}break}default:{{}break}}},$7:function(e,L,hy,hz){var hA=ss.isValue(e)&&e.get_visualListPM().oqX==='annotations';this.clearPrevTextRunInfo();var hB=this.get_currentContext();var hC=false;L.nTH=L.nTH||0;L.Mk_=L.Mk_||0;L.XqN=L.XqN||0;L.$UU=L.$UU||0;var hD={x:L.nTH,y:L.Mk_,w:L.XqN,h:L.$UU};var hE=tab.RectXYUtil.offsetRect(hB.get_dirtyRect(),this.get_renderOffset());if(L.XqN>0&&L.$UU>0&&(!this.isRectVisible(hD)||!tab.RectXYUtil.intersectsWith(hE,hD))){hC=true}var hF=this.$8(e,L,hC);var hG=ch.$5(L.tOA,hA);for(var hH=0;hH<hG.length;hH++){var hI=hG[hH];if(hF.$0()&&hI.VzB==='nuS'){var hJ=hI;hF.$2=tab.ColorModel.convertColorForCanvas(hJ.YhU)}else{var hK=null;if(hF.$0()&&hI.VzB==='MqA'){var hL=hI;hF.$3=tab.ColorModel.convertColorForCanvas(hL.YhU);hK=hB.get_textFillStyle()}if(!hC||ch.$4(hI)){this.$a(hB,hI,hy,hD,hz,hA)}if(ss.isValue(hK)){hB.set_textFillStyle(hK)}}}if(hF.$0()){hB.set_shapeFillStyle(hF.$2);hB.set_textFillStyle(hF.$3)}},$8:function(e,L,hy){var hz=null;if(!hy&&ss.isValue(e)){if(e.isSelected(L)){hz=new y('selected')}else if(e.isBrushed(L)){hz=new y('highlighted')}else if(e.isHovered(L)){hz=new y('hover')}}if(ss.isNullOrUndefined(hz)){return new y('normal')}var hA=this.get_currentContext();hz.$2=hA.get_shapeFillStyle();hz.$3=hA.get_textFillStyle();switch(hz.$1()){case'selected':{hA.set_textFillStyle('rgb(255,255,255)');hA.set_shapeFillStyle('rgb(46,106,197)');break}case'highlighted':{hA.set_textFillStyle('rgb(0,0,0)');hA.set_shapeFillStyle('rgb(255,255,204)');break}case'hover':{hA.set_textFillStyle('rgb(84,84,84)');hA.set_shapeFillStyle('rgb(239,239,239)');break}}var hB=ss.isValue(L.vbn)||ss.isValue(L.TuG);if(hB){L.vbn=L.vbn||0;L.TuG=L.TuG||0;hA.translate(-L.vbn,-L.TuG)}hA.fillRect(L.nTH,L.Mk_,L.XqN,L.$UU);if(hB){hA.translate(L.vbn,L.TuG)}return hz}},bb);ss.initClass(ci,a,{});ss.initClass(cj,a,{showAlertDialog:function(e,L,hy){try{var hz=new Object;hz.content=e;hz.title=L;hz.buttons='None';var hA=hz;var hB=new tableau.base.widget.Dialog(hA);if(hy){cj.$0(hB);$(hB.domNode).addClass('tabErrorDialog')}hB.show();hB.layout(null)}catch(hC){var e=ss.Exception.wrap(hC)}},showConfirmationDialog:function(e,L,hy,hz,hA){var hB=new Object;hB.content=e;hB.title=L;hB.buttons='YesNo';hB.onYes=hz;hB.onNo=hA;var hC=hB;var hD=new tableau.base.widget.Dialog(hC);if(hy){cj.$0(hD);$(hD.domNode).addClass('tabErrorDialog')}hD.show();hD.layout(null)},showSheetAuthenticationOverlay:function(e,L){var hy=new U(e,L);hy.show()},showGenericDataSourceErrorOverlay:function(e,L){var hy=new cP(e,L);hy.show()},showSheetAuthenticationDialog:function(e,L){var hy=new ca(e,L);hy.show()},showGenericDataSourceErrorDialog:function(e,L){var hy=new cO(e,L);hy.show()}},null,[tab.ICommonDialogProvider]);ss.initClass(ck,a,{});ss.initClass(cl,a,{add_complete:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_complete:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_imageLoaded:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_imageLoaded:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},add_imageTimedOut:function(e){this.$1$3=ss.delegateCombine(this.$1$3,e)},remove_imageTimedOut:function(e){this.$1$3=ss.delegateRemove(this.$1$3,e)},addImage:function(e){if(!ss.isValue(e)){return}for(var L=0,hy=this.$3.length;L<hy;L++){if(!this.$3[L].$7()){this.$2++;this.$3[L].$6(e);return}}if(this.$3.length<2){var hz=new p(this.$3.length);hz.$c(ss.mkdel(this,this.onWorkerFinished));hz.$e(ss.mkdel(this,this.onWorkerTimedOut));this.$3.push(hz);this.$2++;hz.$6(e)}else{this.$1.push(e)}},clear:function(){ss.clear(this.$1)},destroy:function(){for(var e=0;e<this.$3.length;e++){var L=this.$3[e];L.$1()}ss.clear(this.$1);this.$1$2=null;this.$1$3=null;this.$1$1=null},onWorkerFinished:function(e,L){if(ss.isValue(this.$1$2)){this.$1$2(this,new dq(L.get_image()))}this.$0(L.get_workerID())},onWorkerTimedOut:function(e,L){if(ss.isValue(this.$1$3)){this.$1$3(this,ss.EventArgs.Empty)}this.$0(L.get_workerID())},$0:function(e){this.$2--;if(this.$1.length===0){if(this.$2===0){if(ss.isValue(this.$1$1)){this.$1$1(this,ss.EventArgs.Empty)}}}else{this.$3[e].$6(this.$1.shift());this.$2++}}});ss.initClass(cm,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(cn,a,{get_dom:function(){return this.get_template()},$f:function(){return(tsConfig.is_mobile?tab.Strings.ToolbarPublicDownloadLabelMobile:tab.Strings.ToolbarPublicDownloadLabelWeb)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);window.setTimeout(ss.mkdel(this,this.$9),0)},$9:function(){var e=this.get_dom().downloadArea.find('.tabMenuItemName');var L=e.get();for(var hy=0;hy<L.length;hy++){var hz=L[hy];if(hz.offsetWidth<hz.scrollWidth){hz.title=hz.textContent}}this.get_dom().downloadArea.find('.tabDisabled .tabMenuItemName').prop('title',tab.Strings.ToolbarDisabledDownloadExplanation);if(!this.$h.get_exportCrosstabEnabled()){this.get_dom().downloadArea.find('.tabDisabled.tabDownloadCrosstab .tabMenuItemName').prop('title',tab.Strings.ToolbarDisabledCrosstabDownloadExplanation)}if(!this.$h.get_exportDataEnabled()){this.get_dom().downloadArea.find('.tabDisabled.tabDownloadData .tabMenuItemName').prop('title',tab.Strings.ToolbarDisabledDataDownloadExplanation)}if(!this.$h.get_downloadWorkbookEnabled()){this.get_dom().downloadArea.find('.tabDisabled.tabDownloadWorkbook .tabMenuItemName').prop('title',tab.Strings.ToolbarDisabledWorkbookDownloadExplanation)}},$b:function(){var e=[];if(this.$h.get_shouldShowImage()){e.push(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarExportImage,ss.mkdel(this.$h,this.$h.exportImage),'tabDownloadImage'))}var L=(this.$h.get_exportDataEnabled()?ss.mkdel(this.$h,this.$h.exportData):null);e.push(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarExportData,L,'tabDownloadData'));var hy=(this.$h.get_exportCrosstabEnabled()?ss.mkdel(this.$h,this.$h.exportCrosstab):null);e.push(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarExportCrosstab,hy,'tabDownloadCrosstab'));if(this.$h.get_shouldShowPdf()){e.push(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarPrintToPdf,ss.mkdel(this.$h,this.$h.exportPdf),'tabDownloadPdf'))}if(this.$h.get_shouldShowDownloadWorkbook()){var hz=(this.$h.get_downloadWorkbookEnabled()?ss.mkdel(this.$h,this.$h.downloadWorkbook):null);e.push(spiff.MenuItem.newActionItemWithItemClass(tab.Strings.ToolbarWorkbook,hz,'tabDownloadWorkbook'))}if(this.$i&&tsConfig.isPublic){e.push(spiff.MenuItem.newActionItemWithItemClass(this.$f(),ss.mkdel(this,this.$e),'tabPublicApp'))}if(gA.get_toolbarIsBottom()){e.reverse()}return e},$d:function(){if(tsConfig.isPublic){return new spiff.UnificationDarkMenuTheme}else{return new spiff.UnificationLightMenuTheme}},$e:function(){window.open(this.$h.get_downloadAppUrl())},$c:function(){this.get_dom().explanationTitle.append(tab.Strings.ToolbarPublicExplanationTitle);this.get_dom().explanationBody.append(tab.Strings.ToolbarPublicExplanationText);var e='<span class=tabWindowsLogo />';var L='<span class=tabAppleLogo />';this.get_dom().availablePlatforms.append(tab.Strings.ToolbarPublicAvailablePlatforms(e,L));var hy=spiff.LabelButton.newTextButton();hy.set_label(this.$f());hy.add_click(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){hy.remove_click(ss.mkdel(this,this.$e))})));this.get_dom().downloadAppButton.append(hy.get_element())},$a:function(){var e=new spiff.Menu(this.$b());var L=spiff.MenuViewModel.createForMenu(e,null,this.$d());L.add_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);this.disposables.add$1(new tab.CallOnDispose(function(){L.remove_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked)}));var hy=spiff.ObjectRegistry.newView(spiff.MenuView).call(null,[L]);this.get_dom().menuArea.append(hy.get_element());if(!this.$i&&tsConfig.isPublic){this.$c()}}},ss.makeGenericType(spiff.BaseView$1,[co]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[co])]);ss.initClass(co,a,{add_downloadInitiated:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_downloadInitiated:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_viewType:function(){return cn},get_viewModel:function(){return this},get_shouldShowDownloadWorkbook:function(){return!tsConfig.is_mobile},get_downloadWorkbookEnabled:function(){return!tsConfig.is_mobile&&(!tsConfig.previewMode&&!ss.isNullOrEmptyString(tsConfig.downloadURI)||tsConfig.is_metrics_view)},get_downloadAppUrl:function(){var e=(ss.isValue(tabBootstrap.ViewerBootstrap.get_instance().location)?tabBootstrap.ViewerBootstrap.get_instance().location.toString():'');return'http://public.tableau.com/s/download?source=viz_toolbar&ref='+e.split('?')[0]},get_shouldShowPdf:function(){return this.$3.isLegacyMenuItemEnabled('print')},get_shouldShowImage:function(){return this.$3.isLegacyMenuItemEnabled('exportimage')},get_exportDataEnabled:function(){return this.$3.isLegacyMenuItemEnabled('exportdata')},get_exportCrosstabEnabled:function(){return this.$3.isLegacyMenuItemEnabled('exportcrosstab')},disposeViewModel:function(){this.dispose()},downloadWorkbook:function(){tab.ToolbarServerCommands.downloadWorkbook();this.$2()},exportImage:function(){var e=new cv;e.setSheetScrollPositions(M.get_instance().get_client().get_viewControllers());tab.ToolbarServerCommands.exportImage(e);this.$2()},exportData:function(){tab.ToolbarServerCommands.exportData();this.$2()},exportCrosstab:function(){tab.ToolbarServerCommands.exportCrosstab();this.$2()},exportPdf:function(){tab.ToolbarServerCommands.exportPdf(new cv);this.$2()},updateUberPopupViewModel:function(e){},$2:function(){if(ss.isValue(this.$2$1)){this.$2$1()}}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel,spiff.IUberPopupContent]);ss.initClass(cp,a,{show:function(){spiff.Dialog.prototype.show.call(this);this.showInternal()},showInternal:null},spiff.ModalDialog,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(cq,a,{showInternal:function(){this.get_body().append(this.$D);if(ss.isValue(this.$E)){this.$E()}}},cp,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(cr,a,{showInternal:function(){var e=$('<iframe />');e.attr('src',this.urlToLoadDialogContent);e.attr('tb-test-id',this.$D);this.get_body().append(e)}},cp,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(cs,a,{});ss.initClass(ct,a,{shouldDisplayAllButtonSelected:function(){return this.props.selection.get_selectedCount()===0},onAllButtonTap:function(){if(this.get_selection().get_selectedCount()===0){this.get_selection().selectAll()}else{this.get_selection().unselectAll()}this.notifySelectionChanged()}},spiff.MultiSelectButtonGroupComponent);ss.initClass(cu,a,{shouldDisplayAllButtonSelected:function(){return this.props.selection.get_selectedCount()===0},onAllButtonTap:function(){this.get_selection().unselectAll();this.notifySelectionChanged()}},spiff.SingleSelectButtonGroupComponent);ss.initClass(cv,a,{get_sheetScrollPositions:function(){return this.$0},setSheetScrollPositions:function(e){this.$0={};for(var L=0;L<e.length;L++){var hy=e[L];this.$0[hy.get_sheetName()]=hy.get_viewWidget().get_scrollPosition()}},triggerExportPdfUI:function(){var e=spiff.ObjectRegistry.newExportPDFDialog(cw).call(null,cw,tab.CommandController.get().get_legacySession());e.add_closed(function(){e.dispose();e=null});e.show()}},null,[tab.IExportImageHelper,tab.IExportPdfHelper]);ss.initClass(cw,a,{get_thumbnailTemplates:function(){return this.thumbnails},$13:function(){return this.dom.orientationBtns.find('.selected').val()},$14:function(e){var L=((e==='printer')?'portrait':e);var hy=this.dom.orientationBtns;var hz=function(hA,hB){var hC=$(hB);if(hC.prop('value')===L){hC.addClass('selected')}else{hC.removeClass('selected')}};hy.each(hz)},$V:function(){return((this.$1c==='png')?parseInt(this.dom.imageHeightBtn.val()):0)},$W:function(e){if(this.$1c==='png'){this.dom.imageHeightBtn.val(e)}},$X:function(){return((this.$1c==='png')?parseInt(this.dom.imageWidthBtn.val()):0)},$Y:function(e){if(this.$1c==='png'){this.dom.imageHeightBtn.val(e)}},$15:function(){return((this.$1c==='png')?'letter':this.dom.sizeControl.val())},$16:function(e){if(this.$1c==='pdf'){this.dom.sizeControl.val(e)}},$17:function(){return this.dom.statusMsg.text()},$18:function(e){this.dom.statusMsg.text(e)},$11:function(){return this.$1e},$12:function(e){this.$1e=e;this.initFromModel()},$U:function(){return this.$1a.get_presModel()},$Z:function(){return this.$1d},$10:function(e){this.$1d=e;if(e){this.get_body().find('select, input, button').attr('disabled','disabled');this.$1b.set_disabled(true)}else{this.get_body().find('select, input, button').removeAttr('disabled');this.$1b.set_disabled(false)}},initialize:function(){this.initEventHandlers()},dispose:function(){this.get_body().undelegate('button','click').undelegate('select','change').undelegate('input','change');this.$19.dispose();this.$1b.dispose();this.dom.dispose();spiff.ModalDialog.prototype.dispose.call(this)},show:function(){if(ss.isNullOrUndefined(this.$11())){this.$D()}this.initialize();spiff.Dialog.prototype.show.call(this)},positionInWindow:function(){var e=this.get_element().outerHeight(true)+100;var L=$(window).height();this.set_startingPositionY(Math.round((L-e)/2));spiff.Dialog.prototype.positionInWindow.call(this)},$O:function(){if(this.get_body().find('.tab-pdfdlg-thumbnail-button').hasClass('selected')){this.$1b.set_disabled(false);this.$18('');this.$E()}else{this.$1b.set_disabled(true);this.$18(tab.Strings.PrintPdfDialogContentRequired);this.$R();this.dom.spinner.hide()}},initEventHandlers:function(){this.get_body().find('select').change(ss.mkdel(this,this.updateSelection)).end().find('.tab-pdfdlg-group-orientation button').click(ss.mkdel(this,this.updateOrientation)).end().find('.png-only input').change(ss.mkdel(this,this.updateImageDimension)).end().find('.tab-pdfdlg-dashboard-content-mode button').click(ss.mkdel(this,this.handleContentModeSwitch)).end().find('.tab-pdfdlg-worksheet-content-mode button').click(ss.mkdel(this,this.handleContentModeSwitch)).end().find('.tab-pdfdlg-story-content-mode button').click(ss.mkdel(this,this.handleContentModeSwitch)).end()},appendOptionToSelect:function(e,L,hy){var hz=ss.localeFormatString("<option value='{0}'>{1}</option>",tableau.format.escapeHTML(L),tableau.format.escapeHTML(e));hy.append($(hz))},appendEnumToSelect:function(e,L,hy){this.appendOptionToSelect(e,L,hy)},initFromModel:function(){this.$F();this.$G();this.$H();this.$N(this.$U());var e='this-sheet';if(this.$U().WeS&&!this.$U().Jqz){e='dashboard'}this.$T(e)},onCancel:function(){this.close(null)},onExport:function(){this.$S()},updateScalingSelectFromSheet:function(e){var L=this.dom.scalingSelector;var hy=cw.scalingValueFromLayoutOptions(e.Vlb);var hz=L.children(ss.formatString("option[value='{0}']",hy));if(hz.length>0){L.val(hy)}else{this.appendOptionToSelect(cw.scalingLabelFromLayoutOptions(e.Vlb),hy,L)}},updateSheetsFromScalingValue:function(e){var L=new RegExp('pct([0-9]{1,3})');var hy=new RegExp('fit([0-9]{1,5})x([0-9]{1,5})');var hz;if(L.test(e)){hz=L.exec(e);var hA=parseInt(hz[1]);for(var hB=0;hB<this.$1e.zHH.length;hB++){var hC=this.$1e.zHH[hB];hC.Vlb.kPf='percent';hC.Vlb.HZB=hA}}else if(hy.test(e)){hz=hy.exec(e);var hD=parseInt(hz[1]);var hE=parseInt(hz[2]);for(var hF=0;hF<this.$1e.zHH.length;hF++){var hG=this.$1e.zHH[hF];hG.Vlb.kPf='fit-pages';hG.Vlb.Jlj=hD;hG.Vlb.ubB=hE}}else{for(var hH=0;hH<this.$1e.zHH.length;hH++){var hI=this.$1e.zHH[hH];hI.Vlb.kPf='auto'}}},updateImageDimension:function(e){var L=$(e.currentTarget);var hy=L.prop('value');var hz=this.$1e.Vlb;switch(L.attr('name')){case'imageHeight':{var hA=parseInt(hy);hz.nAc=hA;for(var hB=0;hB<this.$1e.zHH.length;hB++){var hC=this.$1e.zHH[hB];hC.Vlb.nAc=hA}break}case'imageWidth':{var hD=parseInt(hy);hz.pLT=hD;for(var hE=0;hE<this.$1e.zHH.length;hE++){var hF=this.$1e.zHH[hE];hF.Vlb.pLT=hD}break}}},updateSelection:function(e){var L=$(e.currentTarget);var hy=L.prop('value');switch(L.attr('name')){case'scaling':{this.updateSheetsFromScalingValue(hy);break}case'pageSize':{var hz=hy;this.$1e.Vlb.YDS=hz;for(var hA=0;hA<this.$1e.zHH.length;hA++){var hB=this.$1e.zHH[hA];hB.Vlb.YDS=hz}break}}},handleContentModeSwitch:function(e){var L=$(e.currentTarget);L.siblings().removeClass('selected').end().addClass('selected');switch(L.attr('name')){case'dashboard-content':case'worksheet-content':case'story-content':{this.$T(L.prop('value'));break}}},updateOrientation:function(e){var L=e.currentTarget.getAttribute('value');this.$1e.Vlb.tTN=L;for(var hy=0;hy<this.$1e.zHH.length;hy++){var hz=this.$1e.zHH[hy];hz.Vlb.tTN=L}this.$14(L)},showThumbList:function(){this.dom.thumbListWrapper.show();this.dom.thumbList.show()},hideThumbList:function(){this.dom.thumbListWrapper.hide();this.dom.thumbList.hide()},setSingleSheetSelected:function(){var e=this.$U();for(var L=0;L<this.thumbnails.length;L++){var hy=this.thumbnails[L];hy.selectAndShow(ss.referenceEquals(hy.get_presModel(),e))}},$K:function(){var e=new Object;e.commandNamespace='tabsrv'.toString();e.commandName='pdf-export-server'.toString();var L={};L['wxS']=this.$1e;e.commandParams=L;var hy=ss.mkdel(this,function(hA){this.$10(false);this.$E();if(this.get_isShown()){var hB=hA;var hC=tableau.types.ExportDialogType['PrintPDF'];var hD=this.$1f.formatSessionTempfileReference(hB.uvn,true,true);this.$1f.openDownload(hD,hC);this.close(null)}});var hz=ss.mkdel(this,function(hA){this.$I()});tab.ServerCommands.executeServerCommand(e,'immediately',hy,hz)},$L:function(){var e=tsConfig.visible_sheets;var L=ss.mkdict(['pdfExport',this.$1e]);var hy={};var hz=tableau.types.ExportDialogType['ExportImage'];for(var hA=0;hA<this.$1e.zHH.length;hA++){var hB=this.$1e.zHH[hA];if(hB.NPh){var hC=hB.Vlb;var hD=ss.indexOf(e,hB.Gge);if(hD>=0){var hE=this.$1f.formatExportURL('image/png',new Object);var hF=hC.nAc;var hG=hC.pLT;hE+=ss.formatString('?:dimensions={0},{1}',hF,hG);hy[hB.Gge]=hE}}}var hH=ss.mkdel(this,function(hL,hM,hN){this.$1f.showDownloads(hy,hz);this.close(null)});var hI=ss.mkdel(this,function(hL,hM,hN){this.$I()});var hJ='tabsrv'.toString();var hK='pdf-export-options'.toString();this.$1f.sendSessionCommand(hJ,hK,L,hH,hI)},$J:function(){switch(this.$1c){case'png':{this.$L();break}case'pdf':{this.$K();break}default:{break}}},$I:function(){this.$R();this.$10(false);switch(this.$1c){case'png':{this.$18(tab.Strings.PdfExportMessageErrorPng);break}case'pdf':default:{this.$18(tab.Strings.PdfExportMessageError);break}}this.dom.spinner.hide();this.dom.statusMsg.show()},$S:function(){this.$10(true);this.$18(tab.Strings.PdfExportMessageExporting);this.$R();this.$J()},$D:function(){var e=new Object;e.commandNamespace='tabsrv'.toString();e.commandName='pdf-export-options'.toString();this.$18(tab.Strings.PdfExportMessageSettings);this.$10(true);this.$R();var L=ss.mkdel(this,function(hz,hA,hB){if(hB.status!==200){return}this.$12(tab.PresentationModel.fromCommand(hz,e));this.$E();this.$10(false)});var hy=ss.mkdel(this,function(hz,hA,hB){this.$18(tab.Strings.PdfExportMessageSettingsError)});this.$1f.sendSessionCommand(e.commandNamespace,e.commandName,{},L,hy)},$R:function(){this.dom.spinner.show();this.dom.status.show()},$E:function(){this.dom.status.hide(250)},$H:function(){var e=tsConfig.repository_urls;var L=tsConfig.visible_sheets;ss.clear(this.thumbnails);for(var hy=0;hy<this.$1e.zHH.length;hy++){var hz=this.$1e.zHH[hy];var hA=hz.Gge;if(ss.isNullOrUndefined(hz.lZe)||hz.lZe.length===0){if(cw.canSelectSheet(hz)){var hB=ss.indexOf(L,hA);if(hB>=0){var hC=e[hB];var hD=new tab.RepoPathObject(hC);var hE=hD.get_originalViewURL();hz.lZe=this.$1f.formatThumbnailReference(hE)}}}var hF=new fL($(fL.template));hF.pdfDialog=this;hF.label.text(hA);if(cw.canSelectSheet(hz)){hF.icon.attr('style',ss.formatString('background: url({0}) 0 0;',hz.lZe))}else{hF.get_domRoot().addClass('hidden');hF.icon.addClass('tab-pdfdlg-worksheet-icon')}this.dom.thumbList.append(hF.get_domRoot());if(ss.referenceEquals(hA,this.$1e.U$A)){this.$1a=hF;var hG=hz.Vlb;this.$16(hG.YDS);this.$14(hG.tTN);this.updateScalingSelectFromSheet(hz);this.$W(hG.nAc);this.$Y(hG.pLT)}hF.get_domRoot().data('PDFSheet',hz);this.thumbnails.push(hF)}},$G:function(){var e=this.dom.scalingSelector;if(e.length>0){e.empty();this.appendEnumToSelect(tab.Strings.PdfExportPageScaleAuto,'auto',e);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(25),'pct25',e);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(50),'pct50',e);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(60),'pct60',e);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(75),'pct75',e);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(80),'pct80',e);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(90),'pct90',e);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(100),'pct100',e);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(200),'pct200',e);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(400),'pct400',e);this.appendOptionToSelect(tab.Strings.PdfExportFitOneHigh,'fit0x1',e);this.appendOptionToSelect(tab.Strings.PdfExportFitTwoHigh,'fit0x2',e);this.appendOptionToSelect(tab.Strings.PdfExportFitOneWide,'fit1x0',e);this.appendOptionToSelect(tab.Strings.PdfExportFitTwoWide,'fit2x0',e)}},$F:function(){var e=this.dom.sizeSelector;if(e.length>0){e.empty();this.appendEnumToSelect(tab.Strings.PdfExportPageSizeLetter,'letter',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeLegal,'legal',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeNote,'note',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeFolio,'folio',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeTabloid,'tabloid',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeLedger,'ledger',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeStatement,'statement',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeExecutive,'executive',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeA3,'a3',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeA4,'a4',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeA5,'a5',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeB4,'b4',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeB5,'b5',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeQuarto,'quarto',e);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeUnspecified,'unspecified',e)}},$T:function(e){this.$M();switch(e){case'dashboard':case'this-sheet':{this.setSingleSheetSelected();break}case'all':{this.$Q();this.showThumbList();break}case'all-dashboard':{this.$P();this.showThumbList();break}}this.$O()},$N:function(e){var L;if(e.Jqz){L='story'}else if(e.WeS){L='dashboard'}else{L='worksheet'}this.get_body().find('.tab-pdfdlg-'+L+'-content-mode').show().css('visibility','visible').siblings().hide()},$M:function(){for(var e=0;e<this.thumbnails.length;e++){var L=this.thumbnails[e];L.selectAndShow(false)}},$Q:function(){for(var e=0;e<this.thumbnails.length;e++){var L=this.thumbnails[e];L.selectAndShow(cw.canSelectSheet(L.get_presModel()))}},$P:function(){var e=this.$U().ROW;for(var L=0;L<this.thumbnails.length;L++){var hy=this.thumbnails[L];var hz=ss.contains(e,hy.get_presModel().Gge);hy.selectAndShow(hz)}}},spiff.ModalDialog,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(cx,a,{thumbs:function(){return this.thumbList.find('li')}},spiff.Template,[ss.IDisposable]);ss.initClass(cy,a,{get_tileIndex:function(){return this.$2},get_range:function(){return this.$0},get_rangeType:function(){return this.$1}});ss.initInterface(dh,a,{add_contentFetched:null,remove_contentFetched:null,destroy:null,fetch:null,isTilePending:null});ss.initClass(cz,a,{add_contentFetched:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_contentFetched:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},destroy:function(){},fetch:function(e){for(var L=0;L<e.length;++L){var hy=e[L];if(ss.contains(this.$7,hy.get_tileIndex())){continue}this.$7.push(hy.get_tileIndex());this.$8.push(hy)}while(this.$8.length>this.$6){var hz=this.$8[0];ss.remove(this.$7,hz.get_tileIndex());ss.remove(this.$8,hz)}this.$2()},isTilePending:function(e){return ss.contains(this.$7,e)},$0:function(e){var L=ss.mkdel(this,function(){this.$1(e)});return L},$1:function(e){var L=ss.mkdel(this,function(hz){this.$5=false;ss.remove(this.$7,e.get_tileIndex());var hA=new bB(e.get_tileIndex(),e.get_range(),hz);this.$1$1(this,hA);this.$2()});var hy=ss.mkdel(this,function(hz){this.$5=false;ss.remove(this.$7,e.get_tileIndex());this.$2()});this.$9.getFilterItems(this.$4,this.$3,e.get_range(),L,hy)},$2:function(){if(this.$8.length>0&&!this.$5){this.$5=true;var e=this.$8.length-1;var L=this.$8[e];ss.removeAt(this.$8,e);var hy=this.$0(L);window.setTimeout(hy,0)}}},null,[dh]);ss.initClass(fC,a,{get_domXButton:function(){return this.domXButton},get_isVisible:function(){return this.isVisible},set_isVisible:function(e){this.isVisible=e},get_qf:function(){return this.qf},set_qf:function(e){this.qf=e},get_dijitDomNode:function(){return this.domNode},get_oResults:function(){return this.oResults},set_oResults:function(e){this.oResults=e},get_applyDelay:null,get_dijitClassName:function(){return this.declaredClass},postMixInProperties:function(){this.inherited(arguments);this.busy_gif_url=tableau.util.assetUrl('/images/busy.gif')},postCreate:function(){this._isTypeInList=!!this.get_qf()&&this.get_qf().get_isTypeInList()},resize:function(e){dojo.marginBox(this.domNode,e);this.layout(null)},onQueryBoxKeyDown:function(e){var L=this.getOnQueryBoxKeyDownBehavior(e);if(!!L){if(L.stopEvent){dojo.stopEvent(e)}if(!!L.functionToCall){window.setTimeout(L.functionToCall,10)}}},getOnQueryBoxKeyDownBehavior:function(e){var L=new Object;L.functionToCall=null;L.stopEvent=false;switch(e.keyCode){case 13:{L.stopEvent=true;break}case 27:{this.onXButtonClick(null);L.stopEvent=true;break}case 16:{L.stopEvent=true;break}case 17:{L.stopEvent=true;break}default:{L.functionToCall=ss.mkdel(this,this.handleNonCommandKeyDown);break}}return L},handleNonCommandKeyDown:function(e){this.$0()},onXButtonClick:function(e){if(!this._isTypeInList){var L=this.getQuery();this.hideUI();if(L!==''){this.showUI$1()}}else{this.clearSearch(false,false)}},onButtonHover:function(e){dojo.addClass(e.target,'Hover')},onButtonUnhover:function(e){dojo.removeClass(e.target,'Hover')},toggleUI:function(){if(this.get_isVisible()){this.hideUI()}else{this.showUI$1()}},applyChangesByChangelist:function(e){throw new ss.NotSupportedException},isShowingResults:function(){return this.isVisible&&this.resultCount>0},focusQueryBox:null,blurQueryBox:null,getQuery:null,setQuery:null,updateSearch:null,notifyParentFilterOfChanged:function(e,L,hy){},showUI$1:function(){this.showUI(false)},showUI:function(e){if(this.get_isVisible()){return}dojo.style(this.domNode,'display','block');this.isVisible=true;if(!e){this.get_qf().layout(null)}this.focusQueryBox()},hideUI:function(){if(!this.get_isVisible()){return}this.clearSearch(false,true);dojo.style(this.domNode,'display','none');this.blurQueryBox();this.isVisible=false;this.get_qf().layout(null)},clearSearch:function(e,L){if(!e){this.setQuery('');this.$0()}this.resultCount=0;this.get_qf().layout(null);if(!L){this.focusQueryBox()}},doCategoricalSearch:function(e){var L=this.get_qf().get_oFilter();var hy=this.makeUniqueSearchItemIdPrefix();var hz=ss.mkdel(this,function(hA,hB,hC){return cF.filterItem.getSearchResultHtml(this.get_qf(),hA,hy,hC)});return eh.findMatches(e,L,ss.mkdel(this,this.formatTuple),hz)},$0:function(){if(ss.isNullOrEmptyString(this.getQuery())&&!this._isTypeInList){this.get_domXButton().title=this.XBUTTON_CLOSE_TOOLTIP}else{this.get_domXButton().title=this.XBUTTON_CLEAR_TOOLTIP}},formatTuple:function(e){return tableau.format.formatTupleDisplayName(e,true,this.get_qf().get_oFilter().role)},isSingleSelect:function(){return this.get_qf().isSingleSelect()},makeUniqueSearchItemIdPrefix:function(){return cF.getBaseItemName(this.get_qf(),'SI')},currentDomain:function(){var e=tableau.types.QFDomain.QFD_ALL;if(!!this.get_qf().get_attributes()){e=this.get_qf().get_attributes()['values']}return e},doAjaxRemoteSearch:function(e,L,hy,hz,hA){return this.get_qf().get_session().searchFilter(this.get_qf().get_field(),e,L,hy,this.currentDomain(),hz,hA)}},Object);ss.initClass(cA,a,{get_noMatchHtml:function(){return this.NO_MATCHES},$5:function(){return this.get_qf()},setStyle:function(e){this.$8=e;if(this.$8===1){dojo.addClass(this.domNode,'FilteringDropdown');dojo.addClass(this.domNode,'SearchCleared')}else if(this.$8===2){dojo.addClass(this.domNode,'FilteringInline')}},get_applyDelay:function(){return 0},startupAndAppendTo:function(e){e.append(this.domNode);this.startupNoAppend()},startupNoAppend:function(){this.startup()},layout:function(e){},hideUI:function(){dojo.style(this.domNode,'display','none');fC.prototype.hideUI.call(this)},showUI:function(e){if(tab.BrowserSupport.get_isIE()&&(tab.BrowserSupport.get_browserVersion()===9||tab.BrowserSupport.get_browserVersion()===10)){this.domNode.focus()}fC.prototype.showUI.call(this,e);this.focusQueryBox()},focusQueryBox:function(){this.domQueryBox.focus()},blurQueryBox:function(){this.domQueryBox.blur()},getQuery:function(){return this.domQueryBox.value},setQuery:function(e){this.domQueryBox.value=e},onXButtonClick:function(e){if(this.$8===1){this.clearSearch(false,false);dojo.removeClass(this.get_domXButton(),'Hover')}else{fC.prototype.onXButtonClick.call(this,e)}},updateSearch:function(){if(this.get_isVisible()){this.searchWithQuery(this.getQuery())}},searchWithQuery:function(e){if(e.length<=0){this.clearSearch(false,false)}else if(this.get_qf().get_oFilter().isTiled){this.doRemoteSearch(e,true)}else{this.$2(this.doCategoricalSearch(e))}},doRemoteSearch:function(e,L){this.doAjaxRemoteSearch(e,this.$6,L,ss.mkdel(this,this.$2),ss.mkdel(this,this.$3))},getOnQueryBoxKeyDownBehavior:function(e){var L;L=this.inherited(arguments);switch(e.keyCode){case 9:{L.functionToCall=null;L.stopEvent=true;break}case 37:case 39:case 38:{L.functionToCall=null;L.stopEvent=false;break}case 40:{var hy=$(this.domNode.parentElement);hy.find('.FIItem').eq(0).focus();L.functionToCall=null;L.stopEvent=true;break}case 27:{if(dojo.isFF){L.functionToCall=ss.mkdel(this,this.onXButtonClick)}break}case 13:{L.stopEvent=true;L.functionToCall=ss.mkdel(this,this.$1);break}}return L},clearSearch:function(e,L){if(this.resultCount===-1){return}dojo.addClass(this.domNode,'SearchCleared');fC.prototype.clearSearch.call(this,e,L);this.$5().filterBySearchResults(null);this.resultCount=-1},handleNonCommandKeyDown:function(e){var L=500;dojo.removeClass(this.domNode,'SearchCleared');fC.prototype.handleNonCommandKeyDown.call(this,e);switch(this.domQueryBox.value.length){case 1:{L=Math.round(L*1.5);break}case 2:{L=Math.round(L*1.25);break}}if(!!this.$7){window.clearTimeout(ss.unbox(this.$7));this.$7=null}this.$7=window.setTimeout(ss.mkdel(this,this.updateSearch),L)},$1:function(e){this.updateSearch()},$2:function(e){if(ss.isValue(e.length)){this.resultCount=e.length}else if(ss.isValue(e.tuples)){this.resultCount=e.tuples.length;e=this.$4(e)}this.$5().filterBySearchResults(e);if(!$(this.domQueryBox).is(':focus')){this.domNode.focus();this.focusQueryBox()}},$4:function(e){var L=this.makeUniqueSearchItemIdPrefix();var hy=e.tuples;var hz=e.indices;var hA=[];for(var hB=0;hB<hy.length;hB++){hA.push(cF.filterItem.getSearchResultHtml(this.get_qf(),hy[hB],L,hz[hB]))}return hA},$3:function(e){}},fC);ss.initEnum(cB,a,{invalid:0,dropdown:1,inline:2});ss.initClass(cC,a,{getSearchResultHtml:null,formatChecklistFilterItemHtml:null,getCheckHtml:null,formatRadiolistFilterItemHtml:null,getRadioHtml:null,formatDropdownListFilterItemHtml:null,getDropdownHtml:null,getTypeInHtml:null,getSelectHtml:function(e,L,hy,hz){var hA=['<option value="','','" ','','>','','</option>'];hA[1]=tableau.format.escapeHTML(e);hA[3]=((hy&&!hz)?'SELECTED':'');hA[5]=tableau.format.escapeHTML(L);return hA.join('')},getCssNode:null,isPending:null,togglePendingState:null,setChecked:null,isChecked:null,syncCssToCheckState:null,setSelected:null,isSelected:null,isTiled:function(e){var L=e.parentNode;if(ss.isValue(L)){return dojo.hasClass(L,'tile')}return false},getNodeFromEvent:null,getIndex:null,isTypeInListItem:null,isAllItem:null,getCheckboxOrRadio:function(e){var L=tableau.util.findElementByTagName(e,'input',ss.mkdict(['type','checkbox']));if(ss.isValue(L)){return L}return tableau.util.findElementByTagName(e,'input',ss.mkdict(['type','radio']))}});ss.initClass(cD,a,{getSearchResultHtml:function(e,L,hy,hz){switch(e.get_mode()){case'checklist':case'checkdropdown':case'typeinlist':{return this.formatChecklistFilterItemHtml(e,L,hy,hz)}case'radiolist':{return this.formatRadiolistFilterItemHtml(e,L,hy,hz)}case'dropdown':{return this.formatDropdownListFilterItemHtml(e,L,hy,hz)}}return''},formatChecklistFilterItemHtml:function(e,L,hy,hz){var hA=cF.getItemId(hy,hz);var hB=cF.shouldCheckFilterItemMultiValue(L,e);var hC=tableau.format.formatTupleDisplayName(L,true,e.get_oFilter().role);var hD=tableau.format.formatTupleDisplayFacet(L,false,e.get_oFilter().role);var hE=cF.showFacets(e);var hF=e.get_viewModel().get_filterType()!=='Hierarchical'&&ss.isValue(e.get_modeContents().pendingManager)&&e.get_modeContents().pendingManager.isPending(L,hz);return this.getCheckHtml(hA,hC,hB,hD,hE,hF)},getCheckHtml:function(e,L,hy,hz,hA,hB){var hC=['<div class="','','" id="','','"><div class="facet">','','</div><div class="facetOverflow"><input type="checkbox" class="FICheckRadio" name="','','" ','','><a class="FIText" title="','','">','','</a></div></div>'];var hD=(hB?'FIItem FIPending':'FIItem');hC[1]=hD;hC[3]=hC[7]=tableau.format.escapeHTML(e);hC[9]='';hC[11]=hC[13]=tableau.format.escapeHTML(L);hC[5]=(hA?hz:'');if(hy&&!hB||!hy&&hB){hC[1]+=' FIChecked';hC[9]+=' checked="checked" '}return hC.join('')},formatRadiolistFilterItemHtml:function(e,L,hy,hz){var hA=cF.getItemId(hy,hz);var hB=cF.shouldCheckFilterItemSingleValue(L,e);var hC=tableau.format.formatTupleDisplayName(L,true,e.get_oFilter().role);var hD=tableau.format.formatTupleDisplayFacet(L,false,e.get_oFilter().role);var hE=cF.showFacets(e);return this.getRadioHtml(hA,hy,hC,hB,hD,hE)},getRadioHtml:function(e,L,hy,hz,hA,hB){var hC=['<div class="','','" id="','','"><div class="facet">','','</div><div class="facetOverflow"><input type="radio" class="FICheckRadio" name="','','" ','','><a class="FIText" title="','','">','','</a></div></div>'];hC[1]='FIItem';hC[3]=tableau.format.escapeHTML(e);hC[7]=tableau.format.escapeHTML(L);hC[9]='';hC[11]=hC[13]=tableau.format.escapeHTML(hy);hC[5]=(hB?hA:'');if(hz){hC[1]+=' FIChecked';hC[9]+=' checked="checked" '}return hC.join('')},formatDropdownListFilterItemHtml:function(e,L,hy,hz){var hA=cF.getItemId(hy,hz);var hB=tableau.format.formatTupleDisplayName(L,false,e.get_oFilter().role);var hC=tableau.format.formatTupleDisplayFacet(L,false,e.get_oFilter().role);var hD=cF.showFacets(e);return this.getDropdownHtml(hA,hB,hC,hD)},getDropdownHtml:function(e,L,hy,hz){var hA=["<div tabindex='0' class=\"",'','" id="','','"><div class="facet">','','</div><div class="facetOverflow"><a title="','','">','','</a></div></div>'];hA[1]='FIItem FISimpleDropdownItem';hA[3]=e;hA[7]=hA[9]=L;hA[5]=(hz?hy:'');return hA.join('')},getTypeInHtml:function(e,L){var hy=['<div tabindex="0" class="FIItem FITypeInItem FIChecked" id="','','" title="','','">','','</div>'];hy[1]=tableau.format.escapeHTML(e);hy[3]=hy[5]=tableau.format.escapeHTML(L);return hy.join('')},getCssNode:function(e){return cF.getClassElement(e,'FIItem')},isPending:function(e){var L=this.getCssNode(e);return ss.isValue(L)&&dojo.hasClass(L,'FIPending')},togglePendingState:function(e){var L=this.getCssNode(e);$(L).toggleClass('FIPending')},setChecked:function(e,L,hy){var hz=this.getCssNode(e);if(ss.isValue(hz)){if(L){dojo.addClass(hz,'FIChecked')}else{dojo.removeClass(hz,'FIChecked')}}var hA=this.getCheckboxOrRadio(e);if(ss.isValue(hA)){hA.checked=L===true}if(ss.isValue(hy)){hy.s=L===true}return hy},isChecked:function(e){var L=this.getCssNode(e);return ss.isValue(L)&&dojo.hasClass(L,'FIChecked')},syncCssToCheckState:function(e){var L=this.getCheckboxOrRadio(e);if(ss.isValue(L)){this.setChecked(e,L.checked,null)}},setSelected:function(e,L){var hy=this.getCssNode(e);if(L){dojo.addClass(hy,'FISelected')}else{dojo.removeClass(hy,'FISelected')}},isSelected:function(e){var L=this.getCssNode(e);return ss.isValue(L)&&dojo.hasClass(L,'FISelected')},getNodeFromEvent:function(e){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.target)){return null}var L=e.target;while(ss.isValue(L)&&L.tagName!=='OPTION'&&!dojo.hasClass(L,'FIItem')){L=L.parentNode}return L},getIndex:function(e){return cF.getIndexFromId(e.id)},isTypeInListItem:function(e){var L=this.getCssNode(e);return ss.isValue(L)&&dojo.hasClass(L,'FITypeInItem')},isAllItem:function(e){if(ss.isNullOrUndefined(e)||this.isTypeInListItem(e)){return false}return cF.isAllItemId(e.id)}},cC);ss.initClass(cE,a,{getSearchResultHtml:function(e,L,hy,hz){switch(e.get_mode()){case'checklist':case'checkdropdown':case'typeinlist':{return this.formatChecklistFilterItemHtml(e,L,hy,hz)}case'radiolist':{return this.formatRadiolistFilterItemHtml(e,L,hy,hz)}case'dropdown':{return this.formatDropdownListFilterItemHtml(e,L,hy,hz)}}return''},formatChecklistFilterItemHtml:function(e,L,hy,hz){var hA=cF.getItemId(hy,hz);var hB=cF.shouldCheckFilterItemMultiValue(L,e);var hC=tableau.format.formatTupleDisplayName(L,false,e.get_oFilter().role);var hD=tableau.format.formatTupleDisplayFacet(L,false,e.get_oFilter().role);var hE=cF.showFacets(e);var hF=ss.isValue(e.get_modeContents().pendingManager)&&e.get_modeContents().pendingManager.isPending(L,hz);return this.getCheckHtml(hA,hC,hB,hD,hE,hF)},getCheckHtml:function(e,L,hy,hz,hA,hB){var hC='';var hD=(hB?'FIMPending':'');var hE='';if(hy&&!hB||!hy&&hB){hC=' FIMChecked'}if(hA){hE=hz}return['<div class="FIMContainer '+hD+' facetOverflow" id="',e,'"><div class="facet">',hE,'</div><span class="FIMCheckMark',hC,'"></span><span class="FIMCheckLabel tab-ctrl-formatted-text',hC,'">',L,'</span></div>'].join('')},formatRadiolistFilterItemHtml:function(e,L,hy,hz){var hA=cF.getItemId(hy,hz);var hB=cF.shouldCheckFilterItemSingleValue(L,e);var hC=tableau.format.formatTupleDisplayName(L,false,e.get_oFilter().role);var hD=tableau.format.formatTupleDisplayFacet(L,false,e.get_oFilter().role);var hE=cF.showFacets(e);return this.getRadioHtml(hA,null,hC,hB,hD,hE)},getRadioHtml:function(e,L,hy,hz,hA,hB){var hC='',hD='';if(hz){hC=' FIMRadiolist FIMChecked'}if(hB){hD=hA}return['<div class="FIMContainer facetOverflow" id="',e,'"><div class="facet">',hD,'</div><span class="FIMCheckMark',hC,'"></span><span class="FIMCheckLabel tab-ctrl-formatted-text',hC,'">',hy,'</span></div>'].join('')},formatDropdownListFilterItemHtml:function(e,L,hy,hz){var hA=cF.getItemId(hy,hz);var hB=tableau.format.formatTupleDisplayName(L,false,e.get_oFilter().role);var hC=tableau.format.formatTupleDisplayFacet(L,false,e.get_oFilter().role);var hD=cF.showFacets(e);return this.getDropdownHtml(hA,hB,hC,hD)},getDropdownHtml:function(e,L,hy,hz){var hA='';if(hz){hA=hy}return['<div class="FIMContainer FIMDropdown" id="',e,'"><div class="facet">',hA,'</div><span class="FIMCheckLabel tab-ctrl-formatted-fixedsize">',L,'</span></div>'].join('')},getTypeInHtml:function(e,L){return['<div class="FIMContainer FIMTypeIn" id="',e,'"><span class="FIMCheckLabel tab-ctrl-formatted-text">',L,'</span></div>'].join('')},getCssNode:function(e){return cF.getClassElement(e,'FIMContainer')},setChecked:function(e,L,hy){var hz=$(e).find('.FIMCheckMark');var hA=$(e).find('.FIMCheckLabel');if(ss.isValue(hz)&&ss.isValue(hA)){if(L){hz.addClass('FIMChecked');hA.addClass('FIMChecked')}else{hz.removeClass('FIMChecked');hA.removeClass('FIMChecked')}}if(ss.isValue(hy)){hy.s=L===true}return hy},isChecked:function(e){if(ss.isValue(e)&&dojo.hasClass(e,'FIMContainer')){var L=$(e).find('.FIMCheckMark');return(ss.isValue(L)?L.hasClass('FIMChecked'):false)}return false},isPending:function(e){if(ss.isValue(e)){return dojo.hasClass(e,'FIMPending')}return false},togglePendingState:function(e){$(e).toggleClass('FIMPending')},syncCssToCheckState:function(e){var L=this.getCheckboxOrRadio(e);if(ss.isValue(L)){this.setChecked(e,L.checked)}},setSelected:function(e,L){var hy=this.getCssNode(e);if(L){dojo.addClass(hy,'FIMSelected')}else{dojo.removeClass(hy,'FIMSelected')}},isSelected:function(e){var L=this.getCssNode(e);return dojo.hasClass(L,'FIMSelected')},getNodeFromEvent:function(e){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.target)){return null}var L=e.target;while(ss.isValue(L)&&L.tagName!=='OPTION'&&!dojo.hasClass(L,'FIMContainer')){L=L.parentNode}return L},getIndex:function(e){return cF.getIndexFromId(e.id)},isTypeInListItem:function(e){var L=this.getCssNode(e);return dojo.hasClass(L,'FIMTypeIn')},isAllItem:function(e){if(this.isTypeInListItem(e)){return false}return cF.isAllItemId(e.id)}},cC);ss.initClass(cF,a,{});ss.initInterface(dI,a,{add_scrolled:null,remove_scrolled:null,destroy:null,setContent:null,getTileElement:null,getItemElement:null});ss.initClass(cG,a,{add_scrolled:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_scrolled:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},get_windowNode:function(){return this.$6},get_tileContainerNode:function(){return this.$4},destroy:function(){this.$6.unbind('scroll');this.$4.remove()},setContent:function(e,L){var hy=$(L);this.$4.append(hy);this.$5[e]=hy},getTileElement:function(e){if(e<0||e>=this.$5.length){return null}return this.$5[e].get(0)},getItemElement:function(e,L){var hy=this.getTileElement(e);if(ss.isNullOrUndefined(hy)){return null}var hz=hy.children;if(hz.length<L||L<0){return null}return hz[L]},$0:function(e){var L=(new Date).getTime();var hy=tab.DoubleUtil.roundToInt(this.$6.parent().offset().top)-tab.DoubleUtil.roundToInt(this.$4.offset().top);var hz=0;if(ss.isValue(this.$3)){var hA=Math.abs(this.$2-hy);var hB=L-this.$1;hz=hA/Math.min(hB,1000)}var hC=new fA({x:0,y:hy});this.$2=hy;this.$1=L;this.$3=hC;var hD=ss.mkdel(this,function(){if(ss.referenceEquals(hC,this.$3)){this.$1$1(this,hC)}});if(hz>cG.$0){window.setTimeout(hD,100)}else{hD()}}},null,[dI]);ss.initClass(cH,a,{$6:function(){return this.quickFilterDisplayViewModel.get_quickFilterDisplayModel()},get_getFilterModeMatrix:function(){if(ss.isValue(this.$6())&&ss.isValue(this.$6().get_quickFilterModeMatrix())){return this.$6().get_quickFilterModeMatrix()}else{return null}},postCreate:function(){if(this.metricsOnly){return}},dispose:function(){this.requestSetAttributes=null;this.$7.dispose()},updateFilterProperties:function(e){this.titleHTML=e.titleHTML;this.attributes=e.attributes;this.format=e.format;this.layoutSession=e.layoutSession;this.width=e.width;this.textStyle=e.textStyle;this.backgroundColor=e.backgroundColor},destroy:function(){dojo.forEach(this.$9,dojo.unsubscribe);this.dispose();this.inherited(arguments)},makeQuantitativeFilter:function(e){return new tableau.base.widget.LegacyQuantitativeQuickFilter(e)},makeQuantitativeDateFilter:function(e){return new tableau.base.widget.LegacyQuantitativeDateQuickFilter(e)},makeHierarchicalFilter:function(e){return new tableau.base.widget.LegacyHierarchicalQuickFilter(e)},makeCategoricalFilter:function(e){return new tableau.base.widget.LegacyCategoricalQuickFilter(e)},makeRelativeDateFilter:function(e){return new tableau.base.widget.LegacyRelativeDateQuickFilter(e)},makeRelativeDatePickFilter:function(e){return new tableau.base.widget.RelativeDatePickFilter(e)},setupEventHandlers:function(){var e=$(this.filter.domNode);this.$7.add$1(spiff.EventUtil.bindWithDispose(e,'mouseenter',ss.mkdel(this,this.$5)));this.$7.add$1(spiff.EventUtil.bindWithDispose(e,'mouseleave',ss.mkdel(this,this.$4)))},$1:function(e){var L=new Object;L.presModel=this.$6().get_quickFilterDisplayPresModel();if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){L.backgroundColor=tab.ColorModel.fromColorCode(this.$6().get_zone().rPC.eBu).toRgb()}else{L.backgroundColor=this.$6().get_zone().rPC.eBu}L.textStyle=this.textStyle;L.field=this.field;L.oFilter=e;L.filterViewModel=this.quickFilterDisplayViewModel.get_filterTypeViewModel();L.layoutSession=this.layoutSession;L.zid=this.zid;L.format=this.format;L.attributes=this.attributes||{};L.requestSetAttributes=this.requestSetAttributes;L.titleH=this.$a;L.titleW=this.$b;L.titleHTML=this.titleHTML;L.width=this.width;L.getContextMenuCommands=ss.mkdel(this,function(){return this.getContextMenuCommands()});L.showContextMenu=ss.mkdel(this,function(hy){if(ss.isNullOrUndefined(this.get_getFilterModeMatrix())){this.showContextMenu(hy)}else{this.showFilterPicker()}});if(ss.isValue(this.session)){L.session=this.session}else{L.metricsOnly=true}return L},updateFilterState:function(e){if(!ss.referenceEquals(this.field,tableau.format.formatQualifiedName(e.name))){return}if(!!this.filter&&(!ss.referenceEquals(this.filter.oFilter.type,e.type)||e.type==='RD'&&e.showRelDatePick!==this.filter.oFilter.showRelDatePick||e.type==='C'&&!ss.referenceEquals(e.mode,this.filter.oFilter.mode))){this.filter.destroy(false);this.filter=null}this.textStyle=this.quickFilterDisplayViewModel.get_quickFilterDisplayPresModel().mCc;var L=this.$1(e);if(ss.isNullOrUndefined(this.filter)){this.createFilterWidget(e,L)}else{this.filter.attributes=(ss.isNullOrUndefined(this.attributes)?{}:this.attributes);this.filter.oFilter=e;this.filter.setTitleSize(this.$a,this.$b);this.filter.initFromState();this.$0()}},createFilterWidget:function(e,L){if(ss.isNullOrUndefined(L)){L=this.$1(e)}switch(e.type){case'Q':{if(tab.LegacyFilterModel.isQuantitativeDateFilter(e)){this.filter=this.makeQuantitativeDateFilter(L)}else{this.filter=this.makeQuantitativeFilter(L)}break}case'H':{this.filter=this.makeHierarchicalFilter(L);break}case'C':{this.filter=this.makeCategoricalFilter(L);break}case'RD':{if(e.showRelDatePick){this.filter=this.makeRelativeDatePickFilter(L)}else{this.filter=this.makeRelativeDateFilter(L)}break}default:{dojo.style(this.domNode,'display','none');return}}this.addChild(this.filter);this.setupEventHandlers();this.filter.setTitleSize(this.$a,this.$b);this.$0();this.hideControls()},$0:function(){var e=this.$6().get_quickFilterDisplayPresModel().$tN;if(ss.isValue(this.session)){dojo.marginBox(this.filter.domNode,dojo.contentBox(this.domNode))}hn.applyFormatting(this.domNode,this.textStyle,this.backgroundColor,e);this.filter.layout(null)},$5:function(e){dojo.removeClass(this.filter.domControls,'HideControls')},hideControls:function(){dojo.addClass(this.filter.domControls,'HideControls')},$4:function(e){var L=dojo.coords(this.filter.domNode,true);if(L.x>e.pageX||L.x+L.w<=e.pageX||L.y>e.pageY||L.y+L.h<=e.pageY){this.hideControls()}},$3:function(){},setTitleSize:function(e,L){this.$a=e;this.$b=L},resize:function(e,L){this.$8=dojo.marginBox(this.domNode);this.inherited(arguments)},layout:function(e){if(!!this.filter){var L=dojo.marginBox(this.domNode);var hy=_.isEqual(this.$8,L);if(!hy){dojo.marginBox(this.filter.domNode,dojo.contentBox(this.domNode));this.filter.setTitleSize(this.$a,this.$b);this.filter.layout(null)}}},updateAttributes:function(e){this.attributes=(ss.isNullOrUndefined(e)?{}:e)},updateSubWidget:function(e){if(ss.isValue(this.filter)){var L=this.$1(e);this.filter.setTitleSize(L.titleH,L.titleW);this.filter.updateFilterProperties(L)}},$2:function(e){this.updateFilterState(e);if(ss.isNullOrUndefined(this.filter)){var L=ss.mkdict(['fixed',ss.mkdict(['w',0,'h',0]),'item',ss.mkdict(['w',0,'h',0])]);return L}else{return this.filter.getMetrics()}},getContextMenuCommands:function(){if(ss.isValue(this.$6())&&ss.isValue(this.$6().get_quickFilterCommands())){return this.$6().get_quickFilterCommands()}else{return new Object}},showContextMenu:function(e){var L=this.getContextMenuCommands();var hy=[];ho.newMenuItemsFromCommands(hy,L,function(hD){return function(){var hE=tab.CommandItemWrapper.create(hD);var hF=tab.CommandSerializer.deserialize(hE.get_command());tab.ServerCommands.executeServerCommand(hF,'immediately')}});var hz=function(hD){var hE=hD.get_data();hE()};var hA=spiff.MenuViewModel.createForMenu(new spiff.Menu(hy),hz);var hB=new spiff.ShowMenuOptions($(e),false,0);hB.additionalMenuClass='tabQFContextMenu';var hC=hB;hA.show(hC)},showFilterPicker:function(){}},Object,[ss.IDisposable]);ss.initClass(cI,a,{get_currentToolMode:function(){return this.$7},set_currentToolMode:function(e){if(e!==this.$7){var L=this.$7;this.$7=e;this.toolModeChanged(L)}else if(e===this.api.defaultPointerToolMode()){this.updateFlyOutVisibility(false);this.updateButtonState(e,true)}},dispose:function(){try{this.disposables.dispose()}catch(e){}if(ss.isValue(this.buttonContainer)){this.buttonContainer.remove()}if(ss.isValue(this.flyOutButtons)){this.flyOutButtons.remove()}if(ss.isValue(this.flyOutContainer)){this.flyOutContainer.remove()}this.api=null;this.buttonContainer=null;this.flyOutButtons=null;this.flyOutContainer=null;this.zoomInBtn=null;this.zoomOutBtn=null;this.zoomAreaBtn=null;this.zoomHomeBtn=null;this.flyOutBtn=null;this.rectSelectBtn=null;this.radialSelectBtn=null;this.lassoSelectBtn=null;this.panBtn=null;spiff.Widget.prototype.dispose.call(this)},setZoomHomePossibility:function(e){this.canZoomHome=e;if(this.toolbarType==='homeOnlyToolbar'){this.setActiveState(this.canZoomHome)}},setActiveState:function(e){if(this.toolbarType==='homeOnlyToolbar'&&!this.canZoomHome){this.get_element().css({display:'none'})}else{this.get_element().css({display:(e?'':'none')})}if(!e){this.updateFlyOutVisibility(false)}},resetPointerToolMode:function(){this.set_currentToolMode(this.api.defaultPointerToolMode());this.api.setPointerToolMode(this.get_currentToolMode(),false);this.updateFlyOutVisibility(false)},resetVisualState:function(){this.updateFlyOutVisibility(false)},enableUserInteraction:function(e){this.get_element().css({'pointer-events':(e?'auto':'none')});this.acceptingInteraction=e},init:function(){this.createButtons();this.resetPointerToolMode();this.setActiveState(false)},createButtons:null,setupEventHandling:function(){var e=tab.FeatureFlags.isEnabled('StickyMapTools');if(ss.isValue(this.rectSelectBtn)){this.disposables.add$1(this.rectSelectBtn.onClick(ss.mkdel(this,function(){this.setToolMode('rectangular-selection',e);if(tsConfig.is_authoring){tab.FloatingToolbarClientCommands.setDefaultMapToolSelectionCommand('rectangular-selection')}})));this.disposables.add$1(this.rectSelectBtn.onShiftClick(ss.mkdel(this,function(){this.setToolMode('rectangular-selection',true)})))}if(ss.isValue(this.panBtn)){this.disposables.add$1(this.panBtn.onClick(ss.mkdel(this,function(){this.setToolMode('pan-map',e);if(tsConfig.is_authoring){tab.FloatingToolbarClientCommands.setDefaultMapToolSelectionCommand('pan-map')}})));this.disposables.add$1(this.panBtn.onShiftClick(ss.mkdel(this,function(){this.setToolMode('pan-map',true)})))}if(ss.isValue(this.radialSelectBtn)){this.disposables.add$1(this.radialSelectBtn.onClick(ss.mkdel(this,function(){this.setToolMode('radial-selection',e);if(tsConfig.is_authoring){tab.FloatingToolbarClientCommands.setDefaultMapToolSelectionCommand('radial-selection')}})));this.disposables.add$1(this.radialSelectBtn.onShiftClick(ss.mkdel(this,function(){this.setToolMode('radial-selection',true)})))}if(ss.isValue(this.lassoSelectBtn)){this.disposables.add$1(this.lassoSelectBtn.onClick(ss.mkdel(this,function(){this.setToolMode('lasso-selection',e);if(tsConfig.is_authoring){tab.FloatingToolbarClientCommands.setDefaultMapToolSelectionCommand('lasso-selection')}})));this.disposables.add$1(this.lassoSelectBtn.onShiftClick(ss.mkdel(this,function(){this.setToolMode('lasso-selection',true)})))}if(ss.isValue(this.zoomHomeBtn)){this.disposables.add$1(this.zoomHomeBtn.onClick(ss.mkdel(this,function(){this.clickZoomHome()})))}},updateFlyOutVisibility:function(e){if(ss.isValue(this.flyOutContainer)){this.flyOutContainer.css({display:(e?'':'none')})}},toggleFlyout:function(e){if(!this.acceptingInteraction){return}if(this.flyOutContainer.is(':visible')){this.updateFlyOutVisibility(false)}else{var L=this.flyOutBtn.get_element().position();var hy=this.flyOutBtn.get_element().width();this.flyOutContainer.css({top:L.top+'px',left:hy+'px'});this.updateFlyOutVisibility(true)}},addButton:function(e,L,hy){var hz=new spiff.Button($(document.createElement('div')));hz.set_hoverTooltipText(hy);this.$6(e,hz,L);return hz},addToggleButton:function(e,L,hy){var hz=new spiff.ToggleButton($(document.createElement('span')));hz.set_hoverTooltipText(hy);this.$6(e,hz,L);return hz},addSpacer:function(){var e=$(document.createElement('div'));e.addClass('fztSpacer');this.buttonContainer.append(e)},$6:function(e,L,hy){L.get_element().addClass(hy);L.get_element().addClass('fztButton');e.append(L.get_element());this.disposables.add$1(L)},setToolMode:function(e,L){if(e===this.get_currentToolMode()){this.set_currentToolMode(this.api.defaultPointerToolMode())}else{this.set_currentToolMode(e)}this.api.setPointerToolMode(this.get_currentToolMode(),L)},clickZoomHome:function(){if(this.canZoomHome){this.api.zoomHome()}},createButtonContainer:function(){this.buttonContainer=$("<div class='fztButtonContainer'/>");this.get_element().append(this.buttonContainer);if(ss.isValue(this.parent)){this.parent.append(this.get_element())}},createButtonFlyOut:function(){this.flyOutContainer=$("<div class='fztFlyOutContainer'/>");this.updateFlyOutVisibility(false);this.get_element().append(this.flyOutContainer);this.flyOutButtons=$("<div class='fztFlyOutButtons'/>");this.flyOutContainer.append(this.flyOutButtons)},updateButtonState:function(e,L){switch(e){case'area-zoom':case'zoom-out':{this.selectButton(this.zoomAreaBtn,L);break}case'pan-map':{if(ss.isValue(this.panBtn)){this.selectButton(this.panBtn,L)}break}case'rectangular-selection':{if(ss.isValue(this.rectSelectBtn)){this.selectButton(this.rectSelectBtn,L)}break}case'radial-selection':{this.selectButton(this.radialSelectBtn,L);break}case'lasso-selection':{this.selectButton(this.lassoSelectBtn,L);break}default:{break}}},selectButton:function(e,L){var hy=ss.safeCast(e,spiff.ToggleButton);if(ss.isValue(hy)){hy.set_selected(L)}},toolModeChanged:function(e){this.updateButtonState(e,false);this.updateButtonState(this.get_currentToolMode(),true);this.updateFlyOutVisibility(false)}},spiff.Widget,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(cJ,a,{});ss.initClass(cK,a,{});ss.initClass(cL,a,{});ss.initClass(cM,a,{get_textStyleModel:function(){return this.$2},get_backgroundColor:function(){return this.$0},get_lineHeight:function(){return this.$1}});ss.initClass(cN,a,{},spiff.Widget,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(cO,a,{show:function(){this.$1.show()},cleanup:function(e,L){this.$1.closeAndDispose()},dispose:function(){this.$1.dispose()}},W,[ss.IDisposable]);ss.initClass(cP,a,{createOverlay:function(e){var L=$('.dashboardSpacer');var hy=$("<div id='auth-overlay'></div>");var hz=new cN;hy.append(hz.get_element());L.append(hy);if(ss.isValue(e)){e()}},show:function(){var e=new cs;var L=ss.mkdel(this,function(hy){this.cleanup(null,e)});e.zoneBecameValidHandler=L;dojo.subscribe('ZoneBecameValid',L);this.createOverlay(this.getRetryConentLoadedHandler(e))}},V);ss.initClass(et,a,{dispose:function(){if(this.visible){this.$b=true;return}this.notificationViewModel.remove_shown(ss.mkdel(this,this.shown));this.notificationViewModel.remove_hidden(ss.mkdel(this,this.hidden));ss.makeGenericType(spiff.BaseView$1,[eu]).prototype.dispose.call(this)},onViewModelPropertyChanged:function(e,L){this.updateContent()},updateContent:function(){this.messageDom.text(this.notificationViewModel.get_message())},hidden:function(){this.get_element().fadeOut('slow',ss.mkdel(this,this.$a))},shown:function(){this.visible=true;this.get_element().css('display','none');this.get_element().appendTo($('body'));if(this.adjustMargin){this.get_element().css('margin-left','-'+ss.Int32.div(this.get_element().outerWidth(true),2)+'px')}this.get_element().fadeIn('fast')},$a:function(){this.visible=false;if(this.$b){this.dispose()}else{this.get_element().detach()}},$9:function(e){this.hidden()}},ss.makeGenericType(spiff.BaseView$1,[eu]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[eu])]);ss.initClass(cQ,a,{},et,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[eu])]);ss.initClass(cR,a,{});ss.initClass(cS,a,{get_button:function(){return this.$9},$8:function(){var e={timeout:6000,enableHighAccuracy:true};window.navigator.geolocation.getCurrentPosition(ss.mkdel(this,this.$6),ss.mkdel(this,this.$7),e)},$6:function(e){var L={};var hy=Math.abs(0.452185866478557);var hz=Math.abs(e.coords.latitude);var hA=89.5478141335214;if(hz>hA){L.Qao=((e.coords.latitude<0)?-90:(e.coords.latitude-hy));L.FVU=((e.coords.latitude<0)?(e.coords.latitude+hy):90)}else{L.Qao=e.coords.latitude-hy;L.FVU=e.coords.latitude+hy}var hB;var hC=Math.cos(cR.degreeToRad(hz));var hD=0.00249530881941949;if(hC<hD){hB=180}else{hB=50/(111.32*hC)}L.kVX=e.coords.longitude-hB;L.eMT=e.coords.longitude+hB;tab.PaneClientCommands.boundingBoxPan(this.$a,L)},$7:function(e){var L='';if(e.code===e.PERMISSION_DENIED){L=tab.Strings.GotoMyLocationPermissionDeniedError}else if(e.code===e.TIMEOUT){L=tab.Strings.GotoMyLocationTimeoutError}else{L=tab.Strings.GotoMyLocationPositionUnavailableError}var hy=this.get_element().offset();var hz={x:tab.DoubleUtil.roundToInt(hy.left)+this.get_element().width()+8,y:tab.DoubleUtil.roundToInt(hy.top)};if(tsConfig.is_mobile){hz.y+=ss.Int32.div(this.get_element().height(),4)}eu.showGeoLocationNotification(L,-1,{x:hz.x,y:hz.y})}},spiff.Widget,[spiff.IAppendableView,ss.IDisposable]);ss.initEnum(cT,a,{noHit:0,areaHit:1,nearHit:2,exactHit:3});ss.initEnum(cU,a,{none:0,misc:1,trendLine:2,referenceLine:3,referenceLineLabel:4,mark:5,markLabel:6});ss.initClass(cV,a,{});ss.initClass(cW,a,{get_objectId:function(){return this.$4},get_worldOffset:function(){return this.$9},get_nodeType:function(){return this.$3},get_boundingBox:function(){return this.$0},get_labelBox:function(){return this.$2},get_children:function(){return this.$1},get_parent:function(){return this.$8},set_parent:function(e){this.$8=e},get_paneKey:function(){return this.$6},set_paneKey:function(e){this.$6=e},get_paneIndex:function(){return this.$5},set_paneIndex:function(e){this.$5=e},get_paneOrderIndex:function(){return this.$7},set_paneOrderIndex:function(e){this.$7=e},addNode:function(e){this.$1.push(e);e.set_parent(this)},addNodes:function(e){ss.arrayAddRange(this.$1,e);for(var L=0;L<e.length;L++){var hy=e[L];hy.set_parent(this)}},resetChildren:function(){ss.clear(this.$1)}});ss.initEnum(cX,a,{rectangle:0,circle:1,line:2,polygon:3});ss.initClass(cY,a,{get_context2D:function(){return this.$2.getContext('2d')},debugDrawBoundingBoxesHierarchy:function(e){this.clear();this.$0(e)},debugDrawBoundingBoxesHierarchies:function(e){this.clear();for(var L=0;L<e.length;L++){var hy=e[L];this.$0(hy)}},clear:function(){this.get_context2D().clearRect(0,0,this.$2.width,this.$2.height)},done:function(){this.$4.style.position=this.$3;this.$1.removeChild(this.$2)},$0:function(e){var L=new Array;L.push(e);while(L.length>0){var hy=L.shift();if(hy.get_nodeType()===2){var hz=hy.get_boundingBox();this.get_context2D().save();if(cY.$0%2===0){this.get_context2D().fillStyle='rgba(120, 255, 20, 0.1)'}else{this.get_context2D().fillStyle='rgba(20, 255, 120, 0.1)'}this.get_context2D().fillRect(hz.x,hz.y,hz.w,hz.h);this.get_context2D().restore();++cY.$0}if(hy.get_nodeType()===3||hy.get_nodeType()===5){var hA=hy.get_boundingBox();this.get_context2D().save();this.get_context2D().fillStyle='rgba(255, 0, 0, 0.2)';this.get_context2D().fillRect(hA.x,hA.y,hA.w,hA.h);this.get_context2D().restore()}if(hy.get_nodeType()===4){var hB=hy.get_boundingBox();this.get_context2D().save();this.get_context2D().fillStyle='rgba(0, 0, 255, 0.2)';this.get_context2D().fillRect(hB.x,hB.y,hB.w,hB.h);this.get_context2D().restore()}var hC=hy.get_children();hC.forEach(function(hD){L.push(hD)})}}});ss.initClass(cZ,a,{hitTestPanes:function(e){var L=[];var hy=new Array;hy.push(this.$5);while(hy.length>0){var hz=hy.pop();var hA=tab.RectXYUtil.intersectsWith(hz.get_boundingBox(),e);if(hA){if(hz.get_nodeType()===1){L.push(hz.get_paneKey())}else{var hB=hz.get_children();hB.forEach(function(hC){hy.push(hC)})}}}return L},hitTest:function(e,L,hy){if(tab.RectXYUtil.isEmpty(e)){return[]}var hz=this.hitTestBoundingBoxes(e,L,hy);return(L?this.hitTestSingle(e,hy,hz):this.$1(e,hy,hz))},hitTestSingle:function(e,L,hy){var hz=e.x+e.w/2;var hA=e.y+e.h/2;var hB={};var hC=[];for(var hD=hy.length-1;hD>=0;hD--){var hE=hy[hD];if(hE.get_objectId()<0){continue}var hF=cW.findPaneNode(hE);if(ss.isNullOrUndefined(hF)){continue}if(ss.isNullOrUndefined(hB[hF.get_paneIndex()])){hB[hF.get_paneIndex()]=[];hC.push(hF)}hB[hF.get_paneIndex()].push(hE)}var hG=[];var hH=[];var hI={};for(var hJ=0;hJ<hC.length;hJ++){var hK=hC[hJ];var hL=L.getPaneDrawInfoFromKey(hK.get_paneKey());var hM=tab.RectXYUtil.offsetRect(e,{x:-hL.get_paneRect().x,y:-hL.get_paneRect().y});var hN=hB[hK.get_paneIndex()];for(var hO=0;hO<hN.length;hO++){var hP=hN[hO];var hQ=hL.getMarkState(hP.get_objectId());var hR=hP.get_worldOffset();var hS=hL.getMarkProperty('tuple_id',hP.get_objectId());var hT=false;if(ss.isValue(hP.get_labelBox())){hT=tab.RectXYUtil.intersectsWithMoreThanSharedEdge(hP.get_labelBox(),e)}if(hT){hG.push(new da.$ctor1(hS,6,3));hI[hS]={item1:hK.get_paneOrderIndex(),item2:hQ}}var hU=cZ.$0(hL,hM,hP.get_objectId(),hR,hL.get_markType());if(hU){hG.push(new da.$ctor1(hS,5,3));hI[hS]={item1:hK.get_paneOrderIndex(),item2:hQ}}else if(hG.length===0){var hV=cZ.$1(hL,hM,hP.get_objectId(),hR,hL.get_markType());if(hV){var hW;switch(hL.get_markType()){case'line':{hW=en.$n(hL,hz,hA,hP.get_objectId());break}case'bar':case'square':{hW=en.$b(hL,hz,hA,hP.get_objectId());break}case'shape':{hW=en.$1y(hL,hz,hA,hP.get_objectId());break}case'text':{hW=en.$1G(hL,hz,hA,hP.get_objectId());break}case'area':{hW=en.$3(hL,hz,hA,hP.get_objectId());break}default:{hW=cR.getSquaredDistanceToCenter(hP.get_boundingBox(),{x:hz,y:hA});break}}var hX=new da.$ctor1(hS,5,2);hH.push({item1:hX,item2:hW});hI[hS]={item1:hK.get_paneOrderIndex(),item2:hQ}}else{}}}}if(hG.length>0){var hY=this.$4(hG,hI);if(hY.get_hitType()===3){return[hY]}}if(hH.length>0){var hZ=this.$3(hH,hI);if(hZ.get_hitType()===2){return[hZ]}}return[]},$1:function(e,L,hy){var hz=[];for(var hA=hy.length-1;hA>=0;hA--){var hB=hy[hA];var hC=hB.get_objectId();if(hC<0){continue}var hD=cW.findPaneNode(hB);if(ss.isNullOrUndefined(hD)){continue}var hE=L.getPaneDrawInfoFromKey(hD.get_paneKey());var hF=cZ.getTransformInfo(hE,hB);var hG=cZ.rectangleAreaHit(hE,hB.get_boundingBox(),e,hC,hF,hE.get_markType());if(hG){hz.push(new da.$ctor1(hE.getMarkProperty('tuple_id',hC),5,1))}}return hz},hitTestBoundingBoxes:function(e,L,hy){if(tab.RectXYUtil.isEmpty(e)){return[]}var hz=[];var hA=new Array;var hB={};hA.push(this.$5);while(hA.length>0){var hC=hA.pop();var hD=e;if(L&&ss.isValue(hy)&&hC.get_nodeType()===3){var hE=cW.findPaneNode(hC);if(ss.isValue(hE)){var hF=hE.get_paneKey();if(ss.keyExists(hB,hF)){hD=hB[hF]}else{var hG=hy.getPaneDrawInfoFromKey(hE.get_paneKey());if(ss.isValue(hG)){var hH;switch(hG.get_markType()){case'bar':case'square':{hH=en.$c(hG,hC.get_objectId());break}case'shape':{hH=en.$1z(hG,hC.get_objectId());break}case'text':{hH=en.$1H(hG,hC.get_objectId());break}case'area':{hH=en.$4(hG,hC.get_objectId());break}default:{hH=null;break}}if(ss.isValue(hH)&&!tab.SizeUtil.isEmpty(hH)){hD=tab.RectXYUtil.outsetRectSizeF(hD,hH)}}hB[hF]=hD}}}var hI=tab.RectXYUtil.intersectsWithMoreThanSharedEdge(hC.get_boundingBox(),hD);if(!hI&&L&&ss.isValue(hC.get_labelBox())){hI=tab.RectXYUtil.intersectsWithMoreThanSharedEdge(hC.get_labelBox(),e)}if(hI){if(hC.get_nodeType()===3){hz.push(hC)}else{var hJ=hC.get_children();hJ.forEach(function(hK){hA.push(hK)})}}}return hz},$4:function(e,L){if(e.length===0){return new da.$ctor1(0,0,0)}var hy=new da.$ctor1(0,0,0);e.sort(function(hC,hD){return((hC.get_id()>hD.get_id())?-1:1)});for(var hz=0;hz<e.length;hz++){var hA=e[hz];if(!ss.keyExists(L,hA.get_id())){continue}if(L[hA.get_id()].item2==='markStateInvisible'){continue}if(hy.get_hitType()===0){hy=hA}else{var hB=this.$0(hA.get_id(),hy.get_id(),L);if(hB>0){hy=hA}else if(hB===0){if(hA.get_hitObjectType()>hy.get_hitObjectType()){hy=hA}}}}return hy},$3:function(e,L){if(e.length===0){return new da.$ctor1(0,0,0)}var hy=new da.$ctor1(0,0,0);var hz=null;e.sort(function(hE,hF){return((hE.item1.get_id()>hF.item1.get_id())?-1:1)});for(var hA=0;hA<e.length;hA++){var hB=e[hA];var hC=hB.item1;var hD=hB.item2;if(!ss.keyExists(L,hC.get_id())){continue}if(L[hC.get_id()].item2==='markStateInvisible'){continue}if(hy.get_hitType()===0){hy=hC;hz=hD}else if(ss.Nullable$1.lt(hD,hz)){hy=hC;hz=hD}else if(hD===hz&&this.$0(hC.get_id(),hy.get_id(),L)>0){hy=hC}}return hy},$0:function(e,L,hy){var hz=hy[e];var hA=hy[L];var hB=this.$2(hz.item2);var hC=this.$2(hA.item2);if(hB>hC){return 1}if(hB===hC){var hD=hz.item1;var hE=hA.item1;if(hD>hE){return 1}if(hD===hE){return 0}}return-1},$2:function(e){switch(e){case'markStateInvisible':{return 0}case'markStateNormal':{return 1}case'markStateHighlighted':{return 2}case'markStateSelected':{return 3}default:{return-1}}}});ss.initClass(da,a,{get_id:function(){return this.$2},get_hitObjectType:function(){return this.$0},get_hitType:function(){return this.$1},get_shouldRenderOverlay:function(){return this.$3},get_overlayTargetType:function(){switch(this.$0){case 3:case 4:{return'ref-line'}case 2:{return'trend-line'}case 5:case 6:{return'mark'}default:{return'unspecified'}}},get_tooltipTargetType:function(){switch(this.$0){case 3:case 4:case 2:{return'visualparts'}case 5:case 6:{return'mark'}default:{return'unspecified'}}},doNotRenderOverlay:function(){this.$3=false}});da.$ctor1.prototype=da.prototype;ss.initClass(db,a,{});ss.initClass(dG,a,{$1:null},spiff.Template,[ss.IDisposable]);ss.initClass(dc,a,{$1:function(){this.prevButton.addClass('tabCatLegendScrollLeft');this.nextButton.addClass('tabCatLegendScrollRight')}},dG,[ss.IDisposable]);ss.initInterface(dd,a,{get_viewType:null,get_viewModel:null,get_active:null,set_active:null});ss.initInterface(df,a,{get_filterTable:null,get_quickFilter:null,shouldDeferChanges:null,updateStateIfNeeded:null,clearRangeAnchorAndSelection:null,forEachSelected:null,onListItemClick:null,fetchChildNodeByIndex:null,handleItemClick:null,handleClickIfPending:null});ss.initClass(dj,a,{_getMenuItemForOption:function(e){if(ss.isNullOrEmptyString(e.value)){return new dijit.MenuSeparator}else{var L=ss.mkdel(this,function(){this._setValueAttr(e)});var hy=new Object;hy.option=e;hy.label=e.label;hy.onClick=L;hy.disabled=e.disabled||false;return new tableau.base.widget.ui.iMenuItem(hy)}}},Object);ss.initInterface(dk,a,{get_filterType:null},[ss.IDisposable]);ss.initInterface(dl,a,{add_remoteUpdateComplete:null,remove_remoteUpdateComplete:null,get_captions:null,get_currentPointIndex:null,clickNext:null,clickPrevious:null});ss.initInterface(dm,a,{get_dashboardViewModel:null,get_flipboardModel:null});ss.initInterface(dn,a,{get_type:null});ss.initClass(dp,a,{get_imageNode:function(){return this.$2},set_imageNode:function(e){this.$2=e},get_index:function(){return this.$1},get_src:function(){return this.$3},get_bounds:function(){return this.$0},get_version:function(){return this.$4}});ss.initClass(dq,a,{get_image:function(){return this.$0}},ss.EventArgs);ss.initClass(dr,a,{});ss.initClass(ds,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(dt,a,{get_domRoot:function(){return this.get_template().get_domRoot()},get_image:function(){return this.$k},$i:function(){return this.get_viewModel()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(tsConfig.is_mobile&&tsConfig.is_authoring&&tsConfig.current_sheet_type==='dashboard'){this.get_element().addClass('tabDontBustMyClicks')}this.handleNewImageZone()},handleNewImageZone:function(){this.createImageZoneView()},createImageZoneView:function(){var e=ss.mkdict(['position','absolute','overflow','hidden','top','0px','left','0px','right','0px','bottom','0px']);this.get_template().get_domRoot().css(e);if(!this.$e()){this.$k=this.$b()}else{this.$g()}},$e:function(){var e=this.get_image();if(ss.isNullOrUndefined(e)||!ss.referenceEquals(e.attr('src'),this.$i().get_imageUrl())){return false}else{var L=e.get(0)['width'];var hy=e.get(0)['height'];if(L===0&&hy===0){return false}}return true},$b:function(){var e=$('<img>');var L=ss.mkdel(this,function(){if(ss.isNullOrUndefined(this.$k)){window.setTimeout(ss.mkdel(this,function(){this.$j=e.get(0);this.$g()}),1)}else{this.$j=e.get(0);this.$g()}e.unbind('load')});e.bind('load',L);var hy=this.$i().get_imageUrl();e.css('border','none').attr('src',hy);return e},$9:function(e){this.get_template().get_domRoot().empty();this.get_template().get_domRoot().append(e)},$d:function(){this.$g()},$g:function(){var e=this.$i().get_imageZonePresModel();if(e.qWY){this.$f()}var L=this.$h();this.$9(L);if(e.OvI){this.$a(L)}return L},$c:function(){var e=this.$i().get_zonePresModel();var L=this.$i().get_imageZonePresModel();var hy=gV.absolutizeURI(L.ZNi);var hz=e.jAM==='bitmap'&&!tab.MiscUtil.isNullOrEmpty(L.ixs)&&!tab.MiscUtil.isNullOrEmpty(hy);if(hz){return $('<a/>').attr('href',hy).attr('target','_blank').css(ss.mkdict(['position','absolute','outline','none']))}else{return $('<div/>')}},$h:function(){var e=this.get_image();var L=this.$c();L.append(e);return L},$f:function(){var e=this.$i().get_zonePresModel();var L=this.$j['width'];var hy=this.$j['height'];if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()>8){L=this.$j['naturalWidth'];hy=this.$j['naturalHeight']}var hz=0;var hA=0;var hB;if(L/e.rec>=hy/e.EUR){hB={width:e.rec+'px',height:'auto'};hz=e.rec;hA=ss.Int32.trunc(e.rec/L*hy)}else{hB={height:e.EUR+'px',width:'auto'};hA=e.EUR;hz=ss.Int32.trunc(e.EUR/hy*L)}if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()>8){var hC=window.screen['deviceXDPI'];var hD=window.screen['systemXDPI'];var hE=hC/hD>1;if(!hE&&hz>0&&hA>0&&hz/L<0.75&&L<500&&hy<500){var hF=this.$k.get(0).getAttribute('src');var hG=dr.scaleImage(this.$j,hz,hA,ss.Int32.trunc(L),ss.Int32.trunc(hy));this.$k=$(hG);this.$k.get(0).setAttribute('src',hF);hB=ss.mkdict(['width',hz+'px','height',hA+'px'])}else{this.$k=$(this.$j)}}this.$k.css(hB)},$a:function(e){var L=this.$i().get_zonePresModel();var hy=ss.Int32.div(L.EUR-this.get_image().height(),2);var hz=ss.Int32.div(L.rec-this.get_image().width(),2);e.css(ss.mkdict(['position','absolute','top',hy.toString()+'px','left',hz.toString()+'px']))}},ss.makeGenericType(spiff.BaseView$1,[du]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[du])]);ss.initClass(du,a,{add_newImageZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newImageZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_zonePresModel:function(){return this.$2.get_zone()},get_imageZonePresModel:function(){return this.$2.get_presModel()},get_imageUrl:function(){var e=tab.CommandController.get().get_legacySession();var L=e.formatDashboardTempfileReference(this.get_imageZonePresModel().ixs,true,false);return L},handleNewImageZone:function(){if(ss.isValue(this.$2$1)){this.$2$1()}}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(ev,a,{postCreate:function(){this.inherited(arguments);if(this.$4){var e=new tableau.util.NoClickDelay(this.domNode)}},$0:function(){this.getParent().focusChild(this)},$1:function(e){if(ss.isValue(this.$3)){window.clearTimeout(ss.unbox(this.$3));this.$3=null}this.$3=window.setTimeout(e,this.$2)},_onClick:function(e){if(this.$4){if(!this._isReasonableEvent(e)){return}var L=ss.mkdel(this,function(){this.getParent().onItemClick(this,e);dojo.stopEvent(e)});this.$0();this.$1(L)}else{this.inherited(arguments)}},_onHover:function(e){if(this.$4){this._onClick(e)}else{this.inherited(arguments)}}},dijit.MenuItem);ss.initClass(gT,a,{},ev);ss.initClass(dw,a,{},gT);ss.initInterface(dx,a,{get_location:null,set_location:null});ss.initClass(dy,a,{addFontList:function(e){if(ss.isNullOrUndefined(this.$0)){this.$0=ss.arrayClone(e);return}var L=_.intersection(this.$0,e);this.$0=L},toFontFamilyProvider:function(){if(ss.isNullOrUndefined(this.$0)){return new fO.$ctor2([])}return new fO.$ctor2(Array.prototype.slice.call(this.$0))}});ss.initInterface(dz,a,{get_title:null,get_id:null,get_contentViewType:null,get_contentViewModel:null,get_additionalContentViewClass:null},[ss.IDisposable,spiff.IViewModel]);ss.initInterface(dA,a,{get_paneContents:null,get_activePaneTitle:null,set_activePaneTitle:null});ss.initInterface(dB,a,{add_loadComplete:null,remove_loadComplete:null,refreshImages:null,destroy:null,reset:null},[spiff.IScrollable]);ss.initInterface(dC,a,{instantiate:null,instantiateFromDomain:null,layout:null,destroy:null,setNewState:null,updateReadout:null,refreshSliderMarksForIE:null});ss.initInterface(dD,a,{newFlipboardNavigatorViewModel:null,newFlipboardViewModel:null,newFlipboardNavigatorView:null,newFlipboardView:null});ss.initInterface(dE,a,{get_caption:null,get_isCurrentPoint:null,get_isCaptured:null,get_storyPointId:null,get_storyPointIndex:null,get_selectedStoryPointStyle:null,get_unselectedStoryPointStyle:null,clickStoryPoint:null,revertStoryPoint:null});ss.initClass(dF,a,{get_domRoot:function(){return this.$c.get_domRoot()},get_scrollIncrement:function(){return this.$b},set_scrollIncrement:function(e){this.$b=e},$6:function(){return(this.$9?this.$a.scrollLeft():this.$a.scrollTop())},$7:function(e){if(this.$9){this.$a.scrollLeft(e)}else{this.$a.scrollTop(e)}},$5:function(){if(this.$9){return this.$a.children()[0].scrollWidth-this.$a.width()}else{return this.$a.children()[0].scrollHeight-this.$a.height()}},reset:function(){if(this.$9){this.$a.scrollLeft(0)}else{this.$a.scrollTop(0)}this.updateButtonState()},dispose:function(){this.$c.dispose();this.$8.dispose()},$3:function(e){this.$7(Math.max(0,this.$6()-this.$b));this.updateButtonState()},$2:function(e){this.$7(Math.min(this.$5(),this.$6()+this.$b));this.updateButtonState()},updateButtonState:function(){this.$4(this.$c.prevButton,this.$1());this.$4(this.$c.nextButton,this.$0())},$1:function(){return this.$6()>0},$0:function(){return this.$6()<this.$5()},$4:function(e,L){e.toggleClass('tabIterButtonDisabled',!L)}},null,[ss.IDisposable]);ss.initInterface(dH,a,{get_totalHeight:null,get_viewportHeight:null,get_itemHeight:null,get_tileCount:null,destroy:null,updateViewport:null,getTileStatus:null,updateTileStatus:null,getTilePosition:null,getTileRange:null,getTileRangeType:null,pixelToTileRange:null,itemToTileIndex:null,globalToLocalItemIndex:null});ss.initClass(dK,a,{get_enabled:function(){return ss.isValue(this.$h)&&this.$i.get_useFastMaps()},$f:function(){return new L.LatLng(this.$i.get_centerLatitude(),this.$i.get_centerLongitude())},getDistanceForScreenPointsInMeters:function(e,hy){var hz=this.$h.containerPointToLatLng(new L.Point(e.x,e.y));var hA=this.$h.containerPointToLatLng(new L.Point(hy.x,hy.y));return hz.distanceTo(hA)},$e:function(){if(this.get_enabled()){var e=this.$i.get_zoom();var L=this.$f();_.defer(ss.mkdel(this,function(){this.$b(L,e,true)}))}},zoomOnPoint:function(e,hy){if(this.get_enabled()){var hz=hx.incrementZoom(this.$i.get_zoom(),hy);var hA=this.$h.containerPointToLatLng(new L.Point(e.x,e.y));_.defer(ss.mkdel(this,function(){this.$b(hA,hz,true)}))}},animateAnchorZoom:function(e,hy){var hz=new L.LatLng(hy.x,hy.y);_.defer(ss.mkdel(this,function(){this.$c(hz,e)}))},zoomRect:function(e){if(this.get_enabled()){var hy=new L.Point(e.x,e.y+e.h);var hz=new L.Point(e.x+e.w,e.y);var hA=new L.LatLngBounds(this.$h.containerPointToLatLng(hy),this.$h.containerPointToLatLng(hz));var hB=new L.Point(e.x+ss.Int32.div(e.w,2),e.y+ss.Int32.div(e.h,2));var hC=this.$h.containerPointToLatLng(hB);this.$8(hA,hC,true)}},moveToBounds:function(e){if(this.get_enabled()){var hy=new L.LatLngBounds(new L.LatLng(e.Qao,e.kVX),new L.LatLng(e.FVU,e.eMT));var hz=new L.LatLng((e.FVU+e.Qao)*0.5,(e.eMT+e.kVX)*0.5);var hA=this.$8(hy,hz,true);if(!hA){this.removeMarkOverlay()}}},$8:function(e,L,hy){var hz=this.$h.getBoundsZoom(e,true);var hA=hx.resolveDesiredZoom(this.$i.get_mapServerPresModel(),hz);hy=hy&&Math.abs(this.$h.getZoom()-hA)<=2;_.defer(ss.mkdel(this,function(){this.$b(L,hA,hy)}));return hy},panTo:function(e,hy){if(this.get_enabled()){var hz=this.$h.latLngToContainerPoint(this.$f());var hA=new L.Point(hz.x-e,hz.y-hy);var hB=this.$h.containerPointToLatLng(hA);var hC=new Object;hC.animate=false;this.$h.panTo(hB,hC)}},getPointLatLong:function(e){var hy=new L.Point(e.x,e.y);var hz=this.$h.containerPointToLatLng(hy);return{x:hz.lat,y:hz.lng}},touchMove:function(e,hy,hz){if(isNaN(hz)||isNaN(hy)||isNaN(e)){return}if(tab.DoubleUtil.isApproximatelyEqual(hz,1)&&!this.$l){this.panTo(e,hy);return}if(!this.$l){$(this.$h.getPanes().mapPane).addClass('leaflet-touching');$(this.$h.getPanes().overlayPane).addClass('leaflet-touching');this.$g=new L.Point(e,hy)}this.$l=true;tab.WindowHelper.cancelAnimationFrame(this.$n);this.$n=tab.WindowHelper.requestAnimationFrame(ss.mkdel(this,function(){var L=hx.combineTileZoomAndStretch(this.$i.get_zoom(),hz);this.$1(L,hz,e,hy)}))},touchEnd:function(e,L,hy){if(this.get_enabled()){this.$a();if(this.$l){var hz=hx.combineTileZoomAndStretch(this.$i.get_zoom(),hy);var hA=hx.resolveDesiredZoom(this.$i.get_mapServerPresModel(),hz);hy=Math.pow(2,hA-this.$i.get_zoom());this.$1(hA,hy,e,L)}this.$l=false}},splatOverlayToMapForTransition:function(e){if(ss.isValue(this.$h)&&ss.isNullOrUndefined(this.$k)){var hy=tabBootstrap.MetricsController.createContext('Leaflet Marks Splat',32,null);{var hz=fv.calculatePixelRatio(true);if(!bd.canvasDensified(e)){hz=1}var hA=Math.floor(2*hz);var hB={x:hA,y:hA,w:e.width-2*hA,h:e.height-2*hA};var hC=Math.floor(this.$h.latLngToContainerPoint(dK.$2(dK.$6)).y*hz);var hD=Math.floor(this.$h.latLngToContainerPoint(dK.$2(dK.$8)).y*hz);if(hD<e.height){hB.h=hD}if(hC>0){hB.y+=hC;hB.h-=hC}var hE=new Object;hE.pixelRatio=hz;this.$k=new L.CanvasOverlay(this.$h.getBounds(),hE);this.$h.addLayer(this.$k);var hF=this.$k.getCanvas();var hG=bb.getRenderContext(hF,'transparent');var hH={x:hA,y:hA,w:hB.w,h:hB.h};hG.drawImage5(e,hB.x,hB.y,hB.w,hB.h,hH.x,hH.y,hH.w,hH.h);e.width=e.width}hy.dispose()}},$2:function(e,hy){this.$i=hy;this.$5();var hz=this.$3();var hA=this.$4();this.$m=new q;this.$m.get_domRoot().appendTo(e);this.$h=new L.Map(this.$m.$4(),hz);this.$j=new L.TileLayer(this.$i.get_tileUrl(),hA);this.$d();this.$h.addLayer(this.$j);this.$i.add_newMapServerInfo(ss.mkdel(this,this.$7));if(this.$i.get_hasWashout()){var hB=this.$i.get_washoutColor();var hC=dK.$0(hB.toRgb());hA=this.$4();hA.opacity=hB.get_a();this.$h.addLayer(new L.TileLayer(hC,hA))}this.$m.$3(this.$i.get_mapBGFillColor());this.$0(this.$i.get_zoom(),false)},$d:function(){var e=(this.$i.get_hasValidTileLayer()?1:0);this.$j.setOpacity(e)},$5:function(){if(ss.isValue(this.$h)){this.$h.remove();this.$h=null;if(ss.isValue(this.$i)){this.$i.remove_newMapServerInfo(ss.mkdel(this,this.$7))}this.$i=null;this.$m.dispose();this.$m=null}},$7:function(){if(this.get_enabled()){if(this.$h._animatingZoom){window.setTimeout(ss.mkdel(this,this.$7),10)}else{this.$d();var e=this.$f();var L=this.$h.latLngToContainerPoint(this.$h.getCenter());var hy=this.$h.latLngToContainerPoint(e);var hz=Math.abs(this.$h.getZoom()-this.$i.get_zoom());if(hz>0.001){}var hA=hz<0.01&&L.distanceTo(hy)<8;this.$b(e,this.$i.get_zoom(),hA);this.$6()}}},$6:function(){var e=$(this.$h.getPanes().tilePane).find('.leaflet-tile-container');for(var L=0;L<e.length;++L){if(!tab.MiscUtil.isNullOrEmpty(e[L].style.visibility)){this.$h._onZoomTransitionEnd();break}}},$9:function(e,L){if(this.get_enabled()){tab.DomUtil.setMarginBox(this.$h.getContainer(),{l:0,t:0,w:e,h:L});this.$h.invalidateSize(false);this.$0(this.$i.get_zoom(),false);this.$m.$2()}},setScrollX:function(e){if(this.get_enabled()){this.$h.getContainer().style.left=-e+'px'}},setScrollY:function(e){if(this.get_enabled()){this.$h.getContainer().style.top=-e+'px'}},removeMarkOverlay:function(){if(ss.isValue(this.$k)){this.$h.removeLayer(this.$k);this.$6();this.$a()}this.$k=null},dispose:function(){this.$5()},$3:function(){var e=new Object;e.center=this.$f();e.zoom=this.$i.get_zoom();e.zoomControl=false;e.attributionControl=false;return e},$4:function(){var e=new Object;e.maxZoom=100;e.maxNativeZoom=this.$i.get_maxZoom();e.minZoom=this.$i.get_minZoom();e.continuousZoom=true;e.intermediateTileLevels=ss.isValue(this.$i.get_intermediateTileLevels())&&this.$i.get_intermediateTileLevels()>1;var L=this.$i.get_mapServerPresModel().WLq;e.zoomOffset=tab.MapUtil.getLeafletZoomOffsetForTileSize(L);e.tileSize=L;return e},$c:function(e,L){var hy=new Object;hy.animate=true;if(L>=0){if(this.$h._animatingZoom){this.$6()}this.$h.setZoomAround(e,L,hy);this.$0(L,true)}},$b:function(e,L,hy){var hz=new Object;hz.animate=hy;if(L>=0){if(this.$h._animatingZoom){this.$6()}this.$h.setView(e,L,hz);this.$0(L,hy)}},$0:function(e,L){var hy=tab.MapUtil.getVisiblePixelWidth(e,this.$i.get_numWorldRepeats(),this.$i.get_tilePixelSize());var hz=this.$m.$5();var hA=Math.ceil((hz-hy)/2);hA=Math.max(hA,0);this.$m.$1(hA,L)},$1:function(e,hy,hz,hA){var hB=new L.Point(hz,hA);hB=hB.subtract(this.$g);var hC=this.$h.containerPointToLayerPoint(this.$h.getSize().divideBy(2));var hD=(new L.Point(0,0)).subtract(hB).divideBy(hy);var hE=hC.add(hD);var hF=this.$h.layerPointToLatLng(hE);if(isNaN(hF.lat)||isNaN(hF.lng)){return}this.$h._animateZoom(hF,e,hC,hy,hB);this.$0(e,false)},$a:function(){$(this.$h.getPanes().mapPane).removeClass('leaflet-touching');$(this.$h.getPanes().overlayPane).removeClass('leaflet-touching');tab.WindowHelper.cancelAnimationFrame(this.$n)}},null,[ss.IDisposable]);ss.initClass(dL,a,{get_domBox:function(){return this.domBox},get_resetButton:function(){return this.resetButton},get_applyDelay:function(){return this.applyDelay},get_isTypeInList:function(){return this.isTypeInList},get_oFilter:function(){return this.oFilter},get_quickFilterViewModel:function(){return this.filterViewModel},get_viewModel:function(){return this.filterViewModel},get_dijitDeclaredClass:function(){return this.declaredClass},get_mode:function(){return this.mode},set_mode:function(e){this.mode=e},get_session:function(){return this.session},set_session:function(e){this.session=e},get_attributes:function(){return this.attributes},set_attributes:function(e){this.attributes=e},get_field:function(){return this.field},get_stateId:function(){return this.stateId},set_stateId:function(e){this.stateId=e},get_modeContents:function(){return this.modeContents},get_domContent:function(){return this.domContent},set_domContent:function(e){this.domContent=e},get_dijitDomNode:function(){return this.domNode},set_dijitDomNode:function(e){this.domNode=e},get_domain:function(){var e=null;if(!!this.get_attributes()['values']){e=this.get_attributes()['values']}return e},get_searchWidget:function(){return this.$g},set_searchWidget:function(e){this.$g=e},get_presModel:function(){return this.presModel},get_backgroundColor:function(){return this.backgroundColor},$c:function(){return this.$f},$d:function(e){this.$f=e},get_quickFilter:function(){return this},get_filterTable:function(){return this.get_quickFilterViewModel().get_catFilterTable()},getCheckDropdownCatmodeClass:function(){return tableau.base.widget.catmode.CheckDropdown},getChecklistCatmodeClass:function(){return tableau.base.widget.catmode.Checklist},getRadiolistCatmodeClass:function(){return tableau.base.widget.catmode.Radiolist},getSliderCatmodeClass:function(){return tableau.base.widget.catmode.Slider},getDropdownCatmodeClass:function(){return tableau.base.widget.catmode.SimpleDropdown},getPatternCatmodeClass:function(){return tableau.base.widget.catmode.Pattern},getTypeInListCatmodeClass:function(){return tableau.base.widget.catmode.TypeIn},makeSmallSearchWidget:function(e,L){return new tableau.base.widget.SmallSearchWidget(e,L)},makeSearchWidget:function(e,L){return new tableau.base.widget.SearchWidget(e,L)},makeFilteringSearchWidget:function(e){return new tableau.base.widget.FilteringSearchWidget(e)},makePendingChangesManager:function(){return new eV(this.get_modeContents(),this.oFilter.table.actual_size,this.oFilter.exclude,this.oFilter.all)},postCreate:function(){this.getSID=ss.mkdel(this,function(){return this.get_stateId()});this.$4();this.$8();if(this.mode!=='pattern'){tableau.util.disableTextSelection(this.get_domContent())}if(this.filterViewModel.get_filterType()!=='Categorical'){}var e={};e.qf=this;if(this.mode==='slider'){this.set_searchWidget(this.makeSmallSearchWidget(e,this.searchDiv))}else if(this.$b()){this.set_searchWidget(this.makeFilteringSearchWidget(e))}else{this.set_searchWidget(this.makeSearchWidget(e,this.searchDiv))}this.get_searchWidget().startup();if(!this.metricsOnly){var L=this.mode==='checkdropdown'||this.mode==='dropdown'||this.mode==='pattern'||this.mode==='typeinlist'||this.shouldHideSearchButton();var hy=this.mode==='pattern'||this.mode==='typeinlist'||this.shouldHideDomainButton();var hz=this.mode==='pattern'||this.mode==='typeinlist'||this.shouldHideResetButton();this.processControlButtons(L,hy,this.shouldHideContextMenu(),hz)}this.initFromState(true,false)},processControlButtons:function(e,L,hy,hz){var hA=0;var hB=function(hC,hD){if(hD){dojo.addClass(hC.domNode,'CFButtonHide')}else{hA+=1;dojo.addClass(hC.domNode,'CFButtonR'+hA)}};hB(this.menuButton,hy);hB(this.domainButton,L);hB(this.searchButton,e);hB(this.resetButton,hz);dojo.addClass(this.domControls,'CF'+hA+'Button');$(this.menuButton.domNode).css('background-color',this.backgroundColor);$(this.domainButton.domNode).css('background-color',this.backgroundColor);$(this.searchButton.domNode).css('background-color',this.backgroundColor);$(this.resetButton.domNode).css('background-color',this.backgroundColor)},setTitleSize:function(e,L){this.titleH=e;this.titleW=L},updateStateIfNeeded:function(){this.set_stateId(this.get_stateId()+1)},handleClickIfPending:function(e){if(this.shouldDeferChanges()){this.get_modeContents().pendingManager.handleItemClicked(cF.filterItem.getIndex(e),e)}},shouldDeferChanges:function(){var e=this.get_attributes()['show-apply']==='true';return e&&(this.get_mode()==='checklist'||this.get_mode()==='checkdropdown')},shouldHideResetButton:function(){return this.hideEmptyTitlebar()||this.get_attributes()['show-all']==='false'||this.get_attributes()['show-filter-state']==='false'},shouldHideSearchButton:function(){return this.hideEmptyTitlebar()||this.get_attributes()['show-search']==='false'},shouldHideIncludeExclude:function(){return tsConfig.current_sheet_type==='dashboard'&&tsConfig.is_authoring||this.hideEmptyTitlebar()||this.get_attributes()['show-exclude']==='false'},shouldHideDomainButton:function(){return this.hideEmptyTitlebar()||this.get_attributes()['show-morefewerbutton']!=='true'},shouldHideContextMenu:function(){if(tsConfig.current_sheet_type==='dashboard'&&tsConfig.is_authoring){return true}var e=tab.CommandsPresModelWrapper.create(this.getContextMenuCommands());return this.hideEmptyTitlebar()||ss.isNullOrUndefined(e)||e.get_commandItems().length===0},$7:function(){return dojo.hasClass(this.domNode,'CFInlineTitle')},resize$1:function(e){dojo.marginBox(this.domNode,e);this.layout(null)},destroy:function(e){if(ss.isValue(this.get_modeContents())&&typeof(this.get_modeContents()['destroy'])==='function'){this.get_modeContents()['destroy']();this.modeContents=null}if(ss.isValue(this.get_searchWidget())){this.get_searchWidget().destroy();this.set_searchWidget(null)}this.requestSetAttributes=null;this.getContextMenuCommands=null;this.showContextMenu=null;this.get_domContent().innerHTML='';this.domContent=null;this.inherited(arguments)},handleItemClick:function(e){if(ss.isValue(this.get_modeContents().pendingManager)){this.get_modeContents().pendingManager.handleItemClicked(cF.filterItem.getIndex(e),e)}if(cF.filterItem.isAllItem(e)){this.doSelectAll(this.isSingleSelect()||cF.filterItem.isChecked(e));return}},getMetrics:function(){var e=dojo.marginBox(this.domNode);var L;if(!this.$6()){L=1;var hy=dojo.contentBox(this.get_domContent());var hz=this.get_domContent().childNodes.length;if(dojo.isFF&&tab.BrowserSupport.get_isMac()){L+=4}return ss.mkdict(['fixed',ss.mkdict(['w',0,'h',e.h-hy.h+L]),'item',ss.mkdict(['w',0,'h',ss.Int32.div(hy.h,hz)])])}else{return ss.mkdict(['fixed',ss.mkdict(['w',0,'h',e.h])])}},$4:function(){this.mode=ss.coalesce(this.get_oFilter().mode,'checklist');if(!ss.isNullOrEmptyString(this.get_oFilter().pattern)){this.mode='pattern'}this.isTypeInList=this.mode==='typeinlist'},initFromState:function(e,L,hy){var hz;var hA;var hB;var hC=tableau.format.formatColumnDisplayName(this.get_oFilter(),false);var hD=0;var hE='';var hF=this.get_oFilter().showFacets&&this.width>100;var hG;var hH=0;var hI=0;var hJ=ss.isValue(this.get_modeContents())&&this.$b();if(ss.isValue(this.get_modeContents())&&ss.isValue(this.get_modeContents().get_scrollNode())&&this.get_modeContents().get_scrollNode().scrollTop>0){hH=this.get_modeContents().get_scrollNode().scrollTop}var hK=ss.isValue(this.modeContents)&&ss.isValue(this.get_modeContents().pendingManager);var hL=hK&&ss.isValue(this.get_modeContents().pendingManager.get_allItemCheckState());var hM=hK&&ss.coalesce(this.get_modeContents().pendingManager.get_allItemCheckState(),false);var hN=(hL?hM:(this.get_oFilter().all||this.get_oFilter().allNotChecked));var hO=$(this.domNode);hO.toggleClass('CFAll',hN);hO.toggleClass('CFValue',!hN);if(this.get_oFilter().exclude){dojo.addClass(this.domNode,'CFExclusive')}else{dojo.removeClass(this.domNode,'CFExclusive')}this.handleResetButtonState();this.updateDomainButton();if(ss.isValue(this.get_modeContents())&&this.get_modeContents().shouldNotReinstantiate()){var hP=dL.$0(this.$c(),this.get_oFilter());var hQ=this.$c().exclude!==this.get_oFilter().exclude;var hR=dL.$1(this.$c(),this.get_oFilter());this.$d(this.get_oFilter());if(ss.isValue(this.get_oFilter().domains)&&ss.contains(this.get_oFilter().domains,'relevant')&&hP||hQ){this.updateSearch()}else if(hR){if(this.get_searchWidget().get_isVisible()){this.get_searchWidget().toggleUI()}}return}this.$d(this.get_oFilter());this.$4();if(this.get_oFilter().exclude){hC=tab.Strings.QuickFilterTitleBarExclusive(hC)}dojo.attr(this.domTitleBar,'title',hC);this.updateTitleBar();if(!hJ){this.get_domContent().innerHTML=''}hB=cF.getBaseItemName(this,'FI');hz=((this.mode==='pattern')?this.get_oFilter().pattern:this.get_oFilter().table.tuples);if(hF&&(this.mode==='slider'||this.mode==='checklist'||this.mode==='checkdropdown'||this.mode==='radiolist'||this.mode==='dropdown')){hG=this.get_oFilter().table.tuples;for(hA=0;hA<hG.length;hA++){hD+=parseInt(hG[hA].f[0].v,10)}hE=hD.toString()}if(hJ){if(!hy&&ss.isValue(this.modeContents.pendingManager)){this.get_modeContents().pendingManager.resetFilterInfo(this.get_oFilter().table.actual_size,this.get_oFilter().exclude,this.get_oFilter().all);this.get_modeContents().pendingManager.resetPendingChanges()}this.get_modeContents().resetContent(hz,hB,hE)}else{if(ss.isValue(this.get_modeContents())&&typeof(this.get_modeContents()['destroy'])==='function'){this.get_modeContents().destroy();this.modeContents=null}this.$5();this.get_modeContents().set_width(this.width);this.get_modeContents().instantiate(hz,hB,hE)}this.$e.refreshRangeAnchorAndSelection();this.conditionals.init(this.get_oFilter().condition,this.get_oFilter().limit);if(!e){this.layout(null)}if(!L&!this.$b()){this.updateSearch()}if(ss.isValue(this.get_modeContents())&&ss.isValue(this.get_modeContents().get_scrollNode())){hI=this.get_modeContents().get_scrollNode().scrollHeight-this.get_modeContents().get_scrollNode().clientHeight;this.get_modeContents().get_scrollNode().scrollTop=Math.min(hH,hI)}},handleResetButtonState:function(){if(ss.isValue(this.get_oFilter().all)&&this.get_oFilter().all){fb.disableResetButton(this.get_resetButton())}else{fb.enableResetButton(this.get_resetButton())}},$1:function(){var e=null;if(this.mode==='checkdropdown'){e=this.getCheckDropdownCatmodeClass()}else if(this.mode==='checklist'){e=this.getChecklistCatmodeClass()}else if(this.mode==='radiolist'){e=this.getRadiolistCatmodeClass()}else if(this.mode==='slider'){e=this.getSliderCatmodeClass()}else if(this.mode==='dropdown'){e=this.getDropdownCatmodeClass()}else if(this.mode==='pattern'){e=this.getPatternCatmodeClass()}else if(this.mode==='typeinlist'){e=this.getTypeInListCatmodeClass()}if(ss.isNullOrUndefined(e)){return}this.modeContents=new e(this,this.get_domContent(),this.get_attributes())},$5:function(){this.$1()},updateSearch:function(){this.get_searchWidget().updateSearch()},applyChanges:function(){this.get_modeContents().applyChanges()},applyChangesByChangelist:function(e){if(this.shouldDeferChanges()){this.get_modeContents().pendingManager.processChanges(e);if(ss.isValue(this.get_modeContents().pendingManager.get_allItemCheckState())){if(ss.unbox(this.get_modeContents().pendingManager.get_allItemCheckState())){dojo.addClass(this.domNode,'CFAll')}else{dojo.removeClass(this.domNode,'CFAll')}}}else{this.get_modeContents().applyChangesByChangelist(e,this.mode)}},applyPendingChangesByChangelist:function(){if(this.get_modeContents().pendingManager.isSelectAll()){this.$0(true)}else if(this.get_modeContents().pendingManager.isDeSelectAll()){this.$0(false)}else{var e=this.get_modeContents().pendingManager.get_pendingChangelist();this.get_modeContents().applyChangesByChangelist(e,this.mode)}this.get_modeContents().pendingManager.resetPendingChanges()},cancelPendingChangesByChangelist:function(){this.get_modeContents().pendingManager.resetPendingChanges();this.initFromState(false,true,true)},$b:function(){return this.mode==='checklist'||this.mode==='radiolist'||this.mode==='checkdropdown'||this.mode==='dropdown'},filterBySearchResults:function(e){if(ss.isNullOrUndefined(e)){this.initFromState(false,true,true)}else if(this.$b()){this.modeContents.updateContent(e);this.$e.clearRangeAnchor()}},updateStateFromSearch:function(e){var L=false;var hy=this.get_isTypeInList();if(this.get_isTypeInList()){this.$a(e)}this.initFromState(L,hy)},$a:function(e){var L;var hy={};var hz;var hA;var hB;var hC;var hD=this.get_oFilter().table.tuples;for(hz=0;hz<hD.length;hz++){hA={};hA.node=this.fetchChildNodeByIndex(hz);hA.tuple=hD[hz];var hE=hD[hz].d;if(ss.isNullOrUndefined(hE)){hE=hD[hz].t[0].v}hy[hE]=hA}for(hz=0;hz<e.tuples.length;hz++){hC=e.tuples[hz];var hF=hC.d;if(ss.isNullOrUndefined(hF)){hF=hC.t[0].v}L=hy[hF];if(ss.isValue(L)&&ss.isValue(L.node)){cF.filterItem.setChecked(L.node,hC.s,L.tuple)}else{hB=tableau.util.binarySearch(Object).call(null,hC,hD,0,null,ss.mkdel(this,this.$9));if(!hB.found){hD.splice(hB.index,0,hC)}}}},$9:function(e,L){var hy=tableau.format.formatTupleDisplayName(e);var hz=tableau.format.formatTupleDisplayName(L);if(ss.referenceEquals(hy,hz)){return 0}else if(ss.compareStrings(hy,hz)<0){return-1}else{return 1}},fetchChildNodeByIndex:function(e){return this.get_modeContents().fetchChildNodeByIndex(e)},isSingleSelect:function(){return this.mode!=='checklist'&&this.mode!=='checkdropdown'&&this.mode!=='typeinlist'},updateDomainButton:function(){if(ss.isNullOrUndefined(this.get_oFilter().domains)||this.get_oFilter().domains.length<=1){dojo.style(this.domainButton.domNode,'display','none');return}dojo.removeClass(this.domainButton.iconNode,'wcIconDomainAll');dojo.removeClass(this.domainButton.iconNode,'wcIconDomainContext');dojo.removeClass(this.domainButton.iconNode,'wcIconDomainRelevant');if(this.get_attributes()['values']===tableau.types.QFDomain.QFD_RELEVANT){this.domainButton.attr('label',tab.Strings.QuickFilterDomainShowMoreValues);dojo.addClass(this.domainButton.iconNode,'wcIconDomainRelevant')}else if(this.get_attributes()['values']===tableau.types.QFDomain.QFD_CONTEXT){this.domainButton.attr('label',tab.Strings.QuickFilterDomainShowFewerValues);dojo.addClass(this.domainButton.iconNode,'wcIconDomainContext')}else{this.domainButton.attr('label',tab.Strings.QuickFilterDomainShowFewerValues);dojo.addClass(this.domainButton.iconNode,'wcIconDomainAll')}},doMenu:function(){this.showContextMenu(this.menuButton.domNode)},toggleReset:function(){fb.disableResetButton(this.resetButton);this.doSelectAll(true,true)},toggleDomain:function(){var e=function(L){return L===tableau.types.QFDomain.QFD_CONTEXT};if(this.get_attributes()['values']===tableau.types.QFDomain.QFD_RELEVANT){this.$2(ss.mkdict(['values',tableau.types.QFDomain.QFD_ALL]),false)}else if(this.get_attributes()['values']===tableau.types.QFDomain.QFD_CONTEXT){this.$2(ss.mkdict(['values',tableau.types.QFDomain.QFD_RELEVANT]),false)}else if(dojo.some(this.get_oFilter().domains,e)){this.$2(ss.mkdict(['values',tableau.types.QFDomain.QFD_CONTEXT]),false)}else{this.$2(ss.mkdict(['values',tableau.types.QFDomain.QFD_RELEVANT]),false)}},getTheAllItemNode:function(){return this.get_modeContents().fetchAllItem()},doSelectAll:function(e,L){if(this.shouldDeferChanges()){this.get_modeContents().pendingManager.processAll(e);if(e){dojo.addClass(this.domNode,'CFAll')}else{dojo.removeClass(this.domNode,'CFAll')}if(L){this.applyPendingChangesByChangelist()}}else{this.$0(e)}},$0:function(e){var L,hy;var hz;var hA;var hB;var hC=[];if(this.mode==='checklist'||this.mode==='checkdropdown'){if($(this.get_domContent()).find('.tiledContent').length>0){hy=this.get_oFilter().table.actual_size;var hD=(this.get_oFilter().exclude?!e:e);for(L=0;L<hy;++L){hA=this.fetchChildNodeByIndex(L);if(ss.isValue(hA)){cF.filterItem.setChecked(hA,hD)}}}}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){hB=new tab.LegacyCategoricalQuickFilterData(this.get_oFilter().targetSheets,this.get_field(),this.get_oFilter().exclude,null);if(e){hB.set_includeAll(true)}tab.FilterClientCommands.updateCategoricalFilter(hB)}if(e){tab.FilterClientCommands.setCategoricalFilterValues(this.get_session().get_visualId(),this.get_field(),'filter-all',null,null)}else if(this.mode==='checklist'||this.mode==='checkdropdown'){fb.enableResetButton(this.resetButton);hz=new Object;hz.schema=this.get_oFilter().table.schema;hz.tuples=[];if(this.get_oFilter().exclude){this.$3();return}tab.FilterClientCommands.setCategoricalFilterValues(this.get_session().get_visualId(),this.get_field(),'filter-replace',hC,null)}},$3:function(){var e;var L,hy=0,hz=this.get_oFilter().table.actual_size-1;var hA=new tab.Changelist;var hB=new tab.RawChange;if($(this.get_domContent()).find('.tiledContent').length>0){for(L=hy;L<=hz;L++){e=this.get_modeContents().fetchChildNodeByIndex(L);if(ss.isValue(e)){cF.filterItem.setChecked(e,true)}}}hB.setRange(new tab.IntegerRange(hy,hz),true);hA.addChange(hB);this.get_modeContents().applyChangesByChangelist(hA,this.mode)},toggleSearchUI:function(){this.get_searchWidget().toggleUI()},$2:function(e,L){this.requestSetAttributes(e,L)},doscrollHoriz:function(){this.get_domContent().scrollLeft=this.domHorizScroll.scrollLeft},$6:function(){return this.mode==='slider'||this.mode==='dropdown'||this.mode==='checkdropdown'||this.mode==='pattern'},getTitleOffset:function(){if(dojo.hasClass(this.domNode,'CFInlineTitle')){return 0}else{return dojo.marginBox(this.domTitleBar).h}},_getSearchWidgetDim:function(){var e=this.get_searchWidget().get_dijitDomNode();if(dojo.style(e,'display')==='none'||this.$b()){var L={};L.h=0;L.l=0;L.t=0;L.w=0;return L}else{return dojo.marginBox(e)}},layoutVertical:function(e){var L;var hy=ss.mkdict(['h',0]);var hz=ss.mkdict(['h',0]);this._layoutSearchWidget(e);hz=this._getSearchWidgetDim();L=e.h-hy.h-hz.h;this.get_modeContents().layout({w:e.w,h:L},false)},_getContentFloatingElement:function(){return(this.get_isTypeInList()?this.get_searchWidget().get_dijitDomNode():this.get_domContent())},_layoutSearchWidget:function(e){var L;var hy;if(this.get_searchWidget().get_isVisible()){hy=ss.mkdict(['h',0]);L=e.h-hy['h'];this.get_searchWidget().layout(L)}},_layoutTypeInList:function(e){if(this.$7()){dojo.marginBox(this.get_searchWidget().get_dijitDomNode(),e)}else{dojo.style(this.get_searchWidget().get_dijitDomNode(),{height:'auto',width:'auto'})}this.layoutVertical(e)},_layoutCompactFilter:function(e){dojo.addClass(this.domNode,'CFHorizontal');this._layoutSearchWidget(e);this.get_modeContents().layout({w:e.w,h:e.h},false)},layout:function(e){var L;var hy,hz;var hA;this.updateTitleBar();if(ss.isNullOrUndefined(this.domNode.parentNode)){return}dojo.removeClass(this.domNode,'CFHorizontal');dojo.removeClass(this.domNode,'CFInlineTitle');dojo.style(this.domHorizScroll,'display','none');hy=dojo.marginBox(this.domTitleBar);this.resetTitleSize();if(this.titleH>0){hy.h=this.titleH;dojo.marginBox(this.domTitleBar,ss.mkdict(['h',hy.h]))}if(this.titleW>0){hy.w=this.titleW;dojo.marginBox(this.domTitleBar,ss.mkdict(['w',hy.w]))}tableau.util.setupTitleEllipsis($(this.domTitleBar));hz=dojo.contentBox(this.domNode);hA={w:hz.w,h:hz.h};if(!this.metricsOnly){if(!this.hideEmptyTitlebar()){L=this._getContentFloatingElement();if(this.titleW>0){hA.w=hz.w-hy.w;dojo.style(this.domTitleBar,'float','left');dojo.style(L,'float','left');dojo.addClass(this.domNode,'CFInlineTitle')}else{hA.h=hz.h-hy.h;dojo.style(this.domTitleBar,'float','none');dojo.style(L,'float','none')}}}if(this.$6()){this._layoutCompactFilter(hA)}else if(this.get_isTypeInList()){this._layoutTypeInList(hA)}else{this.layoutVertical(hA)}},$8:function(){tableau.util.localizeDojoLabeledControls([{item1:this.searchButton,item2:'QuickFilterSearch'},{item1:this.domainButton,item2:'QuickFilterDomainShowFewerValues'}])},clearRangeAnchorAndSelection:function(){this.$e.clearRangeAnchorAndSelection()},forEachSelected:function(e){if(ss.isNullOrUndefined(e)||$.isFunction(e)){return}var L=this.$e.get_selectedIndexes();for(var hy=0,hz=L.length;hy<hz;hy++){var hA=L[hy];var hB=this.fetchChildNodeByIndex(hA);e(hA,hB)}},onListItemClick:function(e){this.$e.onListItemClick(e)},notifyChange:function(e){this.$e.notifyChange(e)}},dY,[df]);ss.initClass(dM,a,{get_filterType:function(){return this.$2.get_filterType()},get_legacyCategoricalQuickFilterModel:function(){return this.$2},get_mode:function(){return this.$2.get_mode()},get_pattern:function(){return this.$2.get_pattern()},get_isAllMode:function(){return this.$2.get_isAllMode()},get_allItemsAreChecked:function(){return this.$2.get_allItemsAreChecked()},get_noItemsAreChecked:function(){return this.$2.get_noItemsAreChecked()},get_exclude:function(){return this.$2.get_exclude()},get_isTiled:function(){return this.$2.get_isTiled()},get_isSearchable:function(){return this.$2.get_isSearchable()},get_summary:function(){return this.$2.get_summary()},get_underlyingDataSourceIsCube:function(){return this.$2.get_underlyingDataSourceIsCube()},get_condition:function(){return this.$2.get_condition()},get_limit:function(){return this.$2.get_limit()},get_rangeType:function(){return this.$2.get_rangeType()},get_catFilterTable:function(){return this.$2.get_catFilterTable()},get_domainActualSize:function(){return this.$2.get_domainActualSize()},get_tuples:function(){return this.$2.get_tuples()},handleUpdateFilterContent:function(){},dispose:function(){this.$2.remove_filterUpdated(ss.mkdel(this,this.handleUpdateFilterContent));this.$2=null;spiff.BaseViewModel.prototype.dispose.call(this)}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel,dk]);ss.initClass(dN,a,{postCreate:function(){this.inherited(arguments);dojo.style(this.domNode,'display','none');if(this.buttons==='YesNo'){var e=new Object;e.label=tab.Strings.DialogYesButtonText;e.onClick=ss.mkdel(this,this.$4);this.$6=new dijit.form.Button(e);e.label=tab.Strings.DialogNoButtonText;e.onClick=ss.mkdel(this,this.$3);this.$5=new dijit.form.Button(e);var L=this.containerNode;L.appendChild(document.createElement('br'));L.appendChild(this.$6.domNode);L.appendChild(this.$5.domNode)}var hy=function(hz){hz.stopPropagation()};$(this.domNode).bind(this.$1('touchstart'),hy).bind(this.$1('touchend'),hy).bind(this.$1('click'),hy).bind(this.$1('mousedown'),hy)},destroy:function(){$(this.domNode).unbind('touchstart').unbind('touchcancel').unbind('touchend').unbind('touchmove').unbind('click').unbind('mousedown').unbind('mousemove').unbind('mouseup');this.inherited(arguments)},show:function(){this.inherited(arguments);dojo.style(this.domNode,'display','')},hide:function(){this.inherited(arguments);dojo.style(this.domNode,'display','none')},_setup:function(){var e=this.domNode;if(!!this.titleBar&&this.draggable){var L=new Object;L.handle=this.titleBar;L.timeout=0;this._moveable=((dojo.isIE===6)?new dojo.dnd.TimedMoveable(e,L):new dojo.dnd.Moveable(e,L));dojo.subscribe('/dnd/move/stop',ss.mkdel(this,this._endDrag))}else{dojo.addClass(e,'dijitDialogFixed')}var hy={};hy['id']=this.id+'_underlay';hy['class']=dojo.map(this.$2(),function(hB){return hB+'_underlay'}).join(' ');this._underlay=new tableau.base.widget.DialogUnderlay(hy);var hz=this._underlay;var hA=new Object;hA.node=e;hA.duration=this.duration;hA.onBegin=ss.mkdel(hz,hz.show);this._fadeIn=dojo.fadeIn(hA);hA=new Object;hA.node=e;hA.duration=this.duration;hA.onEnd=function(){e.style.visibility='hidden';e.style.top='-9999px';hz.hide()};this._fadeOut=dojo.fadeOut(hA)},uninitialize:function(){if(!!this.$6){this.$6.destroyRecursive()}if(!!this.$5){this.$5.destroyRecursive()}this.$6=this.$5=null;this.inherited(arguments)},_position:function(){if(!dojo.hasClass(dojo.body(),'dojoMove')){var e=this.domNode;var L=tabBootstrap.ViewerBootstrap.get_instance().getViewport();var hy=this._relativePosition;var hz=(ss.isValue(hy)?null:dojo.marginBox(e));var hA=0;var hB=0;dojo.style(e,ss.mkdict(['left',Math.floor(hA+(ss.isValue(hy)?hy.l:((L.w-hz.w)/2)))+'px','top',Math.floor(hB+(ss.isValue(hy)?hy.t:((L.h-hz.h)/2)))+'px']))}},onHide:function(){this.inherited(arguments);window.setTimeout(ss.mkdel(this,this.destroyRecursive),500)},$1:function(e){return e.toString()},$2:function(){return this['class'].split(new RegExp('\\s'))},$4:function(e){this.$0(true,e)},$3:function(e){this.$0(false,e)},$0:function(e,L){dojo.stopEvent(L);this.hide();if(e){if(ss.isValue(this.onYes)){this.onYes()}}else if(ss.isValue(this.onNo)){this.onNo()}}},dijit.Dialog);ss.initClass(dO,a,{get_applyDelay:function(){throw new ss.NotSupportedException},get_isTypeInList:function(){return false},get_oFilter:function(){return this.oFilter},get_quickFilterViewModel:function(){return this.filterViewModel},get_viewModel:function(){return this.filterViewModel},get_dijitDeclaredClass:function(){return this.declaredClass},get_mode:function(){return this.$c},set_mode:function(e){window.alert(tab.Strings.noLoc('Bad interface call to set LegacyHierarchicalQuickFilter.Mode'))},get_session:function(){return this.session},set_session:function(e){this.session=e},get_domain:function(){var e=null;if(!!this.get_attributes()['values']){e=this.get_attributes()['values']}return e},get_attributes:function(){return this.attributes},set_attributes:function(e){this.attributes=e},get_field:function(){return this.field},get_stateId:function(){return this.stateId},set_stateId:function(e){this.stateId=e},get_modeContents:function(){return null},get_domContent:function(){return this.domContent},set_domContent:function(e){this.domContent=e},get_dijitDomNode:function(){return this.domNode},set_dijitDomNode:function(e){this.domNode=e},get_searchWidget:function(){return this.searchWidget},set_searchWidget:function(e){this.searchWidget=e},destroy:function(){this.tree.remove_notifyChangeCalled(ss.mkdel(this,this.$8));this.searchWidget.destroy();this.searchWidget=null;this.tree.destroy();this.tree=null;this.inherited(arguments)},applyChangesByChangelist:function(e){window.alert(tab.Strings.noLoc('Bad interface call on LegacyHierarchicalQuickFilter.ApplyChangesByChangelist'))},postCreate:function(){if(this.filterViewModel.get_filterType()!=='Hierarchical'){}var e=0;this.$a=ss.mkdel(this,function(){return this.stateId});var L={};L.qf=this;this.searchWidget=new tableau.base.widget.SearchWidget(L,this.searchDiv);this.searchWidget.startup();this.initFromState(true);this.$7();var hy=this.tree;dojo.forEach(this.tree.rootNode.getChildren(),function(hA){if(hA.isExpandable){hy._expandNode(hA)}});if(!this.metricsOnly){var hz=ss.mkdel(this,function(hA,hB){if(!this._hasDomNode(hA)){return}if(hB){dojo.addClass(hA.domNode,'HFButtonHide')}else{e+=1;dojo.addClass(hA.domNode,'HFButtonR'+e)}$(hA.domNode).css('background-color',this.backgroundColor)});hz(this.menuButton,this.shouldHideContextMenu());hz(this.searchButton,this.shouldHideSearchButton());dojo.addClass(this.domControls,'HF'+e+'Button')}dO.$0(this.textStyle,this.backgroundColor)},$2:function(){if(!!dojo.isIE){dojo.style(this.domContent,'zoom','1');var e=$(this.domContent);tab.WindowHelper.requestAnimationFrame(function(){fv.manualFadeAnimation(e,96,100,8,3875,true)})}},shouldHideLevelButtons:function(){return this.attributes['show-levels']==='false'},shouldHideSearchButton:function(){return this.hideEmptyTitlebar()||this.attributes['show-search']==='false'},shouldHideContextMenu:function(){if(tsConfig.current_sheet_type==='dashboard'&&tsConfig.is_authoring){return true}var e=tab.CommandsPresModelWrapper.create(this.getContextMenuCommands());return this.hideEmptyTitlebar()||ss.isNullOrUndefined(e)||e.get_commandItems().length===0},resize:function(e){dojo.marginBox(this.domNode,e);this.layout(null)},getMetrics:function(){var e=this.tree.rootNode.getChildren().length;var L=dojo.contentBox(this.tree.domNode);var hy=dojo.marginBox(this.domNode);return ss.mkdict(['fixed',ss.mkdict(['w',0,'h',hy.h-L.h+1]),'item',ss.mkdict(['w',0,'h',Math.max(ss.Int32.div(L.h,e),20)])])},isSingleSelect:function(){return this.$c!=='checklist'},initMode:function(){this.$c=this.$5()},$5:function(){var e='checklist';if(ss.keyExists(this.attributes,'mode')){e=this.attributes['mode']}return e},createTreeDom:function(){var e=new tableau.base.widget.hsm.TreeModel(this.session,this.field,this.oFilter.levels.length,this.isSingleSelect());e.onChildrenChange(e.root,e.itemsFromTable(this.oFilter.table[0],0));var L=new Object;L.model=e;L.showRoot=false;this.tree=new tableau.base.widget.hsm.Tree(L);this.tree.add_notifyChangeCalled(ss.mkdel(this,this.$8));this.connect(this.tree,'_onTreeFocus',ss.mkdel(this,this.updateRangeAnchor));this.domContent.appendChild(this.tree.domNode)},hideEmptyTitlebar:function(){return ss.isNullOrEmptyString(tableau.format.formatColumnDisplayName(this.oFilter,false))},setTitleSize:function(e,L){this.$d=e;this.$e=L},initFromState:function(e){if(!ss.referenceEquals(this.$5(),this.$c)){dojox.data.dom.removeChildren(this.domContent)}if(!this.domContent.hasChildNodes()){this.initMode();this.createTreeDom()}var L=tableau.format.formatColumnDisplayName(this.oFilter,false);dojo.attr(this.domTitleBar,'title',L);this.updateTitleBar();if(ss.isValue(this.domLevelContainer)){dojox.data.dom.removeChildren(this.domLevelContainer)}if(this.shouldHideLevelButtons()){if(ss.isValue(this.domLevelBox)){dojo.attr(this.domLevelBox,'display','none')}}else{this.$3()}if(!e){this.tree.model.refresh(this.oFilter.table)}if(ss.isValue(this.tree.anchor)){dojo.addClass(this.tree.anchor.labelNode,'anchorSelection');dojo.addClass(this.tree.anchor.domNode,'anchorSelectionNode')}else{this.tree.anchor=null}this.conditionals.init(this.oFilter.condition,this.oFilter.limit);this.layout(null);if(ss.isValue(this.searchWidget)){this.searchWidget.updateSearch()}},$3:function(){var e;if(ss.isNullOrUndefined(this.domLevelBox)){return}e=document.createElement('td');e.appendChild(document.createTextNode(' '));dojo.addClass(e,'HFLevelSpacer');for(var L=0;L<this.oFilter.levels.length;L++){e=document.createElement('td');e.appendChild(document.createTextNode(L.toString()));this.domLevelContainer.appendChild(e);if(this.$c!=='radiolist'){if(this.oFilter.levels[L]===0){dojo.addClass(e,'HFLevelAllSelected')}else if(this.oFilter.levels[L]===1){dojo.addClass(e,'HFLevelNoneSelected')}else{dojo.addClass(e,'HFLevelSomeSelected')}}if(L===0){dojo.addClass(e,'HFLevelFirst')}else if(L<this.oFilter.levels.length-1){dojo.addClass(e,'HFLevelNonLeaf')}else{dojo.addClass(e,'HFLevelLast')}this.connect(e,'onclick',ss.mkdel(this,this.onLevelClick))}},doMenu:function(){this.showContextMenu(this.menuButton.domNode)},$0:function(){var e=[];var L=[];var hy=[].concat.apply([],this.tree.rootNode.getChildren());var hz='filter-delta';var hA=[];var hB=[];if(hy.length===0){return}do{var hC=hy.shift();var hD=hC.item.tuple;if(hC.item.schema.length>e.length){e=hC.item.schema}if(hC.isChecked&&!hD.s){hD.s=true;L.push(hD);if(this.isSingleSelect()){hz='filter-replace';break}}else if(!hC.isChecked&&hD.s){delete hD['s'];L.push(hD)}hy=hy.concat.apply(hy,hC.getChildren())}while(hy.length!==0);var hE=L;if(hE.length!==0){for(var hF=0;hF<hE.length;hF++){var hG=hE[hF].t.length-1;var hH=hE[hF].t[hG].v;if(hE[hF].s){hA.push(hH)}else{hB.push(hH)}}tab.FilterClientCommands.doMemberHierarchialFilter(this.session.get_visualId(),this.field,hA,hB,hz)}},$1:function(e,L){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(L)){return}var hy=this.tree.getDepth(L);var hz=this.tree.findEarlierNode(L,e,hy);var hA=(ss.referenceEquals(hz,L)?e:L);var hB=hz.item.tuple.t;var hC=hA.item.tuple.t;var hD=hB[hB.length-1].v;var hE=hC[hC.length-1].v;var hF={};var hG={};var hH='filter-delta';if(e.isChecked){hF[this.RANGE_START]=hD;hF[this.RANGE_END]=hE}else{hG[this.RANGE_START]=hD;hG[this.RANGE_END]=hE}tab.FilterClientCommands.doRangeHierarchialFilter(this.session.get_visualId(),this.field,hF,hG,hH)},updateStateFromSearch:function(e){var L={};var hy=e.tuples;for(var hz=0;hz<hy.length;hz++){L[hy[hz].d]=hy[hz].s===true}var hA=[].concat.apply([],this.tree.rootNode.getChildren());while(hA.length!==0){var hB=hA.shift();var hC=hB.item.tuple;var hD=L[hC.d];if(ss.isValue(hD)){if(hD!==hC.s){if(hD){hB.isChecked=true;hB.labelNode.firstChild.checked=true;hC.s=true}else{hB.isChecked=false;hB.labelNode.firstChild.checked=false;delete hC['s']}}}else if(this.isSingleSelect()&&hC.s){hB.isChecked=false;hB.labelNode.firstChild.checked=false;delete hC['s']}hA=hA.concat.apply(hA,hB.getChildren())}},updateRangeAnchor:function(e){if(this.isSingleSelect()){return}if(ss.referenceEquals(this.tree.anchor,e)){return}if(ss.isValue(this.tree.anchor)){dojo.removeClass(this.tree.anchor.labelNode,'anchorSelection');dojo.removeClass(this.tree.anchor.domNode,'anchorSelectionNode');dojo.removeClass(this.tree.anchor.labelNode,'dijitTreeLabelFocused');this.tree.prev_anchor=this.tree.anchor}this.tree.anchor=e;dojo.addClass(this.tree.anchor.labelNode,'anchorSelection');dojo.addClass(this.tree.anchor.domNode,'anchorSelectionNode')},$8:function(e){if(e.target.tagName.toLowerCase()==='input'){if(ss.isValue(this._applyTimer)){window.clearTimeout(ss.unbox(this._applyTimer));this._applyTimer=null}this.stateId++;var L=dijit.getEnclosingWidget(e.target.parentNode);if(!ss.referenceEquals(this.tree.anchor,L)){this.updateRangeAnchor(L)}if(e.shiftKey===true&&ss.isValue(this.tree.prev_anchor)&&this.tree.getDepth(this.tree.prev_anchor)===this.tree.getDepth(this.tree.anchor)&&!this.isSingleSelect()){this.updateCheckboxRange(this.tree.anchor,this.tree.prev_anchor);this.$1(this.tree.anchor,this.tree.prev_anchor)}else{this._applyTimer=window.setTimeout(ss.mkdel(this,this.$0),this.$9)}}},updateCheckboxRange:function(e,L){var hy=this.tree.getDepth(L);var hz=this.tree.findEarlierNode(L,e,hy);var hA=(ss.referenceEquals(hz,L)?e:L);var hB=e.isChecked;var hC=hz;this.tree.anchorIsStart=!ss.referenceEquals(hz,L);while(ss.isValue(hC)&&hC.isTreeNode&&!ss.referenceEquals(hC,hA)){hC.labelNode.firstChild.checked=hB;hC.isChecked=hB;hC=this.$6(hC,hy)}hA.labelNode.firstChild.checked=hB;hA.isChecked=hB},$6:function(e,L){var hy=L;var hz=e;var hA=e.getNextSibling();if(ss.isValue(hA)){return hA}while(ss.isNullOrUndefined(hA)&&hy>=0){hz=hz.getParent();hy-=1;hA=hz.getNextSibling();while(ss.isValue(hA)){var hB=this.$4(hA,hy,L);if(ss.isValue(hB)){return hB}hA=hA.getNextSibling()}}if(hy>=0){return hA}return null},$4:function(e,L,hy){if(ss.isNullOrUndefined(e)){return null}if(L<0){return null}if(L>hy){return null}if(L===hy){return e}if(e.hasChildren()){var hz=e.getChildren();var hA=hz.length;for(var hB=0;hB<hA;hB++){var hC=this.$4(hz[hB],L+1,hy);if(ss.isValue(hC)){return hC}}}return null},toggleSearchUI:function(){if(ss.isValue(this.searchWidget)){this.searchWidget.toggleUI()}},onLevelClick:function(e){var L=e.target;var hy;var hz=[];var hA=[];if(L.tagName.toLowerCase()!=='td'){return}dojo.stopEvent(e);if(this.isSingleSelect()){return}var hB=parseInt(dojox.data.dom.textContent(L),10);if(this.oFilter.levels[hB]===0){hy=false;dojo.removeClass(L,'HFLevelAllSelected');dojo.removeClass(L,'HFLevelSomeSelected');dojo.addClass(L,'HFLevelNoneSelected')}else{hy=true;dojo.removeClass(L,'HFLevelNoneSelected');dojo.removeClass(L,'HFLevelSomeSelected');dojo.addClass(L,'HFLevelAllSelected')}if(hy){hz.push(hB)}else{hA.push(hB)}if(hz.length>0||hA.length>0){tab.FilterClientCommands.doLevelHierarchialFilter(this.session.get_visualId(),this.field,hz,hA,'filter-delta')}},layout:function(e){var L=$(this.domContent);L.hide();dojo.removeClass(this.domNode,'HFHorizontal');var hy=dojo.contentBox(this.domNode);var hz=dojo.marginBox(this.domTitleBar);var hA=(ss.isValue(this.domLevelBox)?dojo.marginBox(this.domLevelBox):ss.mkdict(['w',0,'h',0]));var hB=dojo.marginBox(this.conditionals.domNode);var hC=ss.mkdict(['h',0]);this.updateTitleBar();this.resetTitleSize();if(this.$d>0){hz.h=this.$d;dojo.marginBox(this.domTitleBar,ss.mkdict(['h',hz.h]))}if(this.$e>0){hz.w=this.$e;dojo.marginBox(this.domTitleBar,ss.mkdict(['w',hz.w]))}tableau.util.setupTitleEllipsis($(this.domTitleBar));var hD=hz.h;var hE=hy.w;if(!this.hideEmptyTitlebar()&&this.$e>0){dojo.addClass(this.domNode,'HFHorizontal');dojo.style(this.domTitleBar,'float','left');if(ss.isValue(this.domLevelBox)){dojo.style(this.domLevelBox,'float','left')}if(this._hasDomNode(this.menuButton)){dojo.addClass(this.menuButton.domNode,'HFButtonHide')}if(this._hasDomNode(this.searchButton)){dojo.addClass(this.searchButton.domNode,'HFButtonHide')}hE-=hz.w;hD=0}else{if(!this.shouldHideContextMenu()&&this._hasDomNode(this.menuButton)){dojo.removeClass(this.menuButton.domNode,'HFButtonHide')}if(!this.shouldHideSearchButton()&&this._hasDomNode(this.searchButton)){dojo.removeClass(this.searchButton.domNode,'HFButtonHide')}dojo.style(this.domTitleBar,'float','none');if(ss.isValue(this.domLevelBox)){dojo.style(this.domLevelBox,'float','none')}}if(ss.isValue(this.searchWidget)&&this.searchWidget.get_isVisible()){var hF=hy.h-hD-hA.h-hB.h;this.searchWidget.layout(hF);hC=dojo.marginBox(this.searchWidget.get_dijitDomNode())}var hG=hy.h-hD-hA.h-hB.h-hC.h;if(ss.isValue(this.domLevelBox)){dojo.marginBox(this.domLevelBox,ss.mkdict(['w',hE]))}dojo.marginBox(this.domContent,ss.mkdict(['h',hG,'w',hE]));this.$2();L.show()},_hasDomNode:function(e){return ss.isValue(e)&&ss.isValue(e.domNode)},$7:function(){tableau.util.localizeDojoLabeledControls([{item1:this.searchButton,item2:'QuickFilterSearch'}])}},dY);ss.initClass(dP,a,{get_filterType:function(){return this.$2.get_filterType()},get_legacyHierarchicalQuickFilterModel:function(){return this.$2},get_hierarchyTables:function(){return this.$2.get_hierarchyTables()},get_levels:function(){return this.$2.get_levels()},get_isSearchable:function(){return this.$2.get_isSearchable()}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel,dk]);ss.initClass(dQ,a,{},ec,[ss.IDisposable]);ss.initClass(dR,a,{get_domRoot:function(){return this.get_template().get_domRoot()},get_domNode:function(){return this.get_template().get_domRoot().get(0)},$f:function(){return this.legacyLegendViewModel.get_viewSession()},get_serverRenderedModel:function(){return this.legacyLegendViewModel.get_presModel()},get_legendTemplate:function(){return this.get_template()},onAddedToDom:function(){ss.makeGenericType(Y,[dS]).prototype.onAddedToDom.call(this);this.$j=(new Date).getTime();this.eventHandler=this.makeViewerInputHandler(this.$f(),this.get_legendTemplate().get_contentArea().get(0));var e=this.$i;var L=this.$f();e.push(L.registerEventListener(Object).call(L,'refreshLegacyLegendImages',ss.mkdel(this,this.refreshImages)));var hy=this.$i;var hz=this.$f();hy.push(hz.registerEventListener(Object).call(hz,'refreshVisualModel',ss.mkdel(this,this.refreshImages)));var hA=this.$i;var hB=this.$f();hA.push(hB.registerEventListener(tab.InvalidationInfo).call(hB,'selectionChanged',ss.mkdel(this,this.onSelectionChanged)));this.iterButtons=new dF(this.get_legendTemplate().get_contentArea(),true,12);this.updateHighlightStatus();this.hideControls();this.doConnections();this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.get_legendTemplate().domHighlighter,ss.mkdel(this,this.toggleHighlight)));this.get_legendTemplate().domImageBody.load(ss.mkdel(this,function(hC){this.$d();this.setBodySize()}));this.get_legendTemplate().domImageBody.error(ss.mkdel(this,function(hC){this.onImageLoadFailed()}));this.refreshImages(this.legacyLegendViewModel.$f())},dispose:function(){this.legacyLegendViewModel.remove_newLegacyLegend(ss.mkdel(this,this.handleNewLegacyLegend));for(var e=0;e<this.$i.length;e++){var L=this.$i[e];dojo.unsubscribe(L)}if(ss.isValue(this.eventHandler)){this.eventHandler.dispose();this.eventHandler=null}this.iterButtons.dispose();ss.makeGenericType(Y,[dS]).prototype.dispose.call(this)},handleNewLegacyLegend:function(){var e=this.legacyLegendViewModel.get_presModel();if(ss.isValue(this.get_serverRenderedModel())&&this.get_serverRenderedModel().dWr===e.dWr&&ss.referenceEquals(this.get_serverRenderedModel().R_X,e.R_X)){this.$d();this.updateHighlightStatus()}else{this.refreshImages(this.legacyLegendViewModel.$f())}this.layout()},handleValidStateChanged:function(){if(this.legacyLegendViewModel.$g()){this.refreshImages(this.legacyLegendViewModel.$f())}},onViewModelPropertyChanged:function(e,L){if(ss.compareStrings(L.get_propertyName(),'urlCacheInfo',false)===0){}else if(ss.compareStrings(L.get_propertyName(),'ParentZoneSizeChanged',false)===0){this.$e()}},$e:function(){var e=this.legacyLegendViewModel.$4();if(ss.isValue(e)&&!tab.SizeUtil.equals(e,this.$g)){this.get_legendTemplate().domBox.css(ss.mkdict(['width',e.w+'px','height',e.h+'px']));this.$g=e}},get_visualId:function(){return tab.ModelUtils.getVisualId(this.legacyLegendViewModel.get_sheetName())},allowHover:function(){},disallowHover:function(){},doConnections:function(){},cancelHover:function(){},hideControls:function(){this.get_legendTemplate().domHighlighter.css('visibility','hidden');this.get_domRoot().removeClass('tvmodeSelect')},updateHighlightStatus:function(){this.get_legendTemplate().domHighlighter.toggleClass('tabHighlightEnabled',this.get_serverRenderedModel().MJI);this.get_legendTemplate().domHighlighter.toggleClass('tabHighlightDisabled',!this.get_serverRenderedModel().MJI)},refreshImages:function(e){this.$h+=1;this.bodySize=null;var L=this.$h+'Z'+this.$j;var hy=(ss.isValue(this.get_serverRenderedModel().dWr)?this.get_serverRenderedModel().dWr.toString():'');this.disallowHover();this.get_legendTemplate().domBox.addClass('LegendBusy');if(tab.BrowserSupport.get_isSafari()||this.get_serverRenderedModel().fXK){this.get_legendTemplate().get_contentArea().css('overflow','hidden')}var hz=this.$f().formatLegendRegionTileURL(e,this.get_serverRenderedModel().jhL+'-body',this.get_serverRenderedModel().R_X,hy,L);this.get_legendTemplate().domImageBody.attr('src',hz)},onImageLoadFailed:function(){this.get_legendTemplate().domContent.css('visibility','hidden')},onSelectionChanged:function(e){if(ss.isNullOrUndefined(e)){return}this.allowHover()},getDocumentPoint:function(e){var L={x:0,y:0};if(this.get_legendViewModel().get_titleInline()&&!this.get_serverRenderedModel().HNR){L.x=-this.get_legendViewModel().get_titleWidth();L.y=this.get_legendViewModel().get_titleHeight()}return{x:e.pageX+L.x,y:e.pageY+L.y}},documentPointToContentPoint:function(e){var L=this.get_legendTemplate().get_contentArea().offset();return{x:e.x-tab.DoubleUtil.roundToInt(L.left)+this.get_legendTemplate().get_contentArea().scrollLeft()+this.bodyOffset.x,y:e.y-tab.DoubleUtil.roundToInt(L.top)+this.get_legendTemplate().get_contentArea().scrollTop()+this.bodyOffset.y}},onHover:function(e){var L=this.getDocumentPoint(e);var hy=this.documentPointToContentPoint(L);if('map'!==this.get_serverRenderedModel().jhL){this.get_legendTooltip().hoverOverCoordinates(L,hy,'legenditem',this.legacyLegendViewModel.get_regionType())}},toggleHighlight:function(){this.get_serverRenderedModel().MJI=!this.get_serverRenderedModel().MJI;this.updateHighlightStatus();this.$f().toggleHighlight(this.legacyLegendViewModel.get_regionType(),this.get_serverRenderedModel().R_X)},setBodySize:function(){this.get_legendTemplate().domContent.css('visibility','');this.allowHover();this.get_legendTemplate().domBox.removeClass('LegendBusy');this.bodySize={w:this.get_legendTemplate().domImageBody.width(),h:this.get_legendTemplate().domImageBody.height()};this.layout()},layout:function(){if(!!!this.bodySize){return}this.drawTitle();this.get_domRoot().removeClass('LegendHorizontal');var e=this.$g;var L={w:e.w,h:e.h};this.bodyOffset={x:0,y:0};if(this.get_legendViewModel().get_titleInline()){L.w=e.w-this.get_legendViewModel().get_titleWidth();this.bodyOffset.x=this.get_serverRenderedModel().nkG1}else{L.h=e.h-this.get_legendViewModel().get_titleHeight();this.bodyOffset.y=this.get_serverRenderedModel().jZr}this.layoutButtons(L)},getFieldNameVec:function(){if(ss.isValue(this.get_serverRenderedModel().R_X)){return this.get_serverRenderedModel().R_X.toString().split('\n')}return null},$d:function(){var e=this.get_serverRenderedModel();if(!e.fXK){this.get_legendTemplate().domImageBody.css('width','inherit')}else if(this.get_serverRenderedModel().ICz!=='vertical'){var L=e.gCJ;if(!!!e.HNR&&ss.isValue(e.jZr)&&e.jZr!==0){L-=e.jZr+1}this.get_legendTemplate().domImageBody.css('height',L+'px');this.get_legendTemplate().domImageBody.css('width','')}else{this.get_legendTemplate().domImageBody.css('width',e.mi_+'px');this.get_legendTemplate().domImageBody.css('height','')}},layoutButtons:null,makeViewerInputHandler:null},ss.makeGenericType(Y,[dS]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[dS])]);ss.initClass(dS,a,{add_newLegacyLegend:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_newLegacyLegend:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},add_validStateChanged:function(e){this.$3$2=ss.delegateCombine(this.$3$2,e)},remove_validStateChanged:function(e){this.$3$2=ss.delegateRemove(this.$3$2,e)},get_presModel:function(){return this.$h.get_presModel()},get_viewId:function(){return tab.ModelUtils.findContentDashboard().getViewId(this.get_sheetName())},get_sessionId:function(){return tab.CommandController.get().get_legacySession().get_id()},get_sheetName:function(){return this.get_parentZoneVM().get_associatedSheet()},get_viewSession:function(){return tab.ModelUtils.getViewSession(this.get_sheetName())},$f:function(){return this.get_visualModel().get_cacheUrlInfo()},$g:function(){return this.get_parentZoneVM().get_valid()},get_titleHtml:function(){return this.get_presModel().XjF},get_titleInline:function(){var e=this.$5();if(this.get_presModel().HNR===false&&e.h===0&&e.w>0){return true}else{return this.get_presModel().HNR}},get_regionType:function(){var e='color';switch(this.get_presModel().jhL){case'color':{e='color';break}case'size':{e='size';break}case'shape':{e='shape';break}case'map':{e='map';break}default:{break}}return e},get_borderWidth:function(){if(ss.isValue(this.get_parentZoneVM())){return this.get_parentZoneVM().get_model().borderWidth()}else{return 0}},get_titleHeight:function(){return this.get_presModel().jZr},get_titleWidth:function(){return(this.get_presModel().fXK?this.get_presModel().nkG1:this.$5().w)},handleZoneValidStateChanged:function(){this.$e()},dispose:function(){this.$h.remove_newLegacyLegend(ss.mkdel(this,this.handleNewLegacyLegend));this.get_visualModel().remove_urlInfoCacheChange(ss.mkdel(this,this.$c));this.$i.remove_validStateChanged(ss.mkdel(this,this.handleZoneValidStateChanged));ea.prototype.dispose.call(this)},handleNewLegacyLegend:function(){this.$d()},$d:function(){if(ss.isValue(this.$3$1)){this.$3$1()}},$e:function(){if(ss.isValue(this.$3$2)){this.$3$2()}},$c:function(){this.notifyPropertyChanged('urlCacheInfo')}},ea,[ss.IDisposable,spiff.IViewModel]);ss.initClass(dU,a,{get_attributes:function(){return this.attributes},get_presModel:function(){return this.presModel},get_oCurrentMin:function(){return this.oCurrentMin},get_oCurrentMax:function(){return this.oCurrentMax},get_editingFormat:function(){if(ss.isNullOrUndefined(this.$d)){this.$d=tableau.format.deriveNumberEditingFormat(this.oFilter.format)}return this.$d},get_quickFilterViewModel:function(){return this.filterViewModel},postCreate:function(){if(this.filterViewModel.get_filterType()!=='Quantitative'){}var e=0;dojo.style(this.domLowerInput,'display','none');dojo.style(this.domUpperInput,'display','none');$(this.domLowerInput).bind('blur',ss.mkdel(this,this.hideLowerInput)).bind('keydown',ss.mkdel(this,this.lowerInputKeyDown)).bind('keypress',ss.mkdel(this,this.checkLowerEnter));$(this.domUpperInput).bind('blur',ss.mkdel(this,this.hideUpperInput)).bind('keydown',ss.mkdel(this,this.upperInputKeyDown)).bind('keypress',ss.mkdel(this,this.checkUpperEnter));$(document.body).bind('mousedown.'+this.domNode.id,ss.mkdel(this,function(hA){if(!ss.referenceEquals(hA.target,this.domLowerInput)){this.domLowerInput.blur()}if(!ss.referenceEquals(hA.target,this.domUpperInput)){this.domUpperInput.blur()}}));this.timestamp=(new Date).getTime();this.localize();var L=tableau.format.formatColumnDisplayName(this.oFilter,false);dojo.attr(this.domTitleBar,'title',L);this.updateTitleBar();if(!this.metricsOnly){var hy=ss.mkdel(this,function(hA,hB){if(hB){dojo.addClass(hA.domNode,this.classQFButtonHide)}else{e+=1;dojo.addClass(hA.domNode,this.classQFButtonR+e)}});hy(this.menuButton,this.shouldHideContextMenu());hy(this.domainButton,this.shouldHideDomainButton());hy(this.resetButton,this.shouldHideResetButton());dojo.addClass(this.domControls,this.classQF+e+'Button');$(this.menuButton.domNode).css('background-color',this.backgroundColor);$(this.domainButton.domNode).css('background-color',this.backgroundColor);$(this.resetButton.domNode).css('background-color',this.backgroundColor)}var hz=this.oFilter.table;this.$3(hz.min.v,hz.max.v)},$3:function(e,L){if(this.isMaxRange(e,L)){fb.disableResetButton(this.resetButton)}else{fb.enableResetButton(this.resetButton)}},isMaxRange:function(e,L){var hy=ss.isValue(e);var hz=ss.isValue(L);if(hy&&hz&&this.oFilter.table.included!=='include-all'){return false}var hA=this.oFilter.range.min.v;var hB=this.oFilter.range.max.v;if(!hy){e=hA}if(!hz){L=hB}return ss.isValue(hA)&&ss.isValue(e)&&tab.DoubleUtil.isLessThanOrApproximatelyEqual(ss.unbox(e),ss.unbox(hA))&&(ss.isValue(hB)&&ss.isValue(L)&&tab.DoubleUtil.isGreaterThanOrApproximatelyEqual(ss.unbox(L),ss.unbox(hB)))},postMixInProperties:function(){this.inherited(arguments);this.templateRoot=dojo.moduleUrl('tableau.base.widget','templates').toString()},destroy:function(e){if(ss.isValue(this.$f)){this.$f.dispose()}$(this.domLowerInput).unbind('blur').unbind('keydown').unbind('keypress');$(this.domUpperInput).unbind('blur').unbind('keydown').unbind('keypress');$(document.body).unbind('mousedown.'+this.domNode.id);this.showContextMenu=null;this.requestSetAttributes=null;this.getContextMenuCommands=null;this.inherited(arguments)},$1:function(){var e=dojo.marginBox(this.domLowerImg);var L=dojo.marginBox(this.domLowerBound);var hy={};hy.fixed={w:0,h:0};hy.item={w:0,h:0};hy.slider={w:0,h:e.h+4};hy.readout={w:0,h:L.h+4};return hy},showFullDateTimes:function(e,L){return 0},getPrecision:function(){return this.precision},hasCurrentMin:function(){return tab.LegacyFilterModel.isNormalValue(this.oCurrentMin)},hasCurrentMax:function(){return tab.LegacyFilterModel.isNormalValue(this.oCurrentMax)},getRangeMin:function(){return(ss.isValue(this.rangeMinOverride)?this.rangeMinOverride:this.oRangeMin.v)},getRangeMax:function(){return(ss.isValue(this.rangeMaxOverride)?this.rangeMaxOverride:this.oRangeMax.v)},getRange:function(){var e=this.getRangeMin();var L=this.getRangeMax();if(ss.isValue(e)&&ss.isValue(L)){return ss.Nullable$1.sub(L,e)}return null},hasDataMin:function(){return tab.LegacyFilterModel.isNormalValue(this.oDataMin)},hasDataMax:function(){return tab.LegacyFilterModel.isNormalValue(this.oDataMax)},getDataMin:function(){return this.oDataMin.v},getDataMax:function(){return this.oDataMax.v},getCurMin:function(){return this.oCurrentMin.v},getCurMax:function(){return this.oCurrentMax.v},getMinText:function(){return this.speciallyFormatDataValueForQuantitativeQF(this.oCurrentMin)},getMaxText:function(){return this.speciallyFormatDataValueForQuantitativeQF(this.oCurrentMax)},getLowerPos:function(){return this.domLowerImg.offsetLeft-this.oMetrics.absOffset+(this.$e-1)},setLowerPos:function(e){dojo.style(this.domLowerImg,'left',e+this.oMetrics.absOffset-(this.$e-1)+'px')},$4:function(){return this.lastLowerOffset!==this.domLowerImg.offsetLeft},$2:function(){return this.domUpperImg.offsetLeft-this.oMetrics.absOffset},setUpperPos:function(e){dojo.style(this.domUpperImg,'left',e+this.oMetrics.absOffset+'px')},$5:function(){return this.lastUpperOffset!==this.domUpperImg.offsetLeft},isRange:function(){switch(this.oFilter.table.included){case'include-all':case'include-null':case'include-non-null':{return false}default:{return true}}},shouldHideDomainButton:function(){return this.hideEmptyTitlebar()||this.attributes['show-morefewerbutton']!=='true'},shouldHideContextMenu:function(){if(tsConfig.current_sheet_type==='dashboard'&&tsConfig.is_authoring){return true}var e=tab.CommandsPresModelWrapper.create(this.getContextMenuCommands());return this.hideEmptyTitlebar()||ss.isNullOrUndefined(e)||e.get_commandItems().length===0},shouldHideResetButton:function(){return this.hideEmptyTitlebar()||this.attributes['show-all']==='false'||this.attributes['show-filter-state']==='false'},computePrecision:function(e){var L=this.getRange();var hy=((ss.isValue(L)&&e!==0)?(ss.unbox(L)/e):1);var hz=Math.log(hy)/Math.log(10);this.precision=((hz>0)?Math.ceil(hz):Math.floor(hz));if(this.precision===Number.NEGATIVE_INFINITY||isNaN(this.precision)){this.precision=5}},$9:function(e,L,hy){var hz;var hA=e*ss.coalesce(this.getRange(),0)/L;if(this.precision>=0){return Math.round(hy+hA)}hz=Math.pow(10,-this.precision);return Math.round((hy+hA)*hz)/hz},clearDataRange:function(){if(ss.isValue(this.oDataMin)){this.oDataMin=null}if(ss.isValue(this.oDataMax)){this.oDataMax=null}dojo.style(this.domHighlight,'visibility','hidden')},setMinValue:function(e){if(ss.isNullOrUndefined(e)||isNaN(e)){return}if(this.hasCurrentMax()&&ss.Nullable$1.gt(e,this.getCurMax())){e=ss.unbox(this.getCurMax())}if(this.oCurrentMin.t==='i'){this.oCurrentMin.v=Math.round(e)}else{this.oCurrentMin.v=e}dojox.data.dom.textContent(this.domLowerText,this.getMinText());var L=this.getRangeMin();if(this.hasCurrentMin()&&(!ss.isValue(L)||ss.Nullable$1.lt(this.getCurMin(),L))){this.rangeMinOverride=this.getCurMin()}},setMaxValue:function(e){if(ss.isNullOrUndefined(e)||isNaN(e)){return}if(this.hasCurrentMin()&&ss.Nullable$1.lt(e,this.getCurMin())){e=ss.unbox(this.getCurMin())}if(this.oCurrentMax.t==='i'){this.oCurrentMax.v=Math.round(e)}else{this.oCurrentMax.v=e}dojox.data.dom.textContent(this.domUpperText,this.getMaxText());var L=this.getRangeMax();if(this.hasCurrentMax()&&(!ss.isValue(L)||ss.Nullable$1.gt(this.getCurMax(),L))){this.rangeMaxOverride=this.getCurMax()}},removeRangeOverride:function(){this.rangeMinOverride=null;this.rangeMaxOverride=null},getValueFromInput:function(e,L){var hy={t:L.t,v:ss.unbox(L.v)};return tableau.format.parseQuantitativeDataValue(e.value,L.t,this.get_editingFormat(),this.showFullDateTimes(this.get_editingFormat()),hy)},speciallyFormatDataValueForQuantitativeQF:function(e){return tableau.format.formatDataValue(e,this.oFilter.role,this.oFilter.format,null,0)},initValues:function(){this.oRangeMin=dojo.mixin({},this.oFilter.range.min);this.oRangeMax=dojo.mixin({},this.oFilter.range.max);this.oDataMin=dojo.mixin({},this.oFilter.data.min);this.oDataMax=dojo.mixin({},this.oFilter.data.max);if(this.isRange()&&(ss.isValue(this.oFilter.table.min.v)||ss.isValue(this.oFilter.table.max.v))){this.oCurrentMin=dojo.mixin({},this.oFilter.table.min);this.oCurrentMax=dojo.mixin({},this.oFilter.table.max)}else{this.oCurrentMin=dojo.mixin({},this.oFilter.range.min);this.oCurrentMax=dojo.mixin({},this.oFilter.range.max)}this.oMetrics={};this.domLowerInput.value=tableau.format.formatDataValue(this.oCurrentMin,this.oFilter.role,this.get_editingFormat(),null,this.showFullDateTimes(this.get_editingFormat()));this.domUpperInput.value=tableau.format.formatDataValue(this.oCurrentMax,this.oFilter.role,this.get_editingFormat(),null,this.showFullDateTimes(this.get_editingFormat()))},setTitleSize:function(e,L){this.titleH=e;this.titleW=L},resize:function(e){dojo.marginBox(this.domNode,e);this.layout(null)},layout:function(e){var L=200;this.initValues();this.updateTitleBar();if(this.hasCurrentMin()){dojox.data.dom.textContent(this.domLowerText,this.getMinText());dojo.removeClass(this.domLowerText.parentNode,this.classQFDisabled);dojo.addClass(this.domLowerText.parentNode,'tab-ctrl-formatted-border-hover')}else{dojox.data.dom.textContent(this.domLowerText,this.speciallyFormatDataValueForQuantitativeQF(this.oRangeMin));dojo.addClass(this.domLowerText.parentNode,this.classQFDisabled);dojo.removeClass(this.domLowerText.parentNode,'tab-ctrl-formatted-border-hover')}if(this.hasCurrentMax()){dojox.data.dom.textContent(this.domUpperText,this.getMaxText());dojo.removeClass(this.domUpperText.parentNode,this.classQFDisabled);dojo.addClass(this.domUpperText.parentNode,'tab-ctrl-formatted-border-hover')}else{dojox.data.dom.textContent(this.domUpperText,this.speciallyFormatDataValueForQuantitativeQF(this.oRangeMax));dojo.addClass(this.domUpperText.parentNode,this.classQFDisabled);dojo.removeClass(this.domUpperText.parentNode,'tab-ctrl-formatted-border-hover')}dojo.addClass(this.domNode,this.classQFHideButtons);dojo.removeClass(this.domNode,this.classQFCenterText);var hy=dojo.marginBox(this.domTitleBar);this.resetTitleSize();var hz=this.titleH===0&&this.titleW===0;if(this.titleH>0||hz){hy.h=this.titleH;dojo.marginBox(this.domTitleBar,ss.mkdict(['h',hy.h]))}if(this.titleW>0||hz){hy.w=this.titleW;dojo.marginBox(this.domTitleBar,ss.mkdict(['w',hy.w]))}tableau.util.setupTitleEllipsis($(this.domTitleBar));var hA=dojo.contentBox(this.domNode);var hB={w:hA.w,h:hA.h};if(!this.metricsOnly){if(this.titleW>0){hB.w=hA.w-hy.w;dojo.style(this.domContent,'top','');dojo.style(this.domContent,'left',hy.w+'px')}else if(this.titleH>0){dojo.removeClass(this.domNode,this.classQFHideButtons);hB.h=hA.h-hy.h;dojo.style(this.domContent,'top',hy.h+'px');dojo.style(this.domContent,'left','')}else{dojo.removeClass(this.domNode,this.classQFHideButtons);dojo.style(this.domContent,'top','');dojo.style(this.domContent,'left','')}}dojo.marginBox(this.domContent,ss.mkdict(['w',hB.w,'h',hB.h]));if(this.attributes['show-slider']!=='false'&&this.attributes['show-readout']!=='false'){dojo.removeClass(this.domNode,this.classQFHideReadout);dojo.removeClass(this.domNode,this.classQFHideSlider);var hC=dojo.contentBox(this.domLowerBound).h+dojo.contentBox(this.domLowerImg).h+8;if(hB.h<hC&&hB.w>200){dojo.addClass(this.domNode,this.classQFCenterText);var hD=this.contentBox(this.domLowerText).w;var hE=this.contentBox(this.domUpperText).w;dojo.style(this.domLowerBound,'width','');dojo.style(this.domUpperBound,'width','');dojo.style(this.domLowerBound,'top','2px');dojo.style(this.domUpperBound,'top','2px');var hF=hB.w-(hD+dojo.contentBox(this.domLowerImg).w)-(hE+dojo.contentBox(this.domUpperImg).w)-16;dojo.marginBox(this.domBar,ss.mkdict(['w',hF]));dojo.style(this.domBar,'top','7px');dojo.style(this.domBar,'left',hD+tab.DomUtil.getContentBox(this.domLowerImg).w+8+'px');dojo.style(this.domLowerInput,'width',hD+'px');dojo.style(this.domUpperInput,'width',hE+'px')}else{var hG=Math.min(L,Math.floor(hB.w/2-4));dojo.marginBox(this.domLowerBound,ss.mkdict(['w',hG]));dojo.marginBox(this.domUpperBound,ss.mkdict(['w',hG]));dojo.style(this.domLowerInput,'width',dojo.contentBox(this.domLowerBound).w+'px');dojo.style(this.domUpperInput,'width',dojo.contentBox(this.domUpperBound).w+'px');var hH=this.domLowerBound.offsetTop+this.domLowerBound.offsetHeight+6;dojo.marginBox(this.domBar,ss.mkdict(['w',hB.w-24]));dojo.style(this.domBar,'top',hH+'px');dojo.style(this.domBar,'left','12px')}}else if(this.attributes['show-slider']!=='false'){dojo.addClass(this.domNode,this.classQFHideReadout);dojo.removeClass(this.domNode,this.classQFHideSlider);dojo.marginBox(this.domBar,ss.mkdict(['w',hB.w-24]));dojo.style(this.domBar,'left','12px')}else if(this.attributes['show-readout']!=='false'){dojo.removeClass(this.domNode,this.classQFHideReadout);dojo.addClass(this.domNode,this.classQFHideSlider);var hI=Math.min(L,Math.floor(hB.w/2-4));dojo.marginBox(this.domLowerBound,ss.mkdict(['w',hI]));dojo.marginBox(this.domUpperBound,ss.mkdict(['w',hI]));dojo.style(this.domLowerInput,'width',tab.DomUtil.getContentBox(this.domLowerBound).w+'px');dojo.style(this.domUpperInput,'width',tab.DomUtil.getContentBox(this.domUpperBound).w+'px')}else{dojo.addClass(this.domNode,this.classQFHideSlider);dojo.addClass(this.domNode,this.classQFHideReadout)}this.oMetrics.top=this.domBar.offsetTop;this.oMetrics.absOffset=this.domBar.offsetLeft;this.oMetrics.left=0;this.oMetrics.right=this.domBar.offsetWidth;if(this.hasCurrentMin()){dojo.style(this.domLowerImg,'top',this.oMetrics.top-4+'px');dojo.style(this.domLowerImg,'visibility','visible')}else{dojo.style(this.domLowerImg,'visibility','hidden')}if(this.hasCurrentMax()){dojo.style(this.domUpperImg,'top',this.oMetrics.top-4+'px');dojo.style(this.domUpperImg,'visibility','visible')}else{dojo.style(this.domUpperImg,'visibility','hidden')}var hJ=(this.shouldShowDomContent()?'visible':'hidden');dojo.style(this.domContent,'visibility',hJ);this.oMetrics.width=this.oMetrics.right-this.oMetrics.left;this.computePrecision(this.oMetrics.width);var hK=this.hasDataMin()||this.hasDataMax();dojo.style(this.domHighlight,'visibility',(hK?'visible':'hidden'));this.updateMinAndMax(this.oCurrentMin.v,this.oCurrentMax.v);this.updateDomainButton()},shouldShowDomContent:function(){return this.hasCurrentMax()||this.hasCurrentMin()},updateFromIcons:function(){var e,L;var hy;if(this.hasCurrentMin()&&this.$4()){var hz=this.getLowerPos();e=hz-this.oMetrics.left;if(e===0){hy=this.getRangeMin()}else if(e===this.oMetrics.width){hy=this.getRangeMax()}else if(this.hasCurrentMax()&&this.getLowerPos()===this.$2()){hy=this.getCurMax()}else{hy=this.$9(e,this.oMetrics.width,ss.unbox(this.getRangeMin())||0)}if(ss.isValue(hy)){this.setMinValue(ss.unbox(hy))}this.lastLowerOffset=this.domLowerImg.offsetLeft;dojo.style(this.domRange,'left',hz+'px')}L=(this.hasCurrentMin()?this.getLowerPos():this.oMetrics.left);if(this.hasCurrentMax()){var hA=this.$2()-L;if(this.$5()){e=this.oMetrics.right-this.$2();if(e===0){hy=this.getRangeMax()}else if(e===this.oMetrics.width){hy=this.getRangeMin()}else if(this.hasCurrentMin()&&this.getLowerPos()===this.$2()){hy=this.getCurMin()}else{hy=this.$9(-e,this.oMetrics.width,ss.unbox(this.getRangeMax())||0)}if(ss.isValue(hy)){this.setMaxValue(ss.unbox(hy))}this.lastUpperOffset=this.domUpperImg.offsetLeft}dojo.style(this.domRange,'width',hA+'px')}else{dojo.style(this.domRange,'width',this.oMetrics.right-L+'px')}this.updateDataBar()},doMenu:function(){this.showContextMenu(this.menuButton.domNode)},updateFromOneInput:function(e){var L,hy;if(ss.referenceEquals(e,this.domLowerInput)){L=(this.hasCurrentMin()?this.getValueFromInput(this.domLowerInput,this.oCurrentMin):Number.MIN_VALUE);hy=this.oCurrentMax.v}else{L=this.oCurrentMin.v;hy=(this.hasCurrentMax()?this.getValueFromInput(this.domUpperInput,this.oCurrentMax):Number.MAX_VALUE)}this.updateMinAndMax(L,hy)},updateMinAndMax:function(e,L){var hy;if(ss.isValue(e)&&ss.isValue(L)){if(ss.unbox(e)>ss.unbox(L)){var hz=e;e=L;L=hz}}this.removeRangeOverride();if(this.hasCurrentMin()&&ss.isValue(e)&&!isNaN(ss.unbox(e))){this.setMinValue(ss.unbox(e))}if(this.hasCurrentMax()&&ss.isValue(L)&&!isNaN(ss.unbox(L))){this.setMaxValue(ss.unbox(L))}var hA=this.getRange();hy=this.oMetrics.left;if(this.hasCurrentMin()){var hB=((ss.isValue(hA)&&!tab.DoubleUtil.isApproximatelyZero(ss.unbox(hA)))?Math.round((ss.coalesce(this.getCurMin(),0)-ss.coalesce(this.getRangeMin(),0))*this.oMetrics.width/ss.unbox(hA)):0);if(this.oMetrics.left+hB>this.oMetrics.width){hB=this.oMetrics.left+this.oMetrics.width}this.setLowerPos(this.oMetrics.left+hB);this.lastLowerOffset=this.domLowerImg.offsetLeft;dojo.style(this.domRange,'left',this.oMetrics.left+hB+'px');hy=this.getLowerPos()}else{dojo.style(this.domRange,'left',hy+'px')}if(this.hasCurrentMax()){var hC=(this.hasCurrentMin()?this.getCurMin():this.getRangeMin());var hD=((ss.isValue(hA)&&!tab.DoubleUtil.isApproximatelyZero(ss.unbox(hA)))?Math.round((ss.coalesce(this.getCurMax(),0)-ss.unbox(hC))*this.oMetrics.width/ss.unbox(hA)):this.oMetrics.width);this.setUpperPos(hy+hD);this.lastUpperOffset=this.domUpperImg.offsetLeft;dojo.style(this.domRange,'width',Math.max(hD,0)+'px')}else{dojo.style(this.domRange,'width',Math.max(this.oMetrics.right-hy,0)+'px')}this.updateDataBar()},updateDataBar:function(){var e=0;var L;var hy;var hz=this.getRange();if(ss.isValue(hz)&&!tab.DoubleUtil.isApproximatelyZero(ss.unbox(hz))&&this.hasDataMin()){var hA=ss.coalesce((this.hasCurrentMin()?this.getCurMin():this.getRangeMin()),0);e=Math.round((ss.coalesce(this.getDataMin(),0)-hA)*this.oMetrics.width/ss.unbox(hz))}dojo.style(this.domHighlight,'left',e+'px');hy=(this.hasCurrentMin()?this.getLowerPos():this.oMetrics.left);L=(this.hasCurrentMax()?this.$2():this.oMetrics.right)-hy;if(ss.isValue(hz)&&this.hasDataMax()){var hB=(this.hasDataMin()?this.getDataMin():this.getRangeMin());if(!tab.DoubleUtil.isApproximatelyZero(ss.unbox(hz))){L=Math.round((ss.coalesce(this.getDataMax(),0)-ss.unbox(hB))*this.oMetrics.width/ss.unbox(hz))}L=Math.max(L,2)}dojo.style(this.domHighlight,'width',Math.max(L,0)+'px')},startUpperCapture:function(e){this.startCapture(e,false,this.domUpperImg)},startLowerCapture:function(e){this.startCapture(e,false,this.domLowerImg)},startRangeCapture:function(e){if(this.hasCurrentMin()&&this.hasCurrentMax()){this.startCapture(e,true,this.domRange)}},startCapture:function(e,L,hy){this.savePreviousMinAndMaxVals();var hz=(L?ss.mkdel(this,this.$8):ss.mkdel(this,this.onMouseMove));dojo.stopEvent(e);var hA=this.getRange();if(!ss.isValue(hA)||tab.DoubleUtil.isApproximatelyZero(ss.unbox(hA))){return}this.captureInfo={x:e.pageX,y:e.pageY,xStart:hy.offsetLeft,isRangeCapture:L,oImg:hy};if(L){this.captureInfo.lowerStart=this.getLowerPos();this.captureInfo.upperStart=this.$2()}if(ss.isValue(this.$f)){this.$f.dispose()}this.$f=new tab.DisposableHolder;this.$f.add$1(spiff.EventUtil.bindWithDispose($(document),'mousemove',hz));this.$f.add$1(spiff.EventUtil.bindWithDispose($(document),'mouseup',ss.mkdel(this,this.$a)))},onMouseMove:function(e){var L=(this.hasCurrentMin()?this.getLowerPos():this.oMetrics.left);var hy=(this.hasCurrentMax()?this.$2():this.oMetrics.right);var hz=(ss.referenceEquals(this.captureInfo.oImg,this.domLowerImg)?(this.oMetrics.left-this.$e):L);var hA=(ss.referenceEquals(this.captureInfo.oImg,this.domUpperImg)?this.oMetrics.right:(hy-this.$e));var hB=e.pageX-this.captureInfo.x+this.captureInfo.xStart-this.oMetrics.absOffset;e.stopPropagation();e.preventDefault();hB=Math.min(hA,Math.max(hz,hB));var hC=false;if(ss.referenceEquals(this.captureInfo.oImg,this.domLowerImg)){hC=hB+this.$e!==L;this.setLowerPos(hB+this.$e)}else{hC=hB!==hy;this.setUpperPos(hB)}this.updateFromIcons();if(hC){this.applyQuantFilter(this.getCurMin(),this.getCurMax())}},applyQuantFilter:function(e,L){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var hy=new tab.QuantitativeFilterData(this.oFilter.targetSheets,this.field,e,L,this.previousMinVal,this.previousMaxVal);tab.FilterClientCommands.updateQuantitativeFilter(hy)}},savePreviousMinAndMaxVals:function(){this.previousMinVal=this.getCurMin();this.previousMaxVal=this.getCurMax()},$8:function(e){var L=this.captureInfo.x-(this.captureInfo.lowerStart-this.oMetrics.left);var hy=this.captureInfo.x+(this.oMetrics.right-this.captureInfo.upperStart);var hz=e.pageX;hz=Math.min(hy,Math.max(L,hz));e.stopPropagation();e.preventDefault();this.setLowerPos(this.captureInfo.lowerStart+(hz-this.captureInfo.x));this.setUpperPos(this.captureInfo.upperStart+(hz-this.captureInfo.x));tab.ModelUtils.invalidateVisuals(this.oFilter.targetSheets);this.updateFromIcons()},$a:function(e){if(ss.isValue(this.$f)){this.$f.dispose()}this.$f=null;e.stopPropagation();e.preventDefault();if(this.captureInfo.x!==e.pageX){this.removeRangeOverride();this.updateFromIcons();this.notifyChange()}},showLowerInput:function(e){if(!this.hasCurrentMin()){return}this.showInput(e,this.oCurrentMin,this.domLowerInput);dojo.addClass(this.domLowerBound,'active');this.savePreviousMinAndMaxVals()},showUpperInput:function(e){if(!this.hasCurrentMax()){return}this.showInput(e,this.oCurrentMax,this.domUpperInput);dojo.addClass(this.domUpperBound,'active');this.savePreviousMinAndMaxVals()},showInput:function(e,L,hy){dojo.stopEvent(e);if(dojo.style(hy,'display')!=='none'){return}hy.value=tableau.format.formatDataValue(L,this.oFilter.role,this.get_editingFormat(),null,this.showFullDateTimes(this.get_editingFormat()));this.showInputStartValue=this.getValueFromInput(hy,L);$(hy).show().siblings('.readoutText').hide();hy.focus();hy.select()},lowerInputKeyDown:function(e){this.$7(e,this.domLowerInput)},upperInputKeyDown:function(e){this.$7(e,this.domUpperInput)},$7:function(e,L){if(e.which===27){$(L).val('');L.blur()}},checkLowerEnter:function(e){this.$0(e,this.domLowerInput)},checkUpperEnter:function(e){this.$0(e,this.domUpperInput)},$0:function(e,L){if(e.keyCode===13){dojo.stopEvent(e);L.blur()}},hideLowerInput:function(e){this.$6(e,this.oCurrentMin,this.domLowerInput,this.domLowerBound)},hideUpperInput:function(e){this.$6(e,this.oCurrentMax,this.domUpperInput,this.domUpperBound)},$6:function(e,L,hy,hz){var hA=this.getValueFromInput(hy,L);e.stopPropagation();e.preventDefault();this.applyInputValue(L,hy,hz,hA,ss.mkdel(this,function(){this.updateFromOneInput(hy)}))},applyInputValue:function(e,L,hy,hz,hA){var hB=new Object;hB=dojo.mixin({},e);var hC=null;if(ss.isNullOrUndefined(hz)||isNaN(ss.unbox(hz))){hz=this.showInputStartValue}else{hB.v=ss.unbox(hz);hC=this.speciallyFormatDataValueForQuantitativeQF(hB)}var hD=$(L).hide().siblings('.readoutText').show();if(ss.isValue(hz)&&(ss.isValue(this.showInputStartValue)&&!tab.DoubleUtil.isApproximatelyEqual(ss.unbox(this.showInputStartValue),ss.unbox(hz)))){hD.text(hC);hA();this.notifyChange()}this.showInputStartValue=null;dojo.removeClass(hy,'active')},applyChanges:function(){var e=false;var L=$.extend(false,new Object,this.oFilter.table);if(this.hasCurrentMin()&&(!ss.isValue(L.min.v)||!tab.DoubleUtil.isApproximatelyEqual(ss.unbox(L.min.v),ss.unbox(this.getCurMin())))){e=true;L.min=dojo.mixin({},this.oCurrentMin)}if(this.hasCurrentMax()&&(!ss.isValue(L.max.v)||!tab.DoubleUtil.isApproximatelyEqual(ss.unbox(L.max.v),ss.unbox(this.getCurMax())))){e=true;L.max=dojo.mixin({},this.oCurrentMax)}if(!e){tab.FilterClientCommands.resetQuantitativeFilter(this.field,this.oFilter.targetSheets);return}this.clearDataRange();++this.rid;if(!this.isRange()){L.included='include-range'}tab.FilterClientCommands.setQuantitativeFilterRange(this.session.get_visualId(),this.field,L.min.v,L.max.v,L.included);this.$3(L.min.v,L.max.v)},updateDomainButton:function(){if(!ss.isValue(this.oFilter.domains)||this.oFilter.domains.length<=1){dojo.style(this.domainButton.domNode,'display','none');return}dojo.removeClass(this.domainButton.iconNode,'wcIconDomainAll');dojo.removeClass(this.domainButton.iconNode,'wcIconDomainContext');dojo.removeClass(this.domainButton.iconNode,'wcIconDomainRelevant');var e=this.attributes['values'];if(e==='relevant'){this.domainButton.attr('label',tab.Strings.QuickFilterShowLargerRange);dojo.addClass(this.domainButton.iconNode,'wcIconDomainRelevant')}else if(e==='context'){this.domainButton.attr('label',tab.Strings.QuickFilterShowSmallerRange);dojo.addClass(this.domainButton.iconNode,'wcIconDomainContext')}else{this.domainButton.attr('label',tab.Strings.QuickFilterShowSmallerRange);dojo.addClass(this.domainButton.iconNode,'wcIconDomainAll')}},toggleReset:function(){var e=this.oFilter.table;var L=ss.isValue(e.min.v);var hy=ss.isValue(e.max.v);if(!L&&hy||!hy&&L){var hz=null;var hA=null;if(!L){hA=this.getRangeMax()}else{hz=this.getRangeMin()}tab.FilterClientCommands.setQuantitativeFilterRange(this.session.get_visualId(),this.field,hz,hA,this.oFilter.table.included)}else{tab.FilterClientCommands.setQuantitativeFilterRange(this.session.get_visualId(),this.field,this.oRangeMin.v,this.oRangeMax.v,'include-all')}fb.disableResetButton(this.resetButton)},toggleDomain:function(){var e=function(hz){return hz==='context'};var L;var hy=this.attributes['values'];if(hy==='relevant'){L='all'}else if(hy==='context'){L='relevant'}else if(dojo.some(this.oFilter.domains,e)){L='context'}else{L='relevant'}this.doRequestSetAttributes(ss.mkdict(['values',L.toString()]),false)},doRequestSetAttributes:function(e,L){var hy=ss.getEnumerator(Object.keys(e));try{while(hy.moveNext()){var hz=hy.current();this.attributes[hz]=e[hz]}}finally{hy.dispose()}if(!tab.BaseSession.autoUpdate){this.initFromState()}this.requestSetAttributes(e,L)},notifyChange:function(){if(ss.isValue(this.$c)){window.clearTimeout(ss.unbox(this.$c));this.$c=null}this.$c=window.setTimeout(ss.mkdel(this,this.applyChanges),this.$b)},initFromState:function(){this.layout(null)},localize:function(){},contentBox:function(e){var L=dojo.style(e,'display');if(L==='none'){dojo.style(e,'display','')}var hy=dojo.contentBox(e);dojo.style(e,'display',L);return hy}},dY);ss.initClass(dT,a,{get_editingFormat:function(){return this.oFilter.editing_format},postCreate:function(){this.inherited(arguments);var e=this.oFilter.date_format;var L=e.locale_formatting_strings;var hy=this.get_editingFormat();var hz=L.narrowDay.filter(function(hD){return!ss.isNullOrEmptyString(hD)});var hA=this.oFilter.first_day_of_week;if(ss.isValue(hA)){hA=hA-1}var hB=new Date;var hC=new Date(Date.UTC(hB.getFullYear(),hB.getMonth(),hB.getDate()));this.$n=new cd(new ce(hC,hC,null,null,hA,hz,L.todayFormatTemplate,function(hD){return tableau.format.formatCustomJSDateTime(hD,tableau.format.mapIcuToOleFormat(e.yearMonthFormat),0,'d',e.locale,null,null,L)},function(hD){return tableau.format.formatCustomJSDateTime(hD,hy.format,0,'d',hy.locale,null,null,L)}));this.$n.get_element().on('dateSelected',ss.mkdel(this,this.$h)).bind('mousedown',ss.mkdel(this,this.$g)).appendTo(document.body);this.$m=false},destroy:function(e){this.$n.dispose();this.$n=null;this.inherited(arguments)},showFullDateTimes:function(e,L){this.$p=dT.getDateTimeFormatMode([this.oCurrentMin,this.oCurrentMax,this.oRangeMin,this.oRangeMax,L],this.get_presModel().Ymv1,e,this.$p);return this.$p},speciallyFormatDataValueForQuantitativeQF:function(e){return tableau.format.formatDataValue(e,this.oFilter.role,this.oFilter.date_format,null,this.showFullDateTimes(this.oFilter.date_format,e))},$j:function(){return dT.isPureTime([this.oCurrentMin,this.oCurrentMax,this.oRangeMin,this.oRangeMax],this.get_presModel().Ymv1)},showInput:function(e,L,hy){this.inherited(arguments);if(this.get_presModel().Ymv1!=='trunc-month'&&this.get_presModel().Ymv1!=='trunc-year'&&!this.$j()&&(!ss.referenceEquals(this.$o,hy)||this.$n.get_element().is(':hidden'))){var hz=((tab.LegacyFilterModel.isNormalValue(L)&&!isNaN(ss.unbox(L.v)))?new Date(tableau.types.JsDateFromOleDate(ss.unbox(L.v))):null);this.$n.show(hz);this.$o=hy;this.$k()}},layout:function(e){this.inherited(arguments);this.$k()},$k:function(){if(ss.isNullOrUndefined(this.$o)){return}var e=$((ss.referenceEquals(this.$o,this.domLowerInput)?this.domLowerBound:this.domUpperBound));this.$n.positionCalendarByElement(e)},$h:function(e,L){this.$n.hide();var hy=tableau.types.OleDateFromJsDate(L.getTime());var hz=ss.referenceEquals(this.$o,this.domLowerInput);var hA=(hz?this.oCurrentMin:this.oCurrentMax);var hB=(hz?this.domLowerBound:this.domUpperBound);this.applyInputValue(hA,this.$o,hB,hy,ss.mkdel(this,function(){this.$l(hz,hy)}))},$l:function(e,L){if(e){this.updateMinAndMax(L,this.oCurrentMax.v)}else{this.updateMinAndMax(this.oCurrentMin.v,L)}},$g:function(e){this.$m=true},hideLowerInput:function(e){this.$i(e,this.domLowerInput,ss.mkdel(this,function(L){dU.prototype.hideLowerInput.call(this,L)}))},hideUpperInput:function(e){this.$i(e,this.domUpperInput,ss.mkdel(this,function(L){dU.prototype.hideUpperInput.call(this,L)}))},$i:function(e,L,hy){if(this.$m){e.preventDefault();e.stopPropagation();this.$m=false;window.setTimeout(function(){if($(L).is(':visible')){L.focus()}},0)}else{hy(e);this.$n.hide();if(ss.referenceEquals(this.$o,L)){this.$o=null}}}},dU);ss.initClass(dV,a,{get_filterType:function(){return this.$2.get_filterType()},get_legacyQuantitativeQuickFilterModel:function(){return this.$2},get_range:function(){return this.$2.get_range()},get_data:function(){return this.$2.get_data()},get_dateFormat:function(){return this.$2.get_dateFormat()},get_editingFormat:function(){return this.$2.get_editingFormat()},get_format:function(){return this.$2.get_format()},get_calendarControlStartOfWeek:function(){return this.$2.get_calendarControlStartOfWeek()},get_dataSourceStartOfWeek:function(){return this.$2.get_dataSourceStartOfWeek()},get_quantitativeFilterTable:function(){return this.$2.get_quantitativeFilterTable()},get_column:function(){return this.get_quantitativeFilterTable().column},get_included:function(){return this.get_quantitativeFilterTable().included},get_min:function(){return this.get_quantitativeFilterTable().min},get_max:function(){return this.get_quantitativeFilterTable().max}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel,dk]);ss.initClass(dW,a,{get_zonePresModel:function(){return this.$b().get_zone()},get_domRoot:function(){return this.get_template().get_domRoot()},$a:function(){return this.$b().get_frame()},$b:function(){return this.get_viewModel()},dispose:function(){if(ss.isValue(this.$c)){this.$c.destroyRecursive(false);this.$c=null}ss.makeGenericType(spiff.BaseView$1,[dX]).prototype.dispose.call(this)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(ss.isValue(this.$b().get_quickFilterDisplayModel())){this.handleUpdateQuickFilterDisplay()}},handleUpdateQuickFilterDisplay:function(){if(ss.isNullOrUndefined(this.$c)||this.$b().get_needToUpdateDisplay()){this.$c=this.createFilterPanel();this.get_template().get_domRoot().append(this.$c.domNode);this.$c.startup();this.updateSize();this.handleUpdateQuickFilterContent()}},handleUpdateQuickFilterContent:function(){if(ss.isValue(this.$c)&&(this.$b().get_needToUpdateContent()||this.$b().get_needToUpdateDisplay())){this.$c.updateAttributes(this.$a().attributes);this.$c.updateFilterState(this.$b().get_filterPresModel())}},updateSize:function(){tab.DomUtil.resize(this.$c,hv.viewRect(this.get_zonePresModel()));var e=this.$b().get_quickFilterDisplayPresModel().jOs.EUR;if(e>0){if(this.$b().get_hasBorder()){e+=3}e=Math.max(e,17)}var L=this.$b().get_quickFilterDisplayPresModel().jOs.rec;this.$c.setTitleSize(((this.get_zonePresModel().jZr===0)?0:e),((this.get_zonePresModel().nkG1===0)?0:L))},createFilterPanel:function(){var e=this.$b().get_layoutSession();var L=this.$b().get_zone().Gge;var hy=new Object;hy.sessionid=e.get_id();hy.urlRoot=e.get_urlRoot();hy.layoutSession=e;hy.sheetid=L;hy.zid=this.$a().key.zid;hy.titleHTML=this.$b().get_quickFilterDisplayModel().get_quickFilterTitle().xBc;hy.session=this.$b().get_viewSession();hy.field=this.$a().param;hy.quickFilterDisplayViewModel=this.$b();if(ss.isValue(this.$a().format)){hy.format=this.$a().format}if(ss.isValue(this.$a().attributes)){hy.attributes=this.$a().attributes}if(ss.isValue(this.$a().w)){hy.width=this.$a().w}var hz=ss.mkdel(this,function(hB,hC){this.$9(this.$a().param,this.$b().get_visualId(),hB,hC)});hy.requestSetAttributes=hz;hy.textStyle=this.$b().get_quickFilterDisplayPresModel().mCc;if(ss.isValue(this.get_zonePresModel().rPC)){hy.backgroundColor=this.get_zonePresModel().rPC.eBu}if(ss.isValue(this.$c)){this.$c.updateFilterProperties(hy);this.$c.updateSubWidget(this.$b().get_filterPresModel());return this.$c}var hA=this.makeFilterPanel(hy);return hA},makeFilterPanel:function(e){return new tableau.base.widget.FilterPanel(e)},$9:function(e,L,hy,hz){if(ss.keyExists(hy,'mode')){tab.FilterClientCommands.setCategoricalQuickFilterMode(L,e,hy['mode'])}else if(ss.keyExists(hy,'values')){tab.FilterClientCommands.setCategoricalQuickFilterDomain(L,e,hy['values'])}}},ss.makeGenericType(spiff.BaseView$1,[dX]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[dX])]);ss.initClass(dX,a,{add_updateQuickFilterDisplay:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_updateQuickFilterDisplay:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_updateQuickFilterContent:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_updateQuickFilterContent:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_resized:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_resized:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},get_quickFilterDisplayModel:function(){return this.$a},get_frame:function(){return this.$a.get_frame()},get_zone:function(){return this.$a.get_zone()},get_quickFilterDisplayPresModel:function(){return this.$a.get_quickFilterDisplayPresModel()},get_viewSession:function(){return tab.ModelUtils.getViewSession(this.get_zone().Gge)},get_layoutSession:function(){return tab.CommandController.get().get_legacySession()},get_hasBorder:function(){return this.$a.get_zoneModel().get_hasBorder()},get_filterPresModel:function(){return this.$6.get_filterPresModel()},get_filterTypeViewModel:function(){return this.$7},get_needToUpdateContent:function(){return this.$8},set_needToUpdateContent:function(e){this.$8=e},get_needToUpdateDisplay:function(){return this.$9},set_needToUpdateDisplay:function(e){this.$9=e},get_visualId:function(){return tab.ModelUtils.getVisualId(this.get_zone().Gge)},handleUpdateQuickFilterDisplay:function(e){this.set_needToUpdateDisplay(true);_.defer(ss.mkdel(this,function(){this.raiseActionEvent(this.$2$1);this.set_needToUpdateDisplay(false)}))},$4:function(){this.raiseActionEvent(this.$2$3)},$5:function(){this.set_needToUpdateContent(true);_.defer(ss.mkdel(this,function(){this.raiseActionEvent(this.$2$2);this.set_needToUpdateContent(false)}))},$3:function(){this.$2();switch(this.$6.get_filterType()){case'Categorical':{this.$7=new dM(this.$6);break}case'Hierarchical':{this.$7=new dP(this.$6);break}case'Quantitative':{this.$7=new dV(this.$6);break}case'RelativeDate':case'RelativeDatePick':{this.$7=new ft(this.$6);break}}},$2:function(){if(ss.isValue(this.$7)){this.$7.dispose();this.$7=null}},dispose:function(){this.$a.remove_quickFilterDisplayUpdated(ss.mkdel(this,this.handleUpdateQuickFilterDisplay));this.$a.get_zoneModel().remove_resizeZone(ss.mkdel(this,this.$4));this.$a=null;this.$6.remove_filterUpdated(ss.mkdel(this,this.$5));this.$6=null;this.$2();spiff.BaseViewModel.prototype.dispose.call(this)}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(dZ,a,{get_filterViewModel:function(){return this.filterViewModel},postCreate:function(){if(this.filterViewModel.get_filterType()!=='RelativeDate'){}var e=0;this.$3();this.getSID=ss.mkdel(this,function(){return this.stateId});if(ss.isValue(this.oFilter.fy)){this.fy=this.oFilter.fy-1}if(ss.isValue(this.oFilter.start_of_week)){this.startOfWeek=this.oFilter.start_of_week}this.timestamp=(new Date).getTime();this.$a=[this.buttonYear,this.buttonQuarter,this.buttonMonth,this.buttonWeek,this.buttonDay];if(this.oFilter.noTime){dojo.style(this.buttonHour.domNode,'display','none');dojo.style(this.buttonMinute.domNode,'display','none')}else{this.$a.push(this.buttonHour);this.$a.push(this.buttonMinute)}this.connect(this.domTooltipDialog,'onOpen',ss.mkdel(this,this.$4));this.initFromState();var L=ss.mkdel(this,function(hy,hz){if(hz){dojo.addClass(hy.domNode,this.$6)}else{e+=1;dojo.addClass(hy.domNode,this.$7+e)}});L(this.menuButton,this.shouldHideContextMenu());$(this.menuButton.domNode).css('background-color',this.backgroundColor)},shouldHideContextMenu:function(){if(tsConfig.current_sheet_type==='dashboard'&&tsConfig.is_authoring){return true}var e=tab.CommandsPresModelWrapper.create(this.getContextMenuCommands());return this.hideEmptyTitlebar()||ss.isNullOrUndefined(e)||e.get_commandItems().length===0},shouldHideDomainButton:function(){return true},setTitleSize:function(e,L){this.titleH=e;this.titleW=L},dispose:function(){this.$8.dispose();this.showContextMenu=null},destroy:function(e){this.dispose();if(ss.isValue(this.domText)){this.domText.innerHTML=''}this.inherited(arguments)},layout:function(e){this.updateTitleBar();dojo.removeClass(this.domNode,'RDFHorizontal');var L=dojo.marginBox(this.domDialog);if(!ss.isValue(L)||!ss.isValue(L.w)||L.w===0){return}var hy=dojo.marginBox(this.domTitleBar);this.resetTitleSize();if(this.titleH>0){hy.h=this.titleH;dojo.marginBox(this.domTitleBar,ss.mkdict(['h',hy.h]))}if(this.titleW>0){hy.w=this.titleW;dojo.marginBox(this.domTitleBar,ss.mkdict(['w',hy.w]))}tableau.util.setupTitleEllipsis($(this.domTitleBar));var hz=dojo.contentBox(this.domNode);var hA=hz.w-4;dojo.query('.dijitButtonNode',this.domDropdownButton.domNode).addClass('tab-ctrl-formatted-widget');dojo.query('.dijitButtonNode',this.domDropdownButton.domNode).addClass('tab-ctrl-formatted-darker-border-hover');dojo.query('.dijitButtonText',this.domDropdownButton.domNode).addClass('tab-ctrl-formatted-fixedsize');if(!this.hideEmptyTitlebar()&&this.titleW>0){dojo.addClass(this.domNode,'RDFHorizontal');dojo.style(this.domTitleBar,'float','left');dojo.style(this.domDropdownButton.domNode,'float','left');hA=hz.w-hy.w-6}else{dojo.style(this.domTitleBar,'float','none');dojo.style(this.domDropdownButton.domNode,'float','none')}if(hA>29){dojo.style(this.domDropdownButton.domNode,'width',hA+'px');dojo.style(this.domDropdownButton.domNode.firstChild,'width',hA-4+'px');hA=hA-25;var hB=this.domDropdownButton.domNode.firstChild.firstChild.firstChild.childNodes[1];if(ss.isValue(hB)){dojo.style(hB,'width',hA+'px')}}var hC=Math.floor((L.w-10)/this.$a.length);for(var hD=0;hD<this.$a.length;hD++){var hE=this.$a[hD];dojo.style(hE.titleNode,'width',hC-5+'px')}},getMetrics:function(){var e=dojo.marginBox(this.domNode);return ss.mkdict(['fixed',ss.mkdict(['w',0,'h',e.h])])},initFromState:function(){this.domDropdownButton.attr('label',this.oFilter.text);this.updateCurrentStateOfData();this.setRangeType(this.rangeType,this.rangeN);this.setTitle();this.updateTitleBar()},updateCurrentStateOfData:function(){var e=this.oFilter.table;this.periodType=e.periodType;this.rangeType=e.rangeType;this.rangeN=e.rangeN;if(!(typeof(e.anchor)==='undefined')){var L=e.anchor;this.anchorDateTime=new Date(L.year,L.month-1,L.day,L.hour,L.minute,L.second)}},setTitle:function(){var e=tableau.format.formatColumnDisplayName(this.oFilter,false);dojo.attr(this.domTitleBar,'title',e)},applyChanges:function(){var e={};e.periodType=this.periodType;e.rangeType=this.rangeType;e.rangeN=this.rangeN;this.stateId+=1;var L=tableau.util.findDirectParentByClassName(this.domDialog,'dijitPopup',dojo.body());if(!ss.isNullOrUndefined(L)){dojo.style(L,'zIndex','980')}tab.FilterClientCommands.doRelativeDateQuickFilter(this.session.get_visualId(),this.field,this.periodType,this.rangeType,this.rangeN)},doMenu:function(){this.showContextMenu(this.menuButton.domNode)},$4:function(){this.setPeriodUI(this.periodType);this.setRangeUI(this.rangeType,this.rangeN);this.setPreviewUI()},onTypingLast:function(){this.onTyping(this.inputLastn)},onTypingNext:function(){this.onTyping(this.inputNextn)},setRLast:function(){this.setRange('last')},setRCurr:function(){this.setRange('curr')},setRNext:function(){this.setRange('next')},setRLastn:function(){this.setRange('lastn',parseInt(this.inputLastn.value))},setRNextn:function(){this.setRange('nextn',parseInt(this.inputNextn.value))},setRTodate:function(){this.setRange('todate')},setRangeUI:function(e,L){this.inputLastn.disabled=true;this.inputNextn.disabled=true;dojo.style(this.lastSpinner,'display','none');dojo.removeClass(this.radioLastn,'spinnerBugFix');dojo.style(this.nextSpinner,'display','none');dojo.removeClass(this.radioNextn,'spinnerBugFix');switch(e){case'last':{this.radioLast['checked']=true;break}case'curr':{this.radioCurr['checked']=true;break}case'next':{this.radioNext['checked']=true;break}case'lastn':{this.radioLastn['checked']=true;this.rangeN=L;this.inputLastn.value=this.rangeN.toString();this.inputLastn.disabled=false;dojo.style(this.lastSpinner,'display','');dojo.addClass(this.radioLastn,'spinnerBugFix');break}case'nextn':{this.radioNextn['checked']=true;this.rangeN=L;this.inputNextn.value=this.rangeN.toString();this.inputNextn.disabled=false;dojo.style(this.nextSpinner,'display','');dojo.addClass(this.radioNextn,'spinnerBugFix');break}case'todate':{this.radioTodate['checked']=true;break}}},updateRangeButtons:function(e){var L=this.$a.length;for(var hy=0;hy<L;hy++){this.$a[hy].attr('checked',ss.referenceEquals(this.$a[hy].name,e.toString()))}},overLastUp:function(){dojo.addClass(this.lastUp,'hover')},outLastUp:function(){dojo.removeClass(this.lastUp,'hover')},overLastDown:function(){dojo.addClass(this.lastDown,'hover')},outLastDown:function(){dojo.removeClass(this.lastDown,'hover')},overNextUp:function(){dojo.addClass(this.nextUp,'hover')},outNextUp:function(){dojo.removeClass(this.nextUp,'hover')},overNextDown:function(){dojo.addClass(this.nextDown,'hover')},outNextDown:function(){dojo.removeClass(this.nextDown,'hover')},$5:function(e,L){var hy=parseInt(e.value,10)+(L?1:-1);if(hy<1){return}e.value=hy.toString();this.onTyping(e)},upLast:function(){this.$5(this.inputLastn,true)},downLast:function(){this.$5(this.inputLastn,false)},upNext:function(){this.$5(this.inputNextn,true)},downNext:function(){this.$5(this.inputNextn,false)},$3:function(){tableau.util.localizeDojoLabeledControls([{item1:this.buttonYear,item2:'RelDateFilterYears'},{item1:this.buttonQuarter,item2:'RelDateFilterQuarters'},{item1:this.buttonMonth,item2:'RelDateFilterMonths'},{item1:this.buttonWeek,item2:'RelDateFilterWeeks'},{item1:this.buttonDay,item2:'RelDateFilterDays'},{item1:this.buttonHour,item2:'RelDateFilterHours'},{item1:this.buttonMinute,item2:'RelDateFilterMinutes'}])}},cc,[ss.IDisposable]);ss.initClass(eb,a,{get_isCurrentLegendGreyed:function(){var e=ss.isValue(this.selectedItems)&&this.selectedItems.length>0;var L=ss.isValue(this.brushedItems)&&this.brushedItems.length>0;return bj.legendShouldBeGrayed(this.isOneway,this.hasMarkNodeSelection,e,L)},isSelectionStateTheSame:function(e){if(ss.isNullOrUndefined(e)){return false}if(this.isHighlightingEnabled!==e.isHighlightingEnabled){return false}if(this.get_isCurrentLegendGreyed()!==e.get_isCurrentLegendGreyed()){return false}var L=_.isEqual(e.selectedItems,this.selectedItems);var hy=_.isEqual(e.brushedItems,this.brushedItems);return L&&hy}});ss.initClass(ed,a,{get_allHighlighted:function(){return this.highlightedCount>=this.endIndex-this.startIndex+1},get_lineState:function(){if(this.selectedCount>0){return'lineStateSelected'}else if(this.highlightedCount>0){return'lineStateHighlighted'}else{return'lineStateNormal'}}});ss.initClass(ee,a,{get_lineAttributes:function(){return this.$1},$0:function(e){ss.clear(this.$1);var L=e.get_markCount();var hy=new ed(0);for(var hz=0;hz<L;hz++){if(e.isWrappedDomain){var hA=e.getMarkBounds(hz);var hB=hA.x;var hC=hA.x+hA.w;hy.minX=Math.min(hy.minX,hB);hy.maxX=Math.max(hy.maxX,hC)}var hD=e.getMarkState(hz);if(hD==='markStateSelected'){hy.selectedCount++;if(e.isMarkHighlighted(hz)){hy.highlightedCount++}}else if(hD==='markStateHighlighted'){hy.highlightedCount++}if(e.markNeedsDraw(hz)){hy.marksNeedingDraw.push(hz)}if(e.isMarkEndPrimitive(hz)){hy.worldOffsets=e.getWorldInstanceOffsets(hy.minX,hy.maxX);hy.endIndex=hz;this.$1.push(hy);hy=new ed(hz+1)}}}});ss.initClass(ef,a,{get_totalHeight:function(){return this.$5},get_itemHeight:function(){return this.$2},get_tileCount:function(){return this.$3},get_viewportHeight:function(){return this.$6},destroy:function(){},updateViewport:function(e,L){this.$6=L},getTileStatus:function(e){var L=this.$0[e];if(typeof(L)==='undefined'){return false}return L.$0()},updateTileStatus:function(e,L){var hy=this.$0[e];if(typeof(hy)==='undefined'){return}this.$0[e].$1(L)},getTilePosition:function(e){var L=this.$0[e];if(typeof(L)==='undefined'){return null}return{x:L.$2().x,y:L.$2().y}},getTileRange:function(e){var L=this.$0[e];if(typeof(L)==='undefined'){return null}return new tab.IntegerRange(L.$3().get_from(),L.$3().get_to())},getTileRangeType:function(e){var L=this.$0[e];if(typeof(L)==='undefined'){return'unknown'}return L.$4()},pixelToTileRange:function(e){return tab.IntegerRange.pixelToTileRange(e,this.$2,this.$4)},itemToTileIndex:function(e){var L=Math.floor(e/this.$4);return L},globalToLocalItemIndex:function(e){return e%this.$4}},null,[dH]);ss.initClass(hi,a,{add_updated:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_updated:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},get_current:function(){return this.$0},set_current:function(e){this.$0=e;if(ss.isValue(this.$1$1)){this.$1$1(e)}},get_hasHit:function(){return ss.isValue(this.$0)&&ss.isValue(this.$0.get_result())&&this.$0.get_result().get_hitObjectType()!==0},dispose:function(){this.paneTable=null;this.$1.dispose();this.lastEvent=null;this.set_current(null)},isWithinLastHitTestDistance:function(e){if(this.get_hasHit()){var L=this.region.toLocalCoordsEvent(e);return tab.PointUtil.isWithinDistance(this.get_current().get_regionCoordinates(),L,20)}return false},getLastHitTestDistance:function(e){if(ss.isValue(this.$0)&&ss.isValue(this.$0.get_result())){var L=this.region.toLocalCoordsEvent(e);return tab.PointUtil.distance(this.get_current().get_regionCoordinates(),L)}return-1},getAsync:function(e){var L=$.Deferred();if(this.isWithinLastHitTestDistance(e)){L.resolve(this.$0)}else{var hy=null;hy=ss.mkdel(this,function(hz){this.remove_updated(hy);L.resolve(hz)});this.add_updated(hy);this.update(e)}return L.promise()},update:function(e){this.lastEvent=e;this.$1.invokeActionDelayed()},makePaneSpecId:function(e,L){return L*this.paneTable.get_numColumns()+e},hitTest:null},null,[ss.IDisposable]);ss.initClass(eg,a,{hitTest:function(e,L,hy){var hz=this.region.getPaneDrawInfoFromSelectionAnchor(e);if(ss.isValue(hz)){var hA=this.region.hitTestSingleMarksAndVisualParts(e);var hB=this.makePaneSpecId(hz.get_paneColumn(),hz.get_paneRow());this.set_current(new hh(hy,hB,hz.get_paneColumn(),hz.get_paneRow(),this.region.get_regionPart(),e,L,hA))}else{this.set_current(null)}}},hi,[ss.IDisposable]);ss.initClass(eh,a,{});ss.initClass(ei,a,{dispose:function(){ei.$0=null;this.logOnViewModel.remove_shown(ss.mkdel(this,this.$c));this.logOnViewModel.remove_hidden(ss.mkdel(this,this.$9));this.$d.dispose();ss.makeGenericType(spiff.BaseView$1,[ej]).prototype.dispose.call(this)},onViewModelPropertyChanged:function(e,L){this.updateContent()},updateContent:function(){},$a:function(){this.logOnViewModel.logOnComplete()},$c:function(){this.$b();this.$d.show()},$9:function(){this.$d.dispose()},$b:function(){var e=800;var L=600;var hy=new tab.WindowHelper(window.self);var hz=hy.get_screenLeft()+ss.Int32.div(hy.get_outerWidth()-e,2);var hA=hy.get_screenTop()+ss.Int32.div(hy.get_outerHeight()-L,3);var hB=ss.formatString('width={0},height={1},left={2},top={3},toolbar=1,resizable=1',e,L,hz,hA);var hC='/#/signin?closePopupWhenDone=true&site='+encodeURIComponent(tsConfig.site_url_name);var hD=tab.WindowHelper.open(hC,'TableauAuthentication',hB);if(ss.isValue(hD)){_.defer(ss.mkdel(hD,hD.focus))}}},ss.makeGenericType(spiff.BaseView$1,[ej]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[ej])]);ss.initClass(ej,a,{add_shown:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_shown:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_hidden:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_hidden:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_logOnCanceled:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_logOnCanceled:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_logOnCompleted:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_logOnCompleted:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},get_logOnUrl:function(){return'/'},dispose:function(){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.prototype.dispose.call(this)},showLogOn:function(){spiff.ObjectRegistry.newView(ei).call(null,[this]);if(ss.isValue(this.$2$1)){this.$2$1()}},cancel:function(){if(ss.isValue(this.$2$2)){this.$2$2()}if(ss.isValue(this.$2$3)){this.$2$3()}},logOnComplete:function(){if(ss.isValue(this.$2$2)){this.$2$2()}if(ss.isValue(this.$2$4)){this.$2$4()}}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(ek,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(el,a,{get_compositeSearchWidget:function(){return this.$h},get_isCollapsed:function(){return this.$i},set_isCollapsed:function(e){this.$i=e;this.mapsSearchView.toggleClass('tabMapsSearchViewCollapsed',this.$i);this.mapsSearchView.parent().toggleClass('tabMapsSearchContainerCollapsed',this.$i)},get_isVisible:function(){return this.$j},set_isVisible:function(e){if(tab.FeatureParamsLookup.getBool(28)===true){e=true}if(this.$j===e){return}this.$j=e;this.mapsSearchViewTemplate.get_template().get_domRoot().css('display',(this.$j?'':'none'))},get_gotoMyLocationButtonEnabled:function(){return tab.FeatureParamsLookup.getBool(32)===true&&tab.BrowserSupport.get_isGeolocationSupported()},$b:function(e){this.mapsSearchView.removeClass('tabMapsSearchViewTranslucent')},$c:function(e){this.mapsSearchView.addClass('tabMapsSearchViewTranslucent')},$a:function(e,L){this.$e();if(!this.get_compositeSearchWidget().get_isShowingInitialSearchText()&&!ss.referenceEquals(this.get_compositeSearchWidget().get_textInputView().get_text(),this.$k)){if(this.get_compositeSearchWidget().get_textInputView().get_text().trim().length===0){this.get_compositeSearchWidget().removeList();this.$l=tab.MiscUtil.dispose(this.$l)}else{this.$g();this.$f()}}this.$k=null},showNewSuggestions:function(e,L){if(!ss.referenceEquals(e,this.$h.get_textInputView().get_text())||ss.isNullOrUndefined(L)){return}this.$l=tab.MiscUtil.dispose(this.$l);this.$l=[];for(var hy=0;hy<L.length;hy++){var hz=L[hy];this.$l.push(spiff.ListItemViewModel.newListItem(hy.toString(),hz,false))}this.get_compositeSearchWidget().showList(this.$l,this,this.mapsSearchView)},$g:function(){if(ss.isNullOrUndefined(this.$l)){return}this.get_compositeSearchWidget().showList(this.$l,this,this.mapsSearchView)},$9:function(e){var L=$("<span class='tab-list-item-label'/>");var hy='<span/>';var hz=$(hy);var hA=$(hy);hz.addClass('tabMapsSearchViewSuggestionDisplayName');var hB=e.JYk;var hC=ss.trimEndString(this.$h.get_textInputView().get_text());if(ss.startsWithString(hB.toLowerCase(),hC.toLowerCase())){var hD=$(hy);hD.addClass('tabMapsSearchViewSuggestionActiveSearchText');hD.text(hB.substr(0,hC.length));hz.append(hD);var hE=$(hy);hE.text(hB.substr(hC.length));hz.append(hE)}else{hz.text(e.JYk)}L.append(hz);hA.addClass('tabMapsSearchViewSuggestionParentName');hA.text(e.JiO);L.append(hA);return L},handleEnterKeyPress:function(){this.$e();if(ss.isValue(this.get_compositeSearchWidget().get_listViewModel())){this.mapsSearchViewModel.moveMapToCandidateBounds(this.get_compositeSearchWidget().get_listViewModel().get_collection()[0].get_data());this.$h.removeList();this.$l=tab.MiscUtil.dispose(this.$l)}else{this.mapsSearchViewModel.commitToSearchString(this.get_compositeSearchWidget().get_textInputView().get_text())}},handleListItemClick:function(e){this.$e();this.$h.removeList();this.$l=tab.MiscUtil.dispose(this.$l);this.mapsSearchViewModel.moveMapToSuggestionListItem(e)},collapseSearchWidget:function(){this.set_isCollapsed(true)},setGeoLocationButtonVisibility:function(e){if(e){this.gotoMyLocationButton.get_element().css('display','inline-block')}else{this.gotoMyLocationButton.get_element().css('display','none')}},handleSearchButtonClick:function(){this.$e();this.set_isCollapsed(!this.$i);if(!this.$i){if(ss.isNullOrEmptyString(this.$h.get_textInputView().get_text())){this.get_compositeSearchWidget().showInitialSearchText(true)}if(!tab.BrowserSupport.get_isIE()){this.$h.get_textInputView().get_inputElement().focus()}if(this.get_compositeSearchWidget().get_isShowingInitialSearchText()){tab.DomUtil.setSelectionRangeOnInput(this.$h.get_textInputView().get_inputElement().get(0),0,0)}else{this.selectAllSearchText()}}},$f:function(){this.queryDelayTimer=window.setTimeout(ss.mkdel(this,this.$d),200)},$e:function(){if(ss.isValue(this.queryDelayTimer)){window.clearTimeout(this.queryDelayTimer)}this.queryDelayTimer=null},$d:function(){this.mapsSearchViewModel.getSuggestionsForSearchString(this.get_compositeSearchWidget().get_textInputView().get_text());this.$e()},updateSearchTextValue:function(e){var L=e.JYk;if(!ss.isNullOrEmptyString(e.JiO)){L+=', '+e.JiO}this.$k=L;this.get_compositeSearchWidget().get_textInputView().set_text(L)},selectAllSearchText:function(){tab.DomUtil.selectAllInputText(this.$h.get_textInputView().get_inputElement())},enableUserInteraction:function(e){this.get_element().css({'pointer-events':(e?'auto':'none')})},createListItemContent:function(e){return this.$9(e.get_data())},dispose:function(){ss.makeGenericType(spiff.BaseView$1,[em]).prototype.dispose.call(this);if(ss.isValue(this.gotoMyLocationButton)){this.gotoMyLocationButton.dispose()}}},ss.makeGenericType(spiff.BaseView$1,[em]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[em]),spiff.IListItemContentCreator]);ss.initClass(em,a,{add_receivedNewSuggestions:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_receivedNewSuggestions:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_updateTextInputValue:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_updateTextInputValue:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_onMoveMapToBounds:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_onMoveMapToBounds:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},get_visualID:function(){return this.$2},commitToSearchString:function(e){e=e.trim();this.sendGeographicSearchQuery(e,1,ss.mkdel(this,this.moveToTopGeographicCandidate))},getSuggestionsForSearchString:function(e){this.sendGeographicSearchQuery(e,5,ss.mkdel(this,this.processGeographicSuggestions))},moveMapToCandidateBounds:function(e){if(ss.isValue(this.$2$2)){this.$2$2(e)}if(ss.isValue(this.$2$3)){this.$2$3(e.v_N)}tab.PaneClientCommands.boundingBoxPan(this.$2,e.v_N)},moveMapToSuggestionListItem:function(e){var L=e.get_data();this.moveMapToCandidateBounds(L)},moveToTopGeographicCandidate:function(e){var L=e.vOC;if(L.length===0){}else{var hy=L[0];this.moveMapToCandidateBounds(hy)}},processGeographicSuggestions:function(e){if(!ss.isValue(this.$2$1)){return}var L=[];for(var hy=0;hy<e.vOC.length;hy++){L.push(e.vOC[hy])}this.$2$1(e.Ikc,L)},sendGeographicSearchQuery:function(e,L,hy){var hz=tsConfig.workbookLocale||'en_us';tab.PaneClientCommands.geographicSearchQuery(this.$2,e,hz,L,hy)}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(eo,a,{});ss.initClass(ep,a,{dispose:function(){$(document).unbind('.ModifierKeyState');$(window).unbind('.ModifierKeyState')},$1:function(){this.$4(true)},$0:function(){this.$4(false)},$2:function(){if('focus'in window.self){window.focus()}},$3:function(e){if(!this.$5&&!tab.BrowserSupport.get_isIE()){if(tab.BrowserSupport.get_isFF()&&ss.isValue(document.activeElement)){tab.DomUtil.blur()}this.$2()}dojo.publish('modifierKeysChanged',[e])},$4:function(e){if(e===this.$5){return}this.$5=e}},null,[ss.IDisposable]);ss.initClass(eq,a,{});ss.initEnum(er,a,{root:0,pane:1,bin:2,mark:3,lineSegmentUnionRect:4,trendLineSegment:5,userPane:6});ss.initClass(es,a,{});ss.initClass(eu,a,{add_shown:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_shown:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_hidden:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_hidden:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_message:function(){return this.$6},set_message:function(e){this.$6=e},get_visible:function(){return this.$7},get_autoHideTimeout:function(){return this.$4},set_autoHideTimeout:function(e){this.$4=e},get_displayPosition:function(){return this.$5},set_displayPosition:function(e){this.$5=e},show:function(){if(this.$7){return}this.$7=true;if(this.$4>0){this.$3=window.setTimeout(ss.mkdel(this,this.hide),this.$4)}this.raiseActionEvent(this.$2$1)},disposeOnHide:function(){this.add_hidden(ss.mkdel(this,this.dispose));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_hidden(ss.mkdel(this,this.dispose))})))},hide:function(){if(this.$7===false){return}this.$7=false;window.clearTimeout(this.$3);this.raiseActionEvent(this.$2$2)},$2:function(e,L){this.hide()}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(ew,a,{get_location:function(){return{x:ss.Int32.trunc(this.$7.x),y:ss.Int32.trunc(this.$7.y)}},set_location:function(e){this.$7={x:e.x,y:e.y};this.$6()},clone:function(){return new ew(this.$8.get(0),this.get_element().attr('src'))},show:function(e){this.$7=e;this.$6()},hide:function(){this.get_element().detach()},$6:function(){if(!ss.referenceEquals(this.get_element().parent()[0],this.$8[0])){this.$8.append(this.get_element())}if(ss.isNullOrUndefined(this.$7)){return}var e=this.$7.y;var L=this.$7.x;this.get_element().css(ss.mkdict(['top',e+'px','left',L+'px']))}},spiff.Widget,[spiff.IAppendableView,ss.IDisposable,dx]);ss.initClass(ex,a,{show:function(){if(ss.isNullOrUndefined(this.$8)){this.get_element().appendTo(document.body)}else{this.get_element().appendTo(this.$8)}this.get_element().css(ss.mkdict(['opacity','0.01','filter','alpha(opacity=01)','display','']));this.get_element().fadeTo('fast',this.$7)},hide:function(){this.get_element().fadeOut('fast',ss.mkdel(this,this.$6))},bind:function(e,L){this.get_element().bind(e,L)},$6:function(){this.get_element().remove()}},spiff.Widget,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(ey,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(ez,a,{get_zonePresModel:function(){return this.pageViewModel.get_pageModel().get_zone()},get_domRoot:function(){return this.get_template().get_domRoot()},dispose:function(){if(ss.isValue(this.$9)){this.$9.destroyRecursive(false);this.$9=null}ss.makeGenericType(spiff.BaseView$1,[eA]).prototype.dispose.call(this)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(ss.isValue(this.pageViewModel.get_pageModel())){this.handleNewPage()}},handleNewPage:function(){if(ss.isNullOrUndefined(this.$9)&&ss.isValue(this.pageViewModel.get_pageModel())&&ss.isValue(this.pageViewModel.get_pageModel().get_pagePresModel())){this.$9=this.createCurrentPagePanel();this.get_template().get_domRoot().append(this.$9.domNode);this.$9.startup();var e={x:0,y:0,w:this.get_zonePresModel().rec,h:this.get_zonePresModel().EUR};tab.DomUtil.resize(this.$9,tab.RectXYUtil.toRect(e))}else{var L=this.createCurrentPagePanelProperties();this.$9.updateProperties(L);this.$9.refreshLayout()}},updateSize:function(){if(ss.isValue(this.pageViewModel.get_pageModel())&&ss.isValue(this.pageViewModel.get_pageModel().get_pagePresModel())){this.$9.destroyRecursive();this.$9=null;this.handleNewPage()}},createCurrentPagePanelProperties:function(){var e=this.pageViewModel.get_pageModel().get_pagePresModel();var L=new Object;L.cpHeight=this.get_zonePresModel().EUR;L.sheetid=this.get_zonePresModel().Gge;L.zid=this.get_zonePresModel().BCp;L.enable=this.pageViewModel.get_historyTrailsEnabled();L.show_slider=e.Xmc;L.show_toggle=this.pageViewModel.get_showHistoryToggle();L.show_dropdown=e.uin;L.current_page=e.f_c;L.pages=e.tMd;L.session=this.pageViewModel.get_viewSession();L.layoutSession=this.pageViewModel.get_layoutSession();L.lTitle=this.pageViewModel.get_pageModel().get_title();L.titleHtml=e.XjF;L.zoneTitleHeight=this.get_zonePresModel().jZr;L.zoneTitleWidth=this.get_zonePresModel().nkG1;L.isDashboard=true;L.pageViewModel=this.pageViewModel;return L},createCurrentPagePanel:function(){var e=this.createCurrentPagePanelProperties();return this.instantiateCurrentPagePanel(e)},instantiateCurrentPagePanel:function(e){return new tableau.base.widget.CurrentPagePanel(e)}},ss.makeGenericType(spiff.BaseView$1,[eA]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[eA])]);ss.initClass(eA,a,{add_newPage:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newPage:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_resized:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_resized:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_pageModel:function(){return this.$2},get_frame:function(){return this.$2.get_frame()},get_viewSession:function(){return tab.ModelUtils.getViewSession(this.get_pageModel().get_zone().Gge)},get_layoutSession:function(){return tab.CommandController.get().get_legacySession()},get_visualId:function(){return tab.ModelUtils.getVisualId(this.get_pageModel().get_zone().Gge)},get_historyTrailsEnabled:function(){return this.$2.get_pagePresModel().TjM.chK},get_isHistoryToggleInteractionDisabled:function(){return tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard()},get_showHistoryToggle:function(){var e=this.$2.get_pagePresModel().SCY;if(tsConfig.is_mobile&&this.get_isHistoryToggleInteractionDisabled()&&!this.get_historyTrailsEnabled()){e=false}return e},get_showHistoryToggleForPopup:function(){var e=this.get_showHistoryToggle();if(this.get_isHistoryToggleInteractionDisabled()){e=false}return e},handleNewPage:function(e){this.raiseActionEvent(this.$2$1)},handleParentZoneResized:function(){this.raiseActionEvent(this.$2$2)}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(eC,a,{});ss.initClass(eD,a,{drawReferenceLineAndTrendLineGroup:function(e,L,hy,hz,hA){var hB=false;var hC=null;var hD=null;var hE=null;for(var hF=0;hF<e.length;hF++){var hG=e[hF];var hH=hG.VzB==='jpw'||hG.VzB==='ADd';var hI=L==='hover'||L==='selected';var hJ=true;if(hH&&hI){var hK=tab.ColorModel.fromColorCode(hy.get_shapeFillStyle());if(hK.get_a()<1){if(L==='hover'){continue}hJ=false}}var hL=hG.VzB==='Osj'||hG.VzB==='nuS'||hG.VzB==='MqA';if(hz||hL){if((hL||!hJ)&&hB){hy.set_strokeStyle(hC.toString());hy.set_shapeFillStyle(hD.toString());hy.set_textFillStyle(hE.toString());hB=false}if((ss.isValue(hA)||L!=='normal')&&!hB&&!hL&&hJ){hC=tab.ColorModel.fromColorCode(hy.get_strokeStyle());hD=tab.ColorModel.fromColorCode(hy.get_shapeFillStyle());hE=tab.ColorModel.fromColorCode(hy.get_textFillStyle());var hM=eD.$0(hC,L,hG.VzB,hA);var hN=eD.$0(hD,L,hG.VzB,hA);var hO=eD.$0(hE,L,hG.VzB,hA);hB=!ss.referenceEquals(hM,hC.toString())||!ss.referenceEquals(hN,hD.toString())||!ss.referenceEquals(hO,hE.toString());if(hB){hy.set_strokeStyle(hM);hy.set_shapeFillStyle(hN);hy.set_textFillStyle(hO)}}this.renderVisualParts(hy,hG)}}if(hB){hy.set_strokeStyle(hC.toString());hy.set_shapeFillStyle(hD.toString());hy.set_textFillStyle(hE.toString())}},renderScene:function(e){this.$n=e.get_scene();var L=this.$n.get_scene();if(!ss.isValue(L)){return}this.$m.setRenderOffsetNoTranslate(this.get_renderOffset());var hy=this.get_currentContext().get_numberSavedStates();var hz=e.get_mapServerModel().get_useFastMaps();if(!hz){this.$l(e.get_vizRegionMap(),e.get_drawFirstParts())}var hA=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());var hB=3;hA=tab.RectXYUtil.outsetRect(hA,hB,hB);this.$n.prepareForDraw(hA);this.$h(L.HUq,hz);this.$n.cleanupFromDraw();this.$l(e.get_vizRegionMap(),e.get_drawLastParts());while(this.get_currentContext().get_numberSavedStates()>hy){this.get_currentContext().restore()}},renderViewportBorders:function(e){this.$n=e.get_scene();var L=this.$n.get_scene();if(ss.isNullOrUndefined(L)){return}var hy=this.$8(L.HUq);if(ss.isNullOrUndefined(hy)){return}var hz=ss.arrayClone(hy.tOA);var hA=this.get_currentCanvas().width-1;var hB=this.get_currentCanvas().height-1;var hC={x:0,y:0};var hD={x:hA,y:0};var hE={x:0,y:hB};var hF={x:hA,y:hB};var hG=false;var hH=false;for(var hI=hz.length-1;hI>=0;--hI){var hJ=hz[hI];if(hJ.VzB==='$OC'||hJ.VzB==='jp$'){hz.splice(hI,1)}else if(hJ.VzB==='uEs'){var hK=tab.MiscUtil.cloneObject(hJ);hz[hI]=hK;if(hK.WzG[1]===hK.WzG[3]){if(hG){eD.$2(hK.WzG,hE,hF)}else{eD.$2(hK.WzG,hC,hD)}hG=true}else{if(hH){eD.$2(hK.WzG,hD,hF)}else{eD.$2(hK.WzG,hC,hE)}hH=true}}}this.get_currentContext().save();this.$c(hz,null,'pane-borders');this.get_currentContext().restore()},renderAxisRulers:function(e,L,hy){var hz=e.get_vizRegionMap()['axis-rules'];if(ss.isValue(hz)){var hA=function(hI,hJ){var hK={};hK.VzB='uEs';hK.WzG=new Array(4);eD.$2(hK.WzG,hI,hJ);return hK};var hB=fv.calculatePixelRatio();var hC=this.get_currentCanvas().height-1;var hD=[];var hE=hz.get_visualListPM().tOA;for(var hF=0;hF<hE.length;hF++){var hG=hE[hF];if(hG.VzB==='Osj'){hD.push(hG)}else if(hG.VzB==='uEs'){var hH=hG;if(hH.WzG[0]===hH.WzG[2]){hD.push(hA({x:0,y:-hy.y},{x:0,y:Math.round(hB*L.h)-hy.y}))}else if(hH.WzG[1]===hH.WzG[3]){hD.push(hA({x:-hy.x,y:hC},{x:Math.round(hB*L.w)-hy.x,y:hC}))}}}this.get_currentContext().save();this.$c(hD,null,'axis-rules');this.get_currentContext().restore()}},$8:function(e){for(var L=0;L<e.length;L++){var hy=e[L];for(var hz=0;hz<hy.MdI.length;hz++){var hA=hy.MdI[hz];if(hA.oqX==='pane-borders'){return hA}}}return null},$l:function(e,L){if(!ss.isValue(e)){return}for(var hy=0;hy<L.length;hy++){var hz=L[hy];var hA=e[hz];if(!ss.contains(eI.blackListVisualParts,hz)&&hz!=='axis-rules'){if(ss.isValue(hA)){this.get_currentContext().save();var hB=this.$n.get_imageDictionary();this.$m.renderVisualListHelper(hA,hB);this.get_currentContext().restore()}}}},$j:function(e,L){if(!ss.isValue(e)){return}this.get_currentContext().save();this.$c(e.tOA,L,e.oqX);this.get_currentContext().restore()},$h:function(e,L){if(!ss.isValue(e)){return}if(!L){this.$k(e,'background')}this.$e(e);this.$k(e,'foreground')},$k:function(e,L){for(var hy=0;hy<e.length;hy++){var hz=e[hy];if(!this.$a(hz)){continue}for(var hA=0;hA<hz.MdI.length;hA++){var hB=hz.MdI[hA];if(L===this.$7(hB.oqX)){this.$j(hB,this.$9(hz))}}}},$9:function(e){var L=_.find(e.MdI,function(hy){return hy.oqX==='marks'});if(ss.isValue(L)){return this.$n.$a(L.SgS)}return null},$e:function(e){var L=[];var hy=[];for(var hz=0;hz<e.length;hz++){var hA=e[hz];if(this.$a(hA)){L.push(hA);var hB=null;for(var hC=0;hC<hA.MdI.length;hC++){var hD=hA.MdI[hC];if(hD.oqX==='marks'){hB=this.$n.$a(hD.SgS);break}}hy.push(hB)}}for(var hE=0;hE<eD.$6.length;hE++){var hF=eD.$6[hE];for(var hG=0;hG<eD.$5.length;hG++){var hH=eD.$5[hG];var hI=0;for(var hJ=0;hJ<L.length;hJ++){var hK=L[hJ];var hL=hy[hI];hI++;if(ss.isNullOrUndefined(hL)){continue}if(hH==='marks'||hH==='label'){for(var hM=0;hM<hK.MdI.length;hM++){var hN=hK.MdI[hM];if(hN.oqX==='marks'){if(hH==='marks'){this.$g(hL,hF);break}else if(hH==='label'){if(hL.get_hasLabels()){this.$f(hL,hF);break}}}}}else{for(var hO=0;hO<hK.YVl.length;hO++){var hP=hK.YVl[hO];switch(hP.VzB){case'rLc':{var hQ=new en(this.get_currentCanvas(),this.get_currentContext());hQ.setRenderOffsetNoTranslate(this.get_renderOffset());hQ.$p(hL,hF,hP,hH);break}case'BVa':{var hR=new en(this.get_currentCanvas(),this.get_currentContext());hR.setRenderOffsetNoTranslate(this.get_renderOffset());hR.$q(hL,hF,hP,hH);break}}}}}}}},$c:function(e,L,hy){if(!ss.isValue(e)){return}var hz=this.$n.get_imageDictionary();if(hy!=='ref-lines'&&hy!=='ref-bands'&&hy!=='trend-lines'){var hA=null;if(hy==='decoration'){if(ss.isValue(L)){hA=L.get_mapExtents()}}this.$m.renderDrawItems(e,null,hz,hA)}else{var hB=this.$n.$s().get_refLineSelection();var hC=!hB.get_isEmpty();var hD=this.$n.$s().get_trendLineSelection();var hE=!hD.get_isEmpty();var hF=this.$n.$m().get_trendLineSelection();var hG=null;for(var hH=0;hH<e.length;hH++){var hI=e[hH];if(hI.VzB==='rOX'){var hJ=hI;var hK=false;var hL=false;switch(hy){case'ref-lines':{hK=hB.isMarkSelected(hJ.YLs);hL=!hK&&(hC||hE);break}case'ref-bands':{hL=(hC||hE)&&!hB.isMarkSelected(hJ.YLs);break}case'trend-lines':{if(hJ.YLs>2147483647){if(!hF.get_isEmpty()){continue}hK=false;hL=false}else{hK=hD.isMarkSelected(hJ.YLs);hL=!hK&&!hF.isMarkSelected(hJ.YLs)&&(this.$n.$p()||this.$n.$q())}break}}var hM=(hK?'selected':'normal');if(hL&&ss.isNullOrUndefined(hG)){if(ss.isValue(L)&&ss.isValue(L.get_fogBlendFactor())&&ss.isValue(L.get_foggedBackgroundColor())){hG={item1:L.get_fogBlendFactor(),item2:L.get_foggedBackgroundColor()}}else{var hN=tab.ColorModel.fromColorCode('rgba(255,255,255,255)');var hO=fx.getFogBlendFactor(hN);var hP=fx.applyFogToBackgroundColor(hN,hO);hG={item1:hO,item2:hP}}}this.drawReferenceLineAndTrendLineGroup(hJ.tOA,hM,this.get_currentContext(),true,(hL?hG:null))}else{this.renderVisualParts(this.get_currentContext(),hI)}}}},renderVisualParts:function(e,L){this.$m.renderDrawItemDefaultOptions(e,L)},$a:function(e){return this.isRectVisible(tab.RecordCast.rectPresModelAsRectXY(e.PeS))},$i:function(e,L,hy,hz,hA,hB){this.get_currentContext().save();if(!e.get_skipClipping()){this.get_currentContext().setClip(hB)}this.get_currentContext().translate(e.get_paneRect().x,e.get_paneRect().y);hA(e,L,hy,hz);this.get_currentContext().restore()},$b:function(e,L,hy){if(e.get_markCount()===0){return}var hz=new en(this.get_currentCanvas(),this.get_currentContext());hz.setRenderOffsetNoTranslate(this.get_renderOffset());if(!e.hasUserPanes){this.$i(e,0,hz,L,hy,e.get_mapExtentOrPaneRect());return}var hA=e.userPaneCount;var hB=e.get_paneRect().x;var hC=e.get_paneRect().y;for(var hD=0;hD<hA;++hD){var hE=e.getUserPaneRectByIndex(hD);hE=tab.RectXYUtil.offsetRectXY(hE,hB,hC);var hF=e.$c(hD);if(hF>0&&this.isRectVisible(hE)){this.$i(e,hD,hz,L,hy,hE)}}},$g:function(e,L){this.$b(e,L,ss.mkdel(this,this.$d))},$f:function(e,L){this.$b(e,L,function(hy,hz,hA,hB){hA.$m(hy,hz,hB)})},$d:function(e,L,hy,hz){var hA=e.get_markType();switch(hA){case'shape':{{hy.$M(e,L,hz)}break}case'square':case'bar':{{hy.$k(e,L,hz)}break}case'pie':{{hy.$o(e,L,hz)}break}case'line':{{hy.$l(e,L,hz)}break}case'area':{{hy.$j(e,L,hz)}break}case'text':{{hy.$O(e,L,hz)}break}case'multipolygon':{{hy.$n(e,L,hz)}break}default:{break}}},$7:function(e){switch(e){case'background':case'decoration':case'ref-bands':case'cell-borders':{return'background'}case'mark-trails':case'marks':case'mark-labels':{return'marks'}case'borders':case'trend-lines':case'ref-lines':case'pane-borders':case'annotations':case'axis-rules':{return'foreground'}}return'background'}},bb);ss.initClass(eE,a,{get_paneTableVM:function(){return this.get_viewModel()},get_paneTableRenderer:function(){return this.renderer},get_isContentOpaque:function(){return!this.get_paneTableVM().get_mapServerModel().get_useFastMaps()},performRender:function(){var e={};e['viz']=this.get_paneTableVM().get_sheetId();{var L=tabBootstrap.MetricsController.createContext('RNDRPT'.toString(),4,e);try{this.renderer.clear();this.get_paneTableRenderer().renderScene(this.get_paneTableVM())}finally{if(ss.isValue(L)){L.dispose()}}}},onViewModelPropertyChanged:function(e,L){var hy=this.get_paneTableVM().getAndClearInvalidationRects();if(hy.length===0){this.invalidate(false)}else{var hz=tab.RectXYUtil.unionAll(hy);var hA=3;hz=tab.RectXYUtil.outsetRect(hz,hA,hA);var hB={x:-this.get_scrollPos().x,y:-this.get_scrollPos().y};hz=tab.RectXYUtil.offsetRect(hz,hB);this.invalidateRect(hz,false)}},postRenderFinalPass:function(){this.get_paneTableRenderer().renderViewportBorders(this.get_paneTableVM());this.get_paneTableRenderer().renderAxisRulers(this.get_paneTableVM(),this.get_docSize(),this.get_scrollPos())}},ss.makeGenericType(hf,[eI]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[eI]),spiff.IScrollable,dB]);ss.initClass(eF,a,{get_paneTableVM:function(){return this.get_viewModel()},get_lastTargetState:function(){return this.$L},clearOverlays:function(){this.$s();this.$t();this.$r();this.$m();this.$P=false},hoverOverWhitespace:function(){this.$I=false},setScrollPosition:function(e){this.set_scrollPos(e);this.$F=[];this.invalidate(true)},setDragOverlayTuples:function(e){this.$s();this.$t();this.$m();if(this.$P){return}this.$M=e;var L=eF.$0(this.$G,e);var hy=L.length;if(hy>0){var hz=this.get_paneTableVM().get_scene();var hA=[];for(var hB=0;hB<hy;hB++){var hC=L[hB];var hD=this.$u(hC,hz);hA.push(hD)}var hE=this.$Q.get_shapeSelector();this.$O=hE.retrieveStateObject(this.$O);var hF=hE.getStateDiff(this.$O);var hG=hF.length;var hH=new tab.IntSet;var hI=new Array(hG);for(var hJ=0;hJ<hG;hJ++){var hK=hF[hJ];var hL={x:0,y:0,w:0,h:0};for(var hM=0;hM<hy;hM++){if(hH.contains(hM)){continue}var hN=hA[hM];if(tab.RectXYUtil.intersectsWithAny(hK,hN)){hL=tab.RectXYUtil.union(tab.RectXYUtil.unionAll(hN),hL);hH.add(hM)}}hI[hJ]=(tab.RectXYUtil.isEmpty(hL)?hL:tab.RectXYUtil.outsetRect(hL,3,3))}hI=tab.RectXYUtil.reduceRectangles(hI);this.$F=hI;if(eF.$1){this.invalidate(false)}var hO=tab.RectXYUtil.unionAll(hI);hO=tab.RectXYUtil.offsetRect(hO,{x:-this.get_scrollPos().x,y:-this.get_scrollPos().y});this.invalidateRect(hO,true)}else{this.$F=[];this.clearDirty();this.$M=null}},setHoverOverlayTarget:function(e,L){this.$L='hover';if(!this.$J.$1(e,L)){this.$I=false}if(this.$J.$2(e,L)||ss.isValue(this.$G)&&this.$G.length>0){return false}this.$n();var hy=this.$v(e,L);this.$w(hy);this.$J.$3(e,L,hy);this.$A();return true},setPressedOverlayTarget:function(e,L){this.$I=true;this.$L='press';if(this.$N.$2(e,L)){return false}this.$n();var hy=this.$v(e,L);this.$w(hy);this.$N.$3(e,L,hy);this.$A();return true},$z:function(e,L){if(L.get_propertyName()==='scene'||L.get_propertyName()==='vizdata'){this.$E()}},performRender:function(){var e=tabBootstrap.MetricsController.createContext('Render Overlay Panetable',32,null);{if(this.$F.length>0||ss.isValue(this.$G)&&this.$G.length>0){this.$B()}else{this.renderer.clear();var L=tab.RectXYUtil.offsetRect(this.get_dirtyRect(),{x:this.get_scrollPos().x,y:this.get_scrollPos().y});if(this.$J.$4()){if(this.$J.$8==='mark'){var hy=this.get_paneTableVM().get_scene().getPaneDrawInfoFromTupleId(this.$J.$5());if(!ss.isNullOrUndefined(hy)){this.$o(this.$J.$5(),hy,L);eD.renderHoverOverlay(this.$J.$5(),hy,this.context)}}else{this.$D(this.$J)}}else if(this.$N.$4()){if(this.$N.$8==='mark'){var hz=this.get_paneTableVM().get_scene().getPaneDrawInfoFromTupleId(this.$N.$5());if(!ss.isNullOrUndefined(hz)){this.$o(this.$N.$5(),hz,L);eD.renderPressedOverlay(this.$N.$5(),hz,this.context)}}else{this.$D(this.$N)}}}}e.dispose()},$q:function(e,L,hy){var hz=tab.RectXYUtil.offsetRectXY(e,L.get_paneRect().x,L.get_paneRect().y);var hA=L.get_mapExtents();if(ss.isValue(hA)){tab.RectXYUtil.intersectInPlace(hz,hA)}tab.RectXYUtil.intersectInPlace(hz,hy);this.context.setClip(hz);this.context.translate(L.get_paneRect().x,L.get_paneRect().y)},$o:function(e,L,hy){var hz=L.getUserPaneRectByTupleID(e);this.$q(hz,L,hy)},$p:function(e,L,hy){var hz=L.getUserPaneRectByIndex(e);this.$q(hz,L,hy)},$B:function(){var e=75;var L=(new Date).getTime();if(ss.isNullOrUndefined(this.$M)){this.$M=this.$G}if(this.$F.length===0){var hy={x:this.get_scrollPos().x,y:this.get_scrollPos().y,w:this.get_effectiveViewSize().w,h:this.get_effectiveViewSize().h};this.$F.push(hy)}if(this.$M.length===0){this.renderer.clear();return}if(eF.$1){this.renderer.clear()}var hz={};var hA={};var hB={};var hC=this.get_paneTableVM().get_scene();for(var hD=0;hD<this.$M.length;hD++){var hE=this.$M[hD];var hF=hC.getPaneDrawInfoFromTupleId(hE);var hG=hF.get_pdiKey();hz[hG]=ss.coalesce(hz[hG],new tab.UintSet);hz[hG].add(hE);hA[hG]=hF;var hH=hC.getMarkBoundingBox(hE);var hI=hF.getWorldOffsetBounds(hH);hB[hE]=hI}var hJ=0;var hK=this.$F.length;for(var hL=0;hL<hK;hL++){var hM=this.$F[hL];this.context.clearRect(hM.x,hM.y,hM.w,hM.h);if(eF.$1){this.context.set_strokeStyle('rgb(255,0,0)');this.context.strokeRect(hM.x,hM.y,hM.w,hM.h)}var hN=new ss.ObjectEnumerator(hz);try{while(hN.moveNext()){var hO=hN.current();var hP=hA[hO.key];var hQ=tab.RectXYUtil.intersect(hM,hP.get_mapExtentOrPaneRect());if(tab.RectXYUtil.isEmpty(hQ)){continue}var hR=false;var hS=hP.hasUserPanes;var hT=-1;var hU=false;var hV=hO.value.get_values();for(var hW=0;hW<hV.length;hW++){var hX=hV[hW];if(hJ>=e){if((new Date).getTime()-L>145){hU=true;break}hJ=0}++hJ;if(!tab.RectXYUtil.intersectsWithAny(hQ,hB[hX])){continue}var hY=0;if(hS){hY=hP.$b(hP.getMarkIndexFromTupleID(hX));if(hY!==hT){if(hR){this.context.restore();hR=false}hT=hY}}if(!hR){this.context.save();this.$p(hY,hP,hM);hR=true}eD.renderHoverOverlay(hX,hP,this.context)}if(hR){this.context.restore()}if(hU){this.$P=true;this.renderer.clear();return}}}finally{hN.dispose()}}},$D:function(e){var L=[];if(e.$7()==='hover'&&tsConfig.is_authoring){switch(e.$8){case'ref-line':{L=this.get_paneTableVM().get_refLineVisualLists();break}case'trend-line':{L=this.get_paneTableVM().get_trendLineVisualLists();break}}}for(var hy=0;hy<L.length;hy++){var hz=L[hy];var hA=[];ss.arrayAddRange(hA,hz.tOA);this.$C(hA,e)}},$C:function(e,L){var hy=L.$7();var hz=L.$5();this.context.save();var hA=this.renderer;var hB=ss.getEnumerator(e);try{while(hB.moveNext()){var hC=hB.current();if(hC.VzB==='rOX'){var hD=hC;var hE=true;if(this.$I){switch(L.$8){case'ref-line':{hE=!this.get_paneTableVM().get_scene().$s().get_refLineSelection().isMarkSelected(hD.YLs);break}case'trend-line':{hE=!this.get_paneTableVM().get_scene().$s().get_trendLineSelection().isMarkSelected(hD.YLs);break}}}if(hE){hA.drawReferenceLineAndTrendLineGroup(hD.tOA,hy,this.context,hz===hD.YLs,null)}}else{hA.renderVisualParts(this.context,hC)}}}finally{hB.dispose()}this.context.restore()},postRenderFinalPass:function(){},redrawFinished:function(){this.$G=this.$M;this.$M=null;this.$Q.get_shapeSelector().updateLastState(this.$O);this.$F=[];if(this.$P){this.$r()}},$A:function(){if(this.$H||tab.MiscUtil.isNullOrEmpty(this.$K)){this.$H=false;this.invalidate(true)}else{var e=tab.RectXYUtil.unionAll(this.$K);ss.clear(this.$K);var L={x:-this.get_scrollPos().x,y:-this.get_scrollPos().y};e=tab.RectXYUtil.offsetRect(e,L);e=tab.RectXYUtil.outsetRect(e,3,3);this.invalidateRect(e,true)}},$m:function(){if(this.$H||!tab.MiscUtil.isNullOrEmpty(this.$K)){this.$A()}},$E:function(){if(!this.$x(this.$J)){this.$J.$0()}if(!this.$x(this.$N)){this.$N.$0()}if(ss.isValue(this.$G)){var e=new tab.UintSet;for(var L=0;L<this.$G.length;L++){var hy=this.$G[L];if(this.$y(hy)){e.add(hy)}}this.$G=e.get_values()}},$x:function(e){if(!e.$4()){return false}return e.$8==='mark'&&this.$y(e.$5())},$y:function(e){var L=this.get_paneTableVM().get_visualModel().get_vizDataModel();var hy=this.get_paneTableVM().get_scene();return ss.isValue(L)&&L.hasTupleId(e)&&!hy.$c(e)},$n:function(){this.$s();this.$t();this.$r()},$v:function(e,L){if(L==='mark'){return this.$u(e)}else{return null}},$w:function(e){if(ss.isNullOrUndefined(e)){this.$H=true;ss.clear(this.$K);return}for(var L=0;L<e.length;L++){var hy=e[L];this.$K.push(hy)}},$u:function(e,L){L=L||this.get_paneTableVM().get_scene();var hy=L.getMarkBoundingBox(e);var hz=this.get_paneTableVM().get_scene().getPaneDrawInfoFromTupleId(e);var hA=hz.getWorldOffsetBounds(hy);return hA},$s:function(){if(this.$J.$4()){this.$w(this.$J.$6());this.$J.$0()}},$t:function(){if(this.$N.$4()){this.$w(this.$J.$6());this.$N.$0()}},$r:function(){if(ss.isValue(this.$G)){var e=this.get_paneTableVM().get_scene();for(var L=0;L<this.$G.length;L++){var hy=this.$G[L];ss.arrayAddRange(this.$K,this.$u(hy,e))}this.$G=null}this.$M=null;this.$F=[];this.$O=null}},ss.makeGenericType(hf,[eI]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[eI]),spiff.IScrollable,dB]);ss.initClass(eG,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(eH,a,{get_geometry:function(){return this.geometry},get_visibleGeometry:function(){return this.visibleGeometry},get_sortIndicators:function(){return this.get_paneTableVM().get_sortIndicators()},get_posTV:function(){return tab.PointUtil.fromPosition(this.dom.get_domRoot().offset())},get_dom:function(){return this.dom},get_sheetid:function(){return this.get_paneTableVM().get_sheetId()},get_session:function(){return this.get_controller().get_viewSession()},get_tlspacerAreaX:function(){return this.$O},get_tlspacerAreaY:function(){return this.$P},get_blspacerArea:function(){return this.$u},get_titleHeight:function(){return this.$M},get_numColumns:function(){return(ss.isValue(this.geometry)?this.geometry.pi.xWidths.length:0)},get_numRows:function(){return(ss.isValue(this.geometry)?this.geometry.pi.yHeights.length:0)},get_scrollPosition:function(){return this.$J},set_scrollPosition:function(e){this.$J=e;this.$k(this.$J);this.$p()},get_controller:function(){return this.get_paneTableVM().get_viewController()},get_visualId:function(){return this.get_paneTableVM().get_visualId()},get_vizHitTester:function(){return this.vizHitTester},get_isMap:function(){return this.isMap},set_isMap:function(e){this.isMap=e},get_paneTableVM:function(){return this.get_viewModel()},get_sizeOfRegions:function(){return this.$K},get_mapsSearchEnabled:function(){return tsConfig.allow_filter&&this.isMap&&this.get_paneTableVM().get_visualModel().get_geoSearchVisibility()==='on'},get_vizToolTip:function(){this.$c();return this.vizTooltip},init:function(){this.$h();this.makeConnections();this.makeRegions();this.initEventHandlers();this.makeRegionContentProviders();if(tab.FeatureParamsLookup.getBool(37)===true){this.vizHitTester=tab.MiscUtil.dispose$1(this.vizHitTester);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.vizHitTester=new eg(this,this.regions['viz'])}else{this.vizHitTester=new fD(this,this.regions['viz'])}}},dispose:function(){this.$y=true;if(ss.isValue(this.vizHitTester)){this.vizHitTester.dispose()}this.destroyInputHandlers();this.destroyRegions();this.disposables.dispose();this.visibleGeometry=null;this.disposeOfOverlays();if(ss.isValue(this.get_paneTableVM())){this.get_paneTableVM().remove_vizRegionMapChange(ss.mkdel(this,this.$s));if(ss.isValue(this.regions['viz'])){var e=this.get_paneTableVM();var L=this.regions['viz'];e.remove_propertyChanged(ss.mkdel(L,L.$5))}}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.dispose()}if(ss.isValue(this.$N)){this.$N.dispose()}if(ss.isValue(this.$x)){this.$x.dispose()}if(ss.isValue(this.$B)){this.$B.dispose()}if(ss.isValue(this.vizTooltip)){this.vizTooltip.remove_tooltipClosed(ss.mkdel(this,this.onTooltipClosed));this.vizTooltip.remove_ubertipUpdated(ss.mkdel(this,this.maybeShowOverlayImages));this.vizTooltip.remove_ubertipCommandExecuted(ss.mkdel(this,this.onCommandExecuted));this.vizTooltip.remove_ubertipActionExecuted(ss.mkdel(this,this.onActionExecuted));this.vizTooltip.dispose()}if(ss.isValue(this.$D)){this.get_paneTableVM().remove_propertyChanged(ss.mkdel(this.$D,this.$D.$z));this.$D.dispose()}if(ss.isValue(this.mapsSearchView)){this.mapsSearchView.dispose()}ss.makeGenericType(spiff.BaseView$1,[eI]).prototype.dispose.call(this)},$d:function(e,L,hy){if(e.moveNext()){e.current()(this,L).done(ss.mkdel(this,function(hz){if(hz){hy.resolve(true);return}this.$d(e,L,hy)}))}else{hy.resolve(false)}},initEventHandlers:function(){this.$9();this.makeInputHandlers();this.setupDrilling();this.setupSortIndicators();this.refreshScrollingAndDrilling()},callAsyncVizDragHandlers:function(e,L){var hy=$.Deferred();if(tab.FeatureParamsLookup.getBool(37)===true){this.$d(ss.getEnumerator(eH.$2),e,hy)}else{hy.resolve(false)}hy.done(ss.mkdel(this,function(hz){if(hz){this.get_vizToolTip().close();e.stopPropagation();return}L(e)}))},callVizDragHandlers:function(e,L){if(tab.FeatureParamsLookup.getBool(37)===true){for(var hy=0;hy<eH.$4.length;hy++){if(eH.$4[hy](this,e)){this.get_vizToolTip().close();e.stopPropagation();return}}}L(e)},getVizDragApproval:function(e){if(ss.isValue(e)){for(var L=0;L<eH.$3.length;L++){if(eH.$3[L](e)){return true}}}return false},zoomHome:function(){this.get_session().restoreSheetAxes();if(ss.isValue(this.mapsSearchView)){this.mapsSearchView.collapseSearchWidget();this.mapsSearchView.get_compositeSearchWidget().showInitialSearchText(true)}},handlePageScroll:function(){var e=new ss.ObjectEnumerator(this.regions);try{while(e.moveNext()){var L=e.current();L.value.handlePageScroll()}}finally{e.dispose()}},doTiledViewerRefreshImages:function(e){this.refreshImages(e)},setPointerToolMode:function(e,L){this.isPointerToolLocked=L;if(tab.FeatureFlags.isEnabled('StickyMapTools')&&this.isPointerToolLocked){this.regions['viz'].setLockedPointerToolMode(e)}this.regions['viz'].setPointerToolMode(e)},defaultPointerToolMode:function(){if(ss.keyExists(this.regions,'viz')){return this.regions['viz'].get_defaultPointerToolMode()}return'rectangular-selection'},isExistingSelection:function(){if(ss.keyExists(this.regions,'viz')){return this.regions['viz'].isExistingSelection()}return false},resetPointerToolMode:function(){if(ss.isNullOrUndefined(this.zoomToolbar)&&this.ftv!=='hide'){this.createZoomToolbar()}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.resetPointerToolMode()}else if(ss.keyExists(this.regions,'viz')){this.regions['viz'].resetPointerToolMode()}},connectTooltipEventHandlers:function(){var e=this.get_vizToolTip();e.add_tooltipClosed(ss.mkdel(this,this.onTooltipClosed));e.add_ubertipUpdated(ss.mkdel(this,this.maybeShowOverlayImages));e.add_ubertipCommandExecuted(ss.mkdel(this,this.onCommandExecuted));e.add_ubertipActionExecuted(ss.mkdel(this,this.onActionExecuted))},updateRegionBGColor:function(){var e=this.get_paneTableVM().get_visualModel();var L=[e.get_backgroundColor(),e.get_paneBGColor(),e.get_headerBGColor()];if(ss.isValue(this.$v)&&_.isEqual(this.$v,L)){return}this.$v=L;var hy=this.listAllRegions();var hz=tab.ApplicationModel.get_instance().get_isLocalRenderMode();var hA=_.keys(hy);for(var hB=0;hB<hA.length;hB++){var hC=hA[hB];var hD=hy[hC];if(ss.isNullOrUndefined(hD)){continue}var hE=L[0];if(hC==='viz'){hE=L[1]}else if(ss.contains(eH.headerRegions,hC)){hE=L[2]}hD.css('background-color',hE);if(!hz){var hF=$('.tvimagesContainer',hD);hF.css('background-color',hE)}}this.dom.tlSpacer.css('background-color',L[2]);this.dom.trSpacer.css('background-color',L[2]);this.dom.blSpacer.css('background-color',L[2]);this.dom.brSpacer.css('background-color',L[2])},makeRegionContentProvidersHelper:function(e,L){var hy=this.listNonVizRegions();if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.get_paneTableVM().add_vizRegionMapChange(ss.mkdel(this,this.$s));var hz=((this.isMap||tsConfig.is_authoring)?'transparent':'opaque');var hA=new eE(this.get_paneTableVM(),this.getDomNodeForContentRegion(e),hz);var hB=$('.tvimagesContainer',e);hB.get(0).appendChild(hA.get_element().get(0));this.regions['viz'].set_contentProvider(hA);var hC=this.get_paneTableVM();var hD=this.regions['viz'];hC.add_propertyChanged(ss.mkdel(hD,hD.$5));this.$s();this.$D=new eF(this.get_paneTableVM(),this.getDomNodeForContentRegion(e),this.regions['viz']);this.get_paneTableVM().add_propertyChanged(ss.mkdel(this.$D,this.$D.$z));hB.get(0).appendChild(this.$D.get_element().get(0))}else{var hE=_.keys(hy);for(var hF=0;hF<hE.length;hF++){var hG=hE[hF];var hH=hy[hG];var hI=this.makeTiledWindow(hH,this.get_session(),this.get_controller(),ss.mkdel(this,this.$e),null);this.regions[hG].set_contentProvider(hI)}this.regions['viz'].set_contentProvider(this.makeTiledWindow(e,this.get_session(),this.get_controller(),ss.mkdel(this,this.$e),L))}this.updateRegionBGColor()},makeTiledWindowHelper:function(e,L,hy,hz,hA,hB){var hC=new gr(this.getDomNodeForContentRegion(e),L,hy,hz,hB);if(ss.isValue(hA)){hC.add_loadComplete(hA);this.disposables.add$1(new tab.CallOnDispose(function(){hC.remove_loadComplete(hA)}))}return hC},listNonVizRegions:function(){var e={};e['yheader']=this.dom.yLabel;e['leftaxis']=this.dom.leftAxis;e['rightaxis']=this.dom.rightAxis;e['xheader']=this.dom.xLabel;e['bottomaxis']=this.dom.bottomAxis;e['topaxis']=this.dom.topAxis;return e},listAllRegions:function(){var e=this.listNonVizRegions();e['viz']=this.dom.view;return e},destroyRegions:function(){var e=ss.getEnumerator(Object.keys(this.regions));try{while(e.moveNext()){var L=e.current();if(ss.isValue(this.regions[L])){this.regions[L].destroy()}}}finally{e.dispose()}},checkForHoverOverlay:null,isUserDragging:null,onTooltipClosed:function(){},onCommandExecuted:function(e,L){if(L.command.commandType===7){this.get_session().executeCommand(L.command)}else{tab.UberTipClientCommands.executeUbertipCommand(L.command)}},onActionExecuted:function(e,L){var hy=function(){e.hideSpinner()};var hz=function(hA){e.hideSpinner()};this.get_session().executeAction(L.action,hz,hy)},isMapWithBaseLayer:function(){return this.isMap&&this.get_paneTableVM().get_mapServerModel().get_hasPresModel()},doDoubleTap:function(e,L,hy){if(!tsConfig.allow_filter){return}if(this.isMapWithBaseLayer()&&hy<1&&!tab.MapUtil.allowZoomAtCurrentLevel(this.get_paneTableVM().get_mapServerModel().get_zoom(),1/hy)){return}if(e.get_regionPart()==='viz'&&this.allowPanZoomOnDoubleTap()){this.get_controller().incrementCacheVersion();var hz=tab.DeferLayoutImpl.get_instance();hz.setDeferLayoutUpdates(true);var hA=this.resolvePane(e.toLocalCoordsEvent(L));e.zoomPoint(hA,e.toLocalCoordsEvent(L),hy,true,hz);this.disposeOfOverlays()}},$i:function(){this.checkForHoverOverlay();if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.regions['viz'].reset()}},dragOverride:function(e,L){if(this.isUserDragging()){return}this.callVizDragHandlers(e,L)},dragOverrideAsync:function(e,L){if(this.isUserDragging()){return}this.callAsyncVizDragHandlers(e,L)},clearSelection:function(){tab.SelectionClientCommands.clearAllSelections(this.get_visualId())},refreshImages:function(e){this.$I+=1;var L=ss.getEnumerator(Object.keys(this.regions));try{while(L.moveNext()){var hy=L.current();this.regions[hy].refreshImages(e)}}finally{L.dispose()}if(this.$H.length>0){var hz=this.$H.length;for(var hA=0;hA<hz;hA++){var hB=this.$H[hA]['element'];if(ss.isValue(hB)){var hC=this.get_session().formatRegionTileURL(e,this.$H[hA]['name'],this.$e());var hD=hB.children().first();var hE=fv.calculatePixelRatio(false);if(tab.DoubleUtil.isGreaterThanAndNotApproximatelyEqual(hE,1)){hD.css('width',hB.width().toString()+'px')}hD.attr('src',hC)}}}},layout:function(){var e=this.get_element().outerWidth();var L=this.get_element().outerHeight();if(this.$F===L&&this.$G===e){return}this.$F=L;this.$G=e},$r:function(e,L){var hy=L.x+L.w;return Math.max(e,hy)},$q:function(e,L){var hy=L.y+L.h;return Math.max(e,hy)},setGeometry:function(e,L){var hy={item1:L,item2:e};if(ss.isValue(this.$w)&&_.isEqual(hy,this.$w)){this.refreshScrollingAndDrilling();return}this.$w=hy;var hz=0,hA=0;var hB=0,hC=0;var hD=0,hE=0;var hF=0,hG=0,hH=0;var hI=0,hJ=0;var hK=0,hL=0;var hM,hN,hO,hP,hQ,hR,hS;var hT,hU,hV,hW;this.$H=[];this.$I+=1;this.visibleGeometry={};var hX=this.visibleGeometry;var hY={};$.extend(true,hY,e);this.geometry=hY;var hZ=hY.ri.length;for(var ia=0;ia<hZ;ia++){hY[hY.ri[ia].r]=hY.ri[ia]}var ib=L.w;var ic=L.h;if(this.$G!==-1){ib=this.$G}if(this.$F!==-1){ic=this.$F}if(ss.isValue(hY.title)){hC=this.$q(hC,hY.title)}if(ss.isValue(hY.xheader)){hF=hY.xheader.x;hD=hY.xheader.w;hC=this.$q(hC,hY.xheader)}if(ss.isValue(hY.bottomaxis)){hF=hY.bottomaxis.x;hD=hY.bottomaxis.w;hC=this.$q(hC,hY.bottomaxis)}if(ss.isValue(hY.topaxis)){hC=this.$q(hC,hY.topaxis)}if(ss.isValue(hY.viz)){hF=hY.viz.x;hD=hY.viz.w;hC=this.$q(hC,hY.viz)}if(ss.isValue(hY.caption)){hC=this.$q(hC,hY.caption)}if(ss.isValue(hY.yheader)){hH=hY.yheader.y;hE=hY.yheader.h;hB=this.$r(hB,hY.yheader)}if(ss.isValue(hY.leftaxis)){hH=hY.leftaxis.y;hE=hY.leftaxis.h;hB=this.$r(hB,hY.leftaxis)}if(ss.isValue(hY.rightaxis)){hB=this.$r(hB,hY.rightaxis)}if(ss.isValue(hY.viz)){hH=hY.viz.y;hE=hY.viz.h;hB=this.$r(hB,hY.viz)}if(hE>0){var id=hC;if(hB>ib){id+=eo.get_scrollH()}if(id>ic){hI=eo.get_scrollW()}}if(hD>0&&hB>ib){hJ=eo.get_scrollH()}if(tab.BrowserSupport.get_isIE()&&hI>0){hI+=1}if(tab.BrowserSupport.get_isIE()&&hJ>0){hJ+=1}if(hE>0){var ie=hC-hE;hL=ic-ie-hJ;hL=Math.min(hE,hL);hA=hE-hL}if(hD>0){var ig=hB-hD;hK=ib-ig-hI;hK=Math.min(hD,hK);hz=hD-hK}this.$K.h=Math.min(hC-hA,ic);this.$K.w=Math.min(hB-hz,ib);hG=this.$K.h;var ih=tab.ApplicationModel.get_instance().get_isLocalRenderMode();var ii=((ih&&ss.isValue(hY.bottomaxis))?1:0);var ij=((ih&&ss.isValue(hY.rightaxis))?1:0);if(ih){var ik=[hY.yheader,hY.rightaxis,hY.leftaxis,hY.viz];for(var il=0;il<ik.length;il++){var im=ik[il];if(ss.isValue(im)){im.h+=ii}}var io=[hY.xheader,hY.bottomaxis,hY.topaxis,hY.viz];for(var ip=0;ip<io.length;ip++){var iq=io[ip];if(ss.isValue(iq)){iq.w+=ij}}}if(hL<0){hL=0}if(hK<0){hK=0}this.$M=0;if(ss.isValue(hY.title)&&this.dom.title.css('display')!=='none'){this.$M=hY.title.h;var ir={l:0,t:hY.title.y,w:hY.title.w+hI,h:hY.title.h};var it=tab.DomUtil.getMarginBoxJQ(this.dom.title);if(!_.isEqual(ir,it)){tab.DomUtil.setAbsolutePositionBox(this.dom.title,ir);this.$N.handleNewTextRegion();hG=Math.max(hG,hY.title.h+hY.title.y)}}hN=function(){return{l:hY.yheader.x,t:hY.yheader.y,w:Math.min(hY.yheader.w,ib-hI),h:hL+ii}};hX.yheaderArea=this.setRegionAndContentGeometry(hY.yheader,this.dom.yLabel,hN,'yheader',hY.ts);hO=function(){return{l:hY.leftaxis.x,t:hY.leftaxis.y,w:hY.leftaxis.w,h:hL+ii}};hX.leftaxisArea=this.setRegionAndContentGeometry(hY.leftaxis,this.dom.leftAxis,hO,'leftaxis',hY.ts);hP=function(){return{l:hY.rightaxis.x-hz,t:hY.rightaxis.y,w:hY.rightaxis.w,h:hL+ii}};hX.rightaxisArea=this.setRegionAndContentGeometry(hY.rightaxis,this.dom.rightAxis,hP,'rightaxis',hY.ts);hQ=function(){return{l:hY.xheader.x,t:hY.xheader.y,w:hK+ij,h:hY.xheader.h}};hX.xheaderArea=this.setRegionAndContentGeometry(hY.xheader,this.dom.xLabel,hQ,'xheader',hY.ts);hR=function(){return{l:hY.bottomaxis.x,t:hY.bottomaxis.y-hA,w:hK+ij,h:hY.bottomaxis.h}};hX.bottomaxisArea=this.setRegionAndContentGeometry(hY.bottomaxis,this.dom.bottomAxis,hR,'bottomaxis',hY.ts);hS=function(){return{l:hY.topaxis.x,t:hY.topaxis.y,w:hK+ij,h:hY.topaxis.h}};hX.topaxisArea=this.setRegionAndContentGeometry(hY.topaxis,this.dom.topAxis,hS,'topaxis',hY.ts);if(this.dom.caption.css('display')!=='none'){var iu;if(ss.isValue(hY.caption)){hG-=hY.caption.h+8+hJ;iu={l:hY.caption.x,t:hY.caption.y-hA,w:hY.caption.w,h:hY.caption.h}}else{iu={l:0,t:0,w:0,h:0}}var iv=tab.DomUtil.getMarginBoxJQ(this.dom.caption);if(!_.isEqual(iu,iv)){tab.DomUtil.setAbsolutePositionBox(this.dom.caption,iu);this.$x.handleNewTextRegion()}}var iw=null;if(ih){var ix=this.get_paneTableVM().get_vizRegionMap()['background'];if(ss.isValue(ix)){iw=ix.get_visualListPM().tOA}}hT=function(){return{l:hY.uleft.x,t:hY.uleft.y,w:Math.min(hY.uleft.w,ib-hI),h:hY.uleft.h}};hX.uleftArea=this.$l(hY.uleft,this.dom.tlSpacer,hT);if(ss.isValue(hY.uleft)){this.$m(this.dom.tlSpacer,'uleft',iw);this.$P=$.extend({},hX.uleftArea);if(ss.isValue(hY.di)&&hY.uleft.h>=40){this.$P.t=hY.uleft.y+hY.uleft.h-40;this.$P.h=40}this.$O=null;if(ss.isValue(hY.di)&&ss.isValue(hY.di.xy)&&ss.isValue(hY.di.xy[0])){var iy=18;var iz=hY.xheader;if(ss.isValue(iz)&&iz.h>hY.di.xs){hZ=hY.di.xy.length;for(var iA=0;iA<hZ;iA++){if(hY.di.xy[iA][1]>0){this.$O={l:this.$P.l+this.$P.w-iy,t:hY.uleft.y,w:iy,h:hY.uleft.h};this.$P.w=this.$O.l;break}}}}}else{this.$P=null;this.$O=null}hU=function(){return{l:hY.uright.x-hz,t:hY.uright.y,w:Math.min(hY.uright.w,ib-hI),h:hY.uright.h}};this.$l(hY.uright,this.dom.trSpacer,hU);if(ss.isValue(hY.uright)){this.$m(this.dom.trSpacer,'uright',iw)}hV=function(){return{l:hY.lleft.x,t:hY.lleft.y-hA,w:hY.lleft.w,h:hY.lleft.h}};this.$u=this.$l(hY.lleft,this.dom.blSpacer,hV);if(ss.isValue(hY.lleft)){this.$m(this.dom.blSpacer,'lleft',iw)}hW=function(){return{l:hY.lright.x-hz,t:hY.lright.y-hA,w:hY.lright.w,h:hY.lright.h}};this.$l(hY.lright,this.dom.brSpacer,hW);if(ss.isValue(hY.lright)){this.$m(this.dom.brSpacer,'lright',iw)}hM=function(){return{l:hY.viz.x,t:hY.viz.y,w:hK+ij,h:hL+ii}};this.setRegionAndContentGeometry(hY.viz,this.dom.view,hM,'viz',hY.ts);this.setGeometryForWebScrollbars(hL,hK,hI,hJ,hH,this.$K.w,hG,hF,hE,hD);this.refreshScrollingAndDrilling()},$l:function(e,L,hy){if(ss.isValue(e)){var hz=hy();tab.DomUtil.setAbsolutePositionBox(L,hz);this.setRegionGeometryHelper(L,hz);L.show();return hz}else{L.hide();return null}},$m:function(e,L,hy){if(ss.isValue(hy)){var hz=this.$b(e,'canvas');var hA=fv.calculatePixelRatio();bd.setCanvasSizeAndDensify(hz,hA,{w:e.width(),h:e.height()})}else if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.$b(e,'div')}else{this.$b(e,'img');this.$H.push(ss.mkdict(['name',L,'element',e]))}},$j:function(e){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return}var L=this.get_paneTableVM().get_vizRegionMap()['background'];if(ss.isNullOrUndefined(L)||ss.isNullOrUndefined(L.get_visualListPM().tOA)){return}var hy=L.get_visualListPM().tOA;var hz={};var hA=e.ri.length;for(var hB=0;hB<hA;hB++){var hC=e.ri[hB];hz[hC.r]=hC}var hD=null;if(ss.isValue(this.get_paneTableVM())&&ss.isValue(this.get_paneTableVM().get_scene())){hD=this.get_paneTableVM().get_scene().get_imageDictionary()}var hE=fv.calculatePixelRatio();var hF=[this.dom.tlSpacer,this.dom.trSpacer,this.dom.blSpacer,this.dom.brSpacer];var hG=['uleft','uright','lleft','lright'];for(var hH=0;hH<4;hH++){var hI=hz[hG[hH].toString()];if(ss.isNullOrUndefined(hI)){continue}var hJ=hF[hH];var hK=hJ.get(0).firstChild;if(!ss.isValue(hK)){continue}var hL=hK;var hM=bb.getRenderContext(hL,'opaque');hM.setDefaultPropertyValues();if(!tab.DoubleUtil.isApproximatelyEqual(hE,1)){bd.scaleCanvasDrawing(hM,hE)}var hN=new ch(hL,hM);hN.set_renderOffset({x:hI.x,y:hI.y});hN.renderDrawItems(hy,null,hD,null)}},$b:function(e,L){var hy=e.get(0).firstChild;if(!(ss.compareStrings(hy.tagName,L,true)===0)){hy=document.createElement(L);e.children().first().replaceWith(hy)}return hy},setRegionAndContentGeometry:function(e,L,hy,hz,hA){var hB=this.$l(e,L,hy);if(ss.isValue(e)){var hC=hy();this.regions[hz].setGeometry(e,hC,hA);if(hz==='viz'&&ss.isValue(this.$D)){this.$D.set_actualViewSize({w:hC.w,h:hC.h});this.$D.reset(e,hA)}}return hB},resolvePane:function(e){var L,hy;var hz=this.geometry.pi;var hA={x:e.x,y:e.y};var hB={canDragH:hz.hasXQAxis,canDragV:hz.hasYQAxis,x:0,y:0,w:0,h:0};hy=hz.xWidths.length;for(L=0;L<hy;L++){if(hA.x<hB.x+hz.xWidths[L]){hB.tx=L;hB.w=hz.xWidths[L];break}hB.x=hB.x+hz.xWidths[L]}hy=hz.yHeights.length;for(L=0;L<hy;L++){if(hA.y<hB.y+hz.yHeights[L]){hB.ty=L;hB.h=hz.yHeights[L];break}hB.y=hB.y+hz.yHeights[L]}return hB},allowPanZoom:null,allowPanZoomOnDoubleTap:null,isVizLargerThanScreen:function(){if(ss.isValue(this.geometry)&&ss.isValue(this.geometry.viz)){var e=this.geometry.viz.w;var L=this.geometry.viz.h;var hy=this.regions['viz'];var hz=hy.get_contentProvider();if(ss.isNullOrUndefined(hz)){return false}var hA=hz.get_effectiveViewSize().w;var hB=hz.get_effectiveViewSize().h;return e>hA||L>hB}return false},isOneVisiblePane:function(){if(ss.isValue(this.geometry)&&ss.isValue(this.geometry.viz)){var e,L;var hy=this.geometry.viz.w;var hz=this.geometry.viz.h;var hA=this.geometry.pi.xWidths;var hB=this.geometry.pi.yHeights;L=hA.length;for(e=0;e<L;e++){if(Math.abs(hy-hA[e])>1){return false}}L=hB.length;for(e=0;e<L;e++){if(Math.abs(hz-hB[e])>1){return false}}}return true},maybeShowOverlayImages:null,createOverlayImageFromDataUri:function(e){var L=new ew(this.dom.view.find('.tvimagesContainer').get(0),'data:image/png;base64,'+e);return L},createOverlayImageFromFile:function(e){var L=new ew(this.dom.view.find('.tvimagesContainer').get(0),this.get_session().formatSessionTempfileReference(e,false,false));return L},updateOverlayTarget:function(e,L,hy){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return}switch(L){case'press':{this.$D.setPressedOverlayTarget(e,hy);break}case'hover':{this.$D.setHoverOverlayTarget(e,hy);break}default:{break}}},updateOverlayForLastTargetState:function(e,L){this.updateOverlayTarget(e,this.$D.get_lastTargetState(),L)},hoverOverWhitespace:function(){this.$D.hoverOverWhitespace()},updateHoveredCategoricalHeaders:function(e,L,hy){var hz=this.get_paneTableVM().get_vizRegionMap()[hy];if(ss.isNullOrUndefined(hz)){return}switch(L){case'press':{hz.set_hoveredCategoricalNode(null);break}case'hover':{hz.set_hoveredCategoricalNode(e);break}default:{break}}},showOverlayImages:function(e,L){if(ss.isValue(L)&&ss.isValue(e)&&L.length>0){this.disposeOfOverlayImages();for(var hy=1;hy<L.length;++hy){var hz=e.clone();this.$C.push(hz);hz.show(L[hy])}this.$C.push(e);e.show(L[0])}},setRegionGeometryHelper:null,getDomNodeForContentRegion:null,clickTitle:function(e){},clickCaption:function(e){},makeConnections:function(){},makeMapsSearchViewConnections:null,makeRegions:null,makeInputHandlers:null,makeRegionContentProviders:null,setupDrilling:function(){},refreshScrollingAndDrilling:null,setupSortIndicators:function(){},destroyInputHandlers:null,setGeometryForWebScrollbars:function(e,L,hy,hz,hA,hB,hC,hD,hE,hF){},makeFloatingZoomToolbar:null,makeTooltip:null,makeTiledWindow:null,shouldInformTooltipOfLocalTapOnViz:null,disposeOfOverlays:function(){this.disposeOfOverlayImages()},disposeOfOverlayImages:function(){for(var e=0;e<this.$C.length;e++){var L=this.$C[e];if(ss.isValue(L)){L.dispose()}}ss.clear(this.$C);if(ss.isValue(this.$D)){this.$D.clearOverlays()}if(ss.isValue(this.$E)){window.clearTimeout(ss.unbox(this.$E));this.$E=null}},$k:function(e){if(ss.isValue(this.$D)){this.$D.setScrollPosition(e)}},checkForDragOverlays:function(){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isValue(this.$E)){return}var e=(new Date).getTime()-this.$A;if(e>=30){this.$a()}else{this.$E=window.setTimeout(ss.mkdel(this,this.$a),30-e)}}},$a:function(){this.$E=null;var e=da.getIdsFromHitTestResults(this.regions['viz'].hitTestMarksAgainstSelectionShape(),true);this.$D.setDragOverlayTuples(e);this.$A=(new Date).getTime()},updateRegionContentProvider:function(e,L){this.regions[e].set_contentProvider(L)},isSelectActionOnVizAllowed:function(e){return true},handleLocalTap:function(e,L,hy,hz){var hA=false;if(this.isSelectActionOnVizAllowed(L)){if(e.get_regionPart()==='viz'){var hB=this.get_vizToolTip();var hC=e.doSelectFromPoint(hz,L,ss.mkdel(hB,hB.suppress));if(hC.get_hitType()!==0){if(this.shouldInformTooltipOfLocalTapOnViz()){this.$f(hC,e,hy,hz)}hA=true}}else if(ss.isValue(e.get_contentProvider())){var hD=e.hitTestNodes(hz);if(ss.isValue(hD)){var hE=ss.mkdel(this,function(){this.get_vizToolTip().singleSelectCoordinates(hy,hz,e.get_regionPart(),'header')});e.selectNode(hz,hD,L,hE);hA=true}else{tab.SelectionClientCommands.clearAllSelections(this.get_visualId())}}if(!hA){this.get_vizToolTip().hoverOverWhitespace(hy,e.get_regionPart())}}},$f:function(e,L,hy,hz){var hA=null;if(ss.isValue(this.get_paneTableVM())&&ss.isValue(this.get_paneTableVM().get_scene())&&e.get_tooltipTargetType()==='mark'){var hB=this.get_paneTableVM().get_scene().getPaneDrawInfoFromTupleId(e.get_id());hA=hB.get_paneDescriptorKey()}this.get_vizToolTip().singleSelectComplete(hy,tab.PointUtil.add(hz,{x:this.get_geometry().viz.x,y:this.get_geometry().viz.y}),hz,e.get_id(),hA,e.get_tooltipTargetType(),L.get_regionPart())},handleNewVisual:function(){if(this.get_paneTableVM().isInvalidSheet()){$('<div/>').text(tab.Strings.BaseClientInvalidSheet(this.get_paneTableVM().get_sheetId())).addClass('wcInvalidSheet').appendTo(this.get_template().get_domRoot()).get(0);return}if(this.$y){return}var e=this.get_paneTableVM().get_visualModel();if(ss.isNullOrUndefined(e)){return}this.regions['viz'].$7();this.$t(e);this.$n(e);var L=e.get_geometryModel().get_presModel();{this.setGeometry(L,e.get_containerGeometry())}this.isMap=e.get_isMap();var hy=false;if(this.get_mapsSearchEnabled()){if(ss.isNullOrUndefined(this.get_paneTableVM().get_mapsSearchViewModel())||ss.isNullOrUndefined(this.mapsSearchView)){this.get_paneTableVM().set_mapsSearchViewModel(new em(this.get_paneTableVM().get_visualId()));this.get_paneTableVM().get_mapsSearchViewModel().add_onMoveMapToBounds(ss.mkdel(this,this.handleMoveMapToBounds));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_paneTableVM().get_mapsSearchViewModel().remove_onMoveMapToBounds(ss.mkdel(this,this.handleMoveMapToBounds))})));this.mapsSearchView=spiff.ObjectRegistry.newView(el).call(null,[this.get_paneTableVM().get_mapsSearchViewModel()]);this.makeMapsSearchViewConnections();this.mapsSearchView.set_isCollapsed(true);this.mapsSearchView.addClass('tabSuppressVizTooltipsAndOverlays')}if(!this.$z){this.mapsSearchView.addToDom(this.dom.view);this.$z=true;hy=true}}else if(ss.isValue(this.mapsSearchView)){if(this.$z){var hz=this.mapsSearchView.get_element()[0].parentNode;if(ss.isValue(hz)){hz.removeChild(this.mapsSearchView.get_element()[0]);this.$z=false;hy=true}}this.mapsSearchView.set_isCollapsed(true);this.mapsSearchView.set_isVisible(false)}var hA=e.get_floatingToolbarVisibility();if(ss.isValue(this.zoomToolbar)&&(this.ftv!==hA||hy===true)){this.zoomToolbar.dispose();this.zoomToolbar=null}this.ftv=hA;this.regions['viz'].updateDefaultToolMode();if(this.get_paneTableVM().shouldEnableZoomHomeToolbar()&&ss.isNullOrUndefined(this.zoomToolbar)){this.createZoomToolbar()}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.setZoomHomePossibility(this.get_paneTableVM().shouldEnableZoomHomeToolbar())}this.updateRegionBGColor();this.$o();this.$j(L);this.isAnimationOccurring=false},$t:function(e){if(this.get_paneTableVM().get_hasTitle()){if(ss.isValue(this.$N)){return}this.get_dom().title.css('display','');this.$N=new gj(new gk(e.get_titleModel()));this.$N.addToDom(this.dom.title)}else if(ss.isValue(this.$N)){this.get_dom().title.css('display','none');this.$N.get_viewModel().dispose();this.$N=null}},$n:function(e){if(this.get_paneTableVM().get_hasCaption()){if(ss.isValue(this.$x)){return}this.get_dom().caption.css('display','');this.$x=new gj(new gk(e.get_captionModel()));this.$x.addToDom(this.dom.caption)}else if(ss.isValue(this.$x)){this.get_dom().caption.css('display','none');this.$x.get_viewModel().dispose();this.$x=null}},$o:function(){var e=this.get_paneTableVM().get_mapServerModel();if(ss.isValue(e)&&e.get_hasPresModel()&&e.get_isAttributionVisible()){if(ss.isNullOrUndefined(this.$B)){this.$B=new ek;this.$B.attributionBackground.css('background-color',e.get_attributionBGColor());this.$B.attributionLink.text(e.get_attributionText());this.$B.attributionLink.css('color',e.get_attributionTextColor());this.$B.attributionLink.css('font-size',e.get_attributionTextSize());this.$B.attributionLink.attr('href',e.get_attributionUrl());this.$B.attributionLink.attr('target','_blank');this.dom.view.append(this.$B.get_domRoot());this.$p()}}else if(ss.isValue(this.$B)){this.$B.dispose();this.$B=null}},$p:function(){if(ss.isValue(this.$B)){var e=1;var L=1;var hy=this.regions['viz'].get_contentProvider().get_effectiveViewSize();var hz=this.regions['viz'].get_contentProvider().get_docSize();var hA=Math.min(0,hy.h+this.$J.y-hz.h);hA+=e;var hB=Math.min(0,-this.$J.x);hB+=L;this.$B.get_domRoot().css('bottom',hA+'px');this.$B.get_domRoot().css('left',hB+'px')}},$g:function(){var e=this.get_paneTableVM().get_cacheUrlInfo();this.refreshImages(e)},$s:function(){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var e=this.listNonVizRegions();this.regions['viz'].$6();var L=ss.getEnumerator(Object.keys(this.get_paneTableVM().get_vizRegionMap()));try{while(L.moveNext()){var hy=L.current();var hz=tab.ModelUtils.visualPartToRegionMap[hy];if(ss.isValue(hz)&&ss.isValue(this.regions[hz])){var hA=this.regions[hz].get_contentProvider();if(!ss.isNullOrUndefined(hA)&&!ss.referenceEquals(hA.get_viewModel(),this.get_paneTableVM().get_vizRegionMap()[hy])){hA.destroy();hA=null}if(ss.isNullOrUndefined(hA)){var hB=e[hz];if(ss.isValue(hB)){var hC=this.get_paneTableVM().get_vizRegionMap()[hy];var hD=new fQ(hC,this.getDomNodeForContentRegion(hB),this.get_paneTableVM());hB.find('.tvimagesContainer').append(hD.get_element());this.updateRegionContentProvider(hz,hD);hD.invalidate(false);this.$w=null}}else{this.regions[hz].$6()}}}}finally{L.dispose()}var hE=ss.getEnumerator(Object.keys(tab.ModelUtils.visualPartToRegionMap));try{while(hE.moveNext()){var hF=hE.current();var hG=tab.ModelUtils.visualPartToRegionMap[hF];if(!ss.keyExists(this.get_paneTableVM().get_vizRegionMap(),hF)&&ss.isValue(this.regions[hG])&&ss.isValue(this.regions[hG].get_contentProvider())){this.regions[hG].get_contentProvider().destroy();this.regions[hG].set_contentProvider(null)}}}finally{hE.dispose()}}},$e:function(){return this.$L.toString()+'Z'+this.$I.toString()},showFloatingZoomToolbar:function(e){if(e&&this.ftv!=='hide'&&ss.isNullOrUndefined(this.zoomToolbar)){this.createZoomToolbar()}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.setZoomHomePossibility(this.get_paneTableVM().shouldEnableZoomHomeToolbar());this.zoomToolbar.setActiveState(e)}},determineToolbarType:function(){var e='fullToolbar';if(this.ftv!=='show'&&(this.ftv!=='auto'||!this.allowPanZoom())){e='homeOnlyToolbar'}else if(!this.allowPanZoom()){e='disablePanZoomToolbar'}return e},createZoomToolbar:function(){if(!tsConfig.allow_filter){return}this.zoomToolbar=this.makeFloatingZoomToolbar(this.dom.view)},handleMoveMapToBounds:function(e){if(ss.isValue(this.regions['viz'])&&tab.FeatureParamsLookup.getBool(19)===true){this.regions['viz'].moveMapToBounds(e)}},$9:function(){var e={};e.tap=ss.mkdel(this,function(hy){hy.stopPropagation();hy.preventDefault();this.clearSelection()});var L=ss.mkdel(this,function(hy){this.disposables.add$1(new spiff.TableauEventHandler.$ctor1(hy.get(0),e))});L(this.dom.tlSpacer);L(this.dom.trSpacer);L(this.dom.blSpacer);L(this.dom.brSpacer);L(this.dom.title);L(this.dom.caption)},$h:function(){var e=this.disposables;var L=this.get_session();e.add$1(new tab.SubscriptionDisposable(L.registerEventListener(Object).call(L,'selectionChanged',ss.mkdel(this,function(hy){this.$i()}))))},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);var e=ss.mkdict(['top','0px','left','0px','right','0px','bottom','0px']);this.get_template().get_domRoot().css(e);this.handleNewVisual();if(this.get_paneTableVM().get_visualModel().get_isVisualValid()){this.$g()}},checkForSuppressTooltipsAndOverlays:function(e){var L=$(e);var hy=L.hasClass('tabSuppressVizTooltipsAndOverlays')||L.parents('.tabSuppressVizTooltipsAndOverlays').length>0;this.get_vizToolTip().suppress(hy);if(hy){this.disposeOfOverlayImages()}},$c:function(){if(ss.isNullOrUndefined(this.vizTooltip)){this.vizTooltip=this.makeTooltip();this.connectTooltipEventHandlers()}}},ss.makeGenericType(spiff.BaseView$1,[eI]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[eI])]);ss.initClass(eI,a,{add_vizRegionMapChange:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_vizRegionMapChange:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_newPaneTable:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_newPaneTable:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_scene:function(){return this.$n},get_vizRegionMap:function(){return this.$s},get_refLineVisualLists:function(){return this.$g().get_refLineVisualLists()},get_trendLineVisualLists:function(){return this.$g().get_trendLineVisualLists()},get_drawFirstParts:function(){return this.$g().get_drawFirstParts()},get_drawLastParts:function(){return this.$g().get_drawLastParts()},get_zonePresModel:function(){return this.$r.get_zone().pm},get_viewController:function(){return this.$q},set_viewController:function(e){this.$q=e},get_sheetId:function(){return this.$p},get_sortIndicators:function(){return this.$r.get_sortIndicatorsModel().get_sortIndicatorsPresModel()},get_selectionsModel:function(){return this.$r.get_selectionsModel()},get_cacheUrlInfo:function(){return this.$r.get_cacheUrlInfo()},get_hasTitle:function(){return this.get_zonePresModel().yqe},get_hasCaption:function(){return this.get_zonePresModel().ElQ},get_visualModel:function(){return this.$r},$g:function(){return this.$r.get_sceneModel()},get_visualId:function(){return this.$r.get_visualId()},get_mapServerModel:function(){return this.get_visualModel().get_mapServerModel()},get_mapsSearchViewModel:function(){return this.$l},set_mapsSearchViewModel:function(e){this.$l=e},dispose:function(){if(ss.isValue(this.$l)){this.$l.dispose()}if(ss.isValue(this.$r)){if(ss.isValue(this.$r.get_selectionsModel().get_tupleSelection())){this.$r.get_selectionsModel().remove_newSelections(ss.mkdel(this,this.$b))}this.$r.get_impliedSelectionModel().remove_newSelection(ss.mkdel(this,this.$b));if(ss.isValue(this.$r.get_brushingsModel().get_tupleSelection())){this.$r.get_brushingsModel().remove_newSelections(ss.mkdel(this,this.$3))}if(ss.isValue(this.$r.get_sceneModel())){this.$r.get_sceneModel().remove_newSceneModel(ss.mkdel(this,this.$a))}if(ss.isValue(this.$r.get_labelsModel())){this.$r.get_labelsModel().remove_newSceneModel(ss.mkdel(this,this.$a))}this.$r.remove_newHiddenTuples(ss.mkdel(this,this.$7));this.$r.remove_newFilteredTuples(ss.mkdel(this,this.$6));this.$r.remove_brushingFromActionChanged(ss.mkdel(this,this.$4));this.$r.remove_colorDictionaryChanged(ss.mkdel(this,this.$5));this.$r.remove_newVisual(ss.mkdel(this,this.$c));this.$i.dispose()}var e=new ss.ObjectEnumerator(this.$s);try{while(e.moveNext()){var L=e.current();L.value.dispose()}}finally{e.dispose()}spiff.BaseViewModel.prototype.dispose.call(this)},getAndClearInvalidationRects:function(){var e=Array.prototype.slice.call(this.$k);this.$k=[];return e},$8:function(){this.notifyPropertyChanged('images')},$b:function(){var e=this.$r.get_selectionsModel().computeSelectionsDiff(this.$o,this.$j,this.$r.get_impliedSelectionModel());this.$o=this.$r.get_selectionsModel().createSelectionsToken();this.$j=this.$r.get_impliedSelectionModel().createSelectionToken();this.$e(e,'selection')},$3:function(){var e=this.$r.get_brushingsModel().computeSelectionsDiff(this.$h,null,null);this.$h=this.$r.get_brushingsModel().createSelectionsToken();this.$e(e,'brushing')},$e:function(e,L){if(!e.item1){if(e.item2.length===0){return}var hy=this.$n.$9(e.item2);this.$2(hy)}this.notifyPropertyChanged(L)},$4:function(){this.$n.$i(this.$r.get_isBrushedFromAction());this.notifyPropertyChanged('brushing')},$7:function(){var e=tab.SelectionsModel.computeTupleDictionaryDifference(this.$r.get_hiddenTuples(),this.$n.get_hiddenTuples());if(e.length===0){return}var L=this.$n.$9(e);this.$2(L);this.$n.set_hiddenTuples(this.$r.get_hiddenTuples());this.notifyPropertyChanged('scene')},$6:function(){var e=tab.SelectionsModel.computeTupleDictionaryDifference(this.$r.get_filteredTuples(),this.$n.$n());if(e.length===0){return}var L=this.$n.$9(e);this.$2(L);this.$n.$o(this.$r.get_filteredTuples());this.notifyPropertyChanged('scene')},$5:function(){this.$m=true},$2:function(e){ss.arrayAddRange(this.$k,e)},$a:function(){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return}var e=false;var L=ss.getEnumerator(Object.keys(this.$g().get_visualListModels()));try{while(L.moveNext()){var hy=L.current();var hz=this.$g().get_visualListModels()[hy];var hA=this.$s[hy];if(ss.isValue(hA)&&ss.referenceEquals(hA.get_visualList(),hz)){}else{tab.MiscUtil.dispose$1(this.$s[hy]);delete this.$s[hy];if(ss.contains(eI.blackListVisualParts,hy)){this.$s[hy]=new hc(hz,this.get_visualId(),tab.ModelUtils.visualPartToRegionMap[hy],this.$r.get_selectionsModel(),this.$r.get_brushingsModel())}else{this.$s[hy]=new hc(hz,this.get_visualId(),tab.ModelUtils.visualPartToRegionMap[hy],null,null)}e=true}}}finally{L.dispose()}var hB=Object.keys(this.$s);var hC=ss.getEnumerator(hB);try{while(hC.moveNext()){var hD=hC.current();if(!ss.keyExists(this.$g().get_visualListModels(),hD)){tab.MiscUtil.dispose$1(this.$s[hD]);delete this.$s[hD];e=true}}}finally{hC.dispose()}var hE=this.$g().get_backgroundColor().toString();var hF=ss.getEnumerator(Object.keys(this.$s));try{while(hF.moveNext()){var hG=hF.current();this.$s[hG].set_defaultBackgroundColor(hE)}}finally{hF.dispose()}if(e){this.$d()}this.$m=true},$c:function(){if(this.$m){this.$f();this.notifyPropertyChanged('scene')}this.$m=false},$d:function(){if(ss.isValue(this.$2$1)){this.$2$1()}},$f:function(){eI.updateSceneInfoFromVisualModel(this.$n,this.$r);this.$i.initialize(this.$n.get_customShapes());if(ss.isValue(this.$r)&&ss.isValue(this.$r.pm)&&ss.isValue(this.$r.pm.LBF)){this.$n.$l(this.$r.pm.LBF,ss.mkdel(this,function(){this.$8()}))}},isInvalidSheet:function(){return _.any(this.$r.get_invalidSheets(),ss.mkdel(this,function(e){return _.isEqual(this.get_visualId(),e)}))},$9:function(){this.raiseActionEvent(this.$2$2)},shouldEnableZoomHomeToolbar:function(){return this.get_visualModel().get_hasModifiedAxes()}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(eK,a,{get_model:function(){return this.$e.get_parameterCtrlModel().get_parameterCtrlPresModel()},get_domBoxElement:function(){return this.domBox},get_backgroundColor:function(){return this.backgroundColor},postCreate:function(){this.getSID=ss.mkdel(this,function(){return this.stateId});this.$9=[];this.$1()},destroy:function(e){dojo.forEach(this.$9,dojo.unsubscribe);if(ss.isValue(this.$d)){this.$d.destroy()}this.domContent.innerHTML='';this.inherited(arguments)},getTypeInParamClass:function(){return tableau.base.widget.paramui.TypeIn},getTypeInDateFieldParamClass:function(){return tableau.base.widget.paramui.TypeInDateField},getCompactParamClass:function(){return tableau.base.widget.paramui.Compact},getListParamClass:function(){return tableau.base.widget.paramui.List},getSliderParamClass:function(){return tableau.base.widget.paramui.Slider},$1:function(){var e=null;if(ss.isNullOrUndefined(this.get_model())||ss.isNullOrUndefined(this.get_model().nql)||ss.isNullOrUndefined(this.$7)){return}dojo.attr(this.domTitleBar,'title',this.get_model().nql.title);switch(this.$2()){case'type_in':{e=this.getTypeInParamClass();break}case'compact':{e=this.getCompactParamClass();break}case'list':{e=this.getListParamClass();break}case'slider':{e=this.getSliderParamClass();break}case'datetime':{e=this.getTypeInDateFieldParamClass();break}}if(ss.isNullOrUndefined(e)){return}if(ss.isValue(this.$d)){this.$d.destroy();this.$d=null}this.$d=new e(this,this.domContent,this.$8,this.$7,this.$e);this.$d.instantiate(false);this.$6();hn.applyFormatting(this.domNode,this.get_model().mCc,this.get_backgroundColor(),this.get_model().$tN)},$6:function(){this.domTitleBar.innerHTML=this.$b;cL.cleanUpFontFamilyStyles($(this.domTitleBar));$(this.domTitleBar).find('div').css(ss.mkdict(['text-overflow','ellipsis','overflow','hidden']))},updateProperties:function(e){this.session=e.session;this.$8=e.field;this.$a=e.titleH;this.$c=e.titleW;this.$b=e.titleHTML;this.format=e.format;this.backgroundColor=e.backgroundColor;this.$7=e.attributes;this.$6();this.$3();this.$4()},$3:function(){hn.applyFormatting(this.domNode,this.get_model().mCc,this.get_backgroundColor(),this.get_model().$tN)},$4:function(){if(ss.isValue(this.$d)){this.$d.refreshState(this.$7)}},$2:function(){return this.$7['mode']},$0:function(){return this.$c===0&&this.$a===0},$5:function(){if(ss.isValue(this.domTitleBar)){$(this.domTitleBar).css({height:'auto',width:'auto'})}},getTitleOffset:function(){return(dojo.hasClass(this.domNode,'PCInlineTitle')?0:dojo.marginBox(this.domTitleBar).h)},layout:function(e){if(ss.isNullOrUndefined(this.domNode.parentNode)||ss.isNullOrUndefined(this.$d)){return}dojo.removeClass(this.domNode,'PCInlineTitle');var L={};this.$5();if(this.$a>0||this.$0()){L.h=this.$a;dojo.marginBox(this.domTitleBar,ss.mkdict(['h',L.h]))}if(this.$c>0||this.$0()){L.w=this.$c;dojo.marginBox(this.domTitleBar,ss.mkdict(['w',L.w]))}tableau.util.setupTitleEllipsis($(this.domTitleBar));var hy=dojo.contentBox(this.domNode);var hz={w:hy.w,h:hy.h};if(!this.$0()){if(this.$c>0){hz.w=hy.w-L.w;dojo.style(this.domTitleBar,'float','left');dojo.style(this.domContent,'float','left');dojo.addClass(this.domNode,'PCInlineTitle')}else{hz.h=hy.h-L.h;dojo.style(this.domTitleBar,'float','none');dojo.style(this.domContent,'float','none')}}this.$d.layout(hz)}},Object);ss.initClass(eL,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(eM,a,{get_zonePresModel:function(){return this.$b.get_zone()},$9:function(){return this.$b.get_frame()},dispose:function(){if(ss.isValue(this.$a)){this.$a.destroyRecursive(false);this.$a=null}ss.makeGenericType(spiff.BaseView$1,[eN]).prototype.dispose.call(this)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(ss.isValue(this.$b.get_parameterCtrlModel())){this.handleNewParameterControl()}},handleNewParameterControl:function(){if(ss.isNullOrUndefined(this.$a)){this.$a=this.createParameterControl();this.get_template().get_domRoot().append(this.$a.domNode);this.$a.startup();tab.DomUtil.resize(this.$a,hv.viewRect(this.get_zonePresModel()))}else{var e=this.createParameterControlProperties();this.$a.updateProperties(e)}this.$a.layout(null)},updateSize:function(){tab.DomUtil.resize(this.$a,hv.viewRect(this.get_zonePresModel()));this.$a.layout(null)},createParameterControlProperties:function(){var e=new Object;e.session=this.$b.get_layoutSession();e.zid=this.get_zonePresModel().BCp.toString();e.field=this.$9().param;if(ss.isValue(this.get_zonePresModel().rPC.eBu)){e.backgroundColor=this.get_zonePresModel().rPC.eBu}e.titleH=this.$9().titleH;e.titleW=this.$9().titleW;if(ss.isValue(this.get_zonePresModel().KDk)){e.titleHTML=this.get_zonePresModel().KDk.xBc;var L=this.get_zonePresModel().KDk.rec;e.titleW=(ss.isNullOrUndefined(e.titleW)?0:L)}if(ss.isValue(this.$9().format)){e.format=this.$9().format}if(ss.isValue(this.$9().attributes)){e.attributes=this.$9().attributes}e.viewModel=this.$b;return e},createParameterControl:function(){var e=this.createParameterControlProperties();this.$a=this.makeParameterControl(e);return this.$a},makeParameterControl:function(e){return new tableau.base.widget.ParameterControl(e)}},ss.makeGenericType(spiff.BaseView$1,[eN]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[eN])]);ss.initClass(eN,a,{add_newParameterControl:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newParameterControl:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_resized:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_resized:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_parameterCtrlModel:function(){return this.$4},get_frame:function(){return this.$4.get_frame()},get_zone:function(){return this.$4.get_zone()},get_layoutSession:function(){return tab.CommandController.get().get_legacySession()},get_hasBorder:function(){return this.$4.get_zoneModel().get_hasBorder()},$2:function(e){this.raiseActionEvent(this.$2$1)},$3:function(){this.raiseActionEvent(this.$2$2)}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(eO,a,{get_legacyModel:function(){return this.parameterViewModel.get_parameterCtrlModel().get_parameterCtrlJsonPresModel()},get_model:function(){return this.parameterViewModel.get_parameterCtrlModel().get_parameterCtrlPresModel()},instantiate:null,setNewState:null,refreshState:function(e){this.attributes=e;this.setNewState()},dispose:function(){this.disposables.dispose()},destroy:function(e){this.dispose();this.div.innerHTML=''},layout:function(e){dojo.marginBox(this.div,e)},formatTuple:function(e){return tableau.format.formatTupleDisplayName(e,true,null)}},Object,[ss.IDisposable]);ss.initClass(eP,a,{instantiate:function(e){},setNewState:function(){if(!ss.referenceEquals(this.get_legacyModel().alias,this.$2.get_selectedItem().get_name())){var e=this.$2.get_items();for(var L=0;L<e.length;L++){var hy=e[L];if(ss.referenceEquals(hy.get_name(),this.get_legacyModel().alias)){this.$2.set_selectedItem(hy);break}}}},$0:function(e){var L=e.get_data();var hy=this.get_legacyModel().domain;if(L>=hy.length||L<0||tab.MiscUtil.isNullOrEmpty(hy)){return}if(ss.referenceEquals(hy[L],this.get_legacyModel().alias)){return}var hz=hy[L];tab.ParameterServerCommands.setParameterValue(this.field,hz,null)},layout:function(e){this.inherited(arguments)}},eO,[ss.IDisposable]);ss.initClass(eQ,a,{instantiate:function(e){var L=ss.mkdel(cF.filterItem,cF.filterItem.getRadioHtml);var hy=this.field;var hz=this.get_legacyModel().alias;var hA=[];var hB=this.get_legacyModel().domain;var hC=hB.length;for(var hD=0;hD<hC;hD++){var hE=[hy,'_',hD.toString()].join('');hA.push(L(hE,hy,hB[hD],ss.referenceEquals(hz,hB[hD])))}this.div.innerHTML=hA.join('');$(this.div).addClass('tab-ctrl-formatted-text');if(e!==true){this.disposables.add$1(spiff.EventUtil.bindWithDispose($(this.div),'click',ss.mkdel(this,this.$0)))}},setNewState:function(){this.instantiate(true)},$0:function(e){var L=e.target.tagName.toLowerCase();if(L!=='input'){return}var hy=$(e.target);var hz=hy.parents('.FIItem');if(hz.length>0){var hA=cF.filterItem.getIndex(hz.get(0));var hB=this.get_legacyModel().domain[hA];tab.ParameterServerCommands.setParameterValue(this.field,hB,null)}}},eO,[ss.IDisposable]);ss.initClass(eR,a,{instantiate:function(e){var L=this.get_legacyModel();var hy=this.get_legacyModel().domain;var hz=this.get_legacyModel().alias;var hA=1;var hB=1;this.slider=new tableau.base.widget.ui.Slider(this.div,this.attributes,false,ss.mkdel(this,this.doUpdateViz),ss.mkdel(this.parent,this.parent.getTitleOffset),ss.mkdel(this,this.getCurrentText),null,null,false);if(L.fake_continuous){this.attributes['show-step-btns']='false';this.attributes['show-ticks']='false'}var hC=ss.mkdel(this,function(){this.slider.instantiateFromDomain(hy,hz)});var hD=ss.mkdel(this,function(){hA=Number.POSITIVE_INFINITY;hB=this.percentageOfRange(this.modelValueOrRangeMin())*100;this.attributes['show-step-btns']='false';this.slider.instantiate(hA,hB,hz)});var hE=ss.mkdel(this,function(){hA=this.numPeriods();hB=this.indexInDateRange(this.modelValueOrRangeMin());hz=this.formatValue(this.modelValueOrRangeMin());this.slider.instantiate(hA,hB,hz)});var hF=ss.mkdel(this,function(){hA=this.sizeOfDiscreteRange();hB=this.indexInRange(this.modelValueOrRangeMin());this.slider.instantiate(hA,hB,hz)});this.behaviorPicker(hC,hD,hE,hF)},behaviorPicker:function(e,L,hy,hz){if(this.$0()){return e()}else if(this.$1()){if(this.$6()){return L()}else if(this.$5()){return hy()}else{return hz()}}return null},setNewState:function(){var e=this.get_legacyModel().domain;var L=this.get_legacyModel().alias;var hy=function(){var hD=e.length;for(var hE=0;hE<hD;hE++){if(ss.referenceEquals(e[hE],L)){return{item1:L,item2:hE}}}return null};var hz=ss.mkdel(this,function(){return{item1:L,item2:this.percentageOfRange(this.modelValueOrRangeMin())*100}});var hA=ss.mkdel(this,function(){return{item1:this.formatValue(this.modelValueOrRangeMin()),item2:this.indexInDateRange(this.modelValueOrRangeMin())}});var hB=ss.mkdel(this,function(){return{item1:L,item2:this.indexInRange(this.modelValueOrRangeMin())}});var hC=this.behaviorPicker(hy,hz,hA,hB);this.slider.setNewState(hC.item2);this.slider.updateReadout(hC.item1)},refreshSliderMarksForIE:function(){this.slider.refreshSliderMarksForIE()},doUpdateViz:function(e){var L=ss.mkdel(this,function(){return{item1:this.get_legacyModel().domain[e],item2:null}});var hy=ss.mkdel(this,function(){return{item1:null,item2:this.$4(this.$d(e))}});var hz=ss.mkdel(this,function(){return{item1:null,item2:this.$4(this.$b(e))}});var hA=ss.mkdel(this,function(){return{item1:null,item2:this.$4(this.$c(e))}});var hB=this.behaviorPicker(L,hy,hz,hA);var hC=null;if(ss.isValue(hB.item1)){hC=hB.item1}else if(ss.isValue(hB.item2)){hC=tableau.format.formatDataValue(hB.item2,null,null,null,2)}tab.ParameterServerCommands.setParameterValue(this.field,hC,true)},updateCallback:function(e){if(e.success===true){if(ss.isValue(e.newval)){this.slider.updateReadout(this.formatValue(parseFloat(e.newval)))}}},layout:function(e){this.inherited(arguments);if(ss.isValue(this.slider)&&typeof(this.slider['layout'])==='function'){this.slider.layout()}},getCurrentText:function(e){var L=ss.mkdel(this,function(){return this.get_legacyModel().domain[e]});var hy=ss.mkdel(this,function(){return this.formatValue(this.$d(e))});var hz=ss.mkdel(this,function(){return this.formatValue(this.$b(e))});var hA=ss.mkdel(this,function(){return this.formatValue(this.$c(e))});return this.behaviorPicker(L,hy,hz,hA)},$0:function(){return ss.isValue(this.get_legacyModel().domain)},$1:function(){return ss.isValue(this.get_legacyModel().granularity)&&ss.isValue(this.get_legacyModel().min)&&ss.isValue(this.get_legacyModel().max)},$6:function(){return this.get_legacyModel().granularity.s==='n'},$5:function(){return ss.isValue(this.get_legacyModel().date_period_type)},$8:function(){return ss.unbox(this.get_legacyModel().min.v)},$7:function(){return ss.unbox(this.get_legacyModel().max.v)},modelValueOrRangeMin:function(){return(ss.isValue(this.get_legacyModel().value.v)?ss.unbox(this.get_legacyModel().value.v):this.$8())},$3:function(){return this.get_legacyModel().granularity.v},$2:function(){return this.get_legacyModel().date_period_type},numPeriods:function(){return this.get_legacyModel().num_periods},$a:function(){return this.$7()-this.$8()},percentageOfRange:function(e){return(e-this.$8())/this.$a()},$d:function(e){return e/100*this.$a()+this.$8()},sizeOfDiscreteRange:function(){return Math.round(this.$a()/this.$3())+1},indexInRange:function(e){return Math.round((e-this.$8())/this.$3())},$c:function(e){return e*this.$3()+this.$8()},indexInDateRange:function(e){return Math.round((e-this.$8())/(this.$3()*this.$9()))},$b:function(e){e=e*this.$3();var L=tab.DateUtil.adjustDateByPeriodInUTC(new Date(tableau.types.JsDateFromOleDate(this.$8())),this.$2(),e);return Math.min(tableau.types.OleDateFromJsDate(L.getTime()),this.$7())},$9:function(){switch(this.$2()){case'year':{return 365.25}case'quarter':{return 91.3125}case'month':{return 30.4375}case'week':{return 7}case'day':{return 1}case'hour':{return 0.0416666666666667}case'minute':{return 0.000694444444444444}case'second':{return 1.15740740740741E-05}}return 0},formatValue:function(e){var L=this.get_legacyModel().date_format||this.get_legacyModel().format;return tableau.format.formatDataValue(this.$4(e),null,L,null,2)},$4:function(e){return{t:this.get_legacyModel().min.t,v:e.toString()}}},eO,[ss.IDisposable]);ss.initClass(eS,a,{getWidgetClass:function(){return tableau.base.widget.ui.TypeIn},instantiate:function(e){var L=this.getWidgetClass();this.widget=new L(this.div,ss.mkdel(this,this.$0),'TypeIn');this.widget.instantiate(this.get_legacyModel().alias,this.field,this.get_legacyModel().value,this.get_legacyModel().min,this.get_legacyModel().max,this.get_legacyModel().format,this.get_legacyModel().date_format,this.get_legacyModel().editing_format,this.get_model()._$D);if(this.get_legacyModel().is_list_domain){this.widget.$2(this.get_legacyModel().domain,ss.mkdel(this.parent.session,this.parent.session.getAutocompleteInfo))}},setNewState:function(){this.widget.setNewState(this.get_legacyModel().alias,this.get_legacyModel().domain,this.get_legacyModel().value,this.get_legacyModel().min,this.get_legacyModel().max)},layout:function(e){this.inherited(arguments);this.widget.layout()},$0:function(e){if(ss.referenceEquals(this.newValInFlight,e)){return}this.newValInFlight=e;tab.ParameterServerCommands.setParameterValue$1(this.field,e,false,ss.mkdel(this,this.$2),ss.mkdel(this,this.$1))},$1:function(e){this.widget.queryBox.value=this.get_legacyModel().alias;this.newValInFlight=null;this.setNewState()},$2:function(e){this.newValInFlight=null;_.defer(ss.mkdel(this,this.setNewState))},updateCallback:function(e){if(e.success===true){if(ss.isValue(e.newval)){this.widget.queryBox.value=e.newval;this.get_legacyModel().alias=e.newval;this.widget.$j=e.newval;if(ss.isValue(e.newdatavalue)){this.get_legacyModel().value=e.newdatavalue;this.widget.$i=e.newdatavalue}}}else{this.widget.queryBox.value=this.get_legacyModel().alias}}},eO,[ss.IDisposable]);ss.initClass(eT,a,{getWidgetClass:function(){return tableau.base.widget.ui.TypeInDateField}},eS,[ss.IDisposable]);ss.initClass(eU,a,{instantiate:function(e,L,hy){var hz=arguments[0];this.widget=new tableau.base.widget.ui.TypeIn(this.div,ss.mkdel(this,this.doChange),'Pattern');this.widget.instantiate(hz,L)},destroy:function(){this.widget.destroy()},layout:function(e,L){this.inherited(arguments);this.widget.layout()},doChange:function(e){this.parent.set_stateId(this.parent.get_stateId()+1);this.parent.get_session().setPatternFilterState(e,this.parent);this.parent.get_oFilter().pattern=e}},Z,[ss.IDisposable]);ss.initClass(eV,a,{add_onPendingChanges:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_onPendingChanges:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_onNoPendingChanges:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_onNoPendingChanges:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},get_allItemCheckState:function(){return this.$4},set_allItemCheckState:function(e){this.$4=e},get_pendingChangelist:function(){return this.$8},set_pendingChangelist:function(e){this.$8=e},resetFilterInfo:function(e,L,hy){this.domainActualSize=e;this.$6=L;this.$5=hy},resetPendingChanges:function(){this.$8=new tab.Changelist;this.$7=[];this.$a=false;this.$9=false;this.$4=null;this.$1()},processChanges:function(e){this.get_pendingChangelist().appendChangelist(e);this.$0()},processAll:function(e){this.$7=[];this.$a=true;this.$9=(this.$6?!e:e);this.$8=new tab.Changelist;var L=new tab.RawChange;L.setRange(new tab.IntegerRange(0,this.domainActualSize),this.$9);this.get_pendingChangelist().addChange(L);this.$0()},isSelectAll:function(){return this.$a&&this.$7.length===0&&(this.$6?!this.$9:this.$9)},isDeSelectAll:function(){return this.$a&&this.$7.length===0&&(this.$6?this.$9:!this.$9)},handleAllItemClicked:function(e){var L=(this.$6?!e:e);this.set_allItemCheckState(e);var hy=0;while(this.hasItemAtIndex(hy)){if(L){if(!this.isChecked(hy)){this.togglePendingCss(hy)}this.setChecked(hy,true)}else{if(this.isChecked(hy)){this.togglePendingCss(hy)}this.setChecked(hy,false)}hy++}this.$a=true;this.$9=L;this.$7=[]},handleItemClicked:function(e,L){if(e===-1){this.handleAllItemClicked(this.isChecked(e));return}if(!this.isChecked(e,L)){if(this.parent.shouldUseAllItem()){this.set_allItemCheckState(false);if(this.hasAllItem()){this.setAllItemChecked(false);if(this.$6){var hy=true;var hz=0;while(hy&&this.hasItemAtIndex(hz)){if(this.isChecked(hz)){hy=false}hz++}this.setAllItemChecked(hy)}}}}else if(this.hasAllItem()){var hA=true;var hB=0;while(hA&&this.hasItemAtIndex(hB)){if(!this.isChecked(hB)){hA=false}hB++}this.setAllItemChecked(hA)}this.togglePendingCss(e,L);this.$3(e)},hasAllItem:function(){var e=this.parent.fetchAllItem();return ss.isValue(e)&&cF.filterItem.isAllItem(e)},hasItemAtIndex:function(e){return e<this.domainActualSize&&ss.isValue(this.parent.fetchChildNodeByIndex(e))},setAllItemChecked:function(e){var L=this.parent.fetchAllItem();if(ss.isValue(L)){cF.filterItem.setChecked(L,e);this.set_allItemCheckState(e)}},togglePendingCss:function(e,L){var hy=(ss.isValue(L)?L:this.parent.fetchChildNodeByIndex(e));if(ss.isValue(hy)){cF.filterItem.togglePendingState(hy)}},setChecked:function(e,L){var hy=this.parent.fetchChildNodeByIndex(e);if(ss.isValue(hy)){cF.filterItem.setChecked(hy,L)}},isChecked:function(e,L){var hy;if(e===-1){hy=this.parent.fetchAllItem()}else{hy=(ss.isValue(L)?L:this.parent.fetchChildNodeByIndex(e))}return cF.filterItem.isChecked(hy)},isPending:function(e,L){if(this.$a){var hy=((this.$5&&!this.$6)?true:e.s);if(ss.contains(this.$7,L)){return hy===this.$9}else{return hy!==this.$9}}else{return ss.contains(this.$7,L)}},$0:function(){if(this.$a||this.$7.length>0){this.$2()}else{this.$1()}},$2:function(){if(ss.isValue(this.$1$1)){this.$1$1()}},$1:function(){if(ss.isValue(this.$1$2)){this.$1$2()}},$3:function(e){if(ss.contains(this.$7,e)){ss.remove(this.$7,e)}else{this.$7.push(e)}}});ss.initClass(eW,a,{get_hitTestingBox:function(){return((this.$k.length===0)?{x:0,y:0,w:0,h:0}:tab.RectXYUtil.nonemptyify(this.$g(true)))},get_autoScrollAdjustment:function(){return((tab.ApplicationModel.get_instance().get_isLocalRenderMode()||tsConfig.is_mobile)?this.get_autoScrollOffset():{x:0,y:0})},isSingleSelect:function(){return this.$k.length===0},$g:function(e){var L=(e?this.$l:this.$k);var hy=L[0].x;var hz=hy;var hA=L[0].y;var hB=hA;for(var hC=0;hC<L.length;hC++){var hD=L[hC];if(hD.x<hy){hy=hD.x}else if(hD.x>hz){hz=hD.x}if(hD.y<hA){hA=hD.y}else if(hD.y>hB){hB=hD.y}}return{x:hy,y:hA,w:hz-hy,h:hB-hA}},updateSpecificShape:function(e){if(this.$k.length===0){var L=this.get_dragStart().x-this.get_connectNodePos().x;var hy=this.get_dragStart().y-this.get_connectNodePos().y;this.$d(L,hy)}var hz=e.x;var hA=e.y;this.$d(hz,hA)},renderShape:function(){if(ss.isNullOrEmptyString(this.$p)){return}if(fF.get_isUsingVml()){var e="<v:polyline class='vpolyline' filled='False' points='"+this.$p+"'><v:stroke color='"+'rgb(0, 176, 240)'+"'/></v:polyline>";this.get_dom().find('.vpolyline').replaceWith(e)}else{this.get_dom().find('svg path').attr('d',this.$p);if(ss.isValue(this.$i)){window.clearTimeout(ss.unbox(this.$i))}this.$i=window.setTimeout(ss.mkdel(this,function(){this.$f()}),300)}this.get_dom().css('display','')},$f:function(){if(ss.isValue(this.$i)){window.clearTimeout(ss.unbox(this.$i))}this.get_dom().find('svg path').attr('d',this.$p+'Z')},show:function(){this.$e();this.renderShape();this.get_dom().find('.selectionShape').show()},hide:function(){this.get_dom().find('.selectionShape').hide()},shapeAreaHit:function(e,L,hy,hz){var hA=hy.get_objectId();var hB=L.get_markType();var hC=cZ.rectangleAreaHit(L,hy.get_boundingBox(),e,hA,hz,hB);if(!hC){return false}var hD=0;var hE=0;if(hz.get_transformType()===3){hD=hz.get_translateX();hE=hz.get_translateY()}var hF=this.$h(hD,hE);if(hz.get_transformType()===1){hF=hz.transformPolygon(hF)}return cZ.polyAreaHit(L,hy.get_boundingBox(),hF,hA,hz,hB)},sendSelectionCommand:function(e,L,hy,hz){tab.SelectionClientCommands.selectPolyRegionAndDoUbertip(e,this.get_hitTestingBox(),this.$l,L,hy,hz)},retrieveStateObject:function(e){return(this.isStateObjectTypeCorrect(e)?e:new eX)},saveCurrentState:function(e){if(this.isStateObjectTypeCorrect(e)){var L=e;L.saveCurrentState(this.$l)}},isStateObjectTypeCorrect:function(e){if(ss.isValue(e)){if(ss.referenceEquals(ss.getInstanceType(e),eX)){return true}}return false},$e:function(){ss.clear(this.$k);ss.clear(this.$l);ss.clearKeys(this.$j);this.$p='';this.$n=null;this.$o=null},$d:function(e,L){var hy=2;var hz=1;if(this.$m&&ss.isValue(this.$n)&&ss.isValue(this.$o)){if(Math.abs(e-ss.unbox(this.$n))<hy&&Math.abs(L-ss.unbox(this.$o))<hy){return}}var hA=e+this.get_drawOffsets().x+this.get_autoScrollAdjustment().x;var hB=L+this.get_drawOffsets().y+this.get_autoScrollAdjustment().y;var hC=e+this.get_totalScrollOffset().x;var hD=L+this.get_totalScrollOffset().y;var hE=false;var hF=false;var hG=false;var hH=this.$l.length;if(this.$m){if(hH>1){var hI=this.$l[hH-1];var hJ=this.$l[hH-2];var hK=Math.abs(hC-hJ.x);var hL=Math.abs(hC-hI.x);var hM=Math.abs(hD-hJ.y);var hN=Math.abs(hD-hI.y);hE=hM<=hz&&hN<=hz;if(hE){hE=eW.$0(hC,hI.x,hJ.x)}else{hF=hK<=hz&&hL<=hz;if(hF){hF=eW.$0(hD,hI.y,hJ.y)}else{hG=hK*hN===hM*hL&&eW.$0(hC,hI.x,hJ.x)}}}}var hO=hH-1;if(hE){this.$k[hO].x=hA;this.$l[hO].x=hC}else if(hF){this.$k[hO].y=hB;this.$l[hO].y=hD}else if(hG){this.$k[hO].x=hA;this.$k[hO].y=hB;this.$l[hO].x=hC;this.$l[hO].y=hD}else{this.$k.push({x:hA,y:hB});this.$l.push({x:hC,y:hD})}this.$p='';var hP=this.get_autoScrollAdjustment();if(fF.get_isUsingVml()){for(var hQ=0;hQ<this.$k.length;hQ++){var hR=this.$k[hQ];this.$p+=hR.x-hP.x+'px,'+(hR.y-hP.y)+'px,'}this.$p+=this.$k[0].x-hP.x+'px,'+(this.$k[0].y-hP.y)+'px'}else{var hS='M';for(var hT=0;hT<this.$k.length;hT++){var hU=this.$k[hT];this.$p+=hS+(hU.x-hP.x)+','+(hU.y-hP.y);hS='L'}}this.$n=e;this.$o=L},$h:function(e,L){var hy=0;var hz=this.$l.length;var hA=e.toString()+':'+L.toString();var hB=this.$j[hA];if(ss.isNullOrUndefined(hB)){hB=new Array(hz*2);this.$j[hA]=hB}else{hy=ss.Int32.div(hB.length,2);if(this.$m){hy-=1}hB.length=hz*2}var hC=Math.round(e);var hD=Math.round(L);for(var hE=hy,hF=hy*2;hE<hz;hE++,hF+=2){var hG=this.$l[hE];hB[hF]=hG.x-hC;hB[hF+1]=hG.y-hD}return hB}},fF);ss.initClass(eX,a,{saveCurrentState:function(e){if(e.length<this.$1){}this.$0=ss.arrayClone(e)},updateLastState:function(){this.$1=Math.max(0,this.$0.length-1)},getStateDiff:function(){if(this.$0.length===0){return[]}var e=this.$0[0].y;var L=e;var hy=this.$0[0].x;var hz=hy;for(var hA=this.$1,hB=this.$0.length;hA<hB;hA++){e=Math.min(e,this.$0[hA].y);L=Math.max(L,this.$0[hA].y);hy=Math.min(hy,this.$0[hA].x);hz=Math.max(hz,this.$0[hA].x)}var hC=new Array(1);hC[0]=tab.RectXYUtil.nonemptyify({x:hy,y:e,w:hz-hy,h:L-e});return hC}},fG);ss.initClass(eY,a,{},ss.makeGenericType(spiff.BaseView$1,[eZ]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[eZ])]);ss.initClass(eZ,a,{},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(fb,a,{});ss.initClass(fc,a,{},ec,[ss.IDisposable]);ss.initClass(fd,a,{$h:function(){return this.get_viewModel()},$g:function(){return this.get_template()},onAddedToDom:function(){ss.makeGenericType(Y,[fe]).prototype.onAddedToDom.call(this);this.$e()},onViewModelPropertyChanged:function(e,L){switch(L.get_propertyName()){case'isActiveZone':case'isReadyZone':{break}case'ParentZoneSizeChanged':{var hy=this.$h().$4();if(hy.w===this.$g().panel.width()&&hy.h===this.$g().panel.height()){}else{this.$f()}break}case null:case'ModelChanged':{this.$f();break}default:{this.$f();break}}},$f:function(){this.$e()},$e:function(){this.drawTitle();var e='tableau_qcolor_legend_'+encodeURIComponent(this.$h().$7());this.$g().panel.get(0).id=e;var L=this.$h().get_quantColorLegendPresModel();var hy=this.$h().$4().w;var hz=this.$h().$4().h;if(!this.get_legendViewModel().get_titleInline()){this.$g().titleArea.width(hy)}fd.setDomNodeStyleSize(this.$g().panel,hy,hz);var hA=$.extend(true,new Object,L.tV.oyQ);var hB=this.$g().ramp;var hC=hB.get(0);var hD=bb.getRenderContext(hC,'opaque');hD.save();ch.setTextProperties(hD,L.ZBT,0);var hE=L.tV.xuX.thj+L.tV.xuX.rec<hA.thj;{var hF=L.tV.xuX;var hG=this.$g().minLabel;hG.css('left',hF.thj.toString()+'px');hG.css('top',hF.RAC.toString()+'px');hG.css('width',hF.rec.toString()+'px');hG.css('height',hF.EUR.toString()+'px');hG.css('line-height',hF.EUR.toString()+'px');hG.css('text-align',(L.tV.fUl?'center':'left'));var hH=L.ZBT;hG.css(cL.makeFormatStyleDict(hH,null));hG.text(L.lUK);if(hE){var hI=Math.round(hD.measureText(L.lUK).width)-hF.rec;hI=this.$d(hI,hA.rec);if(hI>0){hA.thj+=hI;hA.rec-=hI}}}var hJ=this.$g().maxLabel;if(L.tV.fUl){hJ.css('visibility','hidden')}else{hJ.css('visibility','visible');var hK=L.tV._oB;hJ.css('left',hK.thj.toString()+'px');hJ.css('top',hK.RAC.toString()+'px');hJ.css('width',hK.rec.toString()+'px');hJ.css('height',hK.EUR.toString()+'px');hJ.css('line-height',hK.EUR.toString()+'px');hJ.css('text-align','right');var hL=L.ZBT;hJ.css(cL.makeFormatStyleDict(hL,null));hJ.text(L.ZWE);if(hE){var hM=Math.max(0,Math.round(hD.measureText(L.ZWE).width)-hK.rec);hM+=this.$h().get_borderWidth()*2;hM=this.$d(hM,hA.rec);if(hM>0){hJ.css('left',(hK.thj-hM).toString()+'px');hA.rec-=hM}}}hD.restore();{hB.css('left',hA.thj.toString()+'px');hB.css('top',hA.RAC.toString()+'px');var hN=L.POI.s$V*2;var hO=hA.rec-hN+1;var hP=hA.EUR-hN+1;hB.css('width',hO+'px');hB.css('height',hP+'px');{var hQ={w:hO,h:hP};bd.sizeCanvasWithHighDPISupport(hC,hD,hQ);hD.save();var hR=this.$h().get_rampColorSamplesAsColorModels();var hS=hR.length;if(L.tzB){var hT=0;var hU=Math.round(hO/hS);for(var hV=0;hV<hS-1;++hV){hD.set_shapeFillStyle(hR[hV]);hD.fillRect(hT,0,hU+1,hP);hT+=hU}var hW=hC.width-hT;hD.set_shapeFillStyle(hR[hS-1]);hD.fillRect(hT,0,hW,hP)}else{var hX=hD.createLinearGradient(0,0,hO,0);var hY=1/(hS-1);for(var hZ=0;hZ<hS;++hZ){var ia=hZ*hY;hX.addColorStop(ia,hR[hZ])}hD.set_shapeFillStyle(hX);hD.fillRect(0,0,hO,hP)}hD.restore()}{var ib=cL.$3(L.POI);hB.css(ib)}if(L.uiH){var ic=this.$g().centerMark;ic.css('visibility','visible');var id=L.tV.sOh.thj;var ie=L.tV.sOh.RAC;var ig=L.tV.fhz.RAC;var ih=ig-ie;if(hE&&hA.rec!==L.tV.oyQ.rec){var ii=L.tV.oyQ;var ij=(id-ii.thj)/ii.rec;id=hA.thj+Math.ceil(ij*hA.rec)}ic.css('left',id.toString()+'px');ic.css('top',ie.toString()+'px');ic.width(1);ic.height(ih);ic.css('background-color','black')}else{this.$g().centerMark.css('visibility','hidden')}}},$d:function(e,L){var hy=0;if(e>0&&L>1){hy=Math.min(e,Math.floor(L*0.15))}return hy}},ss.makeGenericType(Y,[fe]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[fe])]);ss.initClass(fe,a,{get_quantColorLegendPresModel:function(){return this.$d.get_quantColorLegendPresModel()},get_titleHtml:function(){return this.get_quantColorLegendPresModel().XjF},get_titleInline:function(){var e=this.$5();if(this.get_quantColorLegendPresModel().tV.HNR===false&&e.h===0&&e.w>0){return true}else{return this.get_quantColorLegendPresModel().tV.HNR}},get_regionType:function(){return'color'},get_rampColorSamplesAsColorModels:function(){var e=[];var L=this.get_quantColorLegendPresModel().eg$;if(ss.isValue(L)){var hy=this.get_quantColorLegendPresModel().Avh/255;e=new Array(L.length);for(var hz=0;hz<L.length;++hz){e[hz]=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode(L[hz]),hy).toString()}}return e},get_borderWidth:function(){var e=this.get_quantColorLegendPresModel().rPC.s$V;if(this.get_quantColorLegendPresModel().rPC.ysh==='bs-none'){e=0}return e},get_titleHeight:function(){return this.get_quantColorLegendPresModel().tV.HVI.EUR},get_titleWidth:function(){return this.get_quantColorLegendPresModel().tV.HVI.rec},dispose:function(){this.$d.remove_legendChanged(ss.mkdel(this,this.$c));ea.prototype.dispose.call(this)},$c:function(){this.notifyPropertyChanged('ModelChanged')}},ea,[ss.IDisposable,spiff.IViewModel]);ss.initClass(ff,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(fg,a,{});ss.initClass(fi,a,{});ss.initClass(fj,a,{get_scrollNode:function(){return this.contentNode},instantiate:function(e,L,hy){this.$3=this.parent.get_searchWidget();this.$3.setStyle(2);var hz=$(this.div).addClass('CFOuterContainer');this.$3.startupAndAppendTo(hz);this.$3.hideUI();var hA=$('<div>').addClass('CFInnerContainer').addClass('tab-ctrl-formatted-text');hz.append(hA);this.contentNode=hA.get(0);this.resetContent(e,L,hy);this.disposables.add$1(spiff.EventUtil.bindWithDispose($(this.div),'click',ss.mkdel(this.parent,this.parent.onListItemClick)))},resetContent:function(e,L,hy){var hz=$(this.contentNode);hz.empty();if(this.shouldUseAllItem()&&e.length>0){bq.addAllItem(hz,this.parent,L,hy,cF.isAllOrAllChecked(this.parent),this.get_itemFormatter());if(cF.isAllOrAllChecked(this.parent)){for(var hA=0;hA<e.length;hA++){e[hA].s=false}}}if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy()}this.tiledWidget=gq.createRadiolist(this.parent,e,this.contentNode,L,this.get_lineHeight())},updateContent:function(e){var L=((e.length>0)?e.join(''):this.$3.get_noMatchHtml());var hy=$(this.contentNode);if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null}hy.html(L)},shouldNotReinstantiate:function(){return ss.isValue(this.$3)&&this.$3.isShowingResults()},layout:function(e,L){this.inherited(arguments);if(ss.isValue(this.tiledWidget)){this.tiledWidget.updateViewport(e.w,e.h)}var hy=((ss.isValue(this.$3)&&this.$3.get_isVisible())?dojo.marginBox(this.$3.domNode).h:0);dojo.style(this.contentNode,'height',this.div.clientHeight-hy+'px')},destroy:function(){this.dispose();if(ss.isValue(this.$3)){this.$3.destroy()}if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy()}this.tiledWidget=null},fetchChildNodeByIndex:function(e){if(ss.isValue(this.tiledWidget)){return this.tiledWidget.getElement(e)}else{return null}},fetchAllItem:function(){if(this.shouldUseAllItem()&&ss.isValue(this.contentNode)){return this.contentNode.firstChild}else{return null}}},Z,[ss.IDisposable]);ss.initClass(fk,a,{},br,[di]);ss.initClass(fl,a,{get_type:function(){return 0},get_geom:function(){return this.$0}},null,[dn]);ss.initClass(fm,a,{get_hitTestingBox:function(){return tab.RectXYUtil.nonemptyify(this.$e)},isSingleSelect:function(){return this.$d.w<=1&&this.$d.h<=1},updateSpecificShape:function(e){var L=this.get_dragStart().x-this.get_connectNodePos().x;var hy=this.get_dragStart().y-this.get_connectNodePos().y;var hz=Math.round(Math.min(e.x,L));var hA=Math.round(Math.max(e.x,L));var hB=Math.round(Math.min(e.y,hy));var hC=Math.round(Math.max(e.y,hy));var hD=hA-hz;var hE=hC-hB;this.$d={x:hz+this.get_drawOffsets().x,y:hB+this.get_drawOffsets().y,w:hD,h:hE};this.$e={x:hz+this.get_totalScrollOffset().x,y:hB+this.get_totalScrollOffset().y,w:hD,h:hE}},renderShape:function(){var e={l:this.$d.x,t:this.$d.y,w:this.$d.w,h:this.$d.h};tab.DomUtil.setMarginBoxJQ(this.get_dom(),e);this.get_dom().css('display','')},show:function(){this.get_dom().addClass('tvdrag_marquee')},hide:function(){this.get_dom().removeClass('tvdrag_marquee')},shapeAreaHit:function(e,L,hy,hz){return cZ.rectangleAreaHit(L,hy.get_boundingBox(),e,hy.get_objectId(),hz,L.get_markType())},sendSelectionCommand:function(e,L,hy,hz){tab.SelectionClientCommands.selectRectRegionAndDoUbertip(e,this.get_hitTestingBox(),L,hy,hz)},retrieveStateObject:function(e){return(this.isStateObjectTypeCorrect(e)?e:new fn)},saveCurrentState:function(e){if(this.isStateObjectTypeCorrect(e)){var L=e;L.saveCurrentState(this.get_hitTestingBox())}},isStateObjectTypeCorrect:function(e){if(ss.isValue(e)){if(ss.referenceEquals(ss.getInstanceType(e),fn)){return true}}return false}},fF);ss.initClass(fn,a,{saveCurrentState:function(e){this.$0=tab.RectXYUtil.clone(e)},updateLastState:function(){this.$1=this.$0},getStateDiff:function(){if(!tab.RectXYUtil.isEmpty(this.$1)){return tab.RectXYUtil.getChangedRects(this.$1,this.$0)}var e=new Array(1);e[0]=this.$0;return e}},fG);ss.initClass(fo,a,{$h:function(){return this.get_viewModel()},$g:function(){return this.get_template()},$9:function(){var e=this.$g().$1.val();if(!ss.referenceEquals(e,this.$h().get_constantValue())){tab.PaneClientCommands.setReferenceLineConstantValue(e,this.$h().get_refLineId())}this.$a()},$b:function(){this.$9()},$c:function(){this.$g().$1.attr('tabindex','1');this.$g().$1.attr('value',this.$h().get_constantValue());this.$i=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$9),tab.Strings.DialogButtonOK,'refLineConstantValueEditorButton',0,2);this.$i.addToDom(this.get_element());this.disposables.add$1(this.$i);this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.get_element(),'keydown',ss.mkdel(this,this.$d)))},$a:function(){this.$h().dispose()},$d:function(e){switch(e.which){case 27:{this.$a();break}case 108:case 13:{this.$9();break}}},onAddedToDom:function(){this.$f();tab.CommandController.get().add_undoCommand(ss.mkdel(this,this.dispose));this.$g().$1.focus();tab.DomUtil.selectAllInputText(this.$g().$1);spiff.Widget.prototype.onAddedToDom.call(this)},$f:function(){if(ss.isNullOrUndefined(this.$j)){this.$j=new spiff.Glass;this.$j.set_zIndex(988);this.$j.add_click(ss.mkdel(this,this.$b))}this.$j.show()},$e:function(){if(ss.isValue(this.$j)){this.$j.remove_click(ss.mkdel(this,this.$b));this.$j.dispose();this.$j=null}},dispose:function(){this.get_element().remove();this.$e();tab.CommandController.get().remove_undoCommand(ss.mkdel(this,this.dispose));ss.makeGenericType(spiff.BaseView$1,[fp]).prototype.dispose.call(this)}},ss.makeGenericType(spiff.BaseView$1,[fp]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[fp])]);ss.initClass(fp,a,{get_constantValue:function(){return this.$2.ybD},get_refLineId:function(){return this.$2.hGF}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(fq,a,{});ss.initEnum(fr,a,{year:'year',quarter:'quarter',month:'month',week:'week',day:'day',hour:'hour',minute:'minute',second:'second'},true);ss.initEnum(fs,a,{curr:'curr',todate:'todate',last:'last',next:'next',lastn:'lastn',nextn:'nextn',other:'other',othern:'othern',invalid:'invalid'},true);ss.initClass(ft,a,{get_filterType:function(){return this.$2.get_filterType()},get_legacyRelativeDateQuickFilterModel:function(){return this.$2},get_defaultFormat:function(){return this.$2.get_defaultFormat()},get_fiscalYearStart:function(){return this.$2.get_fiscalYearStart()},get_noTime:function(){return this.$2.get_noTime()},get_isRelativeDatePick:function(){return this.$2.get_isRelativeDatePick()},get_text:function(){return this.$2.get_text()},get_relativeDateTable:function(){return this.$2.get_relativeDateTable()},get_periodType:function(){return this.get_relativeDateTable().periodType},get_rangeType:function(){return this.get_relativeDateTable().rangeType},get_rangeN:function(){return this.get_relativeDateTable().rangeN},get_anchor:function(){return(ss.isValue(this.get_relativeDateTable().anchor)?this.get_relativeDateTable().anchor:null)}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel,dk]);ss.initClass(fu,a,{get_filterViewModel:function(){return this.filterViewModel},postCreate:function(){if(this.filterViewModel.get_filterType()!=='RelativeDatePick'){}var e=0;this.disposables=new tab.DisposableHolder;this.getSID=ss.mkdel(this,function(){return this.stateId});this.timestamp=(new Date).getMilliseconds();this.initFromState();var L=function(hy,hz){if(hz){dojo.addClass(hy.domNode,'RDFButtonHide')}else{e+=1;dojo.addClass(hy.domNode,'RDFButtonR'+e)}};L(this.menuButton,this.shouldHideContextMenu());$(this.menuButton.domNode).css('background-color',this.backgroundColor)},shouldHideDomainButton:function(){return true},shouldHideContextMenu:function(){if(tsConfig.current_sheet_type==='dashboard'&&tsConfig.is_authoring){return true}var e=tab.CommandsPresModelWrapper.create(this.getContextMenuCommands());return this.hideEmptyTitlebar()||ss.isNullOrUndefined(e)||e.get_commandItems().length===0},dispose:function(){this.disposables.dispose();this.showContextMenu=null},destroy:function(e){this.dispose();this.domPicker.innerHTML='';this.inherited(arguments)},getMetrics:function(){var e=dojo.marginBox(this.domNode);return ss.mkdict(['fixed',{w:0,h:e.h}])},initFromState:function(){this.currentRange=this.oFilter.table;this.currentAbbrev=this.toAbbrev(this.currentRange);this.domPicker.innerHTML='';var e=tableau.format.formatColumnDisplayName(this.oFilter,false);dojo.attr(this.domTitleBar,'title',e);this.updateTitleBar();_.each(fu.pickerStrings,ss.mkdel(this,function(L,hy){var hz=document.createElement('div');hz.innerHTML=tableau.format.escapeHTML(L);dojo.addClass(hz,'PickLabel');dojo.addClass(hz,'tab-ctrl-formatted-border-hover');this.domPicker.appendChild(hz);var hA=$(hz);var hB=ss.mkdel(this,function(hC){this.onClick(hy,hC)});this.disposables.add$1(spiff.EventUtil.bindWithDispose(hA,'click',hB));if(ss.referenceEquals(this.currentAbbrev,fu.pickerDurations[hy])){this.$0(hz);this.$2=hz}}));this.layout(null)},$0:function(e){dojo.addClass(e,'Selected');dojo.addClass(e,'tab-ctrl-formatted-widget');dojo.removeClass(e,'tab-ctrl-formatted-border-hover');dojo.addClass(e,'tab-ctrl-formatted-darker-border-hover')},$1:function(e){dojo.removeClass(e,'Selected');dojo.removeClass(e,'tab-ctrl-formatted-widget');dojo.addClass(e,'tab-ctrl-formatted-border-hover');dojo.removeClass(e,'tab-ctrl-formatted-darker-border-hover')},formatTuple:function(e){return tableau.format.formatTupleDisplayName(e,true,this.oFilter.role)},toAbbrev:function(e){var L=e.rangeN.toString();var hy='';switch(e.rangeType){case'curr':{hy='0';break}case'lastn':{hy='-'+L;break}case'nextn':{hy=L;break}default:{return''}}switch(e.periodType){case'year':{hy+='y';break}case'quarter':{hy+='q';break}case'month':{hy+='m';break}case'week':{hy+='w';break}case'day':{hy+='d';break}case'hour':{hy+='h';break}default:{return''}}return hy},onClick:function(e,L){var hy=fu.pickerDurationsInteger[e];if(!ss.referenceEquals(L.target,this.$2)){if(ss.isValue(this.$2)){this.$1(this.$2)}this.$0(L.target);tab.FilterClientCommands.doRelativeDateQuickFilter(this.session.get_visualId(),this.field,'day','lastn',hy)}},hideEmptyTitlebar:function(){return ss.isNullOrEmptyString(tableau.format.formatColumnDisplayName(this.oFilter,false))},doMenu:function(){this.showContextMenu(this.menuButton.domNode)},setTitleSize:function(e,L){this.$3=e;this.$4=L},adjustLabelPickWidth:function(e){var L=Math.floor((e-1)/fu.pickerDurations.length);dojo.forEach(this.domPicker.childNodes,function(hy){dojo.style(hy,'width',L-3+'px')})},layout:function(e){var L;dojo.removeClass(this.domNode,'RDPFHorizontal');this.updateTitleBar();var hy=dojo.marginBox(this.domPicker);if(!ss.isValue(hy)||!ss.isValue(hy.w)||hy.w===0){return}var hz=dojo.marginBox(this.domTitleBar);this.resetTitleSize();if(this.$3>0){hz.h=this.$3;dojo.marginBox(this.domTitleBar,ss.mkdict(['h',hz.h]))}if(this.$4>0){hz.w=this.$4;dojo.marginBox(this.domTitleBar,ss.mkdict(['w',hz.w]))}tableau.util.setupTitleEllipsis($(this.domTitleBar));var hA=dojo.contentBox(this.domNode);L=hA.w;if(!this.hideEmptyTitlebar()&&this.$4>0){dojo.addClass(this.domNode,'RDPFHorizontal');dojo.style(this.domTitleBar,'float','left');dojo.style(this.domPicker,'float','left');L=hA.w-hz.w}else{dojo.style(this.domTitleBar,'float','none');dojo.style(this.domPicker,'float','none')}dojo.contentBox(this.domPicker,ss.mkdict(['w',L]));this.adjustLabelPickWidth(L)}},dY,[ss.IDisposable]);ss.initClass(fv,a,{});ss.initClass(fw,a,{});ss.initClass(fx,a,{});ss.initClass(fy,a,{get_scene:function(){return this.$F},$q:function(){return ss.isValue(this.$G)&&this.$G.get_hasPaneTableObjectSelection()},$p:function(){return this.$A||ss.isValue(this.$t)&&this.$t.get_hasPaneTableObjectSelection()||ss.isValue(this.$z)&&!this.$z.get_isEmpty()},get_imageDictionary:function(){return this.$x},get_customShapes:function(){return this.$u},get_hiddenTuples:function(){return this.$y},set_hiddenTuples:function(e){this.$y=e||{}},get_isSingleUserPane:function(){return this.get_scene().HUq.length===1&&ss.isNullOrUndefined(this.$r)},$n:function(){return this.$v},$o:function(e){this.$v=e||{}},$m:function(){return this.$t},$s:function(){return this.$G},$k:function(e,L,hy,hz,hA,hB,hC){ss.clearKeys(this.$C);ss.clearKeys(this.$w);ss.clearKeys(this.$B);ss.clearKeys(this.$E);ss.clearKeys(this.$D);this.$r=null;this.$F=e;this.set_hiddenTuples(hB);this.$o(hC);if(ss.isValue(e)&&ss.isValue(e.ObZ)){this.$u=fy.extractCustomShapes(e);this.$g(e);if(ss.isValue(e.HUq)){if(ss.isValue(e.$Ww)){this.$r=new fz.$0(e.$Ww)}for(var hD=0;hD<e.HUq.length;hD++){var hE=e.HUq[hD];for(var hF=0;hF<hE.MdI.length;hF++){var hG=hE.MdI[hF];if(ss.isValue(hG.SgS)){var hH=hG.SgS;var hI=hH.fDN;var hJ=this.$F.ObZ[hI];var hK=fy.getPaneMarksKey(hH);var hL=eC.create(hI,this,hE,hH,hJ,hA,hK);this.$E[hK]=hL}}}}}if(ss.isValue(L)){this.$G=L;this.$z=hy}if(ss.isValue(hz)){this.$t=hz}},getMarkBoundingBox:function(e){if(ss.keyExists(this.$C,e)){return this.$C[e]}else{return fy.$1}},$7:function(e,L){if(ss.keyExists(this.$D,e)&&L>=0&&L<this.$D[e].length){return this.$D[e][L]}return null},computeTupleStates:function(e){var L=this.$q();var hy=this.$s();var hz=(ss.isValue(hy)?hy.get_tupleSelection():null);var hA=new tab.UintSet;if(ss.isValue(hz)){hA.addAll(hz.get_ids())}var hB=this.$p();var hC=this.$m();var hD=(ss.isValue(hC)?hC.get_tupleSelection():null);var hE=new tab.UintSet;if(ss.isValue(hD)){hE.addAll(hD.get_ids())}var hF=new tab.UintSet;if(ss.isValue(this.$z)){hF.addAll(this.$z.get_ids())}var hG=e.length;var hH=new Array(hG);for(var hI=0;hI<hG;hI++){var hJ=e[hI];var hK='markStateNormal';if(ss.keyExists(this.$y,hJ)){hK='markStateInvisible'}else if(L&&hA.contains(hJ)){hK='markStateSelected'}else if(hB&&(hE.contains(hJ)||hF.contains(hJ))){hK='markStateHighlighted'}hH[hI]=hK}return hH},prepareForDraw:function(e){this.$4(e);this.$h()},cleanupFromDraw:function(){this.$3()},$6:function(e){if(ss.keyExists(this.$B,e)){return this.$B[e]}else{return fy.$1}},$9:function(e){var L=[];var hy=ss.getEnumerator(e);try{while(hy.moveNext()){var hz=hy.current();var hA=this.$8(hz);ss.arrayAddRange(L,hA)}}finally{hy.dispose()}return L},$8:function(e){var L=false;var hy=[];for(var hz=0;hz<this.$F.HUq.length;hz++){var hA=this.$F.HUq[hz];if(hA.YVl.length>0){L=true;break}}var hB=this.getPaneDrawInfoFromTupleId(e);if(ss.isNullOrUndefined(hB)){return hy}var hC=hB.get_markType();if(L){hy.push(hB.get_paneRect())}else if(hC==='area'||hC==='line'){hy.push(hB.get_paneRect())}else{var hD=this.$5(e);var hE=hB.getWorldOffsetBounds(hD);for(var hF=0;hF<hE.length;hF++){var hG=hE[hF];hy.push(hG)}var hH=this.$6(e);if(!tab.RectXYUtil.isNull(hH)){var hI=hB.getWorldOffsetBounds(hH);for(var hJ=0;hJ<hI.length;hJ++){var hK=hI[hJ];hy.push(hK)}}}return hy},$l:function(e,L){if(ss.isValue(e)&&ss.isValue(e.t$x)){var hy=new ss.ObjectEnumerator(e.t$x);try{while(hy.moveNext()){var hz=hy.current();var hA=hz.key;if(!ss.keyExists(this.$x,hA)){var hB=hz.value;var hC={$:document.createElement('img')};hC.$.src='data:image/jpeg;base64,'+hB;this.$x[hA]=hC.$;var hD={$:null};hD.$=ss.mkdel({imgElt:hC,imageFinishedLoad:hD},function(){if(ss.isValue(L)){L()}this.imgElt.$.removeEventListener('load',this.imageFinishedLoad.$,false)});hC.$.addEventListener('load',hD.$,false)}}}finally{hy.dispose()}var hE=ss.getEnumerator(Object.keys(this.$x));try{while(hE.moveNext()){var hF=hE.current();if(!ss.keyExists(e.t$x,hF)){delete this.$x[hF]}}}finally{hE.dispose()}}},$e:function(e){return this.$q()&&this.$G.get_tupleSelection().isMarkSelected(e)},$b:function(e){return this.$p()&&(ss.isValue(this.$t)&&this.$t.get_tupleSelection().isMarkSelected(e)||this.$d(e))},$d:function(e){return ss.isValue(this.$z)&&this.$z.isMarkSelected(e)},$f:function(e){return!ss.keyExists(this.$y,e.toString())},$c:function(e){return ss.keyExists(this.$v,e.toString())},$j:function(e){if(ss.isValue(e)&&ss.isValue(e.HUq)){for(var L=0;L<e.HUq.length;L++){var hy=e.HUq[L];for(var hz=0;hz<hy.MdI.length;hz++){var hA=hy.MdI[hz];if(ss.isValue(hA.SgS)){var hB=hA.SgS;var hC=fy.getPaneMarksKey(hB);if(ss.isValue(ss.keyExists(this.$E,hC))){var hD=this.$E[hC];var hE=hB.fDN;var hF=e.ObZ[hE];hD.addLabelInfo(hF,hB)}}}}}},$a:function(e){var L=null;if(ss.isValue(e)){L=this.$E[fy.getPaneMarksKey(e)]}return L},getPaneDrawInfoFromKey:function(e){return this.$E[e]},getPaneDrawInfoFromTupleId:function(e){var L=new ss.ObjectEnumerator(this.$E);try{while(L.moveNext()){var hy=L.current();var hz=hy.value;if(hz.containsTuple(e)){return hz}}}finally{L.dispose()}return null},$i:function(e){this.$A=e},$2:function(e,L){fy.$0(e,L,this.$C)},$1:function(e,L){fy.$0(e,L,this.$B)},$0:function(e,L){fy.$0(e,L,this.$w)},$g:function(e){if(!ss.isValue(e)||!ss.isValue(e.ObZ)){return}var L=Object.keys(e.ObZ);for(var hy=0;hy<L.length;hy++){var hz=L[hy];var hA=e.ObZ[hz];var hB=hA.qOh;if(!ss.isValue(hB)){continue}var hC=hA.LTd['pane_flags'.toString()];var hD=fx.isPaneFlagSet(hC,'enable-scale-x')&&fx.isPaneFlagSet(hC,'enable-scale-y');var hE=null;var hF=null;var hG=false;if(hD){for(var hH=0;hH<e.HUq.length;hH++){var hI=e.HUq[hH];for(var hJ=0;hJ<hI.MdI.length;hJ++){var hK=hI.MdI[hJ];var hL=hK.SgS;if(ss.isValue(hL)&&ss.referenceEquals(hL.fDN,hz)){hE=tab.RecordCast.doubleRectPresModelAsDoubleRectXY(hL.NQL);hF={x:0,y:0,w:hL.wyR.rec,h:hL.wyR.EUR};hG=true;break}}if(hG){break}}}var hM=hB.length;var hN=new Array(hM);for(var hO=0;hO<hM;hO++){var hP=hB[hO];var hQ=null;if(!tab.MiscUtil.isNullOrEmpty(hP)){hQ=JSON.parse(hP);hQ=tab.RleDecoder.decode(hQ);cR.checkFor180DegLngLine(hQ);if(hD&&hG){cR.domainToPixelMultipolygon(hQ,hE,hF,true)}}hN[hO]=hQ}this.$D[hz]=hN}},$5:function(e){var L=this.$w[e];if(ss.isNullOrUndefined(L)){L=this.getMarkBoundingBox(e)}return L},$4:function(e){var L=ss.getEnumerator(Object.keys(this.$E));try{while(L.moveNext()){var hy=L.current();var hz=this.$E[hy];hz.computeDirtyMarks(e)}}finally{L.dispose()}},$3:function(){var e=_.keys(this.$E);for(var L=0;L<e.length;L++){var hy=e[L];var hz=this.$E[hy];hz.clearDirtyMarks()}},$h:function(){var e=_.keys(this.$E);for(var L=0;L<e.length;L++){var hy=e[L];var hz=this.$E[hy];hz.refreshMarkState()}}});ss.initClass(fz,a,{});fz.$1.prototype=fz.$0.prototype=fz.prototype;ss.initClass(fA,a,{get_newPos:function(){return this.$0}},ss.EventArgs);ss.initClass(fB,a,{get_applyDelay:function(){return this.applyDelay},get_isPendingMode:function(){return false},get_filterTable:function(){return(!!this.get_oResults()?this.get_oResults():null)},get_quickFilter:function(){return this.get_qf()},shouldDeferChanges:function(){return false},postCreate:function(){this.inherited(arguments);if(this._isTypeInList){this.showUI(true)}this._isFilterSearchable=true;if(!!this.get_qf()&&this._isTypeInList){this._isFilterSearchable=this.get_qf().get_oFilter().is_searchable}if(this._isFilterSearchable){this.domSearchAddButton.title=this.ADD_ITEM_CTRL_ENTER}else{this.domSearchAddButton.title=this.ADD_ITEM_ENTER}this.setQueryIconsVisibility(true);tableau.util.disableTextSelection(this.domResults)},destroy:function(){if(ss.isValue(this.domResults)){$([this.domResults]).remove()}this.inherited(arguments)},onQueryBoxPaste:function(e){if(!!this._queryBoxPasteTimeout){window.clearTimeout(ss.unbox(this._queryBoxPasteTimeout));this._queryBoxPasteTimeout=null}this._queryBoxPasteTimeout=window.setTimeout(ss.mkdel(this,this._handleQueryBoxPaste),10)},_handleQueryBoxPaste:function(){var e;var L;L=this.getQuery();L=L.replace('/\r\n/g','\n');e=L.split('\n');if(e.length>1){this.addManualSearchItems(e)}},getOnQueryBoxKeyDownBehavior:function(e){var L;L=this.inherited(arguments);switch(e.keyCode){case 27:{if(dojo.isFF){L.functionToCall=ss.mkdel(this,this.onXButtonClick)}break}case 13:{if(this._isTypeInList){L.stopEvent=true;L.functionToCall=this._getEnterKeyDownBehaviorOnTypeInList(e)}break}}return L},_getEnterKeyDownBehaviorOnTypeInList:function(e){if(e.ctrlKey){return ss.mkdel(this,this.onSearchAddButtonClick)}if(this._isFilterSearchable){return ss.mkdel(this,this.onSearchButtonClick)}return ss.mkdel(this,this.onSearchAddButtonClick)},handleNonCommandKeyDown:function(e){this.inherited(arguments);if(this._isTypeInList){this.clearSearch(true,false)}if(!this._isTypeInList){this.$7()}},onSearchAddButtonClick:function(e){this.addManualSearchItems(null)},onSearchButtonClick:function(e){this.doSearch()},onSearchBusyImgClick:function(e){this.$2()},focusQueryBox:function(){this.domQueryBox.focus()},blurQueryBox:function(){this.domQueryBox.blur()},getQuery:function(){return this.domQueryBox.value},setQuery:function(e){this.domQueryBox.value=e},showUI:function(e){if(this.get_isVisible()){return}if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.LegacyCategoricalQuickFilter'&&this.get_qf().get_oFilter().table.tuples.length===0&&!this._isTypeInList){return}this.inherited(arguments)},clearSearch:function(e,L){dojo.style(this.domResults,'display','none');this.domResults.innerHTML='';this.clearRangeAnchorAndSelection();this.$2();this.inherited(arguments)},setQueryIconsVisibility:function(e){var L=this._isTypeInList;var hy=((!!e&&e)?false:tableau.util.isElementVisible(this.domResults));var hz=!ss.isNullOrEmptyString(this.getQuery())&&L&&!hy;var hA=hz;var hB=hz&&this._isFilterSearchable;dojo.style(this.domSearchBusyImg,'display',((hB&&this._bSearching)?'block':'none'));dojo.style(this.domSearchButton,'display',((hB&&!this._bSearching)?'block':'none'));dojo.style(this.domSearchAddButton,'display',(hA?'block':'none'));var hC=((L&&!hy)?'none':'block');dojo.style(this.get_domXButton(),'display',hC);this.fixQueryWidth()},fetchChildNodeByIndex:function(e){var L=this.domResults.childNodes;for(var hy=0,hz=L.length;hy<hz;hy++){if(cF.filterItem.getIndex(L[hy])===e){return L[hy]}}return null},layout:function(e){this.setQueryIconsVisibility();var L=this.$3();if(this._isTypeInList||this.get_qf().get_mode()==='checkdropdown'){this.$4(L)}else if(L!==0){this.$6(ss.Int32.div(ss.unbox(e),L),L)}},fixQueryWidth:function(){var e=tableau.util.isElementVisible(this.get_domXButton());var L=tableau.util.isElementVisible(this.domSearchAddButton);var hy=tableau.util.isElementVisible(this.domSearchButton);var hz=tableau.util.isElementVisible(this.domSearchBusyImg);var hA=0;if(e){hA+=dojo.marginBox(this.get_domXButton()).w}if(L){hA+=dojo.marginBox(this.domSearchAddButton).w}if(hy){hA+=dojo.marginBox(this.domSearchButton).w}if(hz){hA+=dojo.marginBox(this.domSearchBusyImg).w}dojo.marginBox(this.domQueryBox,ss.mkdict(['w',dojo.contentBox(this.domQuerySection).w-hA-1]))},$4:function(e){var L=dojo.query('.tab-dashboard')[0];if(!this._initializedSearchResults){this._initializedSearchResults=true;L.appendChild(this.domResults);dojo.style(this.domResults,ss.mkdict(['position','absolute','zIndex','987']));this._domResultsPBExtents=dojo._getPadBorderExtents(this.domResults)}var hy=dojo.coords(this.domQuerySection);var hz=$(this.domQuerySection).offset();var hA=$(L).offset();var hB=tab.DoubleUtil.roundToInt(hz.top)-tab.DoubleUtil.roundToInt(hA.top);var hC=hB+hy.h;var hD=dojo.coords(L);var hE=hD.t+hD.h;var hF=e+this._domResultsPBExtents.h;var hG=this.domResults.childNodes.length*e+this._domResultsPBExtents.h;var hH=hE-hC;var hI=hB-hD.t;var hJ=true;var hK=Math.min(hG,hH);if(hK<hF&&hI>hH){hK=Math.min(hG,hI);hJ=false}hK=Math.max(hK,hF);dojo.marginBox(this.domResults,ss.mkdict(['w',hy.w,'h',hK]));var hL=(hJ?hC:(hB-hK));var hM=tab.DoubleUtil.roundToInt(hz.left)-tab.DoubleUtil.roundToInt(hA.left);dojo.style(this.domResults,ss.mkdict(['top',hL.toString()+'px','left',hM.toString()+'px','borderTopWidth',(hJ?'0':'1px'),'borderBottomWidth',(hJ?'1px':'0')]))},$6:function(e,L){var hy=Math.max(this.domResults.childNodes.length,1);var hz=Math.min(hy,Math.floor(e/2));dojo.style(this.domResults,'height',(hz*L).toString()+'px')},$3:function(){if(ss.isNullOrUndefined(this.domResults.firstChild)){return 0}var e=$(this.domResults.firstChild);if(ss.isValue(e[0].offsetHeight)){return e[0].offsetHeight}return 15},$7:function(){if(!!this._searchTimer){window.clearTimeout(ss.unbox(this._searchTimer));this._searchTimer=null}this._searchTimer=window.setTimeout(ss.mkdel(this,this.doSearch),this.searchDelay)},showSearchSpinner:function(e){this._bSearching=e;this.setQueryIconsVisibility()},addManualSearchItems:function(e){if(this.get_qf().get_dijitDeclaredClass()!=='tableau.base.widget.LegacyCategoricalQuickFilter'){return}if(tab.MiscUtil.isNullOrUndefined(e)){e=this.getQuery().split('\n')}if(tab.MiscUtil.isNullOrEmpty(e)){return}var L=[];for(var hy=0,hz=e.length;hy<hz;hy++){var hA=e[hy];if(!tab.MiscUtil.isNullOrEmpty(hA)){L.push({d:hA,s:true,t:[{t:'s',v:hA}]})}}var hB=new Object;hB.schema=this.get_qf().get_oFilter().table.schema;hB.tuples=L;this.notifyParentFilterOfChanged(hB,true,false);this.clearSearch(false,false)},doSearch:function(){this.searchWithQuery(this.getQuery())},updateSearch:function(){if(this.get_isVisible()&&this.resultCount>0){this.searchWithQuery(this.getQuery())}},searchWithQuery:function(e){if(e.length<=0){this.clearSearch(false,false)}else if(this.get_qf().get_dijitDeclaredClass().indexOf('LegacyCategoricalQuickFilter')>-1&&!this._isTypeInList){if(this.get_qf().get_oFilter().isTiled){this.doRemoteSearch(e,true)}else{this.handleSearchResults(this.doCategoricalSearch(e))}}else{this.doRemoteSearch(e,false)}},doRemoteSearch:function(e,L){this.showSearchSpinner(this._isTypeInList);this._lastRemoteSearch=this.doAjaxRemoteSearch(e,this.$9,L,ss.mkdel(this,this.handleSearchResults),ss.mkdel(this,this.handleSearchResultsError))},$2:function(){if(!!this._lastRemoteSearch){this._lastRemoteSearch.abort();this._lastRemoteSearch=null}this.showSearchSpinner(false)},$1:function(e,L,hy){var hz=tableau.format.escapeHTML;if(!ss.isNullOrUndefined(hy)&&L<hy){var hA=hy-L;e.push('<div class="searchResultsRemaining">');if(hA===0){e.push(hz(tab.Strings.QuickFilterSearchResultsNotShownZero))}else if(hA===1){e.push(hz(tab.Strings.QuickFilterSearchResultsNotShownSingular))}else{var hB=tableau.format.formatIntAuto(hA,'t',',','3;0');e.push(hz(tab.Strings.QuickFilterSearchResultsNotShownPlural(hB)))}e.push('</div>')}},$5:function(e){if(e.length<=0){return[]}this.set_oResults(e);var L=this.get_oResults().tuples;var hy=this.get_oResults().indices;var hz=[];var hA=this.makeUniqueSearchItemIdPrefix();for(var hB=0,hC=L.length;hB<hC;hB++){var hD=(!!hy?hy[hB]:hB);var hE=cF.filterItem.getSearchResultHtml(this.get_qf(),L[hB],hA,hD);hz.push(hE)}this.$1(hz,L.length,e.actual_size);return hz},handleSearchResults:function(e){var L=tableau.format.escapeHTML;var hy=tab.Strings.QuickFilterSearchNoMatches;this.showSearchSpinner(false);if(!!e&&e.dojoType==='cancel'){return}this.domResults.innerHTML='';if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.LegacyHierarchicalQuickFilter'||this._isTypeInList||this.get_qf().get_oFilter().isTiled){if(!!e.schema[0].collation&&e.schema[0].collation.f===0){hy='<div>'+L(hy)+'<br/>'+L(tab.Strings.QuickFilterSearchDataIsCaseSensitive)+'</div>'}e=this.$5(e)}this.resultCount=e.length;this.domResults.innerHTML=((this.resultCount>0)?e.join(''):hy);dojo.style(this.domResults,'display',((this.domResults.innerHTML.length>0)?'block':'none'));this.setQueryIconsVisibility();this.get_qf().layout(null);this.$8.refreshRangeAnchorAndSelection()},handleSearchResultsError:function(e){this.showSearchSpinner(false);this.domResults.innerHTML='';this.resultCount=0},applyChanges:function(){var e=null;if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.LegacyCategoricalQuickFilter'&&!this._isTypeInList){e=this.applyChangesCat()}else{e=this.applyChangesHierOrTypeIn()}this.notifyParentFilterOfChanged(e,false,false)},applyChangesByChangelist:function(e){if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.LegacyCategoricalQuickFilter'&&!this._isTypeInList){this.get_qf().applyChangesByChangelist(e)}else{this.applyChanges()}},notifyParentFilterOfChanged:function(e,L,hy){if(e.tuples.length===0){return}this.get_qf().updateStateFromSearch(e);if(hy){return}var hz=this.get_qf();hz.set_stateId(hz.get_stateId()+1);if(L){this.get_qf().get_session().addManualFilterItems(e,this.get_qf())}else{var hA=this._isTypeInList&&this.get_qf().get_oFilter().all;var hB=hA||this.get_qf().isSingleSelect();if(hB){if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.LegacyHierarchicalQuickFilter'){this._doModifyHierarchialFilter(hB,e)}else{this.doSetCategoricalFilter(hA,e)}}else if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.LegacyHierarchicalQuickFilter'){this._doModifyHierarchialFilter(false,e)}else{this.doModifyCategoricalFilter(e)}}},doSetCategoricalFilter:function(e,L){var hy;var hz=[];var hA=L.tuples.length;if(e){for(var hB=0;hB<hA;hB++){hy=L.tuples[hB].d||L.tuples[hB].t[0].v;if(L.tuples[hB].s){hz.push(hy)}}}else{hy=L.tuples[0].d||L.tuples[0].t[0].v;hz.push(hy)}tab.FilterClientCommands.setCategoricalFilterValues(this.get_qf().get_session().get_visualId(),this.get_qf().get_field(),'filter-replace',hz,null)},doModifyCategoricalFilter:function(e){var L=[];var hy=[];var hz=e.tuples.length;for(var hA=0;hA<hz;hA++){var hB=e.tuples[hA].d||e.tuples[hA].t[0].v;if(e.tuples[hA].s){L.push(hB)}else{hy.push(hB)}}tab.FilterClientCommands.modifyCategoricalFilterValues(this.get_qf().get_session().get_visualId(),this.get_qf().get_field(),L,hy,true)},_doModifyHierarchialFilter:function(e,L){var hy=[];var hz=[];var hA=(e?'filter-replace':'filter-delta');var hB=L.tuples.length;var hC=L.tuples;for(var hD=0;hD<hB;hD++){var hE=hC[hD].t.length;var hF='';for(var hG=0;hG<hE;++hG){var hH=hC[hD].t[hG];if(!!hH.v){hF=hH.v}}if(hC[hD].s){hy.push(hF)}else{hz.push(hF)}}tab.FilterClientCommands.doMemberHierarchialFilter(this.get_qf().get_session().get_visualId(),this.get_qf().get_field(),hy,hz,hA)},applyChangesCat:function(){var e=new Object;e.schema=this.get_qf().get_oFilter().table.schema;e.tuples=[];var L=this.domResults.firstChild;var hy=this.domResults.childNodes.length;var hz;var hA=this.get_qf().get_oFilter().table.tuples;if(this.get_qf().isSingleSelect()){for(var hB=0;hB<hy;hB++,L=L.nextSibling){if(cF.filterItem.isChecked(L)){hz=cF.filterItem.getIndex(L);this.recordCheckedChanges(e,L,hA[hz]);for(var hC=0;hC<hA.length;++hC){if(hC!==hz){hA[hC].s=false}}break}}}else{var hD=[];for(var hE=0;hE<hy;hE++,L=L.nextSibling){hz=cF.filterItem.getIndex(L);this.recordCheckedChanges(e,L,hA[hz]);hD[hz]=1}L=this.get_qf().get_domContent().firstChild;if(cF.filterItem.isAllItem(L)){L=L.nextSibling}var hF=hA.length;for(var hG=0;hG<hF;hG++,L=L.nextSibling){if(hD[hG]===0){this.recordCheckedChanges(e,L,hA[hG])}}}return e},applyChangesHierOrTypeIn:function(){var e=new Object;e.schema=this.get_oResults().schema;e.tuples=[];var L=this.domResults.firstChild;var hy=this.get_oResults().tuples;for(var hz=0,hA=hy.length;hz<hA;hz++,L=L.nextSibling){this.recordCheckedChanges(e,L,hy[hz])}return e},onManualAddSuccess:function(e){var L=tableau.format.escapeHTML;var hy=e.invalidTuples;var hz=hy.length;if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.invalidTuples)||ss.isNullOrUndefined(e.totalTuples)){return false}if(hz>0){var hA=[];if(hz===1){hA.push(L(tab.Strings.QuickFilterSearchInvalidDataMemberSingular(hy[0].t[0].v)));hA.push('<br/>')}else{hA.push(L(tab.Strings.QuickFilterSearchInvalidDataMembersPlural));hA.push('<br/>');for(var hB=0;hB<hz;hB++){hA.push('&nbsp;&nbsp;&nbsp;&nbsp;&bull;&nbsp;');hA.push(hy[hB].t[0].v);hA.push('<br/>')}}M.get_commonDialogProvider().showAlertDialog(hA.join(''),tab.Strings.QuickFilterSearchInvalidDataMembersDialogTitle,true);var hC=[];for(var hD=0;hD<hz;hD++){var hE=hy[hD].t[0].v;hC.push({d:hE,s:false,t:hy[hD].t})}var hF=new Object;hF.schema=this.get_qf().get_oFilter().table.schema;hF.tuples=hC;this.notifyParentFilterOfChanged(hF,true,true)}return e.totalTuples>hz},updateStateIfNeeded:function(){},handleClickIfPending:function(e){},clearRangeAnchorAndSelection:function(){this.$8.clearRangeAnchorAndSelection()},forEachSelected:function(e){this.$8.forEachSelected(e)},onListItemClick:function(e){this.$8.onListItemClick(e)},handleItemClick:function(e){},recordCheckedChanges:function(e,L,hy){if(cF.filterItem.isChecked(L)&&!hy.s){e.tuples.push(cF.filterItem.setChecked(L,true,hy))}else if(!cF.filterItem.isChecked(L)&&hy.s){e.tuples.push(cF.filterItem.setChecked(L,false,hy))}}},fC,[df]);ss.initClass(fD,a,{hitTest:function(e,L,hy){var hz=new tab.HitTestSceneCmd;hz.c['WAe']=tab.PointUtil.toPresModel(e);hz.c['J_M']=tab.ModelUtils.getVisualId(tsConfig.current_sheet_name);hz.invoke$1().done(ss.mkdel(this,function(hA){var hB=hA.$c['LB$'];if(ss.isValue(hB)&&hB.length>0){var hC=new tab.SceneElementModel(hB[0]);var hD=hC.get_paneId();var hE=this.makePaneSpecId(hD.get_columnIndex(),hD.get_rowIndex());var hF=new da(hC);this.set_current(new hh(hy,hE,hD.get_columnIndex(),hD.get_rowIndex(),this.region.get_regionPart(),e,L,hF))}else{this.set_current(null)}}))}},hi,[ss.IDisposable]);ss.initClass(fE,a,{dispose:function(){this.$2=null;tab.ApplicationModel.get_instance().get_shapeManager().remove_shapeLoaded(ss.mkdel(this,this.onShapeLoaded))},initialize:function(e){this.$3.clear();for(var L=0;L<e.length;L++){var hy=e[L];this.$0(hy)}this.$1()},$0:function(e){if(fx.isCustomShape(e)&&!tab.ApplicationModel.get_instance().get_shapeManager().hasShape(e)){this.$3.add(e)}},onShapeLoaded:function(e){if(!this.$3.contains(e)){return}this.$3.remove(e);this.$1()},$1:function(){if(this.$3.get_count()===0&&ss.isValue(this.$2)){this.$2()}}},null,[ss.IDisposable]);ss.initClass(fH,a,{});ss.initClass(fI,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(fJ,a,{$e:function(){return this.get_template()},$9:function(){var e=$("\n            <div class='tab-shareLinkSection'>\n                <span class='tab-shareLinkTitle tab-shareTitle'/>\n                <input class='tab-shareLinkInput tab-shareInput' type='text'/>\n                <div class='tab-shareLinkButtons'/>\n            </div>");var L=$("\n            <div class='tab-shareEmbedSection'>\n                <span class='tab-shareEmbedTitle tab-shareTitle'/>\n                <input class='tab-shareEmbedInput tab-shareInput'/>\n            </div>");if(this.$h.get_allowSharingDifferentViews()){this.$e().shareArea.append($("\n            <div class='tab-shareViewStateSection'>\n                <span class='tab-shareCurrentView tab-shareViewToggle'/><span class='tab-shareOriginalView tab-shareViewToggle'/>\n            </div>"));this.$e().shareStateArea=this.$e().getElementBySelector('.tab-shareViewStateSection');this.$e().shareCurrentView=this.$e().getElementBySelector('.tab-shareCurrentView');this.$e().shareOriginalView=this.$e().getElementBySelector('.tab-shareOriginalView')}this.$e().shareArea.append(L);this.$e().shareArea.append(e);this.$e().shareLinkSection=this.$e().getElementBySelector('.tab-shareLinkSection');this.$e().shareLinkTitle=this.$e().getElementBySelector('.tab-shareLinkTitle');this.$e().shareLinkInput=this.$e().getElementBySelector('.tab-shareLinkInput');this.$e().shareLinkButtons=this.$e().getElementBySelector('.tab-shareLinkButtons');this.$e().shareEmbedTitle=this.$e().getElementBySelector('.tab-shareEmbedTitle');this.$e().shareEmbedInput=this.$e().getElementBySelector('.tab-shareEmbedInput');if(!tsConfig.is_mobile){this.$e().shareLinkInput.attr('readonly','readonly');this.$e().shareLinkInput.click(ss.mkdel(this,function(hB){this.$e().shareLinkInput.focus();this.$e().shareLinkInput.select()}));this.$e().shareEmbedInput.attr('readonly','readonly');this.$e().shareEmbedInput.click(ss.mkdel(this,function(hB){this.$e().shareEmbedInput.focus();this.$e().shareEmbedInput.select()}))}this.$e().shareLinkButtons.empty();var hy=new spiff.IconButton;hy.addClass('tab-shareButton');hy.addClass('tab-shareMailButton');hy.setIcon('tab-shareMailIcon');hy.onClick(ss.mkdel(this,function(hB){this.$h.doSendEmailAction()}));this.$e().shareLinkButtons.append(hy.get_element());if(this.$h.get_shouldShowSocialShareOptions()){var hz=$("<div class='tab-shareButton tab-shareSocialTwitter'/>");hz.click(ss.mkdel(this,function(hB){this.$h.doTwitterShareAction()}));this.$e().shareLinkButtons.append(hz);var hA=$("<div class='tab-shareButton tab-shareSocialFacebook'/>");hA.click(ss.mkdel(this,function(hB){this.$h.doFacebookShareAction()}));this.$e().shareLinkButtons.append(hA)}},$c:function(){this.$e().shareLinkTitle.html(this.$h.get_linkLabel());this.$e().shareEmbedTitle.html(this.$h.get_embedLabel());this.$a();this.$d()},$a:function(){if(!this.$h.get_allowSharingDifferentViews()){return}var e;var L;if(this.$g){var hy=$("<input type='radio' name='state' checked>"+this.$h.get_currentViewLabel()+'</input>');this.$e().shareCurrentView.append(hy);this.$e().shareCurrentView.addClass('narrow');var hz=$("<input type='radio' name='state'>"+this.$h.get_originalViewLabel()+'</input>');this.$e().shareOriginalView.append(hz);this.$e().shareOriginalView.addClass('narrow');this.$e().shareStateArea.height(this.$e().shareStateArea.height()+15);e=new spiff.ToggleButton(hy);L=new spiff.ToggleButton(hz);this.$e().shareStateArea.addClass('narrow')}else{this.$e().shareCurrentView.html(this.$h.get_currentViewLabel());this.$e().shareOriginalView.html(this.$h.get_originalViewLabel());e=new spiff.ToggleButton(this.$e().shareCurrentView);L=new spiff.ToggleButton(this.$e().shareOriginalView)}var hA=new spiff.SelectableGroup;hA.addItem(e);hA.addItem(L);hA.selectItem(e);this.$h.set_shouldShareOriginalView(false);L.add_propertyChanged(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){L.remove_propertyChanged(ss.mkdel(this,this.$b))})));this.disposables.add$1(hA)},$b:function(e,L){if(L.get_propertyName()==='selected'){this.$h.set_shouldShareOriginalView(e.get_selected());this.$d()}},$d:function(){var e=this.$h.generateShareBaseUrl();if(ss.isNullOrEmptyString(e)){this.$e().shareLinkSection.hide()}else{var L=this.$h.generateShareUrl();this.$e().shareLinkInput.val(L);this.$e().shareLinkSection.show()}this.$e().shareEmbedInput.val(this.$h.generateEmbedUrl())},onAddedToDom:function(){this.$c();spiff.Widget.prototype.onAddedToDom.call(this)}},ss.makeGenericType(spiff.BaseView$1,[fK]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[fK])]);ss.initClass(fK,a,{get_viewType:function(){return fJ},get_viewModel:function(){return this},get_allowSharingDifferentViews:function(){if(!tsConfig.isPublic||!tsConfig.statefulURL){return false}if(this.$6()){return true}return tab.ApplicationModel.get_instance().get_workbook().get_isCurrentDashboardModified()},get_shouldShareOriginalView:function(){return this.$7},set_shouldShareOriginalView:function(e){this.$7=e},get_shouldShowSocialShareOptions:function(){return tsConfig.isPublic},get_linkLabel:function(){return tab.Strings.ToolbarSendTitle},get_embedLabel:function(){return tab.Strings.ToolbarEmbedTitle},get_currentViewLabel:function(){return tab.Strings.ToolbarCurrentView},get_originalViewLabel:function(){return tab.Strings.ToolbarOriginalView},$6:function(){return!tab.MiscUtil.isNullOrEmpty(tsConfig.guid)},disposeViewModel:function(){this.dispose()},saveSharedView:function(){if(!this.get_allowSharingDifferentViews()){return}tab.XhrUtil.guid=null;if(tsConfig.statefulURL){var e=this.$4();if(e==='null'||ss.isNullOrUndefined(e)){e=''}tab.CommandController.get().get_legacySession().saveSharedView('',e,function(){})}},generateShareUrl:function(){var e=this.generateShareBaseUrl();e=fK.$0(e,tsConfig.toolbarvis,tsConfig.toolbarvisDefault,'toolbar');e=fK.$0(e,tabBootstrap.ViewerBootstrap.get_instance().get_shouldShowTabs(),tsConfig.showTabsDefault,'tabs');e=fK.$0(e,tsConfig.isPublic&&tsConfig.showViewCount,tsConfig.showViewCountDefault,'display_count');e=fK.$0(e,tab.MiscUtil.sanatizeBoolean(tsConfig.showVizHome),true,'showVizHome');return e},generateShareBaseUrl:function(){var e=tsConfig.requestURI;if(!this.get_shouldShareOriginalView()&&this.get_allowSharingDifferentViews()){var L=tab.XhrUtil.guid;var hy=(tsConfig.single_frame?window.location:window.parent.location);var hz=hy.protocol+'//'+hy.hostname+fK.currentViewPath;if(!tab.MiscUtil.isNullOrEmpty(L)){e=hz+L}else if(!tab.MiscUtil.isNullOrEmpty(tsConfig.guid)){e=hz+tsConfig.guid}}return e},generateEmbedUrl:function(){var e=(tsConfig.single_frame?window.location:window.parent.location);var L=tableau.format.escapeHTML;var hy=this.$4();var hz=tsConfig.embeddedTitle;var hA=this.$5();var hB=tabBootstrap.ViewerBootstrap.get_instance().location.search;var hC='/javascripts/api/viz_v1.js';var hD=tsConfig.repositoryUrl;var hE=tsConfig.site_root;var hF=this.$2();if(hC.indexOf('http://')===-1&&hC.indexOf('https://')===-1){hC=e.protocol+'//'+e.host+hC}var hG="width='"+hF.w+"' height='"+hF.h+"'";var hH="<script type='text/javascript' src='"+hC+"'></script>";var hI="<object class='tableauViz' "+hG+" style='display:none;'>";var hJ=ss.arrayClone(fK.$3);hJ.push('embed');hJ.push('show_tabs');hJ.push('loadOrderID');hI+="<param name='host_url' value='"+L(encodeURIComponent(e.protocol+'//'+e.host+'/'))+"' /> ";hJ.push('host_url');if(!this.get_allowSharingDifferentViews()){hI+="<param name='site_root' value='"+L(hE)+"' />";hI+="<param name='name' value='"+L(hD)+"' />";hJ.push('site_root');hJ.push('name');hI+="<param name='tabs' value='"+(tabBootstrap.ViewerBootstrap.get_instance().get_shouldShowTabs()?'yes':'no')+"' />";hJ.push('tabs')}else{var hK=this.generateShareBaseUrl();hI+="<param name='path' value='"+L(ss.replaceAllString(hK,e.protocol+'//'+e.host+'/',''))+"' /> ";hJ.push('path')}hI+="<param name='toolbar' value='"+(tsConfig.toolbarvis?'yes':'no')+"' />";hJ.push('toolbar');if(tsConfig.isPublic){if(!tab.MiscUtil.isNullOrEmpty(hA)){var hL=ss.replaceAllString(hA,'_rss.png','.png');hI+="<param name='static_image' value='"+L(hL)+"' /> "}hI+="<param name='animate_transition' value='yes' />";hI+="<param name='display_static_image' value='yes' />";hI+="<param name='display_spinner' value='yes' />";hI+="<param name='display_overlay' value='yes' />";hI+="<param name='display_count' value='yes' />";hJ.push('animate_transition');hJ.push('display_static_image');hJ.push('display_spinner');hJ.push('display_overlay');hJ.push('display_count')}if(hB.length>0){var hM=hB.substr(1).split('&');for(var hN=0;hN<hM.length;hN++){var hO=hM[hN].match(new RegExp('^(:|%3A)([^=]+)=(.+)'));var hP;var hQ;if(ss.isValue(hO)&&hO.length===4){hP=hO[2];hQ=hO[3]}else{hP='filter';hQ=hM[hN]}if(!tab.MiscUtil.isNullOrEmpty(hP)&&!ss.contains(hJ,hP)){hI+="<param name='"+L(hP)+"' value='"+L(hQ)+"' />"}}}hI+='</object>';var hR=ss.coalesce(hy,'#');var hS='';if(!tab.MiscUtil.isNullOrEmpty(hA)){hS="<noscript><a href='"+L(hR)+"'>"+"<img alt='"+L(hz)+" ' src='"+L(hA)+"' style='border: none' /></a></noscript>"}var hT=ss.formatString("<div class='tableauPlaceholder' style='width: {0}px; height: {1}px;'>{2}{3}</div>",hF.w,hF.h,hS,hI);var hU=hH+hT;return hU},updateUberPopupViewModel:function(e){},doSendEmailAction:function(){fV.mailTo(this.generateShareUrl(),tsConfig.shareDescription)},doFacebookShareAction:function(){fV.facebookPopup(tsConfig.facebookAppID,this.generateShareUrl(),this.$3(),tsConfig.shareDescription,tsConfig.facebookDescription,fK.$1())},doTwitterShareAction:function(){fV.twitterPopup(this.generateShareUrl(),tsConfig.shareDescription)},$5:function(){var e=tab.XhrUtil.guid;var L=tsConfig.staticImage;if(!ss.isValue(L)){return''}if(!this.get_shouldShareOriginalView()&&this.get_allowSharingDifferentViews()&&ss.isValue(e)){var hy=L.indexOf('/images/')+8;var hz=L.substr(0,hy);L=hz+e.substr(0,2)+'/'+e+'/1_rss.png'}return L},$4:function(){if(!ss.isNullOrEmptyString(tsConfig.primaryContentUrl)){return tsConfig.primaryContentUrl}if(ss.referenceEquals(window.self,window.top)){return null}var e=tableau.util.parseUri(document.referrer);if(!ss.isValue(e)||ss.isValue(e['hostname'])&&ss.referenceEquals(e['hostname'],window.location.hostname)){return null}return document.referrer},$2:function(){var e=tab.ApplicationModel.get_instance().get_workbook().get_outerDashboardSize().w;var L=tab.ApplicationModel.get_instance().get_workbook().get_outerDashboardSize().h;e+=4;L+=4;if(tsConfig.isPublic){L+=65}else if(tsConfig.toolbarvis){L+=32}if(tabBootstrap.ViewerBootstrap.get_instance().get_shouldShowTabs()){L+=26}return{w:e,h:L}},$3:function(){var e=tab.XhrUtil.guid;if(!this.get_shouldShareOriginalView()&&this.get_allowSharingDifferentViews()&&ss.isValue(e)){var L=this.$5();var hy=L.split(String.fromCharCode(47));hy[hy.length-1]='thumb.png';var hz=hy.join('/');hz+='?vizqlid='+tab.CommandController.get().get_legacySession().get_id();return hz}return tsConfig.baseViewThumbLink}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel,spiff.IUberPopupContent]);ss.initClass(fL,a,{get_presModel:function(){return this.get_domRoot().data('PDFSheet')},set_presModel:function(e){this.get_domRoot().data('PDFSheet',e)},get_isSelected:function(){return this.button.hasClass('selected')},set_isSelected:function(e){if(e){this.button.addClass('selected')}else{this.button.removeClass('selected')}this.get_presModel().NPh=e},get_isVisible:function(){return this.get_domRoot().is(':visible')},set_isVisible:function(e){if(e){this.get_domRoot().show()}else{this.get_domRoot().hide()}},selectAndShow:function(e){this.set_isSelected(e);this.set_isVisible(e)},initEventHandlers:function(){spiff.ClickHandler.targetAndClick(this.button,ss.mkdel(this,this.handleSheetToggled))},handleSheetToggled:function(e){if(!this.button.is(':disabled')){this.set_isSelected(!this.get_isSelected())}if(ss.isValue(this.pdfDialog)){this.pdfDialog.$O()}}},spiff.Template,[ss.IDisposable]);ss.initClass(fM,a,{},ss.EventArgs);ss.initClass(fN,a,{createListElement:function(e,L,hy,hz){if(this.shouldUseAllItem()&&L.length>0){bq.addAllItem($(e),this.parent,hy,hz,false,ss.mkdel(cF.filterItem,cF.filterItem.formatDropdownListFilterItemHtml))}{if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy()}this.tiledWidget=gq.createSimpleList(this.parent,L,e,hy,this.get_lineHeight())}{var hA=spiff.EventUtil.bindWithDispose($(e),'click',ss.mkdel(this,this.$e));this.disposables.add$1(hA);var hB=spiff.EventUtil.bindWithDispose($(e),'touchend',ss.mkdel(this,this.$e));this.disposables.add$1(hB);var hC=spiff.EventUtil.bindWithDispose($(e),'keydown',ss.mkdel(this,this.$d));this.disposables.add$1(hC)}dojo.toggleClass(e.parentNode,'CFDropdownNoItems',L.length===0);if(L.length===0){$(e).text(tab.Strings.QuickFilterNoItems)}},$e:function(e){var L=cF.filterItem.getNodeFromEvent(e);if(!!!L){return}var hy=cF.filterItem.getIndex(L);if(hy===-1&&!this.parent.get_oFilter().all){this.parent.doSelectAll(true);this.hideMenu();return}if(hy!==this.currentlySelected){if(hy>=this.parent.get_oFilter().table.actual_size||hy<0){this.hideMenu();return}this.parent.set_stateId(this.parent.get_stateId()+1);var hz=[];hz.push(hy);tab.FilterClientCommands.setCategoricalFilterValuesByIndex(this.parent.get_session().get_visualId(),this.parent.get_field(),'filter-replace',hz)}this.hideMenu()},$d:function(e){switch(e.which){case 40:case 38:{this.$f(cF.filterItem.getNodeFromEvent(e),e.which===38);e.preventDefault();break}case 9:{e.preventDefault();break}case 13:{this.$e(e);break}}},$f:function(e,L){var hy=this.menuNode.find('.FIItem');for(var hz=0,hA=hy.length;hz<hA;hz++){if(ss.referenceEquals(hy.eq(hz).get(0).getAttribute('id'),e.getAttribute('id'))){if(!L&&hz!==hA-1){hy.eq(hz+1).focus()}else if(L&&hz!==0){hy.eq(hz-1).focus()}else if(L&&hz===0){this.menuNode.parent().find('.QueryBox').eq(0).get(0).focus()}return}}}},X,[ss.IDisposable]);ss.initClass(fO,a,{get_fontFamilies:function(){return Array.prototype.slice.call(this.$1)},toSimpleFontList:function(){return fO.$0(this.$1)},$0:function(e){this.$1=[];var L=ss.getEnumerator(e);try{while(L.moveNext()){var hy=L.current();this.$1.push(new tab.FontFamily.$ctor1(hy,[hy]))}}finally{L.dispose()}}});fO.$ctor1.prototype=fO.$ctor2.prototype=fO.prototype;ss.initClass(fQ,a,{get_displayListRenderer:function(){return this.renderer},get_visualListVM:function(){return this.get_viewModel()},performRender:function(){var e=tabBootstrap.MetricsController.createContext('RNDRRG'.toString(),32,null);try{this.get_displayListRenderer().clear();this.get_displayListRenderer().renderVisualList(this.get_visualListVM(),this.$m.get_scene().get_imageDictionary())}finally{if(ss.isValue(e)){e.dispose()}}},postRenderFinalPass:function(){this.get_displayListRenderer().$9(this.get_visualListVM())},onViewModelPropertyChanged:function(e,L){if(L.get_propertyName()==='HoverNode'){var hy={x:-this.get_scrollPos().x,y:-this.get_scrollPos().y};this.invalidateRect(this.get_visualListVM().dirtyRect(hy),true)}else{ss.makeGenericType(hf,[hc]).prototype.onViewModelPropertyChanged.call(this,e,L)}}},ss.makeGenericType(hf,[hc]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[hc]),spiff.IScrollable,dB]);ss.initClass(fR,a,{get_oneLineLayout:function(){return this.$u},$9:function(e){return this.$h[e[0]]!=='false'&&this.$h[e[1]]!=='true'},calculateStyleid:function(){this.styleid=0;if(!this.$9(this.$e)){this.styleid+=4}if(!this.$9(this.$f)){this.styleid+=2}if(!this.$9(this.$d)){this.styleid+=1}if(this.styleid>5){this.styleid=3}},dispose:function(){this.$j.dispose()},destroy:function(){dojo.unsubscribe(this.$z);dojo.unsubscribe(this.$A);this.$4();this.dispose();if(ss.isValue(this.$D)){this.$D.domNode.parentNode.removeChild(this.$D.domNode);this.$D=null}if(ss.isValue(this.slider)&&typeof(this.slider['destroy'])==='function'){this.slider.destroy()}if(ss.isValue(this.$y)&&typeof(this.$y['destroy'])==='function'){this.$y.destroy()}},instantiateFromDomain:function(e,L){var hy=[];var hz=e.length;for(var hA=0;hA<hz;hA++){hy[hA]={d:e[hA],s:ss.referenceEquals(L,e[hA]),t:[]}}this.instantiateFromTuples(hy,null)},instantiateFromTuples:function(e,L){var hy=-1;var hz=tab.Strings.QuickFilterUnknown;var hA=null;if(e.length>0){var hB=e.length;for(var hC=0;hC<hB;hC++){if(e[hC].s===true&&!this.$p){if(hy>-1){hz=tab.Strings.QuickFilterMultipleValues}else{hy=hC;hz=this.$n(hC)}}}}if(hy<0){hy=0;if(ss.isValue(L)){hz=L}}if(this.$x){hA=this.$m(hy)}this.instantiate$1(e.length,hy,hz,hA)},instantiate:function(e,L,hy){this.instantiate$1(e,L,hy,null)},instantiate$1:function(e,L,hy,hz){var hA=null;this.currentlySelected=L;this.calculateStyleid();if(this.$9(this.$e)){this.readout=document.createElement('div');dojo.addClass(this.readout,'sliderTextReadout');dojo.addClass(this.readout,'tab-ctrl-formatted-widget');dojo.addClass(this.readout,'tab-ctrl-formatted-fixedsize');this.$B=document.createElement('div');dojo.addClass(this.$B,'sliderText');this.$B.innerHTML=tableau.format.escapeHTML(hy);if(this.$x){this.$l=document.createElement('div');dojo.addClass(this.$l,'facet');this.$l.innerHTML=tableau.format.escapeHTML(hz);this.readout.appendChild(this.$l)}this.readout.appendChild(this.$B);this.div.appendChild(this.readout)}if(this.styleid===3){return}var hB=document.createElement('div');if(this.$9(this.$f)){hA=document.createElement('div');hB.appendChild(hA)}this.div.appendChild(hB);if(!ss.isValue(e)||ss.unbox(e)<1){e=1}this.$q=!isFinite(ss.unbox(e));if(this.$9(this.$f)&&ss.Nullable$1.lt(e,1200)&&this.$9(this.$g)){var hC=ss.mkdict(['count',e]);this.$y=new dijit.form.HorizontalRule(hC,hA)}var hD={};hD.templateString="<div class='dijit dijitReset'><div class='dijitReset tableauSlider' dojoAttachPoint='tableauSlider'><table class='dijit dijitReset' cellspacing='0' cellpadding='0' border='0' rules='none'><tr class='dijitReset'><td class='dijitReset'></td><td dojoAttachPoint='containerNode,topDecoration' class='dijitReset' style='text-align:center;width:100%;'></td><td class='dijitReset'></td></tr><tr class='dijitReset'><td class='dijitReset'><div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper' dojoAttachEvent='onclick:_onClkDecBumper'></div></td><td class='dijitReset'><input dojoAttachPoint='valueNode' type='hidden' name='${name}'><div class='dijitReset dijitSliderBarContainerH' waiRole='presentation' dojoAttachPoint='sliderBarContainer'><div waiRole='presentation' dojoAttachPoint='progressBar' class='dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH' dojoAttachEvent='onclick:_onBarClick'><div class='dijitSliderMoveable dijitSliderMoveableH'><div dojoAttachPoint='sliderHandle,focusNode' class='dijitSliderImageHandle dijitSliderImageHandleH' dojoAttachEvent='onmousedown:_onHandleClick' waiRole='slider' valuemin='${minimum}' valuemax='${maximum}'></div></div></div><div waiRole='presentation' dojoAttachPoint='remainingBar' class='dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH' dojoAttachEvent='onclick:_onBarClick'></div></div></td><td class='dijitReset'><div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper' dojoAttachEvent='onclick:_onClkIncBumper'></div></td></tr><tr class='dijitReset'><td class='dijitReset'></td><td dojoAttachPoint='containerNode,bottomDecoration' class='dijitReset'></td><td class='dijitReset'></td></tr></table></div><div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowDec' style='display:none' dojoAttachPoint='decrementButton'><div class='dijitSliderDecrementIconH' tabIndex='-1'><span class='dijitSliderButtonInner'>-</span></div></div><div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowInc' style='display:none' dojoAttachPoint='incrementButton'><div class='dijitSliderIncrementIconH' tabIndex='-1'><span class='dijitSliderButtonInner'>+</span></div></div></div>";hD.onChange=ss.mkdel(this,this.$0);hD.value=this.currentlySelected;hD.slideDuration=0;hD.intermediateChanges=true;hD.showButtons=this.$9(this.$d);hD.pageIncrement=1;if(isFinite(ss.unbox(e))){hD.minimum=0;hD.maximum=ss.unbox(e)-1;hD.discreteValues=ss.unbox(e)}this.slider=new dijit.form.HorizontalSlider(hD,hB);this.$z=dojo.subscribe('/dnd/move/start',ss.mkdel(this,this.startDrag));this.$A=dojo.subscribe('/dnd/move/stop',ss.mkdel(this,this.stopDrag));this.slider.startup();if(ss.isValue(this.$y)){this.$y.startup()}this.$w=false;if(!this.$9(this.$e)){this.$E=document.createElement('div');this.slider.sliderHandle.appendChild(this.$E);var hE=dijit._MasterTooltip.prototype;hE['templateString']="<div class='dijitTooltip dijitTooltipLeft' id='dojoTooltip'><div class='dijitTooltipContainer' dojoAttachpoint='coreArea'><div class='dijitTooltipContents' dojoAttachPoint='containerNode' waiRole='alert'></div></div><div class='dijitTooltipConnector'></div></div>";this.$D=new dijit._MasterTooltip;this.$D.dojoOrient=this.$D.orient;this.$D.orient=ss.mkdel(this,function(hG,hH,hI,hJ){this.$D.dojoOrient(hG,hH,hI,hJ);dojo.addClass(this.$D.domNode,'sliderThumbTooltip')});var hF=$(this.slider.sliderHandle);this.$j.add$1(spiff.EventUtil.bindWithDispose(hF,'mouseenter',ss.mkdel(this,this.$6)));this.$j.add$1(spiff.EventUtil.bindWithDispose(hF,'mouseleave',ss.mkdel(this,this.$5)))}this.$s=this.slider.decrementButton.childNodes[0];this.$v=this.slider.incrementButton.childNodes[0];this.$b();this.$3()},$b:function(){this.$7(this.$s,'Left',this.currentlySelected===0);this.$7(this.$v,'Right',this.currentlySelected===this.slider.maximum)},$7:function(e,L,hy){dojo.removeClass(e,'cp'+L+'Arrow'+(hy?'Black':'Grey'));dojo.addClass(e,'cp'+L+'Arrow'+(hy?'Grey':'Black'))},refreshSliderMarksForIE:function(){if(dojo.isIE<=7){if(ss.isValue(this.$y)){this.$y.domNode.className=this.$y.domNode.className+' '}}},setNewState:function(e){this.currentlySelected=e;this.slider._setValueAttr(this.currentlySelected);this.refreshSliderMarksForIE()},startDrag:function(e){if(ss.isValue(e)&&ss.referenceEquals(e.node,this.slider.sliderHandle)){this.$r=true;if(this.$C>0){this.$4()}}},stopDrag:function(e){if(ss.isValue(e)&&ss.referenceEquals(e.node,this.slider.sliderHandle)){this.$r=false;if(this.$C>0){this.$4()}this.$8();this.$1()}},$6:function(e){if(!this.$9(this.$e)){if(ss.isValue(this.$F)){window.clearTimeout(ss.unbox(this.$F));this.$F=null}this.$w=true;this.$F=window.setTimeout(ss.mkdel(this,this.$1),50)}},$5:function(e){if(ss.isValue(this.$F)){window.clearTimeout(ss.unbox(this.$F));this.$F=null}if(ss.isValue(this.$D)){this.$D.hide(this.$E)}this.$w=false},$1:function(){if(!this.$9(this.$e)){this.$D.hide(this.$E);if(this.$w||this.$r){var e=this.$i;if(ss.isNullOrUndefined(e)){e=ss.Int32.trunc(this.currentlySelected)}var L=e;var hy=this.$n(L);this.$D.show(hy,this.$E,['above','below'])}}},$2:function(){var e;if(!ss.isValue(this.$i)||isNaN(ss.unbox(this.$i))){return 0}if(this.$q){e=ss.unbox(this.$i)}else{e=parseInt(ss.unbox(this.$i).toString(),10)}if(e<0){e=0}return e},$c:function(){if(ss.isNullOrUndefined(this.$i)||ss.isNullOrUndefined(this.currentlySelected)||this.$i===this.currentlySelected){return}var e=this.$2();if(ss.isValue(this.$k)){this.$k(e)}this.$i=e;this.currentlySelected=e;this.$b()},updateReadout:function(e){this.updateReadout$1(e,null)},updateReadout$1:function(e,L){if(this.styleid<4){this.$B.innerHTML=e;if(this.$x){this.$l.innerHTML=L}}},$0:function(e){if(isNaN(e)){return}var L=(this.$x?this.$m(e):null);this.updateReadout$1(this.$n(e),L);this.$i=e;if(ss.isValue(this.$t)){this.$t()}if(!this.$r){if(this.$C>0){this.$4()}this.$8()}else if(this.$C>0){this.$4()}this.$1()},$3:function(){if(!this.$9(this.$d)){dojo.addClass(this.div,'HideArrows')}if(!this.$9(this.$f)){dojo.addClass(this.div,'HideSlider')}if(this.styleid>3){dojo.style(this.div,'height','15px')}},$8:function(){this.$C=window.setTimeout(ss.mkdel(this,this.$a),500)},$4:function(){if(this.$C>0){window.clearTimeout(this.$C);this.$C=-1}},$a:function(){this.$c()},layout:function(){var e=0;var L=34;this.$u=false;dojo.style(this.div,'overflow','hidden');var hy=dojo.marginBox(this.div).h;var hz=dojo.style(this.div,'width')-5;dojo.style(this.div,'overflow','');if(hz<L){return}if(ss.isValue(this.readout)){dojo.style(this.readout,'width','');dojo.style(this.readout,'float','none')}if(ss.isValue(this.slider)){dojo.style(this.slider.tableauSlider,'width','');dojo.style(this.slider.tableauSlider,'float','none')}if(ss.isValue(this.$y)&&this.$y.count*4>hz){dojo.style(this.$y.domNode,'display','none')}if(hy<38&&this.styleid<=1){var hA=((this.styleid===0)?(hz-L):hz);hA=Math.floor((hA-14)/2);dojo.style(this.readout,'width',hA+'px');dojo.style(this.slider.tableauSlider,'width',hA+'px');dojo.style(this.readout,'float','left');dojo.style(this.slider.tableauSlider,'float','left');this.$u=true}else if(this.styleid===0||this.styleid===4){dojo.style(this.slider.tableauSlider,'width',hz-L+'px')}else if(this.styleid===1||this.styleid===5){dojo.style(this.slider.tableauSlider,'width',hz+'px')}else if(this.styleid===2){dojo.style(this.readout,'width',hz-L-4+'px')}if(this.$9(this.$d)){if(this.styleid===2||this.styleid===4){e=2}if(this.styleid===0){e=(this.$u?2:21)}e+=this.$o();dojo.style(this.slider.incrementButton,'top',e+'px');dojo.style(this.slider.decrementButton,'top',e+'px')}}},null,[dC,ss.IDisposable]);ss.initClass(fS,a,{instantiate:function(e,L,hy){this.$3=e;var hz=cF.isAllOrAllChecked(this.parent);if(this.shouldUseAllItem()){this.$3=cF.addAllItemToTuples(this.$3,hz,hy)}else{hz=false}this.$4=new tableau.base.widget.ui.Slider(this.div,this.attributes,hz,ss.mkdel(this,this.updateViz),ss.mkdel(this.parent,this.parent.getTitleOffset),ss.mkdel(this,this.getCurrentText),ss.mkdel(this,this.onIntermediateChange),ss.mkdel(this,this.getCurrentFacet),this.parent.get_oFilter().showFacets);this.$4.instantiateFromTuples(this.$3,this.getSummaryText())},destroy:function(){this.$4.destroy()},layout:function(e,L){this.inherited(arguments);this.$4.layout()},showOrHide:function(e,L){dojo.style(e,'display',(L?'':'none'))},onSmallSearchUI:function(e,L){var hy=!e;var hz=this.$4;if(hz.styleid===2||hz.styleid===4){this.showOrHide(hz.slider.decrementButton,hy);this.showOrHide(hz.slider.incrementButton,hy)}if(hz.styleid===3){this.showOrHide(hz.div,hy);dojo.style(L,'marginBottom','2px')}else if(hz.styleid<3){this.showOrHide(hz.readout,hy);if(hz.get_oneLineLayout()){this.showOrHide(hz.div,hy)}}else{this.showOrHide(hz.slider.tableauSlider,hy)}},getRealIndex:function(e){if(typeof(e)==='undefined'||isNaN(e)){return 0}var L=parseInt(e.toString(),10);if(L<0){L=0}return L},updateViz:function(e){var L=new Object;L.schema=this.parent.get_oFilter().table.schema;L.tuples=[];var hy=this.getRealIndex(e);var hz=new Array(0);if(this.shouldUseAllItem()&&hy===0){this.parent.doSelectAll(true);return}this.$3[hy].s=true;L.tuples.push(this.$3[hy]);this.parent.set_stateId(this.parent.get_stateId()+1);var hA=this.$3[hy].d||this.$3[hy].t[0].v;hz.push(hA);tab.FilterClientCommands.setCategoricalFilterValues(this.parent.get_session().get_visualId(),this.parent.get_field(),'filter-replace',hz,null)},onIntermediateChange:function(){if(this.parent.get_searchWidget().get_isVisible()){this.parent.get_searchWidget().toggleUI()}},getCurrentText:function(e){var L=this.getRealIndex(e);var hy=this.$3[L];return tableau.format.formatTupleDisplayName(hy,true,this.parent.get_oFilter().role)},getCurrentFacet:function(e){var L=this.getRealIndex(e);var hy=this.$3[L];return tableau.format.formatTupleDisplayFacet(hy,true,this.parent.get_oFilter().role)}},Z,[ss.IDisposable]);ss.initClass(fT,a,{get_applyDelay:function(){window.alert(tab.Strings.noLoc('Bad call of ApplyDelay on SmallSearchWidget'));return 0},startup:function(){this.inherited(arguments);var e=new Object;e.store=null;e.autoComplete=false;e.hasDownArrow=false;e.highlightMatch='none';e.searchDelay=this.searchDelay;e.onChange=ss.mkdel(this,this.applyChanges);e.onKeyDown=ss.mkdel(this,this.onQueryBoxKeyDown);this.autocompleter=new dijit.form.ComboBox(e,this.domAutocompleter);this.autocompleter.startup();this.autocompleter._getQueryString=function(hy){var hz=hy.length;if(hz<1){return''}if(hy.charCodeAt(0)===39&&hy.charCodeAt(hz-1)===39){return hy.substr(1,hz-2)}var hA=hy;if(hA.length>1&&hA.charCodeAt(0)===92&&hA.charCodeAt(1)===42){hA='*'+hA.substr(2)}if(hA.length>1&&hA.charCodeAt(hA.length-2)===92&&hA.charCodeAt(hA.length-1)===42){hA=hA.substr(0,hA.length-2)+'*'}if(hA.charCodeAt(0)!==42&&hA.charCodeAt(hA.length-1)!==42){hA='*'+hA+'*'}return hA};var L=this.NO_MATCHES;this.autocompleter.DOJO_openResultList=this.autocompleter._openResultList;this.autocompleter._openResultList=ss.mkdel(this,function(hy,hz){this.resultCount=hy.length;this.autocompleter.DOJO_openResultList(hy,hz);if(!!!hy.length){this.autocompleter.tooltipPosition=['above','below'];this.autocompleter.displayMessage(L)}else{dijit.hideTooltip(this.autocompleter.domNode)}if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()>=11){this.focusQueryBox()}})},getOnQueryBoxKeyDownBehavior:function(e){var L;L=this.inherited(arguments);switch(e.keyCode){case 13:{if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()>=9&&tab.BrowserSupport.get_browserVersion()<=10){this.applyChanges($(this.domNode).find('input').val())}L.functionToCall=null;L.stopEvent=false;break}case 40:{L.functionToCall=null;L.stopEvent=false;if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()>=11){var hy=this.$1();hy.attr('tabindex','1').keydown(ss.mkdel(this,this.$2));hy.eq(0).get(0).focus();var hz=$(this.domNode.parentElement);hz.find('input').eq(0).val(hy.eq(0).html());L.stopEvent=true}if(!$(e.target).hasClass('dijitReset')){L.stopEvent=true}break}case 37:case 39:case 38:{L.functionToCall=null;L.stopEvent=false;break}default:{L.functionToCall=ss.mkdel(this,this.onSmallSearchKeyDown);L.stopEvent=false;break}}return L},onSmallSearchKeyDown:function(e){this.autocompleter._startSearchFromInput()},$2:function(e){switch(e.which){case 40:case 38:{this.$3(e.currentTarget,e.which===38);e.preventDefault();break}case 9:{e.preventDefault();break}case 13:{this.applyChanges($(this.domNode).find('input').val());break}}},$3:function(e,L){var hy=this.$1();for(var hz=0,hA=hy.length;hz<hA;hz++){if(ss.referenceEquals(hy.eq(hz).get(0).getAttribute('id'),e.getAttribute('id'))){var hB=null;if(!L&&hz!==hA-1){hB=hy.eq(hz+1)}else if(L&&hz!==0){hB=hy.eq(hz-1)}else if(L&&hz===0){var hC=$(this.domNode.parentElement);hC.find('input').eq(0).get(0).focus();return}if(ss.isValue(hB)){hB.focus();var hD=$(this.domNode.parentElement);hD.find('input').eq(0).val(hB.html())}return}}},$1:function(){return $('.dijitPopup .dijitMenu li.dijitReset')},getDataStore:function(){var e;var L=[];var hy;var hz=this.get_qf().get_oFilter().table.tuples;for(e=0,hy=hz.length;e<hy;e++){L.push(ss.mkdict(['name',this.formatTuple(hz[e])]))}return new dojo.data.ItemFileWriteStore(ss.mkdict(['data',ss.mkdict(['items',L])]))},destroy:function(e){this.domSearchBox.innerHTML='';this.autocompleter.destroy();this.autocompleter=null;this.inherited(arguments)},focusQueryBox:function(){this.autocompleter.focus()},blurQueryBox:function(){this.autocompleter._onBlur()},getQuery:function(){return this.autocompleter.attr('value')},setQuery:function(e){this.autocompleter.attr('value',e)},fixQueryWidth:function(){var e=dojo.marginBox(this.domNode).w;if(e>25){var L=ss.mkdict(['w',e-25]);dojo.marginBox(this.autocompleter.comboNode,L);dojo.marginBox(this.autocompleter.comboNode.firstChild,L);dojo.marginBox(this.autocompleter.textbox,L)}dojo.style(this.autocompleter.comboNode,'float','left')},showUI:function(e){if(this.get_isVisible()){return}fC.prototype.showUI.call(this,e);this.get_qf().get_modeContents().onSmallSearchUI(true,this.domNode)},hideUI:function(){if(!this.get_isVisible()){return}fC.prototype.hideUI.call(this);this.get_qf().get_modeContents().onSmallSearchUI(false,this.domNode)},layout:function(e){this.fixQueryWidth()},updateSearch:function(){this.autocompleter.store=this.getDataStore();this.get_qf().get_modeContents().onSmallSearchUI(this.get_isVisible(),this.domNode)},applyChanges:function(e){if(!!!e){return}var L=[];var hy=this.get_qf().get_oFilter().table.tuples;for(var hz=0,hA=hy.length;hz<hA;hz++){if(ss.referenceEquals(e,this.formatTuple(hy[hz]))){L.push(hy[hz]);hy[hz].s=true}else if(hy[hz].s){delete hy[hz]['s']}}if(L.length!==0){this.get_qf().updateStateFromSearch(null);var hB=L[0].d||L[0].t[0].v;var hC=[hB];tab.FilterClientCommands.setCategoricalFilterValues(this.get_qf().get_session().get_visualId(),this.get_qf().get_field(),'filter-replace',hC,null);this.clearSearch(false,true);this.onXButtonClick(null)}}},fC);ss.initClass(fU,a,{add_onMouseStop:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_onMouseStop:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},get_serverMarkBounds:function(){return this.$8},set_serverMarkBounds:function(e){this.$8=e},attach:function(){this.$a.add_showed(ss.mkdel(this,this.$3));this.$a.add_closed(ss.mkdel(this,this.$2));this.$a.add_disposed(ss.mkdel(this,this.$4))},detach:function(){this.$5.dispose();if(ss.isValue(this.$a)){this.$a.remove_showed(ss.mkdel(this,this.$3));this.$a.remove_closed(ss.mkdel(this,this.$2));this.$a.remove_disposed(ss.mkdel(this,this.$4))}},dispose:function(){this.detach()},disposeTooltip:function(){this.dispose()},shownTooltipIsStatic:function(){return false},isHoverAllowed:function(e){return true},shouldShowCommandButtons:function(){return false},handleUbertipMenuToggle:function(e){},handleUbertipMenuClose:function(){},hoverOverObject:function(e,L,hy,hz){if(hy){this.$a.close()}else if(ss.isValue(hz)&&hz&&this.$a.get_isShown()){this.$a.move(e)}else{this.showTooltip(e)}},hoverOverWhitespace:function(e){if(this.$a.get_isShown()){this.$a.close()}},multiSelectComplete:function(e){this.showTooltip(e)},singleSelectComplete:function(e){this.showTooltip(e)},onPanningOrDragging:function(){if(this.$a.get_isShown()){this.$a.close()}},onScroll:function(){if(this.$a.get_isShown()){this.$a.close()}},mouseDown:function(e,L){},showTooltip:function(e){if(this.$a.get_isShown()&&tab.PointUtil.equals(this.$a.get_location(),e)){return}this.$a.show(this.$a.get_body().children()[0],e)},$3:function(e,L){this.$0();this.$1({x:L.origX,y:L.origY});this.$9=new Date},$2:function(){this.$a.get_element().unbind('.SmoothTooltipBehavior');this.$9=null;this.$0()},onMouseMove:function(e){var L=this.$a.get_lastLocation()||{x:0,y:0};var hy={x:e.pageX,y:e.pageY};this.$a.set_lastLocation(hy);this.$a.move(hy);var hz=tab.PointUtil.distance(L,this.$a.get_lastLocation());if(hz>0){if(ss.isValue(this.$7)){window.clearTimeout(ss.unbox(this.$7));this.$7=null}this.$1(hy);if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(!ss.isValue(this.$8)||!tab.RectXYUtil.inRect(this.$8,{x:e.offsetX+e.target.offsetLeft,y:e.offsetY+e.target.offsetTop})){this.$a.close()}}}},$1:function(e){if(ss.isValue(this.$7)){window.clearTimeout(ss.unbox(this.$7));this.$7=null}this.$7=window.setTimeout(ss.mkdel(this,function(){if(ss.isValue(this.$1$1)){this.$1$1(e)}}),this.$6)},$4:function(e,L){this.dispose()},$0:function(){if(ss.isValue(this.$7)){window.clearTimeout(ss.unbox(this.$7));this.$7=null}}},null,[dJ,ss.IDisposable]);ss.initClass(fV,a,{});ss.initClass(fW,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(fX,a,{get_stepperViewModel:function(){return this.$d},set_stepperViewModel:function(e){this.$d=e},tabIndex:function(e){this.dom.valueText.attr('tabindex',e.toString())},$9:function(e){if(!this.get_stepperViewModel().get_isEnabled()){return}var L=parseInt(this.dom.valueText.val());if(ss.isValue(L)&&!isNaN(L)){var hy=L+e;if(this.get_stepperViewModel().isValueWithinRange(hy)){this.dom.valueText.val(hy.toString());this.$c(hy)}}},commitStepValueText:function(){if(!this.get_stepperViewModel().get_isEnabled()){return}var e=parseInt(this.dom.valueText.val());if(this.get_stepperViewModel().get_value()===e){return}else if(ss.isValue(e)&&!isNaN(e)){this.get_stepperViewModel().set_value(e)}},$a:function(e){if(!this.get_stepperViewModel().get_isEnabled()){return}if(e.which===13){this.commitStepValueText()}},$b:function(){if(this.get_stepperViewModel().get_isEnabled()){this.dom.valueText.removeAttr('disabled')}else{this.dom.valueText.attr('disabled','disabled')}},onViewModelPropertyChanged:function(e,L){ss.makeGenericType(spiff.BaseView$1,[fY]).prototype.onViewModelPropertyChanged.call(this,e,L);if(L.get_propertyName()==='Value'){this.dom.valueText.val(this.get_stepperViewModel().get_value().toString())}else if(L.get_propertyName()==='IsEnabled'){this.$b()}else if(L.get_propertyName()==='IsIncrementEnabled'){this.dom.incrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isIncrementEnabled())}else if(L.get_propertyName()==='IsDecrementEnabled'){this.dom.decrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isDecrementEnabled())}}},ss.makeGenericType(spiff.BaseView$1,[fY]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[fY])]);ss.initClass(fY,a,{get_isEnabled:function(){return this.$4},set_isEnabled:function(e){if(this.$4!==e){this.$4=e;if(!this.$4){this.set_isIncrementEnabled(false);this.set_isDecrementEnabled(false)}else{this.set_value((ss.isValue(this.get_value())?this.get_value():this.get_initValue()));this.set_isIncrementEnabled(this.get_value()<this.get_max());this.set_isDecrementEnabled(this.get_value()>this.get_min())}this.notifyPropertyChanged('IsEnabled')}},get_isIncrementEnabled:function(){return this.$5},set_isIncrementEnabled:function(e){if(this.$5!==e){this.$5=e;this.notifyPropertyChanged('IsIncrementEnabled')}},get_isDecrementEnabled:function(){return this.$3},set_isDecrementEnabled:function(e){if(this.$3!==e){this.$3=e;this.notifyPropertyChanged('IsDecrementEnabled')}},get_min:function(){return this.$7},get_max:function(){return this.$6},get_initValue:function(){return this.$2},get_step:function(){return this.$8},get_value:function(){return this.$9},set_value:function(e){if(!this.$4){return}if(this.$9!==e){if(ss.isValue(e)&&!isNaN(e)&&this.isValueWithinRange(e)){this.$9=e;this.set_isIncrementEnabled(this.$9<this.get_max());this.set_isDecrementEnabled(this.$9>this.get_min())}this.notifyPropertyChanged('Value')}},isValueWithinRange:function(e){return e>=this.$7&&e<=this.$6},increment:function(){this.set_value(this.get_value()+this.get_step())},decrement:function(){this.set_value(this.get_value()-this.get_step())}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(fZ,a,{get_dom:function(){return this.get_template()},dispose:function(){this.$o.remove_schedulesChanged(ss.mkdel(this,this.handleSchedulesUpdated));ss.makeGenericType(spiff.BaseView$1,[ga]).prototype.dispose.call(this)},handleSchedulesUpdated:function(){this.$a();this.$j()},$e:function(){var e=new spiff.ToggleButton(this.get_dom().subscribeThisView);var L=new spiff.ToggleButton(this.get_dom().subscribeAllViews);this.get_dom().subscribeThisView[0].tabIndex=0;this.get_dom().subscribeAllViews[0].tabIndex=0;this.get_dom().subscribeThisView.text(tab.Strings.ToolbarSubscribeThisView);this.get_dom().subscribeAllViews.text(tab.Strings.ToolbarSubscribeAllView);var hy=new spiff.SelectableGroup;hy.addItem(e);hy.addItem(L);hy.selectItem(e);this.$o.set_shouldSubscribeAllViews(false);L.add_propertyChanged(ss.mkdel(this,this.$i));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){L.remove_propertyChanged(ss.mkdel(this,this.$i))})));this.disposables.add$1(hy)},$a:function(){this.get_dom().subscribeScheduleDropdown.empty();this.$l=this.get_viewModel().generateScheduleViewModel();this.$l.set_theme(2);this.$l.set_menuTheme(this.menuTheme);var e=spiff.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$l]);e.get_element()[0].tabIndex=0;this.get_dom().subscribeScheduleDropdown.append($(ss.formatString('<label>{0}</label>',tab.Strings.ToolbarSubscribeSchedule)).append(e.get_element()))},$b:function(){if(!ss.isNullOrEmptyString(this.get_viewModel().get_email())){this.get_dom().subscribeEmail.hide()}else{if(ss.isValue(this.$k)){this.$k.remove_propertyChanged(ss.mkdel(this,this.$f));this.$k.remove_enterKeyPressed(ss.mkdel(this,this.$g))}this.$k=spiff.TextInputView.newTextInputView('',null,tab.Strings.ToolbarSubscribeEmailPlaceholder);this.$k.get_inputElement().attr('maxlength',ga.maxSubscriptionEmailLength.toString());this.$k.add_propertyChanged(ss.mkdel(this,this.$f));this.$k.add_enterKeyPressed(ss.mkdel(this,this.$g));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$k.remove_propertyChanged(ss.mkdel(this,this.$f))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$k.remove_enterKeyPressed(ss.mkdel(this,this.$g))})));this.get_dom().subscribeEmail.append(this.$k.get_element())}},$c:function(){if(ss.isValue(this.$m)){this.$m.remove_propertyChanged(ss.mkdel(this,this.$f));this.$m.remove_enterKeyPressed(ss.mkdel(this,this.$g))}this.$m=spiff.TextInputView.newTextInputView(this.get_viewModel().get_defaultSubject(),null,tab.Strings.ToolbarSubscribeSubjectPlaceholder);this.$m.get_inputElement().attr('maxlength',ga.maxSubscriptionSubjectLength.toString());this.$m.add_propertyChanged(ss.mkdel(this,this.$f));this.$m.add_enterKeyPressed(ss.mkdel(this,this.$g));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$m.remove_propertyChanged(ss.mkdel(this,this.$f))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$m.remove_enterKeyPressed(ss.mkdel(this,this.$g))})));this.get_dom().subscribeSubject.append(this.$m.get_element())},$g:function(){if(!this.$n.get_disabled()){this.$h()}},$f:function(e,L){if(ss.equalsT(L.get_propertyName(),'text')){this.$j()}},$d:function(){this.$n=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$h),tab.Strings.ToolbarSubscribeSubmitButton,null,0,0);this.get_dom().subscribeButton.append(this.$n.get_element())},$j:function(){var e=!this.get_viewModel().shouldSubscribeButtonBeEnabled(this.$k,this.$m);if(ss.isValue(this.$n)&&this.$n.get_disabled()!==e){var L=(e?tab.Strings.ToolbarSubscribeSubmitDisabledTitle:'');this.$n.get_element().prop('title',L);this.$n.set_disabled(e)}},$h:function(){if(ss.isNullOrEmptyString(this.get_viewModel().get_email())){var e=this.$k.get_text();var L=ss.mkdel(this,function(hz){var hA=((hz===10011)?tab.Strings.SubscribeInvalidAddress:tab.Strings.SubscribeFailure);this.get_dom().subscribeEmail.append($('<div>').addClass('tab-SubscribeError').text(hA))});var hy=ss.mkdel(this,function(){this.get_viewModel().set_email(e);this.get_viewModel().createSubscription(this.$m.get_text(),this.$l.get_selectedItem().get_data())});tab.WorkgroupServerCommands.setUserEmail(e,hy,L)}else{this.get_viewModel().createSubscription(this.$m.get_text(),this.$l.get_selectedItem().get_data())}},$i:function(e,L){if(L.get_propertyName()==='selected'){this.$o.set_shouldSubscribeAllViews(e.get_selected())}},$9:function(){this.$e();this.$a();this.$b();this.$c();this.$d();this.$j()}},ss.makeGenericType(spiff.BaseView$1,[ga]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[ga])]);ss.initClass(ga,a,{add_schedulesChanged:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_schedulesChanged:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_subscribeSuccess:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_subscribeSuccess:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_viewType:function(){return fZ},get_viewModel:function(){return this},get_shouldSubscribeAllViews:function(){return this.$2$3},set_shouldSubscribeAllViews:function(e){this.$2$3=e},get_defaultSubject:function(){return tsConfig.current_sheet_name},get_email:function(){return this.$2$4},set_email:function(e){this.$2$4=e},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(e){},shouldSubscribeButtonBeEnabled:function(e,L){return this.$3.length>0&&ss.isValue(L)&&L.get_text().trim().length>0&&(!ss.isNullOrEmptyString(this.get_email())||this.$2(e))},generateScheduleViewModel:function(){var e=new spiff.ComboBoxViewModel;for(var L=0;L<this.$3.length;L++){var hy=this.$3[L];e.addItem(new spiff.ComboBoxItem(null,hy.get_name(),hy,null))}if(e.get_items().length>0){e.set_selectedItem(e.get_items()[0])}return e},createSubscription:function(e,L){var hy=ss.mkdel(this,function(){if(ss.isValue(this.$2$2)){this.$2$2()}eu.showNotification(tab.Strings.SubscribeSuccess)});var hz=function(){eu.showNotification(tab.Strings.SubscribeFailure)};tab.WorkgroupServerCommands.createSubscription(e,this.get_shouldSubscribeAllViews(),L,hy,hz)},$2:function(e){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(e.get_text())){return false}var L=new RegExp('^[^\\s"(),:;<>@[\\]]+@([-a-z0-9]+\\.)+[a-z0-9]{2,}$','i');return L.test(e.get_text())}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel,spiff.IUberPopupContent]);ss.initClass(gb,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(gc,a,{startup:function(){dojo.query('button',this._leftBtn.domNode).addClass('tnLeftButton');dojo.query('button',this._rightBtn.domNode).addClass('tnRightButton');dojo.query('button',this._menuBtn.domNode).addClass('tnMenuButton');this.containerNode=this.domNode;this.inherited(arguments)},destroy:function(){dojo.forEach(this.$h,dojo.unsubscribe);tab.MiscUtil.dispose$1(this.$j);for(var e=0;e<this.$f.length;e++){var L=this.$f[e];L.destroyRecursive()}this.inherited(arguments)},layout:function(e){if(this.$i.length===0){return}var L=dojo.contentBox(this._containerNode.domNode);var hy=this.$e(L.w);this._buttons.style('display',(hy?'':'none'));this._innerWrapper.layout(e);dojo.style(this._containerNode.domNode,'top','-1px');if(!hy){this._containerNode.domNode.scrollLeft=0}this.$7(this.currentTab);this.$d();if(tabBootstrap.ViewerBootstrap.get_instance().get_shouldShowTabs()){$('.tabbedNavigationWrapper').css('visibility','visible');$('.tabbedNavigationOuterWrapper').css('display','')}else{$('.tabbedNavigationOuterWrapper').css('display','none')}},postCreate:function(){this.$h.push(dojo.subscribe('onTabSelect',ss.mkdel(this,this.$a)));this.$h.push(dojo.subscribe('newLayoutId',ss.mkdel(this,this.$8)));this.inherited(arguments);this.$0();this.$g=[];for(var e=0;e<this.$i.length;e++){var L=this.$i[e];this.addTab(L,e,tsConfig.repository_urls[e]);this.addToMenu(this.$g,L)}this._buttons=dojo.query('.dijitButton',this.domNode);this.layout(null)},chooseTabByName:function(e){if(ss.isNullOrUndefined(e)){return}var L=this.$3(e);if(ss.isValue(L)){this.chooseTab(L)}},chooseTab:function(e){if(ss.isNullOrUndefined(e)){return}this.$1(e)},addTab:function(e,L,hy){var hz=dojo.doc.createElement('span');this._scrollNode.appendChild(hz);var hA=this.baseClass+'_tab_'+L;var hB=new Object;hB.id=hA;hB.label=tableau.format.escapeHTML(e);hB.value=e;hB.showLabel=true;hB.repository_url=hy;hB.onClick=ss.mkdel(this,function(){var hD=dijit.byId(hA);this.chooseTab(hD)});var hC=new dijit.layout._TabButton(hB,hz);this.$f.push(hC)},addToMenu:function(e,L){var hy=spiff.MenuItem.newActionItem(L,ss.mkdel(this,function(){this.chooseTabByName(L)}));e.push(hy)},resize$1:function(e){this._innerWrapper.resize();this.layout(e.h)},$b:function(e){var L=this.$3(e);this.$7(L)},$a:function(e){this.$b(e.sheetName)},$8:function(e){this.$b(e.DDA)},$3:function(e){for(var L=0;L<this.$f.length;L++){if(ss.referenceEquals(this.$f[L].value,e)){return this.$f[L]}}return null},$6:function(){var e=dojo.query('.dijitTab',this._scrollNode);if(!!e.length){var L=e[0];var hy=e[e.length-1];return hy.offsetLeft+dojo.style(hy,'width')-L.offsetLeft}else{return 0}},$e:function(e){var L=this.$6();return L>0&&e<L},_indexOf:function(e,L){for(var hy=0;hy<e.length;hy++){if(ss.referenceEquals(e[hy],L)){return hy}}return-1},$4:function(){var e=dojo.query('.dijitTab',this._scrollNode);var L=this._containerNode.domNode.offsetWidth;var hy=this.$6();var hz={};if(!!e.length&&hy>L){hz.min=0;hz.max=e[e.length-1].offsetLeft+dojo.style(e[e.length-1],'width')+2-L}else{hz.min=0;hz.max=0}return hz},getCurrentSheetInfo:function(){return ss.mkdict(['sheetName',this.currentTab.value,'repositoryUrl',this.currentTab.repository_url])},$1:function(e){if(ss.isValue(this.currentTab)&&ss.referenceEquals(this.currentTab.value,e.value)){return}var L=new Object;L.sheetName=e.value;L.repositoryUrl=e.repository_url;L.oldRepositoryUrl=(ss.isValue(this.currentTab)?this.currentTab.repository_url:null);dojo.publish('onTabSelect',[L])},$7:function(e){if(ss.isValue(this.currentTab)){this.currentTab.attr('checked',false)}else{e=this.currentTab=this.$f[this.currentTabIndex]}if(ss.isNullOrUndefined(e)){return}e.attr('checked',true);this.currentTab=e;this.$c(e)},$c:function(e){var L=e.domNode;var hy=this._getScroll();if(hy>L.offsetLeft||hy+dojo.style(this._containerNode.domNode,'width')<L.offsetLeft+dojo.style(L,'width')){this._createSmoothScroll(e).play()}},$5:function(e){var L=e.domNode;var hy=dojo.style(this._containerNode.domNode,'width');var hz=this.$4();var hA;hA=L.offsetLeft+dojo.style(L,'width')/2-hy/2;hA=Math.min(Math.max(hA,hz.min),hz.max);return hA},$0:function(){this.connect(this._rightBtn,'onClick',ss.mkdel(this,function(){this.$9(this._rightBtn)}));this.connect(this._leftBtn,'onClick',ss.mkdel(this,function(){this.$9(this._leftBtn)}));this.connect(this._menuBtn,'onClick',ss.mkdel(this,this.onMenuButtonClicked))},onMenuButtonClicked:function(){if(ss.isValue(this.$j)){this.$j.dispose()}this.$j=spiff.MenuViewModel.createForMenu(new spiff.Menu(this.$g),spiff.MenuViewModel.handleMenuActionItemClicked);this.$j.show(spiff.ShowMenuOptions.create($(this._menuBtn.domNode)))},$9:function(e){if(e.dojoAttachPoint==='_leftBtn'){this.$2(-1)}else{this.$2(1)}},$2:function(e){var L=dojo.style(this._containerNode.domNode,'width');var hy=L*0.5*e;var hz=this._getScroll()+hy;this._createSmoothScroll(null,hz).play()},_getScroll:function(){return this._containerNode.domNode.scrollLeft},_createSmoothScroll:function(e,L){if(ss.isValue(e)){L=this.$5(e)}else{var hy=this.$4();L=Math.min(Math.max(L,hy.min),hy.max)}if(ss.isValue(this._anim)&&this._anim.status()==='playing'){this._anim.stop()}var hz=null;var hA=new Object;hA.duration=100;hA.beforeBegin=ss.mkdel(this,function(){var hB=this._containerNode.domNode.scrollLeft;hz.curve=new dojo._Line(hB,L)});hA.onAnimate=ss.mkdel(this,function(hB){this._containerNode.domNode.scrollLeft=hB});hA.onEnd=ss.mkdel(this,function(){this.$d()});hz=new dojo._Animation(hA);this._anim=hz;return hz},$d:function(){var e=this._getScroll();var L=this.$4();var hy;var hz;if(e>L.max){this._containerNode.domNode.scrollLeft=L.max}hz=e>=L.max;hy=e<=L.min;this._rightBtn.setAttribute('disabled',hz);this._leftBtn.setAttribute('disabled',hy);dojo.query('button',this._rightBtn.domNode).toggleClass('tnRightButtonDisabled',hz);dojo.query('button',this._leftBtn.domNode).toggleClass('tnLeftButtonDisabled',hy)}},Object);ss.initClass(gd,a,{get_paneContents:function(){return this.get_viewModel().get_paneViewModels()},get_activePaneTitle:function(){return this.$a},set_activePaneTitle:function(e){this.$a=e;this.$c.selectTab(this.$d[e])},onAddedToDom:function(){for(var e=0;e<this.$b.length;e++){var L=this.$b[e];var hy=ss.safeCast(L,spiff.Widget);if(ss.isValue(hy)){hy.onAddedToDom()}}spiff.Widget.prototype.onAddedToDom.call(this)},dispose:function(){this.$c.dispose();tab.MiscUtil.dispose(this.$b);ss.makeGenericType(spiff.BaseView$1,[ge]).prototype.dispose.call(this)},$9:function(){this.$b=[];this.$d={};var e=this.get_viewModel().get_paneViewModels();for(var L=0;L<e.length;L++){var hy=e[L];var hz=hy;if(ss.isValue(hz)){var hA=spiff.ObjectRegistry.newView$1(ss.makeGenericType(spiff.IView$1,[spiff.IViewModel])).call(null,hz.get_contentViewType(),[hz.get_contentViewModel()]);if(!ss.isNullOrEmptyString(hz.get_additionalContentViewClass())){hA.get_rootElement().addClass(hz.get_additionalContentViewClass())}this.$b.push(hA);this.$d[hz.get_title()]=hz.get_id();this.$c.addTab(hz.get_id(),hz.get_title(),hA.get_rootElement())}}this.set_activePaneTitle(this.get_viewModel().get_paneViewModels()[0].get_title())}},ss.makeGenericType(spiff.BaseView$1,[ge]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[ge]),dA]);ss.initClass(ge,a,{get_paneViewModels:function(){return this.$2}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(gf,a,{},ss.EventArgs);ss.initClass(gg,a,{get_textAngle:function(){return this.$l},set_textAngle:function(e){this.$l=e},get_isTextAngleHorizontal:function(){return Math.abs(this.get_textAngle())<0.01},get_numberSavedStates:function(){return this.$h},get_alpha:function(){return this.$7.globalAlpha},set_alpha:function(e){if(e!==this.$7.globalAlpha){this.$7.globalAlpha=e}},get_compositeOperation:function(){return this.$7.globalCompositeOperation},set_compositeOperation:function(e){this.$7.globalCompositeOperation=e},get_font:function(){return this.$7.font},set_font:function(e){var L=this.$e.normalizeFont(e);if(!ss.referenceEquals(L,this.$7.font)){this.$7.font=L}this.$f=gg.$0(L)},get_lineCap:function(){return this.$9},set_lineCap:function(e){if(e!==this.$9){this.$7.lineCap=e;this.$9=e}},get_lineJoin:function(){return this.$a},set_lineJoin:function(e){if(e!==this.$a){this.$7.lineJoin=e;this.$a=e}},get_lineWidth:function(){return this.$7.lineWidth},set_lineWidth:function(e){if(e!==this.$7.lineWidth){this.$7.lineWidth=e;this.$5()}},get_linePattern:function(){return this.$g},set_linePattern:function(e){if(e!==this.$g){this.$g=e;this.$5()}},get_miterLimit:function(){return this.$7.miterLimit},set_miterLimit:function(e){if(e!==this.$7.miterLimit){this.$7.miterLimit=e}},get_shadowBlur:function(){return this.$7.shadowBlur},set_shadowBlur:function(e){this.$7.shadowBlur=e},get_shadowColor:function(){return this.$7.shadowColor},set_shadowColor:function(e){this.$7.shadowColor=e},get_shadowOffsetX:function(){return this.$7.shadowOffsetX},set_shadowOffsetX:function(e){this.$7.shadowOffsetX=e},get_shadowOffsetY:function(){return this.$7.shadowOffsetY},set_shadowOffsetY:function(e){this.$7.shadowOffsetY=e},get_transformation:function(){return this.$n},set_transformation:function(e){this.$n.setTransform(e)},get_strokeStyle:function(){return this.$b},set_strokeStyle:function(e){if(!ss.referenceEquals(e,this.$b)){this.$7.strokeStyle=e;this.$b=e}},get_shapeFillStyle:function(){return this.$i},set_shapeFillStyle:function(e){this.$i=e;this.$3(e)},get_shouldAntialias:function(){return this.$j},set_shouldAntialias:function(e){this.$j=e},get_shouldUnderlineText:function(){return this.$k},set_shouldUnderlineText:function(e){this.$k=e},get_textFillStyle:function(){return this.$m},set_textFillStyle:function(e){this.$m=e},get_textAlign:function(){return this.$7.textAlign},set_textAlign:function(e){this.$7.textAlign=e},get_textBaseline:function(){return this.$7.textBaseline},set_textBaseline:function(e){this.$7.textBaseline=e},get_dirtyRect:function(){return this.$c},set_dirtyRect:function(e){this.$c=e},$6:function(){var e=this.$7.canvas;var L={w:e.width,h:e.height};return L},clearDirtyRect:function(){this.set_dirtyRect({x:0,y:0,w:0,h:0})},setDefaultPropertyValues:function(){this.set_alpha(1);this.set_strokeStyle('rgb(0,0,0)');this.set_linePattern(gg.defaultLinePattern);this.set_lineWidth(1);this.set_lineJoin(gg.defaultLineJoin);this.set_lineCap(gg.defaultLineCap);this.set_shapeFillStyle('rgb(0,0,0)');this.set_textFillStyle('rgb(0,0,0)');this.set_textBaseline(gg.defaultTextBaseline);this.set_textAlign(gg.defaultTextAlign);this.set_textAngle(0);this.set_font(8+'pt '+'Arial');this.$j=true;this.$k=false},setClip:function(e){this.beginPath();this.rect(e.x,e.y,e.w,e.h);this.$1()},arc:function(e,L,hy,hz,hA,hB){this.$7.arc(e,L,hy,hz,hA,hB)},arcTo:function(e,L,hy,hz,hA){this.$7.arcTo(e,L,hy,hz,hA)},beginPath:function(){this.$7.beginPath()},bezierCurveTo:function(e,L,hy,hz,hA,hB){this.$7.bezierCurveTo(e,L,hy,hz,hA,hB)},clearRect:function(e,L,hy,hz){this.$7.clearRect(e,L,hy,hz)},closePath:function(){this.$7.closePath()},createImageData1:function(e){return this.$7.createImageData(e)},createImageData2:function(e,L){return this.$7.createImageData(e,L)},createLinearGradient:function(e,L,hy,hz){return this.$7.createLinearGradient(e,L,hy,hz)},createPattern1:function(e,L){return this.$7.createPattern(e,L)},createPattern2:function(e,L){return this.$7.createPattern(e,L)},createRadialGradient:function(e,L,hy,hz,hA,hB){return this.$7.createRadialGradient(e,L,hy,hz,hA,hB)},drawImage1:function(e,L,hy){this.$7.drawImage(e,L,hy)},drawImage2:function(e,L,hy){this.$7.drawImage(e,L,hy)},drawImage3:function(e,L,hy,hz,hA){this.$7.drawImage(e,L,hy,hz,hA)},drawImage4:function(e,L,hy,hz,hA){this.$7.drawImage(e,L,hy,hz,hA)},drawImage5:function(e,L,hy,hz,hA,hB,hC,hD,hE){this.$7.drawImage(e,L,hy,hz,hA,hB,hC,hD,hE)},drawImage6:function(e,L,hy,hz,hA,hB,hC,hD,hE){this.$7.drawImage(e,L,hy,hz,hA,hB,hC,hD,hE)},fill:function(){this.$7.fill()},fillRect:function(e,L,hy,hz){this.$7.fillRect(e,L,hy,hz)},fillText1:function(e,L,hy){if(this.$4()){var hz=ss.mkdel(this,function(hA){this.$7.fillText(hA,0,0)});this.$2(hz,e,L,hy)}else{this.$7.fillText(e,L,hy)}},fillText2:function(e,L,hy,hz){if(this.$4()){var hA=ss.mkdel(this,function(hB){this.$7.fillText(hB,0,0,hz)});this.$2(hA,e,L,hy)}else{this.$7.fillText(e,L,hy,hz)}},getImageData:function(e,L,hy,hz){return this.$7.getImageData(e,L,hy,hz)},isPointInPath:function(e,L){return this.$7.isPointInPath(e,L)},lineTo:function(e,L){this.$7.lineTo(e,L)},measureText:function(e){return this.$7.measureText(e)},moveTo:function(e,L){this.$7.moveTo(e,L)},putImageData1:function(e,L,hy){this.$7.putImageData(e,L,hy)},putImageData2:function(e,L,hy,hz,hA,hB,hC){this.$7.putImageData(e,L,hy,hz,hA,hB,hC)},quadraticCurveTo:function(e,L,hy,hz){this.$7.quadraticCurveTo(e,L,hy,hz)},rect:function(e,L,hy,hz){this.$7.rect(e,L,hy,hz)},reset:function(){while(this.$h>0){this.restore()}this.setDefaultPropertyValues();this.resetTransform();this.save()},restore:function(){this.$7.restore();this.$9=this.$7.lineCap;this.$a=this.$7.lineJoin;this.$b=this.$7.strokeStyle;this.$8=this.$7.fillStyle;var e=this.$d.pop();e.$0(this);--this.$h},rotate:function(e){this.$n.rotate(e);this.$0()},save:function(){var e=new A(this.$g,this.$l,this.$i,this.$m,this.$j,this.$k,this.$n);this.$d.push(e);this.$7.save();++this.$h},scale:function(e,L){if(e===1&&L===1){return}this.$n.scale(e,L);this.$0()},setTransform:function(e){this.$n.setTransform(e);this.$0()},resetTransform:function(){this.$n.reset();this.$0()},stroke:function(){this.$7.stroke()},strokeRect:function(e,L,hy,hz){this.$7.strokeRect(e,L,hy,hz)},strokeText1:function(e,L,hy){},strokeText2:function(e,L,hy,hz){},translate:function(e,L){if(e===0&&L===0){return}this.$n.translate(e,L);this.$0()},$0:function(){var e=this.$n.get_matrix();this.$7.setTransform(e[0],e[1],e[2],e[3],e[4],e[5])},$1:function(){this.$7.clip()},$4:function(){return!this.get_isTextAngleHorizontal()||ss.isNullOrUndefined(this.$i)||!ss.referenceEquals(this.$i,this.$m)||this.$k},$2:function(e,L,hy,hz){this.$7.save();var hA=this.$n.clone();this.translate(hy,hz);if(!this.get_isTextAngleHorizontal()){this.rotate(this.get_textAngle())}this.$3(this.$m);e(L);if(this.$k){var hB=this.measureText(L).width;var hC=Math.round(Math.max(1,(this.$f-5)/10));var hD=Math.round((this.$f-5)/10);var hE=0;if(this.get_textAlign()==='center'){hE-=hB/2}else if(this.get_textAlign()==='end'){hE-=hB}this.$7.fillRect(hE,hD,hB,hC)}this.$7.restore();this.$n.setTransform(hA);this.$8=null},$3:function(e){if(!ss.referenceEquals(e,this.$8)){this.$7.fillStyle=e;this.$8=e}},$5:function(){var e=null;switch(this.$g){case'solid':{e=[];break}case'dashed':{e=[gg.defaultLineDashDashed[0]*this.$7.lineWidth,gg.defaultLineDashDashed[1]*this.$7.lineWidth];break}case'dotted':{e=[gg.defaultLineDashDotted[0]*this.$7.lineWidth,gg.defaultLineDashDotted[1]*this.$7.lineWidth];break}}if(typeof(this.$7['setLineDash'])==='function'){this.$7.setLineDash(e)}else if('mozDash'in this.$7){this.$7['mozDash']=e}else if('webkitLineDash'in this.$7){this.$7['webkitLineDash']=e}}});ss.initClass(gh,a,{add_tabShown:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_tabShown:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_tabSelected:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_tabSelected:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_tabContentLoaded:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_tabContentLoaded:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_tabContentFailed:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_tabContentFailed:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},get_selectedIndex:function(){return this.$b},addUrlTab:function(e,L){var hy=this.$d.length;var hz=$("<li class='tab-tabLabel'></li>");hz.append(e);hz.data('tabIndex',hy);this.$d.push(hz);var hA=$('<div></div>');hA.data('tabContentUrl',L);this.$c.push(hA);this.get_element().find('.tab-tabLabels').append(hz);return hy},selectTab:function(e){if(ss.isNullOrUndefined(e)||e<0||e>=this.$c.length){return}if(ss.isValue(this.$b)&&ss.unbox(this.$b)===e){return}this.get_element().find('.tab-tabContent').children().detach();if(ss.isValue(this.$b)){this.$d[ss.unbox(this.$b)].removeClass('selected')}this.$b=e;this.$d[e].addClass('selected');this.get_element().find('.tab-tabContent').append(this.$c[e]);this.$8(e);this.onTabSelected(new gf(this.$d[e],this.$c[e],e))},dispose:function(){this.$9.dispose();spiff.Widget.prototype.dispose.call(this)},onTabShown:function(e){if(ss.isValue(this.$2$1)){this.$2$1(this,e)}},onTabSelected:function(e){if(ss.isValue(this.$2$2)){this.$2$2(this,e)}},onTabContentLoaded:function(e){if(ss.isValue(this.$2$3)){this.$2$3(this,e)}},onTabContentFailed:function(e){if(ss.isValue(this.$2$4)){this.$2$4(this,e)}},$8:function(e){var L=this.$c[e];var hy=L.data('tabContentUrl');if(ss.isNullOrUndefined(hy)){return}L.removeData('tabContentUrl');L.append(this.$a);L.load(hy,null,ss.mkdel(this,function(hz,hA,hB){this.$6(e,hA,hz)}));this.onTabShown(new gf(this.$d[e],L,e))},$6:function(e,L,hy){if(L==='error'){this.$c[e].html($("<div class='tab-tabViewError'></div>").html(hy));this.onTabContentFailed(new gf(this.$d[e],this.$c[e],e))}else{this.onTabContentLoaded(new gf(this.$d[e],this.$c[e],e))}},$7:function(e){var L=$(e.target);this.selectTab(L.data('tabIndex'))}},spiff.Widget,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(gi,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(gj,a,{$i:function(){return this.get_viewModel()},$h:function(){return this.get_template()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(tsConfig.is_mobile&&tsConfig.is_authoring&&tsConfig.current_sheet_type==='dashboard'){this.get_element().addClass('tabDontBustMyClicks')}this.handleNewTextRegion()},handleNewTextRegion:function(){if(!this.$i().hasPresModel()){return}this.$b(this.$h().textRegionBoundaryElem);this.$c(this.$h().contentElem)},$c:function(e){var L={};e.html(this.$i().get_html());cL.cleanUpFontFamilyStyles(e);if(tsConfig.is_authoring&&tsConfig.current_sheet_type==='dashboard'){if(!tsConfig.is_mobile_device){var hy=function(hG){hG.stopPropagation()};e.bind(this.createNamespacedEventName('touchstart'),hy).bind(this.createNamespacedEventName('touchend'),hy)}}else{tab.DomUtil.stopPropagationOfInputEvents(e)}var hz=this.$i().get_orientation();var hA=this.$g(hz);var hB=this.$f(hz);if(hA||hB){var hC=e.parent().width();var hD=e.parent().height();L['width']=hD+'px';var hE='0%';if(hA){if(!(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9)){L['bottom']='100%'}hE='100%'}else if(hB){if(!(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9)){L['top']='100%'}hE='0%'}e.css(L);L['left']=this.$d(hC,e.height(),this.$i().get_hAlign(),hz);this.$9(e,'0% '+hE,hz.toString())}else{L['width']='100%';var hF=this.$h().get_domRoot().height();if(hF<=e.height()&&!this.$e(e,hF)){L['top']='0%'}else{switch(this.$i().get_vAlign()){case'v-align-center':{L['top']='50%';L['margin-top']=ss.Int32.div(-e.height(),2).toString()+'px';break}case'v-align-bottom':{L['bottom']='0%';break}case'v-align-top':{L['top']='0%';break}default:{break}}}}e.css(L)},$e:function(e,L){var hy=false;e.find('span').each(function(hz,hA){if(!hy&&ss.isValue(hA.style.lineHeight)){hy=parseInt(hA.style.lineHeight)>=L}});return hy},$b:function(e){var L=this.$i().get_styledBox();var hy=cL.getCSSBorderStyle(L.ysh);var hz=ss.mkdict(['border-width',L.s$V+'px','border-color',L.mjt1,'border-style',hy]);if(this.$i().get_styledBox().iKN){this.$a(hz)}e.css(hz)},$a:function(e){var L=tab.ColorModel.fromColorCode(this.$i().get_styledBox().eBu);if(L.get_a()<1){if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){var hy=L.toArgbHex();var hz='progid:DXImageTransform.Microsoft.gradient(startColorStr='+hy+','+'endColorStr='+hy+')';e['background']='transparent';e['filter']=hz;e['-ms-filter']=hz;e['zoom']=1}else{e['background-color']=L.toString()}}else if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){e['background-color']=L.toRgb()}else{e['background-color']=L.toString()}},$g:function(e){return Math.round(e)===90},$f:function(e){return Math.round(e)===-90},$9:function(e,L,hy){var hz={};if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){var hA=((hy==='90')?1:((hy==='-90')?3:0));if(hA!==0){var hB='white';var hC='white';if(this.$i().get_styledBox().iKN){var hD=tab.ColorModel.fromColorCode(this.$i().get_styledBox().eBu);{var hE='white';var hF=tab.ModelUtils.findContentDashboard();if(ss.isValue(hF)){hE=hF.get_backgroundColor()||'white'}var hG=tab.ColorModel.alphaComposite(hD,tab.ColorModel.fromColorCode(hE));hD=new tab.ColorModel(hG.get_r(),hG.get_g(),hG.get_b(),1)}hB=hD.toRgb();hC=hD.toArgbHex()}var hH="progid:DXImageTransform.Microsoft.Chroma(color='"+hC+"')";var hI='progid:DXImageTransform.Microsoft.BasicImage(rotation='+hA+')';var hJ=hH+' '+hI;hz['-ms-filter']=hJ;hz['filter']=hJ;hz['background-color']=hB}}else{hz['transform-origin']=L;hz['transform']='rotate('+hy+'deg)'}e.css(hz)},$d:function(e,L,hy,hz){var hA=0;if(L>e){if(this.$g(hz)){hy='h-align-right'}else{hy='h-align-left'}}if(hy==='h-align-left'){hA=0}else if(hy==='h-align-right'){hA=e-L}else if(hy==='h-align-center'){hA=ss.Int32.div(e,2)-ss.Int32.div(L,2)}return hA.toString()+'px'}},ss.makeGenericType(spiff.BaseView$1,[gk]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[gk])]);ss.initClass(gk,a,{add_newTextRegion:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newTextRegion:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_hAlign:function(){return this.$3.get_hAlign()},get_html:function(){return this.$3.get_html()},get_orientation:function(){return this.$3.get_orientation()},get_vAlign:function(){return this.$3.get_vAlign()},get_styledBox:function(){return this.$3.get_styledBox()},get_presModelKey:function(){return this.$3.get_presModelKey()},handleNewTextRegion:function(){this.$2()},hasPresModel:function(){return!ss.isNullOrUndefined(this.$3.get_presModel())},$2:function(){if(ss.isValue(this.$2$1)){this.$2$1()}}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(gl,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(gm,a,{get_canScrollX:function(){return this.get_docSize().w-this.get_actualViewSize().w>0},get_canScrollY:function(){return this.get_docSize().h-this.get_actualViewSize().h>0},get_docSize:function(){return{w:this.get_element().width(),h:this.get_element().height()}},get_actualViewSize:function(){return{w:0,h:0}},set_actualViewSize:function(e){throw new ss.NotSupportedException('Setting ActualViewSize is not supported.')},get_effectiveViewSize:function(){return this.get_actualViewSize()},get_scrollPos:function(){return{x:this.get_element().scrollLeft(),y:this.get_element().scrollTop()}},set_scrollPos:function(e){this.setXPos(e.x);this.setYPos(e.y)},setXPos:function(e){this.get_element().scrollLeft(e)},setYPos:function(e){this.get_element().scrollTop(e)}},ss.makeGenericType(spiff.BaseView$1,[gn]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[gn]),spiff.IScrollable]);ss.initClass(gn,a,{},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(go,a,{get_name:function(){return this.get_regionPart().toString()},get_regionPart:function(){return this.$f},get_viewSession:function(){return this.$k},get_sheetid:function(){return this.$i},get_contentProvider:function(){return this.regionContent},set_contentProvider:function(e){if(ss.isValue(this.regionContent)){this.regionContent.remove_loadComplete(ss.mkdel(this,this.onRegionContentLoadComplete))}this.regionContent=e;if(ss.isValue(this.regionContent)){this.regionContent.add_loadComplete(ss.mkdel(this,this.onRegionContentLoadComplete))}},get_defaultPointerToolMode:function(){return this.$1$1},set_defaultPointerToolMode:function(e){this.$1$1=e},get_currentModifierKeyToolMode:function(){return this.$1$2},set_currentModifierKeyToolMode:function(e){this.$1$2=e},get_currentToolbarToolMode:function(){return this.currentToolbarToolMode},set_currentToolbarToolMode:function(e){if(tsConfig.allow_filter){this.currentToolbarToolMode=e}},get_currentPointerToolMode:function(){return((this.get_currentModifierKeyToolMode()==='no-tools')?this.get_currentToolbarToolMode():this.get_currentModifierKeyToolMode())},get_sceneInfo:function(){if(this.$f!=='viz'){return null}var e=ss.safeCast(this.regionContent,eE);if(ss.isNullOrUndefined(e)){return null}var L=e.get_viewModel();return L.get_scene()},get_vlvm:function(){var e=this.get_contentProvider();return e.get_viewModel()},get_shapeSelector:function(){return this.$h},turnOnWindowLogging:function(){if(!ss.isValue(go.windowLog)){go.windowLog=tab.Logger.getLoggerWithName('WindowAppender')}},reset:function(){this.backgroundMap.removeMarkOverlay();this.setViewportBorderVisibility(false)},destroy:function(){this.resetControlledAnimations();this.disposables.dispose();this.allowPanZoom=null;if(ss.isValue(this.regionContent)){this.regionContent.remove_loadComplete(ss.mkdel(this,this.onRegionContentLoadComplete));this.regionContent.destroy()}this.backgroundMap.$5();this.backgroundMap.dispose()},handlePageScroll:function(){this.$e=null},setGeometry:function(e,L,hy){if(ss.isValue(this.regionContent)){this.regionContent.set_actualViewSize({w:L.w,h:L.h});this.regionContent.reset(e,hy);this.backgroundMap.$9(e.w,e.h);this.$g={x:0,y:0,w:e.w,h:e.h};this.$e=null}},refreshImages:function(e){if(ss.isValue(this.regionContent)){this.regionContent.refreshImages(e)}},onZoomBoxMouseMove:function(e){this.onSelectorMouseMove(e,this.domPanZoomRect)},onMarqueeMouseMove:function(e){this.onSelectorMouseMove(e,this.$h)},onSelectorMouseMove:function(e,L){e.preventDefault();L.recordScrollingOffsets({x:this.scroller.get_scrollPos().x,y:this.scroller.get_scrollPos().y});var hy=L.get_connectNodePos();var hz=e.get_gestureInfo().pageX-hy.x;var hA=e.get_gestureInfo().pageY-hy.y;var hB=((hz<0)?hz:((hz>hy.w)?(hz-hy.w):0));var hC=((hA<0)?hA:((hA>hy.h)?(hA-hy.h):0));var hD=this.determineScrollDirection(0,hB);var hE=this.determineScrollDirection(1,hC);var hF=((Math.max(Math.abs(hB),Math.abs(hC))>15)?'fast':'slow');if(hD!==0||hE!==0){this.startScrolling(hD,hE,hF);L.constrainShape(e.get_gestureInfo())}else{this.stopScrolling();L.updateAndRenderShape(e.get_gestureInfo())}},debugWindowLog:function(e){if(ss.isValue(go.windowLog)){}},toLocalCoords:function(e,L){var hy=tab.RecordCast.dojoCoordsAsPoint(this.getLocalOffset(L));var hz={x:e.x-hy.x,y:e.y-hy.y};return hz},toLocalCoordsRect:function(e,L){var hy=tab.RecordCast.dojoCoordsAsPoint(this.getLocalOffset(L));var hz={x:e.x-hy.x,y:e.y-hy.y,w:e.w,h:e.h};return hz},toLocalCoordsEvent:function(e,L){var hy={x:e.get_gestureInfo().pageX,y:e.get_gestureInfo().pageY};return this.toLocalCoords(hy,L)},getLocalOffset:function(e){this.$e=this.$e||tab.DomUtil.getDojoCoordsJQ(this.connectNode);if(ss.isValue(e)&&ss.unbox(e)||ss.isNullOrUndefined(this.regionContent)){return this.$e}if(this.regionContent.get_scrollPos().x===0&&this.regionContent.get_scrollPos().y===0){return this.$e}var L=tab.MiscUtil.cloneObject(this.$e);L.x-=this.regionContent.get_scrollPos().x;L.y-=this.regionContent.get_scrollPos().y;return L},getPaneDrawInfoFromSelectionAnchor:function(e){this.$2();var L=new cZ(this.$c);var hy={x:e.x,y:e.y,w:1,h:1};var hz=L.hitTestPanes(hy);if(hz.length===0){return null}return this.get_sceneInfo().getPaneDrawInfoFromKey(hz[0])},getPaneDescriptorFromSelectionAnchor:function(e){var L=this.getPaneDrawInfoFromSelectionAnchor(e);return(ss.isValue(L)?L.get_paneDescriptorKey():'')},hitTestVisualPartsHelper:function(e,L,hy){return(da.hasExactHit(hy)?[]:this.$4(e,L))},$4:function(e,L){var hy;var hz=tabBootstrap.MetricsController.createContext('HitTestVisualParts',16,null);{var hA=[];var hB=[];var hC=this.paneTableViewModel.get_refLineVisualLists();if(ss.isValue(hC)){hA=hd.hitTestRefLines(hC,e,L);if(hA.length!==0&&hA[0].get_hitType()!==0){}}if(!da.hasExactHit(hA)){this.$3();hB=hd.hitTestTrendLines(this.$j,e,L);if(hB.length!==0&&hB[0].get_hitType()!==0){}}if(L){var hD=da.tieBreakHits(hA,hB);if(hD.get_hitType()===0){hy=[]}else{hy=[hD]}}else{hy=[];hy.push.apply(hy,hA);hy.push.apply(hy,hB)}}hz.dispose();return hy},hitTestMarksAgainstSelectionShape:function(){return this.hitTestMarks(null,false)},hitTestMarks:function(e,L){var hy;{var hz=tabBootstrap.MetricsController.createContext('HitTestMarks',16,null);try{this.$2();var hA=new cZ(this.$c);hy=(ss.isNullOrUndefined(e)?this.$h.hitTest(hA,L,this.get_sceneInfo()):hA.hitTest(e,L,this.get_sceneInfo()))}finally{if(ss.isValue(hz)){hz.dispose()}}}if(hy.length>0){}return hy},selectNode:function(e,L,hy,hz){var hA=this.get_vlvm();hA.selectNode(e,L,hy,hz)},hitTestNodes:function(e){var L=this.get_vlvm();var hy=_.find(L.get_groupItemNodes(),function(hz){var hA=hz.nTH||0;var hB=hz.Mk_||0;var hC={x:hA,y:hB,w:hz.XqN,h:hz.$UU};return tab.RectXYUtil.inRect(hC,e)});return hy},doSelectFromPoint:function(e,L,hy){var hz=this.hitTestSingleMarksAndVisualParts(e);var hA=this.paneTableViewModel.get_visualId();switch(hz.get_tooltipTargetType()){case'mark':{tab.SelectionClientCommands.selectMarksLocal([hz.get_id()],hA,L,false,null,hy);break}case'visualparts':{var hB={x:e.x,y:e.y,w:1,h:1};tab.SelectionClientCommands.selectRegion(this.$f,hB,L,hA);break}default:{if(L==='simple'){tab.SelectionClientCommands.clearAllSelections(hA)}break}}return hz},hitTestSingleMarksAndVisualParts:function(e){var L={x:e.x,y:e.y,w:1,h:1};var hy=this.hitTestMarks(L,true);var hz=this.hitTestVisualPartsHelper(L,true,hy);var hA=da.tieBreakHits(hy,hz);return hA},doSelectMarkAndUbertipFromSelectionShape:function(e,L){var hy=da.getIdsFromHitTestResults(this.hitTestMarksAgainstSelectionShape(),false);tab.SelectionClientCommands.selectMarksLocal(hy,this.paneTableViewModel.get_visualId(),e,true,L);return hy},zoomHome:function(){this.backgroundMap.splatOverlayToMapForTransition(go.getCanvasElement(this.connectNode));this.setViewportBorderVisibility(true);this.backgroundMap.$e()},moveMapToBounds:function(e){if(this.paneTableViewModel.get_visualModel().get_shouldUpdate()){this.backgroundMap.splatOverlayToMapForTransition(go.getCanvasElement(this.connectNode));this.setViewportBorderVisibility(true);this.backgroundMap.moveToBounds(e)}},setPointerToolMode:function(e){if(ss.isNullOrUndefined(e)){e=this.get_defaultPointerToolMode()}this.setMode(e)},updateDefaultToolMode:function(){this.set_defaultPointerToolMode(this.determineDefaultToolMode())},determineDefaultToolMode:function(){if(tab.FeatureFlags.isEnabled('StickyMapTools')){return this.lockedToolbarToolMode}if(tsConfig.allow_filter&&this.paneTableViewModel.get_visualModel().get_vizNavigationSetting()!=='fixed'&&(this.paneTableViewModel.get_mapServerModel().get_hasPresModel()||this.paneTableViewModel.get_visualModel().get_hasBackgroundImage())){return'pan-map'}return'rectangular-selection'},isSelectingToolActive:function(){return this.get_currentPointerToolMode()==='rectangular-selection'||this.get_currentPointerToolMode()==='lasso-selection'||this.get_currentPointerToolMode()==='radial-selection'},isZoomToolActive:function(){return this.get_currentPointerToolMode()==='area-zoom'||this.get_currentPointerToolMode()==='zoom-out'},setLockedPointerToolMode:function(e){this.lockedToolbarToolMode=e},isExistingSelection:function(){var e=this.paneTableViewModel.get_visualId();var L=tab.ModelUtils.getVisualModelFromVisualId(e).get_selectionsModel().get_tupleSelection();return L.get_ids().length!==0},$5:function(e,L){if(L.get_propertyName()==='scene'||L.get_propertyName()==='vizdata'){this.$c=null;this.$j=null}},$6:function(){this.get_contentProvider().set_scrollPos({x:0,y:0})},suppressTooltips:function(){},zoomPoint:function(e,L,hy,hz,hA){if(this.resetIsWaitingOnTransition){return}this.waitingOnPanZoomServerResponse='waitingOnServer';this.suppressTooltips();var hB=(e.canDragH?hy:1);var hC=(e.canDragV?hy:1);var hD=L;if(hz){this.get_viewSession().zoomDoubleClick(this.get_regionPart(),L,hD,hy>1,hA)}else if(hy>1){this.get_viewSession().zoomIn(this.get_regionPart(),L,hD)}else{this.get_viewSession().zoomOut(this.get_regionPart(),L,hD)}var hE=((hy>1)?1:-1);this.backgroundMap.zoomOnPoint(L,hE);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()||this.paneTableViewModel.get_visualModel().get_cacheUrlInfo().useUrl){this.animateZoomOnPoint(e,L,hB,hC)}},makeDomDrag:function(){this.domPanZoomRect.createDomAndAppend(this.connectNode);this.domDragImage=$('<div></div>');this.addHiddenDiv(this.domDragImage,'tvdrag_image',this.domPanZoomRect.get_dom());this.domDragMask=$('<div></div>');this.addHiddenDiv(this.domDragMask,'tvdrag_mask',this.domPanZoomRect.get_dom())},showDomDragImage:function(e){this.$a=true;this.setViewportBorderVisibility(true);if(this.backgroundMap.get_enabled()&&!this.$1()){this.backgroundMap.splatOverlayToMapForTransition(go.getCanvasElement(this.connectNode))}else{var L=(tab.ApplicationModel.get_instance().get_isLocalRenderMode()?this.scroller.get_scrollPos():{x:0,y:0});var hy={l:e.x-L.x+1,t:e.y-L.y+1,w:e.w+1-2,h:e.h+1-2};var hz=this.$d.clone();if(ss.isInstanceOfType(this.regionContent,eE)){var hA=go.getCanvasElement(hz);var hB=bb.getRenderContext(hA,'transparent');this.regionContent.copyContent(hB)}hz.removeClass();hz.addClass('tvdrag_imageContainer');this.domDragImage.append(hz);this.domDragImage.css('display','');var hC=1;tab.DomUtil.setMarginBoxJQ(hz,{l:-hy.l-hC,t:-hy.t-hC,w:hz.width()-2,h:hz.height()-2});tab.DomUtil.setMarginBoxJQ(this.domDragImage,{l:L.x+hC,t:L.y+hC,w:hy.w-2,h:hy.h-2});this.domDragMask.css('background-color',this.getPanZoomFillColor());this.domDragMask.css('display','');tab.DomUtil.setMarginBoxJQ(this.domPanZoomRect.get_dom(),hy);this.domPanZoomRect.get_dom().css('display','')}},getCenterPoint:function(e){var L=Math.floor(e.w/2)+e.x;var hy=Math.floor(e.h/2)+e.y;return{x:L,y:hy}},addHiddenDiv:function(e,L,hy){e.addClass(L);e.css('display','none');hy.append(e)},$1:function(){return tab.BrowserSupport.get_isIE()&&!this.backgroundMap.get_enabled()&&(!tab.BrowserSupport.get_cssTransform()||ss.isNullOrUndefined(tab.BrowserSupport.get_cssTransitionName()))},animateZoomOnPoint:function(e,L,hy,hz){var hA=((hy<1)?-1:((hy>1)?1:0));var hB=((hz<1)?-1:((hz>1)?1:0));var hC={x:hA,y:hB};var hD=this.getCenterPoint(e);var hE=Math.floor((hD.x-L.x)*hC.x*hy);var hF=Math.floor((hD.y-L.y)*hC.y*hz);var hG={};hG.translateX=hE;hG.translateY=hF;hG.scaleX=hy;hG.scaleY=hz;hG.time=777;this.showDomDragImage(e);if(this.$1()){this.$0(e,hG);return}this.animateZoomWithCSSTransitions(hG)},mapIsBrowserRendered:function(){return this.backgroundMap.get_enabled()},animateAnchorZoomLeaflet:function(e,L,hy){this.showDomDragImage(e);if(this.mapIsBrowserRendered()){this.backgroundMap.animateAnchorZoom(hy,L)}},animateAnchorZoom:function(e,L,hy){var hz=1/hy;var hA=((e.x>0)?(L.x%e.x):L.x);var hB=((e.y>0)?(L.y%e.y):L.y);var hC={x:hA,y:hB};var hD={};hD.scaleX=hz;hD.scaleY=hz;hD.time=500;this.showDomDragImage(e);if(this.$1()){var hE=this.getCenterPoint(e);var hF=-1;var hG=hF*(hz-1);hD.translateX=ss.round(hG*(hC.x-hE.x));hD.translateY=ss.round(hG*(hC.y-hE.y));this.$0(e,hD);return}hD.transformOrigin=hC;this.animateZoomWithCSSTransitions(hD)},getPointLatLong:function(e){return this.backgroundMap.getPointLatLong(e)},animateZoomWithCSSTransitions:function(e){var L=this.domDragImage.get(0);this.resetIsWaitingOnData=true;this.resetIsWaitingOnTransition=true;window.setTimeout(ss.mkdel(this,function(){tableau.util.transform(L,e);this.$b=true;var hy=500;window.setTimeout(ss.mkdel(this,function(){this.resetIsWaitingOnTransition=false;if(!this.resetIsWaitingOnData){this.reset()}}),hy)}),50)},$0:function(e,L){var hy;var hz=L.scaleX;var hA=L.scaleY;if(!tab.BrowserSupport.get_isIE()){return}this.resetControlledAnimations();var hB=tab.DomUtil.getMarginBoxJQ(this.domDragImage);hy={};var hC=Math.floor(hB.w*hz);var hD=Math.floor(hB.h*hA);var hE=L.translateX+Math.floor(hB.w/2-hC/2);var hF=L.translateY+Math.floor(hB.h/2-hD/2);hy['left']=hE;hy['top']=hF;hy['width']=hC;hy['height']=hD;this.$9.push(new r(this.domDragImage,hy,777));var hG=this.domDragImage.children().first();hB=tab.DomUtil.getMarginBoxJQ(hG);hy={};hy['width']=Math.floor(hB.w*hz)+e.x;hy['height']=Math.floor(hB.h*hA)+e.y;this.$9.push(new r(hG,hy,777));var hH=Math.floor(e.x*(1-hz));var hI=Math.floor(e.y*(1-hA));var hJ={x:hH,y:hI};hG.children().each(ss.mkdel(this,function(hK,hL){var hM=$(hL);hB=tab.DomUtil.getMarginBoxJQ(hM);hy={};hy['left']=Math.floor(hB.l*hz+hJ.x);hy['top']=Math.floor(hB.t*hA+hJ.y);hy['width']=Math.floor(hB.w*hz);hy['height']=Math.floor(hB.h*hA);this.$9.push(new r(hM,hy,777))}));this.$9.forEach(function(hK){hK.$0()})},resetControlledAnimations:function(){if(!tab.BrowserSupport.get_isIE()){return}if(!ss.isValue(this.$9)){this.$9=[]}this.$9.forEach(function(e){e.$1(true)});ss.clear(this.$9)},stopScrolling:null,startScrolling:null,determineScrollDirection:null,$2:function(){if(ss.isNullOrUndefined(this.$c)){this.$c=db.buildLinearHitTestStructure(this.get_sceneInfo())}},$3:function(){if(ss.isNullOrUndefined(this.$j)){this.$j=[];var e=this.get_contentProvider();var L=e.get_viewModel();var hy=L.get_trendLineVisualLists();if(ss.isValue(hy)){for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];var hB=hA.tOA;var hC=1;for(var hD=0;hD<hB.length;hD++){var hE=hB[hD];if(hE.VzB==='rOX'){var hF=hE;for(var hG=0;hG<hF.tOA.length;hG++){var hH=hF.tOA[hG];switch(hH.VzB){case'Osj':{var hI=hH;if(ss.isValue(hI.Cwi)){hC=hI.Cwi}break}case'bUP':{var hJ=hH;var hK=db.buildTrendLineHitTestStructure(hJ,hC,hF.YLs);this.$j.push(hK);break}default:{break}}}}}}}}},onRegionContentLoadComplete:function(e,L){if(this.waitingOnPanZoomServerResponse==='waitingOnServer'){this.waitingOnPanZoomServerResponse='normal'}if(this.$f==='viz'){if(!this.isScrolling&&this.$a){this.domDragMask.css('display','none');this.domDragImage.css('display','none');this.domPanZoomRect.get_dom().css('display','none');this.get_shapeSelector().get_dom().css('display','none');this.domDragImage.html('');this.$a=false}if(this.$b){tableau.util.transform(this.domDragImage.get(0));this.$b=false}}},getPanZoomFillColor:function(){var e='rgb(255,255,255)';if(this.$f==='viz'){if(this.paneTableViewModel.get_mapServerModel().get_hasPresModel()){e=this.paneTableViewModel.get_mapServerModel().get_mapBGFillColor()}else if(ss.isValue(this.paneTableViewModel.get_scene().get_scene())){e=this.paneTableViewModel.get_scene().get_scene().oiS}}return e},$7:function(){if(this.$f==='viz'){this.setViewportBorderVisibility(false);var e=this.paneTableViewModel.get_mapServerModel();if(e.get_hasPresModel()){if(e.get_useFastMaps()&&!this.backgroundMap.get_enabled()){this.backgroundMap.$2(this.backgroundDiv,this.paneTableViewModel.get_mapServerModel())}}else{this.backgroundMap.$5()}var L=this.getPanZoomFillColor();if(!ss.referenceEquals(this.$8,L)){this.backgroundDiv.css('backgroundColor',L);this.$8=L}}},resetPointerToolMode:function(){this.setPointerToolMode(this.get_defaultPointerToolMode())},setViewportBorderVisibility:function(e){this.viewportBorder.css('display',(e?'':'none'))},setMode:function(e){this.set_currentToolbarToolMode(e);this.updateSelectorShape(e)},updateSelectorShape:function(e){if(ss.isValue(this.$h)){if(ss.isValue(this.$h.get_dom())){this.$h.get_dom().remove()}this.$h=null}switch(e){case'lasso-selection':{this.$h=new eW(this.$g,tab.ApplicationModel.get_instance().get_isLocalRenderMode());break}case'radial-selection':{var L=this.paneTableViewModel.get_mapServerModel();this.$h=new bs(this.$g,L.get_radialSelectionDistanceInfoModel());break}case'rectangular-selection':default:{this.$h=new fm;break}}this.$h.createDomAndAppend(this.connectNode)},isToolDefault:function(e){return e===this.get_defaultPointerToolMode()}});ss.initClass(gp,a,{destroy:function(){this.$9.remove_scrolled(ss.mkdel(this,this.$2));this.$9.destroy();this.$9=null;this.$5.remove_contentFetched(ss.mkdel(this,this.$1));this.$5.destroy();this.$5=null;this.$7.destroy();this.$7=null;this.$6.destroy();this.$6=null},updateViewport:function(e,L){this.$7.updateViewport(e,L)},getElement:function(e){var L=this.$7.itemToTileIndex(e);if(!this.$7.getTileStatus(L)){return null}else{var hy=this.$7.globalToLocalItemIndex(e);return this.$9.getItemElement(L,hy)}},$4:function(e,L){var hy=this.$6.format(L,this.$7.getTilePosition(e),this.$7.getTileRange(e));if(hy.length===0){return}this.$9.setContent(e,hy);this.$7.updateTileStatus(e,true)},$0:function(e){var L=this.$7.getTileRangeType(e);var hy=this.$7.getTileRange(e);var hz=new cy(e,hy,L);return hz},$3:function(){var e=[];var L=this.$7.get_tileCount();for(var hy=1;hy<L;++hy){var hz=this.$0(hy);e.push(hz)}this.$5.fetch(e)},$2:function(e,L){var hy=this.$8*this.$7.get_itemHeight();var hz=L.get_newPos().y-hy;if(hz<0){hz=0}var hA=L.get_newPos().y+hy+this.$7.get_viewportHeight();if(hA>this.$7.get_totalHeight()-1){hA=this.$7.get_totalHeight()-1}var hB=new tab.IntegerRange(hz,hA);var hC=this.$7.pixelToTileRange(hB);var hD=[];var hE=hC.get_from();var hF=hC.get_to();for(var hG=hE;hG<=hF;++hG){if(this.$7.getTileStatus(hG)||this.$5.isTilePending(hG)){continue}var hH=this.$0(hG);hD.push(hH)}this.$5.fetch(hD)},$1:function(e,L){var hy=L.get_tileIndex();var hz=L.get_data();this.$4(hy,hz)}});ss.initClass(gq,a,{});ss.initClass(gr,a,{add_loadComplete:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_loadComplete:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},get_actualViewSize:function(){return{w:this.$8.clientWidth,h:this.$8.clientHeight}},set_actualViewSize:function(e){},get_effectiveViewSize:function(){return this.get_actualViewSize()},get_scrollPos:function(){return{x:this.get_left(),y:this.get_top()}},set_scrollPos:function(e){this.set_left(e.x);this.set_top(e.y);this.$2(false)},get_canScrollX:function(){return this.get_docSize().w>this.get_effectiveViewSize().w},get_canScrollY:function(){return this.get_docSize().h>this.get_effectiveViewSize().h},get_docSize:function(){return{w:this.$b.w,h:this.$b.h}},get_left:function(){return this.$f},set_left:function(e){this.$f=e;if(this.$h){this.$8.scrollLeft=e}},get_top:function(){return this.$m},set_top:function(e){this.$m=e;if(this.$h){this.$8.scrollTop=e}},destroy:function(){this.$9.destroy();while(this.$j>0){this.$j--;this.$g.decrementWait()}this.$c=null;this.$n=null},refreshImages:function(e){if(!ss.isValue(this.$b)||tab.SizeUtil.isEmpty(tab.RecordCast.regionRectAsSize(this.$b))){return}if(ss.isNullOrUndefined(e)){return}this.$7=e;this.$1();this.$2(!tab.ProgressiveLoader.get_progressiveLoadEnabled()||!this.$a);this.$a=false},reset:function(e,L){var hy=this.$b;var hz=this.$i;this.$b=e;this.$i=L;if(ss.isNullOrUndefined(this.$b)||tab.SizeUtil.isEmpty(tab.RecordCast.regionRectAsSize(this.$b))){return}if(ss.isValue(hy)&&hy.w===this.$b.w&&hy.h===this.$b.h&&hz.w===this.$i.w&&hz.h===this.$i.h){return}var hA=this.get_top();var hB=this.get_left();this.$k=Math.ceil(this.$b.w/this.$i.w);this.$l=Math.ceil(this.$b.h/this.$i.h);this.$d.width(this.$b.w);this.$d.height(this.$b.h);this.set_top(Math.min(hA,Math.max(0,this.$b.h-this.$8.offsetHeight)));this.set_left(Math.min(hB,Math.max(0,this.$b.w-this.$8.offsetWidth)))},setXPos:function(e){this.set_scrollPos({x:e,y:this.get_scrollPos().y})},setYPos:function(e){this.set_scrollPos({x:this.get_scrollPos().x,y:e})},$0:function(e){var L=$(e);if(!!L.prop('_deferredClear')){L.prop('_deferredClear',null);L.empty()}},$2:function(e){if(!ss.isValue(e)){e=false}if(!ss.isValue(this.$b)||tab.SizeUtil.isEmpty(tab.RecordCast.regionRectAsSize(this.$b))){return}if(!ss.isValue(this.$7)){return}var L=this.get_left();var hy=L+this.$8.clientWidth;var hz=this.get_top();var hA=hz+this.$8.clientHeight;var hB=Math.max(Math.floor(L/this.$i.w),0);var hC=Math.min(Math.ceil(hy/this.$i.w),this.$k);var hD=Math.max(Math.floor(hz/this.$i.h),0);var hE=Math.min(Math.ceil(hA/this.$i.h),this.$l);this.$9.clear();if(!ss.isValue(this.$g)){return}if(e===true){var hF=this.$j;this.$j=Math.max((hC-hB)*(hE-hD),0);if(hF<=0&&this.$j>0){this.$g.incrementWait(false)}}var hG='';var hH=0;if(ss.isValue(this.$c)){hG=this.$c()}if(ss.isValue(this.$n)){hH=this.$n.get_cacheVersion()}var hI=false;for(var hJ=hB;hJ<hC;hJ++){var hK=Math.min(this.$i.w,this.$b.w-hJ*this.$i.w);for(var hL=hD;hL<hE;++hL){var hM=Math.min(this.$i.h,this.$b.h-hL*this.$i.h);var hN=hL*this.$k+hJ;var hO={l:hJ*this.$i.w,t:hL*this.$i.h,w:hK,h:hM};var hP=this.$g.formatTileURL(this.$7,this.$b.r,hJ,hL,'',hG);if(ss.isValue(this.$e[hN])&&this.$e[hN].$0(hP,hH)){if(e){this.$6()}var hQ=this.$e[hN].$3();var hR=hQ.width!==hO.w||hQ.height!==hO.h;if(hR){$(hQ).css(ss.mkdict(['left',hO.l+'px','top',hO.t+'px']));gr.$0(hQ,hO)}}else{hI=true;this.$e[hN]=this.$e[hN]||new t;var hS=new dp(this.$e[hN].$3(),hN,hP,hO,hH);this.$9.addImage(hS)}}}if(!hI){this.$d.each(ss.mkdel(this,function(hT,hU){this.$0(hU)}))}},$1:function(){this.$e=[];this.$d.prop('_deferredClear',true)},$6:function(){if(this.$j>0){this.$j--;if(this.$j===0){this.$g.decrementWait()}}},$3:function(e,L){this.$6();if(ss.isValue(L.get_image().get_imageNode())){var hy=L.get_image().get_imageNode();gr.$0(hy,L.get_image().get_bounds());var hz=L.get_image().get_index();var hA=this.$n.get_cacheVersion();if(!ss.isValue(this.$e[hz])){return}if((!ss.isValue(this.$e[hz].$3())||!ss.referenceEquals($(this.$e[hz].$3()).attr('src'),$(hy).attr('src')))&&L.get_image().get_version()===hA){this.$e[hz].$4(hy);this.$e[hz].$2(hA);var hB=hy;var hC=0;var hD=this.$d.length;this.$d.each(ss.mkdel(this,function(hE,hF){this.$0(hF);hF.appendChild(hB);if(hC<hD-1){hB=hB.cloneNode(false)}hC++}))}}},$4:function(e,L){this.$6()},$5:function(e,L){if(ss.isValue(this.$1$1)){this.$1$1(this,ss.EventArgs.Empty)}}},null,[spiff.IScrollable,dB]);ss.initClass(gs,a,{});ss.initClass(gt,a,{get_image:function(){return this.$2$1},set_image:function(e){this.$2$1=e},get_text:function(){return this.$2$2},set_text:function(e){this.$2$2=e},setImageClass:function(e){this.get_image()[0].className='tabToolbarButtonImg '+e;return'tabToolbarButtonImg '+e}},spiff.Template,[ss.IDisposable]);ss.initClass(gu,a,{get_dom:function(){return this.get_template()},get_toolbarButton:function(){return this.$e},$c:function(){this.$e=new spiff.LabelButton(this.get_dom().get_domRoot(),'.tabToolbarButtonText');this.disposables.add$1(this.$e);this.$e.add_click(ss.mkdel(this.$f,this.$f.execute));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$e.remove_click(ss.mkdel(this.$f,this.$f.execute))})));this.$e.add_click(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$e.remove_click(ss.mkdel(this,this.$9))})));this.setStateCss();if(ss.isValue(this.$f.get_text())){this.get_dom().get_text().text(this.$f.get_text())}this.$e.setTooltip(this.$f.get_tooltipText());if(ss.isValue(this.$f.get_iconText())){this.get_dom().get_image().text(this.$f.get_iconText())}},onViewModelPropertyChanged:function(e,L){this.$d()},setStateCss:function(){this.$e.get_element().toggleClass('tabActive',this.$f.get_isActive());return this.get_dom().setImageClass((this.$f.get_isActive()?(this.$f.get_iconClass()+'-active'):this.$f.get_iconClass()))},$d:function(){this.$e.set_disabled(!this.$f.get_enabled());this.setStateCss()},$9:function(){if(this.$e.get_element().hasClass('tabToolbarButtonFlyoverShown')){this.$f.popupViewModel.hide(false)}else{this.$f.showUberPopup(this.$e.get_element())}},$b:function(){this.$e.get_element().addClass('tabToolbarButtonFlyoverShown')},$a:function(){this.$e.get_element().removeClass('tabToolbarButtonFlyoverShown')}},ss.makeGenericType(spiff.BaseView$1,[gv]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[gv])]);ss.initClass(gv,a,{add_flyoverShown:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_flyoverShown:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_flyoverHidden:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_flyoverHidden:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_buttonAction:function(){return this.action},get_flyoverViewModel:function(){return this.popupContent},get_enabled:function(){return this.$5},set_enabled:function(e){if(!this.$a&&this.$5!==e){this.$5=e;this.notifyPropertyChanged('enabled')}},get_iconText:function(){return this.$7},set_iconText:function(e){if(!this.$a&&!(ss.compareStrings(this.$7,e,false)===0)){this.$7=e;this.notifyPropertyChanged('iconText')}},get_iconClass:function(){return this.$6},set_iconClass:function(e){if(!this.$a&&!(ss.compareStrings(this.$6,e,false)===0)){this.$6=e;this.notifyPropertyChanged('iconClass')}},get_isActive:function(){return this.$9},set_isActive:function(e){if(!this.$a&&this.$9!==e){this.$9=e;this.notifyPropertyChanged('isActive')}},get_text:function(){return this.$c},set_text:function(e){if(!this.$a&&!(ss.compareStrings(this.$c,e,false)===0)){this.$c=e;this.notifyPropertyChanged('text')}},get_tooltipText:function(){return this.$d},set_tooltipText:function(e){if(!this.$a&&!ss.referenceEquals(this.$d,e)){this.$d=e;this.notifyPropertyChanged('tooltipText')}},get_isSeparator:function(){return this.$a},get_isCustomViewsButton:function(){return ss.equalsT('customviews',this.$8)},get_isShareButton:function(){return ss.equalsT('share',this.$8)},get_isRedoButton:function(){return ss.equalsT('redo',this.$8)},dispose:function(){this.$2();spiff.BaseViewModel.prototype.dispose.call(this)},execute:function(){if(!ss.staticEquals(this.action,null)){this.action()}},showUberPopup:function(e){if(ss.isValue(this.popupContent)){this.$2();this.popupViewModel=spiff.UberPopupViewModel.createForContent(this.popupContent,e,null,true);this.popupViewModel.options=this.$b;if(ss.isValue(this.$2$1)){this.popupViewModel.add_shown(this.$2$1)}if(ss.isValue(this.$2$2)){this.popupViewModel.add_hidden(ss.mkdel(this,this.$4))}this.popupViewModel.show()}},$3:function(){if(ss.isValue(this.popupViewModel)){this.popupViewModel.hide(false)}},$4:function(){this.$2$2();this.$2()},$2:function(){if(ss.isValue(this.popupViewModel)){this.popupViewModel.remove_shown(this.$2$1);this.popupViewModel.remove_hidden(ss.mkdel(this,this.$4));this.popupViewModel.dispose();this.popupViewModel=null}}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(gw,a,{createMenu:function(){return this.$e(null)},execute:function(){},dropdownClicked:function(e){var L=this.createMenu();if(!L.get_menuItems().some(function(hA){return hA.get_enabled()})){return null}var hy=spiff.MenuViewModel.createForMenu(L,ho.commandMenuItemClicked);hy.add_hidden(ss.mkdel(this,function(){this.set_isActive(false)}));var hz=spiff.ShowMenuOptions.create(e,false,e.outerWidth(false));hz.additionalMenuClass='tabToolbarDropdownMenu '+this.get_iconClass()+'ContextMenu';hy.show(hz);this.set_isActive(true);return hy}},gv,[ss.IDisposable,spiff.IViewModel]);ss.initClass(gx,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(gy,a,{get_toggleToText:function(){return this.$e},set_toggleToText:function(e){this.$e=e}},gv,[ss.IDisposable,spiff.IViewModel]);ss.initClass(gz,a,{get_dom:function(){return this.get_template()},$o:function(){return this.$3$1},$p:function(e){this.$3$1=e},$r:function(){return this.$3$2},$s:function(e){this.$3$2=e},$q:function(){return this.$v.get_customViewsViewModel()},$t:function(e){this.get_dom().nonVizItems.toggleClass('horizontal',e);this.get_dom().vizItems.toggleClass('horizontal',e);this.get_dom().toolbar.css('line-height',(e?(this.$v.get_toolbarHeight()+'px'):''))},$m:function(){this.get_dom().toolbar.height(this.$v.get_toolbarHeight());this.get_dom().vizItems.empty();var e=ss.getEnumerator(this.$v.get_vizItems());try{while(e.moveNext()){var L=e.current();var hy=gu.create(L);this.get_dom().vizItems.append(hy.get_element());if(L.get_isRedoButton()){this.$s(hy)}}}finally{e.dispose()}if(tsConfig.is_metrics_enabled){var hz=new gv(tab.Strings.ToolbarShowPerformanceRecording,'tab-icon-performance',ss.mkdel(this.$v,this.$v.showPerformanceMetrics));var hA=gu.create(hz);this.get_dom().vizItems.append(hA.get_element())}this.get_dom().nonVizItems.empty();var hB=ss.getEnumerator(this.$v.get_nonVizItems());try{while(hB.moveNext()){var hC=hB.current();var hD=gu.create(hC);this.get_dom().nonVizItems.append(hD.get_element());if(hC.get_isCustomViewsButton()){hD.get_dom().get_text().css('max-width','160px');this.$p(hD);this.updateCustomViewsButton()}}}finally{hB.dispose()}this.$n();this.$f()},updateCustomViewsButton:function(){if(ss.isNullOrUndefined(this.$o())){return}var e=this.$q().get_currentCustomViewName();if(ss.isNullOrUndefined(e)){this.$o().get_element().css('display','none')}else{this.$o().get_toolbarButton().set_label((this.$q().get_dirty()?'*':'')+e);this.$o().get_element().css('display','');this.$f()}},$n:function(){if(this.$u&&this.$v.get_shouldShowPublicWatermarkItems()){this.get_dom().publicLogo.empty();this.get_dom().publicBelowLogo.empty();this.$c();if(this.$v.get_shouldShowViewCount()){this.$d();if(this.$v.get_shouldShowAuthorByLine()){this.$a()}}if(this.$v.get_shouldShowAuthorByLine()){this.$9()}this.$f()}},$c:function(){this.get_dom().publicLogo.prop('href',this.$v.get_publicLogoLink());var e=$('<div />');e.addClass('tab-publicLogo');this.get_dom().publicLogo.append(e)},$d:function(){var e=$('<span>').html(this.$v.get_viewCountText());this.get_dom().publicBelowLogo.append(e)},$a:function(){var e=$('<span>');e.addClass('tab-belowPublicDivider');e.html('|');this.get_dom().publicBelowLogo.append(e)},$9:function(){var e=$('<span>').html(this.$v.get_authorProfileLink());this.get_dom().publicBelowLogo.append(e)},forceResizeToolbar:function(){this.$f()},$f:function(){var e=tabBootstrap.MetricsController.createContext('TBRHRE'.toString(),64,null);try{var L=this.get_dom().vizItems;var hy=this.get_dom().nonVizItems;if(L.children().length===0&&hy.children().length===0){return}this.$i(hy);if(!this.$v.get_shouldForceLabelsBelowIcons()){this.$t(true)}this.$h();this.$g();this.$e(hy);this.$k()}finally{if(ss.isValue(e)){e.dispose()}}},$k:function(){var e=ss.getEnumerator(this.$v.get_nonVizItems());try{while(e.moveNext()){var L=e.current();if(ss.isValue(L.popupViewModel)){L.popupViewModel.updatePosition()}}}finally{e.dispose()}},$e:function(e){e.children('.tabToolbarButton').each(function(L,hy){var hz=$(hy);hz.css('width',hz.width()+1)})},$i:function(e){e.children('.tabToolbarButton').css('width','')},$h:function(){var e=this.get_dom().vizItems;var L=this.get_dom().nonVizItems;var hy=this.get_dom().toolbar.width();var hz=e.width();var hA=L.width();var hB=(this.$v.get_shouldShowPublicWatermarkItems()?this.get_dom().publicItems.outerWidth():0);var hC=this.$l(hy,hz,hB,hA);if(!hC&&this.$v.get_canPutLabelsUnderneath()&&!this.$v.get_shouldForceLabelsBelowIcons()){this.$t(false);hz=e.width();hA=L.width();hC=this.$l(hy,hz,hB,hA)}if(!hC&&ss.isValue(this.$r())){this.$r().get_element().hide();hz=e.width();hC=this.$l(hy,hz,hB,hA)}if(!hC){L.addClass('hideLabels');this.$b(L);if(this.$v.get_canPutLabelsUnderneath()){e.addClass('hideLabels');this.$b(e)}hz=e.width();hA=L.width();hC=this.$l(hy,hz,hB,hA)}if(!hC){e.addClass('hideLabels');this.$b(e);hz=e.width();hC=this.$l(hy,hz,hB,hA)}if(!hC&&this.$v.get_shouldShowPublicWatermarkItems()){this.get_dom().publicBelowLogo.hide();this.get_dom().publicItems.addClass('narrow');this.get_dom().publicLogo.attr('title',tab.Strings.ToolbarAboutTableau)}},$g:function(){var e=this.get_dom().vizItems;var L=this.get_dom().nonVizItems;var hy=this.get_dom().toolbar.width();var hz=e.width();var hA=L.width();var hB=(this.$v.get_shouldShowPublicWatermarkItems()?this.get_dom().publicItems.outerWidth():0);var hC=hz+70;var hD=this.$l(hy,hC,hB,hA);if(hD&&this.$v.get_shouldShowPublicWatermarkItems()){this.get_dom().publicBelowLogo.show();this.get_dom().publicItems.removeClass('narrow');this.get_dom().publicLogo.attr('title',tab.Strings.ToolbarAboutTableau);hB=this.get_dom().publicItems.outerWidth()}var hE=false;if(tsConfig.isPublic){var hF=hz+170;hE=this.$l(hy,hF,hB,hA)}else{var hG=hz+300;hE=this.$l(hy,hG,hB,hA)}if(hE){e.removeClass('hideLabels');this.$j(e);hz=e.width()}var hH=false;if(tsConfig.isPublic){var hI=hz+100;hH=this.$l(hy,hI,hB,hA)}else{var hJ=hz+355;hH=this.$l(hy,hJ,hB,hA)}if(hH){L.removeClass('hideLabels');this.$j(L);if(this.$v.get_canPutLabelsUnderneath()){e.removeClass('hideLabels');this.$j(e)}hz=e.width();hA=L.width()}if(ss.isValue(this.$r())){var hK=this.$r().get_element().outerWidth();var hL=hz+hK;var hM=this.$l(hy,hL,hB,hA);if(hM){this.$r().get_element().show();hz=e.width();hA=L.width()}}if(!this.$v.get_shouldForceLabelsBelowIcons()){var hN=hz+60;var hO=this.$l(hy,hN,hB,hA)&&this.$v.get_canPutLabelsUnderneath()&&e.hasClass('hideLabels')&&L.hasClass('hideLabels');if(hO){e.removeClass('hideLabels');L.removeClass('hideLabels');this.$t(false)}}},$b:function(e){if(e.hasClass('hideLabels')){e.find('.tabToolbarButton').each(function(L,hy){var hz=$(hy).find('.tabToolbarButtonText').text();hy.setAttribute('title',hz)})}},$j:function(e){if(!e.hasClass('hideLabels')){e.find('.tabToolbarButton').each(function(L,hy){hy.removeAttribute('title')})}},$l:function(e,L,hy,hz){if(L+hy+hz>=e){return false}var hA=Math.max(L,hz)+ss.Int32.div(hy,2)>=ss.Int32.div(e,2);if(this.$v.get_shouldShowPublicWatermarkItems()&&hy>0&&hA){return false}return true},onAddedToDom:function(){this.$u=true;this.$m();spiff.Widget.prototype.onAddedToDom.call(this)}},ss.makeGenericType(spiff.BaseView$1,[gA]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[gA])]);ss.initClass(gA,a,{add_newToolbar:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newToolbar:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_viewCountLoaded:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_viewCountLoaded:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_toolbarHeight:function(){return tabBootstrap.ViewerBootstrap.get_instance().get_vizToolbarHeight()},get_shouldShowPublicWatermarkItems:function(){return tsConfig.isPublic&&tsConfig.watermarkdisplay},get_shouldShowAuthorByLine:function(){return tsConfig.isPublic&&tsConfig.show_byline},get_shouldShowViewCount:function(){return tsConfig.isPublic&&tsConfig.showViewCount&&this.$d>tsConfig.viewCountThreshold},get_shouldForceLabelsBelowIcons:function(){return this.get_canPutLabelsUnderneath()&&tsConfig.is_mobile},get_canPutLabelsUnderneath:function(){return this.get_toolbarHeight()>40},get_publicLogoLink:function(){var e=(ss.isValue(tabBootstrap.ViewerBootstrap.get_instance().location)?tabBootstrap.ViewerBootstrap.get_instance().location.toString():'');return tsConfig.watermarklink+'?ref='+e.split('?')[0]},get_authorProfileLink:function(){var e=window.location;var L=ss.formatString('{0}//{1}/profile/app/rdr/repo?workbook={2}',e.protocol,e.hostname,tsConfig.workbook_repo_url);return ss.formatString('<a class="tab-toolbarAuthorByText" target="_blank" href="{0}">{1}</a>',tableau.format.escapeHTML(L),tableau.format.escapeHTML(tab.Strings.ToolbarMoreByAuthor))},get_viewCountText:function(){var e=tableau.format.formatIntAuto(this.$d,'t',',','3:0');return tab.Strings.ToolbarViewCount(e)},get_legacyMenuItems:function(){return this.$c.get_legacyMenuItems()},get_vizItems:function(){return this.$e},get_nonVizItems:function(){return this.$b},get_customViewsViewModel:function(){return this.$9},get_forceHideCustomViewsButton:function(){return this.$a},get_useSmallScreenToolbar:function(){var e=window.screen;return e.width<430||e.height<430},dispose:function(){spiff.BaseViewModel.prototype.dispose.call(this);this.$9.dispose();this.$5()},$4:function(e,L){for(var hy=0;hy<e.length;hy++){var hz=e[hy];var hA=tab.CommandItemWrapper.create(hz);tab.Param.verifyValue(hz,'commandItem');switch(hA.get_commandsType()){case'separator':{L.push(gv.createSeparator());break}case'item':{if(gv.shouldShowButton(hA,this)){this.$2(hz,L)}break}case'subcommands':{if(hA.get_iconRes()==='toggle-updates'){var hB={$:this.$3(tab.CommandsPresModelWrapper.create(hA.get_commands()).get_commandItems(),L)};var hC={$:tab.ApplicationModel.get_instance().get_workbook()};hC.$.withDashboard(ss.mkdel({workbook:hC,button:hB},function(){if(this.workbook.$.get_isCurrentSheetStoryboard()){this.button.$.set_enabled(false)}}))}break}}}},$5:function(){for(var e=0;e<this.$e.length;e++){var L=this.$e[e];L.dispose()}ss.clear(this.$e);for(var hy=0;hy<this.$b.length;hy++){var hz=this.$b[hy];hz.dispose()}ss.clear(this.$b)},$7:function(e,L){if(this.$a&&this.$9.get_hasCustomViews()){this.$a=false;this.$6()}},$8:function(e){var L=e;if(ss.isValue(L['viewCount'])){this.$d=parseInt(L['viewCount'],10);if(this.get_shouldShowViewCount()){this.raiseActionEvent(this.$2$2)}}},$2:function(e,L){var hy=gv.createFromCommandItem(e,'tab-icon-',this);L.push(hy)},$3:function(e,L){if(e.length!==2){return null}var hy=gy.createFromCommandItems(e[0],e[1],'tab-icon-');if(ss.isValue(hy)){L.push(hy)}return hy},$6:function(){var e=tabBootstrap.MetricsController.createContext('TBRHNT'.toString(),64,null);try{this.$5();if(tsConfig.toolbarvis){this.$4(this.$c.get_vizCommandItems(),this.$e)}this.$4(this.$c.get_nonVizCommandItems(),this.$b);this.raiseActionEvent(this.$2$1)}finally{if(ss.isValue(e)){e.dispose()}}},isLegacyMenuItemEnabled:function(e){return this.$c.isLegacyMenuItemEnabled(e)},showPerformanceMetrics:function(){tab.CommandController.get().get_legacySession().saveAndOpenMetricsView()},showShareDialog:function(){var e=ss.getEnumerator(this.get_nonVizItems());try{while(e.moveNext()){var L=e.current();if(L.get_isShareButton()){L.showUberPopup($('.tab-icon-share').parent('.tabToolbarButton'));$('.tab-glass').css('opacity','0.5').css('background-color','black');return}}}finally{e.dispose()}}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(gB,a,{add_closed:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_closed:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_prePosition:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_prePosition:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_positioned:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_positioned:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_showed:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_showed:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},get_isShown:function(){return this.$f},get_body:function(){return this.$d.get_body()},set_body:function(e){this.$d.get_body().empty().append(e)},get_location:function(){return this.$k},set_location:function(e){this.move(e)},get_horizontalOffset:function(){return this.$e},set_horizontalOffset:function(e){this.$e=e},get_verticalOffset:function(){return this.$n},set_verticalOffset:function(e){this.$n=e},get_lastLocation:function(){return this.$g},set_lastLocation:function(e){this.$g=e},get_previousShownArgs:function(){return this.$i},get_showAbove:function(){return this.$j},set_showAbove:function(e){this.$j=e},setTooltipBodyAndReposition:function(e,L){this.requestLayout(ss.mkdel(this,function(){if(ss.isValue(L)){L()}this.get_body().empty().append(e)}))},show:function(e,L){if(ss.isNullOrUndefined(L)||this.$m){this.close();return}this.set_lastLocation(L);this.ensureAttachedAndSized();this.$l=true;if(this.get_isShown()){this.setTooltipBodyAndReposition(e)}else{this.get_body().empty().append(e);this.requestLayout()}},move:function(e){if(!this.$f||ss.isNullOrUndefined(e)||ss.isValue(this.$k)&&this.$k.x===e.x&&this.$k.y===e.y){return}this.$g=e;this.requestLayout()},close:function(){this.$l=false;if(!this.$f){return}this.detach();this.$f=false;this.onClosed()},dispose:function(){this.close();if(!tsConfig.is_mobile){$(window).unbind(this.createNamespacedEventName('resize'))}spiff.Widget.prototype.dispose.call(this)},forceLayout:function(){this.$i=null;this.requestLayout()},requestLayout:function(e,L){if(ss.isValue(e)){this.$h.push(e)}if(ss.isValue(L)){ba.getViewport(ss.mkdel(this,function(hy){this.layoutTooltip(hy,L)}))}else{ba.getViewport(ss.mkdel(this,this.layoutTooltip))}},onShowed:function(e){if(ss.isValue(this.$2$4)){this.$2$4(this,e)}},onPrePosition:function(){if(ss.isValue(this.$2$2)){this.$2$2()}},onPositioned:function(e){if(ss.isValue(this.$2$3)){this.$2$3(this,e)}},onClosed:function(){if(ss.isValue(this.$2$1)){this.$2$1()}},ensureAttachedAndSized:function(){if(!this.get_element().parent().is(document.body)){this.get_element().appendTo(document.body)}},detach:function(){this.get_element().hide();this.get_element().detach();this.get_element().unbind(this.get_eventNamespace());this.get_element().find('*').unbind(this.get_eventNamespace()).removeClass('hover')},$6:function(e,L){if(ss.isNullOrUndefined(e)||ss.isNullOrUndefined(L)){return null}this.$k=e;var hy=this.get_element().css('top');var hz=this.get_element().css('left');this.get_element().css(ss.mkdict(['top','0','left','0']));var hA=ss.isValue(this.$c)&&e.y>=ss.unbox(this.$c)-16;var hB=this.get_element().height();var hC=this.get_element().width();var hD=L.getVisibleRoom(e,1);var hE;if(!(hD.roomRight>=hC+this.get_horizontalOffset())&&hD.roomRight+hD.roomLeft>=hC+this.get_horizontalOffset()){hE=parseInt(Math.max(0,hD.roomRight-hC).toString())}else{hE=this.get_horizontalOffset()}var hF=hB+this.get_verticalOffset();var hG=hC+hE;var hH;var hI;if(hD.roomRight>=hG){hH=true;hI=e.x+hE}else if(hD.roomLeft>=hG){hH=false;hI=e.x+hD.roomRight-hG}else{hH=true;hI=Math.max(0,e.x-hG+hD.roomRight)}var hJ=(this.get_showAbove()?this.$7(e,hD,hF,hG):this.$8(e,hD,hF,hG,hA));var hK=hJ<=e.y;this.get_element().css(ss.mkdict(['left',hz,'top',hy]));var hL=new fM;if(hK){if(hH){hL.position='AR'}else{hL.position='AL'}}else if(hH){hL.position='BR'}else{hL.position='BL'}hL.shownX=hI;hL.shownY=hJ;hL.origX=e.x;hL.origY=e.y;hL.viewport=L;return hL},$a:function(e){var L=this.$9(e.position);if(!this.get_element().hasClass(L)){this.get_element().removeClass('tab-tooltipAR tab-tooltipAL tab-tooltipBL tab-tooltipBR');this.get_element().addClass(L)}this.get_element().css(ss.mkdict(['left',e.shownX+'px','top',e.shownY+'px']));this.$i=e},$9:function(e){var L;switch(e){case'AR':{L='tab-tooltipAR';break}case'AL':{L='tab-tooltipAL';break}case'BL':{L='tab-tooltipBL';break}case'BR':default:{L='tab-tooltipBR';break}}return L},layoutTooltip:function(e,L){if(L){var hy=this.$6(this.get_lastLocation(),e);if(ss.isNullOrUndefined(hy)){return}this.$a(hy)}else{for(var hz=0;hz<this.$h.length;hz++){var hA=this.$h[hz];hA()}ss.clear(this.$h);this.onPrePosition();var hB=this.$6(this.get_lastLocation(),e);if(!this.$b(hB)){return}this.$a(hB);this.onPositioned(hB);if(this.$l){this.$l=false;this.get_element().show();this.$f=true;this.onShowed(hB)}}},$b:function(e){if(ss.isNullOrUndefined(e)){return false}if(this.$l){return true}if(fM.areShownArgsSame(e,this.$i)&&parseInt(this.get_element().css('top'))===e.shownY){return false}return true},$8:function(e,L,hy,hz,hA){var hB;if(!hA&&L.roomBelow>=hy){hB=e.y+this.get_verticalOffset();this.$c=null}else if(!hA&&L.roomAbove>=hy&&L.roomRight>=hz){hB=e.y+(L.roomBelow-hy+this.get_verticalOffset())}else if(L.roomAbove>=hy){hB=e.y-hy;if(!ss.isValue(this.$c)){this.$c=e.y}}else{hB=Math.max(0,e.y-L.roomAbove)}return hB},$7:function(e,L,hy,hz){var hA;if(L.roomAbove>=hy){hA=e.y-hy;if(!ss.isValue(this.$c)){this.$c=e.y}}else if(L.roomBelow>=hy){hA=e.y+this.get_verticalOffset();this.$c=null}else if(L.roomAbove>=hy&&L.roomRight>=hz){hA=e.y+(L.roomBelow-hy+this.get_verticalOffset())}else{hA=Math.max(0,e.y-L.roomAbove)}return hA},setSuppressTooltip:function(e){this.$m=e;if(this.$m){this.close()}}},spiff.Widget,[spiff.IAppendableView,ss.IDisposable,dx]);ss.initClass(gD,a,{add_tooltipClosed:function(e){this.$1$1=ss.delegateCombine(this.$1$1,e)},remove_tooltipClosed:function(e){this.$1$1=ss.delegateRemove(this.$1$1,e)},add_mouseExitedTooltip:function(e){this.$1$2=ss.delegateCombine(this.$1$2,e)},remove_mouseExitedTooltip:function(e){this.$1$2=ss.delegateRemove(this.$1$2,e)},add_ubertipUpdated:function(e){this.$1$3=ss.delegateCombine(this.$1$3,e)},remove_ubertipUpdated:function(e){this.$1$3=ss.delegateRemove(this.$1$3,e)},add_ubertipActionExecuted:function(e){this.$1$4=ss.delegateCombine(this.$1$4,e)},remove_ubertipActionExecuted:function(e){this.$1$4=ss.delegateRemove(this.$1$4,e)},add_ubertipCommandExecuted:function(e){this.$1$5=ss.delegateCombine(this.$1$5,e)},remove_ubertipCommandExecuted:function(e){this.$1$5=ss.delegateRemove(this.$1$5,e)},get_isTooltipShown:function(){return this.$i.get_isShown()},get_tooltip:function(){return this.$i},get_ubertip:function(){return this.$j},get_currentBehavior:function(){return this.$2(this.get_currentBehaviorType())},get_currentBehaviorType:function(){return this.$e},get_defaultBehaviorType:function(){return this.$f},get_ubertipShouldEnforceButtonOrdering:function(){return false},get_multiSelectCompleteBehavior:function(){return'sticky'},get_hasContextProvider:function(){return ss.isValue(this.$d)},$c:function(){return ss.mkdel(this,function(){this.$3()})},get_testUseOnlyLastHoveredObjectID:function(){return gD.$4},set_testUseOnlyLastHoveredObjectID:function(e){gD.$4=e},close:function(){this.$i.close()},hoverOverObject:function(e,L,hy,hz,hA,hB,hC,hD){if(!this.readyForHover){return}if(ss.isNullOrUndefined(hz)){return}var hE=this.getHoverBehavior(hC);this.switchTooltipMode(hE);var hF=ss.referenceEquals(hz.toString(),gD.$4);var hG=ss.mkdel(this,function(){var hI=hD==='viz'&&this.isVizTooltipCurrentlyEmpty();this.get_currentBehavior().hoverOverObject(e,hA,hI,hF)});if(hC==='mark'&&tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&ss.isValue(hB)&&!this.shouldForceRemoteTooltipForObject(hC,hz)){if(hF){hG()}else{var hH=this.getAffectedObjects('mark',hz);this.runBehaviorWithLocalUbertip(hG,hz,hH,L,hy,hB,hD,hC,'on-hover')}}else{this.runBehaviorWithRemoteUbertip(hG,{x:hy.x,y:hy.y,w:0,h:0},hD,'on-hover',hC)}},hoverOverWhitespace:function(e,L){if(!this.readyForHover){return}var hy='W'===gD.$4;this.get_currentBehavior().hoverOverWhitespace(e);if(this.get_currentBehavior().isHoverAllowed(e)){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()||!hy&&this.needRemoteCommand(L,'whitespace','on-hover',0)){gD.$4='W';this.runBehaviorWithRemoteUbertip(null,{x:-1,y:-1,w:0,h:0},L,'on-hover','whitespace')}}else if(this.$i.get_isShown()){gD.$4='W';this.$i.close()}},hoverOverHeader:function(e,L,hy,hz,hA){if(!this.readyForHover){return}var hB=hA.length>0&&tab.ActionUtils.getApplicableActions(this.visualId.AVP,'on-hover','url',hz).length>0;if(hB){var hC=!ss.referenceEquals(hA.toString(),gD.$4);this.hoverOverCoordinates(e,L,hy,hz,hA,hC)}else{this.hoverOverCoordinates(e,L,hy,hz)}},hoverOverCoordinates:function(e,L,hy,hz,hA,hB){if(!this.readyForHover){return}gD.$4=(ss.isValue(hA)?hA.toString():'U');var hC=this.getHoverBehavior(hy);this.switchTooltipMode(hC);var hD=ss.mkdel(this,function(){var hE=hz==='viz'&&this.isVizTooltipCurrentlyEmpty();this.get_currentBehavior().hoverOverObject(e,false,hE,false)});this.runBehaviorWithRemoteUbertip(hD,{x:L.x,y:L.y,w:0,h:0},hz,'on-hover',hy,hA,hB)},singleSelectComplete:function(e,L,hy,hz,hA,hB,hC){var hD=this.getSingleSelectBehavior(hB);this.switchTooltipMode(hD);this.suppressHoverIfNecesary();var hE=this.getSingleSelectBehaviorCallback(e);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&hB==='mark'){var hF=this.getAffectedObjects(hB,hz);this.runBehaviorWithLocalUbertip(hE,hz,hF,L,hy,hA,hC,hB,'on-select')}else{var hG={x:hy.x,y:hy.y,w:0,h:0};this.runBehaviorWithRemoteUbertip(hE,hG,hC,'on-select',hB)}},singleSelectCoordinates:function(e,L,hy,hz){var hA=this.getSingleSelectBehavior(hz);this.switchTooltipMode(hA);var hB=ss.mkdel(this,function(){this.get_currentBehavior().singleSelectComplete(e);if(this.get_tooltip().get_isShown()){this.triggerUbertipButtonUpdate()}});this.runBehaviorWithRemoteUbertip(hB,{x:L.x,y:L.y,w:0,h:0},hy,'on-select',hz)},multiSelectComplete:function(e,L,hy){this.switchTooltipMode(this.get_multiSelectCompleteBehavior());this.suppressHoverIfNecesary();var hz=ss.mkdel(this,function(){this.get_currentBehavior().multiSelectComplete(e);gD.$4='U';if(this.get_tooltip().get_isShown()){this.triggerUbertipButtonUpdate()}});this.runBehaviorWithRemoteUbertip(hz,L,hy,'on-select','unspecified')},onTap:function(){},onScroll:function(){this.get_currentBehavior().onScroll()},onMoving:function(){},onDragEnd:function(e){},onPanOrDragStart:function(e){this.get_currentBehavior().onPanningOrDragging()},onPinchEnd:function(e){},onPress:function(){},onMouseLeaveTheView:function(){gD.$4='U'},dispose:function(){if(ss.keyExists(this.tooltipBehaviors,this.get_currentBehaviorType())){this.tooltipBehaviors[this.get_currentBehaviorType()].detach()}this.disposables.dispose();this.get_tooltip().get_body().unbind('mouseleave.basemode');this.get_tooltip().dispose();this.get_tooltip().remove_closed(ss.mkdel(this,this.$5));this.get_tooltip().remove_prePosition(ss.mkdel(this,this.$0));this.get_tooltip().remove_showed(ss.mkdel(this,this.$0));this.get_ubertip().remove_commandExecuted(ss.mkdel(this,this.$9));this.get_ubertip().remove_actionExecuted(ss.mkdel(this,this.$8));this.$j.remove_ubertipMenuToggled(ss.mkdel(this,this.$b));this.$j.remove_ubertipMenuClosed(ss.mkdel(this,this.$a));this.get_ubertip().dispose()},shownTooltipIsStatic:function(){return this.get_currentBehavior().shownTooltipIsStatic()},isHoverAllowed:function(e){return this.get_currentBehavior().isHoverAllowed(e)},clearTooltipWithFakeHover:function(){this.hoverOverWhitespace({x:-1,y:-1},'viz')},suppress:function(e){this.$i.setSuppressTooltip(e);this.readyForHover=!e},buildBehaviorsDictionary:null,getSingleSelectBehaviorCallback:null,getSingleSelectBehavior:function(e){return this.$f},getHoverBehavior:function(e){return this.$f},shouldForceRemoteTooltipForObject:function(e,L){return false},suppressHoverIfNecesary:function(){this.readyForHover=false},onBehaviorSwitch:function(){},modelUpdateCallback:function(e){gD.$0=e.tupleId;if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&this.get_currentBehaviorType()==='smooth'&&ss.isValue(e.markBounds)){this.get_currentBehavior().set_serverMarkBounds(e.markBounds)}this.$i.setTooltipBodyAndReposition(this.get_ubertip().get_element(),ss.mkdel(this,function(){var L=ss.isValue(e)&&ss.referenceEquals(e.tupleId,0);if(!L&&!ss.referenceEquals(e.tupleId,gD.$0)){return}var hy=this.$j.get_model();this.updateTooltipFromModel(e);this.updateUbertipFromModel(e);if(ss.isValue(this.$1$3)){this.$1$3(e)}if(ss.isValue(hy)&&hy.rid===e.rid){this.get_ubertip().updatePartiallyFromRemote(hy)}}))},updateModelFromServerResponse:function(e){this.get_ubertip().updatePartiallyFromRemote(e)},updateUbertipFromModel:function(e){e.tooltipOffset=(ss.isValue(this.$j.get_model())?this.$j.get_model().tooltipOffset:null);if(!_.isEqual(e,this.$j.get_model())){this.$j.set_model(e)}},updateTooltipFromModel:function(e){this.get_tooltip().tupleId=e.tupleId;if(ss.isValue(e.interactedTupleId)){this.get_tooltip().interactedTupleId=e.interactedTupleId}else{}if(ss.isValue(e.tooltipOffset)){if(ss.isValue(e.tooltipOffset.x)){this.get_tooltip().set_horizontalOffset(16+e.tooltipOffset.x)}if(ss.isValue(e.tooltipOffset.y)){this.get_tooltip().set_verticalOffset(16+e.tooltipOffset.y)}}else{this.get_tooltip().set_horizontalOffset(16);this.get_tooltip().set_verticalOffset(16)}},switchTooltipMode:function(e){if(this.get_currentBehaviorType()===e){return false}var L=this.get_currentBehavior();L.detach();var hy=this.$2(e);hy.attach();this.$e=e;this.onBehaviorSwitch();return true},prepareForPositioning:function(){this.$j.prepareForPositioning(this.shouldShowCommandButtons()&&this.get_ubertip().hasActionsOrSummaryOrCommands())},triggerUbertipButtonUpdate:function(){if(this.shouldShowCommandButtons()&&this.get_ubertip().hasActionsOrSummaryOrCommands()&&this.$j.get_isShowingActionAndCommandButtons()){return}this.$i.forceLayout()},handleUbertipButtons:function(e,L){if(this.shouldShowCommandButtons()&&this.get_ubertip().hasActionsOrSummaryOrCommands()){this.$j.showMenuActionsAndCommandButtons(L)}else{this.$j.hideMenuActionsAndCommandButtons(true)}},shouldShowCommandButtons:function(){return this.get_currentBehavior().shouldShowCommandButtons()},isVizTooltipCurrentlyEmpty:function(){return ss.isValue(this.get_ubertip().get_model())&&tab.MiscUtil.isNullOrEmpty(this.get_ubertip().get_model().tooltipHtml)},getAffectedObjects:function(e,L){var hy=null;if(this.get_hasContextProvider()){if(ss.contains(this.$d.getSelectedObjects(e),L)){hy=this.$d.getSelectedObjects(e)}else{hy=[L]}}return hy},isCurrentObjectSelected:function(){if(ss.isNullOrUndefined(this.$j.get_model())){return false}var e=((this.get_hasContextProvider()&&ss.isValue(this.$j.get_model().interactedTupleId))?this.$d.isMarkSelected(ss.unbox(this.$j.get_model().interactedTupleId)):this.$j.get_model().tupleSelected);var L=this.$j.get_model().refLineSelected||this.$j.get_model().trendLineSelected;var hy=this.$j.get_model().imageRegion==='bottomaxis'||this.$j.get_model().imageRegion==='leftaxis'||this.$j.get_model().imageRegion==='rightaxis'||this.$j.get_model().imageRegion==='topaxis';var hz=this.$j.get_model().imageRegion==='xheader'||this.$j.get_model().imageRegion==='yheader';return e||L||hy||hz},runBehaviorWithLocalUbertip:function(e,L,hy,hz,hA,hB,hC,hD,hE){gD.$3+=1;gD.$1=this.visualId;var hF=gD.$3;var hG=ss.mkdel(this,function(hJ){if(!this.$4(hF.toString())){if(!ss.referenceEquals(this.visualId,gD.$1)){this.readyForHover=true}return}if(ss.isValue(hJ)){hJ.rid=hF;this.modelUpdateCallback(hJ);gD.$4=L.toString();if(hC==='viz'&&hJ.isExplicitlyEmpty){this.$1();return}if(ss.isValue(e)){e()}}});var hH=new tab.LocalUbertipInfo([L],hy,hB,false);if(this.needRemoteCommand(hC,hD,hE,L)){var hI=ss.mkdel(this,function(hJ){if(!this.$4(hF.toString())||!ss.isValue(hJ)){return}hJ.rid=hF;this.updateModelFromServerResponse(hJ)});tab.UberTipClientCommands.localAndRemoteUberTipCommand(hz,hC,this.visualId,{x:hA.x,y:hA.y,w:0,h:0},L,hH,hG,hI,this.$c(),hE)}else{tab.UberTipClientCommands.localOnlyUbertipCommand(hz,this.visualId,hH,hG)}},runBehaviorWithRemoteUbertip:function(e,L,hy,hz,hA,hB,hC){gD.$3+=1;gD.$1=this.visualId;var hD=gD.$3;var hE=ss.mkdel(this,function(hF){if(!this.$4(hD.toString())){if(!ss.referenceEquals(this.visualId,gD.$1)){this.readyForHover=true}return}if(ss.isValue(hF)){hF.rid=hD;this.modelUpdateCallback(hF);if(hy==='viz'&&hF.isExplicitlyEmpty){this.$1();return}if(ss.isValue(e)){e()}}else{this.$1();gD.$4=(ss.isValue(hB)?hB.toString():((hA==='whitespace')?'W':'U'))}});tab.UberTipClientCommands.remoteOnlyUbertipCommand(hy,this.visualId,L,hE,this.$c(),hz,hB,hC)},needRemoteCommand:function(e,L,hy,hz){if(tsConfig.is_authoring||!tab.ApplicationModel.get_instance().get_isLocalRenderMode()||e!=='viz'||L!=='mark'&&L!=='whitespace'||hy!=='on-hover'||this.$g>0){return true}var hA=ss.isValue(this.$d);var hB=hA&&this.$d.isMarkSelected(hz);return!hA||hB},$3:function(){this.get_ubertip().handleRemoteFailure();this.readyForHover=true},$1:function(){this.$i.close();this.readyForHover=true},$0:function(e,L){if(this.get_isTooltipShown()){this.readyForHover=true}},$2:function(e){return this.tooltipBehaviors[e]},$5:function(){this.readyForHover=true;if(ss.isValue(this.$1$1)){this.$1$1()}},$8:function(e,L){this.get_tooltip().close();if(ss.isValue(this.$1$4)){this.$1$4(e,L)}},$9:function(e,L){this.get_tooltip().close();if(ss.isValue(this.$1$5)){this.$1$5(e,L)}},$b:function(e){this.$h=e;this.get_currentBehavior().handleUbertipMenuToggle(e)},$a:function(){this.$h=false;this.get_currentBehavior().handleUbertipMenuClose()},$6:function(){this.$i.close()},$4:function(e){if(ss.isValue(e)&&!ss.referenceEquals(gD.$3.toString(),e)){return false}return true},$7:function(e){if(!this.get_tooltip().get_isShown()||!ss.isValue(this.$1$2)||this.$h){return}var L=tab.DomUtil.getDojoCoordsJQ(this.get_tooltip().get_body());if(L.x>e.pageX||L.x+L.w<=e.pageX||L.y>e.pageY||L.y+L.h<=e.pageY){this.$1$2({x:e.pageX,y:e.pageY})}}});ss.initClass(gC,a,{onTap:function(){this.get_tooltip().close()},onPress:function(){this.get_tooltip().close()},getSingleSelectBehaviorCallback:function(e){return ss.mkdel(this,function(){this.get_currentBehavior().singleSelectComplete(e)})},shouldForceRemoteTooltipForObject:function(e,L){var hy=this.getAffectedObjects(e,L);return e==='mark'&&ss.isValue(hy)&&hy.length>1}},gD);ss.initEnum(gE,a,{unspecified:'unspecified',sticky:'sticky',smooth:'smooth',disabled:'disabled'},true);ss.initClass(gF,a,{getSelectedObjects:function(e){if(e==='mark'){return this.$0.get_tupleSelection().get_ids()}else{return null}},isMarkSelected:function(e){return this.$0.get_tupleSelection().isMarkSelected(e)}});ss.initClass(gG,a,{get_multiSelectCompleteBehavior:function(){return'disabled'},getSingleSelectBehaviorCallback:function(e){return function(){}},buildBehaviorsDictionary:function(){var e=new cg;this.tooltipBehaviors['disabled']=e},suppressHoverIfNecesary:function(){}},gD);ss.initClass(gH,a,{get_ubertipShouldEnforceButtonOrdering:function(){return true},dispose:function(){var e=this.tooltipBehaviors['smooth'];e.remove_onMouseStop(ss.mkdel(this,this.$p));this.get_tooltip().remove_prePosition(ss.mkdel(this,this.prepareForPositioning));this.get_tooltip().remove_positioned(ss.mkdel(this,this.handleUbertipButtons));this.get_tooltip().remove_showed(ss.mkdel(this,this.handleUbertipButtons));this.$l();gD.prototype.dispose.call(this)},buildBehaviorsDictionary:function(){var e=spiff.ObjectRegistry.newLegacyTooltipBehavior(dJ).call(null,dJ,this.get_tooltip());var L=new fU(this.get_tooltip());this.tooltipBehaviors['sticky']=e;this.tooltipBehaviors['smooth']=L},getSingleSelectBehaviorCallback:function(e){return ss.mkdel(this,function(){this.get_currentBehavior().singleSelectComplete(e);if(this.get_tooltip().get_isShown()){this.triggerUbertipButtonUpdate()}if(!this.isCurrentObjectSelected()){this.switchTooltipMode('smooth');this.$m()}})},shouldShowCommandButtons:function(){var e=gD.prototype.shouldShowCommandButtons.call(this);var L=ss.isValue(this.get_ubertip().get_model());var hy=L&&ss.referenceEquals(this.get_ubertip().get_model().tupleId,0);if(!hy&&L){e=e&&this.isCurrentObjectSelected()}return e},getSingleSelectBehavior:function(e){return'sticky'},getHoverBehavior:function(e){var L=this.get_defaultBehaviorType();if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(e==='header'||e==='visualparts'){L='sticky'}else if(e==='mark'){L='smooth'}else{}}else if(e==='header'){L='sticky'}else{L='smooth'}return L},onPanOrDragStart:function(e){this.$l();gD.prototype.onPanOrDragStart.call(this,e)},onDragEnd:function(e){this.get_tooltip().close();this.$k();gD.prototype.onDragEnd.call(this,e)},onBehaviorSwitch:function(){if(this.get_currentBehaviorType()==='smooth'){this.$k()}else{this.$l()}},$n:function(e){if(this.readyForHover&&this.get_currentBehaviorType()==='smooth'&&this.get_isTooltipShown()){this.get_currentBehavior().onMouseMove(e)}},$o:function(e){if(this.get_isTooltipShown()){this.get_tooltip().close()}},$p:function(e){if(ss.isNullOrUndefined(this.get_ubertip().get_model())){return}var L=false;var hy=this.isCurrentObjectSelected();if(hy){L=this.switchTooltipMode('sticky')}this.$m();if(L&&this.get_tooltip().get_isShown()){this.triggerUbertipButtonUpdate()}},$m:function(){if(!this.get_tooltip().get_isShown()&&ss.isValue(this.get_tooltip().get_lastLocation())&&this.get_currentBehaviorType()==='sticky'&&this.isVizTooltipCurrentlyEmpty()&&this.get_ubertip().hasActionsOrSummaryOrCommands()){this.get_tooltip().show(this.get_tooltip().get_body().children()[0],this.get_tooltip().get_lastLocation())}else if(this.get_tooltip().get_isShown()&&this.get_currentBehaviorType()==='smooth'&&this.isVizTooltipCurrentlyEmpty()){this.get_tooltip().close()}},$k:function(){if(this.$q){return}this.$r.bind(this.$s,ss.mkdel(this,this.$n));this.$r.bind(this.$t,ss.mkdel(this,this.$o));this.$q=true},$l:function(){if(!this.$q){return}this.$r.unbind(this.$s);this.$r.unbind(this.$t);this.$q=false}},gD);ss.initClass(gI,a,{get_body:function(){return this.getElementBySelector('.tab-tooltipContent')}},spiff.Template,[ss.IDisposable]);ss.initEnum(gJ,a,{hover:0,click:1,dragSelect:2});ss.initClass(gK,a,{add_notifyChangeCalled:function(e){this.$3$1=ss.delegateCombine(this.$3$1,e)},remove_notifyChangeCalled:function(e){this.$3$1=ss.delegateRemove(this.$3$1,e)},_createTreeNode:function(e){e['isChecked']=this.model.isChecked(e['item']);var L=new tableau.base.widget.hsm._TreeNode(e);e['item'].node=L;return L},$0:function(e){return this.model.mayHaveChildren(e)},getIconClass:function(e,L){return'HFTreeNodeIcon'},getLabelClass:function(e,L){var hy=(this.model.isSingleSelect?'HFTreeNodeLabelSS':'HFTreeNodeLabel');hy+=(e.isRaggedOrSkipped?' HFTreeNodeRaggedOrSkipped':'');return hy},focusNode:function(e){var L=dojo.attr(e.labelNode,'tabindex');if(!!L){dojo.removeAttr(e.labelNode,'tabindex')}this.inherited(arguments);if(!!L){dojo.attr(e.labelNode,'tabindex',L)}},notifyChange:function(e){if(ss.isValue(this.$3$1)){this.$3$1(e)}},getDepth:function(e){var L=0;while(!ss.referenceEquals(e,this.rootNode)){L+=1;e=e.getParent()}return L},findEarlierNode:function(e,L,hy){return this.rEarlierContained(this.rootNode,0,e,L,hy)},rEarlierContained:function(e,L,hy,hz,hA){if(L>hA){return null}else if(L<hA){var hB=e.getChildren();var hC=hB.length;for(var hD=0;hD<hC;hD++){var hE=this.rEarlierContained(hB[hD],L+1,hy,hz,hA);if(ss.isValue(hE)){return hE}}}else{if(ss.referenceEquals(e,hy)){return hy}if(ss.referenceEquals(e,hz)){return hz}return null}return null}},dijit.Tree);ss.initClass(gL,a,{dispose:function(){this.$1.dispose();this.$1=null},destroy:function(e){this.dispose();this.inherited(arguments)},updateCheckState:function(){this.isChecked=this.tree.model.isChecked(this.item);var e=$(this.labelNode).find('input');e.prop('checked',this.isChecked)},setLabelNode:function(e){this.isChecked=this.tree.model.isChecked(this.item);var L=(this.isChecked?" checked='checked'":'');var hy='<input type=';if(this.tree.model.isSingleSelect){var hz=this.tree.model.field;if(ss.isValue(this.tree.model.session)){hz+=this.tree.model.session.get_viewId()}hy+="'radio' name='FI_"+hz+"'"}else{hy+="'checkbox'"}hy+=L+"/><a title='"+e+"'>"+e+'</a>';this.labelNode.innerHTML=hy;if(ss.isValue(this.$1)){this.$1.dispose()}this.$1=new tab.DisposableHolder;this.$1.add$1(spiff.EventUtil.bindWithDispose($(this.labelNode.firstChild),'click',ss.mkdel(this,this.$0)))},$0:function(e){this.isChecked=this.labelNode.firstChild.checked;this.tree.notifyChange(e);e.stopPropagation()}},dijit._TreeNode,[ss.IDisposable]);ss.initClass(gM,a,{$0:function(e){var L=e.t;if(tab.MiscUtil.isNullOrEmpty(L)){return false}var hy=L[L.length-1];var hz=hy.s;var hA='r';var hB='s';return ss.referenceEquals(hz,hA)||ss.referenceEquals(hz,hB)},itemsFromTable:function(e,L){var hy=[];var hz=(ss.isValue(e.table)?e.table.tuples:null);if(ss.isNullOrUndefined(e.table)){return hy}for(var hA=0;hA<hz.length;hA++){var hB=tableau.format.formatTupleDisplayName(hz[hA]);var hC=null;if(!!e.children){hC=this.itemsFromTable(e.children[hA],L+1)}var hD=new Object;hD.id=tableau.format.formatTupleUniqueName(hz[hA]);hD.schema=e.table.schema;hD.tuple=hz[hA];hD.label=hB;hD.level=L;hD.children=hC;hD.isRaggedOrSkipped=this.$0(hz[hA]);hy.push(hD)}return hy},$1:function(e){var L=e.node;L.updateCheckState();if(ss.isValue(e.node2)){e.node2.updateCheckState()}},onChildrenChange:function(e,L){e.children=L},getIdentity:function(e){return e.id},getLabel:function(e){return e.label},isChecked:function(e){return e.tuple.s},mayHaveChildren:function(e){return e.level+1<this.levels},getRoot:function(e,L){e(this.root)},getChildren:function(e,L,hy){if(ss.isValue(e.children)||ss.referenceEquals(e,this.root)){L(e.children)}else{var hz=ss.mkdel(this,function(hB){if(!!!hB[0].table){e.children=null}else{e.children=this.itemsFromTable(hB[0],e.level+1)}L(e.children)});var hA=new Object;hA.schema=e.schema;hA.tuples=[e.tuple];this.session.requestHSMChildren(this.field,hA,hz,hy)}},refresh:function(e){this.$2(this.root,e)},$2:function(e,L){if(tab.MiscUtil.isNullOrEmpty(e.children)){return}this.$3(e.children,L[0].table);_.each(e.children,ss.mkdel(this,function(hy,hz){if(!!hy.children){if(ss.isValue(L[0].children)&&hz<L[0].children.length){this.$2(hy,[L[0].children[hz]])}else{var hA=ss.mkdel(this,function(hC){this.$2(hy,hC)});var hB=new Object;hB.schema=hy.schema;hB.tuples=[hy.tuple];this.session.requestHSMChildren(this.field,hB,hA,null)}}}))},$3:function(e,L){var hy=L.tuples;for(var hz=0;hz<hy.length;hz++){if(e[hz].tuple.s!==hy[hz].s){e[hz].tuple.s=hy[hz].s;this.$1(e[hz])}}return e}});ss.initClass(gN,a,{get_element:function(){return $(this.div)},instantiate:function(e,L,hy,hz,hA,hB,hC,hD,hE){this.$j=e;this.$s=L;this.$i=hy;this.$w=hB;if(ss.isNullOrUndefined(this.$j)){this.$j=''}this.div.innerHTML="<div id='typein_"+tableau.format.escapeHTML(L)+"' class='TypeInDiv tab-ctrl-formatted-border tab-ctrl-formatted-darker-border-hover'>"+"<span class='TypeInQuerySpan'><input type='text' class='QueryBox' value='"+tableau.format.escapeHTML(this.$j)+"'/></span>"+"<span class='goButton' style='display:none'></span></div>";this.outerDiv=this.div.firstChild;this.querySpan=this.outerDiv.childNodes[0];this.queryBox=this.querySpan.childNodes[0];this.goButton=this.outerDiv.childNodes[1];var hF=function(hJ){hJ.stopPropagation()};var hG=$(this.queryBox);this.$o.add$1(spiff.EventUtil.bindWithDispose(hG,'keydown',ss.mkdel(this,this.$7)));this.$o.add$1(spiff.EventUtil.bindWithDispose(hG,'keyup',ss.mkdel(this,this.$8)));this.$o.add$1(spiff.EventUtil.bindWithDispose(hG,'blur',ss.mkdel(this,this.onInputBlur)));this.$o.add$1(spiff.EventUtil.bindWithDispose(hG,'focus',ss.mkdel(this,this.onQueryBoxFocus)));this.$o.add$1(spiff.EventUtil.bindWithDispose(hG,'click',ss.mkdel(this,this.$9)));this.$o.add$1(spiff.EventUtil.bindWithDispose(hG,'mousedown',hF));this.$o.add$1(spiff.EventUtil.bindWithDispose(hG,'mousemove',hF));var hH=$(this.goButton);this.$o.add$1(spiff.EventUtil.bindWithDispose(hH,'mousedown',ss.mkdel(this,this.$4)));this.$o.add$1(spiff.EventUtil.bindWithDispose(hH,'click',ss.mkdel(this,this.$3)));this.$o.add$1(spiff.EventUtil.bindWithDispose(hH,'mouseenter',ss.mkdel(this,this.$5)));this.$o.add$1(spiff.EventUtil.bindWithDispose(hH,'mouseleave',ss.mkdel(this,this.$6)));var hI=ss.mkdel(this,function(hJ,hK){if(this.$a()&&!this.isInsideWidget(hJ)){this.setNewPattern();this.queryBox.blur()}});spiff.GlobalTouchWatcher.add_firstTouch(hI);this.$o.add$1(new tab.CallOnDispose(function(){spiff.GlobalTouchWatcher.remove_firstTouch(hI)}));this.$t=false;this.$b()},isInsideWidget:function(e){return tab.DomUtil.isEqualOrAncestorOf(this.outerDiv,e.target)},destroy:function(){this.dispose()},dispose:function(){this.$o.dispose()},layout:function(){},editableValue:function(){return tableau.format.formatDataValue(this.$i,null,tableau.format.deriveNumberEditingFormat(this.$w),null,2)},setNewState:function(e,L,hy,hz,hA){this.$j=e;this.queryBox.value=e;if(ss.isValue(hy)){this.$i=hy}else if(ss.isValue(this.$i)){var hB=this.$i;this.$i=new Object;this.$i.s='n';this.$i.t=hB.t}this.$e();this.$q=L||[];this.$n=''},$g:function(){return tab.LegacyFilterModel.isNormalValue(this.$i)&&!this.$l},$2:function(e,L){this.$n='';this.$l=true;this.$q=e||[];this.$m=L},$c:function(e){this.clearTimeout();this.$k=window.setTimeout(e,500)},clearTimeout:function(){if(ss.isValue(this.$k)){window.clearTimeout(ss.unbox(this.$k));this.$k=null}},$h:function(){if(!this.$l){return}if(tab.MiscUtil.isNullOrEmpty(this.queryBox.value)){return}if(this.$n.toLowerCase().indexOf(this.queryBox.value.toLowerCase())===0){this.onAutocompleteDone(this.$n);return}if(this.$q.length>0){var e=this.queryBox.value.toLowerCase();var L=this.$q.length;for(var hy=0;hy<L;hy++){if(this.$q[hy].toLowerCase().indexOf(e)===0){this.onAutocompleteDone(this.$q[hy]);return}}}else if(ss.isValue(this.$m)){this.$c(ss.mkdel(this,function(){this.$m(this.queryBox.value,ss.mkdel(this,this.onAutocompleteDone),this.$s)}))}},onAutocompleteDone:function(e){var L=e;if(tab.MiscUtil.isNullOrEmpty(L)){return}this.$n=L;var hy=this.queryBox.value;this.queryBox.value=L;tableau.util.selectText(this.queryBox,hy.length,L.length)},onQueryBoxFocus:function(e){this.queryBox.isFocused=true;if(this.$g()){this.queryBox.value=this.editableValue();this.$r=true}},$9:function(e){if(this.queryBox.isFocused){this.queryBox.select()}this.queryBox.isFocused=false},$5:function(e){dojo.addClass(this.goButton,'Hover')},$6:function(e){dojo.removeClass(this.goButton,'Hover')},$a:function(){if(this.$r&&this.$g()){return!ss.referenceEquals(this.editableValue(),this.queryBox.value)}else{return!ss.referenceEquals(this.$j,this.queryBox.value)}},$f:function(){var e=((this.$x==='TypeIn')?this.$a():!ss.isNullOrEmptyString(this.queryBox.value));if(e){this.$d()}else{this.$e()}},$d:function(){dojo.style(this.goButton,'display','');dojo.addClass(this.goButton,this.$x+'Active');dojo.addClass(this.querySpan,'ShortQuerySpan')},$e:function(){dojo.removeClass(this.querySpan,'ShortQuerySpan');dojo.removeClass(this.goButton,this.$x+'Active');dojo.style(this.goButton,'display','none')},onInputBlur:function(e){this.queryBox.isFocused=false;if(!this.$t&&!this.$u){this.setNewPattern()}this.$u=false},$4:function(e){this.$t=true},$3:function(e){this.$0();this.$t=false},$1:function(e){this.$b();if(dojo.isFF){window.setTimeout(ss.mkdel(this,this.$b),10)}this.$f();e.stopPropagation();e.preventDefault()},$7:function(e){if(e.which===27){this.$1(e)}this.$v=e.which},$8:function(e){switch(e.which){case 13:{this.clearTimeout();this.setNewPattern();this.queryBox.blur();e.stopPropagation();e.preventDefault();break}case 27:{this.clearTimeout();this.$1(e);this.$u=true;this.queryBox.blur();break}case 8:case 46:{this.clearTimeout();this.$f();break}case 16:{this.$f();break}default:{if(this.$v===e.which){this.$h();this.$f()}break}}},setPattern:function(e){this.queryBox.value=e;this.clearTimeout();this.setNewPattern();this.queryBox.blur()},setNewPattern:function(){if(this.$a()){this.$p(this.queryBox.value);if(!this.$g()){this.setNewState(this.queryBox.value)}}else if(this.$g()){this.$b()}this.$r=false},$b:function(){this.queryBox.value=this.$j;this.$r=false;this.$f()},$0:function(){if(this.$x==='TypeIn'){this.$b();this.queryBox.blur()}else{this.queryBox.value='';this.setNewPattern()}this.$f()}},null,[ss.IDisposable]);ss.initClass(gO,a,{instantiate:function(e,L,hy){this.$6=new tableau.base.widget.TypeInFilterContents(ss.mkdict(['parentFilter',this.parent,'tuples',e,'itemName',L,'role',this.parent.get_oFilter().role]));this.div.appendChild(this.$6.domNode);this.$6.startup();this.$5()},$5:function(){var e=ss.mkdel(this,function(L){var hy=this.parent.get_searchWidget().domResults;if(tab.DomUtil.isEqualOrAncestorOf(hy,L.target)){return}if(ss.referenceEquals(L.target,this.parent.get_searchWidget().get_domXButton())){this.parent.get_searchWidget().clearSearch(false,false)}else{this.parent.get_searchWidget().clearSearch(true,true)}});this.disposables.add$1(spiff.EventUtil.bindWithDispose($(document.body),'mousedown',e))},destroy:function(){this.dispose();if(ss.isValue(this.$6)){this.$6.destroyRecursive(false)}this.$6=null},layout:function(e,L){this.inherited(arguments);this.$6.layout$1(e,L)},fetchChildNodeByIndex:function(e){var L=this.$6.domItemsList.childNodes;if(e<0||e>=L.length){return null}return L[e]},applyChanges:function(){var e=this.$3();var L=this.$6.getUIState();var hy=this.$4(L,e);var hz=this.$4(e,L);if(hy.length>0||hz.length>0){this.parent.set_stateId(this.parent.get_stateId()+1);tab.FilterClientCommands.modifyCategoricalFilterValues(this.parent.get_session().get_visualId(),this.parent.get_field(),hy,hz,true)}},$3:function(){var e=this.parent.get_oFilter().table.tuples;var L={};var hy=e.length;for(var hz=0;hz<hy;hz++){var hA=e[hz];L[this.$6.getFormattedAlias(hA)]=hA.s}return L},$4:function(e,L){var hy=[];var hz=ss.getEnumerator(Object.keys(e));try{while(hz.moveNext()){var hA=hz.current();if(e.hasOwnProperty(hA)){if(e[hA]&&!L[hA]){hy.push(hA)}}}}finally{hz.dispose()}return hy}},Z,[ss.IDisposable]);ss.initClass(gP,a,{get_calendarElement:function(){return this.$C.get_element()},dispose:function(){gN.prototype.dispose.call(this);this.$C.dispose()},instantiate:function(e,L,hy,hz,hA,hB,hC,hD,hE){gN.prototype.instantiate.call(this,e,L,hy,this.$I,this.$H,hB,hC,hD,hE);this.$F=hC;this.$E=hD;this.$I=hz;this.$H=hA;this.$G=hE;if(!gP.lazilyCreateCalendar){this.$y()}},$B:function(e){return(tab.LegacyFilterModel.isNormalValue(e)?new Date(tableau.types.JsDateFromOleDate(ss.unbox(e.v))):null)},editableValue:function(){return tableau.format.formatDataValue(this.$i,'m',this.$E,null,2)},$z:function(){if(ss.isValue(this.$i)&&ss.isValue(this.$i.t)){return this.$i.t}else{return't'}},setNewState:function(e,L,hy,hz,hA){gN.prototype.setNewState.call(this,e,L,hy,hz,hA);this.$C.setDateRange(this.$B(hz),this.$B(hA))},isInsideWidget:function(e){var L=this.$C.get_element().get(0);return gN.prototype.isInsideWidget.call(this,e)||tab.DomUtil.isEqualOrAncestorOf(L,e.target)},onQueryBoxFocus:function(e){gN.prototype.onQueryBoxFocus.call(this,e);if(ss.isNullOrUndefined(this.$C)||this.$C.get_element().is(':hidden')){this.$y();var L=this.$B(this.$i);this.$C.show(L);this.$C.positionCalendarByElement($(this.queryBox).closest('.TypeInDiv'))}},$y:function(){if(ss.isValue(this.$C)){return}var e=this.$F.locale_formatting_strings;var L=e.narrowDay.filter(function(hB){return!ss.isNullOrEmptyString(hB)});var hy=this.$B(this.$i);var hz=this.$G;if(ss.isValue(hz)){hz=ss.Nullable$1.sub(hz,1)}var hA=new ce(hy,hy,this.$B(this.$I),this.$B(this.$H),hz,L,e.todayFormatTemplate,ss.mkdel(this,function(hB){return tableau.format.formatCustomJSDateTime(hB,tableau.format.mapIcuToOleFormat(this.$F.yearMonthFormat),0,'d',this.$F.locale,null,null,e)}),ss.mkdel(this,function(hB){return tableau.format.formatCustomJSDateTime(hB,this.$E.format,0,'d',this.$E.locale,null,null,e)}));this.$C=this.$D(hA);this.$C.get_element().on('dateSelected',ss.mkdel(this,this.$A)).appendTo(document.body)},$A:function(e,L){if(ss.isValue(this.$C)){this.$C.hide()}this.setPattern(tableau.format.formatJsDateTime(L,this.$E,2,this.$z()))},onInputBlur:function(e){if(ss.isValue(this.$C)){this.$C.hide()}gN.prototype.onInputBlur.call(this,e)}},gN,[ss.IDisposable]);ss.initClass(gQ,a,{postCreate:function(){var e=tableau.format.formatTupleDisplayName;var L=ss.mkdel(cF.filterItem,cF.filterItem.getTypeInHtml);var hy=[];var hz=0;for(var hA=0;hA<this.tuples.length;hA++){var hB=this.tuples[hA];if(hB.s){var hC=this.itemName+'_'+hA;var hD=L(hC,e(hB,true,this.role));hy.push(hD);hz++}}this.domItemsList.innerHTML=hy.join('');dojo.style(this.domClearListButtonDiv,'display',((hz>3)?'block':'none'))},_onItemsListClick:function(e){this.parentFilter.onListItemClick(e)},_onItemsListMouseOver:function(e){if(!ss.isValue(e.target)||!dojo.hasClass(e.target,'FITypeInItem')){return}dojo.addClass(e.target,'Hover');var L=this.$0=cF.filterItem.getNodeFromEvent(e);L.appendChild(this.domXButton);dojo.style(this.domXButton,'top','2px');dojo.style(this.domXButton,'display','block')},_onItemsListMouseOut:function(e){if(!ss.isValue(e.relatedTarget)||!ss.referenceEquals(e.relatedTarget,this.domXButton)){if(ss.isValue(this.$0)){dojo.removeClass(this.$0,'Hover')}this.$0=null;dojo.style(this.domXButton,'display','none')}},_onItemsKeyDown:function(e){if(e.keyCode===46){this._removeSelectedItemsFromFilter();dojo.stopEvent(e)}},_onXButtonClick:function(e){var L=null;e.stopPropagation();e.preventDefault();var hy=cF.filterItem.getNodeFromEvent(e);if(!ss.isValue(hy)){return}cF.filterItem.setChecked(hy,false);if(ss.isValue(this.parentFilter.get_oFilter())){L=this.parentFilter.get_oFilter().table}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isValue(L)&&L.actual_size===L.tuples.length){var hz=new tab.LegacyCategoricalQuickFilterData(this.parentFilter.get_oFilter().targetSheets,this.parentFilter.get_field(),this.parentFilter.get_oFilter().exclude,this.getCheckedAliases(this.getUIState()));tab.FilterClientCommands.updateCategoricalFilter(hz)}}this.parentFilter.clearRangeAnchorAndSelection();var hA=ss.mkdel(this.parentFilter,this.parentFilter.applyChanges);this.parentFilter.notifyChange(hA)},_onXButtonMouseOver:function(e){dojo.addClass(this.domXButton,'Hover')},_onXButtonMouseOut:function(e){dojo.removeClass(this.domXButton,'Hover')},_onClearListButtonClick:function(e){var L;var hy=null;this.parentFilter.get_searchWidget().clearSearch(true,false);for(L=this.domItemsList.firstChild;ss.isValue(L);L=L.nextSibling){cF.filterItem.setChecked(L,false)}this.parentFilter.set_stateId(this.parentFilter.get_stateId()+1);if(ss.isValue(this.parentFilter.get_oFilter())){hy=this.parentFilter.get_oFilter().table}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isValue(hy)&&hy.actual_size===hy.tuples.length){var hz=new tab.LegacyCategoricalQuickFilterData(this.parentFilter.get_oFilter().targetSheets,this.parentFilter.get_field(),this.parentFilter.get_oFilter().exclude,this.getCheckedAliases(this.getUIState()));tab.FilterClientCommands.updateCategoricalFilter(hz)}}this.parentFilter.clearRangeAnchorAndSelection();var hA=ss.mkdel(this.parentFilter,this.parentFilter.applyChanges);this.parentFilter.notifyChange(hA);dojo.style(this.domClearListButtonDiv,'display','none')},layout$1:function(e,L){if(tableau.util.isElementVisible(this.domClearListButtonDiv)){var hy=dojo.marginBox(this.domClearListButtonDiv);e.h=Math.max(0,e.h-hy.h)}if(dojo.isIE<8){if(e.h<=12){dojo.style(this.domItemsList,'overflow','hidden')}else{dojo.style(this.domItemsList,'overflow','')}}dojo.marginBox(this.domItemsList,e)},_removeSelectedItemsFromFilter:function(){this.parentFilter.forEachSelected(function(e,L){cF.filterItem.setChecked(L,false)});this.parentFilter.clearRangeAnchorAndSelection();this.parentFilter.notifyChange(null)},getUIState:function(){var e=this.domItemsList.firstChild,L;var hy={};for(L=e;ss.isValue(L);L=L.nextSibling){var hz=this.getFormattedAlias(this.tuples[cF.filterItem.getIndex(L)]);hy[hz]=cF.filterItem.isChecked(L)}return hy},getCheckedAliases:function(e){var L=[];var hy=ss.getEnumerator(Object.keys(e));try{while(hy.moveNext()){var hz=hy.current();if(e.hasOwnProperty(hz)){if(e[hz]){L.push(hz)}}}}finally{hy.dispose()}return L},getFormattedAlias:function(e){return tableau.format.formatTupleDisplayName(e,true,this.role)}},Object);ss.initClass(gR,a,{add_commandExecuted:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_commandExecuted:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_actionExecuted:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_actionExecuted:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_ubertipMenuToggled:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_ubertipMenuToggled:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_ubertipMenuClosed:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_ubertipMenuClosed:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},get_model:function(){return this.$H},set_model:function(e){this.$H=e;this.$q()},get_isShowingActionAndCommandButtons:function(){return this.get_element().find('.tab-ubertipCommandArea').is(':visible')||this.get_element().find('.tab-ubertipActions').is(':visible')},$C:function(){return this.$F&&this.hasSummary()},dispose:function(){this.get_element().detach();this.$K.remove_showed(ss.mkdel(this,this.handleTooltipShowed));this.$K.remove_positioned(ss.mkdel(this,this.handleTooltipShowing));this.$b();spiff.Widget.prototype.dispose.call(this)},hasActions:function(){if(ss.isNullOrUndefined(this.get_model())){return false}var e=ss.isValue(this.get_model().actionPMs)&&this.get_model().actionPMs.length>0;var L=ss.isValue(this.get_model().actions)&&this.get_model().actions.length>0;return e||L},hasCommands:function(){if(ss.isNullOrUndefined(this.get_model())){return false}return ss.isValue(this.get_model().commands)&&this.get_model().commands.length>0},hasSummary:function(){if(ss.isNullOrUndefined(this.get_model())){return false}return ss.isValue(this.get_model().selectionHtml)},hasActionsOrSummaryOrCommands:function(){return this.hasActions()||this.hasSummary()||this.hasCommands()},hideMenuActionsAndCommandButtons:function(e){if(this.get_isShowingActionAndCommandButtons()&&e){this.$K.requestLayout(ss.mkdel(this,function(){this.$p();this.get_element().find('.tab-ubertipCommands').css('min-width','')}))}else{this.$p();this.get_element().find('.tab-ubertipCommands').css('min-width','')}},prepareForPositioning:function(e){if(e){if(!this.$K.get_isShown()){this.get_element().css('width','');this.$s(false)}}else{this.hideMenuActionsAndCommandButtons(false);this.$o()}},showMenuActionsAndCommandButtons:function(e){if(this.get_isShowingActionAndCommandButtons()){return}this.$c();var L=this.get_element().outerHeight();if(!this.$K.get_isShown()||L===0){this.$s(false)}else{var hy=this.$K.get_element().position();var hz=e.viewport.getVisibleRoom(tab.PointUtil.fromPosition(hy),1);this.$s(false);this.get_element().find('.tab-ubertipCommands').css('min-width',this.$d()+'px');var hA=this.get_element().outerHeight();var hB=this.get_element().find('.tab-ubertipActions').outerHeight();var hC=this.$h();if(hC>this.$J){this.$J=hC}this.$r(this.$J);var hD=hy.left+hC>hy.left+hz.roomRight;var hE=this.$I==='BL'&&hy.top+hA>hy.top+hz.roomBelow;if(hD||hE){this.$K.layoutTooltip(e.viewport,true);hy=this.$K.get_element().position();this.handleTooltipShowing(this,this.$K.get_previousShownArgs());if(this.$I==='AL'){var hF=parseInt(this.$K.get_element().css('top'));this.$K.get_element().css('top',hF+(hA-L-hB)+'px')}}var hG=parseInt(this.$K.get_element().css('top'));var hH=hG-(hA-L-hB);var hI=tab.DoubleUtil.roundToInt(hy.top)+hz.roomBelow+hA;var hJ=Math.min(hH,hI);this.$p();var hK=hB>0&&hy.top+hA>hy.top+hz.roomBelow;this.$s(!hK);if(hK){var hL=hz.roomBelow-L;var hM=hA-L;var hN=hM-hL;hJ=tab.DoubleUtil.roundToInt(hy.top)-hN-2;this.$K.get_element().css(ss.mkdict(['top',hJ+'px']))}else{switch(this.$I){case'AR':case'AL':{if(this.$I==='AL'||hz.roomBelow<hA){this.$K.get_element().animate(ss.mkdict(['top',hJ+'px']),'fast')}break}case'BR':{this.$K.get_element().css('top',hy.top-this.get_element().find('.tab-ubertipCommandArea').height()+'px');this.$K.get_element().animate(ss.mkdict(['top',hJ+'px']),'fast');break}case'BL':default:{break}}}}},handleRemoteFailure:function(){if(this.$G){this.$G=false;if(tab.CommandController.get().get_legacySession().get_waitHandler().isBusy()){tab.CommandController.get().get_legacySession().get_waitHandler().reset()}}},hideSpinner:function(){if(tab.CommandController.get().get_legacySession().get_waitHandler().isBusy()){tab.CommandController.get().get_legacySession().get_waitHandler().reset()}},handleTooltipShowing:function(e,L){if(ss.isValue(this.$I)&&this.$I===L.position){return}switch(L.position){case'AL':case'AR':{this.get_element().find('.tab-ubertipContent').after(this.get_element().find('.tab-ubertipCommandArea'));this.get_element().find('.tab-ubertipCommands').before(this.get_element().find('.tab-ubertipSelected'));break}case'BL':case'BR':{this.get_element().find('.tab-ubertipContent').before(this.get_element().find('.tab-ubertipCommandArea'));this.get_element().find('.tab-clear').after(this.get_element().find('.tab-ubertipSelected'));break}}this.$I=L.position},handleTooltipShowed:function(e,L){this.$8()},$8:function(){if(this.get_element().width()===0){return}var e=this.$h();this.$r(e)},$h:function(){return Math.min(this.get_element().width()+1,$(document.body).width()-2)},updateFromRemote:function(e){var L=this.$H;this.$H=e;if(this.$G){for(var hy=0;hy<this.$H.actions.length;hy++){var hz=this.$H.actions[hy];if(ss.referenceEquals(hz.name,this.$D)){this.$G=false;var hA=new H;hA.action=hz;this.onActionExecuted(hA)}}}var hB=[];var hC=null;if(ss.isValue(L)){hC=_.find(L.placeHolders,function(hE){return hE.commandType===10})}if(ss.isValue(hC)){var hD=_.find(this.$H.commands,function(hE){return hE.commandType===10});if(ss.isValue(hD)){if(!this.$C()){ss.remove(this.$H.commands,hD);this.$H.commands.push(hD);hB.push(this.$H.commands.length-1)}}else{this.$H.placeHolders=[];this.$H.placeHolders.push(hC)}}this.$q(Array.prototype.slice.call(hB),true)},updatePartiallyFromRemote:function(e){if(ss.isNullOrUndefined(e)){return}if(ss.isNullOrUndefined(this.$H)){this.set_model(e);return}this.$H.rid=e.rid;this.$A(e);this.$u(e);this.$y(e)},$y:function(e){var L=[];var hy=null;var hz=null;if(ss.isValue(this.$H)){hy=_.find(this.$H.placeHolders,function(hA){return hA.commandType===10});hz=_.find(e.commands,function(hA){return hA.commandType===10})}if(ss.isValue(hz)){if(!this.$C()){ss.remove(e.commands,hz);e.commands.push(hz);L.push(e.commands.length-1)}this.$H.placeHolders=[]}else if(ss.isValue(hy)){this.$H.placeHolders=[];this.$H.placeHolders.push(hy)}this.$H.commands=e.commands;this.$x(Array.prototype.slice.call(L))},$A:function(e){this.$H.selectionHtml=e.selectionHtml;this.$z();if(ss.isValue(this.$H.selectionHtml)){this.$o();this.$8()}},$u:function(e){this.$n();this.$H.actionPMs=e.actionPMs;this.$H.actions=e.actions;this.$t()},$n:function(){if(this.$G&&ss.isValue(this.$H)){for(var e=0;e<this.$H.actions.length;e++){var L=this.$H.actions[e];if(ss.referenceEquals(L.name,this.$D)){this.$G=false;var hy=new H;hy.action=L;this.onActionExecuted(hy)}}}},onCommandExecuted:function(e){if(ss.isValue(this.$2$1)){this.$2$1(this,e)}},onActionExecuted:function(e){if(ss.isValue(this.$2$2)){this.$2$2(this,e)}},$b:function(){this.$E.dispose()},$r:function(e){this.get_element().css('min-width',e+'px')},$c:function(){this.get_element().css('min-width','')},$q:function(e,L){var hy=false;var hz=this.$K.get_isShown();var hA=this.get_element().width();var hB=this.get_element().find('.tab-ubertipContent').height();var hC=this.get_element().find('.tab-ubertipCommandArea').height();this.$b();this.get_element().show();this.$B();this.$t();this.$x(e);this.$z();if(ss.isValue(L)&&L&&hz){this.$r(hA);if(hB===0||this.get_element().find('.tab-ubertipContent').hasClass('hide')){hy=true}else{var hD=hB;var hE=this.get_element().find('.tab-ubertipCommandArea').height();if(hE===0){hD+=hC}this.get_element().find('.tab-ubertipContent').height(hD)}}else{this.$o()}hy=hy||(ss.isNullOrUndefined(this.$H.actions)||this.$H.actions.length===0)&&ss.isNullOrEmptyString(this.$H.tooltipHtml);if(hy){this.get_element().find('.tab-ubertipContent').addClass('hide')}else{this.get_element().find('.tab-ubertipContent').removeClass('hide')}},$o:function(){this.$c();this.get_element().find('.tab-ubertipContent').css('height','');this.get_element().find('.tab-ubertipCommandArea').css('height','');var e=this.computeAdjustedTooltipWidth();if(e>0){this.$r(e);this.$J=e}else if(this.get_element().width()>0){this.$J=this.get_element().width()}else{this.$J=0}},computeAdjustedTooltipWidth:function(){var e=this.get_element().width();var L=-1;var hy=tab.FeatureParamsLookup.getInt(18);if(!ss.isValue(hy)){hy=70}if(e>0&&this.$J>0&&this.$J>=e&&this.$J-e<=ss.unbox(hy)){L=this.$J}return L},$d:function(){var e=0;this.get_element().find('.tab-ubertipCommands').find('li').each(function(L,hy){e+=hy.firstChild.offsetWidth});return e},$p:function(){this.$K.get_element().stop();this.get_element().find('.tab-ubertipActions').stop();this.get_element().find('.tab-ubertipCommandArea').stop();this.get_element().find('.tab-ubertipActions').hide();this.get_element().find('.tab-ubertipCommandArea').hide()},$s:function(e){if(ss.isNullOrUndefined(this.get_model())){return}if(this.hasActions()){if(e){this.get_element().find('.tab-ubertipActions').show()}else{this.get_element().find('.tab-ubertipActions').show()}}if(this.hasCommands()||this.hasSummary()){if(e){this.get_element().find('.tab-ubertipCommandArea').slideDown('fast')}else{this.get_element().find('.tab-ubertipCommandArea').show()}}},$B:function(){var e=$(this.$H.tooltipHtml);this.get_element().find('.tab-ubertipTooltip').html('').append(e)},$z:function(){if(ss.isNullOrUndefined(this.$H.selectionHtml)){this.get_element().find('.tab-ubertipSelected').html('').addClass('hide')}else{this.get_element().find('.tab-ubertipSelected').html('').append(this.$H.selectionHtml).removeClass('hide')}},$a:function(e,L,hy){if(e.get_commandsType()!=='subcommands'){return false}var hz=[];ho.newMenuItemsFromCommands(hz,e.get_commands(),ho.createDropdownMenuCommands,tab.PermissionManager.buildCommandPermission());if(hz.length===0){return false}var hA=this.$g(e);var hB=new spiff.MenuViewModel;hB.set_menu(new spiff.Menu(hz));var hC=ss.mkdel(this,function(){this.$l(hB,hA)});hA.add_click(hC);hB.add_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);var hD=function(){hB.hide()};this.$K.add_closed(hD);this.$E.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){hA.remove_click(hC);hB.remove_menuItemClicked(spiff.MenuViewModel.handleMenuActionItemClicked);hB.remove_hidden(ss.mkdel(this,this.$m));this.$K.remove_closed(hD)})));if(hy){L.append($("<li><div class='tab-separator'>&nbsp;</div></li>"))}var hE=$('<li></li>');hE.append(hA.get_element());L.append(hE);this.$E.add$1(hB);spiff.ObjectRegistry.newView(spiff.MenuView).call(null,[hB]);return true},$m:function(){if(ss.isValue(this.$2$4)){this.$2$4()}},$l:function(e,L){if(e.get_visible()){e.remove_hidden(ss.mkdel(this,this.$m));e.hide();if(ss.isValue(this.$2$3)){this.$2$3(false)}}else{e.add_hidden(ss.mkdel(this,this.$m));var hy=spiff.ShowMenuOptions.create(L.get_element(),false,L.get_element().outerWidth(false));e.show(hy);if(ss.isValue(this.$2$3)){this.$2$3(true)}}},$x:function(e){var L=false;var hy=$('<ul></ul>');if(ss.isValue(this.$H.commandsAndSubcommands)){for(var hz=0;hz<this.$H.commandsAndSubcommands.length;hz++){var hA=this.$H.commandsAndSubcommands[hz];var hB=hA.item1;var hC=hA.item2;if(hB){var hD=this.$H.commands[hC];if(ss.isValue(hD)&&hD.status!=='hidden'){var hE=ss.isValue(e)&&ss.contains(e,hC);this.$9(hD,hy,L,hE);L=true}}else{L=this.$a(this.$H.subcommands[hC],hy,L)||L}}}else if(ss.isValue(this.$H.commands)){for(var hF=0;hF<this.$H.commands.length;++hF){var hG=this.$H.commands[hF];if(ss.isValue(hG)&&hG.status!=='hidden'){var hH=ss.isValue(e)&&ss.contains(e,hF);this.$9(hG,hy,L,hH);L=true}}}this.$7(hy,L);if(L){this.get_element().find('.tab-ubertipCommands').html('').append(hy).removeClass('hide')}else{this.get_element().find('.tab-ubertipCommands').html('').addClass('hide')}},$9:function(e,L,hy,hz){var hA=this.$f(e);hA.set_context(e);this.$6(hA,ss.mkdel(this,this.$k));if(ss.keyExists(gR.$c,e.commandType)){hA.get_element().width(gR.$c[e.commandType])}if(hz){hA.get_element().fadeIn()}if(hy){L.append($("<li><div class='tab-separator'>&nbsp;</div></li>"))}var hB=$('<li></li>');hB.append(hA.get_element());L.append(hB)},$f:function(e){var L=spiff.LabelButton.newNativeButton();if(tsConfig.is_mobile){var hy=ss.formatString('Ubertip{0}Mobile',gR.$1(e));var hz=tab.Strings.getString(hy);if(ss.referenceEquals(hz,ss.formatString('!{0}!',hy))){hz=e.name}var hA=$('<div>'+hz+'</div>');L.setLabelContents(hA)}else{L.set_label(e.name);L.set_hoverTooltipText(e.description)}var hB=new ss.StringBuilder('tab-command');if(ss.isNullOrEmptyString(e.imageRes)){hB.append(e.commandType)}else{hB.append(gR.$1(e))}hB.append(' ').append(e.status);L.get_element().addClass(hB.toString());if(e.status==='disabled'){L.set_disabled(true)}this.$E.add$1(L);spiff.HoverAddClassBehavior.attach(L);return L},$g:function(e){var L=spiff.LabelButton.newNativeButton();L.set_label(e.get_name());L.set_hoverTooltipText(e.get_description());L.get_element().addClass('enabled'.toString());$('<span>').addClass('tabTooltipMenuDropdownBtnIcon').appendTo(L.get_element());this.$E.add$1(L);spiff.HoverAddClassBehavior.attach(L);return L},$7:function(e,L){if(ss.isValue(this.get_model().placeHolders)){var hy=this.get_model().placeHolders;for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];var hB=$("<li><div class='tab-separator'>&nbsp;</div></li>");var hC=gR.$0(hA);this.$E.add$1(hC);var hD=$('<li></li>');hD.append(hC.get_element());if(hA.commandType===10&&this.$C()&&L){var hE=_.filter(this.$H.commands,function(hH){return hH.commandType===2});if(ss.isValue(hE)){var hF=e.children().get(2);hB.insertAfter(hF);hD.insertAfter(hB)}else{var hG=e.children().get(0);hD.insertBefore(hG);hB.insertBefore(hG)}}else{if(L){e.append(hB)}e.append(hD)}document.documentElement.appendChild(e.first().get(0));gR.$c[hA.commandType]=hC.get_element().innerWidth();hC.get_element().width(gR.$c[hA.commandType]);document.documentElement.removeChild(e.first().get(0))}}},$6:function(e,L){var hy=function(){L(e)};e.add_click(hy);this.$E.add$1(new tab.CallOnDispose(function(){e.remove_click(hy)}))},$k:function(e){var L=new bv;L.command=e.get_context();this.onCommandExecuted(L)},$i:function(e){var L=new H;L.action=e.get_context();this.onActionExecuted(L)},$j:function(e){var L=e.get_context();if(tab.ActionUtils.isFilterAction(L)||tab.ActionUtils.isHighlightAction(L)&&!tab.ActionUtils.isTargetOfActionLocal(L)){tab.CommandController.get().get_legacySession().get_waitHandler().showAndLock();this.$G=true;this.$D=e.get_labelElement().text()}else{var hy=tab.ModelUtils.getVisualModelFromVisualId(this.$H.visualId);var hz=[this.$H.tupleId];tab.UberTipClientCommands.executeUbertipAction(L,hz,hy)}},$t:function(){if(tab.MiscUtil.isNullOrEmpty(this.$H.actions)&&tab.MiscUtil.isNullOrEmpty(this.$H.actionPMs)){this.get_element().find('.tab-ubertipActions').html('').removeClass('invisible').addClass('hide')}else if(ss.isValue(this.$H.actions)){this.$w()}else{this.$v()}},$w:function(){var e=$('<ul></ul>');for(var L=0;L<this.$H.actions.length;L++){var hy=this.$H.actions[L];this.$e(e,hy.name,hy,ss.mkdel(this,this.$i))}var hz=this.get_element().height();this.get_element().find('.tab-ubertipActions').html('').append(e).removeClass('hide invisible');var hA=this.get_element().height();if(hA!==hz){this.$K.requestLayout(null,true)}},$v:function(){var e=$('<ul></ul>');var L=tab.ModelUtils.getVisualModelFromVisualId(this.$H.visualId);if(!ss.isValue(L)){return}var hy=false;var hz=true;for(var hA=0;hA<this.$H.actionPMs.length;hA++){var hB=this.$H.actionPMs[hA];var hC=L.get_vizDataModel();var hD=[this.$H.tupleId];var hE=tab.ApplicationModel.get_instance().get_dataDictionary();var hF=tab.VizDataUtils.constructUrlFromString(hE,hB.dMo,hC,hD,L.get_worksheetName());var hG=tab.ActionUtils.getActionType(hB);var hH=false;if(hG==='url'){var hI=tab.ActionUtils.getUrlActionPm(hB,L,hD);hH=hI.item2==='urlConstructionFail';if(ss.isNullOrUndefined(hI.item1)||ss.isNullOrEmptyString(hF)){hz=false}}if(!hH){this.$e(e,hF,hB,ss.mkdel(this,this.$j))}if(hG==='filter'||hG==='url'){hy=true}}if(e.find('li').length>0){var hJ=-1;if(ss.isValue(L.get_sceneModel())){hJ=L.get_sceneModel().get_paneDescriptorCount()}else{}if(hJ>1&&hy||!hz){this.get_element().find('.tab-ubertipActions').html('').append(e).removeClass('hide').addClass('invisible')}else{this.get_element().find('.tab-ubertipActions').html('').append(e).removeClass('hide invisible')}}},$e:function(e,L,hy,hz){var hA=spiff.LabelButton.newAnchorButton();hA.set_label(L);hA.get_element().addClass('tab-action');hA.set_context(hy);this.$6(hA,hz);this.$E.add$1(hA);var hB=$('<li></li>');hB.append(hA.get_element());e.append(hB)}},spiff.Widget,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(gS,a,{},ev);ss.initClass(gU,a,{addFontList:function(e){for(var L=0;L<e.length;L++){var hy=e[L];var hz=hy.get_fonts();for(var hA=0;hA<hz.length;hA++){var hB=hz[hA];this.$0[hB]=hy.get_fontGroup()}}},toFontFamilyProvider:function(){if(ss.isNullOrUndefined(this.$0)){return new fO.$ctor2([])}var e=[];var L={};var hy=ss.getEnumerator(Object.keys(this.$0));try{while(hy.moveNext()){var hz=hy.current();var hA=this.$0[hz];var hB=L[hA.toLowerCase()];if(ss.isNullOrUndefined(hB)){hB=new bA(hA);e.push(hB);L[hA.toLowerCase()]=hB}hB.addFont(hz)}}finally{hy.dispose()}e=_.sortBy(e,function(hC){return hC.get_fontGroup().toLowerCase()});return new fO.$ctor2(e)}});ss.initClass(gV,a,{});ss.initClass(gW,a,{$3:function(e,L,hy){var hz={x:0,y:0,w:e.w,h:e.h};var hA=this.$h;if(L>=0){var hB=hA.$3[L];var hC=hA.$3[L+1];hz.x+=hB;hz.w=hC-hB}if(hy>=0){var hD=hA.$4[hy];var hE=hA.$4[hy+1];hz.y+=hD;hz.h=hE-hD}return hz},$7:function(e){return this.$j[e]},$8:function(e){var L=this.$f[e];return this.$j[L]},$4:function(e){return this.$f[e]},$5:function(e){return this.$e[e+1]-this.$e[e]},$6:function(e){return{firstMark:this.$e[e],lastMark:this.$e[e+1]-1}},$2:function(e){var L=e.$5('user_pane_col');var hy=e.$5('user_pane_row');var hz=e.get_paneRect();var hA=e.get_markCount();var hB=0;var hC=-1;var hD=-1;for(var hE=0;hE<hA;++hE){var hF=(L.isConst?L.constVal:L.vals[hE]);var hG=(ss.isValue(hF)?hF:-1);var hH=(hy.isConst?hy.constVal:hy.vals[hE]);var hI=(ss.isValue(hH)?hH:-1);if(hG!==hC||hI!==hD){this.$1(hE,hB,hG,hI,hz);hC=hG;hD=hI;hB+=1}}this.$e[hB]=hA;this.$0(hB);return hB},$0:function(e){if(e===0){return}var L=e-1;var hy=this.$e[L];var hz=this.$e[e];for(var hA=hy;hA<hz;++hA){this.$f[hA]=L}},$1:function(e,L,hy,hz,hA){if(ss.isValue(this.$b)){this.$b[L]=hy}if(ss.isValue(this.$g)){this.$g[L]=hz}this.$j[L]=this.$3(hA,hy,hz);this.$e[L]=e;this.$0(L)},$9:function(e){var L=this.$i;for(var hy=0;hy<L;++hy){var hz=this.$7(hy);var hA=this.$6(hy);var hB=hA.firstMark;var hC=hA.lastMark;for(var hD=hB;hD<=hC;++hD){e(hD,hz)}}},$a:function(e,L){var hy=-1;var hz=null;for(var hA=0;hA<e.length;hA++){var hB=e[hA];var hC=this.$f[hB];if(hC!==hy){hy=hC;hz=this.$7(hC)}L(hB,hz)}}});ss.initClass(gX,a,{get_addVariableCtrlBtnArea:function(){return this.$1},get_addVariableCtrlVarSelector:function(){return this.$2}},spiff.Template,[ss.IDisposable]);ss.initClass(gY,a,{$1:function(){this.prevButton.addClass('tabCatLegendScrollUp');this.nextButton.addClass('tabCatLegendScrollDown')}},dG,[ss.IDisposable]);ss.initClass(gZ,a,{get_cacheVersion:function(){return this.imageCacheVersion},get_viewWidget:function(){return this.viewWidget},get_viewSession:function(){return this.viewSession},get_sheetName:function(){return this.sheetName},dispose:function(){this.destroy()},destroy:function(){this.viewWidget=null;this.$3.dispose()},setTiledViewer:function(e){this.viewWidget=e},$0:function(e){if(ss.isNullOrUndefined(e)){return}var L=e.layoutStatus;var hy=e.primarySheet;if(ss.isNullOrUndefined(L)){return}if(ss.isValue(L.MUp)&&ss.referenceEquals(hy,this.sheetName)){this.viewModified=L.MUp}if(!tab.CommandController.get().get_processingRenderModeChange()&&!tab.CommandController.get().get_processingStoryPointChange()){this.incrementCacheVersion();var hz=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.sheetName);if(hz.get_isVisualValid()){this.viewWidget.doTiledViewerRefreshImages(hz.get_cacheUrlInfo());this.get_viewSession().fireRefreshLegacyLegendImages(hz.get_cacheUrlInfo())}}},$2:function(e){if(!ss.isValue(e)){return}if(ss.isValue(e.data)){if(ss.isValue(e.data.layoutStatus)){if(ss.isValue(e.data.layoutStatus.MUp)){this.viewModified=e.data.layoutStatus.MUp}}else{}}if(ss.referenceEquals(e.oldActive,this.viewWidget)){this.active=false}else if(ss.referenceEquals(e.newActive,this.viewWidget)){this.active=true}},incrementCacheVersion:function(){this.imageCacheVersion+=1},$1:function(){var e=this.viewSession;this.$3.add$1(new tab.SubscriptionDisposable(e.registerEventListener(Object).call(e,'activeViewChanged',ss.mkdel(this,this.$2))));this.$3.add$1(new tab.SubscriptionDisposable(e.registerEventListener(tab.InvalidationInfo).call(e,'selectionChanged',ss.mkdel(this,this.$0))))}},null,[ss.IDisposable]);ss.initClass(ha,a,{dispose:function(){if(ss.isValue(this.$f)){this.$f.dispose();this.$f=null}},exportImage:function(){var e=tab.ApplicationModel.get_instance().get_workbook().get_currentSheetStoryPointId();var L=tableau.types.ExportDialogType['ExportImage'];var hy=[];var hz=[];if(this.$e.get_isDashboard()){var hA={};var hB=this.$e.get_viewControllers();if(ss.isValue(hB)){$.each(hB,function(hC,hD){var hE=hD.get_viewWidget().get_scrollPosition();var hF=hE.x;var hG=hE.y;if(hF!==0||hG!==0){hA[hD.get_sheetName()+'-x']=hF;hA[hD.get_sheetName()+'-y']=hG;hz.push({x:hF,y:hG});hy.push(hD.get_sheetName())}})}}tab.ExportServerCommands.exportImage(tsConfig.current_sheet_name,e,L,hy,hz)},exportData:function(e){if(ss.isNullOrUndefined(e)){e=tab.ModelUtils.findActiveOrDefaultVisual().get_worksheetName()}var L=tab.ModelUtils.findContentDashboard().getViewSession(e);if(ss.isValue(L)){window.open(L.formatUnderlyingDataURL(null),L.getWindow('vud'),'scrollbars,resizable')}},exportCrosstab:function(e){if(ss.isNullOrUndefined(e)){e=tab.ModelUtils.findActiveOrDefaultVisual().get_worksheetName()}var L=tab.ModelUtils.findContentDashboard().getViewSession(e);if(ss.isValue(L)){var hy=tableau.types.ExportDialogType['ExportCrosstab'];L.openDownload(L.formatExportCrossTabURL('utf16'),hy)}},exportPdf:function(){if(ss.isValue(this.$f)){this.$f.dispose()}this.$f=this.$e.$9();this.$f.add_closed(ss.mkdel(this,function(){this.$f.dispose();this.$f=null}));this.$f.show()},$7:function(){tab.WorksheetServerCommands.revert()},$4:function(){if(this.$e.get_autoUpdate()){this.$d()}},$6:function(){if(!this.$e.get_autoUpdate()){this.$d()}},$2:function(){return this.$e.get_autoUpdate()},$d:function(){this.$e.set_autoUpdate(!this.$e.get_autoUpdate());tab.ToolbarServerCommands.setAutoUpdate(this.$e.get_autoUpdate());tab.BaseSession.autoUpdate=this.$e.get_autoUpdate();if(this.$e.get_autoUpdate()&&this.$e.get_invalid()){tab.CommandController.get().refreshLayout()}},$3:function(){return!tsConfig.previewMode&&!ss.isNullOrEmptyString(tsConfig.downloadURI)||tsConfig.is_metrics_view},$0:function(){var e;if(tsConfig.is_metrics_view){e=this.$e.get_session().metricsViewDownloadUrl()}else{e=this.$8(tsConfig.downloadURI)}window.open(e)},$1:function(e){var L;if(tsConfig.is_metrics_view){L=this.$e.get_session().metricsViewDownloadUrl()}else{L=this.$8(e)}window.open(L)},$5:function(){tab.ToolbarServerCommands.refreshData()},$9:function(){this.$e.get_session().saveAndOpenMetricsView()},$c:function(){if(ss.isValue(this.$e.get_toolbarViewModel())){this.$e.get_toolbarViewModel().showShareDialog()}},$b:function(){},$a:function(){},$8:function(e){if(ss.isValue(e)){var L=e.match(ha.$0);if(ss.isValue(L)&&L.length>=2){return tabBootstrap.ViewerBootstrap.get_instance().location.protocol+'//'+tabBootstrap.ViewerBootstrap.get_instance().location.host+L[1]}}return e}},null,[ss.IDisposable]);ss.initClass(hb,a,{get_size:function(){return(ss.isValue(this.vals)?this.vals.length:0)},get_isConstant:function(){return this.isConst},get_isValid:function(){return this.$0},setValue:function(e,L){if(ss.isValue(this.vals)){this.vals[e]=L;if(this.isConst&&e===0){this.constVal=L}}}});ss.initClass(hc,a,{get_visualList:function(){return this.$6},get_groupItemNodes:function(){return this.$6.get_groupItemNodes()},get_visualListPM:function(){return this.$6.get_visualListPresModel()},get_defaultBackgroundColor:function(){return this.$5},set_defaultBackgroundColor:function(e){this.$5=e},get_hoveredCategoricalNode:function(){return this.$4},set_hoveredCategoricalNode:function(e){if(!ss.referenceEquals(this.$4,e)){this.$7=this.$4;this.$4=e;this.notifyPropertyChanged('HoverNode')}},dirtyRect:function(e){var L={x:0,y:0,w:0,h:0};var hy=[this.$7,this.$4];for(var hz=0;hz<hy.length;hz++){var hA=hy[hz];if(ss.isValue(hA)){var hB={x:hA.nTH,y:hA.Mk_,w:hA.XqN,h:hA.$UU};L=tab.RectXYUtil.union(L,hB)}}return tab.RectXYUtil.offsetRect(L,e)},isHovered:function(e){return ss.referenceEquals(e,this.$4)},isSelected:function(e){return ss.isValue(this.$9)&&this.$9.isNodeSelected(e)},isBrushed:function(e){return ss.isValue(this.$3)&&this.$3.isNodeSelected(e)},selectNode:function(e,L,hy,hz){tab.SelectionClientCommands.selectNode(this.$8,e,hy,this.$6,L,this.$a,hz)},handleModelChange:function(){this.notifyPropertyChanged('visualList')},$2:function(){this.notifyPropertyChanged('selection')},dispose:function(){this.$6.remove_newVisualList(ss.mkdel(this,this.handleModelChange));if(ss.isValue(this.$9)){this.$9.remove_newSelection(ss.mkdel(this,this.$2))}if(ss.isValue(this.$3)){this.$3.remove_newSelection(ss.mkdel(this,this.$2))}spiff.BaseViewModel.prototype.dispose.call(this)}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(hd,a,{});ss.initEnum(he,a,{normal:'normal',hover:'hover',press:'press',highlighted:'highlighted',selected:'selected'},true);ss.initClass(hg,a,{});ss.initClass(hh,a,{get_instanceId:function(){return this.$1$1},set_instanceId:function(e){this.$1$1=e},get_sheetId:function(){return this.$1$2},set_sheetId:function(e){this.$1$2=e},get_paneId:function(){return this.$1$3},set_paneId:function(e){this.$1$3=e},get_paneColumnIndex:function(){return this.$1$4},set_paneColumnIndex:function(e){this.$1$4=e},get_paneRowIndex:function(){return this.$1$5},set_paneRowIndex:function(e){this.$1$5=e},get_regionPart:function(){return this.$1$6},set_regionPart:function(e){this.$1$6=e},get_regionCoordinates:function(){return this.$1$7},set_regionCoordinates:function(e){this.$1$7=e},get_pageCoordinates:function(){return this.$1$8},set_pageCoordinates:function(e){this.$1$8=e},get_result:function(){return this.$1$9},set_result:function(e){this.$1$9=e}});ss.initClass(hj,a,{get_fontFamilies:function(){return Array.prototype.slice.call(this.$1)},$0:function(e){var L=e.get_fontFamilies();for(var hy=0;hy<L.length;hy++){var hz=L[hy];var hA=[];var hB=hz.get_fonts();for(var hC=0;hC<hB.length;hC++){var hD=hB[hC];if(hj.get_supportedFonts()[hD]){hA.push(hD)}}if(hA.length>0){this.$1.push(new tab.FontFamily.$ctor1(hz.get_fontGroup(),Array.prototype.slice.call(hA)))}}},toSimpleFontList:function(){return fO.$0(this.$1)}});ss.initClass(hk,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(hl,a,{get_zonePresModel:function(){return this.$g.get_webZoneModel().get_zone()},get_webZonePresModel:function(){return this.$g.get_webZoneModel().get_presModel()},get_domRoot:function(){return this.get_template().get_domRoot()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.handleNewWebZone()},handleNewWebZone:function(){if(ss.isValue(this.$e)){this.updateWebZone()}else{this.createWebZone();this.get_template().get_domRoot().append(this.$e)}},$b:function(e,L){if(L.get_propertyName()==='isActiveZone'){this.$c()}},updateIFrameFromViewModel:function(e){if(!ss.referenceEquals(this.get_webZonePresModel().ZNi,this.$e.children().first().prop('original_url'))){var L=gV.absolutizeURI(this.get_webZonePresModel().ZNi);e.prop('src',L);e.prop('original_url',this.get_webZonePresModel().ZNi)}tab.DomUtil.resize(e.get(0),{l:this.get_zonePresModel().thj,t:this.get_zonePresModel().RAC,w:this.get_zonePresModel().rec,h:this.get_zonePresModel().EUR})},updateWebZone:function(){var e=this.$e.children().first();this.updateIFrameFromViewModel(e);this.$c()},createWebZone:function(){var e='frame_'+this.get_zonePresModel().BCp.toString();var L;this.$e=$('<div>');if(tsConfig.is_mobile){if(tab.BrowserSupport.get_isSafari()||tab.BrowserSupport.get_isIos()){this.$e.css('-webkit-overflow-scrolling','touch');this.$e.css({height:this.$f.get_height()+'px'});this.$e.css({width:this.$f.get_width()+'px'})}this.$e.css({overflow:'auto'})}if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){L=$('<iframe name="'+e+'" frameborder="0"></iframe>')}else{L=$('<iframe/>');L.prop('name',e)}L.css({border:'0px none'});this.$e.append(L);this.updateIFrameFromViewModel(L);this.$c()},$9:function(){this.$f.setActive()},$c:function(){if(!tab.FeatureFlags.isEnabled('DashWebAuthSP2')){return}if(ss.isNullOrUndefined(this.$d)){var e=new spiff.Glass(this.get_element()[0]);e.set_opaque(false);this.$d=e;this.$d.add_click(ss.mkdel(this,this.$9));this.disposables.add$1(this.$d)}if(this.$f.get_isActiveZone()){this.$d.hide()}else{this.$d.show()}},$a:function(){this.updateWebZone()}},ss.makeGenericType(spiff.BaseView$1,[hm]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[hm])]);ss.initClass(hm,a,{add_newWebZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newWebZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},get_webZoneModel:function(){return this.$3},handleNewWebZone:function(){this.$2()},$2:function(){if(ss.isValue(this.$2$1)){this.$2$1()}}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(hn,a,{});ss.initClass(ho,a,{});ss.initClass(hp,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(hq,a,{get_dom:function(){return this.get_template()},get_dashboardNode:function(){return this.$e.get_dashboardNode()},get_containerNode:function(){return this.$e.get_containerNode()},get_dashboardView:function(){return this.$e},dispose:function(){if(ss.isValue(this.$e)){this.$e.dispose()}if(ss.isValue(this.$d)){this.$d.dispose()}ss.makeGenericType(spiff.BaseView$1,[hr]).prototype.dispose.call(this)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$9()},$9:function(){if(ss.isValue(this.$c.get_dashboardViewModel())){this.$c.get_dashboardViewModel().add_sizeChanged(ss.mkdel(this,this.$b));this.$c.get_dashboardViewModel().add_portSizeChanged(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$c.get_dashboardViewModel().remove_sizeChanged(ss.mkdel(this,this.$b));this.$c.get_dashboardViewModel().remove_portSizeChanged(ss.mkdel(this,this.$b))})));this.$e=spiff.ObjectRegistry.newView(bJ).call(null,[this.$c.get_dashboardViewModel()]);this.$e.addToDom(this.get_dom().dashboardContainer);this.colorDashboardContainer();this.get_dom().dashboardContainer.css('visibility','visible')}this.positionDashboardContainer()},$b:function(){this.positionDashboardContainer()},positionDashboardContainer:function(){var e=this.$c.get_dashboardContainerPosition();var L={top:e.t+'px',overflow:''};if(this.get_viewModel().get_scrollDashboardArea()){L.overflow='auto'}this.get_dom().dashboardContainer.css(L);tab.DomUtil.setContentBox(this.get_dom().dashboardContainer.get(0),e)},colorDashboardContainer:function(){if(tsConfig.is_authoring&&tsConfig.current_sheet_type==='dashboard'){return}this.get_dom().dashboardContainer.css('background-color',this.$c.get_dashboardBackgroundColor())},$a:function(){this.$d=spiff.ObjectRegistry.newView(bM).call(null,[this.$c.get_connectionPromptViewModel()])}},ss.makeGenericType(spiff.BaseView$1,[hr]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[hr])]);ss.initClass(hr,a,{add_newDashboard:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_newDashboard:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_newDataConnectionPrompt:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_newDataConnectionPrompt:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},get_dashboardViewModel:function(){return this.$6},get_connectionPromptViewModel:function(){return this.$5},get_scrollDashboardArea:function(){if(!(tsConfig.is_authoring&&this.$7.get_sheetType()==='dashboard')){return false}var e=false;if(ss.isValue(this.get_dashboardViewModel())){var L=this.get_dashboardViewModel().get_size();var hy=this.get_dashboardPortSizeContainer();e=L.rec===hy.w&&L.EUR===hy.h}return!e},get_contentDashboardViewModel:function(){if(!this.$7.get_isCurrentSheetStoryboard()){return this.$6}var e=this.$6.get_zoneViewModels();var L=_.keys(e);for(var hy=0;hy<L.length;hy++){var hz=L[hy];var hA=e[hz];if(hA.get_zoneType()==='flipboard'){if(ss.isNullOrUndefined(hA.get_zoneContentViewModel())){return null}return hA.get_zoneContentViewModel().get_dashboardViewModel()}}return null},get_dashboardPortSizeContainer:function(){var e=tabBootstrap.ViewerBootstrap.get_instance().getWebClientPortSize(tsConfig.current_sheet_type);var L={l:0,t:0,w:e.w,h:e.h};return L},get_dashboardContainerPosition:function(){return P.getClientBounds()},get_dashboardBackgroundColor:function(){return this.get_dashboardViewModel().get_backgroundColor()},dispose:function(){if(ss.isValue(this.$6)){this.$6.dispose()}if(ss.isValue(this.$5)){this.$5.dispose()}this.$7.remove_newDashboard(ss.mkdel(this,this.$2));spiff.BaseViewModel.prototype.dispose.call(this)},$2:function(e){if(ss.isValue(this.$6)){this.$6.dispose()}this.$6=bK.new$1(e);this.raiseActionEvent(this.$2$1)},$3:function(e){if(ss.isNullOrUndefined(this.get_connectionPromptViewModel())){this.$5=new bN(e);this.raiseActionEvent(this.$2$2)}else{this.get_connectionPromptViewModel().promptUpdated(e)}},$4:function(){this.$5=tab.MiscUtil.dispose$1(this.get_connectionPromptViewModel())}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(hs,a,{get_workerID:function(){return this.$1},get_image:function(){return this.$0}},ss.EventArgs);ss.initClass(ht,a,{get_workerID:function(){return this.$0}},ss.EventArgs);ss.initClass(hu,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(hv,a,{$k:function(){return this.$q},$l:function(e){this.$q=e;if(ss.isInstanceOfType(this.$q,spiff.IAppendableView)){this.$q.addToDom(this.get_template().get_domRoot())}},$m:function(){return this.get_viewModel()},dispose:function(){this.$m().remove_updateZone(ss.mkdel(this,this.$d));this.$m().remove_resizeZone(ss.mkdel(this,this.$c));this.$m().remove_newZoneContent(ss.mkdel(this,this.$b));this.$m().remove_validStateChanged(ss.mkdel(this,this.$g));if(ss.isValue(this.$q)){this.$q.dispose();this.$q=null}this.$h();ss.makeGenericType(spiff.BaseView$1,[hw]).prototype.dispose.call(this)},$h:function(){if(ss.isValue(this.$o)){this.$o.dispose();this.$o=null}},onViewModelPropertyChanged:function(e,L){ss.makeGenericType(spiff.BaseView$1,[hw]).prototype.onViewModelPropertyChanged.call(this,e,L);if(L.get_propertyName()==='isActiveZone'){this.$i()}if(L.get_propertyName()==='isReadyZone'){this.$j()}},$9:function(){if(this.get_template().get_domRoot().get(0).offsetHeight===0||this.get_template().get_domRoot().get(0).offsetWidth===0){return}if(!ss.isValue(this.$o)){this.$o=new spiff.Glass(this.get_template().get_domRoot().get(0));this.$o.set_opaque(true)}this.$o.show()},$a:function(){this.$h()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(ss.isNullOrUndefined(this.$k())){this.$d();this.$c();if(ss.isValue(this.$m().get_zoneContentViewModel())){this.$b(this.$m().get_zoneContentViewModel())}this.$g()}if(ss.contains(hv.$1,this.$m().get_zoneType())){this.get_element().addClass('tabSuppressVizTooltipsAndOverlays')}this.get_element().addClass('tabZone-'+this.$m().get_zoneType());if(tab.ProgressiveLoader.get_progressiveLoadEnabled()&&!tab.BrowserSupport.get_isIE()){this.get_template().get_domRoot().addClass('fade-bg')}if(this.get_viewModel().get_isSetActiveZoneSupported()){var e=spiff.TableauClickHandler.targetAndClick(this.get_element()[0],ss.mkdel(this,function(L){this.get_viewModel().setActive()}));e.set_stopPropagationOnEvent(false);this.disposables.add$1(e)}},$i:function(){this.get_template().get_domRoot().toggleClass('tabZoneSelected',this.get_viewModel().get_isActiveZone())},$j:function(){this.get_template().get_domRoot().toggleClass('tabZoneReady',this.get_viewModel().get_isReadyZone())},$d:function(){var e=this.$m().get_zoneZIndex();if(e!==this.$p){this.$p=e;this.get_template().get_domRoot().css('z-index',e.toString())}this.get_template().get_domRoot().attr('id','tabZoneId'+this.get_viewModel().get_zoneId());this.$i();var L=this.$m().get_zoneType()==='layout-flow'||this.$m().get_zoneType()==='layout-free-form'||this.$m().get_zoneType()==='empty';this.get_template().get_domRoot().toggleClass('wcLayoutContainer',L);if(ss.contains(hv.zonesThatUseStyledBox,this.$m().get_zoneType())){var hy=this.$m().get_containerStyle();var hz=cL.makeStyledBoxCssDict(hy,true);if(ss.isValue(hy)&&!hy.iKN){hz['background-color']=''}this.get_template().get_domRoot().css(hz);this.$n=''}else{var hA=this.$m().get_backgroundColor();if(!ss.referenceEquals(hA,this.$n)){this.get_template().get_domRoot().css('background-color',hA);this.$n=hA}}this.$g()},$c:function(){var e=this.$m();this.get_template().get_domRoot().css({width:e.get_width()+'px',height:e.get_height()+'px',top:e.get_y()+'px',left:e.get_x()+'px'})},$g:function(){if(!this.$m().get_valid()){this.$9()}else{if(ss.isValue(this.$o)){dojo.publish('ZoneBecameValid')}this.$a()}},$b:function(e){var L=this.$m().get_zoneType();switch(L){case'title':case'text':{var hy=new gj(e);this.$l(hy);break}case'size':case'shape':case'color':case'map':{if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isInstanceOfType(e,bj)){this.$l(spiff.ObjectRegistry.newView(bi).call(null,[e]))}else if(ss.isInstanceOfType(e,fe)){this.$l(new fd(e))}}else{var hz=spiff.ObjectRegistry.newView(dR).call(null,[e]);this.$l(hz)}break}case'current-page':{this.$l(spiff.ObjectRegistry.newView(ez).call(null,[e]));break}case'filter':{if(tab.FeatureFlags.isEnabled('VizCatQF')&&this.$m().get_containsNewStyleQuickFilter()){var hA=e;this.$l(fg.getQuickFilterView(hA));break}this.$l(spiff.ObjectRegistry.newView(dW).call(null,[e]));break}case'highlighter':{if(tab.FeatureFlags.isEnabled('VizDataHL')){this.$l(spiff.ObjectRegistry.newView(bW).call(null,[e]))}break}case'paramctrl':{this.$l(spiff.ObjectRegistry.newView(eM).call(null,[e]));break}case'flipboard-nav':{eq.load(dD).call(null).done(ss.mkdel(this,function(hB){this.$l(hB.newFlipboardNavigatorView(e))}));break}case'flipboard':{eq.load(dD).call(null).done(ss.mkdel(this,function(hB){this.$l(hB.newFlipboardView(e))}));break}case'web':{this.$l(new hl(e,this.$m()));break}case'bitmap':{this.$l(new dt(e,this.$m()));break}case'viz':{this.$l(spiff.ObjectRegistry.newView(eH).call(null,[e]));break}default:{break}}if(tab.ProgressiveLoader.get_progressiveLoadEnabled()&&!tab.BrowserSupport.get_isIE()){this.$k().get_rootElement().addClass('fade-in')}},$f:function(e){this.$m().zoneEntered(false)},$e:function(e){this.$m().zoneEntered(true)}},ss.makeGenericType(spiff.BaseView$1,[hw]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[hw])]);ss.initClass(hw,a,{add_updateZone:function(e){this.$2$1=ss.delegateCombine(this.$2$1,e)},remove_updateZone:function(e){this.$2$1=ss.delegateRemove(this.$2$1,e)},add_resizeZone:function(e){this.$2$2=ss.delegateCombine(this.$2$2,e)},remove_resizeZone:function(e){this.$2$2=ss.delegateRemove(this.$2$2,e)},add_newZoneContent:function(e){this.$2$3=ss.delegateCombine(this.$2$3,e)},remove_newZoneContent:function(e){this.$2$3=ss.delegateRemove(this.$2$3,e)},add_validStateChanged:function(e){this.$2$4=ss.delegateCombine(this.$2$4,e)},remove_validStateChanged:function(e){this.$2$4=ss.delegateRemove(this.$2$4,e)},get_zoneContentViewModel:function(){return this.$f},get_zoneType:function(){return this.$g.get_zoneType()},get_height:function(){return this.$g.get_height()-2*this.$g.borderWidth()},get_width:function(){return this.$g.get_width()-2*this.$g.borderWidth()},get_x:function(){return this.$g.get_x()},get_y:function(){return this.$g.get_y()},get_model:function(){return this.$g},get_containerStyle:function(){var e=this.$g.pm.rPC;if(this.$6()){e=tab.MiscUtil.cloneObject(e);e.iKN=true;e.eBu=this.$g.get_dashboardModel().get_zonePlaceholderColor()}return e},get_titleSize:function(){return{w:this.$g.pm.nkG1,h:this.$g.pm.jZr}},get_valid:function(){if(tab.ApplicationModel.get_instance().get_isOffline()&&!ss.contains(hw.$1,this.get_zoneType())){return false}return this.$d},get_zoneZIndex:function(){return hw.calculateZoneZIndex(this.$g)},get_zoneId:function(){return this.$g.get_zoneId()},get_associatedSheet:function(){return this.$g.get_associatedSheet()},get_backgroundColor:function(){var e;if(this.$6()){e=this.$g.get_dashboardModel().get_zonePlaceholderColor()}else if(ss.contains(hw.$0,this.get_zoneType())){e=''}else{e=this.$g.get_backgroundColor()||'rgba(0,0,0,0)'}return e},get_isActiveZone:function(){return this.$b},set_isActiveZone:function(e){if(this.$b!==e){this.$b=e;this.notifyPropertyChanged('isActiveZone')}},get_isReadyZone:function(){return this.$c},set_isReadyZone:function(e){if(this.$c!==e){this.$c=e;this.notifyPropertyChanged('isReadyZone')}},get_isSetActiveZoneSupported:function(){if(!tsConfig.is_authoring||tsConfig.current_sheet_type!=='dashboard'){return false}return this.get_zoneType()==='viz'||tab.FeatureFlags.isEnabled('DashWebAuthSP2')},get_containsNewStyleQuickFilter:function(){return this.$a},setActive:function(){tab.SelectionClientCommands.setActiveZone(this.get_zoneId())},zoneEntered:function(e){this.$g.get_dashboardModel().set_readyZoneID((e?this.get_zoneId():0))},dispose:function(){if(ss.isValue(this.$f)){this.$f.dispose();this.$f=null}if(ss.isValue(this.$e)){this.$e.remove_visualValidStateChanged(ss.mkdel(this,this.$9))}this.$g.remove_updateZone(ss.mkdel(this,this.$5));this.$g.remove_resizeZone(ss.mkdel(this,this.$4));this.$g.remove_newZoneContent(ss.mkdel(this,this.$2));this.$g.remove_removeZoneContent(ss.mkdel(this,this.$3));spiff.BaseViewModel.prototype.dispose.call(this)},$8:function(){var e=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.$g.get_associatedSheet());if(!ss.referenceEquals(this.$e,e)){if(ss.isValue(this.$e)){this.$e.remove_visualValidStateChanged(ss.mkdel(this,this.$9))}this.$e=e;if(ss.isValue(this.$e)){this.$e.add_visualValidStateChanged(ss.mkdel(this,this.$9))}}},$5:function(){this.$8();this.$9();this.raiseActionEvent(this.$2$1);if(this.get_zoneType()==='filter'&&ss.isNullOrUndefined(this.$f)&&ss.isValue(this.get_model().get_model())){this.$2(this.get_model().get_model())}},$4:function(){this.raiseActionEvent(this.$2$2)},$9:function(){var e=true;if(this.$g.get_isDependentOnViz()&&ss.isValue(this.$e)){e=this.$e.get_isVisualValid()}if(e!==this.$d){this.$d=e;this.raiseActionEvent(this.$2$4)}},forceZoneValidState:function(e){if(e!==this.$d){this.$d=e;this.raiseActionEvent(this.$2$4)}},$2:function(e){this.$a=false;var L=this.$g.get_zoneType();var hy=ss.mkdel(this,function(){this.$7(this.$f)});var hz=this.$g.get_worksheetName();switch(L){case'title':case'text':{this.$f=new gk(e);break}case'color':case'size':case'shape':case'map':{if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isInstanceOfType(e,tab.CategoricalLegendModel)){this.$f=new bj(e,L,hz,this)}else if(ss.isInstanceOfType(e,tab.QuantitativeColorLegendModel)){this.$f=new fe(e,hz,this)}}else{this.$f=new dS(e,hz,this)}break}case'current-page':{if(tsConfig.allow_filter){this.$f=new eA(e);break}return}case'web':{this.$f=new hm(e);break}case'bitmap':{this.$f=new du(e);break}case'flipboard-nav':{eq.load(dD).call(null).done(ss.mkdel(this,function(hF){this.$f=hF.newFlipboardNavigatorViewModel(e);hy()}));return}case'flipboard':{eq.load(dD).call(null).done(ss.mkdel(this,function(hF){this.$f=hF.newFlipboardViewModel(e,this);hy()}));return}case'filter':{if(ss.referenceEquals(ss.getInstanceType(e),tab.QuickFilterDisplayModel)){var hA=fi.getQuickFilterTypeViewModel(e);if(ss.isValue(hA)){this.$a=true;this.$f=hA}}else{var hB=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),hz);var hC=e;var hD=tab.ModelUtils.findMatchingFilterModel(hB,hC);if(ss.isValue(hD)){this.$f=new dX(hC,hD)}else{return}}break}case'highlighter':{this.$f=new bY(e,tab.ModelUtils.getVisualId(hz),this);break}case'paramctrl':{this.$f=new eN(e);break}case'viz':{var hE=this.$g.get_associatedSheet();this.$f=new eI(e,hE);break}case'layout-basic':{return}default:{return}}hy()},$3:function(){this.dispose()},$7:function(e){if(ss.isValue(this.$2$3)){this.$2$3(e)}},$6:function(){var e=tab.ProgressiveLoader.get_progressiveLoadEnabled()&&ss.contains(tab.ProgressiveLoader.zonesThatDeferContentCreation,this.get_zoneType())&&ss.isNullOrUndefined(this.$f);return e}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel]);ss.initClass(hx,a,{});(function(){d.$0=10;d.$1=600})();(function(){g.$0="\n<div class='tabDataConnVarEditControl'>\n    <span class='tabDataConnVarEditCtrlVarArea'>\n        <div class='tabDataConnVarEditCtrlName'/>\n        <div class='tabDataConnVarEditCtrlDesc'/>\n    </span>\n    <span class='tabDataConnVarEditCtrlOpSelector'/>\n    <input class='tabDataConnVarEditCtrlValInput' type='text'/>\n    <span class='tabDataConnVarEditCtrlValSelector'>\n        <div class='tabDataConnVarEditCtrlFirstValSelector'>\n            <span class='tabDataConnVarEditCtrlFromLabel'/>\n        </div>\n        <div class='tabDataConnVarEditCtrlSecondValSelector'>\n            <span class='tabDataConnVarEditCtrlToLabel'/>\n        </div>\n    </span>\n</div>"})();(function(){h.$0="\n<div class='tabPane'>\n    <div class='tabPaneTitle'/>\n    <div class='tabPaneBody'/>\n</div>"})();(function(){i.$0="<div class='refLineConstantValueEditor'><span class='refLineConstantValueEditorTitle'></span><input class='refLineConstantValueEditorInput' type='text'/></div>"})();(function(){j.$0="\n<div class='tabTabbedPane'>\n    <div class='tabTabLabels'/>\n    <div class='tabTabContentArea'/>\n</div>"})();(function(){k.$0="<div class='tabMapsSearchContainer'><div class='tabMapsSearchView'><div class='tabMapsSearchView-searchControlsContainer'></div></div></div>"})();(function(){cK.$4=null;cK.$3=null})();(function(){gg.defaultLinePattern='solid';gg.defaultLineJoin='bevel';gg.defaultLineCap='butt';gg.defaultTextBaseline='alphabetic';gg.defaultTextAlign='start';gg.defaultLineDashDashed=[3,1];gg.defaultLineDashDotted=[1,1];gg.defaultLineWidth=1;gg.defaultColor='rgb(0,0,0)';gg.defaultTextColor='rgb(0,0,0)';gg.defaultTextAngle=0;gg.defaultFontName='Arial';gg.defaultFontSize=8;gg.defaultTextUnderline=false;gg.$1=0.01})();(function(){cR.halfPI=0.5*Math.PI;cR.onePI=Math.PI;cR.oneAndHalfPI=1.5*Math.PI;cR.twoPI=2*Math.PI;cR.$c=Math.PI*0.15;cR.$b=9.99999974737875E-06})();(function(){bb.halfPI=0.5*Math.PI;bb.onePI=Math.PI;bb.oneAndHalfPI=1.5*Math.PI;bb.twoPI=2*Math.PI;bb.angleEpsilon=0.000174000000697561;bb.$7=0.400000005960464})();(function(){fx.shapeMapping=null;fx.reverseShapeMapping=null;fx.$1=null;fx.$0=null;fx.$1={};fx.$1['enable-pan-x']=1;fx.$1['enable-pan-y']=2;fx.$1['enable-zoom-x']=4;fx.$1['enable-zoom-y']=8;fx.$1['enable-scale-x']=16;fx.$1['enable-scale-y']=32;fx.$1['clip-to-cell-x']=64;fx.$1['clip-to-cell-y']=128;fx.$1['clip-to-cell-for-selection']=256;fx.$1['x-axis-on-top']=512;fx.$1['y-axis-on-right']=1024;fx.$1['has-cells-x']=2048;fx.$1['has-cells-y']=4096;fx.$0={};fx.$0['end']=1;fx.$0['endprimitive']=2;fx.$0['closedprimitive']=4;fx.$0['marked']=8;fx.$0['markediflabel']=16;fx.$0['debug']=128;fx.$0['user']=65536;fx.shapeMapping=ss.mkdict(['0','shapeIDCircle','1','shapeIDSquare','2','shapeIDPlus','3','shapeIDTimes','4','shapeIDAsterisk','5','shapeIDDiamond','6','shapeIDTriangle','7','shapeIDDownTriangle','8','shapeIDLeftTriangle','9','shapeIDRightTriangle','4194304','shapeIDFilledCircle','4194305','shapeIDFilledSquare','4194306','shapeIDFilledPlus','4194307','shapeIDFilledTimes','4194308','shapeIDFilledStar','4194309','shapeIDFilledDiamond','4194310','shapeIDFilledTriangle','4194311','shapeIDFilledDownTriangle','4194312','shapeIDFilledLeftTriangle','4194313','shapeIDFilledRightTriangle','-4194304','shapeIDUnscaledFilledCircle']);fx.reverseShapeMapping={};var e=_.keys(fx.shapeMapping);for(var L=0;L<e.length;L++){var hy=e[L];fx.reverseShapeMapping[fx.shapeMapping[hy]]=hy}})();(function(){hc.propertyHoverNode='HoverNode'})();(function(){cL.$7=[{item1:'thin',item2:'100'},{item1:'extra-light',item2:'200'},{item1:'extra light',item2:'200'},{item1:'light',item2:'300'},{item1:'normal',item2:'400'},{item1:'regular',item2:'400'},{item1:'book',item2:'400'},{item1:'medium',item2:'500'},{item1:'demi-bold',item2:'600'},{item1:'semi-bold',item2:'600'},{item1:'demi',item2:'600'},{item1:'bold',item2:'700'},{item1:'heavy',item2:'800'},{item1:'black',item2:'900'}];cL.$5=[{item1:'compressed',item2:'extra-condensed'},{item1:'narrow',item2:'condensed'},{item1:'condensed',item2:'condensed'}];cL.$6=[{item1:'italic',item2:'italic'}]})();(function(){ch.$7='rgb(0,0,0)';ch.$6='rgb(255,255,204)';ch.$b='rgb(255,255,255)';ch.$a='rgb(46,106,197)';ch.$9='rgb(84,84,84)';ch.$8='rgb(239,239,239)';ch.$d=['x-labels','bottom-axis','top-axis'];ch.$e=['y-labels','left-axis','right-axis'];ch.$c=true})();(function(){var e=[];e.push('left-axis');e.push('right-axis');e.push('y-labels');e.push('x-labels');e.push('top-axis');e.push('bottom-axis');e.push('title');e.push('caption');eI.blackListVisualParts=e})();(function(){eD.$4='rgba(0,0,0,1)';eD.$3='rgba(255,255,255,255)';eD.$6=['normalUnderPass','normalOnPass','highlightedUnderPass','highlightedOnPass','selectedUnderPass','selectedOnPass'];eD.$5=['background','marks','underLabel','label','foreground']})();(function(){eB.shapeMarkStampingRatio=32;eB.$b='_int';eB.$9=32767;eB.$a=100;eB.$8=['font','font_size','font_style','font_weight'];eB.$3=['color','border_color','halo_color','selected_halo_color','highlighted_halo_color','selected_multi_prim_halo_color','text_style_color','background_color'];eB.$6=['x','x1','x_prev','x_next','cell_x'];eB.$5=['clip_width'];eB.$7=['y','y1','y_prev','y_next','cell_y'];eB.$4=['clip_height'];eB.$c=null;eB.$d=null;eB.$c={};eB.$c['theta']={x:0,y:1};eB.$c['theta1']={x:0,y:1};eB.$c['size']={x:0,y:4096};eB.$c['text_run_x']={x:0,y:4096};eB.$c['text_run_direction_x']={x:0,y:4096};eB.$c['text_run_y']={x:0,y:4096};eB.$c['text_run_direction_y']={x:0,y:4096};for(var e=0;e<eB.$6.length;e++){var L=eB.$6[e];eB.$c[L]={x:0,y:0}}for(var hy=0;hy<eB.$7.length;hy++){var hz=eB.$7[hy];eB.$c[hz]={x:0,y:0}}eB.$d=[];eB.$d.push(0)})();(function(){fy.$1={x:0,y:0,w:0,h:0}})();(function(){n.$0="<div class='tabHorizontalSlider'>\n</div>'"})();(function(){ba.$9=null;ba.$b=false;ba.$c=null;ba.$a=false;if(tabBootstrap.Utility.get_embedMode()==='embeddedNotInWg'){var e=window.addEventListener;if(ss.isValue(e)){e('message',ba.$3,false)}else{var L=ba.$3;window.self.attachEvent('onmessage',L)}ba.$a=true}ba.$b=tabBootstrap.ViewerBootstrap.get_instance().isVisibleRectCommunicationEnabled;if(tab.BrowserSupport.get_isIE()){ba.$1()}})();(function(){cd.$6=6})();(function(){J.$3=tab.BrowserSupport.get_nativeJSONSupport()})();(function(){q.$0="<div><div class='tabLeafletMapHolder' /><div class='tabLeftBarnDoor' /><div class='tabRightBarnDoor' /></div>"})();(function(){D.$0="<div class='tabAccordionItem'>\n        <div class='tabAccordionItemHeader'><span class='tabAccordionItemTitle'/><span class='tabAccordionItemIconTwo'/><div class='tabAccordionItemIcon'/></div>\n        <div class='tabAccordionItemContent'/>\n        </div>"})();(function(){E.$0="<div class='tabAccordion'><div class='tabAccordionItems'/></div>"})();(function(){G.propertyActiveItem='ActiveItem';G.propertyAllItems='AllItems'})();(function(){F.$0='tabAccordionItem'})();(function(){W.dashboardContainerSelector='.dashboardSpacer';W.overlayId='auth-overlay';W.messageEventName='message';W.frameTestHook='dse-frame';W.$0='ds-retrybtn'})();(function(){cN.genericErrorTemplateHtml='<div class="auth-box ocontent tb-data-source-error-container"> \n                                                              <div class="tb-data-source-error"></div>\n                                                              <div class="tb-data-source-error-sub"></div>\n                                                              <div class="tab-UnifiedButton bordered tb-data-source-button-retry" id="ds-retrybtn"></div>\n                                                            </div>'})();(function(){cp.bodyContainer='<span></span>'})();(function(){M.$1=new cj;M.$2=null;M.$3=false;M.$1$1=null;M.$1$2=null})();(function(){N.$0="<div id='tabViewer' class='wcBody' style='visibility:hidden;'><div class='wcVizPlaceholder'/></div>"})();(function(){cm.$0="<div class='tab-downloadView tab-toolbarFlyout'><div class='tab-downloadApplication'><div class='tab-explanationTitle' /><div class='tab-explanationBody' /><div class='tab-downloadAction'><div class='tab-availablePlatforms' /><div class='tab-downloadAppButton' /></div></div><div class='tab-downloadButtons'></div></div>"})();(function(){fL.template="\n<li class='tab-pdfdlg-sheet'>\n    <button class='tab-pdfdlg-thumbnail-button'>\n        <span class='tab-pdfdlg-button-icon tab-pdfdlg-thumbnail'></span>\n        <div class='tab-pdfdlg-note'></div>\n    </button>\n</li>"})();(function(){cx.template="\n<div class='tab-pdfdlg-body'>\n    <div class='tab-pdfdlg-select-group'>\n        <div class='pdf-only tab-pdfdlg-selector'>\n            <label for='pdfdlgPageSize'>{0}:</label><br />\n            <select id='pdfdlgPageSize' name='pageSize'></select>\n        </div>\n        <div class='png-only tab-pdfdlg-selector'>\n            <label for='pdfdlgImageSize'>{1}:</label><br />\n            <input name='imageHeight'></input>\n            <input name='imageWidth'></input>\n        </div>\n        <div class='tab-pdfdlg-selector'>\n            <label for='pdfdlgScaling'>{2}:</label><br />\n            <select id='pdfdlgScaling' name='scaling'></select>\n        </div>\n    </div>\n    <h3 class='pdf-only'>{3}:</h3>\n    <div class='tab-pdfdlg-button-group tab-pdfdlg-group-orientation'>\n        <button class='left pdf-only' name='orientation' value='portrait'>\n            <span class='tab-pdfdlg-portrait-icon tab-pdfdlg-button-icon'></span>\n            <div class='tab-pdfdlg-note'>{4}</div>\n        </button><button class='right pdf-only' name='orientation' value='landscape'>\n            <span class='tab-pdfdlg-landscape-icon tab-pdfdlg-button-icon'></span>\n            <div class='tab-pdfdlg-note'>{5}</div>\n        </button>\n    </div>\n    <h3>{6}:</h3>\n    <div>\n        <div class='tab-pdfdlg-button-group tab-pdfdlg-dashboard-content-mode'>\n            <button class='selected left' name='dashboard-content' value='dashboard'>\n                <span class='tab-pdfdlg-dashboard-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{8}</div>\n            </button><button class='' name='dashboard-content' value='all-dashboard'>\n                <span class='tab-pdfdlg-dash-sheets-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{7}</div>\n            </button><button class='right' name='dashboard-content' value='all'>\n                <span class='tab-pdfdlg-workbook-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{9}</div>\n            </button>\n        </div>\n        <div class='tab-pdfdlg-button-group tab-pdfdlg-story-content-mode'>\n            <button class='left selected' name='story-content' value='this-sheet'>\n                <span class='tab-pdfdlg-story-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{12}</div>\n            </button><button class='right' name='story-content' value='all'>\n                <span class='tab-pdfdlg-workbook-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{9}</div>\n            </button>\n        </div>\n        <div class='tab-pdfdlg-button-group tab-pdfdlg-worksheet-content-mode'>\n            <button class='left selected' name='worksheet-content' value='this-sheet'>\n                <span class='tab-pdfdlg-worksheet-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{10}</div>\n            </button><button class='right' name='worksheet-content' value='all'>\n                <span class='tab-pdfdlg-workbook-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{9}</div>\n            </button>\n        </div>\n    </div>\n    <h3>{11}:</h3>\n    <div class='tab-pdfdlg-sheets-container'>\n        <ul class='tab-pdfdlg-sheet-list'></ul>\n    </div>\n    <div class='tab-dialog-footer'>\n        <div class='tab-pdfdlg-status'>\n            <img class='tab-pdfdlg-spinner' src='/images/30x30REV.gif' />\n            <span class='tab-dialog-status-msg'></span>\n        </div>\n        <div class='tab-dialog-actions'></div>\n    </div>\n</div>"})();(function(){cw.$0=null;spiff.ObjectRegistry.registerType(cw,cw).call(null)})();(function(){fI.linkTemplate="\n            <div class='tab-shareLinkSection'>\n                <span class='tab-shareLinkTitle tab-shareTitle'/>\n                <input class='tab-shareLinkInput tab-shareInput' type='text'/>\n                <div class='tab-shareLinkButtons'/>\n            </div>";fI.embedTemplate="\n            <div class='tab-shareEmbedSection'>\n                <span class='tab-shareEmbedTitle tab-shareTitle'/>\n                <input class='tab-shareEmbedInput tab-shareInput'/>\n            </div>";fI.viewStateTemplate="\n            <div class='tab-shareViewStateSection'>\n                <span class='tab-shareCurrentView tab-shareViewToggle'/><span class='tab-shareOriginalView tab-shareViewToggle'/>\n            </div>";fI.$0="\n            <div class='tab-shareView tab-toolbarFlyout'>\n            </div>"})();(function(){spiff.ObjectRegistry.registerType(fJ,fJ).call(null)})();(function(){fK.currentViewPath='/shared/';fK.$2='http://facebook.com';var e=[];e.push('from_wg');e.push('host_url');e.push('debug');e.push('wb');e.push('vw');e.push('prefix');e.push('cvu');e.push('cvn');e.push('delay');e.push('preview');e.push('site');e.push('guid');e.push('mobile');e.push('app');e.push('showVizHome');e.push('record_client_performance');e.push('bootstrapWhenNotified');e.push('apiID');e.push('reloadOnCustomViewSave');e.push('openAuthoringInTopWindow');e.push('browserBackButtonUndo');fK.$3=e})();(function(){gb.$0="\n            <div class='tab-subscribeView tab-toolbarFlyout'>\n                <div class='tab-subscribeToggleSection'>\n                    <span class='tab-subscribeThisView tab-subscribeToggle'/><span class='tab-subscribeAllViews tab-subscribeToggle'/>\n                </div>\n                <div class='tab-subscribeSchedule'/>\n                <div class='tab-subscribeEmail'/>\n                <div class='tab-subscribeSubject'/>\n                <div class='tab-subscribeSubmit'/>\n            </div>"})();(function(){spiff.ObjectRegistry.registerType(et,et).call(null)})();(function(){spiff.ObjectRegistry.registerType(cQ,cQ).call(null)})();(function(){fZ.$0=0;spiff.ObjectRegistry.registerType(fZ,fZ).call(null)})();(function(){ga.maxSubscriptionSubjectLength=256;ga.maxSubscriptionEmailLength=100})();(function(){S.$0="<div class='tab-areYouSure-container'><div class='tab-areYouSure-outer'><div class='tab-areYouSure-inner'><span class='tab-areYouSure-label'></span><div class='tab-areYouSure-no tab-areYouSure-button'></div><div class='tab-areYouSure-yes tab-areYouSure-button'></div></div></div></div>"})();(function(){bF.$0="\n<div class='tab-customViewsView tab-toolbarFlyout'>\n    <div class='tab-cv-flyoutSection tab-customViews-saveView' />\n    <div class='tab-cv-flyoutSection tab-cv-myViews'>\n        <div class='tab-toolbarFlyoutTitle'/>\n        <div class='tab-cv-listWrapper'>\n            <div class='tab-cv-viewsList'/>\n        </div>\n    </div>\n    <div class='tab-cv-flyoutSection tab-cv-otherViews'>\n        <div class='tab-toolbarFlyoutTitle'/>\n        <div class='tab-cv-listWrapper'>\n            <div class='tab-cv-viewsList'/>\n        </div>\n    </div>\n    <div class='tab-cv-flyoutSection tab-cv-manageModeControls' />\n</div>"})();(function(){bG.$0='tab-customViews-rename-container';spiff.ObjectRegistry.registerType(bG,bG).call(null)})();(function(){bH.maxCustomViewNameLength=255;bH.modeSelect=0;bH.modeManage=1;bH.$1=tab.Logger.getLogger(bH)})();(function(){co.$0='http://public.tableau.com/s/download'})();(function(){gv.$2='download';gv.$5='share';gv.$1='customviews';gv.$6='subscribe';gv.$3='edit';gv.$4='redo'})();(function(){cn.$1='tabDownloadData';cn.$0='tabDownloadCrosstab';cn.$2='tabDownloadImage';cn.$3='tabDownloadPdf';cn.$4='tabDownloadWorkbook';cn.$5='tabPublicApp';spiff.ObjectRegistry.registerType(cn,cn).call(null)})();(function(){gA.$0='tab-icon-';gA.$3='toggle-updates';gA.$2='toggle-labels';gA.$1=430})();(function(){ha.$0=new RegExp('^https?://[^/]+(.*)$')})();(function(){ea.horizontalIteratorButtonSize=12;ea.horizontalIteratorButtonHolderWidth=28;ea.parentZoneSizeChangedKey='ParentZoneSizeChanged';ea.newZoneParentKey='newZoneParent'})();(function(){bj.$1=new tab.ColorModel(0,0,0,1);bj.$2='Items';bj.$0='CustomShapesLoaded'})();(function(){fe.modelChangedProperty='ModelChanged'})();(function(){dS.$0='urlCacheInfo'})();(function(){hw.isActiveZonePropertyName='isActiveZone';hw.isReadyZonePropertyName='isReadyZone';hw.$0=['bitmap','text','layout-free-form','empty'];hw.$1=['viz','color','shape','size','map','text','text-block','title','bitmap','highlighter','empty']})();(function(){eq.$2={};eq.$3={};eq.$4=false;eq.$5=true;eq.register(dD).call(null,'Story')})();(function(){gi.contentElemClassName='tab-textRegion-content';gi.$0="<div class='tab-textRegion'><div class='tab-textRegion-boundary'><div class='tab-textRegion-content selectable-text'></div></div></div>"})();(function(){gI.$0='.tab-tooltipContent';gI.$1="\n<div class='tab-tooltip'>\n  <div class='tab-tooltipContainer'>\n    <div class='tab-tooltipContent' waiRole='alert'></div>\n  </div>\n  <div class='tab-tooltipConnector'></div>\n</div>"})();(function(){gB.defaultVerticalOffset=16;gB.defaultHorizonalOffset=16;gB.$2=16;gB.belowRightClass='tab-tooltipBR';gB.belowLeftClass='tab-tooltipBL';gB.aboveRightClass='tab-tooltipAR';gB.aboveLeftClass='tab-tooltipAL';gB.$1='tab-tooltipAR tab-tooltipAL tab-tooltipBL tab-tooltipBR';gB.$3=null})();(function(){gR.$9="\n<div class='tab-ubertip'>\n  <div class='tab-ubertipContent'>\n    <div class='tab-ubertipTooltip'></div>\n    <div class='tab-ubertipActions'></div>\n  </div>\n  <div class='tab-ubertipCommandArea'>\n    <div class='tab-ubertipSelected'></div>\n    <div class='tab-ubertipCommands'></div>\n    <div class='tab-clear'></div>\n  </div>\n</div>";gR.$b='.tab-ubertipTooltip';gR.$7='.tab-ubertipContent';gR.$2='.tab-ubertipActions';gR.$4='.tab-ubertipCommandArea';gR.$6='.tab-ubertipCommands';gR.$5='.tab-clear';gR.$a='.tab-ubertipSelected';gR.$3="<li><div class='tab-separator'>&nbsp;</div></li>";gR.$8=70;gR.$c=null;gR.$c={}})();(function(){hg.$1$1=null;hg.$1$2=null})();(function(){gD.whitespaceObjectId='W';gD.unknownObjectId='U';gD.$2='mouseleave.basemode';gD.$3=0;gD.$1=null;gD.$0=null;gD.$4='U'})();(function(){bg.$1="<span class='tabLegendItemSwatch' />";bg.$0="<canvas class='tabLegendItemSwatch' />";bg.$2="<div class='tabLegendItem'><span class='tabLegendItemSwatchHolder'></span><span class='tabLegendItemLabelHolder'><span class='tabLegendItemLabel' /></span></div>"})();(function(){bf.$0="<span class='tabLegendItemColumn'/>"})();(function(){bi.$1=1;bi.$3='tabLegendItem';bi.$5=2;bi.$2='tableau_base_legend_';bi.$6=new tab.ColorModel(216,216,216,1);bi.$4=new tab.ColorModel(178,178,178,1)})();(function(){ec.legendHighlighterClass='tabLegendHighlighter';ec.legendHighlighterSelector='.tabLegendHighlighter'})();(function(){fc.$0="\n            <div class='tabLegendPanel' style='position: relative; overflow: hidden'>\n                <div class='tabLegendTitle' style='position: absolute'></div>\n                <canvas class='tabLegendRamp' style='position: absolute'></canvas>\n                <div class='tabLegendCenterMark' style='position: absolute'></div>\n                <div class='tabLegendMinLabel' style='position: absolute'></div>\n                <div class='tabLegendMaxLabel' style='position: absolute'></div>\n            </div>"})();(function(){fd.$0='tableau_qcolor_legend_';fd.$1=0.15})();(function(){dc.$0="<div class='tabCatLegendScrollButtonHolder'><span class='tabCatLegendScrollPrev'/><span class='tabCatLegendScrollNext'/></div>"})();(function(){gY.$0="<div class='tabCatLegendScrollButtonHolder'><span class='tabCatLegendScrollPrev'/><br><span class='tabCatLegendScrollNext'/></div>"})();(function(){dF.$2=0;dF.$1='tabIterButtonDisabled';dF.$0=100})();(function(){ey.$0="<div class='tab-page'></div>"})();(function(){spiff.ObjectRegistry.registerType(ez,ez).call(null)})();(function(){bl.$4=23;bl.$0='CategoricalQFComponent';bl.$1=16;bl.$2=10;bl.$3=10})();(function(){ff.$0="<div class='tab-quick-filter'></div>"})();(function(){bW.widgetClassName='tabDataHighlighterView';bW.searchResultsListClassName='tabDataHighlighterViewSearchResultList';bW.searchResultsListItemLabelClassName='tab-list-item-label';bW.$0='tabDataHighlighterViewInitialText';bW.queryDelayTimerMs=200;spiff.ObjectRegistry.registerType(bW,bW).call(null)})();(function(){eL.$0="<div class='tab-parameter'></div>"})();(function(){hk.$0="<div class='tab-web'></div>"})();(function(){dr.$0=Math.pow(2,-23)})();(function(){ds.$0="<div class='tab-image'></div>"})();(function(){hh.$0=0})();(function(){hi.hitTestDelay=250;hi.maxHitTestDistance=20})();(function(){da.$0=ss.mkdict(['no-hit',0,'area-hit',1,'near-hit',2,'exact-hit',3]);da.$1=ss.mkdict(['ref-lines',3,'trend-lines',2,'ref-bands',3,'marks',5,'mark-labels',6])})();(function(){bc.$0="<canvas class='tabCanvas'></canvas>"})();(function(){eF.$2=3;eF.$3=145;eF.$1=false})();(function(){cl.$0=2})();(function(){ew.$0="<img class='tab-overlayImage'/>"})();(function(){em.$0=5})();(function(){cS.$3=50;cS.$6=110.574;cS.$7=111.32;cS.$1=90;cS.$0=180;cS.$4=6000;cS.$2=8;cS.$5="<div class='tabGotoMyLocationButtonContainer'></div>"})();(function(){el.widgetClassName='tabMapsSearchView';el.$1='tabMapsSearchViewCollapsed';el.$2='tabMapsSearchContainerCollapsed';el.$0='tabMapsSearchViewInitialText';el.widgetClassNameTranslucent='tabMapsSearchViewTranslucent';el.suggestionDisplayClassName='tabMapsSearchViewSuggestionDisplayName';el.suggestionActiveSearchTextClassName='tabMapsSearchViewSuggestionActiveSearchText';el.suggestionParentClassName='tabMapsSearchViewSuggestionParentName';el.queryDelayTimerMs=200;el.suppressVizTooltipsAndOverlays='tabSuppressVizTooltipsAndOverlays';spiff.ObjectRegistry.registerType(el,el).call(null)})();(function(){ek.$0="<div class='tabMapAttribution'><div class='tabMapAttributionBackground' /><a class='tabMapAttributionLink'></a></div>"})();(function(){eH.suppressVizTooltipsAndOverlays='tabSuppressVizTooltipsAndOverlays';eH.scrollableXRegions=['xheader','bottomaxis','topaxis','viz'];eH.scrollableYRegions=['yheader','leftaxis','rightaxis','viz'];eH.headerRegions=['yheader','xheader','leftaxis','rightaxis','bottomaxis','topaxis','uleft','uright'];eH.$0=8;eH.$1=30;eH.$2=[];eH.$4=[];eH.$3=[]})();(function(){hu.$0="<div class='tab-zone'></div>"})();(function(){spiff.ObjectRegistry.registerType(eM,eM).call(null)})();(function(){dW.$1=3;dW.$0=17;spiff.ObjectRegistry.registerType(dW,dW).call(null)})();(function(){hv.$0='tabZoneReady';hv.zoneBecameValidTopic='ZoneBecameValid';hv.zonesThatUseStyledBox=['layout-flow','map','color','size','shape','filter','paramctrl'];hv.$1=['bitmap','color','shape','size','map','text','text-block','web','paramctrl','filter','highlighter','empty','current-page'];spiff.ObjectRegistry.registerType(hv,hv).call(null)})();(function(){bI.$0="<div class='tab-gutter'><div class='tab-dashboard'/></div>";bI.$1="<div class='tab-dashboard'/>"})();(function(){spiff.ObjectRegistry.registerType(bJ,bJ).call(null)})();(function(){bP.$0='range';spiff.ObjectRegistry.registerType(bP,bP).call(null)})();(function(){bL.$0="\n<div class='tabDataConnectionPrompt'>\n    <div class='tabDataConnPromptCtrlArea'>\n        <div class='tabDataConnPromptVarListArea'>\n            <div class='tabDataConnPromptVarListInstr'/>\n            <div class='tabDataConnPromptVarListHeader'>\n                <span class='tabDataConnPromptVarListHeaderName'/>\n                <span class='tabDataConnPromptVarListHeaderValue'/>\n            </div>\n            <div class='tabDataConnPromptVarListContainer'/>\n        </div>\n        <div class='tabDataConnPromptEditArea'>\n            <div class='tabDataConnPromptEditTitle'/>\n            <div class='tabDataConnPromptEditInstr'/>\n        </div>\n    </div>\n    <div class='tabDataConnPromptBtnArea'/>\n</div>"})();(function(){bR.$0="\n<span class='tabDataConnPromptVarListItem'>\n    <div class='tabDataConnPromptVarName tabDataConnPromptVarListItemCell'/>\n    <div class='tabDataConnPromptVarValue tabDataConnPromptVarListItemCell'/>\n    <div class='tabDataConnPromptDeleteVarBtnArea'/>\n</span>"})();(function(){bS.$0='required'})();(function(){gX.$0="\n<div class='tabDataConnPromptVarList'>\n    <div class='tabDataConnPromptAddVarCtrl'>\n        <div class='tabDataConnPromptAddVarCtrlBtnArea'/>\n        <div class='tabDataConnPromptAddVarCtrlVarSelector'/>\n    </div>\n</div>"})();(function(){spiff.ObjectRegistry.registerType(bT,bT).call(null)})();(function(){spiff.ObjectRegistry.registerType(bM,bM).call(null)})();(function(){gt.$1='tabToolbarButtonImg';gt.$2='tabToolbarButtonText';gt.$0="<div class='tabToolbarButton'><span class='tabToolbarButtonImg' /><span class='tabToolbarButtonText' /></div>"})();(function(){gu.$0='tabToolbarButtonFlyoverShown'})();(function(){gx.$0="\n            <div class='tab-toolbar tab-fill'>\n                <div class='tab-vizItems tab-fill-left' />\n                <div class='tab-publicItems'>\n                    <a class='tab-publicLogoLink' target='_blank' />\n                    <div class='tab-belowPublicLogo' />\n                </div>\n                <div class='tab-nonVizItems tab-fill-right' />\n            <div/>"})();(function(){gz.$1='hideLabels';gz.$2='horizontal';gz.$4='narrow';gz.$8='.tabToolbarButton';gz.$0='160px';gz.$a=300;gz.$5=355;gz.$7=170;gz.$6=100;gz.$b=70;gz.$3=60;gz.$9=250;spiff.ObjectRegistry.registerType(gz,gz).call(null)})();(function(){hp.$0="<div class='tab-workbook'><div class='dashboardSpacer'/></div>"})();(function(){hq.dashboardContainerSelector='.dashboardSpacer';spiff.ObjectRegistry.registerType(hq,hq).call(null)})();(function(){spiff.ObjectRegistry.registerType(O,O).call(null)})();(function(){cG.$0=100})();(function(){gp.$0=tab.Logger.getLogger(gp)})();(function(){cF.unknownItemIndex=-2;cF.allItemIndex=-1;cF.$1=tab.Strings.QuickFilterAll;cF.filterItem=null;cF.filterItem=(tsConfig.is_mobile?new cE:new cD)})();(function(){bq.getFilterItemHtml=ss.mkdel(cF.filterItem,cF.filterItem.formatChecklistFilterItemHtml)})();(function(){X.$1=3;X.$0=30})();(function(){bh.$0="<div class='tabLegendHighlighter'/>"})();(function(){fF.$0=false;fF.vmlColor='rgb(0, 176, 240)'})();(function(){bs.$6='tvdrag_svg_div';bs.$b='circle_radius';bs.$0='circle_crosshair';bs.$1=4;bs.$4='tabDistanceReadout';bs.$5="<div class='tabDistanceReadout'></div>";bs.$7="<line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line>";bs.$2="<line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line><line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line>";bs.$c="<line class='circle_radius'x1='0' y1='0' x2='0' y2='0'></line>";bs.$8="<v:rect class='circle_crosshair'><v:fill color='rgb(0, 176, 240)'/><v:stroke color='rgb(0, 176, 240)'/></v:rect>";bs.$3="<v:rect class='circle_crosshair'><v:fill color='rgb(0, 176, 240)'/><v:stroke color='rgb(0, 176, 240)'/></v:rect><v:rect class='circle_crosshair'><v:fill color='rgb(0, 176, 240)'/><v:stroke color='rgb(0, 176, 240)'/></v:rect>";bs.$d="<v:rect class='circle_radius'><v:fill color='rgb(0, 176, 240)'/><v:stroke color='rgb(0, 176, 240)'/></v:rect>";bs.$9="<div>\n                                                <svg class='selectionShape'>\n                                                    <circle class='tvdrag_svg_marquee'></circle><line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line><line class='circle_crosshair' x1='0' y1='0' x2='0' y2='0'></line><line class='circle_radius'x1='0' y1='0' x2='0' y2='0'></line></svg><div class='tabDistanceReadout'></div></div>";bs.$e='voval';bs.$a="<div>\n                                                    <div class='selectionShape'>\n                                                        <v:oval class='voval'><v:fill opacity='25%' color='rgb(0, 176, 240)'/><v:stroke color='rgb(0, 176, 240)'/></v:oval><v:rect class='circle_crosshair'><v:fill color='rgb(0, 176, 240)'/><v:stroke color='rgb(0, 176, 240)'/></v:rect><v:rect class='circle_crosshair'><v:fill color='rgb(0, 176, 240)'/><v:stroke color='rgb(0, 176, 240)'/></v:rect><v:rect class='circle_radius'><v:fill color='rgb(0, 176, 240)'/><v:stroke color='rgb(0, 176, 240)'/></v:rect></div><div class='tabDistanceReadout'></div></div>"})();(function(){spiff.ObjectRegistry.registerType(by,by).call(null)})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-confirmation',bx.$0)})();(function(){bD.$1=1000;bD.$0=200})();(function(){spiff.ObjectRegistry.registerType(bC,bC).call(null)})();(function(){bZ.$0="\n            <div class='tabDataHighlighterContainer'>\n                <div class='tab-zone-titleregion'/>\n                <div class='tabDataHighlighterView'>\n                    <div class='tabDataHighlighterView-searchControlsContainer'/>\n                </div>\n            </div>"})();(function(){dZ.$1=null;dZ.$2=null})();(function(){fR.tableauSliderTemplate="<div class='dijit dijitReset'><div class='dijitReset tableauSlider' dojoAttachPoint='tableauSlider'><table class='dijit dijitReset' cellspacing='0' cellpadding='0' border='0' rules='none'><tr class='dijitReset'><td class='dijitReset'></td><td dojoAttachPoint='containerNode,topDecoration' class='dijitReset' style='text-align:center;width:100%;'></td><td class='dijitReset'></td></tr><tr class='dijitReset'><td class='dijitReset'><div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper' dojoAttachEvent='onclick:_onClkDecBumper'></div></td><td class='dijitReset'><input dojoAttachPoint='valueNode' type='hidden' name='${name}'><div class='dijitReset dijitSliderBarContainerH' waiRole='presentation' dojoAttachPoint='sliderBarContainer'><div waiRole='presentation' dojoAttachPoint='progressBar' class='dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH' dojoAttachEvent='onclick:_onBarClick'><div class='dijitSliderMoveable dijitSliderMoveableH'><div dojoAttachPoint='sliderHandle,focusNode' class='dijitSliderImageHandle dijitSliderImageHandleH' dojoAttachEvent='onmousedown:_onHandleClick' waiRole='slider' valuemin='${minimum}' valuemax='${maximum}'></div></div></div><div waiRole='presentation' dojoAttachPoint='remainingBar' class='dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH' dojoAttachEvent='onclick:_onBarClick'></div></div></td><td class='dijitReset'><div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper' dojoAttachEvent='onclick:_onClkIncBumper'></div></td></tr><tr class='dijitReset'><td class='dijitReset'></td><td dojoAttachPoint='containerNode,bottomDecoration' class='dijitReset'></td><td class='dijitReset'></td></tr></table></div><div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowDec' style='display:none' dojoAttachPoint='decrementButton'><div class='dijitSliderDecrementIconH' tabIndex='-1'><span class='dijitSliderButtonInner'>-</span></div></div><div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowInc' style='display:none' dojoAttachPoint='incrementButton'><div class='dijitSliderIncrementIconH' tabIndex='-1'><span class='dijitSliderButtonInner'>+</span></div></div></div>";fR.$0="<div class='dijitTooltip dijitTooltipLeft' id='dojoTooltip'><div class='dijitTooltipContainer' dojoAttachpoint='coreArea'><div class='dijitTooltipContents' dojoAttachPoint='containerNode' waiRole='alert'></div></div><div class='dijitTooltipConnector'></div></div>"})();(function(){gP.lazilyCreateCalendar=true})();(function(){dO.$8=new tab.ColorModel(255,255,255,1);dO.$6=0.235294118523598;dO.$7=0.411764711141586;dO.$3=0.39215686917305;dO.$1=0.549019634723663;dO.$5=95;dO.$4=new tab.ColorModel(234,234,234,1);dO.$2=new tab.ColorModel(241,241,241,1)})();(function(){fu.pickerDurationsInteger=[1,7,30,90,365,1825];fu.pickerDurations=['0d','-7d','-30d','-90d','-365d','-1825d'];fu.pickerStrings=[tab.Strings.RelDatePickerOneDayAbbrev,tab.Strings.RelDatePickerOneWeekAbbrev,tab.Strings.RelDatePickerOneMonthAbbrev,tab.Strings.RelDatePickerThreeMonthsAbbrev,tab.Strings.RelDatePickerOneYearAbbrev,tab.Strings.RelDatePickerFiveYearsAbbrev];fu.$1='RDFButtonR';fu.$0='RDFButtonHide'})();(function(){eS.$0=false})();(function(){fC.noSearchPerformed=-1})();(function(){cA.$0=500;cA.minimumDomainSize=5})();(function(){ck.$1="<div class='CategoricalFilter'><div class='CategoricalFilterBox' dojoAttachPoint='domBox'><div class='TitleAndControls' dojoAttachPoint='domControls'><div class='FilterTitle' dojoAttachPoint='domTitleBar'></div><div dojoType='dijit.form.Button' class='CFButton CFResetButton' showlabel='false'dojoAttachPoint='resetButton' dojoAttachEvent='onClick:toggleReset'iconClass='wcIconNonfiltered'>Showing all values</div><div dojoType='dijit.form.Button' class='CFButton CFSearchButton' showlabel='false'dojoAttachPoint='searchButton' dojoAttachEvent='onClick:toggleSearchUI'iconClass='wcIconSearch'>Search</div><div dojoType='dijit.form.Button' class='CFButton CFDomainButton' showlabel='false'dojoAttachPoint='domainButton' dojoAttachEvent='onClick:toggleDomain'iconClass='wcIconDomainAll'>Show Fewer Values</div><div dojoType='dijit.form.Button' dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'class='CFButton CFMenuButton' dojoAttachPoint='menuButton' name='type'></div></div><div dojoAttachPoint='searchDiv'></div><div class='CFContent' dojoAttachPoint='domContent'></div><div class='CFHorizScroll' dojoAttachPoint='domHorizScroll' dojoAttachEvent='onscroll:doscrollHoriz'><div dojoAttachPoint='domHorizScrollContent'></div></div><div dojoType='tableau.base.widget.ConditionalsWidget' dojoAttachPoint='conditionals'></div></div></div>";ck.$2="<div class='ParameterControl'><div class='ParameterControlBox' dojoAttachPoint='domBox'><div class='TitleAndControls' dojoAttachPoint='domControls'><div class='ParamTitle' dojoAttachPoint='domTitleBar'></div></div><div class='PCContent' dojoAttachPoint='domContent'></div></div></div>";ck.$3="<div class='Search'><div class='SearchBox' dojoAttachPoint='domQuerySection'><textarea rows='1' class='QueryBox' spellcheck='false'dojoAttachPoint='domQueryBox'dojoAttachEvent='onkeydown:onQueryBoxKeyDown,onpaste:onQueryBoxPaste'></textarea><span class='wcSearchX' title='${XBUTTON_CLOSE_TOOLTIP}'dojoAttachPoint='domXButton'dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span><img class='searchBusyImg' title='${CANCEL_SEARCH_TOOLTIP}' src='${busy_gif_url}'dojoAttachPoint='domSearchBusyImg'dojoAttachEvent='onclick:onSearchBusyImgClick'></img><span class='wcIconSearch' title='${SEARCH_TOOLTIP}'dojoAttachPoint='domSearchButton'dojoAttachEvent='onclick:onSearchButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span><span class='wcIconSearchAdd' title='${ADD_ITEM_CTRL_ENTER}'dojoAttachPoint='domSearchAddButton'dojoAttachEvent='onclick:onSearchAddButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span></div><div class='SearchResults' dojoAttachPoint='domResults' dojoAttachEvent='onclick:onListItemClick'></div></div>";dojo.addOnLoad(ck.$0)})();(function(){cI.$0="<div class='FloatingZoomToolbar'></div>"})();(function(){fO.fontFaces=['Arial','Bauhaus 93','Benton Sans','Calibri','Cooper Black','Impact','Tahoma','Times New Roman','Trebuchet MS','Tw Cen MT Condensed Extra Bold','Wingdings']})();(function(){cV.simpleRectangleCollider=null;cV.simpleRectangleCollider=function(e,L){var hy=e.get_geom().x;var hz=e.get_geom().x+e.get_geom().w;var hA=e.get_geom().y;var hB=e.get_geom().y+e.get_geom().h;var hC=L.x;var hD=L.x+L.w;var hE=L.y;var hF=L.y+L.h;if(hB<hE){return false}if(hA>hF){return false}if(hz<hC){return false}if(hy>hD){return false}return true}})();(function(){cY.$1=null;cY.$0=0})();(function(){hx.$0=0.05})();(function(){dK.$4=100;dK.$5=2;dK.$9=10;dK.$a=0.01;dK.$7=8;dK.$3='leaflet-touching';dK.$6={item1:90,item2:0};dK.$8={item1:-90,item2:0}})();(function(){ei.$0=null;spiff.ObjectRegistry.registerType(ei,ei).call(null)})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-notification',es.$0)})();(function(){ex.$0='<div class="tab-overlay-panel"></div>'})();(function(){eG.$0="<div class='tvViewportBorder tvLeftBorder' /><div class='tvViewportBorder tvRightBorder' /><div class='tvViewportBorder tvTopBorder' /><div class='tvViewportBorder tvBottomBorder' />"})();(function(){eW.$6='M';eW.$5='L';eW.$1='Z';eW.$2='tvdrag_svg_div';eW.$8='vpolyline';eW.$3="<div><svg class='selectionShape'><path class='tvdrag_svg_marquee'></path></svg></div>";eW.$4="<div><div class='selectionShape'><v:polyline class='vpolyline'></v:polyline></div>";eW.$7=300})();(function(){fm.$1='<div></div>';fm.$0='tvdrag';fm.$2='tvdrag_marquee'})();(function(){fp.$2$1=null})();(function(){fo.$0=988})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-quick-edit',fq.$0)})();(function(){fU.$0='.SmoothTooltipBehavior'})();(function(){fY.valueProperty='Value';fY.enabledProperty='IsEnabled';fY.incrementEnabledProperty='IsIncrementEnabled';fY.decrementEnabledProperty='IsDecrementEnabled'})();(function(){fX.incrementButtonClassName='tabDecrementButton';fX.decrementButtonClassName='tabIncrementButton';spiff.ObjectRegistry.registerType(fX,fX).call(null)})();(function(){spiff.ObjectRegistry.registerType(gd,gd).call(null)})();(function(){gh.$2="<div class='tab-tabView'><ul class='tab-tabLabels'></ul><div class='tab-tabContent'></div></div>";gh.$8="<li class='tab-tabLabel'></li>";gh.$3="<div class='tab-tabViewLoading'>&nbsp;</div>";gh.$1="<div class='tab-tabViewError'></div>";gh.$9='.tab-tabLabels';gh.$7='.tab-tabLabel';gh.$5='.tab-tabContent';gh.$0='tabContentUrl';gh.$6='tabIndex';gh.$4='selected'})();(function(){gl.$0="<div class='tvimagesContainer'></div>"})();(function(){hd.visualPartNearHitTestExpansionPixels=7})();(function(){go.windowLog=null;go.paneBorderMaskSize=2;go.canvasBorderPixels=1;go.zoomAnimationTime=777;go.minZoomAnimationTime=500;go.zoomToAnchorAnimationTime=500})();(function(){gs.$0="<label class='tabToggleSwitchLabel'>\n            <input type='checkbox' />\n            <span class='tabSwitch'>\n                <span class='tabSwitchOn'>{0}</span>\n                <span class='tabSwitchOff'>{1}</span>\n                <span class='tabSwitchBlock'></span>\n            </span>\n        </label>"})();(function(){gH.$2=0})();(function(){hj.$3={};hj.$4=$(document.body);hj.$2=0;hj.$1=0})()})();;
/*! BEGIN StoryModule */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlstory');var b=function(){this.points=null;spiff.Template.call(this,$("<span class='tabFlipboardNavPoints'/>"));this.points=this.get_domRoot()};b.__typeName='tab.FlipboardNavigatorPointsTemplate';global.tab.FlipboardNavigatorPointsTemplate=b;var c=function(){this.previous=null;this.scroller=null;this.next=null;spiff.Template.call(this,$("<div class='tabFlipboardNav'><span class='tabFlipboardNavPrevious'><div class='tabStoryLeftArrow'/></span><span class='tabFlipboardNavScroller'/><span class='tabFlipboardNavNext'><div class='tabStoryRightArrow'/></span></div>"));this.previous=this.getElementBySelector('.tabFlipboardNavPrevious');this.scroller=this.getElementBySelector('.tabFlipboardNavScroller');this.next=this.getElementBySelector('.tabFlipboardNavNext')};c.__typeName='tab.FlipboardNavigatorTemplate';global.tab.FlipboardNavigatorTemplate=c;var d=function(n){this.$i=null;this.$k=null;this.$j=null;ss.makeGenericType(spiff.BaseView$1,[e]).call(this,n,new c);this.$h();if(this.get_flipboardNavViewModel().get_showArrows()){this.$c()}else{this.get_dom().previous.hide();this.get_dom().next.hide()}this.get_flipboardNavViewModel().add_resizeZone(ss.mkdel(this,this.handleResize));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_flipboardNavViewModel().remove_resizeZone(ss.mkdel(this,this.handleResize))})));this.get_flipboardNavViewModel().add_updateActivePoint(ss.mkdel(this,this.handleUpdateActivePoint));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_flipboardNavViewModel().remove_updateActivePoint(ss.mkdel(this,this.handleUpdateActivePoint))})));this.get_domRoot().bind(this.createNamespacedEventName('mousedown'),function(o){o.stopPropagation()});this.$b();this.disposables.add$1(new tab.CallOnDispose(function(){tab.StyleUtil.clearStyleSheet('appendedStoryStyle')}))};d.__typeName='tab.FlipboardNavigatorView';global.tab.FlipboardNavigatorView=d;var e=function(n){this.$8=null;this.$6=[];this.$7=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this);this.$8=n;this.$8.add_newFlipboardNav(ss.mkdel(this,this.handleNewFlipboardNav));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$8.remove_newFlipboardNav(ss.mkdel(this,this.handleNewFlipboardNav))})));this.$8.get_zone().add_resizeZone(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$8.get_zone().remove_resizeZone(ss.mkdel(this,this.$3))})));this.$2()};e.__typeName='tab.FlipboardNavigatorViewModel';global.tab.FlipboardNavigatorViewModel=e;var f=function(){spiff.Template.call(this,$("<div class='tabFlipboard'></div>"))};f.__typeName='tab.FlipboardTemplate';global.tab.FlipboardTemplate=f;var g=function(n){this.$a=null;ss.makeGenericType(spiff.BaseView$1,[h]).call(this,n,new f);this.$a=n;this.$a.add_newStoryPoint(ss.mkdel(this,this.handleNewStoryPoint));this.$a.get_parentZone().add_resizeZone(ss.mkdel(this,this.handleResizeZone));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$a.remove_newStoryPoint(ss.mkdel(this,this.handleNewStoryPoint));this.$a.get_parentZone().remove_resizeZone(ss.mkdel(this,this.handleResizeZone))})))};g.__typeName='tab.FlipboardView';global.tab.FlipboardView=g;var h=function(n,o){this.$7=null;this.$8=null;this.$6=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$7=n;this.$8=o;this.$7.add_invalidateZone(ss.mkdel(this,this.$4));this.$7.get_storyPointModel().add_newStoryPoint(ss.mkdel(this,this.$3));this.$7.get_storyPointModel().add_dashboardDisposal(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$7.remove_invalidateZone(ss.mkdel(this,this.$4));this.$7.get_storyPointModel().remove_newStoryPoint(ss.mkdel(this,this.$3));this.$7.get_storyPointModel().remove_dashboardDisposal(ss.mkdel(this,this.$2))})));if(ss.isValue(this.get_flipboardModel().get_dashboardModel())){this.$3()}};h.__typeName='tab.FlipboardViewModel';global.tab.FlipboardViewModel=h;var i=function(){};i.__typeName='tab.StoryFactory';global.tab.StoryFactory=i;var j=function(){spiff.Template.call(this,$("<div class='tabStoryPointContent'/>"))};j.__typeName='tab.StoryPointCaptionContentTemplate';global.tab.StoryPointCaptionContentTemplate=j;var k=function(){this.caption=null;this.revert=null;this.captionTop=null;this.captionBottom=null;this.toolbar=null;spiff.Template.call(this,$("<span class='tabStoryPoint'>\n<div class='tabStoryPointToolbar'><div class='tabStoryRevert'></div></div>\n<div class='tabStoryPointCaption'><div class='tabStoryPointCaptionTop'/><div class='tabStoryPointCaptionBottom'/></div></span>"));this.caption=this.getElementBySelector('.tabStoryPointCaption');this.revert=this.getElementBySelector('.tabStoryRevert');this.toolbar=this.getElementBySelector('.tabStoryPointToolbar');this.captionTop=this.getElementBySelector('.tabStoryPointCaptionTop');this.captionBottom=this.getElementBySelector('.tabStoryPointCaptionBottom')};k.__typeName='tab.StoryPointCaptionTemplate';global.tab.StoryPointCaptionTemplate=k;var l=function(n){this.$g=null;this.$i=null;this.$h=null;ss.makeGenericType(spiff.BaseView$1,[m]).call(this,n,new k);this.get_storyPointCaptionViewModel().add_updatePoint(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_storyPointCaptionViewModel().remove_updatePoint(ss.mkdel(this,this.$e))})));this.$c();this.$b();this.$a()};l.__typeName='tab.StoryPointCaptionView';global.tab.StoryPointCaptionView=l;var m=function(n,o){this.$3=null;this.$4=0;this.$2$1=null;spiff.BaseViewModel.call(this);this.$3=n;this.$4=o;this.$3.add_newFlipboardNav(ss.mkdel(this,this.handleNewFlipboardNav));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_newFlipboardNav(ss.mkdel(this,this.handleNewFlipboardNav))})))};m.__typeName='tab.StoryPointCaptionViewModel';global.tab.StoryPointCaptionViewModel=m;ss.initClass(b,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(c,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(d,a,{get_domRoot:function(){return this.get_template().get_domRoot()},get_flipboardNavViewModel:function(){return this.get_viewModel()},get_storyPointCaptionViewModel:function(){return ss.getItem(this.get_flipboardNavViewModel().get_captions(),0)},get_dom:function(){return ss.cast(this.get_template(),c)},$b:function(){this.$i=new b;this.$k=new spiff.ScrollableViewModel.$ctor1(false);this.$k.set_content(this.$i.get_domRoot()[0]);this.$k.set_scrollX(true);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.StyleUtil.clearStyleSheet('flipboardNavScroller');this.$k.dispose()})))},$h:function(){if(this.get_flipboardNavViewModel().get_useDarkIcons()){this.get_domRoot().addClass('tabDarkIcons')}else{this.get_domRoot().addClass('tabLightIcons')}var n=this.get_flipboardNavViewModel().get_scrollBarStyle();if(ss.isValue(n)){tab.StyleUtil.appendCSSRuleToStyleSheet('flipboardNavScroller','.tabFlipboardNavScroller .iScrollHorizontalScrollbar',{'background-color':n.bE$});tab.StyleUtil.appendCSSRuleToStyleSheet('flipboardNavScroller','.tabFlipboardNavScroller .iScrollHorizontalScrollbar:hover',ss.mkdict(['background-color',n.Jvl]));tab.StyleUtil.appendCSSRuleToStyleSheet('flipboardNavScroller','.tabFlipboardNavScroller .iScrollHorizontalScrollbar>.iScrollIndicator',{'background-color':n.DFg});tab.StyleUtil.appendCSSRuleToStyleSheet('flipboardNavScroller','.tabFlipboardNavScroller .iScrollHorizontalScrollbar>.iScrollIndicator:hover',{'background-color':n.YhU})}},$c:function(){var n=new spiff.Button(this.get_dom().previous);var o=ss.mkdel(this,function(){this.get_flipboardNavViewModel().clickPrevious()});n.add_click(o);this.disposables.add$1(n);this.disposables.add$1(new tab.CallOnDispose(function(){n.remove_click(o)}));var p=new spiff.Button(this.get_dom().next);var q=ss.mkdel(this,function(){this.get_flipboardNavViewModel().clickNext()});p.add_click(q);this.disposables.add$1(p);this.disposables.add$1(new tab.CallOnDispose(function(){p.remove_click(q)}))},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$j=spiff.ScrollableView.createScrollableView(this.$k);this.$j.addToDom(this.get_dom().scroller);var n;var o=this.get_flipboardNavViewModel().get_storyPointHeight();n=o+20;var p=ss.Int32.div(o-26,2);var q=ss.Int32.div(o-26,2);this.get_dom().previous.css(ss.mkdict(['padding-top',p+'px','padding-bottom',p+'px']));this.get_dom().next.css(ss.mkdict(['padding-top',q+'px','padding-bottom',q+'px']));this.$f();if(ss.isValue(n)){this.get_dom().scroller.css('height',n+this.$j.get_scrollbarBuffer()+'px')}this.$9();this.centerNav();this.handleUpdateActivePoint(this.get_flipboardNavViewModel().get_currentPointIndex())},$f:function(){if(ss.isNullOrUndefined(this.get_storyPointCaptionViewModel())){return}var n={};var o={};var p={};var q={};var r={};if(ss.isValue(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle())){n=this.$d(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle());p=this.$g(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle());r=this.$e(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle())}if(ss.isValue(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle())){o=this.$d(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle());q=this.$g(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle());if(Object.keys(r).length<=0){r=this.$e(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle())}}tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabFlipboardNavScroller .tabScroller .tabScrollerContent .tabFlipboardNavPoints .tabStoryPoint',r);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption.tabCurrent',n);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption',o);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent',p);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent',q);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabStoryPointCaptionTop,.tabStoryPointCaption.tabCurrent .tabStoryPointCaptionBottom',n);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption.tabStoryPointCaptionTop,.tabStoryPointCaption .tabStoryPointCaptionBottom',o);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabScroller .tabScrollerContent .tabStoryPointContent',p);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption .tabScroller .tabScrollerContent .tabStoryPointContent',q);tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabVerticalScrollbar',{'background-color':this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle().xIS.bE$});tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption .tabCustomScroller .tabVerticalScrollbar',{'background-color':this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle().xIS.bE$});tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator',{'background-color':this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle().xIS.DFg});tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator',{'background-color':this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle().xIS.DFg});tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator:hover',{'background-color':this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle().xIS.YhU});tab.StyleUtil.appendCSSRuleToStyleSheet('appendedStoryStyle','.tabStoryPointCaption .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator:hover',{'background-color':this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle().xIS.YhU})},$d:function(n){var o=false;if(ss.isValue(n.rPC)){return tab.FormattingConverters.makeStyledBoxCssDict(n.rPC,o)}else{return{}}},$g:function(n){if(ss.isValue(n.mCc)){return tab.FormattingConverters.makeFormatStyleDict(n.mCc,null)}else{return{}}},$e:function(n){var o=150;var p=70;var q={};var r=p,s=o;if(ss.isValue(n.EUR)){r=n.EUR}q.height=r+20+'px';if(ss.isValue(n.rec)){s=n.rec}q.width=s+'px';return q},centerNav:function(){var n=this.$i.points[0].clientWidth+this.$a();var o=this.get_dom().get_domRoot().parent().width();var p=0;if(o>n){p=ss.Int32.div(o-n,2)}this.get_dom().get_domRoot().css('margin-left',p+'px');var q=this.get_domRoot().height();var r=ss.Int32.div(q,2);this.get_dom().get_domRoot().css('margin-top','-'+r+'px')},handleResize:function(){var n=this.get_dom().get_domRoot().parent().width()-this.$a();var o=this.$i.points[0].clientWidth;this.get_dom().scroller.css(ss.mkdict(['width',Math.min(n,o)+'px']));this.centerNav();this.$k.triggerRefresh()},$a:function(){return(this.get_flipboardNavViewModel().get_showArrows()?(this.get_dom().previous.outerWidth(true)+this.get_dom().next.outerWidth(true)):0)},handleUpdateActivePoint:function(n){var o=this.$i.points.children().get(n);var p=o.offsetLeft;var q=p+o.offsetWidth;var r=this.$j.get_scrollerX();var s=r+this.get_dom().scroller.width();var t=50;if(q>s){var u=this.get_dom().scroller.width()-o.offsetWidth-t;this.$j.scrollToElement(o,0,-u,0)}else if(p<r){this.$j.scrollToElement(o,0,-50,0)}this.get_dom().previous.toggleClass('tabDisabled',this.get_flipboardNavViewModel().get_previousDisabled());this.get_dom().next.toggleClass('tabDisabled',this.get_flipboardNavViewModel().get_nextDisabled())},$9:function(){var n=ss.getEnumerator(this.get_flipboardNavViewModel().get_captions());try{while(n.moveNext()){var o=n.current();var p=spiff.ObjectRegistry.newView(l).call(null,[o]);p.addToDom(this.$i.points)}}finally{n.dispose()}this.handleResize()}},ss.makeGenericType(spiff.BaseView$1,[e]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[e])]);ss.initClass(e,a,{add_resizeZone:function(n){this.$2$1=ss.delegateCombine(this.$2$1,n)},remove_resizeZone:function(n){this.$2$1=ss.delegateRemove(this.$2$1,n)},add_updateActivePoint:function(n){this.$2$2=ss.delegateCombine(this.$2$2,n)},remove_updateActivePoint:function(n){this.$2$2=ss.delegateRemove(this.$2$2,n)},add_remoteUpdateComplete:function(n){this.$2$3=ss.delegateCombine(this.$2$3,n)},remove_remoteUpdateComplete:function(n){this.$2$3=ss.delegateRemove(this.$2$3,n)},get_currentPointIndex:function(){return this.$8.get_currentPointIndex()},get_numberOfPoints:function(){return this.$8.get_storyPoints().length},get_storyPointHeight:function(){return this.$8.get_flipboardNavPresModel().czn.EUR},get_storyPointWidth:function(){return this.$8.get_flipboardNavPresModel().czn.rec},get_previousDisabled:function(){return this.get_currentPointIndex()<=0},get_nextDisabled:function(){return this.get_currentPointIndex()>=this.get_numberOfPoints()-1},get_showArrows:function(){return this.$8.get_flipboardNavPresModel().ELI},get_captions:function(){return this.$6},get_useDarkIcons:function(){return this.$8.get_flipboardNavPresModel().RWo.byq},get_scrollBarStyle:function(){return this.$8.get_flipboardNavPresModel().RWo.xIS},handleNewFlipboardNav:function(){if(ss.isValue(this.$2$2)){this.$2$2(this.get_currentPointIndex())}if(!this.$7){var n=tab.CommandController.get();var o=null;o=ss.mkdel(this,function(){n.remove_commandQueueComplete(o);this.$7=false;this.raiseActionEvent(this.$2$3)});n.add_commandQueueComplete(o);this.$7=true}},$3:function(){this.raiseActionEvent(this.$2$1)},$4:function(){for(var n=0;n<this.$6.length;n++){var o=this.$6[n];o.dispose()}ss.clear(this.$6)},$2:function(){for(var n=0;n<this.get_numberOfPoints();n++){this.$6.push(new m(this.$8,n))}},clickNext:function(){var n=$.Deferred();if(this.get_nextDisabled()){n.resolve(this.get_currentPointIndex())}else{this.$5(n,ss.mkdel(this,function(){return tab.StoryClientCommands.nextStoryPoint(this.$8)}))}return n.promise()},clickPrevious:function(){var n=$.Deferred();if(this.get_previousDisabled()){n.resolve(this.get_currentPointIndex())}else{this.$5(n,ss.mkdel(this,function(){return tab.StoryClientCommands.previousStoryPoint(this.$8)}))}return n.promise()},dispose:function(){this.$4();spiff.BaseViewModel.prototype.dispose.call(this)},$5:function(n,o){var p=ss.mkdel(this,function(){n.resolve(this.get_currentPointIndex())});var q=function(){n.reject(ss.unbox(ss.cast(arguments[0],ss.Int32)))};o().then(p,q)}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel,tab.IFlipboardNavigatorViewModel]);ss.initClass(f,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(g,a,{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(ss.isValue(this.$a.get_dashboardViewModel())){this.handleNewStoryPoint()}},handleNewStoryPoint:function(){var n={w:this.get_element().width(),h:this.get_element().height()};this.$a.get_dashboardViewModel().set_size(this.$9(tab.RecordCast.sizeAsSizePresModel(n),this.$a.get_dashboardViewModel().get_size()));var o=spiff.ObjectRegistry.newView(tab.DashboardView).call(null,[this.$a.get_dashboardViewModel()]);o.addToDom(this.get_template().get_domRoot())},handleResizeZone:function(){var n={w:this.$a.get_parentZone().get_width(),h:this.$a.get_parentZone().get_height()};this.$a.get_dashboardViewModel().set_size(this.$9(tab.RecordCast.sizeAsSizePresModel(n),this.$a.get_dashboardViewModel().get_dashboardModel().get_dashboardSize()))},$9:function(n,o){var p=tab.SizeUtil.unionPresModels(n,o);if(o.EUR>=n.EUR&&n.rec-o.rec>24){p.rec-=24}if(o.rec>=n.rec&&n.EUR-o.EUR>24){p.EUR-=24}return p}},ss.makeGenericType(spiff.BaseView$1,[h]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[h])]);ss.initClass(h,a,{add_newStoryPoint:function(n){this.$2$1=ss.delegateCombine(this.$2$1,n)},remove_newStoryPoint:function(n){this.$2$1=ss.delegateRemove(this.$2$1,n)},get_flipboardModel:function(){return this.$7},get_dashboardViewModel:function(){return this.$6},$5:function(){return this.get_flipboardModel().get_dashboardModel().pm},get_parentZone:function(){return this.$8},$3:function(){this.$2();if(ss.isValue(this.$5())){this.$6=tab.DashboardViewModel.new$1(this.get_flipboardModel().get_dashboardModel());this.raiseActionEvent(this.$2$1)}},$4:function(){this.$8.forceZoneValidState(false)},dispose:function(){this.$2();spiff.BaseViewModel.prototype.dispose.call(this)},$2:function(){if(ss.isValue(this.get_dashboardViewModel())){this.$6.dispose();this.$6=null}}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel,tab.IFlipboardViewModel]);ss.initClass(i,a,{newFlipboardNavigatorViewModel:function(n){return new e(n)},newFlipboardViewModel:function(n,o){return new h(n,o)},newFlipboardNavigatorView:function(n){return spiff.ObjectRegistry.newView(d).call(null,[n])},newFlipboardView:function(n){return spiff.ObjectRegistry.newView(g).call(null,[n])}},null,[tab.IStoryModule]);ss.initClass(j,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(k,a,{},spiff.Template,[ss.IDisposable]);ss.initClass(l,a,{get_domRoot:function(){return this.get_template().get_domRoot()},get_contentTemplate:function(){return this.$g},get_storyPointCaptionViewModel:function(){return this.get_viewModel()},$f:function(){return ss.cast(this.get_template(),k)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(this.$i.get_hasCustomIndicator()){this.get_domRoot().addClass('tabFormatted');this.$f().captionBottom.remove();this.$f().captionTop.remove()}var n=spiff.ScrollableView.createScrollableView(this.$i);n.addToDom(this.$f().caption);var o=ss.mkdict(['right',n.get_scrollbarBuffer()+'px']);this.$f().captionTop.css(o);this.$f().captionBottom.css(o);this.$e()},$c:function(){if(this.get_storyPointCaptionViewModel().get_isFirstPoint()){this.get_domRoot().addClass('tabFirstPoint')}if(this.get_storyPointCaptionViewModel().get_isLastPoint()){this.get_domRoot().addClass('tabLastPoint')}},$e:function(){this.$f().revert.toggle(!this.get_storyPointCaptionViewModel().get_isCaptured());this.$f().caption.toggleClass('tabCurrent',this.get_storyPointCaptionViewModel().get_isCurrentPoint());this.$i.triggerRefresh()},$a:function(){this.$9();this.$d()},$d:function(){this.$f().revert.attr('title',tab.Strings.StoryPointRevertTooltip);this.$h=new spiff.IconButton;this.$h.setIcon('tabStoryRevertIcon');this.$f().revert.append(this.$h.get_element());this.disposables.add$1(this.$h.onClick(ss.mkdel(this,function(n){this.get_storyPointCaptionViewModel().revertStoryPoint()})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$h.dispose()})))},$9:function(){this.disposables.add$1((new spiff.ClickHandler).setTarget(this.$f().caption).onPress(ss.mkdel(this,function(){this.$f().caption.addClass('tabActive')})).onClick(ss.mkdel(this,function(n){n.stopPropagation();this.$f().caption.removeClass('tabActive');this.get_storyPointCaptionViewModel().clickStoryPoint()})));this.$f().caption.bind('touchend touchcancel mouseleave',ss.mkdel(this,function(){this.$f().caption.removeClass('tabActive')}))},$b:function(){this.$g=new j;this.$g.get_domRoot().text(this.get_storyPointCaptionViewModel().get_caption());this.$i=new spiff.ScrollableViewModel;this.$i.set_content(this.$g.get_domRoot()[0]);this.$i.set_scrollY(true);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$i.dispose()})))}},ss.makeGenericType(spiff.BaseView$1,[m]),[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[m])]);ss.initClass(m,a,{add_updatePoint:function(n){this.$2$1=ss.delegateCombine(this.$2$1,n)},remove_updatePoint:function(n){this.$2$1=ss.delegateRemove(this.$2$1,n)},$2:function(){return this.$3.get_storyPoints()[this.$4]},get_isCurrentPoint:function(){return this.$4===this.$3.get_currentPointIndex()},get_isCaptured:function(){return this.$2().mwo},get_caption:function(){return this.$2().XWQ},get_storyPointId:function(){return this.$2().hVl},get_storyPointIndex:function(){return this.$4},get_isFirstPoint:function(){return this.get_storyPointIndex()===0},get_isLastPoint:function(){return this.$4===this.$3.get_storyPoints().length-1},get_storyPointStyle:function(){if(this.get_isCurrentPoint()){return this.get_selectedStoryPointStyle()}else{return this.get_unselectedStoryPointStyle()}},get_selectedStoryPointStyle:function(){return this.$3.get_flipboardNavPresModel().czn},get_unselectedStoryPointStyle:function(){return this.$3.get_flipboardNavPresModel().TaK},handleNewFlipboardNav:function(){this.raiseActionEvent(this.$2$1)},clickStoryPoint:function(){var n=$.Deferred();if(this.get_isCurrentPoint()){n.resolve(this)}else{var o=ss.mkdel(this,function(){n.resolve(this)});var p=function(){n.reject(ss.cast(arguments[0],tab.IStoryPointCaptionViewModel))};var q=tab.StoryClientCommands.setActiveStoryPoint(this.$4,this.$3);q.then(o,p)}return n.promise()},revertStoryPoint:function(){var n=$.Deferred();if(this.get_isCaptured()){n.resolve(this)}else{var o=ss.mkdel(this,function(){n.resolve(this)});var p=function(){n.reject(ss.cast(arguments[0],tab.IStoryPointCaptionViewModel))};var q=tab.StoryClientCommands.revertStoryPoint(tab.ModelUtils.findContentDashboard().get_sheetPath(),this.$2().hVl);q.then(o,p)}return n.promise()}},spiff.BaseViewModel,[ss.IDisposable,spiff.IViewModel,tab.IStoryPointCaptionViewModel]);(function(){b.$0="<span class='tabFlipboardNavPoints'/>"})();(function(){c.$0="<div class='tabFlipboardNav'><span class='tabFlipboardNavPrevious'><div class='tabStoryLeftArrow'/></span><span class='tabFlipboardNavScroller'/><span class='tabFlipboardNavNext'><div class='tabStoryRightArrow'/></span></div>"})();(function(){k.$0="<span class='tabStoryPoint'>\n<div class='tabStoryPointToolbar'><div class='tabStoryRevert'></div></div>\n<div class='tabStoryPointCaption'><div class='tabStoryPointCaptionTop'/><div class='tabStoryPointCaptionBottom'/></div></span>"})();(function(){j.$0="<div class='tabStoryPointContent'/>"})();(function(){spiff.ObjectRegistry.registerType(l,l).call(null)})();(function(){d.storyPointToolbarHeight=20;d.horizontalScrollerSelector='.tabFlipboardNavScroller .iScrollHorizontalScrollbar';d.horizontalScrollerHoverSelector='.tabFlipboardNavScroller .iScrollHorizontalScrollbar:hover';d.horizontalScrollerIndicatorSelector='.tabFlipboardNavScroller .iScrollHorizontalScrollbar>.iScrollIndicator';d.horizontalScrollerIndicatorHoverSelector='.tabFlipboardNavScroller .iScrollHorizontalScrollbar>.iScrollIndicator:hover';d.storyPointSelector='.tabFlipboardNavScroller .tabScroller .tabScrollerContent .tabFlipboardNavPoints .tabStoryPoint';d.selectedStoryPointBoxSelector='.tabStoryPointCaption.tabCurrent';d.unselectedStoryPointBoxSelector='.tabStoryPointCaption';d.selectedStoryPointTextSelector='.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent';d.unselectedStoryPointTextSelector='.tabStoryPointCaption .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent';d.selectedStoryPointScrollbarSelector='.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabVerticalScrollbar';d.unselectedStoryPointScrollbarSelector='.tabStoryPointCaption .tabCustomScroller .tabVerticalScrollbar';d.selectedStoryPointScrollbarIndicatorSelector='.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator';d.unselectedStoryPointScrollbarIndicatorSelector='.tabStoryPointCaption .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator';d.selectedStoryPointScrollbarIndicatorHoverSelector='.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator:hover';d.unselectedStoryPointScrollbarIndicatorHoverSelector='.tabStoryPointCaption .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator:hover';d.selectedStoryPointNativeScrollerTopBottomSelector='.tabStoryPointCaption.tabCurrent .tabStoryPointCaptionTop,.tabStoryPointCaption.tabCurrent .tabStoryPointCaptionBottom';d.unselectedStoryPointNativeScrollerTopBottomSelector='.tabStoryPointCaption.tabStoryPointCaptionTop,.tabStoryPointCaption .tabStoryPointCaptionBottom';d.selectedStoryPointNativeScrollerTextSelector='.tabStoryPointCaption.tabCurrent .tabScroller .tabScrollerContent .tabStoryPointContent';d.unselectedStoryPointNativeScrollerTextSelector='.tabStoryPointCaption .tabScroller .tabScrollerContent .tabStoryPointContent';d.$1=26;d.$0=26;d.storyStyleSheetId='appendedStoryStyle';spiff.ObjectRegistry.registerType(d,d).call(null)})();(function(){f.$0="<div class='tabFlipboard'></div>"})();(function(){g.scrollBarThickness=24;spiff.ObjectRegistry.registerType(g,g).call(null)})()})();;
/*! BEGIN SpiffUIWeb */
(function(){'dont use strict';var a={};global.spiff=global.spiff||{};ss.initAssembly(a,'spiffuiweb');var b=function(g){spiff.ComboBoxView.call(this,g,new spiff.ComboBoxTemplate)};b.__typeName='spiff.ComboBoxViewWeb';global.spiff.ComboBoxViewWeb=b;var c=function(){this.$n=null;this.$3$1=null;this.$3$2=null;spiff.CompositeSearchWidget.call(this,new spiff.CompositeSearchWidgetTemplate);this.compositeSearchWidgetTemplate.get_textInputView().get_inputElement().keydown(ss.mkdel(this,this.$m))};c.__typeName='spiff.CompositeSearchWidgetWeb';global.spiff.CompositeSearchWidgetWeb=c;var d=function(g){this.$r=0;this.$s=0;this.$p=0;this.$q=0;spiff.MenuView.call(this,g,new e);this.updateMenu();this.menuViewModel.add_menuItemFocusChanged(ss.mkdel(this,this.$j));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.menuViewModel.remove_menuItemFocusChanged(ss.mkdel(this,this.$j))})));this.menuDisposables.add$1(spiff.EventUtil.bindWithDispose(this.get_element(),'keydown',ss.mkdel(this,this.$n)))};d.__typeName='spiff.MenuViewWeb';global.spiff.MenuViewWeb=d;var e=function(){spiff.MenuTemplate.call(this,"<div class='tabMenu' tabindex='1'><div class='tabMenuContent'/></div>")};e.__typeName='spiff.MenuViewWebTemplate';global.spiff.MenuViewWebTemplate=e;var f=function(g){spiff.UberPopupView.call(this,g,new spiff.UberPopupTemplate)};f.__typeName='spiff.UberPopupViewWeb';global.spiff.UberPopupViewWeb=f;ss.initClass(b,a,{},spiff.ComboBoxView,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[spiff.ComboBoxViewModel])]);ss.initClass(c,a,{add_highlightedListItemChanged:function(g){this.$3$1=ss.delegateCombine(this.$3$1,g)},remove_highlightedListItemChanged:function(g){this.$3$1=ss.delegateRemove(this.$3$1,g)},add_tabKeyPressed:function(g){this.$3$2=ss.delegateCombine(this.$3$2,g)},remove_tabKeyPressed:function(g){this.$3$2=ss.delegateRemove(this.$3$2,g)},$l:function(g){if(ss.referenceEquals(g,this.$n)){return}if(ss.staticEquals(this.$3$1,null)){return}if(ss.isValue(this.$n)){this.$3$1(this.get_listViewModel().get_collection()[this.$n]);return}this.$3$1(null)},removeList:function(){var g=this.$n;this.$n=null;this.$l(g);spiff.CompositeSearchWidget.prototype.removeList.call(this)},highlightNextListItem:function(g){var h=this.$n;if(ss.isNullOrUndefined(this.get_listViewModel())||this.get_listViewModel().get_collection().length===0){this.$n=null;this.$l(h);return}if(ss.isNullOrUndefined(this.$n)){this.$n=(g?(this.get_listViewModel().get_collection().length-1):0)}else{this.$n=ss.Nullable$1.add(this.$n,(g?-1:1))}if(ss.Nullable$1.lt(this.$n,0)){this.$n=this.get_listViewModel().get_collection().length-1}else if(ss.Nullable$1.gt(this.$n,this.get_listViewModel().get_collection().length-1)){this.$n=0}this.$l(h)},$m:function(g){switch(g.which){case 38:{if(ss.isValue(this.get_listViewModel())){g.preventDefault();this.highlightNextListItem(true)}break}case 40:{if(ss.isValue(this.get_listViewModel())){g.preventDefault();this.highlightNextListItem(false)}break}case 9:{if(ss.isValue(this.$3$2)){g.preventDefault();this.$3$2()}break}}}},spiff.CompositeSearchWidget,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(d,a,{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.dom.get_domRoot().focus()},showSubmenu:function(g,h,i){$('body').append(i.get_domRoot());spiff.SpiffBrowserViewport.getViewport(ss.mkdel(this,function(j){this.$o(j,h,i);i.get_domRoot().show()}))},buildMenu:function(g,h){spiff.MenuView.prototype.buildMenu.call(this,g,h);g.get_domRoot().delegate('.tabMenuItem','mouseenter'+this.get_eventNamespace(),ss.mkdel(this,this.$k));g.get_domRoot().delegate('.tabMenuItem','mouseleave'+this.get_eventNamespace(),ss.mkdel(this,this.$l))},$o:function(g,h,i){var j=i.get_domRoot().outerWidth(false);var k=i.get_domRoot().outerHeight(false);var l=h.outerWidth(false);var m=tab.PointUtil.fromPosition(tab.DomUtil.getElementOffset(h,true));m.x+=l;m.y-=parseInt(i.get_domRoot().children('.tabMenuContent').css('padding-top'));var n=g.getVisibleRoom(m);var o=new tab.WindowHelper(window.window);m.x+=o.get_pageXOffset();m.y+=o.get_pageYOffset();var p=null;if(n.roomBelow>=k){}else if(n.roomAbove+n.roomBelow>k){m.y-=k-n.roomBelow}else{var q=5;m.y-=n.roomAbove;p=n.roomAbove-q+n.roomBelow}if(n.roomRight<j){m.x-=j+l}var r={};r['top']=m.y+'px';r['left']=m.x+'px';r['max-height']=(ss.isValue(p)?(p+'px'):'');r['z-index']=tab.DomUtil.getComputedZIndex(h[0]);i.get_domRoot().css(r)},shown:function(g){spiff.MenuView.prototype.shown.call(this,g);var h=this.dom.get_domRoot();if(h.prop('scrollHeight')>h.prop('clientHeight')){h.css('overflow-y','scroll')}if(ss.isValue(this.menuViewModel.get_focusedItem())){this.$j(this.menuViewModel.get_focusedItem(),true)}else if(ss.isValue(this.menuViewModel.get_menu().get_menuItems())&&ss.isValue(this.menuViewModel.get_menu().get_menuItems()[0])){this.menuViewModel.set_focusedItem(this.menuViewModel.get_menu().get_menuItems()[0])}},$l:function(g){if(g.pageX===this.$r&&g.pageY===this.$s){return}this.$r=g.pageX+0;this.$s=g.pageY+0;var h=$(g.currentTarget);var i=spiff.MenuView.getMenuItem(h);if(ss.referenceEquals(this.menuViewModel.get_focusedItem(),i)){this.menuViewModel.set_focusedItem(null)}},$k:function(g){if(g.pageX===this.$p&&g.pageY===this.$q){return}this.$p=g.pageX+0;this.$q=g.pageY+0;var h=$(g.currentTarget);var i=spiff.MenuView.getMenuItem(h);this.$m(spiff.MenuView.getMenuItemLevel(h));if(ss.isValue(i)){this.menuViewModel.set_focusedItem(i);if(ss.isValue(i.get_subMenu())){this.activateSubmenu(i,h)}}},$m:function(g){for(var h=this.menuStack.length-1;h>=g;h--){var i={$:this.menuStack[h]};i.$.get_domRoot().fadeOut(50,ss.mkdel({subMenu:i},function(){this.subMenu.$.dispose()}));ss.removeAt(this.menuStack,h)}},$n:function(g){var h=0;switch(g.which){case 32:case 13:{if(ss.isValue(this.menuViewModel.get_focusedItem())){if(ss.isValue(this.menuViewModel.get_focusedItem().get_subMenu())){this.$i()}else{this.menuViewModel.clickMenuItem(this.menuViewModel.get_focusedItem())}}break}case 40:{h=1;break}case 38:{h=-1;break}case 39:{this.$i();break}case 37:{if(ss.isValue(this.menuViewModel.get_focusedItem())){var i=this.menuViewModel.findMenuForFocusedItem();if(!ss.referenceEquals(i,this.menuViewModel.get_menu())){var j=this.getElementForMenuItem(this.menuViewModel.get_focusedItem());if(ss.isNullOrUndefined(j)){return}this.$m(spiff.MenuView.getMenuItemLevel(j)-1);this.menuViewModel.set_focusedItem(this.menuViewModel.findItemContainingSubMenu(i))}}break}default:{if(g.which>=97&&g.which<=122||g.which>=65&&g.which<=90||g.which>=48&&g.which<=57){this.menuViewModel.focusByNamePrefix(String.fromCharCode(g.which))}return}}g.preventDefault();g.stopPropagation();if(h!==0){this.menuViewModel.iterateFocus(h)}},$i:function(){if(ss.isValue(this.menuViewModel.get_focusedItem())&&ss.isValue(this.menuViewModel.get_focusedItem().get_subMenu())){var g=this.getElementForMenuItem(this.menuViewModel.get_focusedItem());if(ss.isValue(g)){this.activateSubmenu(this.menuViewModel.get_focusedItem(),g);var h=((this.menuViewModel.get_focusedItem().get_subMenu().get_menuItems().length>0)?this.menuViewModel.get_focusedItem().get_subMenu().get_menuItems()[0]:null);if(ss.isValue(h)){this.menuViewModel.set_focusedItem(h)}}}},$j:function(g,h){var i=this.getElementForMenuItem(g);if(ss.isValue(i)&&i.is(':visible')){i.toggleClass('tabMenuFocusedItem',h);if(!h){return}var j=i.offsetParent();var k=tab.DoubleUtil.roundToInt(i.position().top);if(k<0){j.scrollTop(j.scrollTop()+k)}else{var l=j.height();var m=k+i.outerHeight();if(l<m){j.scrollTop(j.scrollTop()+(m-l))}}if(g.get_isTextInput()){i.find('input').focus()}else{this.get_element().focus()}}}},spiff.MenuView,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[spiff.MenuViewModel])]);ss.initClass(e,a,{},spiff.MenuTemplate,[ss.IDisposable]);ss.initClass(f,a,{get_uberPopupShadowHeight:function(){return 2}},spiff.UberPopupView,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[spiff.UberPopupViewModel])]);(function(){spiff.ObjectRegistry.registerType(spiff.ComboBoxView,b).call(null)})();(function(){spiff.ObjectRegistry.registerType(spiff.CompositeSearchWidget,c).call(null)})();(function(){spiff.ObjectRegistry.registerType(spiff.MenuView,d).call(null)})();(function(){spiff.ObjectRegistry.registerType(spiff.UberPopupView,f).call(null)})()})();;
/*! BEGIN UIWeb */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqluiweb');var b=function(){};b.__typeName='tab.$0';var c=function(){this.$0=null;this.$1=0};c.__typeName='tab.$1';var d=function(G,H,I,J,K,L){this.$4=null;this.$2=null;this.$3=0;this.$0=null;this.$5=null;this.$1=false;this.$4=G;this.$2=H;this.$3=I;this.$0=J;this.$5=K;this.$1=L};d.__typeName='tab.$2';var e=function(G,H,I){this.$1=0;this.$2=0;this.$0=0;this.$1=G;this.$2=H;this.$0=I};e.__typeName='tab.$3';var f=function(G){tab.AccordionView.call(this,G,new tab.AccordionTemplate)};f.__typeName='tab.AccordionViewWeb';global.tab.AccordionViewWeb=f;var g=function(G,H){tab.ApplicationViewModel.call(this,G,H);$(window).bind(this.createNamespacedEventName('resize'),ss.mkdel(this,function(){this.resize(false)}))};g.__typeName='tab.ApplicationViewModelWeb';global.tab.ApplicationViewModelWeb=g;var h=function(){this.scroller=null;tab.CategoricalLegendTemplate.call(this,$("\n            <div class='tabLegendPanel'>\n                <div class='tabLegendBox'>\n                    <div class='tabLegendTitle'></div>\n                    <div class='tabLegendContentHolder' style='overflow:auto'>\n                        <div class='tabLegendColumnHolder' style='white-space:nowrap'></div>\n                    </div>\n                    <div class='tabCatLegendScroll'></div>\n                </div>\n            </div>"));this.scroller=this.getElementBySelector('.tabCatLegendScroll');this.legendContentArea=this.columnsHolder};h.__typeName='tab.CategoricalLegendTemplateWeb';global.tab.CategoricalLegendTemplateWeb=h;var i=function(G){this.$A=null;this.$B=null;this.$z=null;tab.CategoricalLegendView.call(this,G,new h);this.$A=this.$p();this.$w().get_domRoot().css('cursor','default');this.$B=new tab.IteratorButtons(this.get_catLegendTemplate().columnsHolder,true,12);this.$w().scroller.append(this.$B.get_domRoot())};i.__typeName='tab.CategoricalLegendViewWeb';global.tab.CategoricalLegendViewWeb=i;var j=function(G){this.$e=null;this.$d=null;this.$f=false;this.$g=null;this.$h=null;tab.ContinuousSlider.call(this,G);this.viewModel=G;var H={};H.templateString="<div class='dijit dijitReset'><div class='dijitReset tableauSlider' dojoAttachPoint='tableauSlider'><table class='dijit dijitReset' cellspacing='0' cellpadding='0' border='0' rules='none'><tr class='dijitReset'><td class='dijitReset'></td><td dojoAttachPoint='containerNode,topDecoration' class='dijitReset' style='text-align:center;width:100%;'></td><td class='dijitReset'></td></tr><tr class='dijitReset'><td class='dijitReset'><div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper' dojoAttachEvent='onclick:_onClkDecBumper'></div></td><td class='dijitReset'><input dojoAttachPoint='valueNode' type='hidden' name='${name}'><div class='dijitReset dijitSliderBarContainerH' waiRole='presentation' dojoAttachPoint='sliderBarContainer'><div waiRole='presentation' dojoAttachPoint='progressBar' class='dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH' dojoAttachEvent='onclick:_onBarClick'><div class='dijitSliderMoveable dijitSliderMoveableH'><div dojoAttachPoint='sliderHandle,focusNode' class='dijitSliderImageHandle dijitSliderImageHandleH' dojoAttachEvent='onmousedown:_onHandleClick' waiRole='slider' valuemin='${minimum}' valuemax='${maximum}'></div></div></div><div waiRole='presentation' dojoAttachPoint='remainingBar' class='dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH' dojoAttachEvent='onclick:_onBarClick'></div></div></td><td class='dijitReset'><div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper' dojoAttachEvent='onclick:_onClkIncBumper'></div></td></tr><tr class='dijitReset'><td class='dijitReset'></td><td dojoAttachPoint='containerNode,bottomDecoration' class='dijitReset'></td><td class='dijitReset'></td></tr></table></div><div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowDec' style='display:none' dojoAttachPoint='decrementButton'><div class='dijitSliderDecrementIconH' tabIndex='-1'><span class='dijitSliderButtonInner'>-</span></div></div><div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowInc' style='display:none' dojoAttachPoint='incrementButton'><div class='dijitSliderIncrementIconH' tabIndex='-1'><span class='dijitSliderButtonInner'>+</span></div></div></div>";H.onChange=ss.mkdel(this,this.$9);H.value=G.get_sliderCurrentValue();H.minimum=G.get_sliderMinimumValue();H.maximum=G.get_sliderMaximumValue();H.slideDuration=0;H.intermediateChanges=true;H.style='width:'+G.get_pixelWidth()+'px;';H.showButtons=false;this.$e=new dijit.form.HorizontalSlider(H,this.get_template().get_domRoot().get(0));this.$g=dojo.subscribe('/dnd/move/start',ss.mkdel(this,this.$a));this.$h=dojo.subscribe('/dnd/move/stop',ss.mkdel(this,this.$b));this.viewModel.add_sliderValueChange(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.viewModel.remove_sliderValueChange(ss.mkdel(this,this.$c))})));this.get_template().get_domRoot().append(this.$e.domNode);if(this.viewModel.get_ruleTickCount()>0){var I=$("<div class='tabSliderRule'>");var J=ss.mkdict(['count',this.viewModel.get_ruleTickCount()]);this.$d=new dijit.form.HorizontalRule(J,I.get(0));I.append(this.$d.domNode);this.$d.startup();this.get_template().get_domRoot().append(I)}this.$f=false};j.__typeName='tab.ContinuousSliderWeb';global.tab.ContinuousSliderWeb=j;var k=function(){};k.__typeName='tab.CursorKey';global.tab.CursorKey=k;var l=function(G){tab.DataConnectionVariableListItemView.call(this,G);this.initDom();this.disposables.add$1(spiff.HoverAddClassBehavior.attach(this,'hover'))};l.__typeName='tab.DataConnectionVariableListItemViewWeb';global.tab.DataConnectionVariableListItemViewWeb=l;var m=function(G){this.$t=false;this.$s=null;tab.DataHighlighterView.call(this,G,new tab.DataHighlighterViewTemplate);this.get_compositeSearchWidget().get_textInputView().get_inputElement().focusin(ss.mkdel(this,this.$m));this.get_compositeSearchWidget().get_textInputView().get_inputElement().focusout(ss.mkdel(this,this.$n));this.get_compositeSearchWidget().get_textInputView().get_inputElement().mouseup(ss.mkdel(this,this.$o))};m.__typeName='tab.DataHighlighterViewWeb';global.tab.DataHighlighterViewWeb=m;var n=function(){};n.__typeName='tab.DojoWidgetsWeb';global.tab.DojoWidgetsWeb=n;var o=function(G,H){this.$r=null;this.$s=null;this.$t=null;this.$l=null;this.$m=null;this.$u=null;this.$o=false;this.$p=null;this.$n=null;this.$q=null;this.$w=null;this.$v=null;y.call(this,$(document.createElement('div')),$(H));this.$u=G;this.$r=this.$u.get_inputHandlers();this.get_element().addClass('tab-tiledViewerDrill');this.$l=$("<span class='tab-tvLevelDrillDown tab-levelDrillingIcon tvDrillDown' />").appendTo(this.get_element());this.$s=new spiff.Button(this.$l);this.$s.add_press(ss.mkdel(this,this.$c));this.$m=$("<span class='tab-tvLevelDrillUp tab-levelDrillingIcon tvDrillUp' />").appendTo(this.get_element());this.$t=new spiff.Button(this.$m);this.$t.add_press(ss.mkdel(this,this.$d));H.appendChild(this.get_element().get(0));this.$f();this.turnDrillWidgetsOff()};o.__typeName='tab.Drilling';global.tab.Drilling=o;var p=function(G,H,I,J,K){tab.FloatingZoomToolbar.call(this,G,H,I,J,K);this.init()};p.__typeName='tab.FloatingZoomToolbarWeb';global.tab.FloatingZoomToolbarWeb=p;var q=function(G){this.$0=null;this.$0=G};q.__typeName='tab.FZTOpsWeb';global.tab.FZTOpsWeb=q;var r=function(G){this.$0=null;this.$0=G};r.__typeName='tab.HoverApi';global.tab.HoverApi=r;var s=function(){this.domHorizScrollButtonHolder=null;tab.LegacyLegendTemplate.call(this,$("<div class='LegendPanel'><div class='LegendBox'><div class='tabLegendTitle'></div><div class='LegendContent'><img class='LegendImageBody'/></div><div class='tabCatLegendScroll'></div></div><div class='tabLegendHighlighter' showlabel='false' title='Highlight Selected Items'></div></div>"));this.domHorizScrollButtonHolder=this.getElementBySelector('.tabCatLegendScroll');this.legendContentArea=this.domContent};s.__typeName='tab.LegacyLegendTemplateWeb';global.tab.LegacyLegendTemplateWeb=s;var t=function(G){this.$o=new tab.DisposableHolder;tab.LegacyLegendView.call(this,G,new s)};t.__typeName='tab.LegacyLegendViewWeb';global.tab.LegacyLegendViewWeb=t;var u=function(G){this.$n=null;this.$j=null;this.$o=null;this.$k=10000;this.$m=10000;this.$l=200;this.$d=null;this.$g=null;this.$h=false;this.$i=null;this.$e=new tab.DisposableHolder;this.$f=false;tab.Param.verifyValue(G,'tooltip');this.$n=G;this.$j=[];this.$o=u.$0()};u.__typeName='tab.LegacyTooltipBehavior';u.$0=function(){u.$6++;return'mousemove.LegacyTooltipBehavior'+u.$6.toString()};global.tab.LegacyTooltipBehavior=u;var v=function(G){this.$u=false;this.$t=null;tab.MapsSearchView.call(this,G,tab.MapsSearchView.newMapsSearchViewTemplate());this.get_compositeSearchWidget().get_textInputView().get_inputElement().focusin(ss.mkdel(this,this.$n));this.get_compositeSearchWidget().get_textInputView().get_inputElement().focusout(ss.mkdel(this,this.$o));this.get_compositeSearchWidget().get_textInputView().get_inputElement().mouseup(ss.mkdel(this,this.$p));var H=this.get_compositeSearchWidget();H.add_highlightedListItemChanged(ss.mkdel(this,this.$r));H.add_tabKeyPressed(ss.mkdel(this,this.$q));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){H.remove_highlightedListItemChanged(ss.mkdel(this,this.$r));H.remove_tabKeyPressed(ss.mkdel(this,this.$q))})))};v.__typeName='tab.MapsSearchViewWeb';global.tab.MapsSearchViewWeb=v;var w=function(){this.scrollX=null;this.scrollY=null;tab.PaneTableTemplate.call(this,$("<div class='tab-tiledViewer placeholder'><div class='tab-clip'><div class='tab-tvTLSpacer tvimagesNS'><img></img></div><div class='tab-tvTRSpacer tvimagesNS'><img></img></div><div class='tab-tvBLSpacer tvimagesNS'><img></img></div><div class='tab-tvBRSpacer tvimagesNS'><img></img></div><div class='tab-tvYLabel tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvLeftAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvRightAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvXLabel tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvBottomAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvTopAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvView tvimagesNS'><div class='tvScrollContainer'><div class='tvBackgroundContainer'></div><div class='tvimagesContainer'></div></div><div class='tvViewportBorders'></div></div><div class='tab-tvTitle tvimagesNS'></div><div class='tab-tvCaption tvimagesNS'></div><div class='tab-tvScrollX tvimages'><div class='tvimagesContainer'></div></div><div class='tab-tvScrollY tvimages'><div class='tvimagesContainer'></div></div></div></div>"));var G=ss.mkdel(this,this.getElementBySelector);this.scrollX=G('.tab-tvScrollX');this.scrollY=G('.tab-tvScrollY')};w.__typeName='tab.PaneTableTemplateWeb';global.tab.PaneTableTemplateWeb=w;var x=function(G){this.$1P={};this.$1H=null;this.$1Y=false;this.$1L=false;this.$1O=false;this.$1J=null;this.$25=null;this.$1X=null;this.$1M=null;this.$23=null;this.$20=null;this.$21=null;this.$1N=null;this.$1T=null;this.$1R=false;this.$26=false;this.$1Z=null;this.$1K=null;this.$28=null;this.$27=null;this.$1S=false;this.$1V=0;this.$1G=null;this.$1U=null;this.$1W=0;this.$22=false;this.$1Q=false;this.$24=null;this.$1I=null;tab.PaneTableView.call(this,G,new w);this.$1H=this.dom;this.$1E();this.$1S=false;this.$22=true;this.$1Q=false;var H={};H.tap=ss.mkdel(this,function(I){if(ss.referenceEquals(I.currentTarget,I.target)){this.clearSelection()}});this.disposables.add$1(new spiff.TableauEventHandler.$ctor1(this.get_dom().enclosingDiv.get(0),H));this.init()};x.__typeName='tab.PaneTableViewWeb';x.$1=function(G,H){return G.x>H.pageX||G.x+G.w<=H.pageX||G.y>H.pageY||G.y+G.h<=H.pageY};x.$0=function(G,H){var I=2;var J={x:G.x,y:G.y};if(H.w>4){J=tab.RectXYUtil.horizontalShiftCoordsTowardsCenter(J,H,I)}else{J={x:H.x+ss.Int32.div(H.w,2),y:J.y}}if(H.h>4){J=tab.RectXYUtil.verticalShiftCoordsTowardsCenter(J,H,I)}else{J={x:J.x,y:H.y+ss.Int32.div(H.h,2)}}return J};global.tab.PaneTableViewWeb=x;var y=function(G,H){this.$6=0;this.$8=null;this.$7=null;spiff.Widget.call(this,G);this.$6=y.$0.length;y.$0.push(this);this.$8=H};y.__typeName='tab.SortDrillBase';global.tab.SortDrillBase=y;var z=function(G,H){this.$o=null;this.$l=null;this.$n=null;this.$p=null;this.$m=null;this.$q=null;this.$s=null;this.$r=null;y.call(this,$(document.createElement('div')),$(H));this.$n=G;this.get_element().addClass('tab-tiledViewerSort');this.$o=spiff.LabelButton.newNativeButton();this.$o.get_element().addClass('tab-tvSortIndicator');this.$o.get_element().css('border','0');this.$o.get_element().css('position','absolute');this.$o.get_element().css('padding','0px');this.get_element().append(this.$o.get_element());this.$l=this.$o.get_element();H.appendChild(this.get_element().get(0));this.$9();this.$g();this.$l.css('display','none')};z.__typeName='tab.Sorting';global.tab.Sorting=z;var A=function(G){tab.StepperControlView.call(this,G,new F)};A.__typeName='tab.StepperControlViewWeb';global.tab.StepperControlViewWeb=A;var B=function(){this.geometry=null;this.visibleGeometry=null;this.sortIndicators=null;this.posTVx=0;this.posTVy=0;this.dom=null;this.sheetid=null;this.layoutSession=null;this.session=null;this.inputHandlers=null;this.tlspacerAreaX=null;this.tlspacerAreaY=null;this.blspacerArea=null;this.regions=null;this.titleHeight=0};B.__typeName='tab.TiledViewerModel';global.tab.TiledViewerModel=B;var C=function(G,H,I,J,K,L,M,N,O){this.$V=false;this.$11={item1:false,item2:'no-tools'};this.$15=null;this.$Y=null;this.$X=null;this.$13=null;this.$14=null;this.$W=null;this.$10=false;this.$12=false;this.$Z=false;tab.TiledViewerRegion.call(this,G,H,I,M,N,O);this.$Y=J;if(this.get_regionPart()==='viz'){C.$2();this.disposables.add$1(new tab.SubscriptionDisposable(dojo.subscribe('modifierKeysChanged',ss.mkdel(this,function(P){this.$y(P)}))));this.set_defaultPointerToolMode(this.determineDefaultToolMode());this.currentToolbarToolMode=this.get_defaultPointerToolMode();this.resetPointerToolMode()}this.$V=true;this.scroller=new E(K,L)};C.__typeName='tab.TiledViewerRegionWeb';C.$2=function(){if(ss.isValue(C.$6)){return}var G='default';C.$6={};C.$6['zoomIn']=(tab.BrowserSupport.get_isIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/zoomin.png',true)+') 8 7, '+G));C.$6['zoomOut']=(tab.BrowserSupport.get_isIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/zoomout.png',true)+') 8 7, '+G));C.$6['panDrag']=(tab.BrowserSupport.get_isIE()?'move':('url('+tableau.util.assetUrl('cursors/pandrag.png',true)+') 9 9, '+G));C.$6['rectSelect']=(tab.BrowserSupport.get_isIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/rectdrag.png',true)+') 2 2, '+G));C.$6['lassoSelect']=(tab.BrowserSupport.get_isIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/lassodrag.png',true)+') 2 2, '+G));C.$6['radialSelect']=(tab.BrowserSupport.get_isIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/radialdrag.png',true)+') 2 2, '+G));C.$6['rectExtended']=(tab.BrowserSupport.get_isIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/rectdragextended.png',true)+') 2 2, '+G));C.$6['lassoExtended']=(tab.BrowserSupport.get_isIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/lassodragextended.png',true)+') 2 2, '+G));C.$6['radialExtended']=(tab.BrowserSupport.get_isIE()?'crosshair':('url('+tableau.util.assetUrl('cursors/radialdragextended.png',true)+') 2 2, '+G));C.$6['dragSelect']='crosshair';C.$6['select']='pointer';C.$6['defaultKey']='default'};C.$0=function(G){return G.shiftKey&&!spiff.EventUtil.isCtrlKey(G)};C.$1=function(G){return!G.altKey&&G.shiftKey&&spiff.EventUtil.isCtrlKey(G)};global.tab.TiledViewerRegionWeb=C;var D=function(G,H){tab.TooltipBaseLegacyMode.call(this,G,H)};D.__typeName='tab.TooltipLegacyMode';global.tab.TooltipLegacyMode=D;var E=function(G,H){this.$0=null;this.$1=null;this.$0=G.get(0);this.$1=H.get(0)};E.__typeName='tab.WebScroller';global.tab.WebScroller=E;var F=function(){tab.StepperControlTemplate.call(this,"<span class='tabStepperControl'>\n            <div class='tabButtonContainer'>\n                <div class='tabIncrementButton'>&#x25B2;</div>\n                <div class='tabDecrementButton'>&#x25BC;</div>\n            </div>\n            <input class='tabStepCountValue' type='text'></input>\n        </span>");this.decrementButton=this.getElementBySelector('.tabDecrementButton');this.incrementButton=this.getElementBySelector('.tabIncrementButton');this.valueText=this.getElementBySelector('.tabStepCountValue')};F.__typeName='tab.WebStepperControlTemplate';global.tab.WebStepperControlTemplate=F;ss.initEnum(b,a,{$2:0,$1:1,$3:2,$0:3});ss.initClass(c,a,{});ss.initClass(d,a,{});ss.initClass(e,a,{});ss.initClass(f,a,{},tab.AccordionView,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[tab.AccordionViewModel])]);ss.initClass(g,a,{destroy:function(){$(window).unbind(this.createNamespacedEventName('resize'));tab.ApplicationViewModel.prototype.destroy.call(this)},makeExportPdfDialog:function(G){return new tab.ExportPdfDialog(G,false)}},tab.ApplicationViewModel,[spiff.IAppendableView,ss.IDisposable,tab.IClient,tab.IApiStorytellingClient]);ss.initClass(h,a,{},tab.CategoricalLegendTemplate,[ss.IDisposable]);ss.initClass(i,a,{$x:function(){return this.$w().columnsHolder.width()},$y:function(){return this.get_catLegendViewModel().get_categoricalLegendPM().vNc.IAN*this.get_catLegendViewModel().get_categoricalLegendPM().vNc.Fvw},$w:function(){return this.get_template()},dispose:function(){this.$A.dispose();this.$z.dispose();this.$B.dispose();ss.makeGenericType(tab.BaseLegendView$1,[tab.CategoricalLegendViewModel]).prototype.dispose.call(this)},drawLegend:function(){tab.CategoricalLegendView.prototype.drawLegend.call(this);var G=this.get_catLegendViewModel().get_categoricalLegendPM();var H=G.vNc;var I=this.$w().titleArea.height();var J=2;var K=2;var L=!this.highlighterFitsUpperRight();if(L&&!this.get_catLegendViewModel().get_titleInline()){J+=I}var M=false;var N=false;if(this.$u()){this.get_catLegendTemplate().columnsHolder.css({'overflow-x':'hidden'});this.get_catLegendTemplate().columnsHolder.css({'overflow-y':'hidden'});var O=this.get_catLegendViewModel().get_categoricalLegendPM().vNc.Fvw;this.$B.set_scrollIncrement(O);this.$B.reset();this.viewportWidth-=28;if(L){K+=30}if(this.get_catLegendViewModel().get_titleInline()){this.$w().scroller.css({top:0+'px'})}else{this.$w().scroller.css({top:I+'px'})}}else if(H.ICz==='horizontal'||H.ICz==='grid'){M=true}else{N=true}if(L&&N){var P=H.OSr*H.bjh;if(this.viewportHeight<P){var Q=tab.Metrics.get_scrollW();K+=Q}}this.get_catLegendTemplate().columnsHolder.css({'overflow-x':(M?'auto':'hidden'),'overflow-y':(N?'auto':'hidden')});this.$w().legendHighlighter.css({top:J+'px',right:K+'px'});this.setContentSize(this.viewportHeight,this.viewportWidth);this.$v()},$p:function(){this.$z=new spiff.HoverBehavior(this,null,ss.mkdel(this,this.$r),ss.mkdel(this,this.$s));var G={};G.tap=ss.mkdel(this,this.$t);G.hover=ss.mkdel(this,this.$q);G.hoverDelay=150;var H=new spiff.TableauEventHandler.$ctor1(this.$w().get_domRoot().get(0),G);return H},$r:function(G){this.setHighlightButtonVisibility(true)},$s:function(G){this.setHighlightButtonVisibility(false)},$q:function(G){if(spiff.DragDropManager.get_isDragging()){return}var H=this.getLegendItemFromEvent(G);if(ss.isValue(H)){var I=this.getViewportPosition(G);var J=this.getDocumentPosition(I);var K={x:J.x,y:J.y,w:0,h:0};this.performHoverOnItem(I,K)}G.preventDefault()},$t:function(G){if(ss.referenceEquals(G.target,this.$w().legendHighlighter.get(0))){this.onLegendHighlighterTapped()}else{var H=this.getLegendItemFromEvent(G);var I=tab.ResolveSelectAction.fromNormalizedEvent(G);if(ss.isValue(H)){var J=this.getViewportPosition(G);var K=this.getDocumentPosition(J);var L={x:K.x,y:K.y,w:0,h:0};this.performSelectOnItem(H,I,J,L)}else{this.get_catLegendViewModel().selectNone(I)}}G.preventDefault()},$u:function(){var G=this.get_catLegendViewModel().get_categoricalLegendPM().vNc;if(G.ICz==='vertical'){return false}var H=G.bjh+tab.Metrics.get_scrollH();return this.$x()<this.$y()&&H>=this.$w().columnsHolder.height()},$v:function(){if(this.$u()){this.$w().scroller.show()}else{this.$w().scroller.hide()}}},tab.CategoricalLegendView,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[tab.CategoricalLegendViewModel])]);ss.initClass(j,a,{$c:function(G){this.$e._setValueAttr(this.viewModel.get_sliderCurrentValue())},$a:function(G){if(ss.isValue(G)&&ss.referenceEquals(G.node,this.$e.sliderHandle)){this.$f=true}},$b:function(G){if(ss.isValue(G)&&ss.referenceEquals(G.node,this.$e.sliderHandle)){this.$f=false;this.applyChanges(this.viewModel.get_sliderIntermediateValue())}},$9:function(G){this.viewModel.applyIntermediateChange(G);if(!this.$f){this.applyChanges(this.viewModel.get_sliderIntermediateValue())}},dispose:function(){dojo.unsubscribe(this.$g);dojo.unsubscribe(this.$h);tab.ContinuousSlider.prototype.dispose.call(this)}},tab.ContinuousSlider,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[tab.ContinuousSliderViewModel])]);ss.initEnum(k,a,{zoomIn:'zoomIn',zoomOut:'zoomOut',panDrag:'panDrag',rectSelect:'rectSelect',lassoSelect:'lassoSelect',radialSelect:'radialSelect',rectExtended:'rectExtended',lassoExtended:'lassoExtended',radialExtended:'radialExtended',dragSelect:'dragSelect',select:'select',defaultKey:'defaultKey'},true);ss.initClass(l,a,{},tab.DataConnectionVariableListItemView,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[tab.DataConnectionVariableDisplayViewModel])]);ss.initClass(m,a,{addImplEventHandlerToListItem:function(G,H){var I={};I.hover=ss.mkdel(this,function(){this.$p(H)});I.hoverDelay=150;var J=I;this.disposables.add$1(new spiff.TableauEventHandler.$ctor1(G.get(0),J))},$p:function(G){this.get_viewModel().highlightItems([G.YLs]);if(ss.isNullOrUndefined(this.$s)){var H=$(document).find('.tabDataHighlighterViewSearchResultList');this.$s=spiff.EventUtil.bindWithDispose(H,'mouseleave',ss.mkdel(this,this.$q));this.disposables.add$1(this.$s)}},$q:function(G){if(this.currentListPopulationMode===2){this.get_viewModel().highlightItems(Array.prototype.slice.call(this.currentSearchResultIDs))}else if(this.currentListPopulationMode===1){this.get_viewModel().clearHighlighting()}this.$r()},removeList:function(){this.$r();tab.DataHighlighterView.prototype.removeList.call(this)},$r:function(){if(ss.isNullOrUndefined(this.$s)){return}this.$s.dispose();this.$s=null},$m:function(G){this.$t=true},$n:function(G){this.$t=false},$o:function(G){if(!this.$t||this.get_compositeSearchWidget().get_isShowingInitialSearchText()){return}this.$t=false;var H=this.get_compositeSearchWidget().get_textInputView().get_inputElement().prop('selectionStart');var I=this.get_compositeSearchWidget().get_textInputView().get_inputElement().prop('selectionEnd');var J=ss.isValue(H)&&ss.isValue(I)&&!ss.referenceEquals(H,I);if(!J){tab.DomUtil.selectAllInputText(this.get_compositeSearchWidget().get_textInputView().get_inputElement())}if(ss.referenceEquals(this.lastSatisfiedSearchTerm,this.get_compositeSearchWidget().get_textInputView().get_text())){this.populateAndDisplayList(this.lastSatisfiedSearchResults,2)}}},tab.DataHighlighterView,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[tab.DataHighlighterViewModel]),spiff.IListItemContentCreator]);ss.initClass(n,a,{});ss.initClass(y,a,{get_enabled:function(){return ss.isValue(this.$7)},set_enabled:function(G){if(this.get_widgetFeatureEnabled()){if(G){if(ss.isNullOrUndefined(this.$7)){this.$7=spiff.EventUtil.bindWithDispose(this.$8,'mousemove',ss.mkdel(this,function(H){this.onMouseMove(H)}))}}else if(ss.isValue(this.$7)){this.$7.dispose();this.$7=null}}},get_widgetFeatureEnabled:null,dispose:function(){ss.remove(y.$0,this);this.get_element().remove();spiff.Widget.prototype.dispose.call(this)},isOtherActiveInRect:function(G){for(var H=0;H<y.$0.length;H++){if(H!==this.$6){var I=y.$0[H];if(I.isActiveInRect(G)){return true}}}return false},isActiveInRect:function(G){return false},onMouseMove:null,getSIRegionFromName:function(G,H){var I,J;var K=ss.replaceAllString(H,'Area','');var L=G.get_sortIndicators();var M=L.iG$;for(I=0,J=M.length;I<J;I++){if(ss.referenceEquals(M[I].kuG.toString(),K)){return M[I]}}return null},showNodeAt:function(G,H,I){$(G).css('top',H+'px');$(G).css('left',I+'px');$(G).css('display','')},getWidgetPos:function(G,H,I){if(G==='level'){if(I==='y'){return{x:H.l+ss.Int32.div(H.w,2)-4,y:H.t+2}}else{return{x:H.l+2,y:H.t+ss.Int32.div(H.h,2)-4}}}else{return{x:H['x']+2,y:H['y']+2}}},hideNode:function(G){$(G).css('display','none')},regionHitTest:function(G,H){var I=G;var J=new ss.ObjectEnumerator(I);try{while(J.moveNext()){var K=J.current();if(ss.isValue(K.value)&&tab.RectUtil.inRect(K.value,H)){return K.key}}}finally{J.dispose()}return null},clone:function(G){if(ss.isNullOrUndefined(G)){return G}return this.mixin(new Object,G)},mixin:function(G,H){var I=H;var J=new ss.ObjectEnumerator(I);try{while(J.moveNext()){var K=J.current();var L=G[K.key];if(ss.isNullOrUndefined(L)||!ss.referenceEquals(L,I[K.key])){G[K.key]=I[K.key]}}}finally{J.dispose()}return G}},spiff.Widget,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(o,a,{get_widgetFeatureEnabled:function(){return tsConfig.allow_filter},dispose:function(){this.$u=null;this.$s.dispose();this.$t.dispose();y.prototype.dispose.call(this)},onUpdate:function(){if(!ss.staticEquals(this.$v,null)){this.$v();this.$v=null}this.$o=false;this.$q=this.$u.get_geometry();this.$w=this.$u.get_visibleGeometry()},onMouseMove:function(G){this.$a(G)},isActiveInRect:function(G){if($(this.$l.get(0)).css('display')!=='none'||$(this.$m.get(0)).css('display')!=='none'){if(ss.isValue(this.$n)&&tab.RectXYUtil.intersectsWith(this.$n,G)){return true}}return false},turnDrillWidgetsOff:function(){var G=['bottomaxis','xheader','yheader'];for(var H=0;H<G.length;H++){var I=G[H];if(ss.isValue(this.$r[I])){this.$r[I].unsuppressHover()}}this.hideNode(this.$l.get(0));this.hideNode(this.$m.get(0));this.$p=new c},$f:function(){this.set_enabled(true)},$a:function(G){var H=new Object;var I=false;var J=false;var K=false;var L=false;var M=false;var N=false;var O=true;if(this.$o){return}if(G.button>0){return}if(ss.isNullOrUndefined(this.$q)||ss.isNullOrUndefined(this.$q.di)||ss.referenceEquals(this.$q.di,H)||!tsConfig.allow_filter){return}var P=this.$u.get_posTV();var Q={x:G.pageX-P.x,y:G.pageY-P.y};if(ss.isValue(this.$w.xheaderArea)){I=tab.RectUtil.inRect(this.$w.xheaderArea,Q)}var R=this.$u.get_tlspacerAreaX();var S=this.$u.get_tlspacerAreaY();if(I&&ss.isValue(R)&&ss.isValue(S)&&ss.isValue(this.$w.uleftArea)){S.w=R.l;O=false}if(ss.isValue(this.$w.bottomaxisArea)&&!this.$q.pi.hasXQAxis&&!I){J=tab.RectUtil.inRect(this.$w.bottomaxisArea,Q)}if(ss.isValue(this.$w.yheaderArea)&&!I&&!J){K=tab.RectUtil.inRect(this.$w.yheaderArea,Q)}if(ss.isValue(S)&&!I&&!J&&ss.isValue(this.$w.yheaderArea)){L=tab.RectUtil.inRect(S,Q)}if(ss.isValue(R)&&!L&&!K&&!J&&ss.isValue(this.$w.xheaderArea)){M=tab.RectUtil.inRect(R,Q)}var T=this.$u.get_blspacerArea();if(ss.isValue(T)&&!L&&!M){N=tab.RectUtil.inRect(T,Q)}if(!I&&!K&&!J&&!L&&!M&&!N){this.turnDrillWidgetsOff()}else if(M){O=false;this.$i(Q)}else if(L){this.$j(Q)}else if(I){O=false;this.$i(Q)}else if(K){this.$j(Q)}else{this.$h()}if(O&&ss.isValue(S)&&ss.isValue(this.$w.uleftArea)){S.w=this.$w.uleftArea.w}},$c:function(){this.$b('down')},$d:function(){this.$b('up')},$b:function(G){this.$o=true;var H=this.$u.get_session();H.levelDrill(this.$p.$1,G,this.$p.$0);this.turnDrillWidgetsOff()},$i:function(G){var H=this.$q.di.xs+this.$u.get_titleHeight();var I=this.$9(G.y,H,this.$q.di.xy);if(I.$0>=0&&I.$0<this.$q.di.xy.length){this.$k('x',I,this.$q.di.xy)}else{this.turnDrillWidgetsOff()}},$j:function(G){var H=this.$9(G.x,this.$q.di.ys,this.$q.di.yx);var I=H.$0;if(I>=0&&I<this.$q.di.yx.length){this.$k('y',H,this.$q.di.yx)}},$h:function(){if(ss.isNullOrUndefined(this.$w.bottomaxisArea)){return}var G=this.$q.di.xy.length-1;var H=Math.min(this.$w.bottomaxisArea.l,20);var I={l:this.$w.bottomaxisArea.l-H,t:this.$w.bottomaxisArea.t,w:this.$w.bottomaxisArea.w+H,h:this.$w.bottomaxisArea.h};this.$e(I,this.$q.di.xy[G][1],'x');this.$p.$1=G;this.$p.$0='bottomaxis'},$k:function(G,H,I){var J;var K=0;if(G==='x'){if(ss.isValue(this.$w.uleftArea)){K=Math.min(this.$w.xheaderArea.l,20)}J={l:this.$w.xheaderArea.l-K,t:H.$1,w:this.$w.xheaderArea.w+K,h:H.$2-H.$1}}else{if(ss.isValue(this.$w.uleftArea)){K=Math.min(this.$w.yheaderArea.t,20)}J={l:H.$1,t:this.$w.yheaderArea.t-K,w:H.$2-H.$1,h:this.$w.yheaderArea.h+K}}this.$e(J,I[H.$0][1],G);this.$p.$1=H.$0;this.$p.$0=G+'header'},$g:function(G,H,I){var J=this.getWidgetPos('level',H,I);var K=this.$l.outerHeight();var L=this.$l.outerWidth();this.$n={x:J.x,y:J.y,w:L,h:K};if(this.isOtherActiveInRect(this.$n)){return}this.showNodeAt(G,J.y,J.x)},$e:function(G,H,I){switch(H){case 0:{this.hideNode(this.$l.get(0));this.hideNode(this.$m.get(0));break}case 1:{this.$g(this.$l.get(0),G,I);this.hideNode(this.$m.get(0));break}case 2:{this.$g(this.$m.get(0),G,I);this.hideNode(this.$l.get(0));break}case 3:{break}}},$9:function(G,H,I){var J=-1;var K=H-1;var L=-1;if(ss.isNullOrUndefined(I)){return new e(-1,-1,-1)}while(K<G&&L<I.length-1){L+=1;J=K;K+=I[L][0]}if(K<G){return new e(-1,-1,-1)}return new e(J,K,L)}},y,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(p,a,{clickZoomHome:function(){tab.FloatingZoomToolbar.prototype.clickZoomHome.call(this);if(this.toolbarType==='homeOnlyToolbar'){this.setActiveState(false)}},$g:function(G){var H=this.$i(tab.Strings.PanZoomSelectToolsRadialSelectionTooltip);this.radialSelectBtn=this.addToggleButton(G,'buttonRadialSelect',H)},$h:function(G){var H=this.$i(tab.Strings.PanZoomSelectToolsRectangularSelectionTooltip);this.rectSelectBtn=this.addToggleButton(G,'buttonRectSelect',H)},$e:function(G){var H=this.$i(tab.Strings.PanZoomSelectToolsLassoSelectionTooltip);this.lassoSelectBtn=this.addToggleButton(G,'buttonLassoSelect',H)},$f:function(G){var H=this.$i(tab.Strings.PanZoomSelectToolsPanTooltip);this.panBtn=this.addToggleButton(G,'buttonPan',H)},createButtons:function(){this.createButtonContainer();if(this.toolbarType==='fullToolbar'){this.zoomInBtn=this.addButton(this.buttonContainer,'buttonZoomIn',tab.Strings.PanZoomSelectToolsZoomInTooltip);this.zoomOutBtn=this.addButton(this.buttonContainer,'buttonZoomOut',tab.Strings.PanZoomSelectToolsZoomOutTooltip);this.zoomHomeBtn=this.addButton(this.buttonContainer,'buttonZoomHome',tab.Strings.PanZoomSelectToolsZoomHomeTooltip);this.addSpacer();this.flyOutBtn=this.addButton(this.buttonContainer,'buttonFlyOut','');this.createButtonFlyOut();this.$d()}else if(this.toolbarType==='disablePanZoomToolbar'){if(this.geoSearchEnabled){this.zoomHomeBtn=this.addButton(this.buttonContainer,'buttonZoomHome',tab.Strings.PanZoomSelectToolsZoomHomeTooltip)}if(tab.FeatureFlags.isEnabled('StickyMapTools')){this.$h(this.buttonContainer)}this.$g(this.buttonContainer);this.$e(this.buttonContainer)}else{this.zoomHomeBtn=this.addButton(this.buttonContainer,'buttonZoomHome',tab.Strings.PanZoomSelectToolsZoomHomeTooltip)}this.setupEventHandling()},$d:function(){if(this.toolbarType==='fullToolbar'){var G=this.$i((tab.BrowserSupport.get_isMac()?tab.Strings.PanZoomSelectToolsZoomAreaTooltipMac:tab.Strings.PanZoomSelectToolsZoomAreaTooltip));this.zoomAreaBtn=this.addToggleButton(this.flyOutButtons,'buttonZoomArea',G);if(tab.FeatureFlags.isEnabled('StickyMapTools')){this.$f(this.flyOutButtons);this.$h(this.flyOutButtons)}else if(this.api.defaultPointerToolMode()!=='rectangular-selection'){this.$h(this.flyOutButtons)}else{this.$f(this.flyOutButtons)}this.$g(this.flyOutButtons);this.$e(this.flyOutButtons)}},createButtonFlyOut:function(){tab.FloatingZoomToolbar.prototype.createButtonFlyOut.call(this);if(tab.FeatureFlags.isEnabled('StickyMapTools')){this.flyOutButtons.css('width',115)}},$i:function(G){return G+'\n'+tab.Strings.SelectionToolsLockTooltip},setupEventHandling:function(){tab.FloatingZoomToolbar.prototype.setupEventHandling.call(this);if(this.toolbarType==='fullToolbar'){var G=tab.FeatureFlags.isEnabled('StickyMapTools');this.disposables.add$1(this.zoomInBtn.onClick(ss.mkdel(this,function(){this.api.zoomIn()})));this.disposables.add$1(this.zoomOutBtn.onClick(ss.mkdel(this,function(){this.api.zoomOut()})));this.disposables.add$1(this.zoomAreaBtn.onClick(ss.mkdel(this,function(){this.setToolMode('area-zoom',G);if(tsConfig.is_authoring){tab.FloatingToolbarClientCommands.setDefaultMapToolSelectionCommand('area-zoom')}})));this.disposables.add$1(this.zoomAreaBtn.onShiftClick(ss.mkdel(this,function(){this.setToolMode('area-zoom',true)})));this.flyOutContainer.mouseout(ss.mkdel(this,this.$k));var H=this.flyOutBtn.get_element();H.mouseout(ss.mkdel(this,this.$j));H.mouseenter(ss.mkdel(this,this.toggleFlyout))}if(this.geoSearchEnabled||this.toolbarType!=='disablePanZoomToolbar'){this.zoomHomeBtn.add_enter(ss.mkdel(this,this.$l));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.zoomHomeBtn.remove_enter(ss.mkdel(this,this.$l))})))}},$l:function(){if(!this.canZoomHome){this.zoomHomeBtn.get_element().removeClass(this.zoomHomeBtn.get_hoverClass())}},$k:function(G){var H=this.flyOutContainer.offset();if(H.top>=G.pageY){this.updateFlyOutVisibility(false);return}var I=tab.DoubleUtil.roundToInt(H.left)+this.flyOutContainer.width();var J=tab.DoubleUtil.roundToInt(H.top)+this.flyOutContainer.height();if(G.pageX>=I||G.pageY>=J){this.updateFlyOutVisibility(false)}},$j:function(G){var H=this.flyOutBtn.get_element().offset();if(H.left>=G.pageX||H.top>=G.pageY){this.updateFlyOutVisibility(false);return}var I=tab.DoubleUtil.roundToInt(H.top)+this.flyOutBtn.get_element().height();if(G.pageY>=I){this.updateFlyOutVisibility(false)}}},tab.FloatingZoomToolbar,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(q,a,{zoomHome:function(){this.$0.zoomHome()},zoomIn:function(){this.$0.$1F(2)},zoomOut:function(){this.$0.$1F(0.5)},setPointerToolMode:function(G,H){this.$0.setPointerToolMode(G,H)},setAppendMode:function(G){},anyButtonTouched:function(){},defaultPointerToolMode:function(){return this.$0.defaultPointerToolMode()},isExistingSelection:function(){return this.$0.isExistingSelection()}});ss.initClass(r,a,{dispose:function(){this.$0=null},unsuppressHover:function(G){var H=this.$0.get_inputHandlers()[G.get_regionPart()];if(ss.isValue(H)){H.unsuppressHover()}var I=this.$0.get_responsiveMouseHandler();if(ss.isValue(I)){I.unsuppressHover()}},suppressHover:function(G){var H=this.$0.get_inputHandlers()[G.get_regionPart()];if(ss.isValue(H)){H.suppressHover()}var I=this.$0.get_responsiveMouseHandler();if(ss.isValue(I)){I.suppressHover()}}},null,[ss.IDisposable]);ss.initClass(s,a,{},tab.LegacyLegendTemplate,[ss.IDisposable]);ss.initClass(t,a,{onAddedToDom:function(){tab.LegacyLegendView.prototype.onAddedToDom.call(this);var G=this.get_legendTemplate().domHorizScrollButtonHolder;G.append(this.iterButtons.get_domRoot());G.css({visibility:'hidden'});this.get_legendTemplate().domHighlighter.attr('title',tab.Strings.LegendPanelHighlightSelectedItems)},dispose:function(){this.$o.dispose();tab.LegacyLegendView.prototype.dispose.call(this)},makeViewerInputHandler:function(G,H){var I={};I.tap=ss.mkdel(this,this.onTap);I.hover=ss.mkdel(this,this.onHover);return new spiff.TableauEventHandler.$ctor1(H,I)},doConnections:function(){var G=$(this.get_domNode());this.$o.add$1(spiff.EventUtil.bindWithDispose(G,'mouseenter',ss.mkdel(this,this.$n)));this.$o.add$1(spiff.EventUtil.bindWithDispose(G,'mouseleave',ss.mkdel(this,this.$m)))},layoutButtons:function(G){var H=2;var I=2;this.get_legendTemplate().domHighlighter.css({right:''});var J=!this.highlighterFitsUpperRight();if(J&&!this.get_legendViewModel().get_titleInline()){H+=this.get_serverRenderedModel().jZr}var K=this.get_template().domHorizScrollButtonHolder;K.css({visibility:'hidden'});if(this.get_serverRenderedModel().fXK){if(this.get_serverRenderedModel().ICz!=='vertical'){if(G.h<tab.Metrics.get_minScrollHeight()&&G.h>1){dojo.addClass(this.get_domNode(),'LegendHorizontal');var L=this.bodySize.w;if(L>G.w){G.w-=28;if(this.get_serverRenderedModel().fXK&&(!!this.get_legendViewModel().get_titleInline()||this.get_serverRenderedModel().XjF.toString().length===0&&this.get_serverRenderedModel().nkG1===0&&this.get_serverRenderedModel().jZr===0)){G.w-=18;this.get_legendTemplate().domHighlighter.css({right:32+'px'})}this.iterButtons.set_scrollIncrement(this.get_serverRenderedModel().Fvw||(ss.Int32.div(this.get_legendTemplate().get_contentArea().get(0).clientWidth,2)||120));var M=(!!this.get_legendViewModel().get_titleInline()?0:this.get_serverRenderedModel().jZr);K.css({visibility:'visible',top:M+'px'});if(J){I+=30}}else{K.css({visibility:'hidden'});this.get_legendTemplate().get_contentArea().css({'overflow-x':'auto'})}}else{this.get_legendTemplate().get_contentArea().css({overflow:'auto'})}}if(this.get_serverRenderedModel().ICz==='vertical'){this.get_legendTemplate().get_contentArea().css({'overflow-y':'auto'});if(J){if(this.get_serverRenderedModel().gCJ>G.h){I+=tab.Metrics.get_scrollW()}}}dojo.marginBox(this.get_legendTemplate().get_contentArea().get(0),{w:G.w,h:G.h})}else{K.css({visibility:'hidden'});this.get_legendTemplate().get_contentArea().css({overflow:'hidden'});if(G.w>0){dojo.marginBox(this.get_legendTemplate().get_contentArea().get(0),{w:G.w,h:G.h})}}this.get_legendTemplate().domHighlighter.css({top:H+'px',right:I+'px'});this.iterButtons.updateButtonState()},$n:function(G){if(!tsConfig.allow_highlight){return}if(this.get_serverRenderedModel().fXK){if(this.get_serverRenderedModel().JuD){this.get_legendTemplate().domHighlighter.css({visibility:''})}this.get_domRoot().addClass('tvmodeSelect')}},$m:function(G){var H=dojo.coords(this.get_domNode(),true);if(H.x>G.pageX||H.x+H.w<=G.pageX||H.y>G.pageY||H.y+H.h<=G.pageY){this.hideControls()}},onTap:function(G){if(G.originalEvent['button']>1){return}this.disallowHover();var H=this.getDocumentPoint(G);var I=this.documentPointToContentPoint(H);var J={x:I.x,y:I.y,w:0,h:0};var K=G.getSelectAction();if(this.get_serverRenderedModel().jhL!=='map'){tab.SelectionClientCommands.selectRegion(this.get_legendViewModel().get_regionType(),J,K,this.get_visualId(),this.getFieldNameVec())}window.setTimeout(ss.mkdel(this,function(){this.get_legendTooltip().singleSelectCoordinates(H,I,this.get_legendViewModel().get_regionType(),'legenditem')}),15)},allowHover:function(){this.eventHandler.unsuppressHover()},disallowHover:function(){this.eventHandler.suppressHover()}},tab.LegacyLegendView,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[tab.LegacyLegendViewModel])]);ss.initClass(u,a,{get_timeoutInitialShown:function(){return this.$k},get_timeoutMove:function(){return this.$m},get_timeoutLeaveTooltip:function(){return this.$l},attach:function(){this.$n.add_showed(ss.mkdel(this,this.$9));this.$n.add_closed(ss.mkdel(this,this.$5));this.$n.add_disposed(ss.mkdel(this,this.$c));var G={};spiff.TableauEventHandler.setHandler(G,'hover',ss.mkdel(this,this.$a));spiff.TableauEventHandler.setHandler(G,'mouseleave',ss.mkdel(this,this.$6));spiff.TableauEventHandler.setHandler(G,'potentialTap',ss.mkdel(this,this.$8));this.$e.add$1(new spiff.TableauEventHandler.$ctor1(this.$n.get_element()[0],G));$(window.document.documentElement).bind(this.$o,ss.mkdel(this,this.$7))},detach:function(){this.$0();this.$e.dispose();if(ss.isValue(this.$n)){this.$n.remove_showed(ss.mkdel(this,this.$9));this.$n.remove_closed(ss.mkdel(this,this.$5));this.$n.remove_disposed(ss.mkdel(this,this.$c))}this.$b()},dispose:function(){this.detach()},disposeTooltip:function(){this.dispose()},shownTooltipIsStatic:function(){return true},isHoverAllowed:function(G){return!(this.$n.get_isShown()&&this.isInSafeZone(G))},shouldShowCommandButtons:function(){return true},handleUbertipMenuToggle:function(G){this.$f=G},handleUbertipMenuClose:function(){this.$n.close()},hoverOverObject:function(G,H,I,J){this.showTooltip(G)},hoverOverWhitespace:function(G){if(this.$n.get_isShown()&&this.isInSafeZone(G)){return}if(this.$n.get_isShown()){this.$n.close()}},multiSelectComplete:function(G){this.showTooltip(G)},singleSelectComplete:function(G){this.showTooltip(G)},onPanningOrDragging:function(){if(this.$n.get_isShown()){this.$n.close()}},onScroll:function(){if(this.$n.get_isShown()){this.$n.close()}},mouseDown:function(G,H){this.$n.close()},showTooltip:function(G){if(this.$n.get_isShown()&&tab.PointUtil.equals(this.$n.get_location(),G)){return}if(this.$n.get_isShown()&&this.isInSafeZone(G)){return}this.$n.show(this.$n.get_body().children()[0],G)},$9:function(G,H){this.$0();this.$h=false;this.$i=new Date;this.$n.set_lastLocation({x:H.origX,y:H.origY});this.$1(this.get_timeoutInitialShown())},$5:function(){this.$n.get_element().unbind('.LegacyTooltipBehavior');this.$n.set_lastLocation(null);this.$0();this.$i=null},$7:function(G){var H=this.$n.get_lastLocation();this.$n.set_lastLocation({x:G.pageX,y:G.pageY});if(ss.isNullOrUndefined(H)){return}var I=-1;if(ss.isValue(H)){I=tab.PointUtil.distance(H,this.$n.get_lastLocation())}if(!this.$n.get_isShown()||this.$4(this.$n.get_lastLocation())){return}if(!this.$f&&!this.isInSafeZone(this.$n.get_lastLocation())){this.$n.close();return}var J=new Date-this.$i;if(I>10&&J>500){this.$h=true;if(ss.isValue(this.$d)){window.clearTimeout(ss.unbox(this.$d));ss.remove(this.$j,ss.unbox(this.$d));this.$d=null}this.$2()}else if(this.$h){if(ss.isNullOrUndefined(this.$d)){this.$d=this.$1(this.get_timeoutMove())}}},$2:function(){if(ss.isValue(this.$g)){window.clearTimeout(ss.unbox(this.$g));this.$g=null}this.$g=window.setTimeout(ss.mkdel(this,function(){if(ss.isNullOrUndefined(this.$d)){this.$d=this.$1(this.get_timeoutMove())}}),250)},$8:function(G){G.preventDefault();G.stopPropagation();this.$n.close()},$b:function(){$(window.document.documentElement).unbind(this.$o)},isInSafeZone:function(G){var H=this.$n.get_element().position();var I=this.$n.get_element().outerWidth();var J=this.$n.get_element().outerHeight();var K=4;var L=this.$n.get_horizontalOffset()+K;var M=this.$n.get_verticalOffset()+K;return G.x>=H.left-L&&G.x<=H.left+I+L&&G.y>=H.top-M&&G.y<=H.top+J+M},$4:function(G){if(ss.isNullOrUndefined(G)){return false}var H=this.$3();return tab.RectUtil.inRect(H,G)},$3:function(){var G=this.$n.get_element().position();var H={l:tab.DoubleUtil.roundToInt(G.left),t:tab.DoubleUtil.roundToInt(G.top),w:this.$n.get_element().width(),h:this.$n.get_element().height()};return H},$1:function(G){var H=window.setTimeout(ss.mkdel(this,function(){if(this.$4(this.$n.get_lastLocation())){return}this.$n.close()}),G);this.$j.push(H);return H},$6:function(G){if(!this.$f){this.$1(this.get_timeoutLeaveTooltip())}},$a:function(G){if(this.$4(this.$n.get_lastLocation())){return}this.$0()},$c:function(G,H){this.dispose()},$0:function(){for(var G=0;G<this.$j.length;G++){var H=this.$j[G];window.clearTimeout(H)}ss.clear(this.$j);if(ss.isValue(this.$d)){window.clearTimeout(ss.unbox(this.$d));this.$d=null}if(ss.isValue(this.$g)){window.clearTimeout(ss.unbox(this.$g));this.$g=null}}},null,[tab.ITooltipBehavior,ss.IDisposable]);ss.initClass(v,a,{updateSearchTextValue:function(G){this.$s(G,true)},$s:function(G,H){tab.MapsSearchView.prototype.updateSearchTextValue.call(this,G);if(H===true){this.selectAllSearchText()}},$n:function(G){this.$u=true},$o:function(G){this.$u=false},$p:function(G){if(!this.$u){return}this.$u=false;if(this.get_compositeSearchWidget().get_isShowingInitialSearchText()){return}var H=this.get_compositeSearchWidget().get_textInputView().get_inputElement().prop('selectionStart');var I=this.get_compositeSearchWidget().get_textInputView().get_inputElement().prop('selectionEnd');if(ss.isValue(H)&&ss.isValue(I)&&!ss.referenceEquals(H,I)){return}this.selectAllSearchText()},$r:function(G){if(ss.isValue(this.$t)&&!ss.referenceEquals(this.$t,G)){this.$t.set_highlighted(false)}this.$t=G;if(ss.isValue(G)){G.set_highlighted(true);var H=G.get_data();this.$s(H,false)}},handleEnterKeyPress:function(){if(ss.isValue(this.$t)){this.mapsSearchViewModel.moveMapToCandidateBounds(this.$t.get_data());this.get_compositeSearchWidget().removeList();return}tab.MapsSearchView.prototype.handleEnterKeyPress.call(this)},$q:function(){if(ss.isNullOrUndefined(this.get_compositeSearchWidget().get_listViewModel())||ss.isValue(this.queryDelayTimer)||ss.isValue(this.$t)){return}var G=this.get_compositeSearchWidget();G.highlightNextListItem(false)},handleSearchButtonClick:function(){tab.MapsSearchView.prototype.handleSearchButtonClick.call(this);if(this.get_gotoMyLocationButtonEnabled()){this.setGeoLocationButtonVisibility(!this.get_isCollapsed())}},collapseSearchWidget:function(){tab.MapsSearchView.prototype.collapseSearchWidget.call(this);if(this.get_gotoMyLocationButtonEnabled()){this.setGeoLocationButtonVisibility(!this.get_isCollapsed())}}},tab.MapsSearchView,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[tab.MapsSearchViewModel]),spiff.IListItemContentCreator]);ss.initClass(w,a,{},tab.PaneTableTemplate,[ss.IDisposable]);ss.initClass(x,a,{get_inputHandlers:function(){return this.$1P},get_domWeb:function(){return this.$1H},get_responsiveMouseHandler:function(){return this.$1Z},$1F:function(G){if(this.isMapWithBaseLayer()&&G<1&&!tab.MapUtil.allowZoomAtCurrentLevel(this.get_paneTableVM().get_mapServerModel().get_zoom(),1/G)){return}var H=this.resolvePane({x:1,y:1});this.disposeOfOverlays();this.getWebRegion('viz').$T(H,G)},initEventHandlers:function(){var G=null;var H=ss.mkdel(this,function(){G=tab.MiscUtil.dispose$1(G);tab.PaneTableView.prototype.initEventHandlers.call(this)});G=spiff.EventUtil.bindWithDispose(this.dom.get_domRoot(),'mouseenter',H);this.disposables.add$1(G)},getDomNodeForContentRegion:function(G){return G.get(0)},makeFloatingZoomToolbar:function(G){var H=new q(this);var I=10;if(this.get_mapsSearchEnabled()){I+=41}var J=new p(G.get(0),H,this.determineToolbarType(),I,this.get_mapsSearchEnabled());J.addClass('tabSuppressVizTooltipsAndOverlays');return J},connectTooltipEventHandlers:function(){tab.PaneTableView.prototype.connectTooltipEventHandlers.call(this);this.get_vizToolTip().add_mouseExitedTooltip(ss.mkdel(this,this.$1r))},makeConnections:function(){this.$1H.scrollX.scroll(ss.mkdel(this,function(G){this.$1A()}));this.$1H.scrollY.scroll(ss.mkdel(this,function(G){this.$1B()}));this.dom.get_domRoot().bind(tab.BrowserSupport.get_mouseWheelEvent(),ss.mkdel(this,function(G){this.$1t(G)}));this.dom.get_domRoot().mouseout(ss.mkdel(this,function(G){this.onMouseOut(G)}));this.dom.get_domRoot().mousemove(ss.mkdel(this,function(G){this.onMouseMove(G)}));this.dom.view.mouseover(ss.mkdel(this,function(G){this.onViewMouseOver(G)}));this.dom.view.mouseout(ss.mkdel(this,function(G){this.onViewMouseOut(G)}));this.dom.view.mousemove(ss.mkdel(this,function(G){this.onViewMouseMove(G)}));this.dom.get_domRoot().attr('tabindex','-1');this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.dom.get_domRoot(),'keyup',ss.mkdel(this,this.$1p)))},makeMapsSearchViewConnections:function(){if(ss.isValue(this.mapsSearchView)){var G=this.mapsSearchView.get_compositeSearchWidget().get_textInputView().get_inputElement();G.focusin(ss.mkdel(this,function(H){this.checkForSuppressTooltipsAndOverlays(H.target)}));G.focusout(ss.mkdel(this,function(H){this.checkForSuppressTooltipsAndOverlays(H.relatedTarget)}));G.keypress(ss.mkdel(this,function(H){this.checkForSuppressTooltipsAndOverlays(H.target)}))}},makeRegions:function(){var G=this.listNonVizRegions();var H=this.makeHoverAPI();ss.clearKeys(this.regions);var I=function(){return false};var J=ss.getEnumerator(Object.keys(G));try{while(J.moveNext()){var K=J.current();var L=G[K];this.regions[K]=new C(K,L.get(0),this.get_session(),H,this.$1H.scrollX,this.$1H.scrollY,I,this.get_sheetid(),this.get_paneTableVM())}}finally{J.dispose()}var M=ss.mkdel(this,this.allowPanZoom);var N=this.dom.view.children().first();this.regions['viz']=new C('viz',N.get(0),this.get_session(),H,this.$1H.scrollX,this.$1H.scrollY,M,this.get_sheetid(),this.get_paneTableVM())},getWebRegion:function(G){return ss.safeCast(this.regions[G],C)},makeTooltip:function(){var G=null;if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){G=new tab.TooltipContextProvider(this.get_paneTableVM().get_visualModel().get_selectionsModel())}var H=this.get_paneTableVM().get_visualModel().get_tooltipMode();var I=ss.isNullOrUndefined(tsConfig.allow_tooltip)||tsConfig.allow_tooltip;if(I&&H==='smooth'){return new tab.TooltipResponsiveMode(G,this.get_visualId(),this.dom.view)}else if(I&&H==='sticky'){return new D(G,this.get_visualId())}else{return new tab.TooltipDisabledMode(G,this.get_visualId())}},cancelHover:function(){},makeInputHandlers:function(){var G;ss.clearKeys(this.$1P);var H=this.listNonVizRegions();var I=_.keys(H);for(var J=0;J<I.length;J++){var K=I[J];var L=H[K];G=this.makeMouseSpec(this.getWebRegion(K));this.$1P[K]=new spiff.TableauEventHandler.$ctor1(L.get(0),G)}G=this.makeMouseSpec(this.getWebRegion('viz'));var M=this.dom.view.children().first();this.$1P['viz']=new spiff.TableauEventHandler.$ctor1(M.get(0),G);if(tab.FeatureParamsLookup.getBool(37)===true){var N={};N.hoverDelay=20;N.hover=ss.mkdel(this,function(R){this.get_vizHitTester().update(R)});var O=ss.mkdel(this,function(R){this.onHitTestUpdated(this.getWebRegion('viz'),R)});this.vizHitTester.add_updated(O);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.vizHitTester.remove_updated(O)})));this.$25=new spiff.TableauEventHandler.$ctor1(M.get(0),N);this.disposables.add$1(this.$25)}var P={};spiff.TableauEventHandler.setHandler(P,'dragStart',function(R){});this.$1J=new spiff.TableauEventHandler.$ctor1(document.body,P);this.disposables.add$1(this.$1J);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var Q={};Q.hover=ss.mkdel(this,function(R){this.$1n(this.getWebRegion('viz'),R)});Q.hoverDelay=0;this.$1Z=new spiff.TableauEventHandler.$ctor1(M.get(0),Q);this.disposables.add$1(this.$1Z)}if(tab.FeatureParamsLookup.getBool(30)===true){this.$1e()}M.addClass('tvmodeRectSelect')},$1e:function(){var G=this.listNonVizRegions();var H=ss.mkdel(this,function(I){var J={};J.hover=ss.mkdel(this,function(K){this.$1m(this.getWebRegion(I),K)});J.hoverDelay=0;J.firstTouch=ss.mkdel(this,function(K){this.$1y(this.getWebRegion(I))});this.disposables.add$1(new spiff.TableauEventHandler.$ctor1(G[I].get(0),J));G[I].mouseout(ss.mkdel(this,function(K){this.$1s(I)}))});H('xheader');H('yheader');H('topaxis');H('bottomaxis')},makeHoverAPI:function(){if(ss.isNullOrUndefined(this.$1N)){this.$1N=new r(this);this.disposables.add$1(this.$1N)}return this.$1N},makeMouseSpec:function(G){var H={};H.hover=ss.mkdel(this,function(K){this.$1o(G,K)});H.hoverDelay=(tab.ApplicationModel.get_instance().get_isLocalRenderMode()?120:150);var I=this.get_paneTableVM().get_visualModel().get_tooltipMode();if(I!=='sticky'){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&G.get_regionPart()==='viz'){H.hoverDelay=0}else{var J=tab.FeatureParamsLookup.getInt(12);H.hoverDelay=(ss.isValue(J)?ss.unbox(J):120)}}H.firstTouch=ss.mkdel(this,function(K){this.$1l(G,K)});H.tap=ss.mkdel(this,function(K){this.$1z(G,K)});H.doubleTap=ss.mkdel(this,function(K){this.$1h(G,K)});H.lastTouch=ss.mkdel(this,function(K){this.$1q(G,K)});if(G.get_regionPart()==='viz'){H.dragStart=ss.mkdel(this,function(K){this.dragOverride(K,ss.mkdel(this,function(L){this.$1k(G,K)}))});if(tsConfig.allow_filter){H.press=ss.mkdel(this,function(K){this.$1w(G,K)});H.potentialTap=ss.mkdel(this,function(K){this.$1v(G,K)});H.cancelPotentialTap=ss.mkdel(this,function(K){this.$1g(G,K)});H.pressDragStart=ss.mkdel(this,function(K){this.dragOverride(K,ss.mkdel(this,function(L){this.$1x(G,K)}))})}}return H},makeRegionContentProviders:function(){var G=ss.mkdel(this,function(H,I){this.regions['viz'].reset()});this.makeRegionContentProvidersHelper(this.dom.view.children().first(),G);this.$21=this.makeTiledWindow(this.$1H.scrollY,null,null,null,null);this.$20=this.makeTiledWindow(this.$1H.scrollX,null,null,null,null)},makeTiledWindow:function(G,H,I,J,K){return this.makeTiledWindowHelper(G,H,I,J,K,true)},shouldInformTooltipOfLocalTapOnViz:function(){return true},refreshScrollingAndDrilling:function(){var G=this.$1X;this.$1X=null;if(typeof(G)==='function'){G()}if(ss.isValue(this.$1M)){this.$1M.onUpdate()}if(ss.isValue(this.$23)){this.$23.onUpdate()}},destroyRegions:function(){tab.PaneTableView.prototype.destroyRegions.call(this);this.$21.destroy();this.$20.destroy()},destroyInputHandlers:function(){var G=ss.getEnumerator(Object.keys(this.$1P));try{while(G.moveNext()){var H=G.current();this.$1P[H].dispose();this.$1P[H]=null}}finally{G.dispose()}ss.clearKeys(this.$1P);if(ss.isValue(this.vizTooltip)){this.vizTooltip.remove_mouseExitedTooltip(ss.mkdel(this,this.$1r))}this.$1C()},refreshImages:function(G){tab.PaneTableView.prototype.refreshImages.call(this,G);this.$21.refreshImages(G);this.$20.refreshImages(G)},onTooltipClosed:function(){tab.PaneTableView.prototype.onTooltipClosed.call(this);this.disposeOfOverlayImages();this.$Y(false)},$1r:function(G){var H=tab.DomUtil.getDojoCoordsJQ(this.dom.view);if(H.x>G.x||H.x+H.w<=G.x||H.y>G.y||H.y+H.h<=G.y){this.disposeOfOverlays();if(this.get_vizToolTip().get_isTooltipShown()){this.get_vizToolTip().clearTooltipWithFakeHover()}}},onViewMouseOver:function(G){this.$1R=true;this.showFloatingZoomToolbar(true);if(ss.isValue(this.mapsSearchView)&&this.get_mapsSearchEnabled()){this.mapsSearchView.set_isVisible(true)}this.checkForSuppressTooltipsAndOverlays(G.target)},$1b:function(G){var H=tab.DomUtil.getDojoCoordsJQ(this.dom.get_domRoot());return x.$1(H,G)},$1c:function(G){var H=tab.DomUtil.getDojoCoordsJQ(this.dom.view);return x.$1(H,G)},isPointOutsideOfRelevantVizRegions:function(G){if(!this.$1c(G)){return false}if(!x.$1(tab.DomUtil.getDojoCoordsJQ(this.dom.yLabel),G)){return false}if(!x.$1(tab.DomUtil.getDojoCoordsJQ(this.dom.xLabel),G)){return false}if(!x.$1(tab.DomUtil.getDojoCoordsJQ(this.dom.caption),G)){return false}if(!x.$1(tab.DomUtil.getDojoCoordsJQ(this.dom.leftAxis),G)){return false}if(!x.$1(tab.DomUtil.getDojoCoordsJQ(this.dom.rightAxis),G)){return false}if(!x.$1(tab.DomUtil.getDojoCoordsJQ(this.dom.bottomAxis),G)){return false}if(!x.$1(tab.DomUtil.getDojoCoordsJQ(this.dom.topAxis),G)){return false}return true},onMouseOut:function(G){if(this.$1b(G)){if(ss.isValue(this.$23)){this.$23.hideSortIndicator()}if(ss.isValue(this.$1M)){this.$1M.turnDrillWidgetsOff()}}if(this.isPointOutsideOfRelevantVizRegions(G)){this.get_vizToolTip().clearTooltipWithFakeHover();this.$Z()}},$Z:function(){if(!this.$1L){this.disposeOfOverlayImages()}},onMouseMove:function(G){var H=this.get_vizToolTip();if(H.get_isTooltipShown()&&!H.shownTooltipIsStatic()&&this.$1c(G)){var I=tab.DomUtil.getDojoCoordsJQ(this.dom.view);H.hoverOverWhitespace({x:I.x,y:I.y},'viz')}},onViewMouseOut:function(G){this.$1R=false;var H=this.get_vizToolTip();if(this.$1c(G)){this.showFloatingZoomToolbar(false);if(ss.isValue(this.mapsSearchView)){this.mapsSearchView.set_isVisible(false)}if(H.get_isTooltipShown()&&!H.shownTooltipIsStatic()){var I=tab.DomUtil.getDojoCoordsJQ(this.dom.view);H.hoverOverWhitespace({x:I.x,y:I.y},'viz')}}if(!H.get_isTooltipShown()){this.$Z()}this.checkForSuppressTooltipsAndOverlays(G.relatedTarget);this.get_vizToolTip().onMouseLeaveTheView()},onViewMouseMove:function(G){this.$1R=true;this.checkForSuppressTooltipsAndOverlays(G.target)},setupSortIndicators:function(){this.$23=new z(this,this.get_dom().get_domRoot().get(0));this.disposables.add$1(this.$23)},setupDrilling:function(){this.$1M=new o(this,this.get_dom().get_domRoot().get(0));this.disposables.add$1(this.$1M)},setRegionGeometryHelper:function(G,H){if(ss.isValue(G)&&G.children().first().hasClass('tvScrollContainer')){tab.DomUtil.setAbsolutePositionBox(G.children().first(),{l:0,t:0,w:H.w,h:H.h})}},setGeometryForWebScrollbars:function(G,H,I,J,K,L,M,N,O,P){var Q=null,R=null;if(ss.isValue(I)&&I>0){var S=Math.max(tab.Metrics.get_minScrollHeight(),G);tab.DomUtil.setAbsolutePositionBox(this.$1H.scrollY,{l:L,t:K,w:I,h:S});this.$1H.scrollY.css('display','')}else{this.$1H.scrollY.css('display','none')}if(ss.isValue(J)&&J>0){var T=Math.max(tab.Metrics.get_minScrollWidth(),H);tab.DomUtil.setAbsolutePositionBox(this.$1H.scrollX,{l:N,t:M,w:T,h:J});this.$1H.scrollX.css('display','')}else{this.$1H.scrollX.css('display','none')}if(this.$1H.scrollY.css('display')!=='none'){Q={x:0,y:0,w:1,h:O,r:null}}this.$21.reset(Q,this.geometry.ts);if(this.$1H.scrollX.css('display')!=='none'){R={x:0,y:0,w:P,h:1,r:null}}this.$20.reset(R,this.geometry.ts)},maybeShowOverlayImages:function(G){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var H=null;if(ss.isValue(G)&&tab.BrowserSupport.get_dataUri()&&ss.isValue(G.overlayImage)){H=this.createOverlayImageFromDataUri(G.overlayImage)}else if(ss.isValue(G.overlayImageKey)){H=this.createOverlayImageFromFile(G.overlayImageKey)}this.showOverlayImages(H,G.overlayAnchors)}},$1d:function(G){return ss.isValue(G)&&G!==0},$1f:function(G){var H,I;var J=G['wheelDeltaY'];var K=G['wheelDeltaX'];var L=G['deltaY'];var M=G['deltaX'];var N=G['detail'];if(this.$1d(N)){var O=G['axis'];var P=G['HORIZONTAL_AXIS'];I=(ss.referenceEquals(O,P)?0:N);H=(ss.referenceEquals(O,P)?N:0)}else if(this.$1d(J)||this.$1d(K)){if(tab.BrowserSupport.get_isSafari()&&tab.BrowserSupport.get_safariVersion()>=7){var Q=Math.abs(K);var R=Math.abs(J);var S=Math.max(Q,R);if(this.$1Q){if(S%3===0){K=ss.Int32.div(K,3);J=ss.Int32.div(J,3)}}else if(S%12===0){K=((K<0)?-120:120);J=((J<0)?-120:120)}}I=-J;H=-K}else if(this.$1d(L)||this.$1d(M)){var T=(this.$1Q?3:40);I=T*L;H=T*M}else{I=-G['wheelDelta'];H=0}return{x:H,y:I}},$U:function(G){if(G%tab.MapUtil.defaultWheelDeltaIncrement!==0){var H=Math.abs(G);var I=ss.Int32.div(H,tab.MapUtil.defaultWheelDeltaIncrement)+1;if(G<0){I*=-1}G=tab.MapUtil.defaultWheelDeltaIncrement*I}return G},$1E:function(){this.$27={x:0,y:0};this.$1W=0;this.$1G=null;this.$1V=0;this.$1U=null;this.$22=true;this.$1Q=false},$1t:function(G){var H=null;if(ss.isValue(G['originalEvent'])){H=G['originalEvent']}var I=this.$1f(H);if(tab.FeatureFlags.isEnabled('ZoomToCursor')&&this.isOneVisiblePane()&&this.isMap&&this.allowPanZoom()){this.$1a(I.y,H['deltaY']);if(this.$1Q){I.y=this.$U(I.y);this.$1W++;if(this.$1W%tab.MapUtil.touchEventSamplingRate!==0){G.preventDefault();return}}if(this.$1S){G.preventDefault();return}this.$27.y+=I.y;if(!this.$1c(G)){var J=this.getWebRegion('viz');var K=this.$17(J,H);this.$W(K,J,G);return}}var L=this.$1H.scrollY.scrollTop();var M=this.$1H.scrollX.scrollLeft();this.$1H.scrollY.scrollTop(L+I.y);this.$1H.scrollX.scrollLeft(M+I.x);var N=this.$1H.scrollY.scrollTop();var O=this.$1H.scrollX.scrollLeft();if(L!==N){this.$15(N);G.preventDefault()}if(M!==O){this.$14(O);G.preventDefault()}this.get_vizToolTip().onScroll();this.disposeOfOverlays()},$W:function(G,H,I){if(ss.isNullOrUndefined(this.$1G)){if(H.mapIsBrowserRendered()){this.$1U=H.getPointLatLong(G)}this.$1G=G}if(H.mapIsBrowserRendered()){this.$1V=ss.Int32.div(this.$27.y,tab.MapUtil.defaultWheelDeltaIncrement)*tab.MapUtil.minimumZoomLevelIncrement}var J=this.get_paneTableVM().get_mapServerModel();var K=(J.get_hasPresModel()?J.get_zoom():1);var L=tab.MapUtil.calculateZoomFactor(this.$27.y);if(H.mapIsBrowserRendered()&&!tab.MapUtil.allowZoomAtCurrentLevelLeaflet(K,this.$1V)||!tab.MapUtil.allowZoomAtCurrentLevel(K,L)){this.$1V=K;L=tab.MapUtil.getZoomFactorForDesiredZoomLevel(K,0);this.$27.y=tab.MapUtil.getScrollDeltaForZoomFactor(L)}this.$11();this.$28=window.setTimeout(ss.mkdel(this,function(){this.$1S=true;H.get_viewSession().zoomWithAnchorPoint(H.get_regionPart(),this.$1G,L,ss.mkdel(this,function(){this.$1S=false}));this.$1E()}),500);if(!this.$1S){this.$X(H,K,L);I.preventDefault()}},$X:function(G,H,I){this.isAnimationOccurring=true;var J=this.resolvePane(this.$1G);if(G.mapIsBrowserRendered()){var K=H-this.$1V;G.animateAnchorZoomLeaflet(J,this.$1U,K)}else{G.animateAnchorZoom(J,this.$1G,I)}this.disposeOfOverlays()},$1a:function(G,H){if(this.$22){var I=(tab.BrowserSupport.get_isFF()?Math.abs(H):Math.abs(G));if(I>0&&I<12){this.$1Q=true}this.$22=false}},$17:function(G,H){var I=ss.round(H['clientX']);var J=ss.round(H['clientY']);var K={x:I,y:J};var L=G.toLocalCoords(K,false);return L},$1B:function(){this.get_vizToolTip().onScroll();this.$15(this.$1H.scrollY.scrollTop())},$15:function(G){for(var H=0;H<tab.PaneTableView.scrollableYRegions.length;H++){var I=tab.PaneTableView.scrollableYRegions[H];this.getWebRegion(I).setYPos(G)}var J={x:this.$1H.scrollX.scrollLeft(),y:G};this.set_scrollPosition(J)},$14:function(G){for(var H=0;H<tab.PaneTableView.scrollableXRegions.length;H++){var I=tab.PaneTableView.scrollableXRegions[H];this.getWebRegion(I).setXPos(G)}var J={x:G,y:this.$1H.scrollY.scrollTop()};this.set_scrollPosition(J)},$1A:function(){this.get_vizToolTip().onScroll();this.$14(this.$1H.scrollX.scrollLeft())},$1p:function(G){if(this.getWebRegion('viz').get_isDragTracking()){return}if(!ss.referenceEquals(G.target,this.get_element().get(0))&&!ss.referenceEquals(G.target,this.dom.view.find('.tvimagesContainer').get(0))){return}var H=this.defaultPointerToolMode();switch(G.which){case 68:{H='lasso-selection';break}case 83:{H='radial-selection';break}case 65:{H='rectangular-selection';break}default:{return}}if(H===this.getWebRegion('viz').get_currentPointerToolMode()){H=this.defaultPointerToolMode()}var I=tab.FeatureFlags.isEnabled('StickyMapTools')||G.shiftKey;if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.setToolMode(H,I)}else{this.setPointerToolMode(H,I)}},checkForHoverOverlay:function(){this.$Y(true)},$Y:function(G){if(ss.isValue(this.$1T)&&this.$1R){this.$18(G)}else{this.disposeOfOverlayImages()}},$18:function(G){var H=this.getWebRegion('viz');var I=H.hitTestSingleMarksAndVisualParts(this.$1T);H.setMouseOverMarkOrVisualPart(I.get_hitType()!==0);if(I.get_hitType()===0){this.hoverOverWhitespace()}if(I.get_shouldRenderOverlay()){if(!G){this.updateOverlayForLastTargetState(I.get_id(),I.get_overlayTargetType())}else{this.updateOverlayTarget(I.get_id(),'hover',I.get_overlayTargetType())}}else{this.disposeOfOverlayImages()}},$1m:function(G,H){if(this.isUserDragging()||!tab.ApplicationModel.get_instance().get_isLocalRenderMode()||ss.isNullOrUndefined(G.get_contentProvider())){return}var I=G.toLocalCoordsEvent(H);var J=G.hitTestNodes(I);if(ss.isValue(J)){J=(tab.SelectionUtils.isCategoricalAndTupleAssociatedHeader(J.ZHX,J.wwF)?J:null)}var K=tab.ModelUtils.regionToVisualPartMap[G.get_regionPart()];this.updateHoveredCategoricalHeaders(J,'hover',K)},$1y:function(G){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()||ss.isNullOrUndefined(G.get_contentProvider())){return}var H=tab.ModelUtils.regionToVisualPartMap[G.get_regionPart()];this.updateHoveredCategoricalHeaders(null,'press',H)},$1s:function(G){var H=tab.ModelUtils.regionToVisualPartMap[G];var I=this.get_paneTableVM().get_vizRegionMap()[H];if(ss.isValue(I)){I.set_hoveredCategoricalNode(null)}},isUserDragging:function(){return spiff.DragDropManager.get_isDragging()||C.isDragTrackingInAnyRegion},$1n:function(G,H){if(this.isUserDragging()){return}if(this.$26){this.$26=false;return}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&G.get_regionPart()==='viz'){if(!this.isAnimationOccurring&&(G.isSelectingToolActive()||!G.get_isDragTracking()&&G.get_currentPointerToolMode()==='pan-map')){var I=G.toLocalCoordsEvent(H);var J={x:H.pageX,y:H.pageY};this.$1T=I;if(this.get_vizToolTip().isHoverAllowed(J)){this.$18(true)}}else{this.$1T=null}}},$1o:function(G,H){if(this.isUserDragging()){return}if(tab.CommandController.get().get_legacySession().get_waitHandler().isBusy()){return}var I=this.get_vizToolTip();if(I.get_isTooltipShown()&&I.shownTooltipIsStatic()){return}var J=G.toLocalCoordsEvent(H);var K=tab.PointUtil.add(J,tab.RecordCast.dojoCoordsAsPoint(G.getLocalOffset()));if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var L=false;if(G.get_regionPart()==='viz'){this.$10();G.get_shapeSelector().setSingleSelectPoint(J);var M=this.getWebRegion('viz');var N=M.hitTestSingleMarksAndVisualParts(J);L=N.get_hitType()!==0;M.setMouseOverMarkOrVisualPart(L);if(L){switch(N.get_hitObjectType()){case 5:case 6:{var O=this.get_paneTableVM().get_scene().getMarkBoundingBox(N.get_id());J=x.$0(J,O);var P=this.get_paneTableVM().get_visualModel().get_selectionsModel();var Q=P.get_tupleSelection().isMarkSelected(N.get_id());var R=this.get_paneTableVM().get_scene().getPaneDrawInfoFromTupleId(N.get_id());var S=R.get_paneDescriptorKey();I.hoverOverObject(K,tab.PointUtil.add(J,{x:this.get_geometry().viz.x,y:this.get_geometry().viz.y}),J,N.get_id(),Q,S,'mark',G.get_regionPart());break}case 3:case 4:case 2:{this.$24=window.setTimeout(function(){I.hoverOverCoordinates(K,J,'visualparts',G.get_regionPart())},120);break}default:{break}}}}else if(ss.isValue(G.get_contentProvider())){var T=G.hitTestNodes(J);if(ss.isValue(T)){var U={};U.ZHX=T.ZHX;U.wwF=T.wwF;var V=tab.BrushingComputer.getTuplesAssociatedWithSelectedNodes(this.get_paneTableVM().get_visualModel(),[U]);I.hoverOverHeader(K,J,'header',G.get_regionPart(),V);L=true}}if(!L){I.hoverOverWhitespace(K,G.get_regionPart())}}else{var W=tab.PaneTableView.guessTooltipTargetTypeFromRegion(G.get_regionPart());I.hoverOverCoordinates(K,J,W,G.get_regionPart())}},$1u:function(G,H){this.get_vizToolTip().onMoving();this.disposeOfOverlays()},$1l:function(G,H){if(ss.isValue(this.mapsSearchView)){this.mapsSearchView.get_compositeSearchWidget().removeList()}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&G.get_regionPart()==='viz'){var I=G.toLocalCoordsEvent(H);var J=this.getWebRegion('viz');var K=J.hitTestSingleMarksAndVisualParts(I);if(K.get_shouldRenderOverlay()){this.$26=true;this.updateOverlayTarget(K.get_id(),'press',K.get_overlayTargetType())}}},$16:function(){var G=this.get_paneTableVM().get_selectionsModel().get_allLegendSelections();for(var H=0;H<G.length;H++){var I=G[H];if(!I.get_isEmpty()){return true}}return false},isSelectActionOnVizAllowed:function(G){return G==='simple'||!this.$16()},onHitTestUpdated:function(G,H){this.$13();if(this.getVizDragApproval(H)){var I=G.toLocalCoords(H.get_pageCoordinates());this.$12(I)}},$12:function(G){var H=$('<div class="tabDragIcon" ></div>');if(tab.BrowserSupport.get_isIE()){H.css('cursor','alias')}else{H.css('cursor','-webkit-grab');H.css('cursor','-moz-grab');H.css('cursor','grab')}H.css('position','absolute');H.css('top',G.y-20+'px');H.css('left',G.x-20+'px');H.css('height',40+'px');H.css('width',40+'px');var I=this.makeMouseSpec(this.getWebRegion('viz'));this.get_dom().view.children().first().append(H);this.$1K=new spiff.TableauEventHandler.$ctor1(H.get(0),I)},disposeOfOverlays:function(){this.$13();tab.PaneTableView.prototype.disposeOfOverlays.call(this)},$13:function(){this.$1K=tab.MiscUtil.dispose$1(this.$1K);this.get_dom().view.children().first().children('.tabDragIcon').remove()},$1z:function(G,H){if(this.$1O){this.$1O=false;return}H.stopPropagation();this.get_vizToolTip().onTap();this.$1Y=false;if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.disposeOfOverlays()}if(H.originalEvent['button']>1){return}var I=G.toLocalCoordsEvent(H);var J=tab.PointUtil.add(I,tab.RecordCast.dojoCoordsAsPoint(G.getLocalOffset()));var K;if(G.get_regionPart()==='viz'){K=tab.ResolveSelectAction.fromNormalizedEvent(H,false,true)}else{K=tab.ResolveSelectAction.fromNormalizedEvent(H)}if(this.allowPanZoom()&&G.isZoomToolActive()){var L=this.resolvePane(G.toLocalCoordsEvent(H));G.$S(H,L);return}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.handleLocalTap(G,K,J,I)}else{var M=ss.mkdel(this,function(){if(!tsConfig.allow_select){this.makeHoverAPI().unsuppressHover(G)}var O=tab.PaneTableView.guessTooltipTargetTypeFromRegion(G.get_regionPart());this.get_vizToolTip().singleSelectCoordinates(J,I,G.get_regionPart(),O)});var N={x:I.x,y:I.y,w:0,h:0};tab.SelectionClientCommands.selectRectRegionAndDoUbertip(G.get_regionPart(),N,K,this.get_paneTableVM().get_visualId(),M);this.dom.get_domRoot().focus()}},$1h:function(G,H){this.$1Y=false;var I=((H.shiftKey&&!spiff.EventUtil.isCtrlKey(H))?0.5:2);this.doDoubleTap(G,H,I)},$1k:function(G,H){var I=this.resolvePane(G.toLocalCoordsEvent(H));this.$19();if(!tsConfig.allow_filter){this.setPointerToolMode(G.get_currentPointerToolMode(),false)}else{switch(G.get_currentPointerToolMode()){case'pan-map':case'area-zoom':case'zoom-out':{var J=(tab.FeatureFlags.isEnabled('StickyMapTools')?!H.shiftKey:this.isPointerToolLocked);this.setPointerToolMode(G.get_currentPointerToolMode(),J);break}}}this.$1D(G);if(ss.isValue(this.$1M)){this.$1M.set_enabled(false)}if(ss.isValue(this.$23)){this.$23.set_enabled(false)}if(ss.isValue(this.mapsSearchView)){this.mapsSearchView.enableUserInteraction(false)}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.enableUserInteraction(false)}G.$r(H,I)},$1i:function(G){var H=this.getWebRegion('viz');H.$q(G);if(H.isSelectingToolActive()){this.checkForDragOverlays();this.$1L=true}},$1j:function(G){this.$1O=G.type==='mousedown';this.get_vizToolTip().onDragEnd(null);this.disposeOfOverlays();this.$1L=false;this.getWebRegion('viz').$p(G,this.get_vizToolTip());this.$1C();if(!this.isPointerToolLocked){this.resetPointerToolMode()}if(ss.isValue(this.$1M)){this.$1M.set_enabled(true)}if(ss.isValue(this.$23)){this.$23.set_enabled(true)}if(ss.isValue(this.mapsSearchView)){this.mapsSearchView.enableUserInteraction(true)}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.enableUserInteraction(true)}},$1w:function(G,H){if(tab.FeatureFlags.isEnabled('StickyMapTools')||this.$1L||!G.$w()||!this.allowPanZoom()){return}this.$1O=false;G.setPointerToolMode('pan-map');this.get_vizToolTip().onPress();this.$10();this.disposeOfOverlays()},$1x:function(G,H){var I=this.resolvePane(G.toLocalCoordsEvent(H));this.$19();G.$r(H,I);this.$1D(G)},$1v:function(G,H){this.$1Y=true},$1g:function(G,H){this.$1Y=false;if(!this.isPointerToolLocked){this.resetPointerToolMode()}},$1q:function(G,H){if(!this.$1Y&&!this.isPointerToolLocked){this.resetPointerToolMode()}},$1D:function(G){this.$1T=null;this.get_vizToolTip().onPanOrDragStart(null);this.$13();if(!G.isSelectingToolActive()){this.disposeOfOverlays()}},$1C:function(){var G={};spiff.TableauEventHandler.removeHandler(G,'dragMove');spiff.TableauEventHandler.removeHandler(G,'dragEnd');if(ss.isValue(this.$1J)){this.$1J.update(G)}this.$1I=tab.MiscUtil.dispose$1(this.$1I)},$19:function(){var G={};spiff.TableauEventHandler.setHandler(G,'dragMove',ss.mkdel(this,this.$1i));spiff.TableauEventHandler.setHandler(G,'dragEnd',ss.mkdel(this,this.$1j));this.$1J.update(G);tab.WindowHelper.clearSelection();tab.MiscUtil.dispose$1(this.$1I);this.$1I=new spiff.Glass;this.$1I.show();var H=this.getWebRegion('viz');H.setCursor(H.determineDragSelectionCursor(),this.$1I.get_element())},$10:function(){if(ss.isValue(this.$24)){window.clearTimeout(ss.unbox(this.$24));this.$24=null}},$11:function(){if(ss.isValue(this.$28)){window.clearTimeout(ss.unbox(this.$28));this.$28=null}},allowPanZoom:function(){return this.$V('other')},allowPanZoomOnDoubleTap:function(){return this.$V('doubleTap')},$V:function(G){if(!tsConfig.allow_filter){return false}if(this.get_paneTableVM().get_visualModel().get_vizNavigationSetting()==='fixed'){return false}if(ss.isNullOrUndefined(this.geometry)){return false}var H=this.geometry.pi;switch(G){case'doubleTap':{return H.hasXQAxis&&H.hasYQAxis}case'other':default:{return H.hasXQAxis||H.hasYQAxis}}}},tab.PaneTableView,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[tab.PaneTableViewModel])]);ss.initClass(z,a,{get_widgetFeatureEnabled:function(){return ss.isValue(this.$q)&&tsConfig.allow_filter},dispose:function(){this.$n=null;this.$o.get_element().remove();this.$o.dispose();y.prototype.dispose.call(this)},onUpdate:function(){if(!ss.staticEquals(this.$r,null)){this.$r();this.$r=null}this.$s=this.$n.get_visibleGeometry();this.$q=this.$n.get_sortIndicators()},hideSortIndicator:function(){if(!this.$b()){return}var G=new RegExp('(sortInd\\w+)?','g');this.$l.get(0).className=this.$l.get(0).className.replace(G,'');this.$l.css('display','none');this.$p=null},onMouseMove:function(G){this.$a(G)},isActiveInRect:function(G){if(ss.isValue(this.$p)&&this.$p.$1&&tab.RectXYUtil.intersectsWith(G,this.$m)){return true}return false},$g:function(){this.$q=this.$n.get_sortIndicators();this.set_enabled(true)},$9:function(){this.$l.click(ss.mkdel(this,function(G){this.$c(G)}));this.$l.mouseover(ss.mkdel(this,function(G){this.$e(G)}));this.$l.mouseout(ss.mkdel(this,function(G){this.$d(G)}))},$a:function(G){if(G.button>0){return}if(ss.isNullOrUndefined(this.$q)||!tsConfig.allow_filter){return}var H=this.$n.get_posTV();var I={x:G.pageX-H.x,y:G.pageY-H.y};var J=this.$n.get_domWeb().scrollX.get(0);var K=this.$n.get_domWeb().scrollY.get(0);var L={x:J.scrollLeft,y:K.scrollTop};var M=this.$s;var N=this.regionHitTest(this.$s,I);if(ss.isValue(N)){this.$f(this.getSIRegionFromName(this.$n,N),M[N],I,L)}else{this.hideSortIndicator()}},$j:function(G,H,I){var J;var K=G.Yds[H];var L=this.$p;if(!G.oAu){J=((K.rei==='asc')?'Left':'Right')}else{J=((K.rei==='asc')?'Up':'Down')}var M=(K.bBh?'Solid':'Hollow');this.$p=new d(G,K,H,J,M,I);if(ss.isNullOrUndefined(L)||!ss.referenceEquals(L.$0,J)||!ss.referenceEquals(L.$5,M)||L.$1!==I){this.$k()}},$k:function(){if(ss.isNullOrUndefined(this.$p)){return}var G='sortInd'+this.$p.$5+this.$p.$0+(this.$p.$1?'Active':'');var H=new RegExp('(sortInd\\w+)?','g');this.$l.get(0).className=this.$l.get(0).className.replace(H,'');this.$l.addClass(G)},$i:function(){if(!this.$b()){return}var G=this.$p.$2;var H=this.$p.$4;if(!G.bBh){G.bBh=true;G.rei=H.XYI}else if(G.rei===H.XYI){G.rei=((H.XYI==='asc')?'desc':'asc')}else{G.rei=H.XYI;G.bBh=false}this.$j(H,this.$p.$3,this.$p.$1)},$e:function(G){if(this.isOtherActiveInRect(this.$m)){return}if(this.$b()&&!this.$p.$1){this.$p.$1=true;this.$k()}G.stopPropagation()},$d:function(G){if(!this.$b()){return}var H=$(this.$l.get(0)).offset();var I=$(this.$l.get(0)).outerHeight();var J=$(this.$l.get(0)).outerWidth();if(H.left>G.pageX||H.left+J<=G.pageX||H.top>G.pageY||H.top+I<=G.pageY){this.$p.$1=false;this.$k();G.stopPropagation()}},$c:function(G){G.stopPropagation();G.preventDefault();var H=this.$n.get_posTV();var I=H.x;var J=H.y;var K={x:G.pageX-I,y:G.pageY-J};var L=this.$n.get_domWeb().scrollX.get(0);var M=this.$n.get_domWeb().scrollY.get(0);var N={x:L.scrollLeft,y:M.scrollTop};var O=this.regionHitTest(this.$s,K);if(ss.isNullOrUndefined(O)){return}var P=this.getSIRegionFromName(this.$n,O);var Q=P.D$S;var R=this.$s;K.y+=Q.RAC-R[O].t;K.x+=Q.thj-R[O].l;this.$i();this.$l.addClass('clicked');this.$r=ss.mkdel(this,function(){this.$l.removeClass('clicked')});tab.SortServerCommands.sortFromIndicator(K,N,this.$n.get_visualId())},$h:function(G,H,I,J){if(this.isOtherActiveInRect(I)){return}this.$m=I;this.$j(G,H,J);this.showNodeAt(this.$l.get(0),I.y,I.x)},$b:function(){return ss.isValue(this.$p)},$f:function(G,H,I,J){if(ss.isNullOrUndefined(G)){this.hideSortIndicator();return false}if(ss.isValue(this.$p)&&ss.isValue(this.$p.$4)&&G.kuG!==this.$p.$4.kuG){this.hideSortIndicator()}var K={x:I.x,y:I.y};var L=G.D$S;K.y+=L.RAC-H.t;K.x+=L.thj-H.l;if(G.vBP){K.y+=J.y}if(G.TVg){K.x+=J.x}var M=G.Yds;for(var N=0,O=M.length;N<O;N++){if(ss.isNullOrUndefined(M[N].efv)){continue}if(ss.isNullOrUndefined(M[N]._bu)){continue}var P=tab.RecordCast.rectPresModelAsRectXY(M[N].efv);if(tab.RectXYUtil.inRect(P,K)){var Q=tab.RecordCast.rectPresModelAsRectXY(M[N]._bu);var R=this.clone(Q);R.y-=K.y-I.y;R.x-=K.x-I.x;var S={x:R.x+2,y:R.y+2};var T={x:R.x+R.w-2,y:R.y+R.h-2};if(tab.RectUtil.inRect(H,S)&&tab.RectUtil.inRect(H,T)){this.$h(G,N,R,tab.RectXYUtil.inRect(R,K));return true}}}return false}},y,[spiff.IAppendableView,ss.IDisposable]);ss.initClass(A,a,{},tab.StepperControlView,[spiff.IAppendableView,ss.IDisposable,ss.makeGenericType(spiff.IView$1,[tab.StepperControlViewModel])]);ss.initClass(B,a,{});ss.initClass(C,a,{$U:function(){return this.$Z},get_isDragTracking:function(){return this.$10},set_isDragTracking:function(G){this.$10=G;C.isDragTrackingInAnyRegion=G},destroy:function(){this.$Y=null;tab.TiledViewerRegion.prototype.destroy.call(this)},setXPos:function(G){if(ss.isValue(this.regionContent)){this.regionContent.setXPos(G);this.backgroundMap.setScrollX(G)}},setYPos:function(G){if(ss.isValue(this.regionContent)){this.regionContent.setYPos(G);this.backgroundMap.setScrollY(G)}},reset:function(){this.resetIsWaitingOnData=false;if(this.$11.item1){this.$11={item1:false,item2:this.$11.item2};this.set_currentModifierKeyToolMode('no-tools');this.setMode(this.$11.item2)}if(this.resetIsWaitingOnTransition){return}tab.TiledViewerRegion.prototype.reset.call(this);if(this.isScrolling){this.wasScrolling=false;return}if(!this.$V){return}this.$Y.unsuppressHover(this)},setMouseOverMarkOrVisualPart:function(G){if(this.$12!==G){this.$12=G;this.$L()}},$r:function(G,H){this.$X(G,H)},$J:function(G,H){this.$N(this.get_shapeSelector());this.$M(G)},$R:function(G,H){this.$N(this.domPanZoomRect);this.$M(G);this.domPanZoomRect.set_pi(H)},$q:function(G){if(this.get_isDragTracking()){this.$13(G)}},$p:function(G,H){if(tab.FeatureFlags.isEnabled('StickyMapTools')){this.updateDefaultToolMode()}if(this.get_isDragTracking()){this.$14(G,H)}},$S:function(G,H){var I=this.toLocalCoordsEvent(G);if(!this.isZoomToolActive()){}var J=((this.get_currentPointerToolMode()==='zoom-out')?0.5:2);this.zoomPoint(H,I,J,false,null)},$s:function(G){var H=Math.floor(G.w/2)+G.x;var I=Math.floor(G.h/2)+G.y;return{x:H,y:I}},$T:function(G,H){this.zoomPoint(G,this.getCenterPoint(G),H,false,null)},$z:function(){},$P:function(G){if(ss.isValue(G)){G.hide()}},$N:function(G){if(ss.isValue(G)){G.show()}},setMode:function(G){if(this.resetIsWaitingOnData){this.$11={item1:true,item2:G};return}tab.TiledViewerRegion.prototype.setMode.call(this,G);this.$L();switch(G){case'no-tools':{this.$13=ss.mkdel(this,this.$A);this.$14=ss.mkdel(this,this.$A);this.$X=ss.mkdel(this,this.$A);this.$W=ss.mkdel(this,this.$A);break}case'rectangular-selection':case'lasso-selection':case'radial-selection':{this.$13=ss.mkdel(this,this.onMarqueeMouseMove);this.$14=ss.mkdel(this,this.$A);this.$X=ss.mkdel(this,this.$J);this.$W=ss.mkdel(this,this.$I);break}case'pan-map':{this.$13=ss.mkdel(this,this.$B);this.$14=ss.mkdel(this,this.$C);this.$X=ss.mkdel(this,this.$D);this.$W=ss.mkdel(this,this.$A);break}case'area-zoom':case'zoom-out':{this.$13=ss.mkdel(this,this.onZoomBoxMouseMove);this.$14=ss.mkdel(this,this.$F);this.$X=ss.mkdel(this,this.$R);this.$W=ss.mkdel(this,this.$Q);break}}},$w:function(){return this.get_currentPointerToolMode()===this.get_defaultPointerToolMode()},$v:function(G){return!G.shiftKey&&spiff.EventUtil.isCtrlKey(G)&&this.isSelectingToolActive()},$x:function(G){return G.altKey&&(this.isZoomToolActive()||G.shiftKey&&spiff.EventUtil.isCtrlKey(G))},$y:function(G){if(G.altKey&&!G.ctrlKey){G.preventDefault()}if(!tsConfig.allow_filter){return}var H=this.get_currentModifierKeyToolMode();var I=this.$Z;this.$Z=this.$v(G);if(!this.get_isDragTracking()){if(this.allowPanZoom()){if(C.$0(G)){this.set_currentModifierKeyToolMode('pan-map')}else if(C.$1(G)){this.set_currentModifierKeyToolMode('area-zoom')}else if(this.$x(G)){this.set_currentModifierKeyToolMode('zoom-out')}else{this.set_currentModifierKeyToolMode('no-tools')}}else{this.set_currentModifierKeyToolMode('no-tools')}}if(H!==this.get_currentModifierKeyToolMode()||I!==this.$Z){this.$L()}},startScrolling:function(G,H,I){this.stopScrolling();if(!(G!==0&&this.scroller.get_canScrollX()||H!==0&&this.scroller.get_canScrollY())){return}if(!ss.isValue(this.$15)){this.$u(G,H,I)}var J=((I==='fast')?15:200);this.$15=window.setInterval(ss.mkdel(this,function(){this.$u(G,H,I)}),J);this.isScrolling=true},stopScrolling:function(){if(ss.isValue(this.$15)){window.clearInterval(ss.unbox(this.$15))}this.$15=null;this.wasScrolling=this.isScrolling;this.isScrolling=false},$u:function(G,H,I){var J=0;var K=0;if(G!==0){J=this.$n(0,G);this.scroller.scrollX(J)}if(H!==0){K=this.$n(1,H);this.scroller.scrollY(K)}this.get_shapeSelector().shapeScrolled(J,K);this.get_shapeSelector().get_dom().css('display','');if(J===0&&G!==0||K===0&&H!==0){var L=((J===0)?0:G);var M=((K===0)?0:H);this.startScrolling(L,M,I)}},$n:function(G,H){var I=((G===0)?this.scroller.get_scrollPos().x:this.scroller.get_scrollPos().y);var J=((G===0)?this.scroller.get_maxScroll().x:this.scroller.get_maxScroll().y);var K=H*15;var L=Math.max(0,Math.min(I+K,J));return L-I},determineScrollDirection:function(G,H){var I=((G===0)?this.scroller.get_scrollPos().x:this.scroller.get_scrollPos().y);var J=((G===0)?this.scroller.get_maxScroll().x:this.scroller.get_maxScroll().y);var K=((H<0)?-1:((H>0)?1:0));if(K===-1&&I===0||K===1&&I>=J){K=0}return K},suppressTooltips:function(){this.$Y.suppressHover(this)},setCursor:function(G,H){H.css('cursor',G)},$K:function(G){this.setCursor(G,this.connectNode)},$t:function(){var G=this.get_currentPointerToolMode();if(G==='no-tools'){G=this.get_defaultPointerToolMode()}return G},$L:function(){var G=this.$t();if(tab.FeatureFlags.isEnabled('StickyMapTools')){switch(G){case'area-zoom':{this.$K(C.$6['zoomIn']);break}case'zoom-out':{this.$K(C.$6['zoomOut']);break}default:{this.$K((this.$12?C.$6['select']:C.$6['defaultKey']));break}}}else{switch(G){case'area-zoom':{this.$K(C.$6['zoomIn']);break}case'zoom-out':{this.$K(C.$6['zoomOut']);break}case'lasso-selection':{this.$K((this.$U()?C.$6['lassoExtended']:C.$6['lassoSelect']));break}case'radial-selection':{this.$K((this.$U()?C.$6['radialExtended']:C.$6['radialSelect']));break}case'rectangular-selection':case'pan-map':{this.$o(G);break}default:{this.$K(C.$6['defaultKey']);break}}}},determineDragSelectionCursor:function(){var G=this.$t();switch(G){case'area-zoom':{return C.$6['zoomIn']}case'zoom-out':{return C.$6['zoomOut']}case'lasso-selection':{return(this.$U()?C.$6['lassoExtended']:C.$6['lassoSelect'])}case'radial-selection':{return(this.$U()?C.$6['radialExtended']:C.$6['radialSelect'])}case'rectangular-selection':{return(this.$U()?C.$6['rectExtended']:C.$6['rectSelect'])}case'pan-map':{return C.$6['panDrag']}default:{return C.$6['defaultKey']}}},$o:function(G){if(G!=='rectangular-selection'&&G!=='pan-map'){}if(this.get_isDragTracking()||tab.FeatureFlags.isEnabled('StickyMapTools')){this.$K(((G==='rectangular-selection')?C.$6[this.$H()]:C.$6['panDrag']))}else if(this.$12){var H=!this.isToolDefault('rectangular-selection')&&G==='rectangular-selection';this.$K((H?C.$6[this.$H()]:C.$6['select']))}else if(this.get_currentModifierKeyToolMode()==='pan-map'){this.$K(C.$6['panDrag'])}else if(this.isToolDefault(G)){this.$K(C.$6['defaultKey'])}else{this.$K(((G==='rectangular-selection')?C.$6[this.$H()]:C.$6['panDrag']))}},$H:function(){return(this.$U()?'rectExtended':'rectSelect')},$M:function(G){if(G.originalEvent['button']>1){return}if(this.get_isDragTracking()){return}this.set_isDragTracking(true);dojo.publish('close-menus-all');G.preventDefault();this.$Y.suppressHover(this);var H=G.get_gestureInfo();this.domPanZoomRect.set_pi(null);this.domPanZoomRect.dragStarted(H.startX,H.startY,tab.RecordCast.dojoCoordsAsRectXY(this.getLocalOffset(true)));this.get_shapeSelector().dragStarted(H.startX,H.startY,tab.RecordCast.dojoCoordsAsRectXY(this.getLocalOffset(true)));this.$L()},$O:function(G,H){if(!this.get_isDragTracking()){return}this.set_isDragTracking(false);this.$P(H);this.stopScrolling();this.$L()},$F:function(G,H){this.$E(G,H,this.domPanZoomRect)},$A:function(G,H){this.$E(G,H,this.get_shapeSelector())},$E:function(G,H,I){if(!this.get_isDragTracking()){return}var J=G.originalEvent;if(J['button']>1){return}this.$O(G,I);this.$Y.suppressHover(this);this.$W(G,H)},$B:function(G){G.preventDefault();G.stopPropagation();var H=G.get_gestureInfo();var I=H.pageX-this.domPanZoomRect.get_dragStart().x;var J=H.pageY-this.domPanZoomRect.get_dragStart().y;if(ss.isNullOrUndefined(this.domPanZoomRect.get_pi())||!this.domPanZoomRect.get_pi().canDragH){I=0}if(ss.isNullOrUndefined(this.domPanZoomRect.get_pi())||!this.domPanZoomRect.get_pi().canDragV){J=0}var K=1;I+=K;J+=K;tab.DomUtil.setMarginBoxJQ(this.domDragImage,{l:I,t:J,w:this.domDragImage.width(),h:this.domDragImage.height()});this.backgroundMap.panTo(H.deltaX,H.deltaY)},$C:function(G,H){if(!this.get_isDragTracking()){return}if(G.originalEvent['button']>1){return}G.preventDefault();G.stopPropagation();this.$O(G,null);var I=G.get_gestureInfo();this.$Y.suppressHover(this);var J=this.toLocalCoords(this.domPanZoomRect.get_dragStart());var K={x:I.pageX-this.domPanZoomRect.get_dragStart().x,y:I.pageY-this.domPanZoomRect.get_dragStart().y};if(ss.isNullOrUndefined(this.domPanZoomRect.get_pi())||!this.domPanZoomRect.get_pi().canDragH){K.x=0}if(ss.isNullOrUndefined(this.domPanZoomRect.get_pi())||!this.domPanZoomRect.get_pi().canDragV){K.y=0}this.$G(G,J,K)},$G:function(G,H,I){this.waitingOnPanZoomServerResponse='waitingOnServer';this.resetIsWaitingOnTransition=false;var J=ss.mkdel(this,function(){this.reset()});this.get_viewSession().pan(this.get_regionPart(),H,I,J)},$D:function(G,H){if(this.waitingOnPanZoomServerResponse!=='normal'){return}this.$M(G);this.domPanZoomRect.set_pi(H);this.resetIsWaitingOnTransition=true;this.resetIsWaitingOnData=true;this.showDomDragImage(H)},$I:function(G,H){if(!tsConfig.allow_select){this.$Y.unsuppressHover(this);return}var I=this.get_shapeSelector().get_tooltipAnchor();var J=this.get_regionPart();var K=tab.PointUtil.add(I,tab.RecordCast.dojoCoordsAsPoint(this.getLocalOffset()));var L=ss.mkdel(this,function(){H.multiSelectComplete(K,this.get_shapeSelector().get_hitTestingBox(),J);this.$Y.unsuppressHover(this)});var M=tab.ResolveSelectAction.fromNormalizedEvent(G,true);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var N=this.doSelectMarkAndUbertipFromSelectionShape(M,L);if(tab.MiscUtil.isNullOrEmpty(N)||!tsConfig.allow_tooltip){this.$Y.unsuppressHover(this)}}else{this.get_shapeSelector().sendSelectionCommand(J,M,this.paneTableViewModel.get_visualId(),L)}},$Q:function(G,H){var I=tab.DomUtil.getDojoCoordsJQ(this.domPanZoomRect.get_dom());var J=tab.RecordCast.dojoCoordsAsRectXY(I);var K=this.toLocalCoordsRect(J);this.waitingOnPanZoomServerResponse='waitingOnServer';var L=this.domPanZoomRect.get_pi();if(K.w<4&&K.h<4){this.$S(G,L)}var M=this.getCenterPoint(L);if(!this.isZoomToolActive()){}if(this.get_currentPointerToolMode()==='zoom-out'){var N=this.paneTableViewModel.get_mapServerModel();if(N.get_hasPresModel()&&!tab.MapUtil.allowZoomAtCurrentLevel(N.get_mapServerPresModel().Vot,2)){return}this.$T(L,0.5);return}else{this.backgroundMap.zoomRect(K);this.get_viewSession().zoomIn(this.get_regionPart(),K,M)}var O=this.$s(K);var P=K.w;var Q=K.h;var R=L.w/P;var S=L.h/Q;if(L.canDragH&&L.canDragV){var T=Math.min(R,S);var U=this.paneTableViewModel.get_mapServerModel();if(U.get_hasPresModel()){T=tab.ZoomComputer.resolveDesiredScale(U.get_mapServerPresModel(),T)}R=S=T}else if(!L.canDragV){S=1;O.y=M.y}else if(!L.canDragH){R=1;O.x=M.x}else{return}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()||this.paneTableViewModel.get_visualModel().get_cacheUrlInfo().useUrl){this.animateZoomOnPoint(L,O,R,S)}}},tab.TiledViewerRegion);ss.initClass(D,a,{onMoving:function(){this.get_tooltip().close()},onDragEnd$1:function(){this.get_tooltip().close()},buildBehaviorsDictionary:function(){var G=new u(this.get_tooltip());this.tooltipBehaviors['sticky']=G},clearTooltipWithFakeHover:function(){var G=this.get_currentBehavior();if(!this.get_tooltip().get_isShown()||!ss.isValue(this.get_tooltip().get_lastLocation())||!G.isInSafeZone(this.get_tooltip().get_lastLocation())){tab.TooltipBaseMode.prototype.clearTooltipWithFakeHover.call(this)}}},tab.TooltipBaseLegacyMode);ss.initClass(E,a,{get_canScrollX:function(){return this.get_maxScroll().x>0},get_canScrollY:function(){return this.get_maxScroll().y>0},get_scrollPos:function(){var G=(ss.isNullOrUndefined(this.$0)?0:$(this.$0).scrollLeft());var H=(ss.isNullOrUndefined(this.$1)?0:$(this.$1).scrollTop());return{x:G,y:H}},get_maxScroll:function(){return{x:(ss.isNullOrUndefined(this.$0)?0:(this.$0.scrollWidth-this.$0.offsetWidth)),y:(ss.isNullOrUndefined(this.$1)?0:(this.$1.scrollHeight-this.$1.offsetHeight))}},get_visibleArea:function(){return{w:(ss.isNullOrUndefined(this.$0)?0:this.$0.offsetWidth),h:(ss.isNullOrUndefined(this.$1)?0:this.$1.offsetHeight)}},scrollX:function(G){if(this.get_canScrollX()){this.$0.scrollLeft+=G}},scrollY:function(G){if(this.get_canScrollY()){this.$1.scrollTop+=G}},setScrollTarget:function(G){},refresh:function(){}},null,[spiff.IScroller]);ss.initClass(F,a,{},tab.StepperControlTemplate,[ss.IDisposable]);(function(){spiff.ObjectRegistry.registerType(tab.AccordionView,f).call(null)})();(function(){h.$0="\n            <div class='tabLegendPanel'>\n                <div class='tabLegendBox'>\n                    <div class='tabLegendTitle'></div>\n                    <div class='tabLegendContentHolder' style='overflow:auto'>\n                        <div class='tabLegendColumnHolder' style='white-space:nowrap'></div>\n                    </div>\n                    <div class='tabCatLegendScroll'></div>\n                </div>\n            </div>"})();(function(){spiff.ObjectRegistry.registerType(tab.CategoricalLegendView,i).call(null)})();(function(){j.tableauSliderTemplate="<div class='dijit dijitReset'><div class='dijitReset tableauSlider' dojoAttachPoint='tableauSlider'><table class='dijit dijitReset' cellspacing='0' cellpadding='0' border='0' rules='none'><tr class='dijitReset'><td class='dijitReset'></td><td dojoAttachPoint='containerNode,topDecoration' class='dijitReset' style='text-align:center;width:100%;'></td><td class='dijitReset'></td></tr><tr class='dijitReset'><td class='dijitReset'><div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper' dojoAttachEvent='onclick:_onClkDecBumper'></div></td><td class='dijitReset'><input dojoAttachPoint='valueNode' type='hidden' name='${name}'><div class='dijitReset dijitSliderBarContainerH' waiRole='presentation' dojoAttachPoint='sliderBarContainer'><div waiRole='presentation' dojoAttachPoint='progressBar' class='dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH' dojoAttachEvent='onclick:_onBarClick'><div class='dijitSliderMoveable dijitSliderMoveableH'><div dojoAttachPoint='sliderHandle,focusNode' class='dijitSliderImageHandle dijitSliderImageHandleH' dojoAttachEvent='onmousedown:_onHandleClick' waiRole='slider' valuemin='${minimum}' valuemax='${maximum}'></div></div></div><div waiRole='presentation' dojoAttachPoint='remainingBar' class='dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH' dojoAttachEvent='onclick:_onBarClick'></div></div></td><td class='dijitReset'><div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper' dojoAttachEvent='onclick:_onClkIncBumper'></div></td></tr><tr class='dijitReset'><td class='dijitReset'></td><td dojoAttachPoint='containerNode,bottomDecoration' class='dijitReset'></td><td class='dijitReset'></td></tr></table></div><div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowDec' style='display:none' dojoAttachPoint='decrementButton'><div class='dijitSliderDecrementIconH' tabIndex='-1'><span class='dijitSliderButtonInner'>-</span></div></div><div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowInc' style='display:none' dojoAttachPoint='incrementButton'><div class='dijitSliderIncrementIconH' tabIndex='-1'><span class='dijitSliderButtonInner'>+</span></div></div></div>";spiff.ObjectRegistry.registerType(tab.ContinuousSlider,j).call(null)})();(function(){spiff.ObjectRegistry.registerType(tab.DataConnectionVariableListItemView,l).call(null)})();(function(){spiff.ObjectRegistry.registerType(tab.DataHighlighterView,m).call(null)})();(function(){dojo.addOnLoad(function(){dojo.require('tableau.web.WebClient')})})();(function(){y.$0=[]})();(function(){s.$0="<div class='LegendPanel'><div class='LegendBox'><div class='tabLegendTitle'></div><div class='LegendContent'><img class='LegendImageBody'/></div><div class='tabCatLegendScroll'></div></div><div class='tabLegendHighlighter' showlabel='false' title='Highlight Selected Items'></div></div>"})();(function(){t.$0=120;spiff.ObjectRegistry.registerType(tab.LegacyLegendView,t).call(null)})();(function(){u.$1='.LegacyTooltipBehavior';u.$2=500;u.$3=250;u.$4=10;u.$5=4;u.$6=0;spiff.ObjectRegistry.registerType(tab.ITooltipBehavior,u).call(null)})();(function(){spiff.ObjectRegistry.registerType(tab.MapsSearchView,v).call(null)})();(function(){w.htmlTemplate="<div class='tab-tiledViewer placeholder'><div class='tab-clip'><div class='tab-tvTLSpacer tvimagesNS'><img></img></div><div class='tab-tvTRSpacer tvimagesNS'><img></img></div><div class='tab-tvBLSpacer tvimagesNS'><img></img></div><div class='tab-tvBRSpacer tvimagesNS'><img></img></div><div class='tab-tvYLabel tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvLeftAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvRightAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvXLabel tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvBottomAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvTopAxis tvimagesNS'><div class='tvimagesContainer'></div></div><div class='tab-tvView tvimagesNS'><div class='tvScrollContainer'><div class='tvBackgroundContainer'></div><div class='tvimagesContainer'></div></div><div class='tvViewportBorders'></div></div><div class='tab-tvTitle tvimagesNS'></div><div class='tab-tvCaption tvimagesNS'></div><div class='tab-tvScrollX tvimages'><div class='tvimagesContainer'></div></div><div class='tab-tvScrollY tvimages'><div class='tvimagesContainer'></div></div></div></div>"})();(function(){C.isDragTrackingInAnyRegion=false;C.$3=15;C.$4=15;C.$5=200;C.$6=null})();(function(){spiff.ObjectRegistry.registerType(tab.TooltipBaseLegacyMode,D).call(null)})();(function(){x.$7=500;x.$2=120;x.$3=12;x.$5=3;x.$4=40;x.$6=3;spiff.ObjectRegistry.registerType(tab.PaneTableView,x).call(null)})();(function(){F.template="<span class='tabStepperControl'>\n            <div class='tabButtonContainer'>\n                <div class='tabIncrementButton'>&#x25B2;</div>\n                <div class='tabDecrementButton'>&#x25BC;</div>\n            </div>\n            <input class='tabStepCountValue' type='text'></input>\n        </span>"})();(function(){spiff.ObjectRegistry.registerType(tab.StepperControlView,A).call(null)})()})();